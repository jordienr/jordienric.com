'use strict';

var re = require('react');
var Au = require('react-dom');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var re__default = /*#__PURE__*/_interopDefault(re);
var Au__default = /*#__PURE__*/_interopDefault(Au);

function V(n){this.content=n;}V.prototype={constructor:V,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return -1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new V(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new V(t)},addToStart:function(n,e){return new V([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new V(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new V(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1]);},prepend:function(n){return n=V.from(n),n.size?new V(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=V.from(n),n.size?new V(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=V.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t;}),n},get size(){return this.content.length>>1}};V.from=function(n){if(n instanceof V)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new V(e)};var An=V;function Si(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Si(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize;}}function xi(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){t-=a,r-=a;continue}if(!o.sameMarkup(l))return {a:t,b:r};if(o.isText&&o.text!=l.text){let c=0,d=Math.min(o.text.length,l.text.length);for(;c<d&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,t--,r--;return {a:t,b:r}}if(o.content.size||l.content.size){let c=xi(o.content,l.content,t-1,r-1);if(c)return c}t-=a,r-=a;}}var b=class n{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize;}nodesBetween(e,t,r,i=0,s){for(let o=0,l=0;l<t;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let d=l+1;a.nodesBetween(Math.max(0,e-d),Math.min(a.content.size,t-d),r,i+d);}l=c;}}descendants(e){this.nodesBetween(0,this.size,e);}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(l,a)=>{l.isText?(s+=l.text.slice(Math.max(e,a)-a,t-a),o=!r):l.isLeaf?(i?s+=typeof i=="function"?i(l):i:l.type.spec.leafText&&(s+=l.type.spec.leafText(l)),o=!r):!o&&l.isBlock&&(s+=r,o=!0);},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new n(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>t)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,t-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,t-o-1))),r.push(l),i+=l.nodeSize),o=a;}return new n(r,i)}cutByIndex(e,t){return e==t?n.empty:e==0&&t==this.content.length?this:new n(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new n(i,s)}addToStart(e){return new n([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new n(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return !1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return !1;return !0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize;}}findDiffStart(e,t=0){return Si(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return xi(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Vt(0,e);if(e==this.size)return Vt(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?Vt(r+1,o):Vt(r,i);i=o;}}toString(){return "<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return n.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new n(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return n.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s);}return new n(t||e,r)}static from(e){if(!e)return n.empty;if(e instanceof n)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new n([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};b.empty=new b([],0);var Dn={index:0,offset:0};function Vt(n,e){return Dn.index=n,Dn.offset=e,Dn}function $t(n,e){if(n===e)return !0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return !1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return !1;if(t){if(n.length!=e.length)return !1;for(let r=0;r<n.length;r++)if(!$t(n[r],e[r]))return !1}else {for(let r in n)if(!(r in e)||!$t(n[r],e[r]))return !1;for(let r in e)if(!(r in n))return !1}return !0}var A=class n{constructor(e,t){this.type=e,this.attrs=t;}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else {if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s);}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return !0;return !1}eq(e){return this==e||this.type==e.type&&$t(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return !0;if(e.length!=t.length)return !1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return !1;return !0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return n.none;if(e instanceof n)return [e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};A.none=[];var Ve=class extends Error{},k=class n{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r;}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Ci(this.content,e+this.openStart,t);return r&&new n(r,this.openStart,this.openEnd)}removeBetween(e,t){return new n(Mi(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return n.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new n(b.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new n(e,r,i)}};k.empty=new k(b.empty,0,0);function Mi(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:l}=n.findIndex(t);if(i==e||s.isText){if(l!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(Mi(s.content,e-i-1,t-i-1)))}function Ci(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,t)?null:n.cut(0,e).append(t).append(n.cut(e));let l=Ci(o.content,e-s-1,t);return l&&n.replaceChild(i,o.copy(l))}function Cl(n,e,t){if(t.openStart>n.depth)throw new Ve("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ve("Inconsistent open depths");return wi(n,e,t,0)}function wi(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=wi(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,l=o.content;return ze(o,l.cut(0,n.parentOffset).append(t.content).append(l.cut(e.parentOffset)))}else {let{start:o,end:l}=wl(t,n);return ze(s,Ti(n,o,l,e,r))}else return ze(s,Ht(n,e,r))}function Oi(n,e){if(!e.type.compatibleContent(n.type))throw new Ve("Cannot join "+e.type.name+" onto "+n.type.name)}function Pn(n,e,t){let r=n.node(t);return Oi(r,e.node(t)),r}function Fe(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n);}function yt(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(Fe(n.nodeAfter,r),s++));for(let l=s;l<o;l++)Fe(i.child(l),r);e&&e.depth==t&&e.textOffset&&Fe(e.nodeBefore,r);}function ze(n,e){return n.type.checkContent(e),n.copy(e)}function Ti(n,e,t,r,i){let s=n.depth>i&&Pn(n,e,i+1),o=r.depth>i&&Pn(t,r,i+1),l=[];return yt(null,n,i,l),s&&o&&e.index(i)==t.index(i)?(Oi(s,o),Fe(ze(s,Ti(n,e,t,r,i+1)),l)):(s&&Fe(ze(s,Ht(n,e,i+1)),l),yt(e,t,i,l),o&&Fe(ze(o,Ht(t,r,i+1)),l)),yt(r,null,i,l),new b(l)}function Ht(n,e,t){let r=[];if(yt(null,n,t,r),n.depth>t){let i=Pn(n,e,t+1);Fe(ze(i,Ht(n,e,t+1)),r);}return yt(e,null,t,r),new b(r)}function wl(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(b.from(i));return {start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}var Jt=class n{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1;}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return A.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let l=r;r=i,i=l;}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new $e(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1;}return new n(t,r,s)}static resolveCached(e,t){for(let i=0;i<vn.length;i++){let s=vn[i];if(s.pos==t&&s.doc==e)return s}let r=vn[In]=n.resolve(e,t);return In=(In+1)%Ol,r}},vn=[],In=0,Ol=12,$e=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r;}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Tl=Object.create(null),le=class n{constructor(e,t,r,i=A.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||b.empty;}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e);}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this);}descendants(e){this.nodesBetween(0,this.content.size,e);}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&$t(this.attrs,t||e.defaultAttrs||Tl)&&A.sameSet(this.marks,r||A.none)}copy(e=null){return e==this.content?this:new n(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return k.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new k(c,i.depth-o,s.depth-o)}replace(e,t,r){return Cl(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1;}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return {node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return {node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return {node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return {node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return Jt.resolveCached(this,e)}resolveNoCache(e){return Jt.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ei(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=b.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,t);if(!l||!l.validEnd)return !1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return !1;return !0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return !1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=A.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!A.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check());}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON);}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=b.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,i,r)}};le.prototype.text=void 0;var Bn=class n extends le{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r;}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ei(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Ei(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}var He=class n{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[];}static parse(e,t){let r=new Ln(e,t);if(r.next==null)return n.empty;let i=Ni(r);r.next&&r.err("Unexpected trailing text");let s=Rl(Il(i));return Pl(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return !0;return !1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!t||a.validEnd))return b.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:d,next:u}=o.next[c];if(!(d.isText||d.hasRequiredAttrs())&&i.indexOf(u)==-1){i.push(u);let f=s(u,l.concat(d));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in t)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),t[l.name]=!0);}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next);}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}};He.empty=new He(!0);var Ln=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift();}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function Ni(n){let e=[];do e.push(El(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function El(n){let e=[];do e.push(Nl(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Nl(n){let e=vl(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=Al(n,e);else break;return e}function pi(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function Al(n,e){let t=pi(n),r=t;return n.eat(",")&&(n.next!="}"?r=pi(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function Dl(n,e){let t=n.nodeTypes,r=t[e];if(r)return [r];let i=[];for(let s in t){let o=t[s];o.groups.indexOf(e)>-1&&i.push(o);}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function vl(n){if(n.eat("(")){let e=Ni(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else {let e=Dl(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Il(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l);}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=t());}else if(o.type=="star"){let a=t();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=t();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else {if(o.type=="opt")return [r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let d=t();i(s(o.expr,a),d),a=d;}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let d=t();r(a,d),i(s(o.expr,a),d),a=d;}return [r(a)]}else {if(o.type=="name")return [r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Ai(n,e){return e-n}function mi(n,e){let t=[];return r(e),t.sort(Ai);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&t.indexOf(a)==-1&&r(a);}}}function Rl(n){let e=Object.create(null);return t(mi(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let d=0;d<i.length;d++)i[d][0]==l&&(c=i[d][1]);mi(n,a).forEach(d=>{c||i.push([l,c=[]]),c.indexOf(d)==-1&&c.push(d);});});});let s=e[r.join(",")]=new He(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(Ai);s.next.push({type:i[o][0],next:e[l.join(",")]||t(l)});}return s}}function Pl(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c);}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)");}}function Di(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default;}return e}function vi(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i;}return t}function Ii(n){let e=Object.create(null);if(n)for(let t in n)e[t]=new Fn(n[t]);return e}var Wt=class n{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Ii(r.attrs),this.defaultAttrs=Di(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text";}get isInline(){return !this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==He.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return !0;return !1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return !e&&this.defaultAttrs?this.defaultAttrs:vi(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new le(this,this.computeAttrs(e),b.from(t),A.setFrom(r))}createChecked(e=null,t,r){return t=b.from(t),this.checkContent(t),new le(this,this.computeAttrs(e),t,A.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=b.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t);}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(b.empty,!0);return s?new le(this,e,t.append(s),A.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return !1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return !1;return !0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return !0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return !1;return !0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:A.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new n(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}},Fn=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default;}get isRequired(){return !this.hasDefault}},kt=class n{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=Ii(i.attrs),this.excluded=null;let s=Di(this.attrs);this.instance=s?new A(this,s):null;}create(e=null){return !e&&this.instance?this.instance:new A(this,vi(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new n(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}},jt=class{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=An.from(e.nodes),t.marks=An.from(e.marks||{}),this.nodes=Wt.compile(this.spec.nodes,this),this.marks=kt.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;s.contentMatch=r[o]||(r[o]=He.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=l=="_"?null:l?gi(this,l.split(" ")):l==""||!s.inlineContent?[]:null;}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:gi(this,o.split(" "));}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null);}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Wt){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new Bn(r,r.defaultAttrs,e,A.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return le.fromJSON(this,e)}markFromJSON(e){return A.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function gi(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let l in n.marks){let a=n.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=a);}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}var Je=class n{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{r.tag?this.tags.push(r):r.style&&this.styles.push(r);}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return !1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)});}parse(e,t={}){let r=new Ut(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ut(this,t,!0);return r.addAll(e,t.from,t.to),k.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Fl(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0;}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=t))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0;}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let l=t[o];if((l.priority==null?50:l.priority)<s)break}t.splice(o,0,i);}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=bi(o)),o.mark||o.ignore||o.clearMark||(o.mark=i);});}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=bi(o)),o.node||o.ignore||o.mark||(o.node=i);});}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new n(e,n.schemaRules(e)))}},Ri={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Bl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Pi={ol:!0,ul:!0},Kt=1,qt=2,bt=4;function yi(n,e,t){return e!=null?(e?Kt:0)|(e==="full"?qt:0):n&&n.whitespace=="pre"?Kt|qt:t&~bt}var nt=class{constructor(e,t,r,i,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=l,this.content=[],this.activeMarks=A.none,this.stashMarks=[],this.match=o||(l&bt?null:e.contentMatch);}findWrapping(e){if(!this.match){if(!this.type)return [];let t=this.type.contentMatch.fillBefore(b.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else {let r=this.type.contentMatch,i;return (i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Kt)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length));}}let t=b.from(this.content);return !e&&this.match&&(t=t.append(this.match.fillBefore(b.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let i=r[t];(this.type?this.type.allowsMarkType(i.type):Vl(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks));}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ri.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Ut=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=yi(null,t.preserveWhitespace,0)|(r?bt:0);i?s=new nt(i.type,i.attrs,A.none,A.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new nt(null,null,A.none,A.none,!0,null,o):s=new nt(e.schema.topNodeType,null,A.none,A.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1;}get top(){return this.nodes[this.open]}addDOM(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){let t=e.getAttribute("style");if(!t)this.addElement(e);else {let r=this.readStyles(zl(t));if(!r)return;let[i,s]=r,o=this.top;for(let l=0;l<s.length;l++)this.removePendingMark(s[l],o);for(let l=0;l<i.length;l++)this.addPendingMark(i[l]);this.addElement(e);for(let l=0;l<i.length;l++)this.removePendingMark(i[l],o);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);}}}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&qt||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&Kt)r.options&qt?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(t=t.slice(1));}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e);}else this.findInside(e);}addElement(e,t){let r=e.nodeName.toLowerCase(),i;Pi.hasOwnProperty(r)&&this.parser.normalizeLists&&Ll(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(s?s.ignore:Bl.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,l=this.top,a=this.needsBlock;if(Ri.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),o=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),o&&this.sync(l),this.needsBlock=a;}else this.addElementByRule(e,s,s.consuming===!1?i:void 0);}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`));}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"));}readStyles(e){let t=A.none,r=A.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(l=>{o.clearMark(l)&&(r=l.addToSet(r));}):t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),o.consuming===!1)s=o;else break}return [t,r]}addElementByRule(e,t,r){let i,s,o;t.node?(s=this.parser.schema.nodes[t.node],s.isLeaf?this.insertNode(s.create(t.attrs))||this.leafFallback(e):i=this.enter(s,t.attrs||null,t.preserveWhitespace)):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));let l=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a));else {let a=e;typeof t.contentElement=="string"?a=e.querySelector(t.contentElement):typeof t.contentElement=="function"?a=t.contentElement(e):t.contentElement&&(a=t.contentElement),this.findAround(e,a,!0),this.addAll(a);}i&&this.sync(l)&&this.open--,o&&this.removePendingMark(o,l);}addAll(e,t,r){let i=t||0;for(let s=t?e.childNodes[t]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i);}findPlace(e){let t,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,r=s,!o.length)||s.solid)break}if(!t)return !1;this.sync(r);for(let i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return !0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t);}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let i=0;i<e.marks.length;i++)(!t.type||t.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return t.content.push(e.mark(r)),!0}return !1}enter(e,t,r){let i=this.findPlace(e.create(t));return i&&this.enterInner(e,t,!0,r),i}enterInner(e,t=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=yi(e,i,s.options);s.options&bt&&s.content.length==0&&(o|=bt),this.nodes.push(new nt(e,t,s.activeMarks,s.pendingMarks,r,null,o)),this.open++;}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1;}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return !1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++;}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos);}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos);}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos);}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset));}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=t[l];if(c==""){if(l==t.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return !0;return !1}else {let d=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!d||d.name!=c&&d.groups.indexOf(c)==-1)return !1;a--;}}return !0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=$l(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks);}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else {i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks));}if(i==t)break}}};function Ll(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Pi.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null);}}function Fl(n,e){return (n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function zl(n){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(n);)r.push(t[1],t[2].trim());return r}function bi(n){let e={};for(let t in n)e[t]=n[t];return e}function Vl(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:d}=l.edge(a);if(c==e||s.indexOf(d)<0&&o(d))return !0}};if(o(i.contentMatch))return !0}}function $l(n,e){for(let t=0;t<e.length;t++)if(n.eq(e[t]))return e[t]}var ke=class n{constructor(e,t){this.nodes=e,this.marks=t;}serializeFragment(e,t={},r){r||(r=Rn(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++;}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],d=this.serializeMark(c,o.isInline,t);d&&(s.push([c,i]),i.appendChild(d.dom),i=d.contentDOM||d.dom);}}i.appendChild(this.serializeNodeInner(o,t));}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=n.renderSpec(Rn(t),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i);}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom);}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&n.renderSpec(Rn(r),i(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return {dom:e.createTextNode(t)};if(t.nodeType!=null)return {dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,l=r?e.createElementNS(r,i):e.createElement(i),a=t[1],c=1;if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){c=2;for(let d in a)if(a[d]!=null){let u=d.indexOf(" ");u>0?l.setAttributeNS(d.slice(0,u),d.slice(u+1),a[d]):l.setAttribute(d,a[d]);}}for(let d=c;d<t.length;d++){let u=t[d];if(u===0){if(d<t.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return {dom:l,contentDOM:l}}else {let{dom:f,contentDOM:h}=n.renderSpec(e,u,r);if(l.appendChild(f),h){if(o)throw new RangeError("Multiple content holes");o=h;}}}return {dom:l,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new n(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ki(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return ki(e.marks)}};function ki(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r);}return e}function Rn(n){return n.document||window.document}var Fi=65535,zi=Math.pow(2,16);function Hl(n,e){return n+e*zi}function Bi(n){return n&Fi}function Jl(n){return (n-(n&Fi))/zi}var Vi=1,$i=2,_t=4,Hi=8,Mt=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r;}get deleted(){return (this.delInfo&Hi)>0}get deletedBefore(){return (this.delInfo&(Vi|_t))>0}get deletedAfter(){return (this.delInfo&($i|_t))>0}get deletedAcross(){return (this.delInfo&_t)>0}},Oe=class n{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&n.empty)return n.empty}recover(e){let t=0,r=Bi(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Jl(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],d=this.ranges[l+o],u=a+c;if(e<=u){let f=c?e==a?-1:e==u?1:t:t,h=a+i+(f<0?0:d);if(r)return h;let p=e==(t<0?a:u)?null:Hl(l/3,e-a),m=e==a?$i:e==u?Vi:_t;return (t<0?e!=a:e!=u)&&(m|=Hi),new Mt(h,m,p)}i+=d-c;}return r?e+i:new Mt(e+i,0,null)}touches(e,t){let r=0,i=Bi(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],d=a+c;if(e<=d&&l==i*3)return !0;r+=this.ranges[l+o]-c;}return !1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+t],d=this.ranges[i+r];e(l,l+c,a,a+d),s+=d-c;}}invert(){return new n(this.ranges,!this.inverted)}toString(){return (this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?n.empty:new n(e<0?[0,-e,0]:[0,0,e])}};Oe.empty=new Oe([]);var Ct=class n{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i;}slice(e=0,t=this.maps.length){return new n(this.maps,this.mirror,e,t)}copy(){return new n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t);}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0);}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t);}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0);}}invert(){let e=new n;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],l=o.mapResult(e,t);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this.maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos;}return r?e:new Mt(e,i,null)}},zn=Object.create(null),H=class{getMap(){return Oe.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zn[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zn)throw new RangeError("Duplicate use of step JSON ID "+e);return zn[e]=t,t.prototype.jsonID=e,t}},$=class n{constructor(e,t){this.doc=e,this.failed=t;}static ok(e){return new n(e,null)}static fail(e){return new n(null,e)}static fromReplace(e,t,r,i){try{return n.ok(e.replace(t,r,i))}catch(s){if(s instanceof Ve)return n.fail(s.message);throw s}}};function Wn(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(Wn(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s);}return b.fromArray(r)}var wt=class n extends H{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r;}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new k(Wn(t.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return $.fromReplace(e,this.from,this.to,s)}invert(){return new We(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return {stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};H.jsonID("addMark",wt);var We=class n extends H{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r;}apply(e){let t=e.slice(this.from,this.to),r=new k(Wn(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return $.fromReplace(e,this.from,this.to,r)}invert(){return new wt(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}merge(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return {stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}};H.jsonID("removeMark",We);var Ot=class n extends H{constructor(e,t){super(),this.pos=e,this.mark=t;}apply(e){let t=e.nodeAt(this.pos);if(!t)return $.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return $.fromReplace(e,this.pos,this.pos+1,new k(b.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new n(this.pos,t.marks[i]);return new n(this.pos,this.mark)}}return new Tt(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return {stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};H.jsonID("addNodeMark",Ot);var Tt=class n extends H{constructor(e,t){super(),this.pos=e,this.mark=t;}apply(e){let t=e.nodeAt(this.pos);if(!t)return $.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return $.fromReplace(e,this.pos,this.pos+1,new k(b.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return !t||!this.mark.isInSet(t.marks)?this:new Ot(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}toJSON(){return {stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}};H.jsonID("removeNodeMark",Tt);var X=class n extends H{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i;}apply(e){return this.structure&&Hn(e,this.from,this.to)?$.fail("Structure replace would overwrite content"):$.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Oe([this.from,this.to-this.from,this.slice.size])}invert(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?k.empty:new k(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?k.empty:new k(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,k.fromJSON(e,t.slice),!!t.structure)}};H.jsonID("replace",X);var R=class n extends H{constructor(e,t,r,i,s,o,l=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l;}apply(e){if(this.structure&&(Hn(e,this.from,this.gapFrom)||Hn(e,this.gapTo,this.to)))return $.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return $.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?$.fromReplace(e,this.from,this.to,r):$.fail("Content does not fit in gap")}getMap(){return new Oe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new n(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,k.fromJSON(e,t.slice),t.insert,!!t.structure)}};H.jsonID("replaceAround",R);function Hn(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return !0;o=o.firstChild,i--;}}return !1}function Wl(n,e,t,r){let i=[],s=[],o,l;n.doc.nodesBetween(e,t,(a,c,d)=>{if(!a.isInline)return;let u=a.marks;if(!r.isInSet(u)&&d.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+a.nodeSize,t),p=r.addToSet(u);for(let m=0;m<u.length;m++)u[m].isInSet(p)||(o&&o.to==f&&o.mark.eq(u[m])?o.to=h:i.push(o=new We(f,h,u[m])));l&&l.to==f?l.to=h:s.push(l=new wt(f,h,r));}}),i.forEach(a=>n.step(a)),s.forEach(a=>n.step(a));}function jl(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof kt){let c=o.marks,d;for(;d=r.isInSet(c);)(a||(a=[])).push(d),c=d.removeFromSet(c);}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,t);for(let d=0;d<a.length;d++){let u=a[d],f;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&u.eq(i[h].style)&&(f=p);}f?(f.to=c,f.step=s):i.push({style:u,from:Math.max(l,e),to:c,step:s});}}}),i.forEach(o=>n.step(new We(o.from,o.to,o.style)));}function Kl(n,e,t,r=t.contentMatch){let i=n.doc.nodeAt(e),s=[],o=e+1;for(let l=0;l<i.childCount;l++){let a=i.child(l),c=o+a.nodeSize,d=r.matchType(a.type);if(!d)s.push(new X(o,c,k.empty));else {r=d;for(let u=0;u<a.marks.length;u++)t.allowsMarkType(a.marks[u].type)||n.step(new We(o,c,a.marks[u]));}o=c;}if(!r.validEnd){let l=r.fillBefore(b.empty,!0);n.replace(o,o,new k(l,0,0));}for(let l=s.length-1;l>=0;l--)n.step(s[l]);}function ql(n,e,t){return (e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Se(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!ql(i,s,o))break}return null}function Ul(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,d=b.empty,u=0;for(let p=s,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,d=b.from(r.node(p).copy(d)),u++):a--;let f=b.empty,h=0;for(let p=s,m=!1;p>t;p--)m||i.after(p+1)<i.end(p)?(m=!0,f=b.from(i.node(p).copy(f)),h++):c++;n.step(new R(a,c,o,l,new k(d.append(f),u,h),d.size-u,!0));}function it(n,e,t=null,r=n){let i=_l(n,e),s=i&&Gl(r,e);return s?i.map(Li).concat({type:e,attrs:t}).concat(s.map(Li)):null}function Li(n){return {type:n,attrs:null}}function _l(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function Gl(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(t.child(c).type);return !a||!a.validEnd?null:o}function Yl(n,e,t){let r=b.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let l=t[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=b.from(t[o].type.create(t[o].attrs,r));}let i=e.start,s=e.end;n.step(new R(i,s,i,s,new k(r,0,0),t.length,!0));}function Xl(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,l)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Zl(n.doc,n.mapping.slice(s).map(l),r)){n.clearIncompatible(n.mapping.slice(s).map(l,1),r);let a=n.mapping.slice(s),c=a.map(l,1),d=a.map(l+o.nodeSize,1);return n.step(new R(c,d,c+1,d-1,new k(b.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}});}function Zl(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function Ql(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new R(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new k(b.from(o),0,0),1,!0));}function ie(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return !1;for(let c=i.depth-1,d=t-2;c>s;c--,d--){let u=i.node(c),f=i.index(c);if(u.type.spec.isolating)return !1;let h=u.content.cutByIndex(f,u.childCount),p=r&&r[d+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[d]||u;if(!u.canReplace(f+1,u.childCount)||!m.type.validContent(h))return !1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function ea(n,e,t=1,r){let i=n.doc.resolve(e),s=b.empty,o=b.empty;for(let l=i.depth,a=i.depth-t,c=t-1;l>a;l--,c--){s=b.from(i.node(l).copy(s));let d=r&&r[c];o=b.from(d?d.type.create(d.attrs,o):i.node(l).copy(o));}n.step(new X(e,e,new k(s.append(o),t,t),!0));}function ae(n,e){let t=n.resolve(e),r=t.index();return Ji(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function Ji(n,e){return !!(n&&e&&!n.isLeaf&&n.canAppend(e))}function st(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&Ji(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i);}}function ta(n,e,t){let r=new X(e-t,e+t,k.empty,!0);n.step(r);}function na(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function Yt(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),d=!1;if(s==1)d=c.canReplace(a,a,i);else {let u=c.contentMatchAt(a).findWrapping(i.firstChild.type);d=u&&c.canReplaceWith(a,a,u[0]);}if(d)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Xt(n,e,t=e,r=k.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return Wi(i,s,r)?new X(e,t,r):new Jn(i,s,r).fit()}function Wi(n,e,t){return !t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}var Jn=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=b.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))});}for(let i=e.depth;i>0;i--)this.placed=b.from(e.node(i).copy(this.placed));}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode();}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new k(s,o,l);return e>-1?new R(r.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||r.pos!=this.$to.pos?new X(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content;}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Vn(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],d,u=null;if(t==1&&(o?c.matchType(o.type)||(u=c.fillBefore(b.from(o),!1)):s&&a.compatibleContent(s.type)))return {sliceDepth:r,frontierDepth:l,parent:s,inject:u};if(t==2&&o&&(d=c.findWrapping(o.type)))return {sliceDepth:r,frontierDepth:l,parent:s,wrap:d};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Vn(e,t);return !i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new k(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Vn(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new k(St(e,t-1,1),t-1,s?t-1:r);}else this.unplaced=new k(St(e,t,1),t,r);}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,d=[],{match:u,type:f}=this.frontier[t];if(i){for(let m=0;m<i.childCount;m++)d.push(i.child(m));u=u.matchFragment(i);}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),g=u.matchType(m.type);if(!g)break;c++,(c>1||a==0||m.content.size)&&(u=g,d.push(ji(m.mark(f.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?h:-1)));}let p=c==l.childCount;p||(h=-1),this.placed=xt(this.placed,t,b.from(d)),this.frontier[t].match=u,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<h;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content;}this.unplaced=p?e==0?k.empty:new k(St(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new k(St(o.content,e,c),o.openStart,o.openEnd);}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!$n(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=$n(e,t,i,r,s);if(o){for(let l=t-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],d=$n(e,l,c,a,!0);if(!d||d.childCount)continue e}return {depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=xt(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s);}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=xt(this.placed,this.depth,b.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch});}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(b.empty,!0);t.childCount&&(this.placed=xt(this.placed,this.frontier.length,t));}};function St(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(St(n.firstChild.content,e-1,t)))}function xt(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(xt(n.lastChild.content,e-1,t)))}function Vn(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function ji(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,ji(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(b.empty,!0)))),n.copy(r)}function $n(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!ra(t,s.content,o)?l:null}function ra(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return !0;return !1}function ia(n){return n.spec.defining||n.spec.definingForContent}function sa(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(Wi(i,s,r))return n.step(new X(e,t,r));let o=qi(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let p=i.node(f).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==h&&o.splice(1,0,-f);}let a=o.indexOf(l),c=[],d=r.openStart;for(let f=r.content,h=0;;h++){let p=f.firstChild;if(c.push(p),h==r.openStart)break;f=p.content;}for(let f=d-1;f>=0;f--){let h=c[f].type,p=ia(h);if(p&&i.node(a).type!=h)d=f;else if(p||!h.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+d+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let g=o[(m+a)%o.length],y=!0;g<0&&(y=!1,g=-g);let x=i.node(g-1),T=i.index(g-1);if(x.canReplaceWith(T,T,p.type,p.marks))return n.replace(i.before(g),y?s.after(g):t,new k(Ki(r.content,0,r.openStart,h),h,r.openEnd))}}let u=n.steps.length;for(let f=o.length-1;f>=0&&(n.replace(e,t,r),!(n.steps.length>u));f--){let h=o[f];h<0||(e=i.before(h),t=s.after(h));}}function Ki(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(Ki(s.content,e+1,t,r,s)));}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(b.empty,!0));}return n}function oa(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=na(n.doc,e,r.type);i!=null&&(e=t=i);}n.replaceRange(e,t,new k(b.from(r),0,0));}function la(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=qi(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return n.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return n.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o)return n.delete(r.before(o),t);n.delete(e,t);}function qi(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i);}return t}var Gt=class n extends H{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r;}apply(e){let t=e.nodeAt(this.pos);if(!t)return $.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return $.fromReplace(e,this.pos,this.pos+1,new k(b.from(i),0,t.isLeaf?0:1))}getMap(){return Oe.empty}invert(e){return new n(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.attr,this.value)}toJSON(){return {stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(t.pos,t.attr,t.value)}};H.jsonID("attr",Gt);var rt=class extends Error{};rt=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};rt.prototype=Object.create(Error.prototype);rt.prototype.constructor=rt;rt.prototype.name="TransformError";var Et=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ct;}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new rt(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t;}replace(e,t=e,r=k.empty){let i=Xt(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new k(b.from(r),0,0))}delete(e,t){return this.replace(e,t,k.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return sa(this,e,t,r),this}replaceRangeWith(e,t,r){return oa(this,e,t,r),this}deleteRange(e,t){return la(this,e,t),this}lift(e,t){return Ul(this,e,t),this}join(e,t=1){return ta(this,e,t),this}wrap(e,t){return Yl(this,e,t),this}setBlockType(e,t=e,r,i=null){return Xl(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return Ql(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new Gt(e,t,r)),this}addNodeMark(e,t){return this.step(new Ot(e,t)),this}removeNodeMark(e,t){if(!(t instanceof A)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Tt(e,t)),this}split(e,t=1,r){return ea(this,e,t,r),this}addMark(e,t,r){return Wl(this,e,t,r),this}removeMark(e,t,r){return jl(this,e,t,r),this}clearIncompatible(e,t,r){return Kl(this,e,t,r),this}};var jn=Object.create(null),C=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new qn(e.min(t),e.max(t))];}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return !1;return !0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=k.empty){let r=t.content.lastChild,i=null;for(let l=0;l<t.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],d=e.mapping.slice(s);e.replaceRange(d.map(a.pos),d.map(c.pos),l?k.empty:t),l==0&&Gi(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1);}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),d=a.map(l.pos);s?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),Gi(e,r,t.isInline?-1:1));}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new w(e):ot(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?ot(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):ot(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ee(e.node(0))}static atStart(e){return ot(e,e,0,0,1)||new ee(e)}static atEnd(e){return ot(e,e,e.content.size,e.childCount,-1)||new ee(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=jn[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in jn)throw new RangeError("Duplicate use of selection JSON ID "+e);return jn[e]=t,t.prototype.jsonID=e,t}getBookmark(){return w.between(this.$anchor,this.$head).getBookmark()}};C.prototype.visible=!0;var qn=class{constructor(e,t){this.$from=e,this.$to=t;}},Ui=!1;function _i(n){!Ui&&!n.parent.inlineContent&&(Ui=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"));}var w=class n extends C{constructor(e,t=e){_i(e),_i(t),super(e,t);}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return C.near(r);let i=e.resolve(t.map(this.anchor));return new n(i.parent.inlineContent?i:r,r)}replace(e,t=k.empty){if(super.replace(e,t),t==k.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r);}}eq(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Qt(this.anchor,this.head)}toJSON(){return {type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=C.findFrom(t,r,!0)||C.findFrom(t,-r,!0);if(s)t=s.$head;else return C.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(C.findFrom(e,-r,!0)||C.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new n(e,t)}};C.jsonID("text",w);var Qt=class n{constructor(e,t){this.anchor=e,this.head=t;}map(e){return new n(e.map(this.anchor),e.map(this.head))}resolve(e){return w.between(e.resolve(this.anchor),e.resolve(this.head))}},M=class n extends C{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t;}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?C.near(s):new n(s)}content(){return new k(b.from(this.node),0,0)}eq(e){return e instanceof n&&e.anchor==this.anchor}toJSON(){return {type:"node",anchor:this.anchor}}getBookmark(){return new Un(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}static create(e,t){return new n(e.resolve(t))}static isSelectable(e){return !e.isText&&e.type.spec.selectable!==!1}};M.prototype.visible=!1;C.jsonID("node",M);var Un=class n{constructor(e){this.anchor=e;}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Qt(r,r):new n(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&M.isSelectable(r)?new M(t):C.near(t)}},ee=class n extends C{constructor(e){super(e.resolve(0),e.resolve(e.content.size));}replace(e,t=k.empty){if(t==k.empty){e.delete(0,e.doc.content.size);let r=C.atStart(e.doc);r.eq(e.selection)||e.setSelection(r);}else super.replace(e,t);}toJSON(){return {type:"all"}}static fromJSON(e){return new n(e)}map(e){return new n(e)}eq(e){return e instanceof n}getBookmark(){return aa}};C.jsonID("all",ee);var aa={map(){return this},resolve(n){return new ee(n)}};function ot(n,e,t,r,i,s=!1){if(e.inlineContent)return w.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&M.isSelectable(l))return M.create(n,t-(i<0?l.nodeSize:0))}else {let a=ot(n,l,t+i,i<0?l.childCount:0,i,s);if(a)return a}t+=l.nodeSize*i;}return null}function Gi(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof X||i instanceof R))return;let s=n.mapping.maps[r],o;s.forEach((l,a,c,d)=>{o==null&&(o=d);}),n.setSelection(C.near(n.doc.resolve(o),t));}var Yi=1,Zt=2,Xi=4,_n=class extends Et{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks;}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Yi)&~Zt,this.storedMarks=null,this}get selectionSet(){return (this.updated&Yi)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Zt,this}ensureMarks(e){return A.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return (this.updated&Zt)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Zt,this.storedMarks=null;}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||A.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r));}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(C.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return !1;return !0}scrollIntoView(){return this.updated|=Xi,this}get scrolledIntoView(){return (this.updated&Xi)>0}};function Zi(n,e){return !e||!n?n:n.bind(e)}var je=class{constructor(e,t,r){this.name=e,this.init=Zi(t.init,r),this.apply=Zi(t.apply,r);}},ca=[new je("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new je("selection",{init(n,e){return n.selection||C.atStart(e.doc)},apply(n){return n.selection}}),new je("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new je("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})],Nt=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ca.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new je(r.key,r.spec.state,r));});}},en=class n{constructor(e){this.config=e;}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return !1}return !0}applyTransaction(e){if(!this.filterTransaction(e))return {state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,d=a<t.length&&l.spec.appendTransaction.call(l,a?t.slice(a):t,c,r);if(d&&r.filterTransaction(d,o)){if(d.setMeta("appendedTransaction",e),!i){i=[];for(let u=0;u<this.config.plugins.length;u++)i.push(u<o?{state:r,n:t.length}:{state:this,n:0});}t.push(d),r=r.applyInner(d),s=!0;}i&&(i[o]={state:r,n:t.length});}}if(!s)return {state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new n(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t);}return t}get tr(){return new _n(this)}static create(e){let t=new Nt(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new n(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Nt(this.schema,e.plugins),r=t.fields,i=new n(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i);}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]));}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Nt(e.schema,e.plugins),s=new n(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=le.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=C.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else {if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,l)){s[o.name]=c.fromJSON.call(a,e,t[l],s);return}}s[o.name]=o.init(e,s);}}),s}};function Qi(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Qi(i,e,{})),t[r]=i;}return t}var P=class{constructor(e){this.spec=e,this.props={},e.props&&Qi(e.props,this,this.props),this.key=e.key?e.key.key:es("plugin");}getState(e){return e[this.key]}},Kn=Object.create(null);function es(n){return n in Kn?n+"$"+ ++Kn[n]:(Kn[n]=0,n+"$")}var te=class{constructor(e="key"){this.key=es(e);}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var ne=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Rt=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e},ts=null,xe=function(n,e,t){let r=ts||(ts=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},Ze=function(n,e,t,r){return t&&(ns(n,e,t,r,-1)||ns(n,e,t,r,1))},da=/^(img|br|input|textarea|hr)$/i;function ns(n,e,t,r,i){for(;;){if(n==t&&e==r)return !0;if(e==(i<0?0:ue(n))){let s=n.parentNode;if(!s||s.nodeType!=1||fa(n)||da.test(n.nodeName)||n.contentEditable=="false")return !1;e=ne(n)+(i<0?0:1),n=s;}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return !1;e=i<0?ue(n):0;}else return !1}}function ue(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ua(n,e,t){for(let r=e==0,i=e==ue(n);r||i;){if(n==t)return !0;let s=ne(n);if(n=n.parentNode,!n)return !1;r=r&&s==0,i=i&&s==ue(n);}}function fa(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}var dn=function(n){return n.focusNode&&Ze(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ke(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function ha(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function pa(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return {node:r.offsetNode,offset:r.offset}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return {node:r.startContainer,offset:r.startOffset}}}var fe=typeof navigator<"u"?navigator:null,rs=typeof document<"u"?document:null,ve=fe&&fe.userAgent||"",Qn=/Edge\/(\d+)/.exec(ve),Ps=/MSIE \d/.exec(ve),er=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ve),Z=!!(Ps||er||Qn),Ae=Ps?document.documentMode:er?+er[1]:Qn?+Qn[1]:0,de=!Z&&/gecko\/(\d+)/i.test(ve);de&&+(/Firefox\/(\d+)/.exec(ve)||[0,0])[1];var tr=!Z&&/Chrome\/(\d+)/.exec(ve),W=!!tr,ma=tr?+tr[1]:0,U=!Z&&!!fe&&/Apple Computer/.test(fe.vendor),dt=U&&(/Mobile\/\w+/.test(ve)||!!fe&&fe.maxTouchPoints>2),se=dt||(fe?/Mac/.test(fe.platform):!1),ga=fe?/Win/.test(fe.platform):!1,ce=/Android \d/.test(ve),un=!!rs&&"webkitFontSmoothing"in rs.documentElement.style,ya=un?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ba(n){return {left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Te(n,e){return typeof n=="number"?n:n[e]}function ka(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return {left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function is(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=Rt(o)){if(o.nodeType!=1)continue;let l=o,a=l==s.body,c=a?ba(s):ka(l),d=0,u=0;if(e.top<c.top+Te(r,"top")?u=-(c.top-e.top+Te(i,"top")):e.bottom>c.bottom-Te(r,"bottom")&&(u=e.bottom-c.bottom+Te(i,"bottom")),e.left<c.left+Te(r,"left")?d=-(c.left-e.left+Te(i,"left")):e.right>c.right-Te(r,"right")&&(d=e.right-c.right+Te(i,"right")),d||u)if(a)s.defaultView.scrollBy(d,u);else {let f=l.scrollLeft,h=l.scrollTop;u&&(l.scrollTop+=u),d&&(l.scrollLeft+=d);let p=l.scrollLeft-f,m=l.scrollTop-h;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m};}if(a)break}}function Sa(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=n.root.elementFromPoint(s,o);if(!l||l==n.dom||!n.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=t-20){r=l,i=a.top;break}}return {refDOM:r,refTop:i,stack:Bs(n.dom)}}function Bs(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Rt(r));return e}function xa({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;Ls(t,r==0?0:r-e);}function Ls(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s);}}var lt=null;function Ma(n){if(n.setActive)return n.setActive();if(lt)return n.focus(lt);let e=Bs(n);n.focus(lt==null?{get preventScroll(){return lt={preventScroll:!0},!0}}:void 0),lt||(lt=!1,Ls(e,0));}function Fs(n,e){let t,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let d=n.firstChild,u=0;d;d=d.nextSibling,u++){let f;if(d.nodeType==1)f=d.getClientRects();else if(d.nodeType==3)f=xe(d).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=d,r=m,i=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,d.nodeType==1&&m&&(s=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=d,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=u+1);}}return !t&&a&&(t=a,i=c,r=0),t&&t.nodeType==3?Ca(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:Fs(t,i)}function Ca(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Ee(r,1);if(s.top!=s.bottom&&kr(e,s))return {node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return {node:n,offset:0}}function kr(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function wa(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function Oa(n,e,t){let{node:r,offset:i}=Fs(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1;}return n.docView.posFromDOM(r,i,s)}function Ta(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let l=n.docView.nearestDesc(s,!0);if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent&&!o||!l.contentDOM)){let a=l.dom.getBoundingClientRect();if(l.node.isBlock&&l.parent&&!o&&(o=!0,a.left>r.left||a.top>r.top?i=l.posBefore:(a.right<r.left||a.bottom<r.top)&&(i=l.posAfter)),!l.contentDOM&&i<0)return (l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter}s=l.dom.parentNode;}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function zs(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(kr(e,c))return zs(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function Ea(n,e){let t=n.dom.ownerDocument,r,i=0,s=pa(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),l;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!kr(e,c)||(o=zs(n.dom,e,c),!o))return null}if(U)for(let c=o;r&&c;c=Rt(c))c.draggable&&(r=void 0);if(o=wa(o,e),r){if(de&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let c=r.childNodes[i],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++;}r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Ta(n,r,i,e));}l==null&&(l=Oa(n,o,e));let a=n.docView.nearestDesc(o,!0);return {pos:l,inside:a?a.posAtStart-a.border:-1}}function ss(n){return n.top<n.bottom||n.left<n.right}function Ee(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(ss(r))return r}return Array.prototype.find.call(t,ss)||n.getBoundingClientRect()}var Na=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Vs(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=un||de;if(r.nodeType==3)if(o&&(Na.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let a=Ee(xe(r,i,i),t);if(de&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Ee(xe(r,i-1,i-1),-1);if(c.top==a.top){let d=Ee(xe(r,i,i+1),-1);if(d.top!=a.top)return At(d,d.left<c.left)}}return a}else {let a=i,c=i,d=t<0?1:-1;return t<0&&!i?(c++,d=-1):t>=0&&i==r.nodeValue.length?(a--,d=1):t<0?a--:c++,At(Ee(xe(r,a,c),d),d<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==ue(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Gn(a.getBoundingClientRect(),!1)}if(s==null&&i<ue(r)){let a=r.childNodes[i];if(a.nodeType==1)return Gn(a.getBoundingClientRect(),!0)}return Gn(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==ue(r))){let a=r.childNodes[i-1],c=a.nodeType==3?xe(a,ue(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return At(Ee(c,1),!1)}if(s==null&&i<ue(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?xe(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return At(Ee(c,-1),!0)}return At(Ee(r.nodeType==3?xe(r):r,-t),t>=0)}function At(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return {top:n.top,bottom:n.bottom,left:t,right:t}}function Gn(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return {top:t,bottom:t,left:n.left,right:n.right}}function $s(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus();}}function Aa(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return $s(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let l=n.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode;}let o=Vs(n,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=xe(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let d=a[c];if(d.bottom>d.top+1&&(t=="up"?o.top-d.top>(d.bottom-o.top)*2:d.bottom-o.bottom>(o.bottom-d.top)*2))return !1}}return !0})}var Da=/[\u0590-\u08ac]/;function va(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return !1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=n.domSelection();return !Da.test(r.parent.textContent)||!l.modify?t=="left"||t=="backward"?s:o:$s(n,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:d,anchorOffset:u}=n.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",t,"character");let h=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),g=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(d,u),a&&(a!=d||c!=u)&&l.extend&&l.extend(a,c);}catch{}return f!=null&&(l.caretBidiLevel=f),g})}var ls=null,as=null,cs=!1;function Ia(n,e,t){return ls==e&&as==t?cs:(ls=e,as=t,cs=t=="up"||t=="down"?Aa(n,e,t):va(n,e,t))}var oe=0,ds=1,Ue=2,he=3,Qe=class{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=oe,r.pmViewDesc=this;}matchesWidget(e){return !1}matchesMark(e){return !1}matchesNode(e,t,r){return !1}matchesHack(e){return !1}parseRule(){return null}stopEvent(e){return !1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy();}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size;}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else {for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling;}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else {let s,o;if(e==this.contentDOM)s=e.childNodes[t];else {for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling;}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>ne(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return -1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s;}}domFromPos(e,t){if(!this.contentDOM)return {node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof rn){i=e-s;break}s=l;}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tn&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?ne(s.dom)+1:0}}else {let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?ne(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return {node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let d=o+a.border;if(e>=d&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,d);e=o;for(let u=l;u>0;u--){let f=this.children[u-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=ne(f.dom)+1;break}e-=f.size;}i==-1&&(i=0);}if(i>-1&&(c>t||l==this.children.length-1)){t=c;for(let d=l+1;d<this.children.length;d++){let u=this.children[d];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){s=ne(u.dom);break}t+=u.size;}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c;}return {node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return !1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let f=0,h=0;f<this.children.length;f++){let p=this.children[f],m=h+p.size;if(s>h&&o<m)return p.setSelection(e-h-p.border,t-h-p.border,r,i);h=m;}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),c=r.getSelection(),d=!1;if((de||U)&&e==t){let{node:f,offset:h}=l;if(f.nodeType==3){if(d=!!(h&&f.nodeValue[h-1]==`
`),d&&h==f.nodeValue.length)for(let p=f,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(l=a={node:m.parentNode,offset:ne(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else {let p=f.childNodes[h-1];d=p&&(p.nodeName=="BR"||p.contentEditable=="false");}}if(de&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let f=c.focusNode.childNodes[c.focusOffset];f&&f.contentEditable=="false"&&(i=!0);}if(!(i||d&&U)&&Ze(l.node,l.offset,c.anchorNode,c.anchorOffset)&&Ze(a.node,a.offset,c.focusNode,c.focusOffset))return;let u=!1;if((c.extend||e==t)&&!d){c.collapse(l.node,l.offset);try{e!=t&&c.extend(a.node,a.offset),u=!0;}catch{}}if(!u){if(e>t){let h=l;l=a,a=h;}let f=document.createRange();f.setEnd(a.node,a.offset),f.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(f);}}ignoreMutation(e){return !this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let l=r+s.border,a=o-s.border;if(e>=l&&t<=a){this.dirty=e==r||t==o?Ue:ds,e==l&&t==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=he:s.markDirty(e-l,t-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ue:he;}r=o;}this.dirty=Ue;}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Ue:ds;t.dirty<r&&(t.dirty=r);}}get domAtom(){return !1}get ignoreForCoords(){return !1}},tn=class extends Qe{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l;}o.contentEditable="false",o.classList.add("ProseMirror-widget");}super(e,[],o,null),this.widget=t,this.widget=t,s=this;}matchesWidget(e){return this.dirty==oe&&e.type.eq(this.widget.type)}parseRule(){return {ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy();}get domAtom(){return !0}get side(){return this.widget.type.side}},nr=class extends Qe{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i;}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return {node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},ut=class n extends Qe{constructor(e,t,r,i){super(e,[],r,i),this.mark=t;}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return (!o||!o.dom)&&(o=ke.renderSpec(document,t.type.spec.toDOM(t,r))),new n(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&he||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return this.dirty!=he&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=oe){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=oe;}}slice(e,t,r){let i=n.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=lr(s,t,o,r)),e>0&&(s=lr(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}},De=class n extends Qe{constructor(e,t,r,i,s,o,l,a,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l;}static create(e,t,r,i,s,o){let l=s.nodeViews[t.type.name],a,c=l&&l(t,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),d=c&&c.dom,u=c&&c.contentDOM;if(t.isText){if(!d)d=document.createTextNode(t.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:u}=ke.renderSpec(document,t.type.spec.toDOM(t)));!u&&!t.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let f=d;return d=Ws(d,r,t),c?a=new rr(e,t,r,i,d,u||null,f,c,s,o+1):t.isText?new nn(e,t,r,i,d,f,s):new n(e,t,r,i,d,u||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else {for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>b.empty);}return e}matchesNode(e,t,r){return this.dirty==oe&&e.eq(this.node)&&sr(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new or(this,o&&o.node,e);La(this.node,this.innerDeco,(c,d,u)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!u&&a.syncToMarks(d==this.node.childCount?A.none:this.node.child(d).marks,r,e),a.placeWidget(c,e,i);},(c,d,u,f)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,d,u,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,d,u,h,e)||a.updateNextNode(c,d,u,e,f,i)||a.addNode(c,d,u,e,i),i+=c.nodeSize;}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ue)&&(o&&this.protectLocalComposition(e,o),Hs(this.contentDOM,this.children,e),dt&&Fa(this.dom));}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof w)||r<t||i>t+this.node.content.size)return null;let s=e.domSelectionRange(),o=za(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,a=Va(this.node.content,l,r-t,i-t);return a<0?null:{node:o,pos:a,text:l}}else return {node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0);}let o=new nr(this,s,t,i);e.input.compositionNodes.push(o),this.children=lr(this.children,r,r+i.length,e,o);}update(e,t,r,i){return this.dirty==he||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=oe;}updateOuterDeco(e){if(sr(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Js(this.dom,this.nodeDOM,ir(this.outerDeco,this.node,t),ir(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e;}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0);}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable");}get domAtom(){return this.node.isAtom}};function us(n,e,t,r,i){Ws(r,e,n);let s=new De(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}var nn=class n extends De{constructor(e,t,r,i,s,o,l){super(e,t,r,i,s,null,o,l,0);}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return {skip:e||!0}}update(e,t,r,i){return this.dirty==he||this.dirty!=oe&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=oe||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=oe,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return !0;return !1}domFromPos(e){return {node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new n(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=he);}get domAtom(){return !1}},rn=class extends Qe{parseRule(){return {ignore:!0}}matchesHack(e){return this.dirty==oe&&this.dom.nodeName==e}get domAtom(){return !0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},rr=class extends De{constructor(e,t,r,i,s,o,l,a,c,d){super(e,t,r,i,s,o,l,c,d),this.spec=a;}update(e,t,r,i){if(this.dirty==he)return !1;if(this.spec.update){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return !this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode();}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode();}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,i);}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy();}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function Hs(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==n){for(;l!=r;)r=fs(r),i=!0;r=r.nextSibling;}else i=!0,n.insertBefore(l,r);if(o instanceof ut){let a=r?r.previousSibling:n.lastChild;Hs(o.contentDOM,o.children,t),r=a?a.nextSibling:n.firstChild;}}for(;r;)r=fs(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null);}var vt=function(n){n&&(this.nodeName=n);};vt.prototype=Object.create(null);var _e=[new vt];function ir(n,e,t){if(n.length==0)return _e;let r=t?_e[0]:new vt,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new vt(o.nodeName));for(let l in o){let a=o[l];a!=null&&(t&&i.length==1&&i.push(r=new vt(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a));}}}return i}function Js(n,e,t,r){if(t==_e&&r==_e)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=t[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=n&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=_e[0]),i=a;}Ra(i,l||_e[0],o);}return i}function Ra(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class");}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1]);}t.style&&(n.style.cssText+=t.style);}}function Ws(n,e,t){return Js(n,n,_e,ir(e,t,n.nodeType!=1))}function sr(n,e){if(n.length!=e.length)return !1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return !1;return !0}function fs(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}var or=class{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Pa(e.node.content,e);}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0;}}destroyRest(){this.destroyBetween(this.index,this.top.children.length);}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=oe,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else {let a=ut.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0;}this.index=0,s++;}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==he&&o.dom==o.contentDOM&&(o.dirty=Ue),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return -1}e=t;}}updateNextNode(e,t,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof De){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return !1;let d=a.dom,u,f=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=he&&sr(t,a.outerDeco));if(!f&&a.update(e,t,r,i))return this.destroyBetween(this.index,l),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!f&&(u=this.recreateWrapper(a,e,t,r,i,o)))return this.top.children[this.index]=u,u.dirty=Ue,u.updateChildren(i,o+1),u.dirty=oe,this.changed=!0,this.index++,!0;break}}return !1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let l=De.create(this.top,t,r,i,s,o);if(!l.contentDOM)return null;l.children=e.children,e.children=[],e.destroy();for(let a of l.children)a.parent=l;return l}addNode(e,t,r,i,s){let o=De.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0;}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else {let s=new tn(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0;}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ut;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof nn)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((U||W)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top));}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else {let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new rn(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0;}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function Pa(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=t.children[r-1];if(c instanceof ut)t=c,r=c.children.length;else {l=c,r--;break}}else {if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent;}let a=l.node;if(a){if(a!=n.child(i-1))break;--i,s.set(l,i),o.push(l);}}return {index:i,matched:s,matches:o.reverse()}}function Ba(n,e){return n.type.side-e.type.side}function La(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let d=n.child(c);r(d,i,e.forChild(s,d),c),s+=d.nodeSize;}return}let o=0,l=[],a=null;for(let c=0;;){if(o<i.length&&i[o].to==s){let p=i[o++],m;for(;o<i.length&&i[o].to==s;)(m||(m=[p])).push(i[o++]);if(m){m.sort(Ba);for(let g=0;g<m.length;g++)t(m[g],c,!!a);}else t(p,c,!!a);}let d,u;if(a)u=-1,d=a,a=null;else if(c<n.childCount)u=c,d=n.child(c++);else break;for(let p=0;p<l.length;p++)l[p].to<=s&&l.splice(p--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let f=s+d.nodeSize;if(d.isText){let p=f;o<i.length&&i[o].from<p&&(p=i[o].from);for(let m=0;m<l.length;m++)l[m].to<p&&(p=l[m].to);p<f&&(a=d.cut(p-s),d=d.cut(0,p-s),f=p,u=-1);}let h=d.isInline&&!d.isLeaf?l.filter(p=>!p.inline):l.slice();r(d,h,e.forChild(s,d),u),s=f;}}function Fa(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e;}}function za(n,e){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0){if(n.childNodes.length>e&&n.childNodes[e].nodeType==3)return n.childNodes[e];n=n.childNodes[e-1],e=ue(n);}else if(n.nodeType==1&&e<n.childNodes.length)n=n.childNodes[e],e=0;else return null}}function Va(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text;}if(s>=t){let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=t)return l+c;if(t==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return -1}function lr(n,e,t,r,i){let s=[];for(let o=0,l=0;o<n.length;o++){let a=n[o],c=l,d=l+=a.size;c>=t||d<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),d>t&&s.push(a.slice(t-c,a.size,r)));}return s}function Sr(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(dn(t)){for(a=l;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&M.isSelectable(d)&&i.parent&&!(d.isInline&&ua(t.focusNode,t.focusOffset,i.dom))){let u=i.posBefore;c=new M(o==u?l:r.resolve(u));}}else {let d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null;a=r.resolve(d);}if(!c){let d=e=="pointer"||n.state.selection.head<l.pos&&!s?1:-1;c=xr(n,a,l,d);}return c}function js(n){return n.editable?n.hasFocus():qs(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Me(n,e=!1){let t=n.state.selection;if(Ks(n,t),!!js(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&W){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ze(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Ha(n);else {let{anchor:r,head:i}=t,s,o;hs&&!(t instanceof w)&&(t.$from.parent.inlineContent||(s=ps(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=ps(n,t.to))),n.docView.setSelection(r,i,n.root,e),hs&&(s&&ms(s),o&&ms(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&$a(n));}n.domObserver.setCurSelection(),n.domObserver.connectSelection();}}var hs=U||W&&ma<63;function ps(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(U&&i&&i.contentEditable=="false")return Yn(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Yn(i);if(s)return Yn(s)}}function Yn(n){return n.contentEditable="true",U&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function ms(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null);}function $a(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!js(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection");},20));});}function Ha(n){let e=n.domSelection(),t=document.createRange(),r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setEnd(r.parentNode,ne(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Z&&Ae<=11&&(r.disabled=!0,r.disabled=!1);}function Ks(n,e){if(e instanceof M){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(gs(n),t&&t.selectNode(),n.lastSelectedViewDesc=t);}else gs(n);}function gs(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0);}function xr(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||w.between(e,t,r)}function ys(n){return n.editable&&!n.hasFocus()?!1:qs(n)}function qs(n){let e=n.domSelectionRange();if(!e.anchorNode)return !1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return !1}}function Ja(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Ze(e.node,e.offset,t.anchorNode,t.anchorOffset)}function ar(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&C.findFrom(s,e)}function qe(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function bs(n,e,t){let r=n.state.selection;if(r instanceof w){if(!r.empty||t.indexOf("s")>-1)return !1;if(n.endOfTextblock(e>0?"forward":"backward")){let i=ar(n.state,e);return i&&i instanceof M?qe(n,i):!1}else if(!(se&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return !1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(l))&&!o.contentDOM?M.isSelectable(s)?qe(n,new M(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):un?qe(n,new w(n.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else {if(r instanceof M&&r.node.isInline)return qe(n,new w(e>0?r.$to:r.$from));{let i=ar(n.state,e);return i?qe(n,i):!1}}}function sn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function It(n){let e=n.pmViewDesc;return e&&e.size==0&&(n.nextSibling||n.nodeName!="BR")}function Dt(n,e){return e<0?Wa(n):Us(n)}function Wa(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(de&&t.nodeType==1&&r<sn(t)&&It(t.childNodes[r])&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let l=t.childNodes[r-1];if(It(l))i=t,s=--r;else if(l.nodeType==3)t=l,r=t.nodeValue.length;else break}}else {if(_s(t))break;{let l=t.previousSibling;for(;l&&It(l);)i=t.parentNode,s=ne(l),l=l.previousSibling;if(l)t=l,r=sn(t);else {if(t=t.parentNode,t==n.dom)break;r=0;}}}o?cr(n,t,r):i&&cr(n,i,s);}function Us(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=sn(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let l=t.childNodes[r];if(It(l))s=t,o=++r;else break}else {if(_s(t))break;{let l=t.nextSibling;for(;l&&It(l);)s=l.parentNode,o=ne(l)+1,l=l.nextSibling;if(l)t=l,r=0,i=sn(t);else {if(t=t.parentNode,t==n.dom)break;r=i=0;}}}s&&cr(n,s,o);}function _s(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function cr(n,e,t){let r=n.domSelection();if(dn(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s);}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Me(n);},50);}function ks(n,e){let t=n.state.doc.resolve(e);if(!(W||ga)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Ss(n,e,t){let r=n.state.selection;if(r instanceof w&&!r.empty||t.indexOf("s")>-1||se&&t.indexOf("m")>-1)return !1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=ar(n.state,e);if(o&&o instanceof M)return qe(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof ee?C.near(o,e):C.findFrom(o,e);return l?qe(n,l):!1}return !1}function xs(n,e){if(!(n.state.selection instanceof w))return !0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return !0;if(!i)return !1;if(n.endOfTextblock(e>0?"forward":"backward"))return !0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return !1}function Ms(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start();}function ja(n){if(!U||n.state.selection.$head.parentOffset>0)return !1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ms(n,r,"true"),setTimeout(()=>Ms(n,r,"false"),20);}return !1}function Ka(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function qa(n,e){let t=e.keyCode,r=Ka(e);if(t==8||se&&t==72&&r=="c")return xs(n,-1)||Dt(n,-1);if(t==46&&!e.shiftKey||se&&t==68&&r=="c")return xs(n,1)||Dt(n,1);if(t==13||t==27)return !0;if(t==37||se&&t==66&&r=="c"){let i=t==37?ks(n,n.state.selection.from)=="ltr"?-1:1:-1;return bs(n,i,r)||Dt(n,i)}else if(t==39||se&&t==70&&r=="c"){let i=t==39?ks(n,n.state.selection.from)=="ltr"?1:-1:1;return bs(n,i,r)||Dt(n,i)}else {if(t==38||se&&t==80&&r=="c")return Ss(n,-1,r)||Dt(n,-1);if(t==40||se&&t==78&&r=="c")return ja(n)||Ss(n,1,r)||Us(n);if(r==(se?"m":"c")&&(t==66||t==73||t==89||t==90))return !0}return !1}function Gs(n,e){n.someProp("transformCopied",h=>{e=h(e,n);});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;t.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content;}let o=n.someProp("clipboardSerializer")||ke.fromSchema(n.state.schema),l=to(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,d,u=0;for(;c&&c.nodeType==1&&(d=eo[c.nodeName.toLowerCase()]);){for(let h=d.length-1;h>=0;h--){let p=l.createElement(d[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),u++;}c=a.firstChild;}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${u?` -${u}`:""} ${JSON.stringify(t)}`);let f=n.someProp("clipboardTextSerializer",h=>h(e,n))||e.content.textBetween(0,e.content.size,`

`);return {dom:a,text:f}}function Ys(n,e,t,r,i){let s=i.parent.type.spec.code,o,l;if(!t&&!e)return null;let a=e&&(r||s||!t);if(a){if(n.someProp("transformPastedText",f=>{e=f(e,s||r,n);}),s)return e?new k(b.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):k.empty;let u=n.someProp("clipboardTextParser",f=>f(e,i,r,n));if(u)l=u;else {let f=i.marks(),{schema:h}=n.state,p=ke.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(h.text(m,f)));});}}else n.someProp("transformPastedHTML",u=>{t=u(t,n);}),o=Ga(t),un&&Ya(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let u=+d[3];u>0;u--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f;}if(l||(l=(n.someProp("clipboardParser")||n.someProp("domParser")||Je.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||d),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!Ua.test(f.parentNode.nodeName)?{ignore:!0}:null}})),d)l=Xa(Cs(l,+d[1],+d[2]),d[4]);else if(l=k.maxOpen(_a(l.content,i),!0),l.openStart||l.openEnd){let u=0,f=0;for(let h=l.content.firstChild;u<l.openStart&&!h.type.spec.isolating;u++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Cs(l,u,f);}return n.someProp("transformPasted",u=>{l=u(l,n);}),l}var Ua=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function _a(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Zs(a,s,l,o[o.length-1],0))o[o.length-1]=c;else {o.length&&(o[o.length-1]=Qs(o[o.length-1],s.length));let d=Xs(l,a);o.push(d),i=i.matchType(d.type),s=a;}}),o)return b.from(o)}return n}function Xs(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,b.from(n));return n}function Zs(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=Zs(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(b.from(Xs(t,n,i+1))))}}function Qs(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Qs(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(b.empty,!0);return n.copy(t.append(r))}function dr(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,l=o.content;return n.childCount>1&&(s=0),i<r-1&&(l=dr(l,e,t,r,i+1,s)),i>=t&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(b.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(l))}function Cs(n,e,t){return e<n.openStart&&(n=new k(dr(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new k(dr(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}var eo={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ws=null;function to(){return ws||(ws=document.implementation.createHTMLDocument("title"))}function Ga(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=to().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&eo[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=n,i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function Ya(n){let e=n.querySelectorAll(W?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r);}}function Xa(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e);}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let l=r.length-2;l>=0;l-=2){let a=t.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=b.from(a.create(r[l+1],i)),s++,o++;}return new k(i,s,o)}var _={},G={},Za={touchstart:!0,touchmove:!0},ur=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null;}};function Qa(n){for(let e in _){let t=_[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{tc(n,r)&&!Mr(n,r)&&(n.editable||!(r.type in G))&&t(n,r);},Za[e]?{passive:!0}:void 0);}U&&n.dom.addEventListener("input",()=>null),fr(n);}function Ne(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now();}function ec(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout);}function fr(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Mr(n,r));});}function Mr(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function tc(n,e){if(!e.bubbles)return !0;if(e.defaultPrevented)return !1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return !1;return !0}function nc(n,e){!Mr(n,e)&&_[e.type]&&(n.editable||!(e.type in G))&&_[e.type](n,e);}G.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!ro(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ce&&W&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),dt&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Ke(13,"Enter"))),n.input.lastIOSEnter=0);},200);}else n.someProp("handleKeyDown",r=>r(n,t))||qa(n,t)?t.preventDefault():Ne(n,"key");};G.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1);};G.keypress=(n,e)=>{let t=e;if(ro(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||se&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof w)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault();}};function fn(n){return {left:n.clientX,top:n.clientY}}function rc(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function Cr(n,e,t,r,i){if(r==-1)return !1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,l=>o>s.depth?l(n,t,s.nodeAfter,s.before(o),i,!0):l(n,t,s.node(o),s.before(o),i,!1)))return !0;return !1}function ct(n,e,t){n.focused||n.focus();let r=n.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),n.dispatch(r);}function ic(n,e){if(e==-1)return !1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&M.isSelectable(r)?(ct(n,new M(t),"pointer"),!0):!1}function sc(n,e){if(e==-1)return !1;let t=n.state.selection,r,i;t instanceof M&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(M.isSelectable(l)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(ct(n,M.create(n.state.doc,i),"pointer"),!0):!1}function oc(n,e,t,r,i){return Cr(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?sc(n,t):ic(n,t))}function lc(n,e,t,r){return Cr(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function ac(n,e,t,r){return Cr(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||cc(n,t,r)}function cc(n,e,t){if(t.button!=0)return !1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ct(n,w.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ct(n,w.create(r,l+1,l+1+o.content.size),"pointer");else if(M.isSelectable(o))ct(n,M.create(r,l),"pointer");else continue;return !0}}function wr(n){return on(n)}var no=se?"metaKey":"ctrlKey";_.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=wr(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&rc(t,n.input.lastClick)&&!t[no]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(fn(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new hr(n,o,t,!!r)):(s=="doubleClick"?lc:ac)(n,o.pos,o.inside,t)?t.preventDefault():Ne(n,"pointer"));};var hr=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[no],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else {let d=e.state.doc.resolve(t.pos);s=d.parent,o=d.depth?d.before():0;}let l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof M&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&de&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false");},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ne(e,"pointer");}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Me(this.view)),this.view.input.mouseDown=null;}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(fn(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ne(this.view,"pointer"):oc(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||U&&this.mightDrag&&!this.mightDrag.node.isAtom||W&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ct(this.view,C.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ne(this.view,"pointer");}move(e){this.updateAllowDefault(e),Ne(this.view,"pointer"),e.buttons==0&&this.done();}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0);}};_.touchstart=n=>{n.input.lastTouch=Date.now(),wr(n),Ne(n,"pointer");};_.touchmove=n=>{n.input.lastTouch=Date.now(),Ne(n,"pointer");};_.contextmenu=n=>wr(n);function ro(n,e){return n.composing?!0:U&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}var dc=ce?5e3:-1;G.compositionstart=G.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),on(n,!0),n.markCursor=null;else if(on(n),de&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){n.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1;}}n.input.composing=!0;}io(n,dc);};G.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionID++,io(n,20));};function io(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>on(n),e));}function so(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=uc());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty();}function uc(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function on(n,e=!1){if(!(ce&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),so(n),e||n.docView&&n.docView.dirty){let t=Sr(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):n.updateState(n.state),!0}return !1}}function fc(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus();},50);}var ft=Z&&Ae<15||dt&&ya<604;_.copy=G.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=ft?null:t.clipboardData,o=r.content(),{dom:l,text:a}=Gs(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):fc(n,l),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"));};function hc(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function pc(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Pt(n,r.value,null,i,e):Pt(n,r.textContent,r.innerHTML,i,e);},50);}function Pt(n,e,t,r,i){let s=Ys(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",a=>a(n,i,s||k.empty)))return !0;if(!s)return !1;let o=hc(s),l=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}G.paste=(n,e)=>{let t=e;if(n.composing&&!ce)return;let r=ft?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Pt(n,r.getData("text/plain"),r.getData("text/html"),i,t)?t.preventDefault():pc(n,t);};var pr=class{constructor(e,t){this.slice=e,this.move=t;}},oo=se?"altKey":"ctrlKey";_.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(fn(t));if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof M?i.to-1:i.to))){if(r&&r.mightDrag)n.dispatch(n.state.tr.setSelection(M.create(n.state.doc,r.mightDrag.pos)));else if(t.target&&t.target.nodeType==1){let c=n.docView.nearestDesc(t.target,!0);c&&c.node.type.spec.draggable&&c!=n.docView&&n.dispatch(n.state.tr.setSelection(M.create(n.state.doc,c.posBefore)));}}let o=n.state.selection.content(),{dom:l,text:a}=Gs(n,o);t.dataTransfer.clearData(),t.dataTransfer.setData(ft?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",ft||t.dataTransfer.setData("text/plain",a),n.dragging=new pr(o,!t[oo]);};_.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null);},50);};G.dragover=G.dragenter=(n,e)=>e.preventDefault();G.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(fn(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",p=>{o=p(o,n);}):o=Ys(n,t.dataTransfer.getData(ft?"Text":"text/plain"),ft?null:t.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&!t[oo]);if(n.someProp("handleDrop",p=>p(n,t,o||k.empty,l))){t.preventDefault();return}if(!o)return;t.preventDefault();let a=o?Yt(n.state.doc,s.pos,o):s.pos;a==null&&(a=s.pos);let c=n.state.tr;l&&c.deleteSelection();let d=c.mapping.map(a),u=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,f=c.doc;if(u?c.replaceRangeWith(d,d,o.content.firstChild):c.replaceRange(d,d,o),c.doc.eq(f))return;let h=c.doc.resolve(d);if(u&&M.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new M(h));else {let p=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,x)=>p=x),c.setSelection(xr(n,h,c.doc.resolve(p)));}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"));};_.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Me(n);},20));};_.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1);};_.beforeinput=(n,e)=>{if(W&&ce&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,Ke(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView());},50);}};for(let n in G)_[n]=G[n];function Bt(n,e){if(n==e)return !0;for(let t in n)if(n[t]!==e[t])return !1;for(let t in e)if(!(t in n))return !1;return !0}var mr=class n{constructor(e,t){this.toDOM=e,this.spec=t||Ye,this.side=this.spec.side||0;}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new pe(s-r,s-r,this)}valid(){return !0}eq(e){return this==e||e instanceof n&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Bt(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e);}},Ge=class n{constructor(e,t){this.attrs=e,this.spec=t||Ye;}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new pe(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof n&&Bt(this.attrs,e.attrs)&&Bt(this.spec,e.spec)}static is(e){return e.type instanceof n}destroy(){}},gr=class n{constructor(e,t){this.attrs=e,this.spec=t||Ye;}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new pe(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof n&&Bt(this.attrs,e.attrs)&&Bt(this.spec,e.spec)}destroy(){}},pe=class n{constructor(e,t,r){this.from=e,this.to=t,this.type=r;}copy(e,t){return new n(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new n(e,e,new mr(t,r))}static inline(e,t,r,i){return new n(e,t,new Ge(r,i))}static node(e,t,r,i){return new n(e,t,new gr(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ge}},at=[],Ye={},Q=class n{constructor(e,t){this.local=e.length?e:at,this.children=t.length?t:at;}static create(e,t){return t.length?an(t,e,0,Ye):J}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=t&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i));}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,t-l,r,i+l,s);}}map(e,t,r){return this==J||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ye)}mapInner(e,t,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(t,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec);}return this.children.length?mc(this.children,o||[],e,t,r,i,s):o?new n(o.sort(Xe),at):J}add(e,t){return t.length?this==J?n.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,d;if(d=ao(t,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,d,c+1):i.splice(s,0,a,a+l.nodeSize,an(d,l,c+1,Ye)),s+=3;}});let o=lo(s?co(t):t,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new n(o.length?this.local.concat(o).sort(Xe):this.local,i||this.children)}remove(e){return e.length==0||this==J?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+t,a=r[s+1]+t;for(let d=0,u;d<e.length;d++)(u=e[d])&&u.from>l&&u.to<a&&(e[d]=null,(o||(o=[])).push(u));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=J?r[s+2]=c:(r.splice(s,3),s-=3);}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1));}return r==this.children&&i==this.local?this:i.length||r.length?new n(i,r):J}forChild(e,t){if(this==J)return this;if(t.isLeaf)return n.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+t.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Ge){let c=Math.max(s,a.from)-s,d=Math.min(o,a.to)-s;c<d&&(i||(i=[])).push(a.copy(c,d));}}if(i){let l=new n(i.sort(Xe),at);return r?new ln([l,r]):l}return r||J}eq(e){if(this==e)return !0;if(!(e instanceof n)||this.local.length!=e.local.length||this.children.length!=e.children.length)return !1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return !1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return !1;return !0}locals(e){return Or(this.localsInner(e))}localsInner(e){if(this==J)return at;if(e.inlineContent||!this.local.some(Ge.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ge||t.push(this.local[r]);return t}};Q.empty=new Q([],[]);Q.removeOverlap=Or;var J=Q.empty,ln=class n{constructor(e){this.members=e;}map(e,t){let r=this.members.map(i=>i.map(e,t,Ye));return n.from(r)}forChild(e,t){if(t.isLeaf)return Q.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=J&&(s instanceof n?r=r.concat(s.members):r.push(s));}return n.from(r)}eq(e){if(!(e instanceof n)||e.members.length!=this.members.length)return !1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return !1;return !0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else {r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o]);}}return t?Or(r?t:t.sort(Xe)):at}static from(e){switch(e.length){case 0:return J;case 1:return e[0];default:return new n(e.every(t=>t instanceof Q)?e:e.reduce((t,r)=>t.concat(r instanceof Q?r:r.members),[]))}}};function mc(n,e,t,r,i,s,o){let l=n.slice();for(let c=0,d=s;c<t.maps.length;c++){let u=0;t.maps[c].forEach((f,h,p,m)=>{let g=m-p-(h-f);for(let y=0;y<l.length;y+=3){let x=l[y+1];if(x<0||f>x+d-u)continue;let T=l[y]+d-u;h>=T?l[y+1]=f<=T?-2:-1:p>=i&&g&&(l[y]+=g,l[y+1]+=g);}u+=g;}),d=t.maps[c].map(d,-1);}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let d=t.map(n[c]+s),u=d-i;if(u<0||u>=r.content.size){a=!0;continue}let f=t.map(n[c+1]+s,-1),h=f-i,{index:p,offset:m}=r.content.findIndex(u),g=r.maybeChild(p);if(g&&m==u&&m+g.nodeSize==h){let y=l[c+2].mapInner(t,g,d+1,n[c]+s+1,o);y!=J?(l[c]=u,l[c+1]=h,l[c+2]=y):(l[c+1]=-2,a=!0);}else a=!0;}if(a){let c=gc(l,n,e,t,i,s,o),d=an(c,r,0,o);e=d.local;for(let u=0;u<l.length;u+=3)l[u+1]<0&&(l.splice(u,3),u-=3);for(let u=0,f=0;u<d.children.length;u+=3){let h=d.children[u];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,d.children[u],d.children[u+1],d.children[u+2]);}}return new Q(e.sort(Xe),l)}function lo(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new pe(i.from+e,i.to+e,i.type));}return t}function gc(n,e,t,r,i,s,o){function l(a,c){for(let d=0;d<a.local.length;d++){let u=a.local[d].map(r,i,c);u?t.push(u):o.onRemove&&o.onRemove(a.local[d].spec);}for(let d=0;d<a.children.length;d+=3)l(a.children[d+2],a.children[d]+c+1);}for(let a=0;a<n.length;a+=3)n[a+1]==-1&&l(n[a+2],e[a]+s+1);return t}function ao(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function co(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function an(n,e,t,r){let i=[],s=!1;e.forEach((l,a)=>{let c=ao(n,l,a+t);if(c){s=!0;let d=an(c,l,t+a+1,r);d!=J&&i.push(a,a+l.nodeSize,d);}});let o=lo(s?co(n):n,-t).sort(Xe);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Q(o,i):J}function Xe(n,e){return n.from-e.from||n.to-e.to}function Or(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),Os(e,i+1,s.copy(r.to,s.to)));continue}else {s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),Os(e,i,r.copy(s.from,r.to)));break}}}return e}function Os(n,e,t){for(;e<n.length&&Xe(t,n[e])>0;)e++;n.splice(e,0,t);}function Xn(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=J&&e.push(r);}),n.cursorWrapper&&e.push(Q.create(n.state.doc,[n.cursorWrapper.deco])),ln.from(e)}var yc={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bc=Z&&Ae<=11,yr=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0;}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset;}clear(){this.anchorNode=this.focusNode=null;}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},br=class{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new yr,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Z&&Ae<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush();}),bc&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon();}),this.onSelectionChange=this.onSelectionChange.bind(this);}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush();},20));}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush());}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yc)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection();}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20);}this.observer.disconnect();}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection();}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange);}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange);}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50);}onSelectionChange(){if(ys(this.view)){if(this.suppressingSelectionUpdates)return Me(this.view);if(Z&&Ae<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ze(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush();}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange());}ignoreSelectionChange(e){if(!e.focusNode)return !0;let t=new Set,r;for(let s=e.focusNode;s;s=Rt(s))t.add(s);for(let s=e.anchorNode;s;s=Rt(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ys(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let d=0;d<t.length;d++){let u=this.registerMutation(t[d],a);u&&(s=s<0?u.from:Math.min(u.from,s),o=o<0?u.to:Math.max(u.to,o),u.typeOver&&(l=!0));}if(de&&a.length>1){let d=a.filter(u=>u.nodeName=="BR");if(d.length==2){let u=d[0],f=d[1];u.parentNode&&u.parentNode.parentNode==f.parentNode?f.remove():u.remove();}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&dn(r)&&(c=Sr(e))&&c.eq(C.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Me(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),kc(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Me(e),this.currentSelection.set(r));}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++)t.push(e.addedNodes[d]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return {from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Z&&Ae<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:u,nextSibling:f}=e.addedNodes[d];(!u||Array.prototype.indexOf.call(e.addedNodes,u)<0)&&(i=u),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f);}let o=i&&i.parentNode==e.target?ne(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?ne(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return {from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}},Ts=new WeakMap,Es=!1;function kc(n){if(!Ts.has(n)&&(Ts.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=de,Es)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Es=!0;}}function Sc(n){let e;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0];}n.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",t,!0);let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Ze(l.node,l.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}function xc(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=n.docView.parseRange(e,t),a=n.domSelectionRange(),c,d=a.anchorNode;if(d&&n.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:a.anchorOffset}],dn(a)||c.push({node:a.focusNode,offset:a.focusOffset})),W&&n.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],x=y.pmViewDesc;if(y.nodeName=="BR"&&!x){s=g;break}if(!x||x.size)break}let u=n.state.doc,f=n.someProp("domParser")||Je.fromSchema(n.state.schema),h=u.resolve(o),p=null,m=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Mc,context:h});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o};}return {doc:m,sel:p,from:o,to:l}}function Mc(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(U&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||U&&/^(tr|table)$/i.test(n.parentNode.nodeName))return {ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return {ignore:!0};return null}var Cc=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wc(n,e,t,r,i){if(e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,we=Sr(n,E);if(we&&!n.state.selection.eq(we)){if(W&&ce&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ml=>Ml(n,Ke(13,"Enter"))))return;let zt=n.state.tr.setSelection(we);E=="pointer"?zt.setMeta("pointer",!0):E=="key"&&zt.scrollIntoView(),n.composing&&zt.setMeta("composition",n.input.compositionID),n.dispatch(zt);}return}let s=n.state.doc.resolve(e),o=s.sharedDepth(t);e=s.before(o+1),t=n.state.doc.resolve(t).after(o+1);let l=n.state.selection,a=xc(n,e,t),c=n.state.doc,d=c.slice(a.from,a.to),u,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(u=n.state.selection.to,f="end"):(u=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let h=Ec(d.content,a.doc.content,a.from,u,f);if((dt&&n.input.lastIOSEnter>Date.now()-225||ce)&&i.some(E=>E.nodeType==1&&!Cc.test(E.nodeName))&&(!h||h.endA>=h.endB)&&n.someProp("handleKeyDown",E=>E(n,Ke(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!h)if(r&&l instanceof w&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(a.sel&&a.sel.anchor!=a.sel.head))h={start:l.from,endA:l.to,endB:l.to};else {if(a.sel){let E=Ns(n,n.state.doc,a.sel);if(E&&!E.eq(n.state.selection)){let we=n.state.tr.setSelection(E);n.composing&&we.setMeta("composition",n.input.compositionID),n.dispatch(we);}}return}if(W&&n.cursorWrapper&&a.sel&&a.sel.anchor==n.cursorWrapper.deco.from&&a.sel.head==a.sel.anchor){let E=h.endB-h.start;a.sel={anchor:a.sel.anchor+E,head:a.sel.anchor+E};}n.input.domChangeCount++,n.state.selection.from<n.state.selection.to&&h.start==h.endB&&n.state.selection instanceof w&&(h.start>n.state.selection.from&&h.start<=n.state.selection.from+2&&n.state.selection.from>=a.from?h.start=n.state.selection.from:h.endA<n.state.selection.to&&h.endA>=n.state.selection.to-2&&n.state.selection.to<=a.to&&(h.endB+=n.state.selection.to-h.endA,h.endA=n.state.selection.to)),Z&&Ae<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>a.from&&a.doc.textBetween(h.start-a.from-1,h.start-a.from+1)==" \xA0"&&(h.start--,h.endA--,h.endB--);let p=a.doc.resolveNoCache(h.start-a.from),m=a.doc.resolveNoCache(h.endB-a.from),g=c.resolve(h.start),y=p.sameParent(m)&&p.parent.inlineContent&&g.end()>=h.endA,x;if((dt&&n.input.lastIOSEnter>Date.now()-225&&(!y||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!y&&p.pos<a.doc.content.size&&!p.sameParent(m)&&(x=C.findFrom(a.doc.resolve(p.pos+1),1,!0))&&x.head==m.pos)&&n.someProp("handleKeyDown",E=>E(n,Ke(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>h.start&&Tc(c,h.start,h.endA,p,m)&&n.someProp("handleKeyDown",E=>E(n,Ke(8,"Backspace")))){ce&&W&&n.domObserver.suppressSelectionUpdates();return}W&&ce&&h.endB==h.start&&(n.input.lastAndroidDelete=Date.now()),ce&&!y&&p.start()!=m.start()&&m.parentOffset==0&&p.depth==m.depth&&a.sel&&a.sel.anchor==a.sel.head&&a.sel.head==h.endA&&(h.endB-=2,m=a.doc.resolveNoCache(h.endB-a.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,Ke(13,"Enter"))});},20));let T=h.start,I=h.endA,D,L,q;if(y){if(p.pos==m.pos)Z&&Ae<=11&&p.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Me(n),20)),D=n.state.tr.delete(T,I),L=c.resolve(h.start).marksAcross(c.resolve(h.endA));else if(h.endA==h.endB&&(q=Oc(p.parent.content.cut(p.parentOffset,m.parentOffset),g.parent.content.cut(g.parentOffset,h.endA-g.start()))))D=n.state.tr,q.type=="add"?D.addMark(T,I,q.mark):D.removeMark(T,I,q.mark);else if(p.parent.child(p.index()).isText&&p.index()==m.index()-(m.textOffset?0:1)){let E=p.parent.textBetween(p.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",we=>we(n,T,I,E)))return;D=n.state.tr.insertText(E,T,I);}}if(D||(D=n.state.tr.replace(T,I,a.doc.slice(h.start-a.from,h.endB-a.from))),a.sel){let E=Ns(n,D.doc,a.sel);E&&!(W&&ce&&n.composing&&E.empty&&(h.start!=h.endB||n.input.lastAndroidDelete<Date.now()-100)&&(E.head==T||E.head==D.mapping.map(I)-1)||Z&&E.empty&&E.head==T)&&D.setSelection(E);}L&&D.ensureMarks(L),n.composing&&D.setMeta("composition",n.input.compositionID),n.dispatch(D.scrollIntoView());}function Ns(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:xr(n,e.resolve(t.anchor),e.resolve(t.head))}function Oc(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,l,a;for(let d=0;d<r.length;d++)i=r[d].removeFromSet(i);for(let d=0;d<t.length;d++)s=t[d].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=d=>d.mark(l.addToSet(d.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=d=>d.mark(l.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(a(e.child(d)));if(b.from(c).eq(n))return {mark:l,type:o}}function Tc(n,e,t,r,i){if(!r.parent.isTextblock||t-e<=i.pos-r.pos||Zn(r,!0,!1)<i.pos)return !1;let s=n.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return !1;let o=n.resolve(Zn(s,!0,!0));return !o.parent.isTextblock||o.pos>t||Zn(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Zn(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++;}return i}function Ec(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:l}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s;}if(o<s&&n.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,l=s+(l-o),o=s;}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,o=s+(o-l),l=s;}return {start:s,endA:o,endB:l}}var cn=class{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ur,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Rs),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vs(this),Ds(this),this.nodeViews=Is(this),this.docView=us(this.state.doc,As(this),Xn(this),this.dom,this),this.domObserver=new br(this,(r,i,s,o)=>wc(this,r,i,s,o)),this.domObserver.start(),Qa(this),this.updatePluginViews();}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state;}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&fr(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Rs),this.directPlugins=e.plugins),this.updateStateInner(e.state,t);}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t);}updateState(e){this.updateStateInner(e,this._props);}updateStateInner(e,t){let r=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(so(this),s=!0),this.state=e;let o=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(o||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=Is(this);Ac(f,this.nodeViews)&&(this.nodeViews=f,i=!0);}(o||t.handleDOMEvents!=this._props.handleDOMEvents)&&fr(this),this.editable=vs(this),Ds(this);let l=Xn(this),a=As(this),c=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,a,l);(d||!e.selection.eq(r.selection))&&(s=!0);let u=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Sa(this);if(s){this.domObserver.stop();let f=d&&(Z||W)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Nc(r.selection,e.selection);if(d){let h=W?this.trackWrites=this.domSelectionRange().focusNode:null;(i||!this.docView.update(e.doc,a,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=us(e.doc,a,l,this.dom,this)),h&&!this.trackWrites&&(f=!0);}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Ja(this))?Me(this,f):(Ks(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start();}this.updatePluginViews(r),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():u&&xa(u);}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof M){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&is(this,t.getBoundingClientRect(),e);}else is(this,this.coordsAtPos(this.state.selection.head,1),e);}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy();}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this));}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this));}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e);}}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=t?t(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=t?t(l):l))return i}}hasFocus(){if(Z){let e=this.root.activeElement;if(e==this.dom)return !0;if(!e||!this.dom.contains(e))return !1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return !1;e=e.parentElement;}return !0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ma(this.dom),Me(this),this.domObserver.start();}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}posAtCoords(e){return Ea(this,e)}coordsAtPos(e,t=1){return Vs(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return Ia(this,t||this.state,e)}pasteHTML(e,t){return Pt(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Pt(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(ec(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null);}get isDestroyed(){return this.docView==null}dispatchEvent(e){return nc(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e));}domSelectionRange(){return U&&this.root.nodeType===11&&ha(this.dom.ownerDocument)==this.dom?Sc(this):this.domSelection()}domSelection(){return this.root.getSelection()}};function As(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]));}),e.translate||(e.translate="no"),[pe.node(0,n.state.doc.content.size,e)]}function Ds(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:pe.widget(n.state.selection.head,e,{raw:!0,marks:n.markCursor})};}else n.cursorWrapper=null;}function vs(n){return !n.someProp("editable",e=>e(n.state)===!1)}function Nc(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Is(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i]);}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function Ac(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return !0;t++;}for(let i in e)r++;return t!=r}function Rs(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ce={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Dc=typeof navigator<"u"&&/Mac/.test(navigator.platform),vc=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(B=0;B<10;B++)Ce[48+B]=Ce[96+B]=String(B);var B;for(B=1;B<=24;B++)Ce[B+111]="F"+B;var B;for(B=65;B<=90;B++)Ce[B]=String.fromCharCode(B+32),pn[B]=String.fromCharCode(B);var B;for(hn in Ce)pn.hasOwnProperty(hn)||(pn[hn]=Ce[hn]);var hn;function uo(n){var e=Dc&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||vc&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?pn:Ce)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}var Ic=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Rc(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Ic?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function Pc(n){let e=Object.create(null);for(let t in n)e[Rc(t)]=n[t];return e}function Tr(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function fo(n){return new P({props:{handleKeyDown:Er(n)}})}function Er(n){let e=Pc(n);return function(t,r){let i=uo(r),s,o=e[Tr(i,r)];if(o&&o(t.state,t.dispatch,t))return !0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[Tr(i,r,!1)];if(l&&l(t.state,t.dispatch,t))return !0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Ce[r.keyCode])&&s!=i){let l=e[Tr(s,r)];if(l&&l(t.state,t.dispatch,t))return !0}}return !1}}var mn=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function Bc(n,e){let{$cursor:t}=n.selection;return !t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}var Ar=(n,e,t)=>{let r=Bc(n,t);if(!r)return !1;let i=po(r);if(!i){let o=r.blockRange(),l=o&&Se(o);return l==null?!1:(e&&e(n.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&So(n,i,e))return !0;if(r.parent.content.size==0&&(ht(s,"end")||M.isSelectable(s))){let o=Xt(n.doc,r.before(),r.after(),k.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=n.tr.step(o);l.setSelection(ht(s,"end")?C.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):M.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView());}return !0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1};function ht(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return !0;if(t&&r.childCount!=1)return !1}return !1}var Dr=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return !1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return !1;s=po(r);}let o=s&&s.nodeBefore;return !o||!M.isSelectable(o)?!1:(e&&e(n.tr.setSelection(M.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function po(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Lc(n,e){let{$cursor:t}=n.selection;return !t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}var vr=(n,e,t)=>{let r=Lc(n,t);if(!r)return !1;let i=mo(r);if(!i)return !1;let s=i.nodeAfter;if(So(n,i,e))return !0;if(r.parent.content.size==0&&(ht(s,"start")||M.isSelectable(s))){let o=Xt(n.doc,r.before(),r.after(),k.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=n.tr.step(o);l.setSelection(ht(s,"start")?C.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):M.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView());}return !0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Ir=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return !1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return !1;s=mo(r);}let o=s&&s.nodeAfter;return !o||!M.isSelectable(o)?!1:(e&&e(n.tr.setSelection(M.create(n.doc,s.pos)).scrollIntoView()),!0)};function mo(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}var go=(n,e)=>{let t=n.selection,r=t instanceof M,i;if(r){if(t.node.isTextblock||!ae(n.doc,t.from))return !1;i=t.from;}else if(i=st(n.doc,t.from,-1),i==null)return !1;if(e){let s=n.tr.join(i);r&&s.setSelection(M.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView());}return !0},yo=(n,e)=>{let t=n.selection,r;if(t instanceof M){if(t.node.isTextblock||!ae(n.doc,t.to))return !1;r=t.to;}else if(r=st(n.doc,t.to,1),r==null)return !1;return e&&e(n.tr.join(r).scrollIntoView()),!0},bo=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Se(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},Rr=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return !t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Pr(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}var Br=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return !1;let i=t.node(-1),s=t.indexAfter(-1),o=Pr(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return !1;if(e){let l=t.after(),a=n.tr.replaceWith(l,l,o.createAndFill());a.setSelection(C.near(a.doc.resolve(l),1)),e(a.scrollIntoView());}return !0},Lr=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof ee||r.parent.inlineContent||i.parent.inlineContent)return !1;let s=Pr(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return !1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=n.tr.insert(o,s.createAndFill());l.setSelection(w.create(l.doc,o+1)),e(l.scrollIntoView());}return !0},Fr=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return !1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(ie(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Se(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};var ko=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(M.create(n.doc,i))),!0)};function $c(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return !r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||ae(n.doc,e.pos))?!1:(t&&t(n.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function So(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return !1;if($c(n,e,t))return !0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(t){let u=e.pos+i.nodeSize,f=b.empty;for(let m=s.length-1;m>=0;m--)f=b.from(s[m].create(null,f));f=b.from(r.copy(f));let h=n.tr.step(new R(e.pos-1,u,e.pos,u,new k(f,1,0),s.length,!0)),p=u+2*s.length;ae(h.doc,p)&&h.join(p),t(h.scrollIntoView());}return !0}let a=C.findFrom(e,1),c=a&&a.$from.blockRange(a.$to),d=c&&Se(c);if(d!=null&&d>=e.depth)return t&&t(n.tr.lift(c,d).scrollIntoView()),!0;if(l&&ht(i,"start",!0)&&ht(r,"end")){let u=r,f=[];for(;f.push(u),!u.isTextblock;)u=u.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(u.canReplace(u.childCount,u.childCount,h.content)){if(t){let m=b.empty;for(let y=f.length-1;y>=0;y--)m=b.from(f[y].copy(m));let g=n.tr.step(new R(e.pos-f.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new k(m,f.length,0),0,!0));t(g.scrollIntoView());}return !0}}return !1}function xo(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return !1;s--;}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(w.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}var zr=xo(-1),Vr=xo(1);function Mo(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=o&&it(o,n,e);return l?(r&&r(t.tr.wrap(o,l).scrollIntoView()),!0):!1}}function $r(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=t.selection.ranges[s];t.doc.nodesBetween(o,l,(a,c)=>{if(i)return !1;if(!(!a.isTextblock||a.hasMarkup(n,e)))if(a.type==n)i=!0;else {let d=t.doc.resolve(c),u=d.index();i=d.parent.canReplaceWith(u,u+1,n);}});}if(!i)return !1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=t.selection.ranges[o];s.setBlockType(l,a,n,e);}r(s.scrollIntoView());}return !0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function Co(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),l=!1,a=o;if(!o)return !1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return !1;let d=t.doc.resolve(o.start-2);a=new $e(d,d,o.depth),o.endIndex<o.parent.childCount&&(o=new $e(i,t.doc.resolve(s.end(o.depth)),o.depth)),l=!0;}let c=it(a,n,e,o);return c?(r&&r(Jc(t.tr,o,c,l,n).scrollIntoView()),!0):!1}}function Jc(n,e,t,r,i){let s=b.empty;for(let d=t.length-1;d>=0;d--)s=b.from(t[d].type.create(t[d].attrs,s));n.step(new R(e.start-(r?2:0),e.end,e.start,e.end,new k(s,0,0),t.length,!0));let o=0;for(let d=0;d<t.length;d++)t[d].type==i&&(o=d+1);let l=t.length-o,a=e.start+t.length-(r?2:0),c=e.parent;for(let d=e.startIndex,u=e.endIndex,f=!0;d<u;d++,f=!1)!f&&ie(n.doc,a,l)&&(n.split(a,l),a+=2*l),a+=c.child(d).nodeSize;return n}function wo(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?Wc(e,t,n,s):jc(e,t,s):!0:!1}}function Wc(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new R(s-1,o,s,o,new k(b.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new $e(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));let l=Se(r);if(l==null)return !1;i.lift(r,l);let a=i.mapping.map(s,-1)-1;return ae(i.doc,a)&&i.join(a),e(i.scrollIntoView()),!0}function jc(n,e,t){let r=n.tr,i=t.parent;for(let h=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return !1;let l=t.startIndex==0,a=t.endIndex==i.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(l?0:1),d+1,o.content.append(a?b.empty:b.from(i))))return !1;let u=s.pos,f=u+o.nodeSize;return r.step(new R(u-(l?1:0),f+(a?1:0),u+1,f-1,new k((l?b.empty:b.from(i.copy(b.empty))).append(a?b.empty:b.from(i.copy(b.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Oo(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return !1;let o=s.startIndex;if(o==0)return !1;let l=s.parent,a=l.child(o-1);if(a.type!=n)return !1;if(t){let c=a.lastChild&&a.lastChild.type==l.type,d=b.from(c?n.create():null),u=new k(b.from(n.create(null,b.from(l.type.create(null,d)))),c?3:1,0),f=s.start,h=s.end;t(e.tr.step(new R(f-(c?3:1),h,f,h,u,1,!0)).scrollIntoView());}return !0}}function Sn(n){let{state:e,transaction:t}=n,{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return {...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}var pt=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state;}get hasCustomState(){return !!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...d)=>{let u=a(...d)(o);return !s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),u}]))}get chain(){return ()=>this.createChain()}get can(){return ()=>this.createCan()}createChain(e,t=!0){let{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,d=()=>(!a&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(f=>f===!0)),u={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...m)=>{let g=this.buildProps(c,t),y=h(...m)(g);return l.push(y),u}])),run:d};return u}createCan(e){let{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return {...Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...d)=>c(...d)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){let{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:Sn({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...d)=>c(...d)(l)]))}};return l}},Ur=class{constructor(){this.callbacks={};}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){let r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={};}};function S(n,e,t){return n.config[e]===void 0&&n.parent?S(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?S(n.parent,e,t):null}):n.config[e]}function xn(n){let e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return {baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Ro(n){let e=[],{nodeExtensions:t,markExtensions:r}=xn(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{let l={name:o.name,options:o.options,storage:o.storage},a=S(o,"addGlobalAttributes",l);if(!a)return;a().forEach(d=>{d.types.forEach(u=>{Object.entries(d.attributes).forEach(([f,h])=>{e.push({type:u,name:f,attribute:{...s,...h}});});});});}),i.forEach(o=>{let l={name:o.name,options:o.options,storage:o.storage},a=S(o,"addAttributes",l);if(!a)return;let c=a();Object.entries(c).forEach(([d,u])=>{let f={...s,...u};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:d,attribute:f});});}),e}function F(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function N(...n){return n.filter(e=>!!e).reduce((e,t)=>{let r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){let l=s?s.split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(d=>!a.includes(d));r[i]=[...a,...c].join(" ");}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s;}),r},{})}function _r(n,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>N(t,r),{})}function Po(n){return typeof n=="function"}function O(n,e=void 0,...t){return Po(n)?e?n.bind(e)(...t):n(...t):n}function Kc(n={}){return Object.keys(n).length===0&&n.constructor===Object}function qc(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function To(n,e){return n.style?n:{...n,getAttrs:t=>{let r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return !1;let i=e.reduce((s,o)=>{let l=o.attribute.parseHTML?o.attribute.parseHTML(t):qc(t.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return {...r,...i}}}}function Eo(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&Kc(t)?!1:t!=null))}function Uc(n,e){var t;let r=Ro(n),{nodeExtensions:i,markExtensions:s}=xn(n),o=(t=i.find(c=>S(c,"topNode")))===null||t===void 0?void 0:t.name,l=Object.fromEntries(i.map(c=>{let d=r.filter(y=>y.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((y,x)=>{let T=S(x,"extendNodeSchema",u);return {...y,...T?T(c):{}}},{}),h=Eo({...f,content:O(S(c,"content",u)),marks:O(S(c,"marks",u)),group:O(S(c,"group",u)),inline:O(S(c,"inline",u)),atom:O(S(c,"atom",u)),selectable:O(S(c,"selectable",u)),draggable:O(S(c,"draggable",u)),code:O(S(c,"code",u)),defining:O(S(c,"defining",u)),isolating:O(S(c,"isolating",u)),attrs:Object.fromEntries(d.map(y=>{var x;return [y.name,{default:(x=y==null?void 0:y.attribute)===null||x===void 0?void 0:x.default}]}))}),p=O(S(c,"parseHTML",u));p&&(h.parseDOM=p.map(y=>To(y,d)));let m=S(c,"renderHTML",u);m&&(h.toDOM=y=>m({node:y,HTMLAttributes:_r(y,d)}));let g=S(c,"renderText",u);return g&&(h.toText=g),[c.name,h]})),a=Object.fromEntries(s.map(c=>{let d=r.filter(g=>g.type===c.name),u={name:c.name,options:c.options,storage:c.storage,editor:e},f=n.reduce((g,y)=>{let x=S(y,"extendMarkSchema",u);return {...g,...x?x(c):{}}},{}),h=Eo({...f,inclusive:O(S(c,"inclusive",u)),excludes:O(S(c,"excludes",u)),group:O(S(c,"group",u)),spanning:O(S(c,"spanning",u)),code:O(S(c,"code",u)),attrs:Object.fromEntries(d.map(g=>{var y;return [g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=O(S(c,"parseHTML",u));p&&(h.parseDOM=p.map(g=>To(g,d)));let m=S(c,"renderHTML",u);return m&&(h.toDOM=g=>m({mark:g,HTMLAttributes:_r(g,d)})),[c.name,h]}));return new jt({topNode:o,nodes:l,marks:a})}function Jr(n,e){return e.nodes[n]||e.marks[n]||null}function No(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}var _c=(n,e=500)=>{let t="",r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;let d=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";t+=d.slice(0,Math.max(0,r-s));}),t};function ei(n){return Object.prototype.toString.call(n)==="[object RegExp]"}var mt=class{constructor(e){this.find=e.find,this.handler=e.handler;}},Gc=(n,e)=>{if(ei(e))return e.exec(n);let t=e(n);if(!t)return null;let r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Wr(n){var e;let{editor:t,from:r,to:i,text:s,rules:o,plugin:l}=n,{view:a}=t;if(a.composing)return !1;let c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return !1;let d=!1,u=_c(c)+s;return o.forEach(f=>{if(d)return;let h=Gc(u,f.find);if(!h)return;let p=a.state.tr,m=Sn({state:a.state,transaction:p}),g={from:r-(h[0].length-s.length),to:i},{commands:y,chain:x,can:T}=new pt({editor:t,state:m});f.handler({state:m,range:g,match:h,commands:y,chain:x,can:T})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),d=!0);}),d}function Yc(n){let{editor:e,rules:t}=n,r=new P({state:{init(){return null},apply(i,s){let o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,l){return Wr({editor:e,from:s,to:o,text:l,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{let{$cursor:s}=i.state.selection;s&&Wr({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r});}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return !1;let{$cursor:o}=i.state.selection;return o?Wr({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function Xc(n){return typeof n=="number"}var Gr=class{constructor(e){this.find=e.find,this.handler=e.handler;}},Zc=(n,e,t)=>{if(ei(e))return [...n.matchAll(e)];let r=e(n,t);return r?r.map(i=>{let s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Qc(n){let{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=n,{commands:a,chain:c,can:d}=new pt({editor:e,state:t}),u=[];return t.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;let m=Math.max(r,p),g=Math.min(i,p+h.content.size),y=h.textBetween(m-p,g-p,void 0,"\uFFFC");Zc(y,s.find,o).forEach(T=>{if(T.index===void 0)return;let I=m+T.index+1,D=I+T[0].length,L={from:t.tr.mapping.map(I),to:t.tr.mapping.map(D)},q=s.handler({state:t,range:L,match:T,commands:a,chain:c,can:d,pasteEvent:o,dropEvent:l});u.push(q);});}),u.every(h=>h!==null)}function ed(n){let{editor:e,rules:t}=n,r=null,i=!1,s=!1,o=new ClipboardEvent("paste"),l=new DragEvent("drop");return t.map(c=>new P({view(d){let u=f=>{var h;r=!((h=d.dom.parentElement)===null||h===void 0)&&h.contains(f.target)?d.dom.parentElement:null;};return window.addEventListener("dragstart",u),{destroy(){window.removeEventListener("dragstart",u);}}},props:{handleDOMEvents:{drop:(d,u)=>(s=r===d.dom.parentElement,l=u,!1),paste:(d,u)=>{var f;let h=(f=u.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=u,i=!!(h!=null&&h.includes("data-pm-slice")),!1}}},appendTransaction:(d,u,f)=>{let h=d[0],p=h.getMeta("uiEvent")==="paste"&&!i,m=h.getMeta("uiEvent")==="drop"&&!s;if(!p&&!m)return;let g=u.doc.content.findDiffStart(f.doc.content),y=u.doc.content.findDiffEnd(f.doc.content);if(!Xc(g)||!y||g===y.b)return;let x=f.tr,T=Sn({state:f,transaction:x});if(!(!Qc({editor:e,state:T,from:Math.max(g-1,0),to:y.b-1,rule:c,pasteEvent:o,dropEvent:l})||!x.steps.length))return l=new DragEvent("drop"),o=new ClipboardEvent("paste"),x}}))}function td(n){let e=n.filter((t,r)=>n.indexOf(t)!==r);return [...new Set(e)]}var Yr=class n{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=n.resolve(e),this.schema=Uc(this.extensions,t),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;let s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Jr(r.name,this.schema)};r.type==="mark"&&(!((i=O(S(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);let o=S(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);let l=S(r,"onCreate",s);l&&this.editor.on("create",l);let a=S(r,"onUpdate",s);a&&this.editor.on("update",a);let c=S(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);let d=S(r,"onTransaction",s);d&&this.editor.on("transaction",d);let u=S(r,"onFocus",s);u&&this.editor.on("focus",u);let f=S(r,"onBlur",s);f&&this.editor.on("blur",f);let h=S(r,"onDestroy",s);h&&this.editor.on("destroy",h);});}static resolve(e){let t=n.sort(n.flatten(e)),r=td(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{let r={name:t.name,options:t.options,storage:t.storage},i=S(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{let s=S(r,"priority")||100,o=S(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Jr(t.name,this.schema)},i=S(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){let{editor:e}=this,t=n.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{let l={name:o.name,options:o.options,storage:o.storage,editor:e,type:Jr(o.name,this.schema)},a=[],c=S(o,"addKeyboardShortcuts",l),d={};if(o.type==="mark"&&o.config.exitable&&(d.ArrowRight=()=>Y.handleExit({editor:e,mark:o})),c){let m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));d={...d,...m};}let u=fo(d);a.push(u);let f=S(o,"addInputRules",l);No(o,e.options.enableInputRules)&&f&&r.push(...f());let h=S(o,"addPasteRules",l);No(o,e.options.enablePasteRules)&&h&&i.push(...h());let p=S(o,"addProseMirrorPlugins",l);if(p){let m=p();a.push(...m);}return a}).flat();return [Yc({editor:e,rules:r}),...ed({editor:e,rules:i}),...s]}get attributes(){return Ro(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=xn(this.extensions);return Object.fromEntries(t.filter(r=>!!S(r,"addNodeView")).map(r=>{let i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:F(r.name,this.schema)},o=S(r,"addNodeView",s);if(!o)return [];let l=(a,c,d,u)=>{let f=_r(a,i);return o()({editor:e,node:a,getPos:d,decorations:u,HTMLAttributes:f,extension:r})};return [r.name,l]}))}};function nd(n){return Object.prototype.toString.call(n).slice(8,-1)}function jr(n){return nd(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Mn(n,e){let t={...n};return jr(n)&&jr(e)&&Object.keys(e).forEach(r=>{jr(e[r])?r in n?t[r]=Mn(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]});}),t}var j=class n{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=O(S(this,"addOptions",{name:this.name}))),this.storage=O(S(this,"addStorage",{name:this.name,options:this.options}))||{};}static create(e={}){return new n(e)}configure(e={}){let t=this.extend();return t.options=Mn(this.options,e),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new n(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=O(S(t,"addOptions",{name:t.name})),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}};function Bo(n,e,t){let{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{},l="",a=!0;return n.nodesBetween(r,i,(c,d,u,f)=>{var h;let p=o==null?void 0:o[c.type.name];p?(c.isBlock&&!a&&(l+=s,a=!0),u&&(l+=p({node:c,pos:d,parent:u,index:f,range:e}))):c.isText?(l+=(h=c==null?void 0:c.text)===null||h===void 0?void 0:h.slice(Math.max(r,d)-d,i-d),a=!1):c.isBlock&&!a&&(l+=s,a=!0);}),l}function Lo(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}var rd=j.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return [new P({key:new te("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(d=>d.$from.pos)),l=Math.max(...s.map(d=>d.$to.pos)),a=Lo(t);return Bo(r,{from:o,to:l},{textSerializers:a})}}})]}}),id=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges());}),!0),sd=(n=!1)=>({commands:e})=>e.setContent("",n),od=()=>({state:n,tr:e,dispatch:t})=>{let{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;let{doc:c,mapping:d}=e,u=c.resolve(d.map(a)),f=c.resolve(d.map(a+l.nodeSize)),h=u.blockRange(f);if(!h)return;let p=Se(h);if(l.type.isTextblock){let{defaultType:m}=u.parent.contentMatchAt(u.index());e.setNodeMarkup(h.start,m);}(p||p===0)&&e.lift(h,p);});}),!0},ld=n=>e=>n(e),ad=()=>({state:n,dispatch:e})=>Lr(n,e),cd=(n,e)=>({editor:t,tr:r})=>{let{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);let o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new w(r.doc.resolve(o-1))),!0},dd=()=>({tr:n,dispatch:e})=>{let{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return !1;let i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){let l=i.before(s),a=i.after(s);n.delete(l,a).scrollIntoView();}return !0}return !1},ud=n=>({tr:e,state:t,dispatch:r})=>{let i=F(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){let a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView();}return !0}return !1},fd=n=>({tr:e,dispatch:t})=>{let{from:r,to:i}=n;return t&&e.delete(r,i),!0},hd=()=>({state:n,dispatch:e})=>mn(n,e),pd=()=>({commands:n})=>n.keyboardShortcut("Enter"),md=()=>({state:n,dispatch:e})=>Br(n,e);function yn(n,e,t={strict:!0}){let r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:ei(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Xr(n,e,t={}){return n.find(r=>r.type===e&&yn(r.attrs,t))}function gd(n,e,t={}){return !!Xr(n,e,t)}function ti(n,e,t={}){if(!n||!e)return;let r=n.parent.childAfter(n.parentOffset);if(n.parentOffset===r.offset&&r.offset!==0&&(r=n.parent.childBefore(n.parentOffset)),!r.node)return;let i=Xr([...r.node.marks],e,t);if(!i)return;let s=r.index,o=n.start()+r.offset,l=s+1,a=o+r.node.nodeSize;for(Xr([...r.node.marks],e,t);s>0&&i.isInSet(n.parent.child(s-1).marks);)s-=1,o-=n.parent.child(s).nodeSize;for(;l<n.parent.childCount&&gd([...n.parent.child(l).marks],e,t);)a+=n.parent.child(l).nodeSize,l+=1;return {from:o,to:a}}function Re(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}var yd=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=Re(n,r.schema),{doc:o,selection:l}=t,{$from:a,from:c,to:d}=l;if(i){let u=ti(a,s,e);if(u&&u.from<=c&&u.to>=d){let f=w.create(o,u.from,u.to);t.setSelection(f);}}return !0},bd=n=>e=>{let t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return !0;return !1};function Fo(n){return n instanceof w}function et(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function zo(n,e=null){if(!e)return null;let t=C.atStart(n),r=C.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;let i=t.from,s=r.to;return e==="all"?w.create(n,et(0,i,s),et(n.content.size,i,s)):w.create(n,et(e,i,s),et(e,i,s))}function ni(){return ["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var kd=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};let o=()=>{ni()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView());});};if(r.hasFocus()&&n===null||n===!1)return !0;if(s&&n===null&&!Fo(t.state.selection))return o(),!0;let l=zo(i.doc,n)||t.state.selection,a=t.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Sd=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),xd=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Zr=n=>{let e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){let r=e[t];r.nodeType===3&&r.nodeValue&&!/\S/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Zr(r);}return n};function Ao(n){let e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Zr(t),Zr(t)}function bn(n,e,t){if(t={slice:!0,parseOptions:{},...t},typeof n=="object"&&n!==null)try{return Array.isArray(n)&&n.length>0?b.fromArray(n.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(n)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",r),bn("",e,t)}if(typeof n=="string"){let r=Je.fromSchema(e);return t.slice?r.parseSlice(Ao(n),t.parseOptions).content:r.parse(Ao(n),t.parseOptions)}return bn("",e,t)}function Md(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof X||i instanceof R))return;let s=n.mapping.maps[r],o=0;s.forEach((l,a,c,d)=>{o===0&&(o=d);}),n.setSelection(C.near(n.doc.resolve(o),t));}var Cd=n=>n.toString().startsWith("<"),wd=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{if(i){t={parseOptions:{},updateSelection:!0,...t};let o=bn(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(o.toString()==="<>")return !0;let{from:l,to:a}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},c=!0,d=!0;if((Cd(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,d=d?f.isBlock:!1;}),l===a&&d){let{parent:f}=r.doc.resolve(l);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(l-=1,a+=1);}c?Array.isArray(e)?r.insertText(e.map(f=>f.text||"").join(""),l,a):typeof e=="object"&&e&&e.text?r.insertText(e.text,l,a):r.insertText(e,l,a):r.replaceWith(l,a,o),t.updateSelection&&Md(r,r.steps.length-1,-1);}return !0},Od=()=>({state:n,dispatch:e})=>go(n,e),Td=()=>({state:n,dispatch:e})=>yo(n,e),Ed=()=>({state:n,dispatch:e})=>Ar(n,e),Nd=()=>({state:n,dispatch:e})=>vr(n,e),Ad=()=>({tr:n,state:e,dispatch:t})=>{try{let r=st(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return !1}},Dd=()=>({state:n,dispatch:e,tr:t})=>{try{let r=st(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return !1}};function Cn(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function vd(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))ni()||Cn()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}var Id=n=>({editor:e,view:t,tr:r,dispatch:i})=>{let s=vd(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,l));});return a==null||a.steps.forEach(c=>{let d=c.map(r.mapping);d&&i&&r.maybeStep(d);}),!0};function Lt(n,e,t={}){let{from:r,to:i,empty:s}=n.selection,o=e?F(e,n.schema):null,l=[];n.doc.nodesBetween(r,i,(u,f)=>{if(u.isText)return;let h=Math.max(r,f),p=Math.min(i,f+u.nodeSize);l.push({node:u,from:h,to:p});});let a=i-r,c=l.filter(u=>o?o.name===u.node.type.name:!0).filter(u=>yn(u.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((u,f)=>u+f.to-f.from,0)>=a}var Rd=(n,e={})=>({state:t,dispatch:r})=>{let i=F(n,t.schema);return Lt(t,i,e)?bo(t,r):!1},Pd=()=>({state:n,dispatch:e})=>Fr(n,e),Bd=n=>({state:e,dispatch:t})=>{let r=F(n,e.schema);return wo(r)(e,t)},Ld=()=>({state:n,dispatch:e})=>Rr(n,e);function wn(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Do(n,e){let t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}var Fd=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null,l=wn(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(s=F(n,r.schema)),l==="mark"&&(o=Re(n,r.schema)),i&&t.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,d)=>{s&&s===c.type&&t.setNodeMarkup(d,void 0,Do(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(u=>{o===u.type&&t.addMark(d,d+c.nodeSize,o.create(Do(u.attrs,e)));});});}),!0):!1},zd=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Vd=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),$d=()=>({state:n,dispatch:e})=>Dr(n,e),Hd=()=>({state:n,dispatch:e})=>Ir(n,e),Jd=()=>({state:n,dispatch:e})=>ko(n,e),Wd=()=>({state:n,dispatch:e})=>Vr(n,e),jd=()=>({state:n,dispatch:e})=>zr(n,e);function Vo(n,e,t={}){return bn(n,e,{slice:!1,parseOptions:t})}var Kd=(n,e=!1,t={})=>({tr:r,editor:i,dispatch:s})=>{let{doc:o}=r,l=Vo(n,i.schema,t);return s&&r.replaceWith(0,o.content.size,l).setMeta("preventUpdate",!e),!0};function gt(n,e){let t=Re(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,a=>{o.push(...a.marks);});let l=o.find(a=>a.type.name===t.name);return l?{...l.attrs}:{}}function qd(n){for(let e=0;e<n.edgeCount;e+=1){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Ud(n,e){for(let t=n.depth;t>0;t-=1){let r=n.node(t);if(e(r))return {pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ri(n){return e=>Ud(e.$from,n)}function _d(n,e){let t=ke.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}function Gd(n,e){let t={from:0,to:n.content.size};return Bo(n,t,e)}function Yd(n,e){let t=F(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,l=>{s.push(l);});let o=s.reverse().find(l=>l.type.name===t.name);return o?{...o.attrs}:{}}function Xd(n,e){let t=wn(typeof e=="string"?e:e.name,n.schema);return t==="node"?Yd(n,e):t==="mark"?gt(n,e):{}}function $o(n,e,t){let r=[];return n===e?t.resolve(n).marks().forEach(i=>{let s=t.resolve(n-1),o=ti(s,i.type);o&&r.push({mark:i,...o});}):t.nodesBetween(n,e,(i,s)=>{!i||i.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})));}),r}function gn(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{let i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Qr(n,e,t={}){let{empty:r,ranges:i}=n.selection,s=e?Re(e,n.schema):null;if(r)return !!(n.storedMarks||n.selection.$from.marks()).filter(u=>s?s.name===u.type.name:!0).find(u=>yn(u.attrs,t,{strict:!1}));let o=0,l=[];if(i.forEach(({$from:u,$to:f})=>{let h=u.pos,p=f.pos;n.doc.nodesBetween(h,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;let y=Math.max(h,g),x=Math.min(p,g+m.nodeSize),T=x-y;o+=T,l.push(...m.marks.map(I=>({mark:I,from:y,to:x})));});}),o===0)return !1;let a=l.filter(u=>s?s.name===u.mark.type.name:!0).filter(u=>yn(u.mark.attrs,t,{strict:!1})).reduce((u,f)=>u+f.to-f.from,0),c=l.filter(u=>s?u.mark.type!==s&&u.mark.type.excludes(s):!0).reduce((u,f)=>u+f.to-f.from,0);return (a>0?a+c:a)>=o}function Zd(n,e,t={}){if(!e)return Lt(n,null,t)||Qr(n,null,t);let r=wn(e,n.schema);return r==="node"?Lt(n,e,t):r==="mark"?Qr(n,e,t):!1}function vo(n,e){let{nodeExtensions:t}=xn(e),r=t.find(o=>o.name===n);if(!r)return !1;let i={name:r.name,options:r.options,storage:r.storage},s=O(S(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Qd(n){var e;let t=(e=n.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=n.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function eu(n,e,t){var r;let{selection:i}=e,s=null;if(Fo(i)&&(s=i.$cursor),s){let l=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return !!t.isInSet(l)||!l.some(a=>a.type.excludes(t))}let{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(l.pos,a.pos,(d,u,f)=>{if(c)return !1;if(d.isInline){let h=!f||f.type.allowsMarkType(t),p=!!t.isInSet(d.marks)||!d.marks.some(m=>m.type.excludes(t));c=h&&p;}return !c}),c})}var tu=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let{selection:s}=t,{empty:o,ranges:l}=s,a=Re(n,r.schema);if(i)if(o){let c=gt(r,a);t.addStoredMark(a.create({...c,...e}));}else l.forEach(c=>{let d=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(d,u,(f,h)=>{let p=Math.max(h,d),m=Math.min(h+f.nodeSize,u);f.marks.find(y=>y.type===a)?f.marks.forEach(y=>{a===y.type&&t.addMark(p,m,a.create({...y.attrs,...e}));}):t.addMark(p,m,a.create(e));});});return eu(r,t,a)},nu=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),ru=(n,e={})=>({state:t,dispatch:r,chain:i})=>{let s=F(n,t.schema);return s.isTextblock?i().command(({commands:o})=>$r(s,e)(t)?!0:o.clearNodes()).command(({state:o})=>$r(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},iu=n=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,i=et(n,0,r.content.size),s=M.create(r,i);e.setSelection(s);}return !0},su=n=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=w.atStart(r).from,l=w.atEnd(r).to,a=et(i,o,l),c=et(s,o,l),d=w.create(r,a,c);e.setSelection(d);}return !0},ou=n=>({state:e,dispatch:t})=>{let r=F(n,e.schema);return Oo(r)(e,t)};function Io(n,e){let t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){let r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r);}}var lu=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{let{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,d=gn(c,l.node().type.name,l.node().attrs);if(s instanceof M&&s.node.isBlock)return !l.parentOffset||!ie(o,l.pos)?!1:(r&&(n&&Io(t,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return !1;if(r){let u=a.parentOffset===a.parent.content.size;s instanceof w&&e.deleteSelection();let f=l.depth===0?void 0:qd(l.node(-1).contentMatchAt(l.indexAfter(-1))),h=u&&f?[{type:f,attrs:d}]:void 0,p=ie(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&ie(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(p=!0,h=f?[{type:f,attrs:d}]:void 0),p&&(e.split(e.mapping.map(l.pos),1,h),f&&!u&&!l.parentOffset&&l.parent.type!==f)){let m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f);}n&&Io(t,i.extensionManager.splittableMarks),e.scrollIntoView();}return !0},au=n=>({tr:e,state:t,dispatch:r,editor:i})=>{var s;let o=F(n,t.schema),{$from:l,$to:a}=t.selection,c=t.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(a))return !1;let d=l.node(-1);if(d.type!==o)return !1;let u=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==o||l.index(-2)!==l.node(-2).childCount-1)return !1;if(r){let g=b.empty,y=l.index(-1)?1:l.index(-2)?2:3;for(let q=l.depth-y;q>=l.depth-3;q-=1)g=b.from(l.node(q).copy(g));let x=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,T=gn(u,l.node().type.name,l.node().attrs),I=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(T))||void 0;g=g.append(b.from(o.createAndFill(null,I)||void 0));let D=l.before(l.depth-(y-1));e.replace(D,l.after(-x),new k(g,4-y,0));let L=-1;e.doc.nodesBetween(D,e.doc.content.size,(q,E)=>{if(L>-1)return !1;q.isTextblock&&q.content.size===0&&(L=E+1);}),L>-1&&e.setSelection(w.near(e.doc.resolve(L))),e.scrollIntoView();}return !0}let f=a.pos===l.end()?d.contentMatchAt(0).defaultType:null,h=gn(u,d.type.name,d.attrs),p=gn(u,l.node().type.name,l.node().attrs);e.delete(l.pos,a.pos);let m=f?[{type:o,attrs:h},{type:f,attrs:p}]:[{type:o,attrs:h}];if(!ie(e.doc,l.pos,2))return !1;if(r){let{selection:g,storedMarks:y}=t,{splittableMarks:x}=i.extensionManager,T=y||g.$to.parentOffset&&g.$from.marks();if(e.split(l.pos,2,m).scrollIntoView(),!T||!r)return !0;let I=T.filter(D=>x.includes(D.type.name));e.ensureMarks(I);}return !0},Kr=(n,e)=>{let t=ri(o=>o.type===e)(n.selection);if(!t)return !0;let r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return !0;let i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ae(n.doc,t.pos)&&n.join(t.pos),!0},qr=(n,e)=>{let t=ri(o=>o.type===e)(n.selection);if(!t)return !0;let r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return !0;let i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ae(n.doc,r)&&n.join(r),!0},cu=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:d})=>{let{extensions:u,splittableMarks:f}=i.extensionManager,h=F(n,o.schema),p=F(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:x}=m,T=y.blockRange(x),I=g||m.$to.parentOffset&&m.$from.marks();if(!T)return !1;let D=ri(L=>vo(L.type.name,u))(m);if(T.depth>=1&&D&&T.depth-D.depth<=1){if(D.node.type===h)return c.liftListItem(p);if(vo(D.node.type.name,u)&&h.validContent(D.node.content)&&l)return a().command(()=>(s.setNodeMarkup(D.pos,h),!0)).command(()=>Kr(s,h)).command(()=>qr(s,h)).run()}return !t||!I||!l?a().command(()=>d().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Kr(s,h)).command(()=>qr(s,h)).run():a().command(()=>{let L=d().wrapInList(h,r),q=I.filter(E=>f.includes(E.type.name));return s.ensureMarks(q),L?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Kr(s,h)).command(()=>qr(s,h)).run()},du=(n,e={},t={})=>({state:r,commands:i})=>{let{extendEmptyMarkRange:s=!1}=t,o=Re(n,r.schema);return Qr(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},uu=(n,e,t={})=>({state:r,commands:i})=>{let s=F(n,r.schema),o=F(e,r.schema);return Lt(r,s,t)?i.setNode(o):i.setNode(s,t)},fu=(n,e={})=>({state:t,commands:r})=>{let i=F(n,t.schema);return Lt(t,i,e)?r.lift(i):r.wrapIn(i,e)},hu=()=>({state:n,dispatch:e})=>{let t=n.plugins;for(let r=0;r<t.length;r+=1){let i=t[r],s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){let o=n.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){let a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,a));}else o.delete(s.from,s.to);}return !0}}return !1},pu=()=>({tr:n,dispatch:e})=>{let{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos);}),!0},mu=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;let{extendEmptyMarkRange:o=!1}=e,{selection:l}=t,a=Re(n,r.schema),{$from:c,empty:d,ranges:u}=l;if(!i)return !0;if(d&&o){let{from:f,to:h}=l,p=(s=c.marks().find(g=>g.type===a))===null||s===void 0?void 0:s.attrs,m=ti(c,a,p);m&&(f=m.from,h=m.to),t.removeMark(f,h,a);}else u.forEach(f=>{t.removeMark(f.$from.pos,f.$to.pos,a);});return t.removeStoredMark(a),!0},gu=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null,l=wn(typeof n=="string"?n:n.name,r.schema);return l?(l==="node"&&(s=F(n,r.schema)),l==="mark"&&(o=Re(n,r.schema)),i&&t.selection.ranges.forEach(a=>{let c=a.$from.pos,d=a.$to.pos;r.doc.nodesBetween(c,d,(u,f)=>{s&&s===u.type&&t.setNodeMarkup(f,void 0,{...u.attrs,...e}),o&&u.marks.length&&u.marks.forEach(h=>{if(o===h.type){let p=Math.max(f,c),m=Math.min(f+u.nodeSize,d);t.addMark(p,m,o.create({...h.attrs,...e}));}});});}),!0):!1},yu=(n,e={})=>({state:t,dispatch:r})=>{let i=F(n,t.schema);return Mo(i,e)(t,r)},bu=(n,e={})=>({state:t,dispatch:r})=>{let i=F(n,t.schema);return Co(i,e)(t,r)},ku=Object.freeze({__proto__:null,blur:id,clearContent:sd,clearNodes:od,command:ld,createParagraphNear:ad,cut:cd,deleteCurrentNode:dd,deleteNode:ud,deleteRange:fd,deleteSelection:hd,enter:pd,exitCode:md,extendMarkRange:yd,first:bd,focus:kd,forEach:Sd,insertContent:xd,insertContentAt:wd,joinUp:Od,joinDown:Td,joinBackward:Ed,joinForward:Nd,joinItemBackward:Ad,joinItemForward:Dd,keyboardShortcut:Id,lift:Rd,liftEmptyBlock:Pd,liftListItem:Bd,newlineInCode:Ld,resetAttributes:Fd,scrollIntoView:zd,selectAll:Vd,selectNodeBackward:$d,selectNodeForward:Hd,selectParentNode:Jd,selectTextblockEnd:Wd,selectTextblockStart:jd,setContent:Kd,setMark:tu,setMeta:nu,setNode:ru,setNodeSelection:iu,setTextSelection:su,sinkListItem:ou,splitBlock:lu,splitListItem:au,toggleList:cu,toggleMark:du,toggleNode:uu,toggleWrap:fu,undoInputRule:hu,unsetAllMarks:pu,unsetMark:mu,updateAttributes:gu,wrapIn:yu,wrapInList:bu}),Su=j.create({name:"commands",addCommands(){return {...ku}}}),xu=j.create({name:"editable",addProseMirrorPlugins(){return [new P({key:new te("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Mu=j.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:n}=this;return [new P({key:new te("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;let r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;let r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Cu=j.create({name:"keymap",addKeyboardShortcuts(){let n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{let{selection:a,doc:c}=l,{empty:d,$anchor:u}=a,{pos:f,parent:h}=u,p=u.parent.isTextblock?l.doc.resolve(f-1):u,m=p.parent.type.spec.isolating,g=u.pos-u.parentOffset,y=m&&p.parent.childCount===1?g===u.pos:C.atStart(c).from===f;return !d||!y||!h.type.isTextblock||h.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ni()||Cn()?s:i},addProseMirrorPlugins(){return [new P({key:new te("clearDocument"),appendTransaction:(n,e,t)=>{if(!(n.some(p=>p.docChanged)&&!e.doc.eq(t.doc)))return;let{empty:i,from:s,to:o}=e.selection,l=C.atStart(e.doc).from,a=C.atEnd(e.doc).to;if(i||!(s===l&&o===a)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;let u=t.tr,f=Sn({state:t,transaction:u}),{commands:h}=new pt({editor:this.editor,state:f});if(h.clearNodes(),!!u.steps.length)return u}})]}}),wu=j.create({name:"tabindex",addProseMirrorPlugins(){return [new P({key:new te("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Ou=Object.freeze({__proto__:null,ClipboardTextSerializer:rd,Commands:Su,Editable:xu,FocusEvents:Mu,Keymap:Cu,Tabindex:wu}),Tu=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Eu(n,e,t){let r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;let i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var kn=class extends Ur{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}));},0);}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Eu(Tu,this.options.injectNonce));}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state));}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr});}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let r=Po(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i);}unregisterPlugin(e){if(this.isDestroyed)return;let t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(t))});this.view.updateState(r);}createExtensionManager(){let t=[...this.options.enableCoreExtensions?Object.values(Ou):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Yr(t,this);}createCommandManager(){this.commandManager=new pt({editor:this});}createSchema(){this.schema=this.extensionManager.schema;}createView(){let e=Vo(this.options.content,this.schema,this.options.parseOptions),t=zo(e,this.options.autofocus);this.view=new cn(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:en.create({doc:e,selection:t||void 0})});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();let i=this.view.dom;i.editor=this;}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews});}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`;}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return (l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}let t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});let i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e});}getAttributes(e){return Xd(this.state,e)}isActive(e,t){let r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return Zd(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return _d(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Gd(this.state.doc,{blockSeparator:t,textSerializers:{...Lo(this.schema),...r}})}get isEmpty(){return Qd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners();}get isDestroyed(){var e;return !(!((e=this.view)===null||e===void 0)&&e.docView)}};function me(n){return new mt({find:n.find,handler:({state:e,range:t,match:r})=>{let i=O(n.getAttributes,void 0,r);if(i===!1||i===null)return null;let{tr:s}=e,o=r[r.length-1],l=r[0];if(o){let a=l.search(/\S/),c=t.from+l.indexOf(o),d=c+o.length;if($o(t.from,t.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===n.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;d<t.to&&s.delete(d,t.to),c>t.from&&s.delete(t.from+a,c);let f=t.from+a+o.length;s.addMark(t.from+a,f,n.type.create(i||{})),s.removeStoredMark(n.type);}}})}function On(n){return new mt({find:n.find,handler:({state:e,range:t,match:r})=>{let i=O(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from,l=t.to,a=n.type.create(i);if(r[1]){let c=r[0].lastIndexOf(r[1]),d=o+c;d>l?d=l:l=d+r[1].length;let u=r[0][r[0].length-1];s.insertText(u,o+r[0].length-1),s.replaceWith(d,l,a);}else r[0]&&s.insert(o-1,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l));s.scrollIntoView();}})}function Ft(n){return new mt({find:n.find,handler:({state:e,range:t,match:r})=>{let i=e.doc.resolve(t.from),s=O(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s);}})}function Pe(n){return new mt({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{let s=O(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),a=o.doc.resolve(t.from).blockRange(),c=a&&it(a,n.type,s);if(!c)return null;if(o.wrap(a,c),n.keepMarks&&n.editor){let{selection:u,storedMarks:f}=e,{splittableMarks:h}=n.editor.extensionManager,p=f||u.$to.parentOffset&&u.$from.marks();if(p){let m=p.filter(g=>h.includes(g.type.name));o.ensureMarks(m);}}if(n.keepAttributes){let u=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(u,s).run();}let d=o.doc.resolve(t.from-1).nodeBefore;d&&d.type===n.type&&ae(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,d))&&o.join(t.from-1);}})}var Y=class n{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=O(S(this,"addOptions",{name:this.name}))),this.storage=O(S(this,"addStorage",{name:this.name,options:this.options}))||{};}static create(e={}){return new n(e)}configure(e={}){let t=this.extend();return t.options=Mn(this.options,e),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new n(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=O(S(t,"addOptions",{name:t.name})),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return !1;let a=o.find(c=>(c==null?void 0:c.type.name)===t.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return !1}},v=class n{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=O(S(this,"addOptions",{name:this.name}))),this.storage=O(S(this,"addStorage",{name:this.name,options:this.options}))||{};}static create(e={}){return new n(e)}configure(e={}){let t=this.extend();return t.options=Mn(this.options,e),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new n(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=O(S(t,"addOptions",{name:t.name})),t.storage=O(S(t,"addStorage",{name:t.name,options:t.options})),t}};function ge(n){return new Gr({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{let s=O(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;let{tr:o}=e,l=r[r.length-1],a=r[0],c=t.to;if(l){let d=a.search(/\S/),u=t.from+a.indexOf(l),f=u+l.length;if($o(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>u).length)return null;f<t.to&&o.delete(f,t.to),u>t.from&&o.delete(t.from+d,u),c=t.from+d+l.length,o.addMark(t.from+d,c,n.type.create(s||{})),o.removeStoredMark(n.type);}}})}var vu=({renderers:n})=>re__default.default.createElement(re__default.default.Fragment,null,Object.entries(n).map(([e,t])=>Au__default.default.createPortal(t.reactElement,t.element,e))),si=class extends re__default.default.Component{constructor(e){super(e),this.editorContentRef=re__default.default.createRef(),this.initialized=!1,this.state={renderers:{}};}componentDidMount(){this.init();}componentDidUpdate(){this.init();}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0;}}maybeFlushSync(e){this.initialized?Au.flushSync(e):e();}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}));});}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{let r={...t};return delete r[e],{renderers:r}});});}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t});}render(){let{editor:e,...t}=this.props;return re__default.default.createElement(re__default.default.Fragment,null,re__default.default.createElement("div",{ref:this.editorContentRef,...t}),re__default.default.createElement(vu,{renderers:this.state.renderers}))}},Iu=n=>{let e=re__default.default.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return re__default.default.createElement(si,{key:e,...n})},Wo=re__default.default.memo(Iu),oi=class extends kn{constructor(){super(...arguments),this.contentComponent=null;}};function Ru(){let[,n]=re.useState(0);return ()=>n(e=>e+1)}var jo=(n={},e=[])=>{let[t,r]=re.useState(null),i=Ru(),{onBeforeCreate:s,onBlur:o,onCreate:l,onDestroy:a,onFocus:c,onSelectionUpdate:d,onTransaction:u,onUpdate:f}=n,h=re.useRef(s),p=re.useRef(o),m=re.useRef(l),g=re.useRef(a),y=re.useRef(c),x=re.useRef(d),T=re.useRef(u),I=re.useRef(f);return re.useEffect(()=>{t&&(s&&(t.off("beforeCreate",h.current),t.on("beforeCreate",s),h.current=s),o&&(t.off("blur",p.current),t.on("blur",o),p.current=o),l&&(t.off("create",m.current),t.on("create",l),m.current=l),a&&(t.off("destroy",g.current),t.on("destroy",a),g.current=a),c&&(t.off("focus",y.current),t.on("focus",c),y.current=c),d&&(t.off("selectionUpdate",x.current),t.on("selectionUpdate",d),x.current=d),u&&(t.off("transaction",T.current),t.on("transaction",u),T.current=u),f&&(t.off("update",I.current),t.on("update",f),I.current=f));},[s,o,l,a,c,d,u,f,t]),re.useEffect(()=>{let D=!0,L=new oi(n);return r(L),L.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{D&&i();});});}),()=>{D=!1;}},e),re.useEffect(()=>()=>{t==null||t.destroy();},[t]),t},Pu=re.createContext({editor:null});Pu.Consumer;var Bu=re.createContext({onDragStart:void 0}),Lu=()=>re.useContext(Bu);re__default.default.forwardRef((n,e)=>{let{onDragStart:t}=Lu(),r=n.as||"div";return re__default.default.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});var Fu=/^\s*>\s$/,Ko=v.create({name:"blockquote",addOptions(){return {HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return [{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return ["blockquote",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return {"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return [Pe({find:Fu,type:this.type})]}});var zu=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Vu=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,$u=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Hu=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,qo=Y.create({name:"bold",addOptions(){return {HTMLAttributes:{}}},parseHTML(){return [{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return ["strong",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return {"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return [me({find:zu,type:this.type}),me({find:$u,type:this.type})]},addPasteRules(){return [ge({find:Vu,type:this.type}),ge({find:Hu,type:this.type})]}});var Ju=v.create({name:"listItem",addOptions(){return {HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return [{tag:"li"}]},renderHTML({HTMLAttributes:n}){return ["li",N(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return {Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Uo=Y.create({name:"textStyle",addOptions(){return {HTMLAttributes:{}}},parseHTML(){return [{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return ["span",N(this.options.HTMLAttributes,n),0]},addCommands(){return {removeEmptyTextStyle:()=>({state:n,commands:e})=>{let t=gt(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),_o=/^\s*([-+*])\s$/,Go=v.create({name:"bulletList",addOptions(){return {itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return `${this.options.itemTypeName}+`},parseHTML(){return [{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return ["ul",N(this.options.HTMLAttributes,n),0]},addCommands(){return {toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ju.name,this.editor.getAttributes(Uo.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return {"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Pe({find:_o,type:this.type});return (this.options.keepMarks||this.options.keepAttributes)&&(n=Pe({find:_o,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Uo.name),editor:this.editor})),[n]}});var Wu=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,ju=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Yo=Y.create({name:"code",addOptions(){return {HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return [{tag:"code"}]},renderHTML({HTMLAttributes:n}){return ["code",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return {"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return [me({find:Wu,type:this.type})]},addPasteRules(){return [ge({find:ju,type:this.type})]}});var Ku=/^```([a-z]+)?[\s\n]$/,qu=/^~~~([a-z]+)?[\s\n]$/,Xo=v.create({name:"codeBlock",addOptions(){return {languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return {language:{default:null,parseHTML:n=>{var e;let{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return [{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return ["pre",N(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return {setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return {"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return !n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return !1;let{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return !1;let s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return !s||!o?!1:n.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return !1;let{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return !1;let l=i.after();return l===void 0||r.nodeAt(l)?!1:n.commands.exitCode()}}},addInputRules(){return [Ft({find:Ku,type:this.type,getAttributes:n=>({language:n[1]})}),Ft({find:qu,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return [new P({key:new te("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return !1;let t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return !1;let{tr:o}=n.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(w.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(t.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}});var Zo=v.create({name:"doc",topNode:!0,content:"block+"});function Qo(n={}){return new P({view(e){return new li(e,n)}})}var li=class{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o);};return e.dom.addEventListener(i,s),{name:i,handler:s}});}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t));}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay());}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay());}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let l=e.nodeBefore,a=e.nodeAfter;if(l||a){let c=this.editorView.nodeDOM(this.cursorPos-(l?l.nodeSize:0));if(c){let d=c.getBoundingClientRect(),u=l?d.bottom:d.top;l&&a&&(u=(u+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:d.left,right:d.right,top:u-this.width/2,bottom:u+this.width/2};}}}if(!r){let l=this.editorView.coordsAtPos(this.cursorPos);r={left:l.left-this.width/2,right:l.left+this.width/2,top:l.top,bottom:l.bottom};}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else {let l=i.getBoundingClientRect();s=l.left-i.scrollLeft,o=l.top-i.scrollTop;}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px";}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e);}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Yt(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l);}this.setCursor(o),this.scheduleRemoval(5e3);}}dragend(){this.scheduleRemoval(20);}drop(){this.scheduleRemoval(20);}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null);}};var el=j.create({name:"dropCursor",addOptions(){return {color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return [Qo(this.options)]}});var K=class n extends C{constructor(e){super(e,e);}map(e,t){let r=e.resolve(t.map(this.head));return n.valid(r)?new n(r):C.near(r)}content(){return k.empty}eq(e){return e instanceof n&&e.head==this.head}toJSON(){return {type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new n(e.resolve(t.pos))}getBookmark(){return new ai(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Uu(e)||!_u(e))return !1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&n.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(t>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let a=e.doc.resolve(i);if(n.valid(a))return a}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!M.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let l=e.doc.resolve(i);if(n.valid(l))return l}return null}}};K.prototype.visible=!1;K.findFrom=K.findGapCursorFrom;C.jsonID("gapcursor",K);var ai=class n{constructor(e){this.pos=e;}map(e){return new n(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return K.valid(t)?new K(t):C.near(t)}};function Uu(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return !0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return !0;if(i.inlineContent)return !1}}return !0}function _u(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return !0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return !0;if(i.inlineContent)return !1}}return !0}function tl(){return new P({props:{decorations:Zu,createSelectionBetween(n,e,t){return e.pos==t.pos&&K.valid(t)?new K(t):null},handleClick:Yu,handleKeyDown:Gu,handleDOMEvents:{beforeinput:Xu}}})}var Gu=Er({ArrowLeft:Tn("horiz",-1),ArrowRight:Tn("horiz",1),ArrowUp:Tn("vert",-1),ArrowDown:Tn("vert",1)});function Tn(n,e){let t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof w){if(!s.endOfTextblock(t)||l.depth==0)return !1;a=!1,l=r.doc.resolve(e>0?l.after():l.before());}let c=K.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new K(c))),!0):!1}}function Yu(n,e,t){if(!n||!n.editable)return !1;let r=n.state.doc.resolve(e);if(!K.valid(r))return !1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&M.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new K(r))),!0)}function Xu(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof K))return !1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return !1;let i=b.empty;for(let o=r.length-1;o>=0;o--)i=b.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new k(i,0,0));return s.setSelection(w.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function Zu(n){if(!(n.selection instanceof K))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Q.create(n.doc,[pe.widget(n.selection.head,e,{key:"gapcursor"})])}var nl=j.create({name:"gapCursor",addProseMirrorPlugins(){return [tl()]},extendNodeSchema(n){var e;let t={name:n.name,options:n.options,storage:n.storage};return {allowGapCursor:(e=O(S(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}});var rl=v.create({name:"hardBreak",addOptions(){return {keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return [{tag:"br"}]},renderHTML({HTMLAttributes:n}){return ["br",N(this.options.HTMLAttributes,n)]},renderText(){return `
`},addCommands(){return {setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{let{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return !1;let{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:d})=>{if(d&&a&&o){let u=a.filter(f=>l.includes(f.type.name));c.ensureMarks(u);}return !0}).run()})])}},addKeyboardShortcuts(){return {"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var il=v.create({name:"heading",addOptions(){return {levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return {level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return [`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,N(this.options.HTMLAttributes,e),0]},addCommands(){return {setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Ft({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var En=200,z=function(){};z.prototype.append=function(e){return e.length?(e=z.from(e),!this.length&&e||e.length<En&&this.leafAppend(e)||this.length<En&&e.leafPrepend(this)||this.appendInner(e)):this};z.prototype.prepend=function(e){return e.length?z.from(e).append(this):this};z.prototype.appendInner=function(e){return new Qu(this,e)};z.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?z.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};z.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};z.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0);};z.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};z.from=function(e){return e instanceof z?e:e&&e.length?new sl(e):z.empty};var sl=function(n){function e(r){n.call(this),this.values=r;}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return !1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return !1},e.prototype.leafAppend=function(i){if(this.length+i.length<=En)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=En)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(z);z.empty=new sl([]);var Qu=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1;}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return !1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return !1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(z),ci=z;var ef=500,tt=class n{constructor(e,t){this.items=e,this.eventCount=t;}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],d=[];return this.items.forEach((u,f)=>{if(!u.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,d.push(u);return}if(i){d.push(new ye(u.map));let h=u.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new ye(p,void 0,void 0,c.length+d.length))),s--,p&&i.appendMap(p,s);}else o.maybeStep(u.step);if(u.selection)return l=i?u.selection.map(i.slice(s)):u.selection,a=new n(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,t,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let d=0;d<e.steps.length;d++){let u=e.steps[d].invert(e.docs[d]),f=new ye(e.mapping.maps[d],u,t),h;(h=a&&a.merge(f))&&(f=h,d?s.pop():l=l.slice(0,l.length-1)),s.push(f),t&&(o++,t=void 0),i||(a=f);}let c=o-r.depth;return c>nf&&(l=tf(l,c),o-=c),new n(l.append(s),o)}remapping(e,t){let r=new Ct;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o);},e,t),r}addMaps(e){return this.eventCount==0?this:new n(this.items.append(e.map(t=>new ye(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--;},i);let a=t;this.items.forEach(f=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(f.step){let m=e.steps[h].invert(e.docs[h]),g=f.selection&&f.selection.map(s.slice(a+1,h));g&&l++,r.push(new ye(p,m,g));}else r.push(new ye(p));},i);let c=[];for(let f=t;f<o;f++)c.push(new ye(s.maps[f]));let d=this.items.slice(0,i).append(c).append(r),u=new n(d,l);return u.emptyItemCount()>ef&&(u=u.compress(this.items.length-r.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++;}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(t.slice(r)),c=a&&a.getMap();if(r--,c&&t.appendMap(c,r),a){let d=o.selection&&o.selection.map(t.slice(r));d&&s++;let u=new ye(c.invert(),a,d),f,h=i.length-1;(f=i.length&&i[h].merge(u))?i[h]=f:i.push(u);}}else o.map&&r--;},this.items.length,0),new n(ci.from(i.reverse()),s)}};tt.empty=new tt(ci.empty,0);function tf(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}var ye=class n{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i;}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new n(t.getMap().invert(),t,this.selection)}}},be=class{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s;}},nf=20;function rf(n,e,t,r){let i=t.getMeta(Le),s;if(i)return i.historyState;t.getMeta(of)&&(n=new be(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Le))return o.getMeta(Le).redo?new be(n.done.addTransform(t,void 0,r,Nn(e)),n.undone,ol(t.mapping.maps[t.steps.length-1]),n.prevTime,n.prevComposition):new be(n.done,n.undone.addTransform(t,void 0,r,Nn(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=t.getMeta("composition"),a=n.prevTime==0||!o&&n.prevComposition!=l&&(n.prevTime<(t.time||0)-r.newGroupDelay||!sf(t,n.prevRanges)),c=o?di(n.prevRanges,t.mapping):ol(t.mapping.maps[t.steps.length-1]);return new be(n.done.addTransform(t,a?e.selection.getBookmark():void 0,r,Nn(e)),tt.empty,c,t.time,l??n.prevComposition)}else return (s=t.getMeta("rebased"))?new be(n.done.rebased(t,s),n.undone.rebased(t,s),di(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new be(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),di(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function sf(n,e){if(!e)return !1;if(!n.docChanged)return !0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0);}),t}function ol(n){let e=[];return n.forEach((t,r,i,s)=>e.push(i,s)),e}function di(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s);}return t}function al(n,e,t,r){let i=Nn(e),s=Le.get(e).spec.config,o=(r?n.undone:n.done).popEvent(e,i);if(!o)return;let l=o.selection.resolve(o.transform.doc),a=(r?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,i),c=new be(r?a:o.remaining,r?o.remaining:a,null,0,-1);t(o.transform.setSelection(l).setMeta(Le,{redo:r,historyState:c}).scrollIntoView());}var ui=!1,ll=null;function Nn(n){let e=n.plugins;if(ll!=e){ui=!1,ll=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){ui=!0;break}}return ui}var Le=new te("history"),of=new te("closeHistory");function cl(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new P({key:Le,state:{init(){return new be(tt.empty,tt.empty,null,0,-1)},apply(e,t,r){return rf(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?fi:r=="historyRedo"?hi:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}var fi=(n,e)=>{let t=Le.getState(n);return !t||t.done.eventCount==0?!1:(e&&al(t,n,e,!1),!0)},hi=(n,e)=>{let t=Le.getState(n);return !t||t.undone.eventCount==0?!1:(e&&al(t,n,e,!0),!0)};var dl=j.create({name:"history",addOptions(){return {depth:100,newGroupDelay:500}},addCommands(){return {undo:()=>({state:n,dispatch:e})=>fi(n,e),redo:()=>({state:n,dispatch:e})=>hi(n,e)}},addProseMirrorPlugins(){return [cl(this.options)]},addKeyboardShortcuts(){return {"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var ul=v.create({name:"horizontalRule",addOptions(){return {HTMLAttributes:{}}},group:"block",parseHTML(){return [{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return ["hr",N(this.options.HTMLAttributes,n)]},addCommands(){return {setHorizontalRule:()=>({chain:n,state:e})=>{let{$to:t}=e.selection,r=n();return t.parentOffset===0?r.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){let{$to:l}=i.selection,a=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?i.setSelection(w.create(i.doc,l.pos+1)):l.nodeAfter.isBlock?i.setSelection(M.create(i.doc,l.pos)):i.setSelection(w.create(i.doc,l.pos));else {let c=(o=l.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(a,c),i.setSelection(w.create(i.doc,a+1)));}i.scrollIntoView();}return !0}).run()}}},addInputRules(){return [On({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}});var lf=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,af=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,cf=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,df=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,fl=Y.create({name:"italic",addOptions(){return {HTMLAttributes:{}}},parseHTML(){return [{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return ["em",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return {"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return [me({find:lf,type:this.type}),me({find:cf,type:this.type})]},addPasteRules(){return [ge({find:af,type:this.type}),ge({find:df,type:this.type})]}});var hl=v.create({name:"listItem",addOptions(){return {HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return [{tag:"li"}]},renderHTML({HTMLAttributes:n}){return ["li",N(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return {Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var uf=v.create({name:"listItem",addOptions(){return {HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return [{tag:"li"}]},renderHTML({HTMLAttributes:n}){return ["li",N(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return {Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pl=Y.create({name:"textStyle",addOptions(){return {HTMLAttributes:{}}},parseHTML(){return [{tag:"span",getAttrs:n=>n.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:n}){return ["span",N(this.options.HTMLAttributes,n),0]},addCommands(){return {removeEmptyTextStyle:()=>({state:n,commands:e})=>{let t=gt(n,this.type);return Object.entries(t).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),ml=/^(\d+)\.\s$/,gl=v.create({name:"orderedList",addOptions(){return {itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return `${this.options.itemTypeName}+`},addAttributes(){return {start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1}}},parseHTML(){return [{tag:"ol"}]},renderHTML({HTMLAttributes:n}){let{start:e,...t}=n;return e===1?["ol",N(this.options.HTMLAttributes,t),0]:["ol",N(this.options.HTMLAttributes,n),0]},addCommands(){return {toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(uf.name,this.editor.getAttributes(pl.name)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return {"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Pe({find:ml,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return (this.options.keepMarks||this.options.keepAttributes)&&(n=Pe({find:ml,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pl.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}});var yl=v.create({name:"paragraph",priority:1e3,addOptions(){return {HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return [{tag:"p"}]},renderHTML({HTMLAttributes:n}){return ["p",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return {"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var ff=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,hf=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,bl=Y.create({name:"strike",addOptions(){return {HTMLAttributes:{}}},parseHTML(){return [{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return ["s",N(this.options.HTMLAttributes,n),0]},addCommands(){return {setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){let n={};return Cn()?n["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():n["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),n},addInputRules(){return [me({find:ff,type:this.type})]},addPasteRules(){return [ge({find:hf,type:this.type})]}});var kl=v.create({name:"text",group:"inline"});var Sl=j.create({name:"starterKit",addExtensions(){var n,e,t,r,i,s,o,l,a,c,d,u,f,h,p,m,g,y;let x=[];return this.options.blockquote!==!1&&x.push(Ko.configure((n=this.options)===null||n===void 0?void 0:n.blockquote)),this.options.bold!==!1&&x.push(qo.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&x.push(Go.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&x.push(Yo.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&x.push(Xo.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&x.push(Zo.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&x.push(el.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&x.push(nl.configure((l=this.options)===null||l===void 0?void 0:l.gapcursor)),this.options.hardBreak!==!1&&x.push(rl.configure((a=this.options)===null||a===void 0?void 0:a.hardBreak)),this.options.heading!==!1&&x.push(il.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&x.push(dl.configure((d=this.options)===null||d===void 0?void 0:d.history)),this.options.horizontalRule!==!1&&x.push(ul.configure((u=this.options)===null||u===void 0?void 0:u.horizontalRule)),this.options.italic!==!1&&x.push(fl.configure((f=this.options)===null||f===void 0?void 0:f.italic)),this.options.listItem!==!1&&x.push(hl.configure((h=this.options)===null||h===void 0?void 0:h.listItem)),this.options.orderedList!==!1&&x.push(gl.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&x.push(yl.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&x.push(bl.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&x.push(kl.configure((y=this.options)===null||y===void 0?void 0:y.text)),x}});var pf=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,xl=v.create({name:"image",addOptions(){return {inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return {src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return [{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return ["img",N(this.options.HTMLAttributes,n)]},addCommands(){return {setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return [On({find:pf,type:this.type,getAttributes:n=>{let[,,e,t,r]=n;return {src:t,alt:e,title:r}}})]}});var gf=[Sl,xl],yf=({content:n})=>{let e=jo({extensions:gf,content:n,editable:!1});return re__default.default.createElement(Wo,{editor:e})};

exports.ContentRenderer = yf;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcmRlcmVkbWFwL2Rpc3QvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcHJvc2VtaXJyb3ItbW9kZWwvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci10cmFuc2Zvcm0vZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci1zdGF0ZS9kaXN0L2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLXZpZXcvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy93M2Mta2V5bmFtZS9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci1rZXltYXAvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci1jb21tYW5kcy9kaXN0L2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLXNjaGVtYS1saXN0L2Rpc3QvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2NyZWF0ZUNoYWluYWJsZVN0YXRlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvQ29tbWFuZE1hbmFnZXIudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9FdmVudEVtaXR0ZXIudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldEV4dGVuc2lvbkZpZWxkLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9zcGxpdEV4dGVuc2lvbnMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldEF0dHJpYnV0ZXNGcm9tRXh0ZW5zaW9ucy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvZ2V0Tm9kZVR5cGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvbWVyZ2VBdHRyaWJ1dGVzLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRSZW5kZXJlZEF0dHJpYnV0ZXMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvaXNGdW5jdGlvbi50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3V0aWxpdGllcy9jYWxsT3JSZXR1cm4udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvaXNFbXB0eU9iamVjdC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3V0aWxpdGllcy9mcm9tU3RyaW5nLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9pbmplY3RFeHRlbnNpb25BdHRyaWJ1dGVzVG9QYXJzZVJ1bGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldFNjaGVtYUJ5UmVzb2x2ZWRFeHRlbnNpb25zLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRTY2hlbWFUeXBlQnlOYW1lLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9pc0V4dGVuc2lvblJ1bGVzRW5hYmxlZC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvaXNSZWdFeHAudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9JbnB1dFJ1bGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvaXNOdW1iZXIudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9QYXN0ZVJ1bGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvZmluZER1cGxpY2F0ZXMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9FeHRlbnNpb25NYW5hZ2VyLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvdXRpbGl0aWVzL2lzUGxhaW5PYmplY3QudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy91dGlsaXRpZXMvbWVyZ2VEZWVwLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvRXh0ZW5zaW9uLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRUZXh0QmV0d2Vlbi50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2V4dGVuc2lvbnMvY2xpcGJvYXJkVGV4dFNlcmlhbGl6ZXIudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9ibHVyLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvY2xlYXJDb250ZW50LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvY2xlYXJOb2Rlcy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL2NvbW1hbmQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9jcmVhdGVQYXJhZ3JhcGhOZWFyLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvY3V0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvZGVsZXRlQ3VycmVudE5vZGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9kZWxldGVOb2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvZGVsZXRlUmFuZ2UudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9kZWxldGVTZWxlY3Rpb24udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9lbnRlci50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL2V4aXRDb2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvdXRpbGl0aWVzL29iamVjdEluY2x1ZGVzLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRNYXJrUmFuZ2UudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldE1hcmtUeXBlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvZXh0ZW5kTWFya1JhbmdlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvZmlyc3QudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2lzVGV4dFNlbGVjdGlvbi50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3V0aWxpdGllcy9taW5NYXgudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL3Jlc29sdmVGb2N1c1Bvc2l0aW9uLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvdXRpbGl0aWVzL2lzaU9TLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvZm9jdXMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9mb3JFYWNoLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvaW5zZXJ0Q29udGVudC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3V0aWxpdGllcy9lbGVtZW50RnJvbVN0cmluZy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvY3JlYXRlTm9kZUZyb21Db250ZW50LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9zZWxlY3Rpb25Ub0luc2VydGlvbkVuZC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL2luc2VydENvbnRlbnRBdC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL2pvaW4udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9qb2luSXRlbUJhY2t3YXJkLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvam9pbkl0ZW1Gb3J3YXJkLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvdXRpbGl0aWVzL2lzTWFjT1MudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9rZXlib2FyZFNob3J0Y3V0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9pc05vZGVBY3RpdmUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9saWZ0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvbGlmdEVtcHR5QmxvY2sudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9saWZ0TGlzdEl0ZW0udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9uZXdsaW5lSW5Db2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRTY2hlbWFUeXBlTmFtZUJ5TmFtZS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3V0aWxpdGllcy9kZWxldGVQcm9wcy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3Jlc2V0QXR0cmlidXRlcy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3Njcm9sbEludG9WaWV3LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2VsZWN0QWxsLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2VsZWN0Tm9kZUJhY2t3YXJkLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2VsZWN0Tm9kZUZvcndhcmQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9zZWxlY3RQYXJlbnROb2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2VsZWN0VGV4dGJsb2NrRW5kLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2VsZWN0VGV4dGJsb2NrU3RhcnQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2NyZWF0ZURvY3VtZW50LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2V0Q29udGVudC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvZ2V0TWFya0F0dHJpYnV0ZXMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2RlZmF1bHRCbG9ja0F0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9maW5kUGFyZW50Tm9kZUNsb3Nlc3RUb1Bvcy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvZmluZFBhcmVudE5vZGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldEhUTUxGcm9tRnJhZ21lbnQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldFRleHQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldE5vZGVBdHRyaWJ1dGVzLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRBdHRyaWJ1dGVzLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9nZXRNYXJrc0JldHdlZW4udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9oZWxwZXJzL2dldFNwbGl0dGVkQXR0cmlidXRlcy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvaXNNYXJrQWN0aXZlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9pc0FjdGl2ZS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2hlbHBlcnMvaXNMaXN0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaGVscGVycy9pc05vZGVFbXB0eS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3NldE1hcmsudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9zZXRNZXRhLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2V0Tm9kZS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3NldE5vZGVTZWxlY3Rpb24udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy9zZXRUZXh0U2VsZWN0aW9uLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc2lua0xpc3RJdGVtLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvc3BsaXRCbG9jay50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3NwbGl0TGlzdEl0ZW0udHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy90b2dnbGVMaXN0LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvdG9nZ2xlTWFyay50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3RvZ2dsZU5vZGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy90b2dnbGVXcmFwLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvdW5kb0lucHV0UnVsZS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2NvbW1hbmRzL3Vuc2V0QWxsTWFya3MudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy91bnNldE1hcmsudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9jb21tYW5kcy91cGRhdGVBdHRyaWJ1dGVzLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvd3JhcEluLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvY29tbWFuZHMvd3JhcEluTGlzdC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2V4dGVuc2lvbnMvY29tbWFuZHMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9leHRlbnNpb25zL2VkaXRhYmxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvZXh0ZW5zaW9ucy9mb2N1c0V2ZW50cy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL2V4dGVuc2lvbnMva2V5bWFwLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvZXh0ZW5zaW9ucy90YWJpbmRleC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL3N0eWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvdXRpbGl0aWVzL2NyZWF0ZVN0eWxlVGFnLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvRWRpdG9yLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaW5wdXRSdWxlcy9tYXJrSW5wdXRSdWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaW5wdXRSdWxlcy9ub2RlSW5wdXRSdWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaW5wdXRSdWxlcy90ZXh0YmxvY2tUeXBlSW5wdXRSdWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvaW5wdXRSdWxlcy93cmFwcGluZ0lucHV0UnVsZS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2NvcmUvc3JjL01hcmsudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9jb3JlL3NyYy9Ob2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvY29yZS9zcmMvcGFzdGVSdWxlcy9tYXJrUGFzdGVSdWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvcmVhY3Qvc3JjL0VkaXRvckNvbnRlbnQudHN4IiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvcmVhY3Qvc3JjL0VkaXRvci50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL3JlYWN0L3NyYy91c2VFZGl0b3IudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9yZWFjdC9zcmMvQ29udGV4dC50c3giLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9yZWFjdC9zcmMvdXNlUmVhY3ROb2RlVmlldy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL3JlYWN0L3NyYy9Ob2RlVmlld1dyYXBwZXIudHN4IiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWJsb2NrcXVvdGUvc3JjL2Jsb2NrcXVvdGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tYm9sZC9zcmMvYm9sZC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2V4dGVuc2lvbi1saXN0LWl0ZW0vc3JjL2xpc3QtaXRlbS50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2V4dGVuc2lvbi10ZXh0LXN0eWxlL3NyYy90ZXh0LXN0eWxlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWJ1bGxldC1saXN0L3NyYy9idWxsZXQtbGlzdC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2V4dGVuc2lvbi1jb2RlL3NyYy9jb2RlLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWNvZGUtYmxvY2svc3JjL2NvZGUtYmxvY2sudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tZG9jdW1lbnQvc3JjL2RvY3VtZW50LnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLWRyb3BjdXJzb3IvZGlzdC9pbmRleC5qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL2V4dGVuc2lvbi1kcm9wY3Vyc29yL3NyYy9kcm9wY3Vyc29yLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLWdhcGN1cnNvci9kaXN0L2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWdhcGN1cnNvci9zcmMvZ2FwY3Vyc29yLnRzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWhhcmQtYnJlYWsvc3JjL2hhcmQtYnJlYWsudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24taGVhZGluZy9zcmMvaGVhZGluZy50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9yb3BlLXNlcXVlbmNlL2Rpc3QvaW5kZXguanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvcHJvc2VtaXJyb3ItaGlzdG9yeS9kaXN0L2luZGV4LmpzIiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWhpc3Rvcnkvc3JjL2hpc3RvcnkudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24taG9yaXpvbnRhbC1ydWxlL3NyYy9ob3Jpem9udGFsLXJ1bGUudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24taXRhbGljL3NyYy9pdGFsaWMudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tb3JkZXJlZC1saXN0L3NyYy9vcmRlcmVkLWxpc3QudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tcGFyYWdyYXBoL3NyYy9wYXJhZ3JhcGgudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tc3RyaWtlL3NyYy9zdHJpa2UudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHRpcHRhcC9leHRlbnNpb24tdGV4dC9zcmMvdGV4dC50cyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AdGlwdGFwL3N0YXJ0ZXIta2l0L3NyYy9zdGFydGVyLWtpdC50cyIsIi4uL3NyYy9Db250ZW50UmVuZGVyZXIudHN4IiwiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B0aXB0YXAvZXh0ZW5zaW9uLWltYWdlL3NyYy9pbWFnZS50cyJdLCJuYW1lcyI6WyJPcmRlcmVkTWFwIiwiY29udGVudCIsImtleSIsImkiLCJmb3VuZCIsInZhbHVlIiwibmV3S2V5Iiwic2VsZiIsInBsYWNlIiwid2l0aG91dCIsImYiLCJtYXAiLCJyZXN1bHQiLCJwcm9wIiwiZGlzdF9kZWZhdWx0IiwiZmluZERpZmZTdGFydCIsImEiLCJiIiwicG9zIiwiY2hpbGRBIiwiY2hpbGRCIiwiaiIsImlubmVyIiwiZmluZERpZmZFbmQiLCJwb3NBIiwicG9zQiIsImlBIiwiaUIiLCJzaXplIiwic2FtZSIsIm1pblNpemUiLCJGcmFnbWVudCIsIl9GcmFnbWVudCIsImZyb20iLCJ0byIsIm5vZGVTdGFydCIsInBhcmVudCIsImNoaWxkIiwiZW5kIiwic3RhcnQiLCJibG9ja1NlcGFyYXRvciIsImxlYWZUZXh0IiwidGV4dCIsInNlcGFyYXRlZCIsIm5vZGUiLCJvdGhlciIsImxhc3QiLCJmaXJzdCIsImluZGV4IiwiY3VycmVudCIsImNvcHkiLCJwIiwib3RoZXJQb3MiLCJyb3VuZCIsInJldEluZGV4IiwiY3VyUG9zIiwiY3VyIiwibiIsInNjaGVtYSIsImFycmF5Iiwiam9pbmVkIiwibm9kZXMiLCJvZmZzZXQiLCJjb21wYXJlRGVlcCIsIk1hcmsiLCJfTWFyayIsInR5cGUiLCJhdHRycyIsInNldCIsInBsYWNlZCIsIm9iaiIsIl8iLCJqc29uIiwibWFya3MiLCJSZXBsYWNlRXJyb3IiLCJTbGljZSIsIl9TbGljZSIsIm9wZW5TdGFydCIsIm9wZW5FbmQiLCJmcmFnbWVudCIsImluc2VydEludG8iLCJyZW1vdmVSYW5nZSIsIm9wZW5Jc29sYXRpbmciLCJpbmRleFRvIiwib2Zmc2V0VG8iLCJkaXN0IiwiaW5zZXJ0IiwicmVwbGFjZSIsIiRmcm9tIiwiJHRvIiwic2xpY2UiLCJyZXBsYWNlT3V0ZXIiLCJkZXB0aCIsImNsb3NlIiwicHJlcGFyZVNsaWNlRm9yUmVwbGFjZSIsInJlcGxhY2VUaHJlZVdheSIsInJlcGxhY2VUd29XYXkiLCJjaGVja0pvaW4iLCJtYWluIiwic3ViIiwiam9pbmFibGUiLCIkYmVmb3JlIiwiJGFmdGVyIiwiYWRkTm9kZSIsInRhcmdldCIsImFkZFJhbmdlIiwiJHN0YXJ0IiwiJGVuZCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsIiRhbG9uZyIsImV4dHJhIiwiUmVzb2x2ZWRQb3MiLCJfUmVzb2x2ZWRQb3MiLCJwYXRoIiwicGFyZW50T2Zmc2V0IiwidmFsIiwiZE9mZiIsInRtcCIsImFmdGVyIiwibmV4dCIsInByZWQiLCJkIiwiTm9kZVJhbmdlIiwic3RyIiwiZG9jIiwicmVtIiwicmVzb2x2ZUNhY2hlIiwiY2FjaGVkIiwicmVzb2x2ZUNhY2hlUG9zIiwicmVzb2x2ZUNhY2hlU2l6ZSIsImVtcHR5QXR0cnMiLCJOb2RlIiwiX05vZGUiLCJzdGFydFBvcyIsImluY2x1ZGVQYXJlbnRzIiwibmFtZSIsIndyYXBNYXJrcyIsIm1hdGNoIiwicmVwbGFjZW1lbnQiLCJvbmUiLCJ0d28iLCJtIiwiVGV4dE5vZGUiLCJfVGV4dE5vZGUiLCJiYXNlIiwiQ29udGVudE1hdGNoIiwiX0NvbnRlbnRNYXRjaCIsInZhbGlkRW5kIiwic3RyaW5nIiwibm9kZVR5cGVzIiwic3RyZWFtIiwiVG9rZW5TdHJlYW0iLCJleHByIiwicGFyc2VFeHByIiwiZGZhIiwibmZhIiwiY2hlY2tGb3JEZWFkRW5kcyIsImZyYWciLCJ0b0VuZCIsInNlZW4iLCJzZWFyY2giLCJ0eXBlcyIsImZpbmlzaGVkIiwidHAiLCJjb21wdXRlZCIsImFjdGl2ZSIsInNjYW4iLCJvdXQiLCJ0b2siLCJleHBycyIsInBhcnNlRXhwclNlcSIsInBhcnNlRXhwclN1YnNjcmlwdCIsInBhcnNlRXhwckF0b20iLCJwYXJzZUV4cHJSYW5nZSIsInBhcnNlTnVtIiwibWluIiwibWF4IiwicmVzb2x2ZU5hbWUiLCJ0eXBlTmFtZSIsImNvbm5lY3QiLCJjb21waWxlIiwiZWRnZSIsInRlcm0iLCJlZGdlcyIsImxvb3AiLCJjbXAiLCJudWxsRnJvbSIsImxhYmVsZWQiLCJleHBsb3JlIiwic3RhdGVzIiwic3RhdGUiLCJ3b3JrIiwiZGVhZCIsImRlZmF1bHRBdHRycyIsImRlZmF1bHRzIiwiYXR0ck5hbWUiLCJhdHRyIiwiY29tcHV0ZUF0dHJzIiwiYnVpbHQiLCJnaXZlbiIsImluaXRBdHRycyIsIkF0dHJpYnV0ZSIsIk5vZGVUeXBlIiwiX05vZGVUeXBlIiwic3BlYyIsImJlZm9yZSIsIm1hdGNoZWQiLCJtYXJrVHlwZSIsInRvcFR5cGUiLCJvcHRpb25zIiwiTWFya1R5cGUiLCJfTWFya1R5cGUiLCJyYW5rIiwiU2NoZW1hIiwiaW5zdGFuY2VTcGVjIiwiY29udGVudEV4cHJDYWNoZSIsImNvbnRlbnRFeHByIiwibWFya0V4cHIiLCJnYXRoZXJNYXJrcyIsImV4Y2wiLCJtYXJrIiwib2siLCJET01QYXJzZXIiLCJfRE9NUGFyc2VyIiwicnVsZXMiLCJydWxlIiwiZG9tIiwiY29udGV4dCIsIlBhcnNlQ29udGV4dCIsIm1hdGNoZXMiLCJzdHlsZSIsInByaW9yaXR5IiwiYmxvY2tUYWdzIiwiaWdub3JlVGFncyIsImxpc3RUYWdzIiwiT1BUX1BSRVNFUlZFX1dTIiwiT1BUX1BSRVNFUlZFX1dTX0ZVTEwiLCJPUFRfT1BFTl9MRUZUIiwid3NPcHRpb25zRm9yIiwicHJlc2VydmVXaGl0ZXNwYWNlIiwiTm9kZUNvbnRleHQiLCJwZW5kaW5nTWFya3MiLCJzb2xpZCIsImZpbGwiLCJ3cmFwIiwibmV4dFR5cGUiLCJwZW5kaW5nIiwibWFya01heUFwcGx5IiwicGFyc2VyIiwiaXNPcGVuIiwidG9wTm9kZSIsInRvcENvbnRleHQiLCJ0b3BPcHRpb25zIiwicGFyc2VTdHlsZXMiLCJhZGRNYXJrcyIsInJlbW92ZU1hcmtzIiwidG9wIiwibm9kZUJlZm9yZSIsImRvbU5vZGVCZWZvcmUiLCJtYXRjaEFmdGVyIiwicnVsZUlEIiwibm9ybWFsaXplTGlzdCIsInN5bmMiLCJvbGROZWVkc0Jsb2NrIiwic3R5bGVzIiwiYWRkIiwicmVtb3ZlIiwiY29udGludWVBZnRlciIsIm5vZGVUeXBlIiwic3RhcnRJbiIsImNvbnRlbnRET00iLCJyb3V0ZSIsImN4IiwiYmxvY2siLCJwcmVzZXJ2ZVdTIiwidGV4dE5vZGUiLCJwYXJ0cyIsIm9wdGlvbiIsInVzZVJvb3QiLCJtaW5EZXB0aCIsInBhcnQiLCIkY29udGV4dCIsImRlZmx0IiwiZmluZFNhbWVNYXJrSW5TZXQiLCJ1cHRvIiwibGV2ZWwiLCJzdGFzaE1hcmsiLCJwcmV2SXRlbSIsInNlbGVjdG9yIiwicmUiLCJET01TZXJpYWxpemVyIiwiX0RPTVNlcmlhbGl6ZXIiLCJrZWVwIiwicmVuZGVyZWQiLCJtYXJrRE9NIiwiaW5saW5lIiwidG9ET00iLCJzdHJ1Y3R1cmUiLCJ4bWxOUyIsInRhZ05hbWUiLCJzcGFjZSIsImlubmVyQ29udGVudCIsImdhdGhlclRvRE9NIiwibG93ZXIxNiIsImZhY3RvcjE2IiwibWFrZVJlY292ZXIiLCJyZWNvdmVySW5kZXgiLCJyZWNvdmVyT2Zmc2V0IiwiREVMX0JFRk9SRSIsIkRFTF9BRlRFUiIsIkRFTF9BQ1JPU1MiLCJERUxfU0lERSIsIk1hcFJlc3VsdCIsImRlbEluZm8iLCJyZWNvdmVyIiwiU3RlcE1hcCIsIl9TdGVwTWFwIiwicmFuZ2VzIiwiaW52ZXJ0ZWQiLCJkaWZmIiwiYXNzb2MiLCJzaW1wbGUiLCJvbGRJbmRleCIsIm5ld0luZGV4Iiwib2xkU2l6ZSIsIm5ld1NpemUiLCJzaWRlIiwiZGVsIiwib2xkU3RhcnQiLCJuZXdTdGFydCIsIk1hcHBpbmciLCJfTWFwcGluZyIsIm1hcHMiLCJtaXJyb3IiLCJtaXJyb3JzIiwibWFwcGluZyIsInN0YXJ0U2l6ZSIsIm1pcnIiLCJ0b3RhbFNpemUiLCJpbnZlcnNlIiwiY29yciIsInN0ZXBzQnlJRCIsIlN0ZXAiLCJpZCIsInN0ZXBDbGFzcyIsIlN0ZXBSZXN1bHQiLCJfU3RlcFJlc3VsdCIsImZhaWxlZCIsIm1lc3NhZ2UiLCJlIiwibWFwRnJhZ21lbnQiLCJtYXBwZWQiLCJBZGRNYXJrU3RlcCIsIl9BZGRNYXJrU3RlcCIsIm9sZFNsaWNlIiwiUmVtb3ZlTWFya1N0ZXAiLCJfUmVtb3ZlTWFya1N0ZXAiLCJBZGROb2RlTWFya1N0ZXAiLCJfQWRkTm9kZU1hcmtTdGVwIiwidXBkYXRlZCIsIm5ld1NldCIsIlJlbW92ZU5vZGVNYXJrU3RlcCIsIl9SZW1vdmVOb2RlTWFya1N0ZXAiLCJSZXBsYWNlU3RlcCIsIl9SZXBsYWNlU3RlcCIsImNvbnRlbnRCZXR3ZWVuIiwiUmVwbGFjZUFyb3VuZFN0ZXAiLCJfUmVwbGFjZUFyb3VuZFN0ZXAiLCJnYXBGcm9tIiwiZ2FwVG8iLCJnYXAiLCJpbnNlcnRlZCIsImFkZE1hcmsiLCJ0ciIsInJlbW92ZWQiLCJhZGRlZCIsInJlbW92aW5nIiwiYWRkaW5nIiwicyIsInJlbW92ZU1hcmsiLCJzdGVwIiwidG9SZW1vdmUiLCJjbGVhckluY29tcGF0aWJsZSIsInBhcmVudFR5cGUiLCJkZWxTdGVwcyIsImFsbG93ZWQiLCJjYW5DdXQiLCJsaWZ0VGFyZ2V0IiwicmFuZ2UiLCJsaWZ0IiwiZ2FwU3RhcnQiLCJnYXBFbmQiLCJzcGxpdHRpbmciLCJmaW5kV3JhcHBpbmciLCJpbm5lclJhbmdlIiwiYXJvdW5kIiwiZmluZFdyYXBwaW5nT3V0c2lkZSIsImZpbmRXcmFwcGluZ0luc2lkZSIsIndpdGhBdHRycyIsIm91dGVyIiwiaW5zaWRlIiwiaW5uZXJNYXRjaCIsIndyYXBwZXJzIiwic2V0QmxvY2tUeXBlIiwibWFwRnJvbSIsImNhbkNoYW5nZVR5cGUiLCJzdGFydE0iLCJlbmRNIiwiJHBvcyIsInNldE5vZGVNYXJrdXAiLCJuZXdOb2RlIiwiY2FuU3BsaXQiLCJ0eXBlc0FmdGVyIiwiaW5uZXJUeXBlIiwicmVzdCIsIm92ZXJyaWRlQ2hpbGQiLCJiYXNlVHlwZSIsInNwbGl0IiwidHlwZUFmdGVyIiwiY2FuSm9pbiIsImpvaW5Qb2ludCIsImRpciIsImpvaW4iLCJpbnNlcnRQb2ludCIsImRyb3BQb2ludCIsInBhc3MiLCJiaWFzIiwiaW5zZXJ0UG9zIiwiZml0cyIsIndyYXBwaW5nIiwicmVwbGFjZVN0ZXAiLCJmaXRzVHJpdmlhbGx5IiwiRml0dGVyIiwidW5wbGFjZWQiLCJmaXQiLCJtb3ZlSW5saW5lIiwicGxhY2VkU2l6ZSIsInN0YXJ0RGVwdGgiLCJzbGljZURlcHRoIiwiY29udGVudEF0IiwiZnJvbnRpZXJEZXB0aCIsImluamVjdCIsIm9wZW5BdEVuZCIsImRyb3BGcm9tRnJhZ21lbnQiLCJ0YWtlbiIsIm9wZW5FbmRDb3VudCIsImNsb3NlTm9kZVN0YXJ0IiwiYWRkVG9GcmFnbWVudCIsImNvbnRlbnRBZnRlckZpdHMiLCJkcm9wSW5uZXIiLCJjb3VudCIsIm9wZW4iLCJpbnZhbGlkTWFya3MiLCJkZWZpbmVzQ29udGVudCIsInJlcGxhY2VSYW5nZSIsInRhcmdldERlcHRocyIsImNvdmVyZWREZXB0aHMiLCJwcmVmZXJyZWRUYXJnZXQiLCJwcmVmZXJyZWRUYXJnZXRJbmRleCIsImxlZnROb2RlcyIsInByZWZlcnJlZERlcHRoIiwiZGVmIiwib3BlbkRlcHRoIiwidGFyZ2V0RGVwdGgiLCJleHBhbmQiLCJjbG9zZUZyYWdtZW50Iiwic3RhcnRTdGVwcyIsIm9sZE9wZW4iLCJuZXdPcGVuIiwicmVwbGFjZVJhbmdlV2l0aCIsInBvaW50IiwiZGVsZXRlUmFuZ2UiLCJjb3ZlcmVkIiwiQXR0clN0ZXAiLCJfQXR0clN0ZXAiLCJUcmFuc2Zvcm1FcnJvciIsImVyciIsIlRyYW5zZm9ybSIsImNsYXNzZXNCeUlkIiwiU2VsZWN0aW9uIiwiJGFuY2hvciIsIiRoZWFkIiwiU2VsZWN0aW9uUmFuZ2UiLCJsYXN0Tm9kZSIsImxhc3RQYXJlbnQiLCJzZWxlY3Rpb25Ub0luc2VydGlvbkVuZCIsInRleHRPbmx5IiwiVGV4dFNlbGVjdGlvbiIsImZpbmRTZWxlY3Rpb25JbiIsIkFsbFNlbGVjdGlvbiIsImNscyIsInNlbGVjdGlvbkNsYXNzIiwid2FybmVkQWJvdXRUZXh0U2VsZWN0aW9uIiwiY2hlY2tUZXh0U2VsZWN0aW9uIiwiX1RleHRTZWxlY3Rpb24iLCJUZXh0Qm9va21hcmsiLCJhbmNob3IiLCJoZWFkIiwiZFBvcyIsIl9UZXh0Qm9va21hcmsiLCJOb2RlU2VsZWN0aW9uIiwiX05vZGVTZWxlY3Rpb24iLCJkZWxldGVkIiwiTm9kZUJvb2ttYXJrIiwiX05vZGVCb29rbWFyayIsIl9BbGxTZWxlY3Rpb24iLCJzZWwiLCJBbGxCb29rbWFyayIsInN0YXJ0TGVuIiwiX2Zyb20iLCJfdG8iLCJfbmV3RnJvbSIsIm5ld1RvIiwiVVBEQVRFRF9TRUwiLCJVUERBVEVEX01BUktTIiwiVVBEQVRFRF9TQ1JPTEwiLCJUcmFuc2FjdGlvbiIsInNlbGVjdGlvbiIsInRpbWUiLCJpbmhlcml0TWFya3MiLCJiaW5kIiwiRmllbGREZXNjIiwiZGVzYyIsImJhc2VGaWVsZHMiLCJjb25maWciLCJpbnN0YW5jZSIsIl9tYXJrcyIsIl9vbGQiLCJwcmV2IiwiQ29uZmlndXJhdGlvbiIsInBsdWdpbnMiLCJwbHVnaW4iLCJFZGl0b3JTdGF0ZSIsIl9FZGl0b3JTdGF0ZSIsImlnbm9yZSIsInJvb3RUciIsInRycyIsIm5ld1N0YXRlIiwiaGF2ZU5ldyIsIm9sZFN0YXRlIiwibmV3SW5zdGFuY2UiLCJmaWVsZHMiLCJmaWVsZCIsIiRjb25maWciLCJwbHVnaW5GaWVsZHMiLCJiaW5kUHJvcHMiLCJQbHVnaW4iLCJjcmVhdGVLZXkiLCJrZXlzIiwiUGx1Z2luS2V5IiwiZG9tSW5kZXgiLCJwYXJlbnROb2RlIiwicmV1c2VkUmFuZ2UiLCJ0ZXh0UmFuZ2UiLCJpc0VxdWl2YWxlbnRQb3NpdGlvbiIsIm9mZiIsInRhcmdldE5vZGUiLCJ0YXJnZXRPZmYiLCJzY2FuRm9yIiwiYXRvbUVsZW1lbnRzIiwibm9kZVNpemUiLCJoYXNCbG9ja0Rlc2MiLCJpc09uRWRnZSIsImF0U3RhcnQiLCJhdEVuZCIsInNlbGVjdGlvbkNvbGxhcHNlZCIsImRvbVNlbCIsImtleUV2ZW50Iiwia2V5Q29kZSIsImV2ZW50IiwiZGVlcEFjdGl2ZUVsZW1lbnQiLCJlbHQiLCJjYXJldEZyb21Qb2ludCIsIngiLCJ5IiwibmF2IiwiYWdlbnQiLCJpZV9lZGdlIiwiaWVfdXB0bzEwIiwiaWVfMTF1cCIsImllIiwiaWVfdmVyc2lvbiIsImdlY2tvIiwiX2Nocm9tZSIsImNocm9tZSIsImNocm9tZV92ZXJzaW9uIiwic2FmYXJpIiwiaW9zIiwibWFjIiwid2luZG93cyIsImFuZHJvaWQiLCJ3ZWJraXQiLCJ3ZWJraXRfdmVyc2lvbiIsIndpbmRvd1JlY3QiLCJnZXRTaWRlIiwiY2xpZW50UmVjdCIsInJlY3QiLCJzY2FsZVgiLCJzY2FsZVkiLCJzY3JvbGxSZWN0SW50b1ZpZXciLCJ2aWV3Iiwic3RhcnRET00iLCJzY3JvbGxUaHJlc2hvbGQiLCJzY3JvbGxNYXJnaW4iLCJhdFRvcCIsImJvdW5kaW5nIiwibW92ZVgiLCJtb3ZlWSIsInN0YXJ0WCIsInN0YXJ0WSIsImRYIiwiZFkiLCJzdG9yZVNjcm9sbFBvcyIsInJlZkRPTSIsInJlZlRvcCIsImxvY2FsUmVjdCIsInNjcm9sbFN0YWNrIiwic3RhY2siLCJyZXNldFNjcm9sbFBvcyIsIm5ld1JlZlRvcCIsInJlc3RvcmVTY3JvbGxTdGFjayIsImRUb3AiLCJsZWZ0IiwicHJldmVudFNjcm9sbFN1cHBvcnRlZCIsImZvY3VzUHJldmVudFNjcm9sbCIsInN0b3JlZCIsImZpbmRPZmZzZXRJbk5vZGUiLCJjb29yZHMiLCJjbG9zZXN0IiwiZHhDbG9zZXN0IiwiY29vcmRzQ2xvc2VzdCIsInJvd0JvdCIsInJvd1RvcCIsImZpcnN0QmVsb3ciLCJjb29yZHNCZWxvdyIsImNoaWxkSW5kZXgiLCJyZWN0cyIsImR4IiwiZmluZE9mZnNldEluVGV4dCIsImxlbiIsInNpbmdsZVJlY3QiLCJpblJlY3QiLCJ0YXJnZXRLbHVkZ2UiLCJwb3NGcm9tRWxlbWVudCIsInBvc0Zyb21DYXJldCIsIm91dHNpZGVCbG9jayIsInNhd0Jsb2NrIiwiZWxlbWVudEZyb21Qb2ludCIsImVsZW1lbnQiLCJib3giLCJzdGFydEkiLCJwb3NBdENvb3JkcyIsImNhcmV0Iiwibm9uWmVybyIsIkJJREkiLCJjb29yZHNBdFBvcyIsImF0b20iLCJzdXBwb3J0RW1wdHlSYW5nZSIsInJlY3RCZWZvcmUiLCJyZWN0QWZ0ZXIiLCJmbGF0dGVuViIsInRha2VTaWRlIiwiZmxhdHRlbkgiLCJ3aXRoRmx1c2hlZFN0YXRlIiwidmlld1N0YXRlIiwiZW5kT2ZUZXh0YmxvY2tWZXJ0aWNhbCIsIm5lYXJlc3QiLCJib3hlcyIsIm1heWJlUlRMIiwiZW5kT2ZUZXh0YmxvY2tIb3Jpem9udGFsIiwib2xkTm9kZSIsIm9sZE9mZiIsImFuY2hvck5vZGUiLCJhbmNob3JPZmZzZXQiLCJvbGRCaWRpTGV2ZWwiLCJwYXJlbnRET00iLCJuZXdPZmYiLCJjYWNoZWRTdGF0ZSIsImNhY2hlZERpciIsImNhY2hlZFJlc3VsdCIsImVuZE9mVGV4dGJsb2NrIiwiTk9UX0RJUlRZIiwiQ0hJTERfRElSVFkiLCJDT05URU5UX0RJUlRZIiwiTk9ERV9ESVJUWSIsIlZpZXdEZXNjIiwiY2hpbGRyZW4iLCJ3aWRnZXQiLCJvdXRlckRlY28iLCJpbm5lckRlY28iLCJub2RlTmFtZSIsImRvbUJlZm9yZSIsImRvbUFmdGVyIiwib25seU5vZGVzIiwibm9kZURPTSIsIlRyYWlsaW5nSGFja1ZpZXdEZXNjIiwiV2lkZ2V0Vmlld0Rlc2MiLCJlbnRlciIsImZyb21PZmZzZXQiLCJ0b09mZnNldCIsImNoaWxkQmFzZSIsInJvb3QiLCJmb3JjZSIsImFuY2hvckRPTSIsImhlYWRET00iLCJicktsdWRnZSIsImRvbVNlbEV4dGVuZGVkIiwibXV0YXRpb24iLCJzdGFydEluc2lkZSIsImVuZEluc2lkZSIsImRpcnR5Iiwic3RvcCIsIkNvbXBvc2l0aW9uVmlld0Rlc2MiLCJ0ZXh0RE9NIiwibXV0IiwiTWFya1ZpZXdEZXNjIiwiX01hcmtWaWV3RGVzYyIsImN1c3RvbSIsInJlcGxhY2VOb2RlcyIsIk5vZGVWaWV3RGVzYyIsIl9Ob2RlVmlld0Rlc2MiLCJkZXNjT2JqIiwiYXBwbHlPdXRlckRlY28iLCJDdXN0b21Ob2RlVmlld0Rlc2MiLCJUZXh0Vmlld0Rlc2MiLCJzYW1lT3V0ZXJEZWNvIiwiY29tcG9zaXRpb24iLCJsb2NhbENvbXBvc2l0aW9uIiwiY29tcG9zaXRpb25JbkNoaWxkIiwidXBkYXRlciIsIlZpZXdUcmVlVXBkYXRlciIsIml0ZXJEZWNvIiwiaW5zaWRlTm9kZSIsImNvbXBJbmRleCIsInJlbmRlckRlc2NzIiwiaW9zSGFja3MiLCJuZWFyYnlUZXh0Tm9kZSIsInRleHRQb3MiLCJmaW5kVGV4dEluRnJhZ21lbnQiLCJuZWVkc1dyYXAiLCJvbGRET00iLCJwYXRjaE91dGVyRGVjbyIsImNvbXB1dGVPdXRlckRlY28iLCJkb2NWaWV3RGVzYyIsImRvY1ZpZXciLCJfVGV4dFZpZXdEZXNjIiwic2tpcCIsImRlc2NzIiwid3JpdHRlbiIsImNoaWxkRE9NIiwicm0iLCJPdXRlckRlY29MZXZlbCIsIm5vRGVjbyIsIm91dGVyRE9NIiwicHJldkNvbXB1dGVkIiwiY3VyQ29tcHV0ZWQiLCJjdXJET00iLCJkZWNvIiwicGF0Y2hBdHRyaWJ1dGVzIiwicHJldkxpc3QiLCJjdXJMaXN0IiwibG9jayIsInByZU1hdGNoIiwibWF4S2VlcCIsIm1hcmtEZXNjIiwidGFyZ2V0RGVzYyIsImRvbU5vZGUiLCJuZXh0RE9NIiwibG9ja2VkIiwid3JhcHBlciIsImNoIiwibGFzdENoaWxkIiwiaGFjayIsInBhcmVudERlc2MiLCJjdXJEZXNjIiwiZGVzY0kiLCJmSSIsImNvbXBhcmVTaWRlIiwib25XaWRnZXQiLCJvbk5vZGUiLCJsb2NhbHMiLCJkZWNvSW5kZXgiLCJyZXN0Tm9kZSIsInBhcmVudEluZGV4Iiwid2lkZ2V0cyIsImN1dEF0Iiwib2xkQ1NTIiwiY2hpbGRTdGFydCIsInNlbGVjdGlvbkZyb21ET00iLCJvcmlnaW4iLCJuZWFyZXN0RGVzYyIsImluV2lkZ2V0IiwibmVhcmVzdERlc2NOb2RlIiwic2VsZWN0aW9uQmV0d2VlbiIsImVkaXRvck93bnNTZWxlY3Rpb24iLCJoYXNTZWxlY3Rpb24iLCJzZWxlY3Rpb25Ub0RPTSIsInN5bmNOb2RlU2VsZWN0aW9uIiwiY3VyU2VsIiwic2VsZWN0Q3Vyc29yV3JhcHBlciIsInJlc2V0RWRpdGFibGVGcm9tIiwicmVzZXRFZGl0YWJsZVRvIiwiYnJva2VuU2VsZWN0QmV0d2VlblVuZWRpdGFibGUiLCJ0ZW1wb3JhcmlseUVkaXRhYmxlTmVhciIsInJlc2V0RWRpdGFibGUiLCJyZW1vdmVDbGFzc09uU2VsZWN0aW9uQ2hhbmdlIiwic2V0RWRpdGFibGUiLCJpbWciLCJjbGVhck5vZGVTZWxlY3Rpb24iLCJoYXNGb2N1c0FuZFNlbGVjdGlvbiIsImFuY2hvckluUmlnaHRQbGFjZSIsIm1vdmVTZWxlY3Rpb25CbG9jayIsIiRzaWRlIiwiYXBwbHkiLCJzZWxlY3RIb3Jpem9udGFsbHkiLCJtb2RzIiwibm9kZVBvcyIsIm5vZGVMZW4iLCJpc0lnbm9yYWJsZSIsInNraXBJZ25vcmVkTm9kZXMiLCJza2lwSWdub3JlZE5vZGVzQmVmb3JlIiwic2tpcElnbm9yZWROb2Rlc0FmdGVyIiwibW92ZU5vZGUiLCJtb3ZlT2Zmc2V0IiwiaXNCbG9ja05vZGUiLCJzZXRTZWxGb2N1cyIsImZpbmREaXJlY3Rpb24iLCJtaWQiLCJzZWxlY3RWZXJ0aWNhbGx5IiwiYmV5b25kIiwic3RvcE5hdGl2ZUhvcml6b250YWxEZWxldGUiLCJlbXB0eSIsIm5leHROb2RlIiwic3dpdGNoRWRpdGFibGUiLCJzYWZhcmlEb3duQXJyb3dCdWciLCJmb2N1c05vZGUiLCJmb2N1c09mZnNldCIsImdldE1vZHMiLCJjYXB0dXJlS2V5RG93biIsImNvZGUiLCJzZXJpYWxpemVGb3JDbGlwYm9hcmQiLCJzZXJpYWxpemVyIiwiZGV0YWNoZWREb2MiLCJmaXJzdENoaWxkIiwid3JhcE1hcCIsInBhcnNlRnJvbUNsaXBib2FyZCIsImh0bWwiLCJwbGFpblRleHQiLCJpbkNvZGUiLCJhc1RleHQiLCJwYXJzZWQiLCJyZWFkSFRNTCIsInJlc3RvcmVSZXBsYWNlZFNwYWNlcyIsImNvbnRleHROb2RlIiwic2xpY2VEYXRhIiwiaW5saW5lUGFyZW50cyIsImFkZENvbnRleHQiLCJjbG9zZVNsaWNlIiwibm9ybWFsaXplU2libGluZ3MiLCJsYXN0V3JhcCIsImluTGFzdCIsImFkZFRvU2libGluZyIsImNsb3NlUmlnaHQiLCJ3cmFwcGVkIiwid2l0aFdyYXBwZXJzIiwic2libGluZyIsImNsb3NlUmFuZ2UiLCJfZGV0YWNoZWREb2MiLCJtZXRhcyIsImZpcnN0VGFnIiwiaGFuZGxlcnMiLCJlZGl0SGFuZGxlcnMiLCJwYXNzaXZlSGFuZGxlcnMiLCJJbnB1dFN0YXRlIiwiaW5pdElucHV0IiwiaGFuZGxlciIsImV2ZW50QmVsb25nc1RvVmlldyIsInJ1bkN1c3RvbUhhbmRsZXIiLCJlbnN1cmVMaXN0ZW5lcnMiLCJzZXRTZWxlY3Rpb25PcmlnaW4iLCJkZXN0cm95SW5wdXQiLCJjdXJyZW50SGFuZGxlcnMiLCJkaXNwYXRjaEV2ZW50IiwiX2V2ZW50IiwiaW5Pck5lYXJDb21wb3NpdGlvbiIsIm5vdyIsImV2ZW50Q29vcmRzIiwiaXNOZWFyIiwiY2xpY2siLCJkeSIsInJ1bkhhbmRsZXJPbkNvbnRleHQiLCJwcm9wTmFtZSIsInVwZGF0ZVNlbGVjdGlvbiIsInNlbGVjdENsaWNrZWRMZWFmIiwic2VsZWN0Q2xpY2tlZE5vZGUiLCJzZWxlY3RlZE5vZGUiLCJzZWxlY3RBdCIsImhhbmRsZVNpbmdsZUNsaWNrIiwic2VsZWN0Tm9kZSIsImhhbmRsZURvdWJsZUNsaWNrIiwiaGFuZGxlVHJpcGxlQ2xpY2siLCJkZWZhdWx0VHJpcGxlQ2xpY2siLCJmb3JjZURPTUZsdXNoIiwiZW5kQ29tcG9zaXRpb24iLCJzZWxlY3ROb2RlTW9kaWZpZXIiLCJmbHVzaGVkIiwiTW91c2VEb3duIiwidGFyZ2V0UG9zIiwidGltZW91dENvbXBvc2l0aW9uIiwic2NoZWR1bGVDb21wb3NlRW5kIiwiZGVsYXkiLCJjbGVhckNvbXBvc2l0aW9uIiwidGltZXN0YW1wRnJvbUN1c3RvbUV2ZW50IiwiZm9yY2VVcGRhdGUiLCJjYXB0dXJlQ29weSIsImJyb2tlbkNsaXBib2FyZEFQSSIsImN1dCIsImRhdGEiLCJzbGljZVNpbmdsZU5vZGUiLCJjYXB0dXJlUGFzdGUiLCJwbGFpbiIsImRvUGFzdGUiLCJwcmVmZXJQbGFpbiIsInNpbmdsZU5vZGUiLCJEcmFnZ2luZyIsIm1vdmUiLCJkcmFnQ29weU1vZGlmaWVyIiwibW91c2VEb3duIiwiZHJhZ2dpbmciLCJldmVudFBvcyIsIiRtb3VzZSIsImlzTm9kZSIsImJlZm9yZUluc2VydCIsImRvbUNoYW5nZUNvdW50IiwiJGN1cnNvciIsImNvbXBhcmVPYmpzIiwiV2lkZ2V0VHlwZSIsIl9XaWRnZXRUeXBlIiwibm9TcGVjIiwic3BhbiIsIm9sZE9mZnNldCIsIkRlY29yYXRpb24iLCJJbmxpbmVUeXBlIiwiX0lubGluZVR5cGUiLCJfRGVjb3JhdGlvbiIsIm5vbmUiLCJEZWNvcmF0aW9uU2V0IiwiX0RlY29yYXRpb25TZXQiLCJsb2NhbCIsImRlY29yYXRpb25zIiwiYnVpbGRUcmVlIiwicHJlZGljYXRlIiwiY2hpbGRPZmYiLCJuZXdMb2NhbCIsIm1hcENoaWxkcmVuIiwiYnlQb3MiLCJjaGlsZE5vZGUiLCJjaGlsZE9mZnNldCIsImJhc2VPZmZzZXQiLCJ0YWtlU3BhbnNGb3JOb2RlIiwibW92ZVNwYW5zIiwid2l0aG91dE51bGxzIiwiZGVjIiwibG9jYWxTZXQiLCJEZWNvcmF0aW9uR3JvdXAiLCJyZW1vdmVPdmVybGFwIiwiX0RlY29yYXRpb25Hcm91cCIsIm1lbWJlcnMiLCJtYXBwZWREZWNvcyIsIm1lbWJlciIsInNvcnRlZCIsInIiLCJvbGRDaGlsZHJlbiIsIm1vdmVkIiwib2xkRW5kIiwibmV3RW5kIiwiZFNpemUiLCJtdXN0UmVidWlsZCIsImZyb21Mb2NhbCIsInRvTG9jYWwiLCJtYXBBbmRHYXRoZXJSZW1haW5pbmdEZWNvcmF0aW9ucyIsInNwYW5zIiwiZ2F0aGVyIiwiaGFzTnVsbHMiLCJsb2NhbFN0YXJ0Iiwic3VidHJlZSIsIndvcmtpbmciLCJpbnNlcnRBaGVhZCIsInZpZXdEZWNvcmF0aW9ucyIsIm9ic2VydmVPcHRpb25zIiwidXNlQ2hhckRhdGEiLCJTZWxlY3Rpb25TdGF0ZSIsIkRPTU9ic2VydmVyIiwiaGFuZGxlRE9NQ2hhbmdlIiwibXV0YXRpb25zIiwidGFrZSIsImFuY2VzdG9ycyIsImNvbnRhaW5lciIsIm5ld1NlbCIsInR5cGVPdmVyIiwiYnJzIiwicmVhZFNlbCIsImNoZWNrQ1NTIiwicHJldmlvdXNTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJjc3NDaGVja2VkIiwiY3NzQ2hlY2tXYXJuZWQiLCJzYWZhcmlTaGFkb3dTZWxlY3Rpb25SYW5nZSIsInJlYWQiLCJjdXJyZW50QW5jaG9yIiwicGFyc2VCZXR3ZWVuIiwiZnJvbV8iLCJ0b18iLCJmaW5kIiwic3RhcnREb2MiLCJydWxlRnJvbU5vZGUiLCJpc0lubGluZSIsInJlYWRET01DaGFuZ2UiLCJhZGRlZE5vZGVzIiwic2hhcmVkIiwicGFyc2UiLCJjb21wYXJlIiwicHJlZmVycmVkUG9zIiwicHJlZmVycmVkU2lkZSIsImNoYW5nZSIsImZpbmREaWZmIiwicmVzb2x2ZVNlbGVjdGlvbiIsIiRmcm9tQSIsImlubGluZUNoYW5nZSIsIm5leHRTZWwiLCJsb29rc0xpa2VKb2luIiwiY2hGcm9tIiwiY2hUbyIsInN0b3JlZE1hcmtzIiwibWFya0NoYW5nZSIsImlzTWFya0NoYW5nZSIsInBhcnNlZFNlbCIsImN1ck1hcmtzIiwicHJldk1hcmtzIiwidXBkYXRlIiwib2xkIiwiJG5ld1N0YXJ0IiwiJG5ld0VuZCIsInNraXBDbG9zaW5nQW5kT3BlbmluZyIsIiRuZXh0IiwiZnJvbUVuZCIsIm1heU9wZW4iLCJlbmRBIiwiZW5kQiIsImFkanVzdCIsIkVkaXRvclZpZXciLCJwcm9wcyIsImNoZWNrU3RhdGVDb21wb25lbnQiLCJnZXRFZGl0YWJsZSIsInVwZGF0ZUN1cnNvcldyYXBwZXIiLCJidWlsZE5vZGVWaWV3cyIsImNvbXB1dGVEb2NEZWNvIiwicHJldlByb3BzIiwicmVkcmF3IiwidXBkYXRlU2VsIiwicGx1Z2luc0NoYW5nZWQiLCJub2RlVmlld3MiLCJjaGFuZ2VkTm9kZVZpZXdzIiwic2Nyb2xsIiwidXBkYXRlRG9jIiwib2xkU2Nyb2xsUG9zIiwiZm9yY2VTZWxVcGRhdGUiLCJzZWxlY3Rpb25Db250ZXh0Q2hhbmdlZCIsImNocm9tZUtsdWRnZSIsInByZXZTdGF0ZSIsInBsdWdpblZpZXciLCJkaXNwYXRjaFRyYW5zYWN0aW9uIiwic2VsMSIsInNlbDIiLCJuQSIsIm5CIiwic2hpZnQiLCJrZXlOYW1lIiwiaWdub3JlS2V5Iiwibm9ybWFsaXplS2V5TmFtZSIsImFsdCIsImN0cmwiLCJtZXRhIiwibW9kIiwibm9ybWFsaXplIiwibW9kaWZpZXJzIiwia2V5bWFwIiwiYmluZGluZ3MiLCJrZXlkb3duSGFuZGxlciIsImJhc2VOYW1lIiwiZGlyZWN0Iiwibm9TaGlmdCIsImZyb21Db2RlIiwiZGVsZXRlU2VsZWN0aW9uIiwiZGlzcGF0Y2giLCJhdEJsb2NrU3RhcnQiLCJqb2luQmFja3dhcmQiLCIkY3V0IiwiZmluZEN1dEJlZm9yZSIsImRlbGV0ZUJhcnJpZXIiLCJ0ZXh0YmxvY2tBdCIsImRlbFN0ZXAiLCJvbmx5Iiwic2VsZWN0Tm9kZUJhY2t3YXJkIiwiYXRCbG9ja0VuZCIsImpvaW5Gb3J3YXJkIiwiZmluZEN1dEFmdGVyIiwic2VsZWN0Tm9kZUZvcndhcmQiLCJqb2luVXAiLCJub2RlU2VsIiwiam9pbkRvd24iLCJuZXdsaW5lSW5Db2RlIiwiZGVmYXVsdEJsb2NrQXQiLCJleGl0Q29kZSIsImFib3ZlIiwiY3JlYXRlUGFyYWdyYXBoTmVhciIsImxpZnRFbXB0eUJsb2NrIiwic3BsaXRCbG9ja0FzIiwic3BsaXROb2RlIiwic3BsaXRUeXBlIiwiY2FuIiwiJGZpcnN0Iiwic3BsaXRCbG9jayIsInNlbGVjdFBhcmVudE5vZGUiLCJzZWxlY3RBbGwiLCJqb2luTWF5YmVDbGVhciIsImNvbm4iLCJjYW5EZWxBZnRlciIsImpvaW5BdCIsInNlbEFmdGVyIiwiYXQiLCJhZnRlclRleHQiLCJhZnRlckRlcHRoIiwic2VsZWN0VGV4dGJsb2NrU2lkZSIsInNlbGVjdFRleHRibG9ja1N0YXJ0Iiwic2VsZWN0VGV4dGJsb2NrRW5kIiwid3JhcEluIiwiYXBwbGljYWJsZSIsImNoYWluQ29tbWFuZHMiLCJjb21tYW5kcyIsImJhY2tzcGFjZSIsInBjQmFzZUtleW1hcCIsIm1hY0Jhc2VLZXltYXAiLCJ3cmFwSW5MaXN0IiwibGlzdFR5cGUiLCJkb0pvaW4iLCJvdXRlclJhbmdlIiwiJGluc2VydCIsImRvV3JhcEluTGlzdCIsImpvaW5CZWZvcmUiLCJzcGxpdERlcHRoIiwic3BsaXRQb3MiLCJsaWZ0TGlzdEl0ZW0iLCJpdGVtVHlwZSIsImxpZnRUb091dGVyTGlzdCIsImxpZnRPdXRPZkxpc3QiLCJlbmRPZkxpc3QiLCJsaXN0IiwiaXRlbSIsImluZGV4QmVmb3JlIiwic2lua0xpc3RJdGVtIiwibmVzdGVkQmVmb3JlIiwiY3JlYXRlQ2hhaW5hYmxlU3RhdGUiLCJ0cmFuc2FjdGlvbiIsIkNvbW1hbmRNYW5hZ2VyIiwicmF3Q29tbWFuZHMiLCJlZGl0b3IiLCJjb21tYW5kIiwiYXJncyIsImNhbGxiYWNrIiwic3RhcnRUciIsInNob3VsZERpc3BhdGNoIiwiY2FsbGJhY2tzIiwiaGFzU3RhcnRUcmFuc2FjdGlvbiIsInJ1biIsImNoYWluIiwiRXZlbnRFbWl0dGVyIiwiZm4iLCJnZXRFeHRlbnNpb25GaWVsZCIsImV4dGVuc2lvbiIsInNwbGl0RXh0ZW5zaW9ucyIsImV4dGVuc2lvbnMiLCJiYXNlRXh0ZW5zaW9ucyIsIm5vZGVFeHRlbnNpb25zIiwibWFya0V4dGVuc2lvbnMiLCJnZXRBdHRyaWJ1dGVzRnJvbUV4dGVuc2lvbnMiLCJleHRlbnNpb25BdHRyaWJ1dGVzIiwibm9kZUFuZE1hcmtFeHRlbnNpb25zIiwiZGVmYXVsdEF0dHJpYnV0ZSIsImFkZEdsb2JhbEF0dHJpYnV0ZXMiLCJnbG9iYWxBdHRyaWJ1dGUiLCJhdHRyaWJ1dGUiLCJhZGRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsIm1lcmdlZEF0dHIiLCJnZXROb2RlVHlwZSIsIm5hbWVPclR5cGUiLCJtZXJnZUF0dHJpYnV0ZXMiLCJvYmplY3RzIiwiaXRlbXMiLCJtZXJnZWRBdHRyaWJ1dGVzIiwidmFsdWVDbGFzc2VzIiwiZXhpc3RpbmdDbGFzc2VzIiwiaW5zZXJ0Q2xhc3NlcyIsInZhbHVlQ2xhc3MiLCJnZXRSZW5kZXJlZEF0dHJpYnV0ZXMiLCJub2RlT3JNYXJrIiwiaXNGdW5jdGlvbiIsImNhbGxPclJldHVybiIsImlzRW1wdHlPYmplY3QiLCJmcm9tU3RyaW5nIiwiaW5qZWN0RXh0ZW5zaW9uQXR0cmlidXRlc1RvUGFyc2VSdWxlIiwicGFyc2VSdWxlIiwib2xkQXR0cmlidXRlcyIsIm5ld0F0dHJpYnV0ZXMiLCJjbGVhblVwU2NoZW1hSXRlbSIsImdldFNjaGVtYUJ5UmVzb2x2ZWRFeHRlbnNpb25zIiwiYWxsQXR0cmlidXRlcyIsIl9hIiwiZXh0cmFOb2RlRmllbGRzIiwiZXh0ZW5kTm9kZVNjaGVtYSIsImV4dGVuc2lvbkF0dHJpYnV0ZSIsInBhcnNlSFRNTCIsInJlbmRlckhUTUwiLCJyZW5kZXJUZXh0IiwiZXh0cmFNYXJrRmllbGRzIiwiZXh0ZW5kTWFya1NjaGVtYSIsImdldFNjaGVtYVR5cGVCeU5hbWUiLCJpc0V4dGVuc2lvblJ1bGVzRW5hYmxlZCIsImVuYWJsZWQiLCJlbmFibGVkRXh0ZW5zaW9uIiwiZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMiLCJtYXhNYXRjaCIsInRleHRCZWZvcmUiLCJzbGljZUVuZFBvcyIsImNodW5rIiwiX2IiLCJpc1JlZ0V4cCIsIklucHV0UnVsZSIsImlucHV0UnVsZU1hdGNoZXJIYW5kbGVyIiwiaW5wdXRSdWxlTWF0Y2giLCJpbnB1dFJ1bGVzUGx1Z2luIiwiaXNOdW1iZXIiLCJQYXN0ZVJ1bGUiLCJwYXN0ZVJ1bGVNYXRjaGVySGFuZGxlciIsInBhc3RlUnVsZU1hdGNoIiwicGFzdGVFdmVudCIsImRyb3BFdmVudCIsInJlc29sdmVkRnJvbSIsInJlc29sdmVkVG8iLCJ0ZXh0VG9NYXRjaCIsInBhc3RlUnVsZXNQbHVnaW4iLCJkcmFnU291cmNlRWxlbWVudCIsImlzUGFzdGVkRnJvbVByb3NlTWlycm9yIiwiaXNEcm9wcGVkRnJvbVByb3NlTWlycm9yIiwiaGFuZGxlRHJhZ3N0YXJ0IiwiX3ZpZXciLCJ0cmFuc2FjdGlvbnMiLCJpc1Bhc3RlIiwiaXNEcm9wIiwiY2hhaW5hYmxlU3RhdGUiLCJmaW5kRHVwbGljYXRlcyIsImZpbHRlcmVkIiwiZWwiLCJFeHRlbnNpb25NYW5hZ2VyIiwiX0V4dGVuc2lvbk1hbmFnZXIiLCJvbkJlZm9yZUNyZWF0ZSIsIm9uQ3JlYXRlIiwib25VcGRhdGUiLCJvblNlbGVjdGlvblVwZGF0ZSIsIm9uVHJhbnNhY3Rpb24iLCJvbkZvY3VzIiwib25CbHVyIiwib25EZXN0cm95IiwicmVzb2x2ZWRFeHRlbnNpb25zIiwiZHVwbGljYXRlZE5hbWVzIiwiYWRkRXh0ZW5zaW9ucyIsInByaW9yaXR5QSIsInByaW9yaXR5QiIsImFkZENvbW1hbmRzIiwiaW5wdXRSdWxlcyIsInBhc3RlUnVsZXMiLCJhbGxQbHVnaW5zIiwiYWRkS2V5Ym9hcmRTaG9ydGN1dHMiLCJkZWZhdWx0QmluZGluZ3MiLCJzaG9ydGN1dCIsIm1ldGhvZCIsImtleU1hcFBsdWdpbiIsImFkZElucHV0UnVsZXMiLCJhZGRQYXN0ZVJ1bGVzIiwiYWRkUHJvc2VNaXJyb3JQbHVnaW5zIiwicHJvc2VNaXJyb3JQbHVnaW5zIiwiYWRkTm9kZVZpZXciLCJub2RldmlldyIsImdldFBvcyIsIkhUTUxBdHRyaWJ1dGVzIiwiZ2V0VHlwZSIsImlzUGxhaW5PYmplY3QiLCJtZXJnZURlZXAiLCJzb3VyY2UiLCJvdXRwdXQiLCJFeHRlbnNpb24iLCJfRXh0ZW5zaW9uIiwiZXh0ZW5kZWRDb25maWciLCJnZXRUZXh0QmV0d2VlbiIsInN0YXJ0Tm9kZSIsInRleHRTZXJpYWxpemVycyIsInRleHRTZXJpYWxpemVyIiwiZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYSIsIkNsaXBib2FyZFRleHRTZXJpYWxpemVyIiwiYmx1ciIsImNsZWFyQ29udGVudCIsImVtaXRVcGRhdGUiLCJjbGVhck5vZGVzIiwiJG1hcHBlZEZyb20iLCIkbWFwcGVkVG8iLCJub2RlUmFuZ2UiLCJ0YXJnZXRMaWZ0RGVwdGgiLCJkZWZhdWx0VHlwZSIsIm9yaWdpbmFsQ3JlYXRlUGFyYWdyYXBoTmVhciIsIm9yaWdpblJhbmdlIiwiY29udGVudFNsaWNlIiwibmV3UG9zIiwiZGVsZXRlQ3VycmVudE5vZGUiLCJjdXJyZW50Tm9kZSIsImRlbGV0ZU5vZGUiLCJ0eXBlT3JOYW1lIiwib3JpZ2luYWxEZWxldGVTZWxlY3Rpb24iLCJvcmlnaW5hbEV4aXRDb2RlIiwib2JqZWN0SW5jbHVkZXMiLCJvYmplY3QxIiwib2JqZWN0MiIsImZpbmRNYXJrSW5TZXQiLCJpc01hcmtJblNldCIsImdldE1hcmtSYW5nZSIsImVuZFBvcyIsImdldE1hcmtUeXBlIiwiZXh0ZW5kTWFya1JhbmdlIiwibmV3U2VsZWN0aW9uIiwiaXNUZXh0U2VsZWN0aW9uIiwibWluTWF4IiwicmVzb2x2ZUZvY3VzUG9zaXRpb24iLCJwb3NpdGlvbiIsInNlbGVjdGlvbkF0U3RhcnQiLCJzZWxlY3Rpb25BdEVuZCIsIm1pblBvcyIsIm1heFBvcyIsImlzaU9TIiwiZm9jdXMiLCJkZWxheWVkRm9jdXMiLCJpc1NhbWVTZWxlY3Rpb24iLCJmb3JFYWNoIiwiaW5zZXJ0Q29udGVudCIsInJlbW92ZVdoaXRlc3BhY2VzIiwiZWxlbWVudEZyb21TdHJpbmciLCJ3cmFwcGVkVmFsdWUiLCJjcmVhdGVOb2RlRnJvbUNvbnRlbnQiLCJlcnJvciIsImlzRnJhZ21lbnQiLCJub2RlT3JGcmFnbWVudCIsImluc2VydENvbnRlbnRBdCIsImlzT25seVRleHRDb250ZW50IiwiaXNPbmx5QmxvY2tDb250ZW50IiwidiIsIm9yaWdpbmFsSm9pblVwIiwib3JpZ2luYWxKb2luRG93biIsIm9yaWdpbmFsSm9pbkJhY2t3YXJkIiwib3JpZ2luYWxKb2luRm9yd2FyZCIsImpvaW5JdGVtQmFja3dhcmQiLCJqb2luSXRlbUZvcndhcmQiLCJpc01hY09TIiwia2V5Ym9hcmRTaG9ydGN1dCIsImNhcHR1cmVkVHJhbnNhY3Rpb24iLCJuZXdTdGVwIiwiaXNOb2RlQWN0aXZlIiwibm9kZVJhbmdlcyIsInJlbGF0aXZlRnJvbSIsInJlbGF0aXZlVG8iLCJzZWxlY3Rpb25SYW5nZSIsIm1hdGNoZWROb2RlUmFuZ2VzIiwic3VtIiwib3JpZ2luYWxMaWZ0Iiwib3JpZ2luYWxMaWZ0RW1wdHlCbG9jayIsIm9yaWdpbmFsTGlmdExpc3RJdGVtIiwib3JpZ2luYWxOZXdsaW5lSW5Db2RlIiwiZ2V0U2NoZW1hVHlwZU5hbWVCeU5hbWUiLCJkZWxldGVQcm9wcyIsInByb3BPclByb3BzIiwibmV3T2JqIiwicmVzZXRBdHRyaWJ1dGVzIiwic2NoZW1hVHlwZSIsInNjcm9sbEludG9WaWV3Iiwib3JpZ2luYWxTZWxlY3ROb2RlQmFja3dhcmQiLCJvcmlnaW5hbFNlbGVjdE5vZGVGb3J3YXJkIiwib3JpZ2luYWxTZWxlY3RQYXJlbnROb2RlIiwib3JpZ2luYWxTZWxlY3RUZXh0YmxvY2tFbmQiLCJvcmlnaW5hbFNlbGVjdFRleHRibG9ja1N0YXJ0IiwiY3JlYXRlRG9jdW1lbnQiLCJwYXJzZU9wdGlvbnMiLCJzZXRDb250ZW50IiwiZG9jdW1lbnQiLCJnZXRNYXJrQXR0cmlidXRlcyIsIm1hcmtJdGVtIiwiZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3MiLCJmaW5kUGFyZW50Tm9kZSIsImdldEhUTUxGcm9tRnJhZ21lbnQiLCJkb2N1bWVudEZyYWdtZW50IiwiZ2V0VGV4dCIsImdldE5vZGVBdHRyaWJ1dGVzIiwibm9kZUl0ZW0iLCJnZXRBdHRyaWJ1dGVzIiwiZ2V0TWFya3NCZXR3ZWVuIiwiZ2V0U3BsaXR0ZWRBdHRyaWJ1dGVzIiwiaXNNYXJrQWN0aXZlIiwibWFya1JhbmdlcyIsIm1hdGNoZWRSYW5nZSIsIm1hcmtSYW5nZSIsImV4Y2x1ZGVkUmFuZ2UiLCJpc0FjdGl2ZSIsImlzTGlzdCIsImdyb3VwIiwiaXNOb2RlRW1wdHkiLCJkZWZhdWx0Q29udGVudCIsImNhblNldE1hcmsiLCJuZXdNYXJrVHlwZSIsImN1cnNvciIsImN1cnJlbnRNYXJrcyIsInNvbWVOb2RlU3VwcG9ydHNNYXJrIiwiX3BvcyIsInBhcmVudEFsbG93c01hcmtUeXBlIiwiY3VycmVudE1hcmtzQWxsb3dNYXJrVHlwZSIsIm90aGVyTWFyayIsInNldE1hcmsiLCJ0cmltbWVkRnJvbSIsInRyaW1tZWRUbyIsInNldE1ldGEiLCJzZXROb2RlIiwidXBkYXRlZFN0YXRlIiwic2V0Tm9kZVNlbGVjdGlvbiIsInNldFRleHRTZWxlY3Rpb24iLCJyZXNvbHZlZEVuZCIsIm9yaWdpbmFsU2lua0xpc3RJdGVtIiwiZW5zdXJlTWFya3MiLCJzcGxpdHRhYmxlTWFya3MiLCJmaWx0ZXJlZE1hcmtzIiwia2VlcE1hcmtzIiwic3BsaXRMaXN0SXRlbSIsImdyYW5kUGFyZW50IiwiZGVwdGhCZWZvcmUiLCJkZXB0aEFmdGVyIiwibmV3TmV4dFR5cGVBdHRyaWJ1dGVzIiwibmV3VHlwZUF0dHJpYnV0ZXMiLCJqb2luTGlzdEJhY2t3YXJkcyIsImpvaW5MaXN0Rm9yd2FyZHMiLCJub2RlQWZ0ZXIiLCJ0b2dnbGVMaXN0IiwibGlzdFR5cGVPck5hbWUiLCJpdGVtVHlwZU9yTmFtZSIsInBhcmVudExpc3QiLCJjYW5XcmFwSW5MaXN0IiwidG9nZ2xlTWFyayIsImV4dGVuZEVtcHR5TWFya1JhbmdlIiwidG9nZ2xlTm9kZSIsInRvZ2dsZVR5cGVPck5hbWUiLCJ0b2dnbGVUeXBlIiwidG9nZ2xlV3JhcCIsInVuZG9JbnB1dFJ1bGUiLCJ1bmRvYWJsZSIsInRvVW5kbyIsInVuc2V0QWxsTWFya3MiLCJ1bnNldE1hcmsiLCJ1cGRhdGVBdHRyaWJ1dGVzIiwib3JpZ2luYWxXcmFwSW4iLCJvcmlnaW5hbFdyYXBJbkxpc3QiLCJDb21tYW5kcyIsIkVkaXRhYmxlIiwiRm9jdXNFdmVudHMiLCJLZXltYXAiLCJoYW5kbGVCYWNrc3BhY2UiLCIkcGFyZW50UG9zIiwicGFyZW50SXNJc29sYXRpbmciLCJwYXJlbnRQb3MiLCJpc0F0U3RhcnQiLCJoYW5kbGVEZWxldGUiLCJiYXNlS2V5bWFwIiwicGNLZXltYXAiLCJtYWNLZXltYXAiLCJhbGxGcm9tIiwiYWxsRW5kIiwiVGFiaW5kZXgiLCJjcmVhdGVTdHlsZVRhZyIsIm5vbmNlIiwic3VmZml4IiwidGlwdGFwU3R5bGVUYWciLCJzdHlsZU5vZGUiLCJFZGl0b3IiLCJlZGl0YWJsZSIsImhhbmRsZVBsdWdpbnMiLCJuYW1lT3JQbHVnaW5LZXkiLCJhbGxFeHRlbnNpb25zIiwic2VsZWN0aW9uSGFzQ2hhbmdlZCIsIm5hbWVPckF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzT3JVbmRlZmluZWQiLCJtYXJrSW5wdXRSdWxlIiwiY2FwdHVyZUdyb3VwIiwiZnVsbE1hdGNoIiwic3RhcnRTcGFjZXMiLCJ0ZXh0U3RhcnQiLCJ0ZXh0RW5kIiwibWFya0VuZCIsIm5vZGVJbnB1dFJ1bGUiLCJtYXRjaFN0YXJ0IiwibGFzdENoYXIiLCJ0ZXh0YmxvY2tUeXBlSW5wdXRSdWxlIiwid3JhcHBpbmdJbnB1dFJ1bGUiLCJibG9ja1JhbmdlIiwiY3VycmVudFBvcyIsIm1hcmtQYXN0ZVJ1bGUiLCJQb3J0YWxzIiwicmVuZGVyZXJzIiwiUmVhY3QiLCJyZW5kZXJlciIsIlJlYWN0RE9NIiwiUHVyZUVkaXRvckNvbnRlbnQiLCJmbHVzaFN5bmMiLCJuZXh0UmVuZGVyZXJzIiwibmV3RWxlbWVudCIsIkVkaXRvckNvbnRlbnRXaXRoS2V5IiwiRWRpdG9yQ29udGVudCIsIkNvcmVFZGl0b3IiLCJ1c2VGb3JjZVVwZGF0ZSIsInNldFZhbHVlIiwidXNlU3RhdGUiLCJ1c2VFZGl0b3IiLCJkZXBzIiwic2V0RWRpdG9yIiwib25CZWZvcmVDcmVhdGVSZWYiLCJ1c2VSZWYiLCJvbkJsdXJSZWYiLCJvbkNyZWF0ZVJlZiIsIm9uRGVzdHJveVJlZiIsIm9uRm9jdXNSZWYiLCJvblNlbGVjdGlvblVwZGF0ZVJlZiIsIm9uVHJhbnNhY3Rpb25SZWYiLCJvblVwZGF0ZVJlZiIsInVzZUVmZmVjdCIsImlzTW91bnRlZCIsIkVkaXRvckNvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiRWRpdG9yQ29uc3VtZXIiLCJSZWFjdE5vZGVWaWV3Q29udGV4dCIsInVzZVJlYWN0Tm9kZVZpZXciLCJ1c2VDb250ZXh0IiwiTm9kZVZpZXdXcmFwcGVyIiwicmVmIiwib25EcmFnU3RhcnQiLCJUYWciLCJpbnB1dFJlZ2V4IiwiQmxvY2txdW90ZSIsInN0YXJJbnB1dFJlZ2V4Iiwic3RhclBhc3RlUmVnZXgiLCJ1bmRlcnNjb3JlSW5wdXRSZWdleCIsInVuZGVyc2NvcmVQYXN0ZVJlZ2V4IiwiQm9sZCIsIkxpc3RJdGVtIiwiVGV4dFN0eWxlIiwiQnVsbGV0TGlzdCIsImlucHV0UnVsZSIsInBhc3RlUmVnZXgiLCJDb2RlIiwiYmFja3RpY2tJbnB1dFJlZ2V4IiwidGlsZGVJbnB1dFJlZ2V4IiwiQ29kZUJsb2NrIiwibGFuZ3VhZ2VDbGFzc1ByZWZpeCIsImxhbmd1YWdlIiwiY2xhc3NOYW1lIiwiaXNBdEVuZCIsImVuZHNXaXRoRG91YmxlTmV3bGluZSIsInZzY29kZSIsInZzY29kZURhdGEiLCJEb2N1bWVudCIsImRyb3BDdXJzb3IiLCJlZGl0b3JWaWV3IiwiRHJvcEN1cnNvclZpZXciLCJpc0Jsb2NrIiwibm9kZVJlY3QiLCJwYXJlbnRMZWZ0IiwicGFyZW50VG9wIiwidGltZW91dCIsImRpc2FibGVEcm9wQ3Vyc29yIiwiZGlzYWJsZWQiLCJEcm9wY3Vyc29yIiwiR2FwQ3Vyc29yIiwiX0dhcEN1cnNvciIsIkdhcEJvb2ttYXJrIiwiY2xvc2VkQmVmb3JlIiwiY2xvc2VkQWZ0ZXIiLCJvdmVycmlkZSIsIm11c3RNb3ZlIiwiJGN1ciIsIl9HYXBCb29rbWFyayIsImdhcEN1cnNvciIsImRyYXdHYXBDdXJzb3IiLCJoYW5kbGVDbGljayIsImhhbmRsZUtleURvd24iLCJiZWZvcmVpbnB1dCIsImFycm93IiwiYXhpcyIsImRpclN0ciIsIiRmb3VuZCIsImNsaWNrUG9zIiwiR2FwY3Vyc29yIiwiSGFyZEJyZWFrIiwiSGVhZGluZyIsIkdPT0RfTEVBRl9TSVpFIiwiUm9wZVNlcXVlbmNlIiwiQXBwZW5kIiwidmFsdWVzIiwiTGVhZiIsInByb3RvdHlwZUFjY2Vzc29ycyIsInJpZ2h0IiwibGVmdExlbiIsIm1heF9lbXB0eV9pdGVtcyIsIkJyYW5jaCIsIl9CcmFuY2giLCJldmVudENvdW50IiwicHJlc2VydmVJdGVtcyIsInJlbWFwIiwidHJhbnNmb3JtIiwicmVtYWluaW5nIiwiYWRkQWZ0ZXIiLCJhZGRCZWZvcmUiLCJJdGVtIiwiaGlzdE9wdGlvbnMiLCJuZXdJdGVtcyIsIm9sZEl0ZW1zIiwibGFzdEl0ZW0iLCJtZXJnZWQiLCJvdmVyZmxvdyIsIkRFUFRIX09WRVJGTE9XIiwiY3V0T2ZmRXZlbnRzIiwibWlycm9yUG9zIiwicmViYXNlZFRyYW5zZm9ybSIsInJlYmFzZWRDb3VudCIsInJlYmFzZWRJdGVtcyIsIm5ld1VudGlsIiwiaVJlYmFzZWQiLCJuZXdNYXBzIiwiYnJhbmNoIiwiZXZlbnRzIiwibmV3SXRlbSIsImN1dFBvaW50IiwiX0l0ZW0iLCJtaXJyb3JPZmZzZXQiLCJIaXN0b3J5U3RhdGUiLCJkb25lIiwidW5kb25lIiwicHJldlJhbmdlcyIsInByZXZUaW1lIiwicHJldkNvbXBvc2l0aW9uIiwiYXBwbHlUcmFuc2FjdGlvbiIsImhpc3RvcnkiLCJoaXN0b3J5VHIiLCJoaXN0b3J5S2V5IiwicmViYXNlZCIsImNsb3NlSGlzdG9yeUtleSIsImFwcGVuZGVkIiwibXVzdFByZXNlcnZlSXRlbXMiLCJyYW5nZXNGb3IiLCJuZXdHcm91cCIsImlzQWRqYWNlbnRUbyIsIm1hcFJhbmdlcyIsImFkamFjZW50IiwiaGlzdFRyYW5zYWN0aW9uIiwicmVkbyIsInBvcCIsIm5ld0hpc3QiLCJjYWNoZWRQcmVzZXJ2ZUl0ZW1zIiwiY2FjaGVkUHJlc2VydmVJdGVtc1BsdWdpbnMiLCJoaXN0IiwiaW5wdXRUeXBlIiwidW5kbyIsIkhpc3RvcnkiLCJIb3Jpem9udGFsUnVsZSIsIiRvcmlnaW5UbyIsImN1cnJlbnRDaGFpbiIsInBvc0FmdGVyIiwiSXRhbGljIiwiT3JkZXJlZExpc3QiLCJhdHRyaWJ1dGVzV2l0aG91dFN0YXJ0IiwiUGFyYWdyYXBoIiwiU3RyaWtlIiwic2hvcnRjdXRzIiwiVGV4dCIsIlN0YXJ0ZXJLaXQiLCJfYyIsIl9kIiwiX2UiLCJfZiIsIl9nIiwiX2giLCJfaiIsIl9rIiwiX2wiLCJfbSIsIl9vIiwiX3AiLCJfcSIsIl9yIiwiX3MiLCJfdCIsIkltYWdlIiwic3JjIiwidGl0bGUiLCJDb250ZW50UmVuZGVyZXIiXSwibWFwcGluZ3MiOiJBQUVBLFNBQVNBLEVBQVdDLEVBQVMsQ0FDM0IsS0FBSyxRQUFVQSxDQUNqQixDQUVBRCxFQUFXLFVBQVksQ0FDckIsWUFBYUEsRUFFYixLQUFNLFNBQVNFLEVBQUssQ0FDbEIsUUFBU0MsRUFBSSxFQUFHQSxFQUFJLEtBQUssUUFBUSxPQUFRQSxHQUFLLEVBQzVDLEdBQUksS0FBSyxRQUFRQSxDQUFDLElBQU1ELEVBQUssT0FBT0MsRUFDdEMsTUFBTyxFQUNULEVBS0EsSUFBSyxTQUFTRCxFQUFLLENBQ2pCLElBQUlFLEVBQVEsS0FBSyxLQUFLRixDQUFHLEVBQ3pCLE9BQU9FLEdBQVMsR0FBSyxPQUFZLEtBQUssUUFBUUEsRUFBUSxDQUFDLENBQ3pELEVBTUEsT0FBUSxTQUFTRixFQUFLRyxFQUFPQyxFQUFRLENBQ25DLElBQUlDLEVBQU9ELEdBQVVBLEdBQVVKLEVBQU0sS0FBSyxPQUFPSSxDQUFNLEVBQUksS0FDdkRGLEVBQVFHLEVBQUssS0FBS0wsQ0FBRyxFQUFHRCxFQUFVTSxFQUFLLFFBQVEsTUFBTSxFQUN6RCxPQUFJSCxHQUFTLEdBQ1hILEVBQVEsS0FBS0ssR0FBVUosRUFBS0csQ0FBSyxHQUVqQ0osRUFBUUcs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RUFBSyxNQUFBeW5CLENBQUssR0FFM0IsR0FHTixDQUFBLEVEeEZELElBQU1waEIsR0FBYSxDQUFDaWdCLEdBQVlpQixFQUFLLEVBQ3hCRyxHQUFrQixDQUFDLENBQUUsUUFBQWxyRCxDQUFRLElBQWEsQ0FDckQsSUFBTThvQyxFQUFTK1csR0FBVSxDQUN2QixXQUFBaFcsR0FDQSxRQUFBN3BDLEVBQ0EsU0FBVSxFQUNaLENBQUMsRUFDRCxPQUFPZy9DLEdBQUEsY0FBQ1EsR0FBQSxDQUFjLE9BQVExVyxFQUFRLENBQ3hDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gOjotIFBlcnNpc3RlbnQgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIGFuIG9yZGVyZWQgbWFwcGluZyBmcm9tXG4vLyBzdHJpbmdzIHRvIHZhbHVlcywgd2l0aCBzb21lIGNvbnZlbmllbnQgdXBkYXRlIG1ldGhvZHMuXG5mdW5jdGlvbiBPcmRlcmVkTWFwKGNvbnRlbnQpIHtcbiAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbn1cblxuT3JkZXJlZE1hcC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBPcmRlcmVkTWFwLFxuXG4gIGZpbmQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250ZW50Lmxlbmd0aDsgaSArPSAyKVxuICAgICAgaWYgKHRoaXMuY29udGVudFtpXSA9PT0ga2V5KSByZXR1cm4gaVxuICAgIHJldHVybiAtMVxuICB9LFxuXG4gIC8vIDo6IChzdHJpbmcpIOKGkiA/YW55XG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZSBzdG9yZWQgdW5kZXIgYGtleWAsIG9yIHJldHVybiB1bmRlZmluZWQgd2hlblxuICAvLyBubyBzdWNoIGtleSBleGlzdHMuXG4gIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgdmFyIGZvdW5kID0gdGhpcy5maW5kKGtleSk7XG4gICAgcmV0dXJuIGZvdW5kID09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5jb250ZW50W2ZvdW5kICsgMV1cbiAgfSxcblxuICAvLyA6OiAoc3RyaW5nLCBhbnksID9zdHJpbmcpIOKGkiBPcmRlcmVkTWFwXG4gIC8vIENyZWF0ZSBhIG5ldyBtYXAgYnkgcmVwbGFjaW5nIHRoZSB2YWx1ZSBvZiBga2V5YCB3aXRoIGEgbmV3XG4gIC8vIHZhbHVlLCBvciBhZGRpbmcgYSBiaW5kaW5nIHRvIHRoZSBlbmQgb2YgdGhlIG1hcC4gSWYgYG5ld0tleWAgaXNcbiAgLy8gZ2l2ZW4sIHRoZSBrZXkgb2YgdGhlIGJpbmRpbmcgd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoYXQga2V5LlxuICB1cGRhdGU6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIG5ld0tleSkge1xuICAgIHZhciBzZWxmID0gbmV3S2V5ICYmIG5ld0tleSAhPSBrZXkgPyB0aGlzLnJlbW92ZShuZXdLZXkpIDogdGhpcztcbiAgICB2YXIgZm91bmQgPSBzZWxmLmZpbmQoa2V5KSwgY29udGVudCA9IHNlbGYuY29udGVudC5zbGljZSgpO1xuICAgIGlmIChmb3VuZCA9PSAtMSkge1xuICAgICAgY29udGVudC5wdXNoKG5ld0tleSB8fCBrZXksIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGVudFtmb3VuZCArIDFdID0gdmFsdWU7XG4gICAgICBpZiAobmV3S2V5KSBjb250ZW50W2ZvdW5kXSA9IG5ld0tleTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBPcmRlcmVkTWFwKGNvbnRlbnQpXG4gIH0sXG5cbiAgLy8gOjogKHN0cmluZykg4oaSIE9yZGVyZWRNYXBcbiAgLy8gUmV0dXJuIGEgbWFwIHdpdGggdGhlIGdpdmVuIGtleSByZW1vdmVkLCBpZiBpdCBleGlzdGVkLlxuICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xuICAgIHZhciBmb3VuZCA9IHRoaXMuZmluZChrZXkpO1xuICAgIGlmIChmb3VuZCA9PSAtMSkgcmV0dXJuIHRoaXNcbiAgICB2YXIgY29udGVudCA9IHRoaXMuY29udGVudC5zbGljZSgpO1xuICAgIGNvbnRlbnQuc3BsaWNlKGZvdW5kLCAyKTtcbiAgICByZXR1cm4gbmV3IE9yZGVyZWRNYXAoY29udGVudClcbiAgfSxcblxuICAvLyA6OiAoc3RyaW5nLCBhbnkpIOKGkiBPcmRlcmVkTWFwXG4gIC8vIEFkZCBhIG5ldyBrZXkgdG8gdGhlIHN0YXJ0IG9mIHRoZSBtYXAuXG4gIGFkZFRvU3RhcnQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IE9yZGVyZWRNYXAoW2tleSwgdmFsdWVdLmNvbmNhdCh0aGlzLnJlbW92ZShrZXkpLmNvbnRlbnQpKVxuICB9LFxuXG4gIC8vIDo6IChzdHJpbmcsIGFueSkg4oaSIE9yZGVyZWRNYXBcbiAgLy8gQWRkIGEgbmV3IGtleSB0byB0aGUgZW5kIG9mIHRoZSBtYXAuXG4gIGFkZFRvRW5kOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnJlbW92ZShrZXkpLmNvbnRlbnQuc2xpY2UoKTtcbiAgICBjb250ZW50LnB1c2goa2V5LCB2YWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBPcmRlcmVkTWFwKGNvbnRlbnQpXG4gIH0sXG5cbiAgLy8gOjogKHN0cmluZywgc3RyaW5nLCBhbnkpIOKGkiBPcmRlcmVkTWFwXG4gIC8vIEFkZCBhIGtleSBhZnRlciB0aGUgZ2l2ZW4ga2V5LiBJZiBgcGxhY2VgIGlzIG5vdCBmb3VuZCwgdGhlIG5ld1xuICAvLyBrZXkgaXMgYWRkZWQgdG8gdGhlIGVuZC5cbiAgYWRkQmVmb3JlOiBmdW5jdGlvbihwbGFjZSwga2V5LCB2YWx1ZSkge1xuICAgIHZhciB3aXRob3V0ID0gdGhpcy5yZW1vdmUoa2V5KSwgY29udGVudCA9IHdpdGhvdXQuY29udGVudC5zbGljZSgpO1xuICAgIHZhciBmb3VuZCA9IHdpdGhvdXQuZmluZChwbGFjZSk7XG4gICAgY29udGVudC5zcGxpY2UoZm91bmQgPT0gLTEgPyBjb250ZW50Lmxlbmd0aCA6IGZvdW5kLCAwLCBrZXksIHZhbHVlKTtcbiAgICByZXR1cm4gbmV3IE9yZGVyZWRNYXAoY29udGVudClcbiAgfSxcblxuICAvLyA6OiAoKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSlcbiAgLy8gQ2FsbCB0aGUgZ2l2ZW4gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIgaW4gdGhlIG1hcCwgaW5cbiAgLy8gb3JkZXIuXG4gIGZvckVhY2g6IGZ1bmN0aW9uKGYpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY29udGVudC5sZW5ndGg7IGkgKz0gMilcbiAgICAgIGYodGhpcy5jb250ZW50W2ldLCB0aGlzLmNvbnRlbnRbaSArIDFdKTtcbiAgfSxcblxuICAvLyA6OiAodW5pb248T2JqZWN0LCBPcmRlcmVkTWFwPikg4oaSIE9yZGVyZWRNYXBcbiAgLy8gQ3JlYXRlIGEgbmV3IG1hcCBieSBwcmVwZW5kaW5nIHRoZSBrZXlzIGluIHRoaXMgbWFwIHRoYXQgZG9uJ3RcbiAgLy8gYXBwZWFyIGluIGBtYXBgIGJlZm9yZSB0aGUga2V5cyBpbiBgbWFwYC5cbiAgcHJlcGVuZDogZnVuY3Rpb24obWFwKSB7XG4gICAgbWFwID0gT3JkZXJlZE1hcC5mcm9tKG1hcCk7XG4gICAgaWYgKCFtYXAuc2l6ZSkgcmV0dXJuIHRoaXNcbiAgICByZXR1cm4gbmV3IE9yZGVyZWRNYXAobWFwLmNvbnRlbnQuY29uY2F0KHRoaXMuc3VidHJhY3QobWFwKS5jb250ZW50KSlcbiAgfSxcblxuICAvLyA6OiAodW5pb248T2JqZWN0LCBPcmRlcmVkTWFwPikg4oaSIE9yZGVyZWRNYXBcbiAgLy8gQ3JlYXRlIGEgbmV3IG1hcCBieSBhcHBlbmRpbmcgdGhlIGtleXMgaW4gdGhpcyBtYXAgdGhhdCBkb24ndFxuICAvLyBhcHBlYXIgaW4gYG1hcGAgYWZ0ZXIgdGhlIGtleXMgaW4gYG1hcGAuXG4gIGFwcGVuZDogZnVuY3Rpb24obWFwKSB7XG4gICAgbWFwID0gT3JkZXJlZE1hcC5mcm9tKG1hcCk7XG4gICAgaWYgKCFtYXAuc2l6ZSkgcmV0dXJuIHRoaXNcbiAgICByZXR1cm4gbmV3IE9yZGVyZWRNYXAodGhpcy5zdWJ0cmFjdChtYXApLmNvbnRlbnQuY29uY2F0KG1hcC5jb250ZW50KSlcbiAgfSxcblxuICAvLyA6OiAodW5pb248T2JqZWN0LCBPcmRlcmVkTWFwPikg4oaSIE9yZGVyZWRNYXBcbiAgLy8gQ3JlYXRlIGEgbWFwIGNvbnRhaW5pbmcgYWxsIHRoZSBrZXlzIGluIHRoaXMgbWFwIHRoYXQgZG9uJ3RcbiAgLy8gYXBwZWFyIGluIGBtYXBgLlxuICBzdWJ0cmFjdDogZnVuY3Rpb24obWFwKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRoaXM7XG4gICAgbWFwID0gT3JkZXJlZE1hcC5mcm9tKG1hcCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXAuY29udGVudC5sZW5ndGg7IGkgKz0gMilcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZW1vdmUobWFwLmNvbnRlbnRbaV0pO1xuICAgIHJldHVybiByZXN1bHRcbiAgfSxcblxuICAvLyA6OiAoKSDihpIgT2JqZWN0XG4gIC8vIFR1cm4gb3JkZXJlZCBtYXAgaW50byBhIHBsYWluIG9iamVjdC5cbiAgdG9PYmplY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXN1bHRba2V5XSA9IHZhbHVlOyB9KTtcbiAgICByZXR1cm4gcmVzdWx0XG4gIH0sXG5cbiAgLy8gOjogbnVtYmVyXG4gIC8vIFRoZSBhbW91bnQgb2Yga2V5cyBpbiB0aGlzIG1hcC5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGggPj4gMVxuICB9XG59O1xuXG4vLyA6OiAoP3VuaW9uPE9iamVjdCwgT3JkZXJlZE1hcD4pIOKGkiBPcmRlcmVkTWFwXG4vLyBSZXR1cm4gYSBtYXAgd2l0aCB0aGUgZ2l2ZW4gY29udGVudC4gSWYgbnVsbCwgY3JlYXRlIGFuIGVtcHR5XG4vLyBtYXAuIElmIGdpdmVuIGFuIG9yZGVyZWQgbWFwLCByZXR1cm4gdGhhdCBtYXAgaXRzZWxmLiBJZiBnaXZlbiBhblxuLy8gb2JqZWN0LCBjcmVhdGUgYSBtYXAgZnJvbSB0aGUgb2JqZWN0J3MgcHJvcGVydGllcy5cbk9yZGVyZWRNYXAuZnJvbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9yZGVyZWRNYXApIHJldHVybiB2YWx1ZVxuICB2YXIgY29udGVudCA9IFtdO1xuICBpZiAodmFsdWUpIGZvciAodmFyIHByb3AgaW4gdmFsdWUpIGNvbnRlbnQucHVzaChwcm9wLCB2YWx1ZVtwcm9wXSk7XG4gIHJldHVybiBuZXcgT3JkZXJlZE1hcChjb250ZW50KVxufTtcblxuZXhwb3J0IGRlZmF1bHQgT3JkZXJlZE1hcDtcbiIsImltcG9ydCBPcmRlcmVkTWFwIGZyb20gJ29yZGVyZWRtYXAnO1xuXG5mdW5jdGlvbiBmaW5kRGlmZlN0YXJ0KGEsIGIsIHBvcykge1xuICAgIGZvciAobGV0IGkgPSAwOzsgaSsrKSB7XG4gICAgICAgIGlmIChpID09IGEuY2hpbGRDb3VudCB8fCBpID09IGIuY2hpbGRDb3VudClcbiAgICAgICAgICAgIHJldHVybiBhLmNoaWxkQ291bnQgPT0gYi5jaGlsZENvdW50ID8gbnVsbCA6IHBvcztcbiAgICAgICAgbGV0IGNoaWxkQSA9IGEuY2hpbGQoaSksIGNoaWxkQiA9IGIuY2hpbGQoaSk7XG4gICAgICAgIGlmIChjaGlsZEEgPT0gY2hpbGRCKSB7XG4gICAgICAgICAgICBwb3MgKz0gY2hpbGRBLm5vZGVTaXplO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjaGlsZEEuc2FtZU1hcmt1cChjaGlsZEIpKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgaWYgKGNoaWxkQS5pc1RleHQgJiYgY2hpbGRBLnRleHQgIT0gY2hpbGRCLnRleHQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBjaGlsZEEudGV4dFtqXSA9PSBjaGlsZEIudGV4dFtqXTsgaisrKVxuICAgICAgICAgICAgICAgIHBvcysrO1xuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRBLmNvbnRlbnQuc2l6ZSB8fCBjaGlsZEIuY29udGVudC5zaXplKSB7XG4gICAgICAgICAgICBsZXQgaW5uZXIgPSBmaW5kRGlmZlN0YXJ0KGNoaWxkQS5jb250ZW50LCBjaGlsZEIuY29udGVudCwgcG9zICsgMSk7XG4gICAgICAgICAgICBpZiAoaW5uZXIgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXI7XG4gICAgICAgIH1cbiAgICAgICAgcG9zICs9IGNoaWxkQS5ub2RlU2l6ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kRGlmZkVuZChhLCBiLCBwb3NBLCBwb3NCKSB7XG4gICAgZm9yIChsZXQgaUEgPSBhLmNoaWxkQ291bnQsIGlCID0gYi5jaGlsZENvdW50OzspIHtcbiAgICAgICAgaWYgKGlBID09IDAgfHwgaUIgPT0gMClcbiAgICAgICAgICAgIHJldHVybiBpQSA9PSBpQiA/IG51bGwgOiB7IGE6IHBvc0EsIGI6IHBvc0IgfTtcbiAgICAgICAgbGV0IGNoaWxkQSA9IGEuY2hpbGQoLS1pQSksIGNoaWxkQiA9IGIuY2hpbGQoLS1pQiksIHNpemUgPSBjaGlsZEEubm9kZVNpemU7XG4gICAgICAgIGlmIChjaGlsZEEgPT0gY2hpbGRCKSB7XG4gICAgICAgICAgICBwb3NBIC09IHNpemU7XG4gICAgICAgICAgICBwb3NCIC09IHNpemU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNoaWxkQS5zYW1lTWFya3VwKGNoaWxkQikpXG4gICAgICAgICAgICByZXR1cm4geyBhOiBwb3NBLCBiOiBwb3NCIH07XG4gICAgICAgIGlmIChjaGlsZEEuaXNUZXh0ICYmIGNoaWxkQS50ZXh0ICE9IGNoaWxkQi50ZXh0KSB7XG4gICAgICAgICAgICBsZXQgc2FtZSA9IDAsIG1pblNpemUgPSBNYXRoLm1pbihjaGlsZEEudGV4dC5sZW5ndGgsIGNoaWxkQi50ZXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICB3aGlsZSAoc2FtZSA8IG1pblNpemUgJiYgY2hpbGRBLnRleHRbY2hpbGRBLnRleHQubGVuZ3RoIC0gc2FtZSAtIDFdID09IGNoaWxkQi50ZXh0W2NoaWxkQi50ZXh0Lmxlbmd0aCAtIHNhbWUgLSAxXSkge1xuICAgICAgICAgICAgICAgIHNhbWUrKztcbiAgICAgICAgICAgICAgICBwb3NBLS07XG4gICAgICAgICAgICAgICAgcG9zQi0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgYTogcG9zQSwgYjogcG9zQiB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGlsZEEuY29udGVudC5zaXplIHx8IGNoaWxkQi5jb250ZW50LnNpemUpIHtcbiAgICAgICAgICAgIGxldCBpbm5lciA9IGZpbmREaWZmRW5kKGNoaWxkQS5jb250ZW50LCBjaGlsZEIuY29udGVudCwgcG9zQSAtIDEsIHBvc0IgLSAxKTtcbiAgICAgICAgICAgIGlmIChpbm5lcilcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5uZXI7XG4gICAgICAgIH1cbiAgICAgICAgcG9zQSAtPSBzaXplO1xuICAgICAgICBwb3NCIC09IHNpemU7XG4gICAgfVxufVxuXG4vKipcbkEgZnJhZ21lbnQgcmVwcmVzZW50cyBhIG5vZGUncyBjb2xsZWN0aW9uIG9mIGNoaWxkIG5vZGVzLlxuXG5MaWtlIG5vZGVzLCBmcmFnbWVudHMgYXJlIHBlcnNpc3RlbnQgZGF0YSBzdHJ1Y3R1cmVzLCBhbmQgeW91XG5zaG91bGQgbm90IG11dGF0ZSB0aGVtIG9yIHRoZWlyIGNvbnRlbnQuIFJhdGhlciwgeW91IGNyZWF0ZSBuZXdcbmluc3RhbmNlcyB3aGVuZXZlciBuZWVkZWQuIFRoZSBBUEkgdHJpZXMgdG8gbWFrZSB0aGlzIGVhc3kuXG4qL1xuY2xhc3MgRnJhZ21lbnQge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb250ZW50LCBzaXplKSB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfHwgMDtcbiAgICAgICAgaWYgKHNpemUgPT0gbnVsbClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgKz0gY29udGVudFtpXS5ub2RlU2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgSW52b2tlIGEgY2FsbGJhY2sgZm9yIGFsbCBkZXNjZW5kYW50IG5vZGVzIGJldHdlZW4gdGhlIGdpdmVuIHR3b1xuICAgIHBvc2l0aW9ucyAocmVsYXRpdmUgdG8gc3RhcnQgb2YgdGhpcyBmcmFnbWVudCkuIERvZXNuJ3QgZGVzY2VuZFxuICAgIGludG8gYSBub2RlIHdoZW4gdGhlIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYC5cbiAgICAqL1xuICAgIG5vZGVzQmV0d2Vlbihmcm9tLCB0bywgZiwgbm9kZVN0YXJ0ID0gMCwgcGFyZW50KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSAwOyBwb3MgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNvbnRlbnRbaV0sIGVuZCA9IHBvcyArIGNoaWxkLm5vZGVTaXplO1xuICAgICAgICAgICAgaWYgKGVuZCA+IGZyb20gJiYgZihjaGlsZCwgbm9kZVN0YXJ0ICsgcG9zLCBwYXJlbnQgfHwgbnVsbCwgaSkgIT09IGZhbHNlICYmIGNoaWxkLmNvbnRlbnQuc2l6ZSkge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHBvcyArIDE7XG4gICAgICAgICAgICAgICAgY2hpbGQubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsIGZyb20gLSBzdGFydCksIE1hdGgubWluKGNoaWxkLmNvbnRlbnQuc2l6ZSwgdG8gLSBzdGFydCksIGYsIG5vZGVTdGFydCArIHN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDYWxsIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgZXZlcnkgZGVzY2VuZGFudCBub2RlLiBgcG9zYCB3aWxsIGJlXG4gICAgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBmcmFnbWVudC4gVGhlIGNhbGxiYWNrIG1heSByZXR1cm5cbiAgICBgZmFsc2VgIHRvIHByZXZlbnQgdHJhdmVyc2FsIG9mIGEgZ2l2ZW4gbm9kZSdzIGNoaWxkcmVuLlxuICAgICovXG4gICAgZGVzY2VuZGFudHMoZikge1xuICAgICAgICB0aGlzLm5vZGVzQmV0d2VlbigwLCB0aGlzLnNpemUsIGYpO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRyYWN0IHRoZSB0ZXh0IGJldHdlZW4gYGZyb21gIGFuZCBgdG9gLiBTZWUgdGhlIHNhbWUgbWV0aG9kIG9uXG4gICAgW2BOb2RlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGUudGV4dEJldHdlZW4pLlxuICAgICovXG4gICAgdGV4dEJldHdlZW4oZnJvbSwgdG8sIGJsb2NrU2VwYXJhdG9yLCBsZWFmVGV4dCkge1xuICAgICAgICBsZXQgdGV4dCA9IFwiXCIsIHNlcGFyYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMubm9kZXNCZXR3ZWVuKGZyb20sIHRvLCAobm9kZSwgcG9zKSA9PiB7XG4gICAgICAgICAgICBpZiAobm9kZS5pc1RleHQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IG5vZGUudGV4dC5zbGljZShNYXRoLm1heChmcm9tLCBwb3MpIC0gcG9zLCB0byAtIHBvcyk7XG4gICAgICAgICAgICAgICAgc2VwYXJhdGVkID0gIWJsb2NrU2VwYXJhdG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm9kZS5pc0xlYWYpIHtcbiAgICAgICAgICAgICAgICBpZiAobGVhZlRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSB0eXBlb2YgbGVhZlRleHQgPT09IFwiZnVuY3Rpb25cIiA/IGxlYWZUZXh0KG5vZGUpIDogbGVhZlRleHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUudHlwZS5zcGVjLmxlYWZUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gbm9kZS50eXBlLnNwZWMubGVhZlRleHQobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlcGFyYXRlZCA9ICFibG9ja1NlcGFyYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFzZXBhcmF0ZWQgJiYgbm9kZS5pc0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBibG9ja1NlcGFyYXRvcjtcbiAgICAgICAgICAgICAgICBzZXBhcmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAwKTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBjb250YWluaW5nIHRoZSBjb21iaW5lZCBjb250ZW50IG9mIHRoaXNcbiAgICBmcmFnbWVudCBhbmQgdGhlIG90aGVyLlxuICAgICovXG4gICAgYXBwZW5kKG90aGVyKSB7XG4gICAgICAgIGlmICghb3RoZXIuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiBvdGhlcjtcbiAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmxhc3RDaGlsZCwgZmlyc3QgPSBvdGhlci5maXJzdENoaWxkLCBjb250ZW50ID0gdGhpcy5jb250ZW50LnNsaWNlKCksIGkgPSAwO1xuICAgICAgICBpZiAobGFzdC5pc1RleHQgJiYgbGFzdC5zYW1lTWFya3VwKGZpcnN0KSkge1xuICAgICAgICAgICAgY29udGVudFtjb250ZW50Lmxlbmd0aCAtIDFdID0gbGFzdC53aXRoVGV4dChsYXN0LnRleHQgKyBmaXJzdC50ZXh0KTtcbiAgICAgICAgICAgIGkgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBpIDwgb3RoZXIuY29udGVudC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChvdGhlci5jb250ZW50W2ldKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChjb250ZW50LCB0aGlzLnNpemUgKyBvdGhlci5zaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3V0IG91dCB0aGUgc3ViLWZyYWdtZW50IGJldHdlZW4gdGhlIHR3byBnaXZlbiBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBjdXQoZnJvbSwgdG8gPSB0aGlzLnNpemUpIHtcbiAgICAgICAgaWYgKGZyb20gPT0gMCAmJiB0byA9PSB0aGlzLnNpemUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdLCBzaXplID0gMDtcbiAgICAgICAgaWYgKHRvID4gZnJvbSlcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSAwOyBwb3MgPCB0bzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jb250ZW50W2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5ub2RlU2l6ZTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID4gZnJvbSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocG9zIDwgZnJvbSB8fCBlbmQgPiB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLmlzVGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLmN1dChNYXRoLm1heCgwLCBmcm9tIC0gcG9zKSwgTWF0aC5taW4oY2hpbGQudGV4dC5sZW5ndGgsIHRvIC0gcG9zKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5jdXQoTWF0aC5tYXgoMCwgZnJvbSAtIHBvcyAtIDEpLCBNYXRoLm1pbihjaGlsZC5jb250ZW50LnNpemUsIHRvIC0gcG9zIC0gMSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSArPSBjaGlsZC5ub2RlU2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcG9zID0gZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEZyYWdtZW50KHJlc3VsdCwgc2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY3V0QnlJbmRleChmcm9tLCB0bykge1xuICAgICAgICBpZiAoZnJvbSA9PSB0bylcbiAgICAgICAgICAgIHJldHVybiBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgaWYgKGZyb20gPT0gMCAmJiB0byA9PSB0aGlzLmNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5jb250ZW50LnNsaWNlKGZyb20sIHRvKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbiB3aGljaCB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXggaXNcbiAgICByZXBsYWNlZCBieSB0aGUgZ2l2ZW4gbm9kZS5cbiAgICAqL1xuICAgIHJlcGxhY2VDaGlsZChpbmRleCwgbm9kZSkge1xuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuY29udGVudFtpbmRleF07XG4gICAgICAgIGlmIChjdXJyZW50ID09IG5vZGUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgbGV0IGNvcHkgPSB0aGlzLmNvbnRlbnQuc2xpY2UoKTtcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLnNpemUgKyBub2RlLm5vZGVTaXplIC0gY3VycmVudC5ub2RlU2l6ZTtcbiAgICAgICAgY29weVtpbmRleF0gPSBub2RlO1xuICAgICAgICByZXR1cm4gbmV3IEZyYWdtZW50KGNvcHksIHNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgYnkgcHJlcGVuZGluZyB0aGUgZ2l2ZW4gbm9kZSB0byB0aGlzXG4gICAgZnJhZ21lbnQuXG4gICAgKi9cbiAgICBhZGRUb1N0YXJ0KG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChbbm9kZV0uY29uY2F0KHRoaXMuY29udGVudCksIHRoaXMuc2l6ZSArIG5vZGUubm9kZVNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgYnkgYXBwZW5kaW5nIHRoZSBnaXZlbiBub2RlIHRvIHRoaXNcbiAgICBmcmFnbWVudC5cbiAgICAqL1xuICAgIGFkZFRvRW5kKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmNvbnRlbnQuY29uY2F0KG5vZGUpLCB0aGlzLnNpemUgKyBub2RlLm5vZGVTaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGlzIGZyYWdtZW50IHRvIGFub3RoZXIgb25lLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5sZW5ndGggIT0gb3RoZXIuY29udGVudC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250ZW50Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRbaV0uZXEob3RoZXIuY29udGVudFtpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBmcmFnbWVudCwgb3IgYG51bGxgIGlmIGl0IGlzIGVtcHR5LlxuICAgICovXG4gICAgZ2V0IGZpcnN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoID8gdGhpcy5jb250ZW50WzBdIDogbnVsbDsgfVxuICAgIC8qKlxuICAgIFRoZSBsYXN0IGNoaWxkIG9mIHRoZSBmcmFnbWVudCwgb3IgYG51bGxgIGlmIGl0IGlzIGVtcHR5LlxuICAgICovXG4gICAgZ2V0IGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGggPyB0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aCAtIDFdIDogbnVsbDsgfVxuICAgIC8qKlxuICAgIFRoZSBudW1iZXIgb2YgY2hpbGQgbm9kZXMgaW4gdGhpcyBmcmFnbWVudC5cbiAgICAqL1xuICAgIGdldCBjaGlsZENvdW50KCkgeyByZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aDsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY2hpbGQgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguIFJhaXNlIGFuIGVycm9yIHdoZW4gdGhlXG4gICAgaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgICovXG4gICAgY2hpbGQoaW5kZXgpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gdGhpcy5jb250ZW50W2luZGV4XTtcbiAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggXCIgKyBpbmRleCArIFwiIG91dCBvZiByYW5nZSBmb3IgXCIgKyB0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNoaWxkIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LCBpZiBpdCBleGlzdHMuXG4gICAgKi9cbiAgICBtYXliZUNoaWxkKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRbaW5kZXhdIHx8IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIENhbGwgYGZgIGZvciBldmVyeSBjaGlsZCBub2RlLCBwYXNzaW5nIHRoZSBub2RlLCBpdHMgb2Zmc2V0XG4gICAgaW50byB0aGlzIHBhcmVudCBub2RlLCBhbmQgaXRzIGluZGV4LlxuICAgICovXG4gICAgZm9yRWFjaChmKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwID0gMDsgaSA8IHRoaXMuY29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jb250ZW50W2ldO1xuICAgICAgICAgICAgZihjaGlsZCwgcCwgaSk7XG4gICAgICAgICAgICBwICs9IGNoaWxkLm5vZGVTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGZpcnN0IHBvc2l0aW9uIGF0IHdoaWNoIHRoaXMgZnJhZ21lbnQgYW5kIGFub3RoZXJcbiAgICBmcmFnbWVudCBkaWZmZXIsIG9yIGBudWxsYCBpZiB0aGV5IGFyZSB0aGUgc2FtZS5cbiAgICAqL1xuICAgIGZpbmREaWZmU3RhcnQob3RoZXIsIHBvcyA9IDApIHtcbiAgICAgICAgcmV0dXJuIGZpbmREaWZmU3RhcnQodGhpcywgb3RoZXIsIHBvcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGZpcnN0IHBvc2l0aW9uLCBzZWFyY2hpbmcgZnJvbSB0aGUgZW5kLCBhdCB3aGljaCB0aGlzXG4gICAgZnJhZ21lbnQgYW5kIHRoZSBnaXZlbiBmcmFnbWVudCBkaWZmZXIsIG9yIGBudWxsYCBpZiB0aGV5IGFyZVxuICAgIHRoZSBzYW1lLiBTaW5jZSB0aGlzIHBvc2l0aW9uIHdpbGwgbm90IGJlIHRoZSBzYW1lIGluIGJvdGhcbiAgICBub2RlcywgYW4gb2JqZWN0IHdpdGggdHdvIHNlcGFyYXRlIHBvc2l0aW9ucyBpcyByZXR1cm5lZC5cbiAgICAqL1xuICAgIGZpbmREaWZmRW5kKG90aGVyLCBwb3MgPSB0aGlzLnNpemUsIG90aGVyUG9zID0gb3RoZXIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmluZERpZmZFbmQodGhpcywgb3RoZXIsIHBvcywgb3RoZXJQb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBpbmRleCBhbmQgaW5uZXIgb2Zmc2V0IGNvcnJlc3BvbmRpbmcgdG8gYSBnaXZlbiByZWxhdGl2ZVxuICAgIHBvc2l0aW9uIGluIHRoaXMgZnJhZ21lbnQuIFRoZSByZXN1bHQgb2JqZWN0IHdpbGwgYmUgcmV1c2VkXG4gICAgKG92ZXJ3cml0dGVuKSB0aGUgbmV4dCB0aW1lIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIChOb3QgcHVibGljLilcbiAgICAqL1xuICAgIGZpbmRJbmRleChwb3MsIHJvdW5kID0gLTEpIHtcbiAgICAgICAgaWYgKHBvcyA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHJldEluZGV4KDAsIHBvcyk7XG4gICAgICAgIGlmIChwb3MgPT0gdGhpcy5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIHJldEluZGV4KHRoaXMuY29udGVudC5sZW5ndGgsIHBvcyk7XG4gICAgICAgIGlmIChwb3MgPiB0aGlzLnNpemUgfHwgcG9zIDwgMClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQb3NpdGlvbiAke3Bvc30gb3V0c2lkZSBvZiBmcmFnbWVudCAoJHt0aGlzfSlgKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGN1clBvcyA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLmNoaWxkKGkpLCBlbmQgPSBjdXJQb3MgKyBjdXIubm9kZVNpemU7XG4gICAgICAgICAgICBpZiAoZW5kID49IHBvcykge1xuICAgICAgICAgICAgICAgIGlmIChlbmQgPT0gcG9zIHx8IHJvdW5kID4gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldEluZGV4KGkgKyAxLCBlbmQpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXRJbmRleChpLCBjdXJQb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyUG9zID0gZW5kO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIGRlYnVnZ2luZyBzdHJpbmcgdGhhdCBkZXNjcmliZXMgdGhpcyBmcmFnbWVudC5cbiAgICAqL1xuICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gXCI8XCIgKyB0aGlzLnRvU3RyaW5nSW5uZXIoKSArIFwiPlwiOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZ0lubmVyKCkgeyByZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oXCIsIFwiKTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIEpTT04tc2VyaWFsaXplYWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGZyYWdtZW50LlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aCA/IHRoaXMuY29udGVudC5tYXAobiA9PiBuLnRvSlNPTigpKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgZnJhZ21lbnQgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihzY2hlbWEsIHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gRnJhZ21lbnQuZW1wdHk7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IEZyYWdtZW50KHZhbHVlLm1hcChzY2hlbWEubm9kZUZyb21KU09OKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEJ1aWxkIGEgZnJhZ21lbnQgZnJvbSBhbiBhcnJheSBvZiBub2Rlcy4gRW5zdXJlcyB0aGF0IGFkamFjZW50XG4gICAgdGV4dCBub2RlcyB3aXRoIHRoZSBzYW1lIG1hcmtzIGFyZSBqb2luZWQgdG9nZXRoZXIuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUFycmF5KGFycmF5KSB7XG4gICAgICAgIGlmICghYXJyYXkubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50LmVtcHR5O1xuICAgICAgICBsZXQgam9pbmVkLCBzaXplID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBhcnJheVtpXTtcbiAgICAgICAgICAgIHNpemUgKz0gbm9kZS5ub2RlU2l6ZTtcbiAgICAgICAgICAgIGlmIChpICYmIG5vZGUuaXNUZXh0ICYmIGFycmF5W2kgLSAxXS5zYW1lTWFya3VwKG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFqb2luZWQpXG4gICAgICAgICAgICAgICAgICAgIGpvaW5lZCA9IGFycmF5LnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgICAgIGpvaW5lZFtqb2luZWQubGVuZ3RoIC0gMV0gPSBub2RlXG4gICAgICAgICAgICAgICAgICAgIC53aXRoVGV4dChqb2luZWRbam9pbmVkLmxlbmd0aCAtIDFdLnRleHQgKyBub2RlLnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoam9pbmVkKSB7XG4gICAgICAgICAgICAgICAgam9pbmVkLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChqb2luZWQgfHwgYXJyYXksIHNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBmcmFnbWVudCBmcm9tIHNvbWV0aGluZyB0aGF0IGNhbiBiZSBpbnRlcnByZXRlZCBhcyBhXG4gICAgc2V0IG9mIG5vZGVzLiBGb3IgYG51bGxgLCBpdCByZXR1cm5zIHRoZSBlbXB0eSBmcmFnbWVudC4gRm9yIGFcbiAgICBmcmFnbWVudCwgdGhlIGZyYWdtZW50IGl0c2VsZi4gRm9yIGEgbm9kZSBvciBhcnJheSBvZiBub2RlcywgYVxuICAgIGZyYWdtZW50IGNvbnRhaW5pbmcgdGhvc2Ugbm9kZXMuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbShub2Rlcykge1xuICAgICAgICBpZiAoIW5vZGVzKVxuICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50LmVtcHR5O1xuICAgICAgICBpZiAobm9kZXMgaW5zdGFuY2VvZiBGcmFnbWVudClcbiAgICAgICAgICAgIHJldHVybiBub2RlcztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZXMpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbUFycmF5KG5vZGVzKTtcbiAgICAgICAgaWYgKG5vZGVzLmF0dHJzKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChbbm9kZXNdLCBub2Rlcy5ub2RlU2l6ZSk7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQ2FuIG5vdCBjb252ZXJ0IFwiICsgbm9kZXMgKyBcIiB0byBhIEZyYWdtZW50XCIgK1xuICAgICAgICAgICAgKG5vZGVzLm5vZGVzQmV0d2VlbiA/IFwiIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKVwiIDogXCJcIikpO1xuICAgIH1cbn1cbi8qKlxuQW4gZW1wdHkgZnJhZ21lbnQuIEludGVuZGVkIHRvIGJlIHJldXNlZCB3aGVuZXZlciBhIG5vZGUgZG9lc24ndFxuY29udGFpbiBhbnl0aGluZyAocmF0aGVyIHRoYW4gYWxsb2NhdGluZyBhIG5ldyBlbXB0eSBmcmFnbWVudCBmb3JcbmVhY2ggbGVhZiBub2RlKS5cbiovXG5GcmFnbWVudC5lbXB0eSA9IG5ldyBGcmFnbWVudChbXSwgMCk7XG5jb25zdCBmb3VuZCA9IHsgaW5kZXg6IDAsIG9mZnNldDogMCB9O1xuZnVuY3Rpb24gcmV0SW5kZXgoaW5kZXgsIG9mZnNldCkge1xuICAgIGZvdW5kLmluZGV4ID0gaW5kZXg7XG4gICAgZm91bmQub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHJldHVybiBmb3VuZDtcbn1cblxuZnVuY3Rpb24gY29tcGFyZURlZXAoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIShhICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIpIHx8XG4gICAgICAgICEoYiAmJiB0eXBlb2YgYiA9PSBcIm9iamVjdFwiKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBhcnJheSA9IEFycmF5LmlzQXJyYXkoYSk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYikgIT0gYXJyYXkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWNvbXBhcmVEZWVwKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAobGV0IHAgaW4gYSlcbiAgICAgICAgICAgIGlmICghKHAgaW4gYikgfHwgIWNvbXBhcmVEZWVwKGFbcF0sIGJbcF0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgcCBpbiBiKVxuICAgICAgICAgICAgaWYgKCEocCBpbiBhKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbkEgbWFyayBpcyBhIHBpZWNlIG9mIGluZm9ybWF0aW9uIHRoYXQgY2FuIGJlIGF0dGFjaGVkIHRvIGEgbm9kZSxcbnN1Y2ggYXMgaXQgYmVpbmcgZW1waGFzaXplZCwgaW4gY29kZSBmb250LCBvciBhIGxpbmsuIEl0IGhhcyBhXG50eXBlIGFuZCBvcHRpb25hbGx5IGEgc2V0IG9mIGF0dHJpYnV0ZXMgdGhhdCBwcm92aWRlIGZ1cnRoZXJcbmluZm9ybWF0aW9uIChzdWNoIGFzIHRoZSB0YXJnZXQgb2YgdGhlIGxpbmspLiBNYXJrcyBhcmUgY3JlYXRlZFxudGhyb3VnaCBhIGBTY2hlbWFgLCB3aGljaCBjb250cm9scyB3aGljaCB0eXBlcyBleGlzdCBhbmQgd2hpY2hcbmF0dHJpYnV0ZXMgdGhleSBoYXZlLlxuKi9cbmNsYXNzIE1hcmsge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHR5cGUgb2YgdGhpcyBtYXJrLlxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgVGhlIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFyay5cbiAgICAqL1xuICAgIGF0dHJzKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgICB9XG4gICAgLyoqXG4gICAgR2l2ZW4gYSBzZXQgb2YgbWFya3MsIGNyZWF0ZSBhIG5ldyBzZXQgd2hpY2ggY29udGFpbnMgdGhpcyBvbmUgYXNcbiAgICB3ZWxsLCBpbiB0aGUgcmlnaHQgcG9zaXRpb24uIElmIHRoaXMgbWFyayBpcyBhbHJlYWR5IGluIHRoZSBzZXQsXG4gICAgdGhlIHNldCBpdHNlbGYgaXMgcmV0dXJuZWQuIElmIGFueSBtYXJrcyB0aGF0IGFyZSBzZXQgdG8gYmVcbiAgICBbZXhjbHVzaXZlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTWFya1NwZWMuZXhjbHVkZXMpIHdpdGggdGhpcyBtYXJrIGFyZSBwcmVzZW50LFxuICAgIHRob3NlIGFyZSByZXBsYWNlZCBieSB0aGlzIG9uZS5cbiAgICAqL1xuICAgIGFkZFRvU2V0KHNldCkge1xuICAgICAgICBsZXQgY29weSwgcGxhY2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgb3RoZXIgPSBzZXRbaV07XG4gICAgICAgICAgICBpZiAodGhpcy5lcShvdGhlcikpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldDtcbiAgICAgICAgICAgIGlmICh0aGlzLnR5cGUuZXhjbHVkZXMob3RoZXIudHlwZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvcHkpXG4gICAgICAgICAgICAgICAgICAgIGNvcHkgPSBzZXQuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdGhlci50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwbGFjZWQgJiYgb3RoZXIudHlwZS5yYW5rID4gdGhpcy50eXBlLnJhbmspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weSA9IHNldC5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgY29weS5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29weSlcbiAgICAgICAgICAgICAgICAgICAgY29weS5wdXNoKG90aGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvcHkpXG4gICAgICAgICAgICBjb3B5ID0gc2V0LnNsaWNlKCk7XG4gICAgICAgIGlmICghcGxhY2VkKVxuICAgICAgICAgICAgY29weS5wdXNoKHRoaXMpO1xuICAgICAgICByZXR1cm4gY29weTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlIHRoaXMgbWFyayBmcm9tIHRoZSBnaXZlbiBzZXQsIHJldHVybmluZyBhIG5ldyBzZXQuIElmIHRoaXNcbiAgICBtYXJrIGlzIG5vdCBpbiB0aGUgc2V0LCB0aGUgc2V0IGl0c2VsZiBpcyByZXR1cm5lZC5cbiAgICAqL1xuICAgIHJlbW92ZUZyb21TZXQoc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHRoaXMuZXEoc2V0W2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0LnNsaWNlKDAsIGkpLmNvbmNhdChzZXQuc2xpY2UoaSArIDEpKTtcbiAgICAgICAgcmV0dXJuIHNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoaXMgbWFyayBpcyBpbiB0aGUgZ2l2ZW4gc2V0IG9mIG1hcmtzLlxuICAgICovXG4gICAgaXNJblNldChzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAodGhpcy5lcShzZXRbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0aGlzIG1hcmsgaGFzIHRoZSBzYW1lIHR5cGUgYW5kIGF0dHJpYnV0ZXMgYXNcbiAgICBhbm90aGVyIG1hcmsuXG4gICAgKi9cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcyA9PSBvdGhlciB8fFxuICAgICAgICAgICAgKHRoaXMudHlwZSA9PSBvdGhlci50eXBlICYmIGNvbXBhcmVEZWVwKHRoaXMuYXR0cnMsIG90aGVyLmF0dHJzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgdGhpcyBtYXJrIHRvIGEgSlNPTi1zZXJpYWxpemVhYmxlIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgb2JqID0geyB0eXBlOiB0aGlzLnR5cGUubmFtZSB9O1xuICAgICAgICBmb3IgKGxldCBfIGluIHRoaXMuYXR0cnMpIHtcbiAgICAgICAgICAgIG9iai5hdHRycyA9IHRoaXMuYXR0cnM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIG1hcmsgZnJvbSBKU09OLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAoIWpzb24pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT05cIik7XG4gICAgICAgIGxldCB0eXBlID0gc2NoZW1hLm1hcmtzW2pzb24udHlwZV07XG4gICAgICAgIGlmICghdHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBUaGVyZSBpcyBubyBtYXJrIHR5cGUgJHtqc29uLnR5cGV9IGluIHRoaXMgc2NoZW1hYCk7XG4gICAgICAgIHJldHVybiB0eXBlLmNyZWF0ZShqc29uLmF0dHJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHR3byBzZXRzIG9mIG1hcmtzIGFyZSBpZGVudGljYWwuXG4gICAgKi9cbiAgICBzdGF0aWMgc2FtZVNldChhLCBiKSB7XG4gICAgICAgIGlmIChhID09IGIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWFbaV0uZXEoYltpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcHJvcGVybHkgc29ydGVkIG1hcmsgc2V0IGZyb20gbnVsbCwgYSBzaW5nbGUgbWFyaywgb3IgYW5cbiAgICB1bnNvcnRlZCBhcnJheSBvZiBtYXJrcy5cbiAgICAqL1xuICAgIHN0YXRpYyBzZXRGcm9tKG1hcmtzKSB7XG4gICAgICAgIGlmICghbWFya3MgfHwgQXJyYXkuaXNBcnJheShtYXJrcykgJiYgbWFya3MubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4gTWFyay5ub25lO1xuICAgICAgICBpZiAobWFya3MgaW5zdGFuY2VvZiBNYXJrKVxuICAgICAgICAgICAgcmV0dXJuIFttYXJrc107XG4gICAgICAgIGxldCBjb3B5ID0gbWFya3Muc2xpY2UoKTtcbiAgICAgICAgY29weS5zb3J0KChhLCBiKSA9PiBhLnR5cGUucmFuayAtIGIudHlwZS5yYW5rKTtcbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIG1hcmtzLlxuKi9cbk1hcmsubm9uZSA9IFtdO1xuXG4vKipcbkVycm9yIHR5cGUgcmFpc2VkIGJ5IFtgTm9kZS5yZXBsYWNlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGUucmVwbGFjZSkgd2hlblxuZ2l2ZW4gYW4gaW52YWxpZCByZXBsYWNlbWVudC5cbiovXG5jbGFzcyBSZXBsYWNlRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKlxuUmVwbGFjZUVycm9yID0gZnVuY3Rpb24odGhpczogYW55LCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgbGV0IGVyciA9IEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSlcbiAgOyhlcnIgYXMgYW55KS5fX3Byb3RvX18gPSBSZXBsYWNlRXJyb3IucHJvdG90eXBlXG4gIHJldHVybiBlcnJcbn0gYXMgYW55XG5cblJlcGxhY2VFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSlcblJlcGxhY2VFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSZXBsYWNlRXJyb3JcblJlcGxhY2VFcnJvci5wcm90b3R5cGUubmFtZSA9IFwiUmVwbGFjZUVycm9yXCJcbiovXG4vKipcbkEgc2xpY2UgcmVwcmVzZW50cyBhIHBpZWNlIGN1dCBvdXQgb2YgYSBsYXJnZXIgZG9jdW1lbnQuIEl0XG5zdG9yZXMgbm90IG9ubHkgYSBmcmFnbWVudCwgYnV0IGFsc28gdGhlIGRlcHRoIHVwIHRvIHdoaWNoIG5vZGVzIG9uXG5ib3RoIHNpZGUgYXJlIOKAmG9wZW7igJkgKGN1dCB0aHJvdWdoKS5cbiovXG5jbGFzcyBTbGljZSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2xpY2UuIFdoZW4gc3BlY2lmeWluZyBhIG5vbi16ZXJvIG9wZW4gZGVwdGgsIHlvdSBtdXN0XG4gICAgbWFrZSBzdXJlIHRoYXQgdGhlcmUgYXJlIG5vZGVzIG9mIGF0IGxlYXN0IHRoYXQgZGVwdGggYXQgdGhlXG4gICAgYXBwcm9wcmlhdGUgc2lkZSBvZiB0aGUgZnJhZ21lbnTigJRpLmUuIGlmIHRoZSBmcmFnbWVudCBpcyBhblxuICAgIGVtcHR5IHBhcmFncmFwaCBub2RlLCBgb3BlblN0YXJ0YCBhbmQgYG9wZW5FbmRgIGNhbid0IGJlIGdyZWF0ZXJcbiAgICB0aGFuIDEuXG4gICAgXG4gICAgSXQgaXMgbm90IG5lY2Vzc2FyeSBmb3IgdGhlIGNvbnRlbnQgb2Ygb3BlbiBub2RlcyB0byBjb25mb3JtIHRvXG4gICAgdGhlIHNjaGVtYSdzIGNvbnRlbnQgY29uc3RyYWludHMsIHRob3VnaCBpdCBzaG91bGQgYmUgYSB2YWxpZFxuICAgIHN0YXJ0L2VuZC9taWRkbGUgZm9yIHN1Y2ggYSBub2RlLCBkZXBlbmRpbmcgb24gd2hpY2ggc2lkZXMgYXJlXG4gICAgb3Blbi5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzbGljZSdzIGNvbnRlbnQuXG4gICAgKi9cbiAgICBjb250ZW50LCBcbiAgICAvKipcbiAgICBUaGUgb3BlbiBkZXB0aCBhdCB0aGUgc3RhcnQgb2YgdGhlIGZyYWdtZW50LlxuICAgICovXG4gICAgb3BlblN0YXJ0LCBcbiAgICAvKipcbiAgICBUaGUgb3BlbiBkZXB0aCBhdCB0aGUgZW5kLlxuICAgICovXG4gICAgb3BlbkVuZCkge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB0aGlzLm9wZW5TdGFydCA9IG9wZW5TdGFydDtcbiAgICAgICAgdGhpcy5vcGVuRW5kID0gb3BlbkVuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHNpemUgdGhpcyBzbGljZSB3b3VsZCBhZGQgd2hlbiBpbnNlcnRlZCBpbnRvIGEgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5zaXplIC0gdGhpcy5vcGVuU3RhcnQgLSB0aGlzLm9wZW5FbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgaW5zZXJ0QXQocG9zLCBmcmFnbWVudCkge1xuICAgICAgICBsZXQgY29udGVudCA9IGluc2VydEludG8odGhpcy5jb250ZW50LCBwb3MgKyB0aGlzLm9wZW5TdGFydCwgZnJhZ21lbnQpO1xuICAgICAgICByZXR1cm4gY29udGVudCAmJiBuZXcgU2xpY2UoY29udGVudCwgdGhpcy5vcGVuU3RhcnQsIHRoaXMub3BlbkVuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVtb3ZlQmV0d2Vlbihmcm9tLCB0bykge1xuICAgICAgICByZXR1cm4gbmV3IFNsaWNlKHJlbW92ZVJhbmdlKHRoaXMuY29udGVudCwgZnJvbSArIHRoaXMub3BlblN0YXJ0LCB0byArIHRoaXMub3BlblN0YXJ0KSwgdGhpcy5vcGVuU3RhcnQsIHRoaXMub3BlbkVuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3RzIHdoZXRoZXIgdGhpcyBzbGljZSBpcyBlcXVhbCB0byBhbm90aGVyIHNsaWNlLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5lcShvdGhlci5jb250ZW50KSAmJiB0aGlzLm9wZW5TdGFydCA9PSBvdGhlci5vcGVuU3RhcnQgJiYgdGhpcy5vcGVuRW5kID09IG90aGVyLm9wZW5FbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQgKyBcIihcIiArIHRoaXMub3BlblN0YXJ0ICsgXCIsXCIgKyB0aGlzLm9wZW5FbmQgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29udmVydCBhIHNsaWNlIHRvIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250ZW50LnNpemUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGpzb24gPSB7IGNvbnRlbnQ6IHRoaXMuY29udGVudC50b0pTT04oKSB9O1xuICAgICAgICBpZiAodGhpcy5vcGVuU3RhcnQgPiAwKVxuICAgICAgICAgICAganNvbi5vcGVuU3RhcnQgPSB0aGlzLm9wZW5TdGFydDtcbiAgICAgICAgaWYgKHRoaXMub3BlbkVuZCA+IDApXG4gICAgICAgICAgICBqc29uLm9wZW5FbmQgPSB0aGlzLm9wZW5FbmQ7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIHNsaWNlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbilcbiAgICAgICAgICAgIHJldHVybiBTbGljZS5lbXB0eTtcbiAgICAgICAgbGV0IG9wZW5TdGFydCA9IGpzb24ub3BlblN0YXJ0IHx8IDAsIG9wZW5FbmQgPSBqc29uLm9wZW5FbmQgfHwgMDtcbiAgICAgICAgaWYgKHR5cGVvZiBvcGVuU3RhcnQgIT0gXCJudW1iZXJcIiB8fCB0eXBlb2Ygb3BlbkVuZCAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTlwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTbGljZShGcmFnbWVudC5mcm9tSlNPTihzY2hlbWEsIGpzb24uY29udGVudCksIG9wZW5TdGFydCwgb3BlbkVuZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNsaWNlIGZyb20gYSBmcmFnbWVudCBieSB0YWtpbmcgdGhlIG1heGltdW0gcG9zc2libGVcbiAgICBvcGVuIHZhbHVlIG9uIGJvdGggc2lkZSBvZiB0aGUgZnJhZ21lbnQuXG4gICAgKi9cbiAgICBzdGF0aWMgbWF4T3BlbihmcmFnbWVudCwgb3Blbklzb2xhdGluZyA9IHRydWUpIHtcbiAgICAgICAgbGV0IG9wZW5TdGFydCA9IDAsIG9wZW5FbmQgPSAwO1xuICAgICAgICBmb3IgKGxldCBuID0gZnJhZ21lbnQuZmlyc3RDaGlsZDsgbiAmJiAhbi5pc0xlYWYgJiYgKG9wZW5Jc29sYXRpbmcgfHwgIW4udHlwZS5zcGVjLmlzb2xhdGluZyk7IG4gPSBuLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICBvcGVuU3RhcnQrKztcbiAgICAgICAgZm9yIChsZXQgbiA9IGZyYWdtZW50Lmxhc3RDaGlsZDsgbiAmJiAhbi5pc0xlYWYgJiYgKG9wZW5Jc29sYXRpbmcgfHwgIW4udHlwZS5zcGVjLmlzb2xhdGluZyk7IG4gPSBuLmxhc3RDaGlsZClcbiAgICAgICAgICAgIG9wZW5FbmQrKztcbiAgICAgICAgcmV0dXJuIG5ldyBTbGljZShmcmFnbWVudCwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICB9XG59XG4vKipcblRoZSBlbXB0eSBzbGljZS5cbiovXG5TbGljZS5lbXB0eSA9IG5ldyBTbGljZShGcmFnbWVudC5lbXB0eSwgMCwgMCk7XG5mdW5jdGlvbiByZW1vdmVSYW5nZShjb250ZW50LCBmcm9tLCB0bykge1xuICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IGNvbnRlbnQuZmluZEluZGV4KGZyb20pLCBjaGlsZCA9IGNvbnRlbnQubWF5YmVDaGlsZChpbmRleCk7XG4gICAgbGV0IHsgaW5kZXg6IGluZGV4VG8sIG9mZnNldDogb2Zmc2V0VG8gfSA9IGNvbnRlbnQuZmluZEluZGV4KHRvKTtcbiAgICBpZiAob2Zmc2V0ID09IGZyb20gfHwgY2hpbGQuaXNUZXh0KSB7XG4gICAgICAgIGlmIChvZmZzZXRUbyAhPSB0byAmJiAhY29udGVudC5jaGlsZChpbmRleFRvKS5pc1RleHQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlXCIpO1xuICAgICAgICByZXR1cm4gY29udGVudC5jdXQoMCwgZnJvbSkuYXBwZW5kKGNvbnRlbnQuY3V0KHRvKSk7XG4gICAgfVxuICAgIGlmIChpbmRleCAhPSBpbmRleFRvKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlXCIpO1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VDaGlsZChpbmRleCwgY2hpbGQuY29weShyZW1vdmVSYW5nZShjaGlsZC5jb250ZW50LCBmcm9tIC0gb2Zmc2V0IC0gMSwgdG8gLSBvZmZzZXQgLSAxKSkpO1xufVxuZnVuY3Rpb24gaW5zZXJ0SW50byhjb250ZW50LCBkaXN0LCBpbnNlcnQsIHBhcmVudCkge1xuICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IGNvbnRlbnQuZmluZEluZGV4KGRpc3QpLCBjaGlsZCA9IGNvbnRlbnQubWF5YmVDaGlsZChpbmRleCk7XG4gICAgaWYgKG9mZnNldCA9PSBkaXN0IHx8IGNoaWxkLmlzVGV4dCkge1xuICAgICAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuY2FuUmVwbGFjZShpbmRleCwgaW5kZXgsIGluc2VydCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuY3V0KDAsIGRpc3QpLmFwcGVuZChpbnNlcnQpLmFwcGVuZChjb250ZW50LmN1dChkaXN0KSk7XG4gICAgfVxuICAgIGxldCBpbm5lciA9IGluc2VydEludG8oY2hpbGQuY29udGVudCwgZGlzdCAtIG9mZnNldCAtIDEsIGluc2VydCk7XG4gICAgcmV0dXJuIGlubmVyICYmIGNvbnRlbnQucmVwbGFjZUNoaWxkKGluZGV4LCBjaGlsZC5jb3B5KGlubmVyKSk7XG59XG5mdW5jdGlvbiByZXBsYWNlKCRmcm9tLCAkdG8sIHNsaWNlKSB7XG4gICAgaWYgKHNsaWNlLm9wZW5TdGFydCA+ICRmcm9tLmRlcHRoKVxuICAgICAgICB0aHJvdyBuZXcgUmVwbGFjZUVycm9yKFwiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb25cIik7XG4gICAgaWYgKCRmcm9tLmRlcHRoIC0gc2xpY2Uub3BlblN0YXJ0ICE9ICR0by5kZXB0aCAtIHNsaWNlLm9wZW5FbmQpXG4gICAgICAgIHRocm93IG5ldyBSZXBsYWNlRXJyb3IoXCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHNcIik7XG4gICAgcmV0dXJuIHJlcGxhY2VPdXRlcigkZnJvbSwgJHRvLCBzbGljZSwgMCk7XG59XG5mdW5jdGlvbiByZXBsYWNlT3V0ZXIoJGZyb20sICR0bywgc2xpY2UsIGRlcHRoKSB7XG4gICAgbGV0IGluZGV4ID0gJGZyb20uaW5kZXgoZGVwdGgpLCBub2RlID0gJGZyb20ubm9kZShkZXB0aCk7XG4gICAgaWYgKGluZGV4ID09ICR0by5pbmRleChkZXB0aCkgJiYgZGVwdGggPCAkZnJvbS5kZXB0aCAtIHNsaWNlLm9wZW5TdGFydCkge1xuICAgICAgICBsZXQgaW5uZXIgPSByZXBsYWNlT3V0ZXIoJGZyb20sICR0bywgc2xpY2UsIGRlcHRoICsgMSk7XG4gICAgICAgIHJldHVybiBub2RlLmNvcHkobm9kZS5jb250ZW50LnJlcGxhY2VDaGlsZChpbmRleCwgaW5uZXIpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXNsaWNlLmNvbnRlbnQuc2l6ZSkge1xuICAgICAgICByZXR1cm4gY2xvc2Uobm9kZSwgcmVwbGFjZVR3b1dheSgkZnJvbSwgJHRvLCBkZXB0aCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICghc2xpY2Uub3BlblN0YXJ0ICYmICFzbGljZS5vcGVuRW5kICYmICRmcm9tLmRlcHRoID09IGRlcHRoICYmICR0by5kZXB0aCA9PSBkZXB0aCkgeyAvLyBTaW1wbGUsIGZsYXQgY2FzZVxuICAgICAgICBsZXQgcGFyZW50ID0gJGZyb20ucGFyZW50LCBjb250ZW50ID0gcGFyZW50LmNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBjbG9zZShwYXJlbnQsIGNvbnRlbnQuY3V0KDAsICRmcm9tLnBhcmVudE9mZnNldCkuYXBwZW5kKHNsaWNlLmNvbnRlbnQpLmFwcGVuZChjb250ZW50LmN1dCgkdG8ucGFyZW50T2Zmc2V0KSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IHsgc3RhcnQsIGVuZCB9ID0gcHJlcGFyZVNsaWNlRm9yUmVwbGFjZShzbGljZSwgJGZyb20pO1xuICAgICAgICByZXR1cm4gY2xvc2Uobm9kZSwgcmVwbGFjZVRocmVlV2F5KCRmcm9tLCBzdGFydCwgZW5kLCAkdG8sIGRlcHRoKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tKb2luKG1haW4sIHN1Yikge1xuICAgIGlmICghc3ViLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQobWFpbi50eXBlKSlcbiAgICAgICAgdGhyb3cgbmV3IFJlcGxhY2VFcnJvcihcIkNhbm5vdCBqb2luIFwiICsgc3ViLnR5cGUubmFtZSArIFwiIG9udG8gXCIgKyBtYWluLnR5cGUubmFtZSk7XG59XG5mdW5jdGlvbiBqb2luYWJsZSgkYmVmb3JlLCAkYWZ0ZXIsIGRlcHRoKSB7XG4gICAgbGV0IG5vZGUgPSAkYmVmb3JlLm5vZGUoZGVwdGgpO1xuICAgIGNoZWNrSm9pbihub2RlLCAkYWZ0ZXIubm9kZShkZXB0aCkpO1xuICAgIHJldHVybiBub2RlO1xufVxuZnVuY3Rpb24gYWRkTm9kZShjaGlsZCwgdGFyZ2V0KSB7XG4gICAgbGV0IGxhc3QgPSB0YXJnZXQubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA+PSAwICYmIGNoaWxkLmlzVGV4dCAmJiBjaGlsZC5zYW1lTWFya3VwKHRhcmdldFtsYXN0XSkpXG4gICAgICAgIHRhcmdldFtsYXN0XSA9IGNoaWxkLndpdGhUZXh0KHRhcmdldFtsYXN0XS50ZXh0ICsgY2hpbGQudGV4dCk7XG4gICAgZWxzZVxuICAgICAgICB0YXJnZXQucHVzaChjaGlsZCk7XG59XG5mdW5jdGlvbiBhZGRSYW5nZSgkc3RhcnQsICRlbmQsIGRlcHRoLCB0YXJnZXQpIHtcbiAgICBsZXQgbm9kZSA9ICgkZW5kIHx8ICRzdGFydCkubm9kZShkZXB0aCk7XG4gICAgbGV0IHN0YXJ0SW5kZXggPSAwLCBlbmRJbmRleCA9ICRlbmQgPyAkZW5kLmluZGV4KGRlcHRoKSA6IG5vZGUuY2hpbGRDb3VudDtcbiAgICBpZiAoJHN0YXJ0KSB7XG4gICAgICAgIHN0YXJ0SW5kZXggPSAkc3RhcnQuaW5kZXgoZGVwdGgpO1xuICAgICAgICBpZiAoJHN0YXJ0LmRlcHRoID4gZGVwdGgpIHtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgkc3RhcnQudGV4dE9mZnNldCkge1xuICAgICAgICAgICAgYWRkTm9kZSgkc3RhcnQubm9kZUFmdGVyLCB0YXJnZXQpO1xuICAgICAgICAgICAgc3RhcnRJbmRleCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgZW5kSW5kZXg7IGkrKylcbiAgICAgICAgYWRkTm9kZShub2RlLmNoaWxkKGkpLCB0YXJnZXQpO1xuICAgIGlmICgkZW5kICYmICRlbmQuZGVwdGggPT0gZGVwdGggJiYgJGVuZC50ZXh0T2Zmc2V0KVxuICAgICAgICBhZGROb2RlKCRlbmQubm9kZUJlZm9yZSwgdGFyZ2V0KTtcbn1cbmZ1bmN0aW9uIGNsb3NlKG5vZGUsIGNvbnRlbnQpIHtcbiAgICBub2RlLnR5cGUuY2hlY2tDb250ZW50KGNvbnRlbnQpO1xuICAgIHJldHVybiBub2RlLmNvcHkoY29udGVudCk7XG59XG5mdW5jdGlvbiByZXBsYWNlVGhyZWVXYXkoJGZyb20sICRzdGFydCwgJGVuZCwgJHRvLCBkZXB0aCkge1xuICAgIGxldCBvcGVuU3RhcnQgPSAkZnJvbS5kZXB0aCA+IGRlcHRoICYmIGpvaW5hYmxlKCRmcm9tLCAkc3RhcnQsIGRlcHRoICsgMSk7XG4gICAgbGV0IG9wZW5FbmQgPSAkdG8uZGVwdGggPiBkZXB0aCAmJiBqb2luYWJsZSgkZW5kLCAkdG8sIGRlcHRoICsgMSk7XG4gICAgbGV0IGNvbnRlbnQgPSBbXTtcbiAgICBhZGRSYW5nZShudWxsLCAkZnJvbSwgZGVwdGgsIGNvbnRlbnQpO1xuICAgIGlmIChvcGVuU3RhcnQgJiYgb3BlbkVuZCAmJiAkc3RhcnQuaW5kZXgoZGVwdGgpID09ICRlbmQuaW5kZXgoZGVwdGgpKSB7XG4gICAgICAgIGNoZWNrSm9pbihvcGVuU3RhcnQsIG9wZW5FbmQpO1xuICAgICAgICBhZGROb2RlKGNsb3NlKG9wZW5TdGFydCwgcmVwbGFjZVRocmVlV2F5KCRmcm9tLCAkc3RhcnQsICRlbmQsICR0bywgZGVwdGggKyAxKSksIGNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9wZW5TdGFydClcbiAgICAgICAgICAgIGFkZE5vZGUoY2xvc2Uob3BlblN0YXJ0LCByZXBsYWNlVHdvV2F5KCRmcm9tLCAkc3RhcnQsIGRlcHRoICsgMSkpLCBjb250ZW50KTtcbiAgICAgICAgYWRkUmFuZ2UoJHN0YXJ0LCAkZW5kLCBkZXB0aCwgY29udGVudCk7XG4gICAgICAgIGlmIChvcGVuRW5kKVxuICAgICAgICAgICAgYWRkTm9kZShjbG9zZShvcGVuRW5kLCByZXBsYWNlVHdvV2F5KCRlbmQsICR0bywgZGVwdGggKyAxKSksIGNvbnRlbnQpO1xuICAgIH1cbiAgICBhZGRSYW5nZSgkdG8sIG51bGwsIGRlcHRoLCBjb250ZW50KTtcbiAgICByZXR1cm4gbmV3IEZyYWdtZW50KGNvbnRlbnQpO1xufVxuZnVuY3Rpb24gcmVwbGFjZVR3b1dheSgkZnJvbSwgJHRvLCBkZXB0aCkge1xuICAgIGxldCBjb250ZW50ID0gW107XG4gICAgYWRkUmFuZ2UobnVsbCwgJGZyb20sIGRlcHRoLCBjb250ZW50KTtcbiAgICBpZiAoJGZyb20uZGVwdGggPiBkZXB0aCkge1xuICAgICAgICBsZXQgdHlwZSA9IGpvaW5hYmxlKCRmcm9tLCAkdG8sIGRlcHRoICsgMSk7XG4gICAgICAgIGFkZE5vZGUoY2xvc2UodHlwZSwgcmVwbGFjZVR3b1dheSgkZnJvbSwgJHRvLCBkZXB0aCArIDEpKSwgY29udGVudCk7XG4gICAgfVxuICAgIGFkZFJhbmdlKCR0bywgbnVsbCwgZGVwdGgsIGNvbnRlbnQpO1xuICAgIHJldHVybiBuZXcgRnJhZ21lbnQoY29udGVudCk7XG59XG5mdW5jdGlvbiBwcmVwYXJlU2xpY2VGb3JSZXBsYWNlKHNsaWNlLCAkYWxvbmcpIHtcbiAgICBsZXQgZXh0cmEgPSAkYWxvbmcuZGVwdGggLSBzbGljZS5vcGVuU3RhcnQsIHBhcmVudCA9ICRhbG9uZy5ub2RlKGV4dHJhKTtcbiAgICBsZXQgbm9kZSA9IHBhcmVudC5jb3B5KHNsaWNlLmNvbnRlbnQpO1xuICAgIGZvciAobGV0IGkgPSBleHRyYSAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBub2RlID0gJGFsb25nLm5vZGUoaSkuY29weShGcmFnbWVudC5mcm9tKG5vZGUpKTtcbiAgICByZXR1cm4geyBzdGFydDogbm9kZS5yZXNvbHZlTm9DYWNoZShzbGljZS5vcGVuU3RhcnQgKyBleHRyYSksXG4gICAgICAgIGVuZDogbm9kZS5yZXNvbHZlTm9DYWNoZShub2RlLmNvbnRlbnQuc2l6ZSAtIHNsaWNlLm9wZW5FbmQgLSBleHRyYSkgfTtcbn1cblxuLyoqXG5Zb3UgY2FuIFtfcmVzb2x2ZV9dKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnJlc29sdmUpIGEgcG9zaXRpb24gdG8gZ2V0IG1vcmVcbmluZm9ybWF0aW9uIGFib3V0IGl0LiBPYmplY3RzIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50IHN1Y2ggYVxucmVzb2x2ZWQgcG9zaXRpb24sIHByb3ZpZGluZyB2YXJpb3VzIHBpZWNlcyBvZiBjb250ZXh0XG5pbmZvcm1hdGlvbiwgYW5kIHNvbWUgaGVscGVyIG1ldGhvZHMuXG5cblRocm91Z2hvdXQgdGhpcyBpbnRlcmZhY2UsIG1ldGhvZHMgdGhhdCB0YWtlIGFuIG9wdGlvbmFsIGBkZXB0aGBcbnBhcmFtZXRlciB3aWxsIGludGVycHJldCB1bmRlZmluZWQgYXMgYHRoaXMuZGVwdGhgIGFuZCBuZWdhdGl2ZVxubnVtYmVycyBhcyBgdGhpcy5kZXB0aCArIHZhbHVlYC5cbiovXG5jbGFzcyBSZXNvbHZlZFBvcyB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gdGhhdCB3YXMgcmVzb2x2ZWQuXG4gICAgKi9cbiAgICBwb3MsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcGF0aCwgXG4gICAgLyoqXG4gICAgVGhlIG9mZnNldCB0aGlzIHBvc2l0aW9uIGhhcyBpbnRvIGl0cyBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIHBhcmVudE9mZnNldCkge1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5wYXJlbnRPZmZzZXQgPSBwYXJlbnRPZmZzZXQ7XG4gICAgICAgIHRoaXMuZGVwdGggPSBwYXRoLmxlbmd0aCAvIDMgLSAxO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc29sdmVEZXB0aCh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGg7XG4gICAgICAgIGlmICh2YWwgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGggKyB2YWw7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBwYXJlbnQgbm9kZSB0aGF0IHRoZSBwb3NpdGlvbiBwb2ludHMgaW50by4gTm90ZSB0aGF0IGV2ZW4gaWZcbiAgICBhIHBvc2l0aW9uIHBvaW50cyBpbnRvIGEgdGV4dCBub2RlLCB0aGF0IG5vZGUgaXMgbm90IGNvbnNpZGVyZWRcbiAgICB0aGUgcGFyZW504oCUdGV4dCBub2RlcyBhcmUg4oCYZmxhdOKAmSBpbiB0aGlzIG1vZGVsLCBhbmQgaGF2ZSBubyBjb250ZW50LlxuICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHsgcmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKTsgfVxuICAgIC8qKlxuICAgIFRoZSByb290IG5vZGUgaW4gd2hpY2ggdGhlIHBvc2l0aW9uIHdhcyByZXNvbHZlZC5cbiAgICAqL1xuICAgIGdldCBkb2MoKSB7IHJldHVybiB0aGlzLm5vZGUoMCk7IH1cbiAgICAvKipcbiAgICBUaGUgYW5jZXN0b3Igbm9kZSBhdCB0aGUgZ2l2ZW4gbGV2ZWwuIGBwLm5vZGUocC5kZXB0aClgIGlzIHRoZVxuICAgIHNhbWUgYXMgYHAucGFyZW50YC5cbiAgICAqL1xuICAgIG5vZGUoZGVwdGgpIHsgcmV0dXJuIHRoaXMucGF0aFt0aGlzLnJlc29sdmVEZXB0aChkZXB0aCkgKiAzXTsgfVxuICAgIC8qKlxuICAgIFRoZSBpbmRleCBpbnRvIHRoZSBhbmNlc3RvciBhdCB0aGUgZ2l2ZW4gbGV2ZWwuIElmIHRoaXMgcG9pbnRzXG4gICAgYXQgdGhlIDNyZCBub2RlIGluIHRoZSAybmQgcGFyYWdyYXBoIG9uIHRoZSB0b3AgbGV2ZWwsIGZvclxuICAgIGV4YW1wbGUsIGBwLmluZGV4KDApYCBpcyAxIGFuZCBgcC5pbmRleCgxKWAgaXMgMi5cbiAgICAqL1xuICAgIGluZGV4KGRlcHRoKSB7IHJldHVybiB0aGlzLnBhdGhbdGhpcy5yZXNvbHZlRGVwdGgoZGVwdGgpICogMyArIDFdOyB9XG4gICAgLyoqXG4gICAgVGhlIGluZGV4IHBvaW50aW5nIGFmdGVyIHRoaXMgcG9zaXRpb24gaW50byB0aGUgYW5jZXN0b3IgYXQgdGhlXG4gICAgZ2l2ZW4gbGV2ZWwuXG4gICAgKi9cbiAgICBpbmRleEFmdGVyKGRlcHRoKSB7XG4gICAgICAgIGRlcHRoID0gdGhpcy5yZXNvbHZlRGVwdGgoZGVwdGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleChkZXB0aCkgKyAoZGVwdGggPT0gdGhpcy5kZXB0aCAmJiAhdGhpcy50ZXh0T2Zmc2V0ID8gMCA6IDEpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgKGFic29sdXRlKSBwb3NpdGlvbiBhdCB0aGUgc3RhcnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuXG4gICAgbGV2ZWwuXG4gICAgKi9cbiAgICBzdGFydChkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIGRlcHRoID09IDAgPyAwIDogdGhpcy5wYXRoW2RlcHRoICogMyAtIDFdICsgMTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIChhYnNvbHV0ZSkgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW5cbiAgICBsZXZlbC5cbiAgICAqL1xuICAgIGVuZChkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoZGVwdGgpICsgdGhpcy5ub2RlKGRlcHRoKS5jb250ZW50LnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSAoYWJzb2x1dGUpIHBvc2l0aW9uIGRpcmVjdGx5IGJlZm9yZSB0aGUgd3JhcHBpbmcgbm9kZSBhdCB0aGVcbiAgICBnaXZlbiBsZXZlbCwgb3IsIHdoZW4gYGRlcHRoYCBpcyBgdGhpcy5kZXB0aCArIDFgLCB0aGUgb3JpZ2luYWxcbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGJlZm9yZShkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZVwiKTtcbiAgICAgICAgcmV0dXJuIGRlcHRoID09IHRoaXMuZGVwdGggKyAxID8gdGhpcy5wb3MgOiB0aGlzLnBhdGhbZGVwdGggKiAzIC0gMV07XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSAoYWJzb2x1dGUpIHBvc2l0aW9uIGRpcmVjdGx5IGFmdGVyIHRoZSB3cmFwcGluZyBub2RlIGF0IHRoZVxuICAgIGdpdmVuIGxldmVsLCBvciB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2hlbiBgZGVwdGhgIGlzIGB0aGlzLmRlcHRoICsgMWAuXG4gICAgKi9cbiAgICBhZnRlcihkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlXCIpO1xuICAgICAgICByZXR1cm4gZGVwdGggPT0gdGhpcy5kZXB0aCArIDEgPyB0aGlzLnBvcyA6IHRoaXMucGF0aFtkZXB0aCAqIDMgLSAxXSArIHRoaXMucGF0aFtkZXB0aCAqIDNdLm5vZGVTaXplO1xuICAgIH1cbiAgICAvKipcbiAgICBXaGVuIHRoaXMgcG9zaXRpb24gcG9pbnRzIGludG8gYSB0ZXh0IG5vZGUsIHRoaXMgcmV0dXJucyB0aGVcbiAgICBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb3NpdGlvbiBhbmQgdGhlIHN0YXJ0IG9mIHRoZSB0ZXh0IG5vZGUuXG4gICAgV2lsbCBiZSB6ZXJvIGZvciBwb3NpdGlvbnMgdGhhdCBwb2ludCBiZXR3ZWVuIG5vZGVzLlxuICAgICovXG4gICAgZ2V0IHRleHRPZmZzZXQoKSB7IHJldHVybiB0aGlzLnBvcyAtIHRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoIC0gMV07IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5vZGUgZGlyZWN0bHkgYWZ0ZXIgdGhlIHBvc2l0aW9uLCBpZiBhbnkuIElmIHRoZSBwb3NpdGlvblxuICAgIHBvaW50cyBpbnRvIGEgdGV4dCBub2RlLCBvbmx5IHRoZSBwYXJ0IG9mIHRoYXQgbm9kZSBhZnRlciB0aGVcbiAgICBwb3NpdGlvbiBpcyByZXR1cm5lZC5cbiAgICAqL1xuICAgIGdldCBub2RlQWZ0ZXIoKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudCwgaW5kZXggPSB0aGlzLmluZGV4KHRoaXMuZGVwdGgpO1xuICAgICAgICBpZiAoaW5kZXggPT0gcGFyZW50LmNoaWxkQ291bnQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGRPZmYgPSB0aGlzLnBvcyAtIHRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoIC0gMV0sIGNoaWxkID0gcGFyZW50LmNoaWxkKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIGRPZmYgPyBwYXJlbnQuY2hpbGQoaW5kZXgpLmN1dChkT2ZmKSA6IGNoaWxkO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5vZGUgZGlyZWN0bHkgYmVmb3JlIHRoZSBwb3NpdGlvbiwgaWYgYW55LiBJZiB0aGVcbiAgICBwb3NpdGlvbiBwb2ludHMgaW50byBhIHRleHQgbm9kZSwgb25seSB0aGUgcGFydCBvZiB0aGF0IG5vZGVcbiAgICBiZWZvcmUgdGhlIHBvc2l0aW9uIGlzIHJldHVybmVkLlxuICAgICovXG4gICAgZ2V0IG5vZGVCZWZvcmUoKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuaW5kZXgodGhpcy5kZXB0aCk7XG4gICAgICAgIGxldCBkT2ZmID0gdGhpcy5wb3MgLSB0aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZE9mZilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZChpbmRleCkuY3V0KDAsIGRPZmYpO1xuICAgICAgICByZXR1cm4gaW5kZXggPT0gMCA/IG51bGwgOiB0aGlzLnBhcmVudC5jaGlsZChpbmRleCAtIDEpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgcGFyZW50IG5vZGUgYXQgdGhlXG4gICAgZ2l2ZW4gZGVwdGggKHdoaWNoIGRlZmF1bHRzIHRvIGB0aGlzLmRlcHRoYCkuXG4gICAgKi9cbiAgICBwb3NBdEluZGV4KGluZGV4LCBkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnBhdGhbZGVwdGggKiAzXSwgcG9zID0gZGVwdGggPT0gMCA/IDAgOiB0aGlzLnBhdGhbZGVwdGggKiAzIC0gMV0gKyAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpKyspXG4gICAgICAgICAgICBwb3MgKz0gbm9kZS5jaGlsZChpKS5ub2RlU2l6ZTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBtYXJrcyBhdCB0aGlzIHBvc2l0aW9uLCBmYWN0b3JpbmcgaW4gdGhlIHN1cnJvdW5kaW5nXG4gICAgbWFya3MnIFtgaW5jbHVzaXZlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmtTcGVjLmluY2x1c2l2ZSkgcHJvcGVydHkuIElmIHRoZVxuICAgIHBvc2l0aW9uIGlzIGF0IHRoZSBzdGFydCBvZiBhIG5vbi1lbXB0eSBub2RlLCB0aGUgbWFya3Mgb2YgdGhlXG4gICAgbm9kZSBhZnRlciBpdCAoaWYgYW55KSBhcmUgcmV0dXJuZWQuXG4gICAgKi9cbiAgICBtYXJrcygpIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMucGFyZW50LCBpbmRleCA9IHRoaXMuaW5kZXgoKTtcbiAgICAgICAgLy8gSW4gYW4gZW1wdHkgcGFyZW50LCByZXR1cm4gdGhlIGVtcHR5IGFycmF5XG4gICAgICAgIGlmIChwYXJlbnQuY29udGVudC5zaXplID09IDApXG4gICAgICAgICAgICByZXR1cm4gTWFyay5ub25lO1xuICAgICAgICAvLyBXaGVuIGluc2lkZSBhIHRleHQgbm9kZSwganVzdCByZXR1cm4gdGhlIHRleHQgbm9kZSdzIG1hcmtzXG4gICAgICAgIGlmICh0aGlzLnRleHRPZmZzZXQpXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmNoaWxkKGluZGV4KS5tYXJrcztcbiAgICAgICAgbGV0IG1haW4gPSBwYXJlbnQubWF5YmVDaGlsZChpbmRleCAtIDEpLCBvdGhlciA9IHBhcmVudC5tYXliZUNoaWxkKGluZGV4KTtcbiAgICAgICAgLy8gSWYgdGhlIGBhZnRlcmAgZmxhZyBpcyB0cnVlIG9mIHRoZXJlIGlzIG5vIG5vZGUgYmVmb3JlLCBtYWtlXG4gICAgICAgIC8vIHRoZSBub2RlIGFmdGVyIHRoaXMgcG9zaXRpb24gdGhlIG1haW4gcmVmZXJlbmNlLlxuICAgICAgICBpZiAoIW1haW4pIHtcbiAgICAgICAgICAgIGxldCB0bXAgPSBtYWluO1xuICAgICAgICAgICAgbWFpbiA9IG90aGVyO1xuICAgICAgICAgICAgb3RoZXIgPSB0bXA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlIGFsbCBtYXJrcyBpbiB0aGUgbWFpbiBub2RlLCBleGNlcHQgdGhvc2UgdGhhdCBoYXZlXG4gICAgICAgIC8vIGBpbmNsdXNpdmVgIHNldCB0byBmYWxzZSBhbmQgYXJlIG5vdCBwcmVzZW50IGluIHRoZSBvdGhlciBub2RlLlxuICAgICAgICBsZXQgbWFya3MgPSBtYWluLm1hcmtzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKG1hcmtzW2ldLnR5cGUuc3BlYy5pbmNsdXNpdmUgPT09IGZhbHNlICYmICghb3RoZXIgfHwgIW1hcmtzW2ldLmlzSW5TZXQob3RoZXIubWFya3MpKSlcbiAgICAgICAgICAgICAgICBtYXJrcyA9IG1hcmtzW2ktLV0ucmVtb3ZlRnJvbVNldChtYXJrcyk7XG4gICAgICAgIHJldHVybiBtYXJrcztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBtYXJrcyBhZnRlciB0aGUgY3VycmVudCBwb3NpdGlvbiwgaWYgYW55LCBleGNlcHQgdGhvc2VcbiAgICB0aGF0IGFyZSBub24taW5jbHVzaXZlIGFuZCBub3QgcHJlc2VudCBhdCBwb3NpdGlvbiBgJGVuZGAuIFRoaXNcbiAgICBpcyBtb3N0bHkgdXNlZnVsIGZvciBnZXR0aW5nIHRoZSBzZXQgb2YgbWFya3MgdG8gcHJlc2VydmUgYWZ0ZXIgYVxuICAgIGRlbGV0aW9uLiBXaWxsIHJldHVybiBgbnVsbGAgaWYgdGhpcyBwb3NpdGlvbiBpcyBhdCB0aGUgZW5kIG9mXG4gICAgaXRzIHBhcmVudCBub2RlIG9yIGl0cyBwYXJlbnQgbm9kZSBpc24ndCBhIHRleHRibG9jayAoaW4gd2hpY2hcbiAgICBjYXNlIG5vIG1hcmtzIHNob3VsZCBiZSBwcmVzZXJ2ZWQpLlxuICAgICovXG4gICAgbWFya3NBY3Jvc3MoJGVuZCkge1xuICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7XG4gICAgICAgIGlmICghYWZ0ZXIgfHwgIWFmdGVyLmlzSW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBtYXJrcyA9IGFmdGVyLm1hcmtzLCBuZXh0ID0gJGVuZC5wYXJlbnQubWF5YmVDaGlsZCgkZW5kLmluZGV4KCkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKG1hcmtzW2ldLnR5cGUuc3BlYy5pbmNsdXNpdmUgPT09IGZhbHNlICYmICghbmV4dCB8fCAhbWFya3NbaV0uaXNJblNldChuZXh0Lm1hcmtzKSkpXG4gICAgICAgICAgICAgICAgbWFya3MgPSBtYXJrc1tpLS1dLnJlbW92ZUZyb21TZXQobWFya3MpO1xuICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBkZXB0aCB1cCB0byB3aGljaCB0aGlzIHBvc2l0aW9uIGFuZCB0aGUgZ2l2ZW4gKG5vbi1yZXNvbHZlZClcbiAgICBwb3NpdGlvbiBzaGFyZSB0aGUgc2FtZSBwYXJlbnQgbm9kZXMuXG4gICAgKi9cbiAgICBzaGFyZWREZXB0aChwb3MpIHtcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSB0aGlzLmRlcHRoOyBkZXB0aCA+IDA7IGRlcHRoLS0pXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydChkZXB0aCkgPD0gcG9zICYmIHRoaXMuZW5kKGRlcHRoKSA+PSBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlcHRoO1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhIHJhbmdlIGJhc2VkIG9uIHRoZSBwbGFjZSB3aGVyZSB0aGlzIHBvc2l0aW9uIGFuZCB0aGVcbiAgICBnaXZlbiBwb3NpdGlvbiBkaXZlcmdlIGFyb3VuZCBibG9jayBjb250ZW50LiBJZiBib3RoIHBvaW50IGludG9cbiAgICB0aGUgc2FtZSB0ZXh0YmxvY2ssIGZvciBleGFtcGxlLCBhIHJhbmdlIGFyb3VuZCB0aGF0IHRleHRibG9ja1xuICAgIHdpbGwgYmUgcmV0dXJuZWQuIElmIHRoZXkgcG9pbnQgaW50byBkaWZmZXJlbnQgYmxvY2tzLCB0aGUgcmFuZ2VcbiAgICBhcm91bmQgdGhvc2UgYmxvY2tzIGluIHRoZWlyIHNoYXJlZCBhbmNlc3RvciBpcyByZXR1cm5lZC4gWW91IGNhblxuICAgIHBhc3MgaW4gYW4gb3B0aW9uYWwgcHJlZGljYXRlIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIHBhcmVudFxuICAgIG5vZGUgdG8gc2VlIGlmIGEgcmFuZ2UgaW50byB0aGF0IHBhcmVudCBpcyBhY2NlcHRhYmxlLlxuICAgICovXG4gICAgYmxvY2tSYW5nZShvdGhlciA9IHRoaXMsIHByZWQpIHtcbiAgICAgICAgaWYgKG90aGVyLnBvcyA8IHRoaXMucG9zKVxuICAgICAgICAgICAgcmV0dXJuIG90aGVyLmJsb2NrUmFuZ2UodGhpcyk7XG4gICAgICAgIGZvciAobGV0IGQgPSB0aGlzLmRlcHRoIC0gKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnQgfHwgdGhpcy5wb3MgPT0gb3RoZXIucG9zID8gMSA6IDApOyBkID49IDA7IGQtLSlcbiAgICAgICAgICAgIGlmIChvdGhlci5wb3MgPD0gdGhpcy5lbmQoZCkgJiYgKCFwcmVkIHx8IHByZWQodGhpcy5ub2RlKGQpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb2RlUmFuZ2UodGhpcywgb3RoZXIsIGQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgUXVlcnkgd2hldGhlciB0aGUgZ2l2ZW4gcG9zaXRpb24gc2hhcmVzIHRoZSBzYW1lIHBhcmVudCBub2RlLlxuICAgICovXG4gICAgc2FtZVBhcmVudChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MgLSB0aGlzLnBhcmVudE9mZnNldCA9PSBvdGhlci5wb3MgLSBvdGhlci5wYXJlbnRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiB0aGUgZ3JlYXRlciBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBtYXgob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLnBvcyA+IHRoaXMucG9zID8gb3RoZXIgOiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIHNtYWxsZXIgb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbWluKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci5wb3MgPCB0aGlzLnBvcyA/IG90aGVyIDogdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMuZGVwdGg7IGkrKylcbiAgICAgICAgICAgIHN0ciArPSAoc3RyID8gXCIvXCIgOiBcIlwiKSArIHRoaXMubm9kZShpKS50eXBlLm5hbWUgKyBcIl9cIiArIHRoaXMuaW5kZXgoaSAtIDEpO1xuICAgICAgICByZXR1cm4gc3RyICsgXCI6XCIgKyB0aGlzLnBhcmVudE9mZnNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcmVzb2x2ZShkb2MsIHBvcykge1xuICAgICAgICBpZiAoIShwb3MgPj0gMCAmJiBwb3MgPD0gZG9jLmNvbnRlbnQuc2l6ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlBvc2l0aW9uIFwiICsgcG9zICsgXCIgb3V0IG9mIHJhbmdlXCIpO1xuICAgICAgICBsZXQgcGF0aCA9IFtdO1xuICAgICAgICBsZXQgc3RhcnQgPSAwLCBwYXJlbnRPZmZzZXQgPSBwb3M7XG4gICAgICAgIGZvciAobGV0IG5vZGUgPSBkb2M7Oykge1xuICAgICAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldCB9ID0gbm9kZS5jb250ZW50LmZpbmRJbmRleChwYXJlbnRPZmZzZXQpO1xuICAgICAgICAgICAgbGV0IHJlbSA9IHBhcmVudE9mZnNldCAtIG9mZnNldDtcbiAgICAgICAgICAgIHBhdGgucHVzaChub2RlLCBpbmRleCwgc3RhcnQgKyBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKCFyZW0pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZChpbmRleCk7XG4gICAgICAgICAgICBpZiAobm9kZS5pc1RleHQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSByZW0gLSAxO1xuICAgICAgICAgICAgc3RhcnQgKz0gb2Zmc2V0ICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVkUG9zKHBvcywgcGF0aCwgcGFyZW50T2Zmc2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcmVzb2x2ZUNhY2hlZChkb2MsIHBvcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc29sdmVDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNhY2hlZCA9IHJlc29sdmVDYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQucG9zID09IHBvcyAmJiBjYWNoZWQuZG9jID09IGRvYylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQgPSByZXNvbHZlQ2FjaGVbcmVzb2x2ZUNhY2hlUG9zXSA9IFJlc29sdmVkUG9zLnJlc29sdmUoZG9jLCBwb3MpO1xuICAgICAgICByZXNvbHZlQ2FjaGVQb3MgPSAocmVzb2x2ZUNhY2hlUG9zICsgMSkgJSByZXNvbHZlQ2FjaGVTaXplO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmxldCByZXNvbHZlQ2FjaGUgPSBbXSwgcmVzb2x2ZUNhY2hlUG9zID0gMCwgcmVzb2x2ZUNhY2hlU2l6ZSA9IDEyO1xuLyoqXG5SZXByZXNlbnRzIGEgZmxhdCByYW5nZSBvZiBjb250ZW50LCBpLmUuIG9uZSB0aGF0IHN0YXJ0cyBhbmRcbmVuZHMgaW4gdGhlIHNhbWUgbm9kZS5cbiovXG5jbGFzcyBOb2RlUmFuZ2Uge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIG5vZGUgcmFuZ2UuIGAkZnJvbWAgYW5kIGAkdG9gIHNob3VsZCBwb2ludCBpbnRvIHRoZVxuICAgIHNhbWUgbm9kZSB1bnRpbCBhdCBsZWFzdCB0aGUgZ2l2ZW4gYGRlcHRoYCwgc2luY2UgYSBub2RlIHJhbmdlXG4gICAgZGVub3RlcyBhbiBhZGphY2VudCBzZXQgb2Ygbm9kZXMgaW4gYSBzaW5nbGUgcGFyZW50IG5vZGUuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBBIHJlc29sdmVkIHBvc2l0aW9uIGFsb25nIHRoZSBzdGFydCBvZiB0aGUgY29udGVudC4gTWF5IGhhdmUgYVxuICAgIGBkZXB0aGAgZ3JlYXRlciB0aGFuIHRoaXMgb2JqZWN0J3MgYGRlcHRoYCBwcm9wZXJ0eSwgc2luY2VcbiAgICB0aGVzZSBhcmUgdGhlIHBvc2l0aW9ucyB0aGF0IHdlcmUgdXNlZCB0byBjb21wdXRlIHRoZSByYW5nZSxcbiAgICBub3QgcmUtcmVzb2x2ZWQgcG9zaXRpb25zIGRpcmVjdGx5IGF0IGl0cyBib3VuZGFyaWVzLlxuICAgICovXG4gICAgJGZyb20sIFxuICAgIC8qKlxuICAgIEEgcG9zaXRpb24gYWxvbmcgdGhlIGVuZCBvZiB0aGUgY29udGVudC4gU2VlXG4gICAgY2F2ZWF0IGZvciBbYCRmcm9tYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVSYW5nZS4kZnJvbSkuXG4gICAgKi9cbiAgICAkdG8sIFxuICAgIC8qKlxuICAgIFRoZSBkZXB0aCBvZiB0aGUgbm9kZSB0aGF0IHRoaXMgcmFuZ2UgcG9pbnRzIGludG8uXG4gICAgKi9cbiAgICBkZXB0aCkge1xuICAgICAgICB0aGlzLiRmcm9tID0gJGZyb207XG4gICAgICAgIHRoaXMuJHRvID0gJHRvO1xuICAgICAgICB0aGlzLmRlcHRoID0gZGVwdGg7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZ2V0IHN0YXJ0KCkgeyByZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCArIDEpOyB9XG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGggKyAxKTsgfVxuICAgIC8qKlxuICAgIFRoZSBwYXJlbnQgbm9kZSB0aGF0IHRoZSByYW5nZSBwb2ludHMgaW50by5cbiAgICAqL1xuICAgIGdldCBwYXJlbnQoKSB7IHJldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCk7IH1cbiAgICAvKipcbiAgICBUaGUgc3RhcnQgaW5kZXggb2YgdGhlIHJhbmdlIGluIHRoZSBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIGdldCBzdGFydEluZGV4KCkgeyByZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKTsgfVxuICAgIC8qKlxuICAgIFRoZSBlbmQgaW5kZXggb2YgdGhlIHJhbmdlIGluIHRoZSBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIGdldCBlbmRJbmRleCgpIHsgcmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCk7IH1cbn1cblxuY29uc3QgZW1wdHlBdHRycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vKipcblRoaXMgY2xhc3MgcmVwcmVzZW50cyBhIG5vZGUgaW4gdGhlIHRyZWUgdGhhdCBtYWtlcyB1cCBhXG5Qcm9zZU1pcnJvciBkb2N1bWVudC4gU28gYSBkb2N1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBgTm9kZWAsIHdpdGhcbmNoaWxkcmVuIHRoYXQgYXJlIGFsc28gaW5zdGFuY2VzIG9mIGBOb2RlYC5cblxuTm9kZXMgYXJlIHBlcnNpc3RlbnQgZGF0YSBzdHJ1Y3R1cmVzLiBJbnN0ZWFkIG9mIGNoYW5naW5nIHRoZW0sIHlvdVxuY3JlYXRlIG5ldyBvbmVzIHdpdGggdGhlIGNvbnRlbnQgeW91IHdhbnQuIE9sZCBvbmVzIGtlZXAgcG9pbnRpbmdcbmF0IHRoZSBvbGQgZG9jdW1lbnQgc2hhcGUuIFRoaXMgaXMgbWFkZSBjaGVhcGVyIGJ5IHNoYXJpbmdcbnN0cnVjdHVyZSBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBkYXRhIGFzIG11Y2ggYXMgcG9zc2libGUsIHdoaWNoIGFcbnRyZWUgc2hhcGUgbGlrZSB0aGlzICh3aXRob3V0IGJhY2sgcG9pbnRlcnMpIG1ha2VzIGVhc3kuXG5cbioqRG8gbm90KiogZGlyZWN0bHkgbXV0YXRlIHRoZSBwcm9wZXJ0aWVzIG9mIGEgYE5vZGVgIG9iamVjdC4gU2VlXG5bdGhlIGd1aWRlXSgvZG9jcy9ndWlkZS8jZG9jKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiovXG5jbGFzcyBOb2RlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIG5vZGUgdGhhdCB0aGlzIGlzLlxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgQW4gb2JqZWN0IG1hcHBpbmcgYXR0cmlidXRlIG5hbWVzIHRvIHZhbHVlcy4gVGhlIGtpbmQgb2ZcbiAgICBhdHRyaWJ1dGVzIGFsbG93ZWQgYW5kIHJlcXVpcmVkIGFyZVxuICAgIFtkZXRlcm1pbmVkXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuYXR0cnMpIGJ5IHRoZSBub2RlIHR5cGUuXG4gICAgKi9cbiAgICBhdHRycywgXG4gICAgLy8gQSBmcmFnbWVudCBob2xkaW5nIHRoZSBub2RlJ3MgY2hpbGRyZW4uXG4gICAgY29udGVudCwgXG4gICAgLyoqXG4gICAgVGhlIG1hcmtzICh0aGluZ3MgbGlrZSB3aGV0aGVyIGl0IGlzIGVtcGhhc2l6ZWQgb3IgcGFydCBvZiBhXG4gICAgbGluaykgYXBwbGllZCB0byB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBtYXJrcyA9IE1hcmsubm9uZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMubWFya3MgPSBtYXJrcztcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudCB8fCBGcmFnbWVudC5lbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHNpemUgb2YgdGhpcyBub2RlLCBhcyBkZWZpbmVkIGJ5IHRoZSBpbnRlZ2VyLWJhc2VkIFtpbmRleGluZ1xuICAgIHNjaGVtZV0oL2RvY3MvZ3VpZGUvI2RvYy5pbmRleGluZykuIEZvciB0ZXh0IG5vZGVzLCB0aGlzIGlzIHRoZVxuICAgIGFtb3VudCBvZiBjaGFyYWN0ZXJzLiBGb3Igb3RoZXIgbGVhZiBub2RlcywgaXQgaXMgb25lLiBGb3JcbiAgICBub24tbGVhZiBub2RlcywgaXQgaXMgdGhlIHNpemUgb2YgdGhlIGNvbnRlbnQgcGx1cyB0d28gKHRoZVxuICAgIHN0YXJ0IGFuZCBlbmQgdG9rZW4pLlxuICAgICovXG4gICAgZ2V0IG5vZGVTaXplKCkgeyByZXR1cm4gdGhpcy5pc0xlYWYgPyAxIDogMiArIHRoaXMuY29udGVudC5zaXplOyB9XG4gICAgLyoqXG4gICAgVGhlIG51bWJlciBvZiBjaGlsZHJlbiB0aGF0IHRoZSBub2RlIGhhcy5cbiAgICAqL1xuICAgIGdldCBjaGlsZENvdW50KCkgeyByZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnQ7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNoaWxkIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LiBSYWlzZXMgYW4gZXJyb3Igd2hlbiB0aGVcbiAgICBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgKi9cbiAgICBjaGlsZChpbmRleCkgeyByZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKGluZGV4KTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY2hpbGQgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXgsIGlmIGl0IGV4aXN0cy5cbiAgICAqL1xuICAgIG1heWJlQ2hpbGQoaW5kZXgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKGluZGV4KTsgfVxuICAgIC8qKlxuICAgIENhbGwgYGZgIGZvciBldmVyeSBjaGlsZCBub2RlLCBwYXNzaW5nIHRoZSBub2RlLCBpdHMgb2Zmc2V0XG4gICAgaW50byB0aGlzIHBhcmVudCBub2RlLCBhbmQgaXRzIGluZGV4LlxuICAgICovXG4gICAgZm9yRWFjaChmKSB7IHRoaXMuY29udGVudC5mb3JFYWNoKGYpOyB9XG4gICAgLyoqXG4gICAgSW52b2tlIGEgY2FsbGJhY2sgZm9yIGFsbCBkZXNjZW5kYW50IG5vZGVzIHJlY3Vyc2l2ZWx5IGJldHdlZW5cbiAgICB0aGUgZ2l2ZW4gdHdvIHBvc2l0aW9ucyB0aGF0IGFyZSByZWxhdGl2ZSB0byBzdGFydCBvZiB0aGlzXG4gICAgbm9kZSdzIGNvbnRlbnQuIFRoZSBjYWxsYmFjayBpcyBpbnZva2VkIHdpdGggdGhlIG5vZGUsIGl0c1xuICAgIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBvcmlnaW5hbCBub2RlIChtZXRob2QgcmVjZWl2ZXIpLFxuICAgIGl0cyBwYXJlbnQgbm9kZSwgYW5kIGl0cyBjaGlsZCBpbmRleC4gV2hlbiB0aGUgY2FsbGJhY2sgcmV0dXJuc1xuICAgIGZhbHNlIGZvciBhIGdpdmVuIG5vZGUsIHRoYXQgbm9kZSdzIGNoaWxkcmVuIHdpbGwgbm90IGJlXG4gICAgcmVjdXJzZWQgb3Zlci4gVGhlIGxhc3QgcGFyYW1ldGVyIGNhbiBiZSB1c2VkIHRvIHNwZWNpZnkgYVxuICAgIHN0YXJ0aW5nIHBvc2l0aW9uIHRvIGNvdW50IGZyb20uXG4gICAgKi9cbiAgICBub2Rlc0JldHdlZW4oZnJvbSwgdG8sIGYsIHN0YXJ0UG9zID0gMCkge1xuICAgICAgICB0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKGZyb20sIHRvLCBmLCBzdGFydFBvcywgdGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBldmVyeSBkZXNjZW5kYW50IG5vZGUuIERvZXNuJ3RcbiAgICBkZXNjZW5kIGludG8gYSBub2RlIHdoZW4gdGhlIGNhbGxiYWNrIHJldHVybnMgYGZhbHNlYC5cbiAgICAqL1xuICAgIGRlc2NlbmRhbnRzKGYpIHtcbiAgICAgICAgdGhpcy5ub2Rlc0JldHdlZW4oMCwgdGhpcy5jb250ZW50LnNpemUsIGYpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb25jYXRlbmF0ZXMgYWxsIHRoZSB0ZXh0IG5vZGVzIGZvdW5kIGluIHRoaXMgZnJhZ21lbnQgYW5kIGl0c1xuICAgIGNoaWxkcmVuLlxuICAgICovXG4gICAgZ2V0IHRleHRDb250ZW50KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaXNMZWFmICYmIHRoaXMudHlwZS5zcGVjLmxlYWZUZXh0KVxuICAgICAgICAgICAgPyB0aGlzLnR5cGUuc3BlYy5sZWFmVGV4dCh0aGlzKVxuICAgICAgICAgICAgOiB0aGlzLnRleHRCZXR3ZWVuKDAsIHRoaXMuY29udGVudC5zaXplLCBcIlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IGFsbCB0ZXh0IGJldHdlZW4gcG9zaXRpb25zIGBmcm9tYCBhbmQgYHRvYC4gV2hlblxuICAgIGBibG9ja1NlcGFyYXRvcmAgaXMgZ2l2ZW4sIGl0IHdpbGwgYmUgaW5zZXJ0ZWQgdG8gc2VwYXJhdGUgdGV4dFxuICAgIGZyb20gZGlmZmVyZW50IGJsb2NrIG5vZGVzLiBJZiBgbGVhZlRleHRgIGlzIGdpdmVuLCBpdCdsbCBiZVxuICAgIGluc2VydGVkIGZvciBldmVyeSBub24tdGV4dCBsZWFmIG5vZGUgZW5jb3VudGVyZWQsIG90aGVyd2lzZVxuICAgIFtgbGVhZlRleHRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWNebGVhZlRleHQpIHdpbGwgYmUgdXNlZC5cbiAgICAqL1xuICAgIHRleHRCZXR3ZWVuKGZyb20sIHRvLCBibG9ja1NlcGFyYXRvciwgbGVhZlRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbihmcm9tLCB0bywgYmxvY2tTZXBhcmF0b3IsIGxlYWZUZXh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGlzIG5vZGUncyBmaXJzdCBjaGlsZCwgb3IgYG51bGxgIGlmIHRoZXJlIGFyZSBub1xuICAgIGNoaWxkcmVuLlxuICAgICovXG4gICAgZ2V0IGZpcnN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZDsgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhpcyBub2RlJ3MgbGFzdCBjaGlsZCwgb3IgYG51bGxgIGlmIHRoZXJlIGFyZSBub1xuICAgIGNoaWxkcmVuLlxuICAgICovXG4gICAgZ2V0IGxhc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGQ7IH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgdHdvIG5vZGVzIHJlcHJlc2VudCB0aGUgc2FtZSBwaWVjZSBvZiBkb2N1bWVudC5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzID09IG90aGVyIHx8ICh0aGlzLnNhbWVNYXJrdXAob3RoZXIpICYmIHRoaXMuY29udGVudC5lcShvdGhlci5jb250ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhlIG1hcmt1cCAodHlwZSwgYXR0cmlidXRlcywgYW5kIG1hcmtzKSBvZiB0aGlzIG5vZGUgdG9cbiAgICB0aG9zZSBvZiBhbm90aGVyLiBSZXR1cm5zIGB0cnVlYCBpZiBib3RoIGhhdmUgdGhlIHNhbWUgbWFya3VwLlxuICAgICovXG4gICAgc2FtZU1hcmt1cChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNNYXJrdXAob3RoZXIudHlwZSwgb3RoZXIuYXR0cnMsIG90aGVyLm1hcmtzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgd2hldGhlciB0aGlzIG5vZGUncyBtYXJrdXAgY29ycmVzcG9uZCB0byB0aGUgZ2l2ZW4gdHlwZSxcbiAgICBhdHRyaWJ1dGVzLCBhbmQgbWFya3MuXG4gICAgKi9cbiAgICBoYXNNYXJrdXAodHlwZSwgYXR0cnMsIG1hcmtzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT0gdHlwZSAmJlxuICAgICAgICAgICAgY29tcGFyZURlZXAodGhpcy5hdHRycywgYXR0cnMgfHwgdHlwZS5kZWZhdWx0QXR0cnMgfHwgZW1wdHlBdHRycykgJiZcbiAgICAgICAgICAgIE1hcmsuc2FtZVNldCh0aGlzLm1hcmtzLCBtYXJrcyB8fCBNYXJrLm5vbmUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgbm9kZSB3aXRoIHRoZSBzYW1lIG1hcmt1cCBhcyB0aGlzIG5vZGUsIGNvbnRhaW5pbmdcbiAgICB0aGUgZ2l2ZW4gY29udGVudCAob3IgZW1wdHksIGlmIG5vIGNvbnRlbnQgaXMgZ2l2ZW4pLlxuICAgICovXG4gICAgY29weShjb250ZW50ID0gbnVsbCkge1xuICAgICAgICBpZiAoY29udGVudCA9PSB0aGlzLmNvbnRlbnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMudHlwZSwgdGhpcy5hdHRycywgY29udGVudCwgdGhpcy5tYXJrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGNvcHkgb2YgdGhpcyBub2RlLCB3aXRoIHRoZSBnaXZlbiBzZXQgb2YgbWFya3MgaW5zdGVhZFxuICAgIG9mIHRoZSBub2RlJ3Mgb3duIG1hcmtzLlxuICAgICovXG4gICAgbWFyayhtYXJrcykge1xuICAgICAgICByZXR1cm4gbWFya3MgPT0gdGhpcy5tYXJrcyA/IHRoaXMgOiBuZXcgTm9kZSh0aGlzLnR5cGUsIHRoaXMuYXR0cnMsIHRoaXMuY29udGVudCwgbWFya3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBjb3B5IG9mIHRoaXMgbm9kZSB3aXRoIG9ubHkgdGhlIGNvbnRlbnQgYmV0d2VlbiB0aGVcbiAgICBnaXZlbiBwb3NpdGlvbnMuIElmIGB0b2AgaXMgbm90IGdpdmVuLCBpdCBkZWZhdWx0cyB0byB0aGUgZW5kIG9mXG4gICAgdGhlIG5vZGUuXG4gICAgKi9cbiAgICBjdXQoZnJvbSwgdG8gPSB0aGlzLmNvbnRlbnQuc2l6ZSkge1xuICAgICAgICBpZiAoZnJvbSA9PSAwICYmIHRvID09IHRoaXMuY29udGVudC5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dChmcm9tLCB0bykpO1xuICAgIH1cbiAgICAvKipcbiAgICBDdXQgb3V0IHRoZSBwYXJ0IG9mIHRoZSBkb2N1bWVudCBiZXR3ZWVuIHRoZSBnaXZlbiBwb3NpdGlvbnMsIGFuZFxuICAgIHJldHVybiBpdCBhcyBhIGBTbGljZWAgb2JqZWN0LlxuICAgICovXG4gICAgc2xpY2UoZnJvbSwgdG8gPSB0aGlzLmNvbnRlbnQuc2l6ZSwgaW5jbHVkZVBhcmVudHMgPSBmYWxzZSkge1xuICAgICAgICBpZiAoZnJvbSA9PSB0bylcbiAgICAgICAgICAgIHJldHVybiBTbGljZS5lbXB0eTtcbiAgICAgICAgbGV0ICRmcm9tID0gdGhpcy5yZXNvbHZlKGZyb20pLCAkdG8gPSB0aGlzLnJlc29sdmUodG8pO1xuICAgICAgICBsZXQgZGVwdGggPSBpbmNsdWRlUGFyZW50cyA/IDAgOiAkZnJvbS5zaGFyZWREZXB0aCh0byk7XG4gICAgICAgIGxldCBzdGFydCA9ICRmcm9tLnN0YXJ0KGRlcHRoKSwgbm9kZSA9ICRmcm9tLm5vZGUoZGVwdGgpO1xuICAgICAgICBsZXQgY29udGVudCA9IG5vZGUuY29udGVudC5jdXQoJGZyb20ucG9zIC0gc3RhcnQsICR0by5wb3MgLSBzdGFydCk7XG4gICAgICAgIHJldHVybiBuZXcgU2xpY2UoY29udGVudCwgJGZyb20uZGVwdGggLSBkZXB0aCwgJHRvLmRlcHRoIC0gZGVwdGgpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBwYXJ0IG9mIHRoZSBkb2N1bWVudCBiZXR3ZWVuIHRoZSBnaXZlbiBwb3NpdGlvbnMgd2l0aFxuICAgIHRoZSBnaXZlbiBzbGljZS4gVGhlIHNsaWNlIG11c3QgJ2ZpdCcsIG1lYW5pbmcgaXRzIG9wZW4gc2lkZXNcbiAgICBtdXN0IGJlIGFibGUgdG8gY29ubmVjdCB0byB0aGUgc3Vycm91bmRpbmcgY29udGVudCwgYW5kIGl0c1xuICAgIGNvbnRlbnQgbm9kZXMgbXVzdCBiZSB2YWxpZCBjaGlsZHJlbiBmb3IgdGhlIG5vZGUgdGhleSBhcmUgcGxhY2VkXG4gICAgaW50by4gSWYgYW55IG9mIHRoaXMgaXMgdmlvbGF0ZWQsIGFuIGVycm9yIG9mIHR5cGVcbiAgICBbYFJlcGxhY2VFcnJvcmBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5SZXBsYWNlRXJyb3IpIGlzIHRocm93bi5cbiAgICAqL1xuICAgIHJlcGxhY2UoZnJvbSwgdG8sIHNsaWNlKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlKHRoaXMucmVzb2x2ZShmcm9tKSwgdGhpcy5yZXNvbHZlKHRvKSwgc2xpY2UpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBub2RlIGRpcmVjdGx5IGFmdGVyIHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIG5vZGVBdChwb3MpIHtcbiAgICAgICAgZm9yIChsZXQgbm9kZSA9IHRoaXM7Oykge1xuICAgICAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldCB9ID0gbm9kZS5jb250ZW50LmZpbmRJbmRleChwb3MpO1xuICAgICAgICAgICAgbm9kZSA9IG5vZGUubWF5YmVDaGlsZChpbmRleCk7XG4gICAgICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBpZiAob2Zmc2V0ID09IHBvcyB8fCBub2RlLmlzVGV4dClcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIHBvcyAtPSBvZmZzZXQgKyAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIChkaXJlY3QpIGNoaWxkIG5vZGUgYWZ0ZXIgdGhlIGdpdmVuIG9mZnNldCwgaWYgYW55LFxuICAgIGFuZCByZXR1cm4gaXQgYWxvbmcgd2l0aCBpdHMgaW5kZXggYW5kIG9mZnNldCByZWxhdGl2ZSB0byB0aGlzXG4gICAgbm9kZS5cbiAgICAqL1xuICAgIGNoaWxkQWZ0ZXIocG9zKSB7XG4gICAgICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IHRoaXMuY29udGVudC5maW5kSW5kZXgocG9zKTtcbiAgICAgICAgcmV0dXJuIHsgbm9kZTogdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQoaW5kZXgpLCBpbmRleCwgb2Zmc2V0IH07XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIChkaXJlY3QpIGNoaWxkIG5vZGUgYmVmb3JlIHRoZSBnaXZlbiBvZmZzZXQsIGlmIGFueSxcbiAgICBhbmQgcmV0dXJuIGl0IGFsb25nIHdpdGggaXRzIGluZGV4IGFuZCBvZmZzZXQgcmVsYXRpdmUgdG8gdGhpc1xuICAgIG5vZGUuXG4gICAgKi9cbiAgICBjaGlsZEJlZm9yZShwb3MpIHtcbiAgICAgICAgaWYgKHBvcyA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogbnVsbCwgaW5kZXg6IDAsIG9mZnNldDogMCB9O1xuICAgICAgICBsZXQgeyBpbmRleCwgb2Zmc2V0IH0gPSB0aGlzLmNvbnRlbnQuZmluZEluZGV4KHBvcyk7XG4gICAgICAgIGlmIChvZmZzZXQgPCBwb3MpXG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLmNvbnRlbnQuY2hpbGQoaW5kZXgpLCBpbmRleCwgb2Zmc2V0IH07XG4gICAgICAgIGxldCBub2RlID0gdGhpcy5jb250ZW50LmNoaWxkKGluZGV4IC0gMSk7XG4gICAgICAgIHJldHVybiB7IG5vZGUsIGluZGV4OiBpbmRleCAtIDEsIG9mZnNldDogb2Zmc2V0IC0gbm9kZS5ub2RlU2l6ZSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBSZXNvbHZlIHRoZSBnaXZlbiBwb3NpdGlvbiBpbiB0aGUgZG9jdW1lbnQsIHJldHVybmluZyBhblxuICAgIFtvYmplY3RdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5SZXNvbHZlZFBvcykgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCBpdHMgY29udGV4dC5cbiAgICAqL1xuICAgIHJlc29sdmUocG9zKSB7IHJldHVybiBSZXNvbHZlZFBvcy5yZXNvbHZlQ2FjaGVkKHRoaXMsIHBvcyk7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc29sdmVOb0NhY2hlKHBvcykgeyByZXR1cm4gUmVzb2x2ZWRQb3MucmVzb2x2ZSh0aGlzLCBwb3MpOyB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIGEgZ2l2ZW4gbWFyayBvciBtYXJrIHR5cGUgb2NjdXJzIGluIHRoaXMgZG9jdW1lbnRcbiAgICBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gcG9zaXRpb25zLlxuICAgICovXG4gICAgcmFuZ2VIYXNNYXJrKGZyb20sIHRvLCB0eXBlKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAodG8gPiBmcm9tKVxuICAgICAgICAgICAgdGhpcy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlLmlzSW5TZXQobm9kZS5tYXJrcykpXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWZvdW5kO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgaXMgYSBibG9jayAobm9uLWlubGluZSBub2RlKVxuICAgICovXG4gICAgZ2V0IGlzQmxvY2soKSB7IHJldHVybiB0aGlzLnR5cGUuaXNCbG9jazsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIGlzIGEgdGV4dGJsb2NrIG5vZGUsIGEgYmxvY2sgbm9kZSB3aXRoIGlubGluZVxuICAgIGNvbnRlbnQuXG4gICAgKi9cbiAgICBnZXQgaXNUZXh0YmxvY2soKSB7IHJldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2s7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBub2RlIGFsbG93cyBpbmxpbmUgY29udGVudC5cbiAgICAqL1xuICAgIGdldCBpbmxpbmVDb250ZW50KCkgeyByZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnQ7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyBhbiBpbmxpbmUgbm9kZSAoYSB0ZXh0IG5vZGUgb3IgYSBub2RlIHRoYXQgY2FuXG4gICAgYXBwZWFyIGFtb25nIHRleHQpLlxuICAgICovXG4gICAgZ2V0IGlzSW5saW5lKCkgeyByZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgaXMgYSB0ZXh0IG5vZGUuXG4gICAgKi9cbiAgICBnZXQgaXNUZXh0KCkgeyByZXR1cm4gdGhpcy50eXBlLmlzVGV4dDsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIGlzIGEgbGVhZiBub2RlLlxuICAgICovXG4gICAgZ2V0IGlzTGVhZigpIHsgcmV0dXJuIHRoaXMudHlwZS5pc0xlYWY7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyBhbiBhdG9tLCBpLmUuIHdoZW4gaXQgZG9lcyBub3QgaGF2ZSBkaXJlY3RseVxuICAgIGVkaXRhYmxlIGNvbnRlbnQuIFRoaXMgaXMgdXN1YWxseSB0aGUgc2FtZSBhcyBgaXNMZWFmYCwgYnV0IGNhblxuICAgIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgW2BhdG9tYCBwcm9wZXJ0eV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmF0b20pXG4gICAgb24gYSBub2RlJ3Mgc3BlYyAodHlwaWNhbGx5IHVzZWQgd2hlbiB0aGUgbm9kZSBpcyBkaXNwbGF5ZWQgYXNcbiAgICBhbiB1bmVkaXRhYmxlIFtub2RlIHZpZXddKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3Lk5vZGVWaWV3KSkuXG4gICAgKi9cbiAgICBnZXQgaXNBdG9tKCkgeyByZXR1cm4gdGhpcy50eXBlLmlzQXRvbTsgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG5vZGUgZm9yIGRlYnVnZ2luZ1xuICAgIHB1cnBvc2VzLlxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy50eXBlLm5hbWU7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgICAgIG5hbWUgKz0gXCIoXCIgKyB0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpICsgXCIpXCI7XG4gICAgICAgIHJldHVybiB3cmFwTWFya3ModGhpcy5tYXJrcywgbmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29udGVudCBtYXRjaCBpbiB0aGlzIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICovXG4gICAgY29udGVudE1hdGNoQXQoaW5kZXgpIHtcbiAgICAgICAgbGV0IG1hdGNoID0gdGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwgMCwgaW5kZXgpO1xuICAgICAgICBpZiAoIW1hdGNoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudFwiKTtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgcmVwbGFjaW5nIHRoZSByYW5nZSBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYCAoYnlcbiAgICBjaGlsZCBpbmRleCkgd2l0aCB0aGUgZ2l2ZW4gcmVwbGFjZW1lbnQgZnJhZ21lbnQgKHdoaWNoIGRlZmF1bHRzXG4gICAgdG8gdGhlIGVtcHR5IGZyYWdtZW50KSB3b3VsZCBsZWF2ZSB0aGUgbm9kZSdzIGNvbnRlbnQgdmFsaWQuIFlvdVxuICAgIGNhbiBvcHRpb25hbGx5IHBhc3MgYHN0YXJ0YCBhbmQgYGVuZGAgaW5kaWNlcyBpbnRvIHRoZVxuICAgIHJlcGxhY2VtZW50IGZyYWdtZW50LlxuICAgICovXG4gICAgY2FuUmVwbGFjZShmcm9tLCB0bywgcmVwbGFjZW1lbnQgPSBGcmFnbWVudC5lbXB0eSwgc3RhcnQgPSAwLCBlbmQgPSByZXBsYWNlbWVudC5jaGlsZENvdW50KSB7XG4gICAgICAgIGxldCBvbmUgPSB0aGlzLmNvbnRlbnRNYXRjaEF0KGZyb20pLm1hdGNoRnJhZ21lbnQocmVwbGFjZW1lbnQsIHN0YXJ0LCBlbmQpO1xuICAgICAgICBsZXQgdHdvID0gb25lICYmIG9uZS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwgdG8pO1xuICAgICAgICBpZiAoIXR3byB8fCAhdHdvLnZhbGlkRW5kKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy50eXBlLmFsbG93c01hcmtzKHJlcGxhY2VtZW50LmNoaWxkKGkpLm1hcmtzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgcmVwbGFjaW5nIHRoZSByYW5nZSBgZnJvbWAgdG8gYHRvYCAoYnkgaW5kZXgpIHdpdGhcbiAgICBhIG5vZGUgb2YgdGhlIGdpdmVuIHR5cGUgd291bGQgbGVhdmUgdGhlIG5vZGUncyBjb250ZW50IHZhbGlkLlxuICAgICovXG4gICAgY2FuUmVwbGFjZVdpdGgoZnJvbSwgdG8sIHR5cGUsIG1hcmtzKSB7XG4gICAgICAgIGlmIChtYXJrcyAmJiAhdGhpcy50eXBlLmFsbG93c01hcmtzKG1hcmtzKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5jb250ZW50TWF0Y2hBdChmcm9tKS5tYXRjaFR5cGUodHlwZSk7XG4gICAgICAgIGxldCBlbmQgPSBzdGFydCAmJiBzdGFydC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwgdG8pO1xuICAgICAgICByZXR1cm4gZW5kID8gZW5kLnZhbGlkRW5kIDogZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0aGUgZ2l2ZW4gbm9kZSdzIGNvbnRlbnQgY291bGQgYmUgYXBwZW5kZWQgdG8gdGhpc1xuICAgIG5vZGUuIElmIHRoYXQgbm9kZSBpcyBlbXB0eSwgdGhpcyB3aWxsIG9ubHkgcmV0dXJuIHRydWUgaWYgdGhlcmVcbiAgICBpcyBhdCBsZWFzdCBvbmUgbm9kZSB0eXBlIHRoYXQgY2FuIGFwcGVhciBpbiBib3RoIG5vZGVzICh0byBhdm9pZFxuICAgIG1lcmdpbmcgY29tcGxldGVseSBpbmNvbXBhdGlibGUgbm9kZXMpLlxuICAgICovXG4gICAgY2FuQXBwZW5kKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlci5jb250ZW50LnNpemUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCwgdGhpcy5jaGlsZENvdW50LCBvdGhlci5jb250ZW50KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudChvdGhlci50eXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hlY2sgd2hldGhlciB0aGlzIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50cyBjb25mb3JtIHRvIHRoZVxuICAgIHNjaGVtYSwgYW5kIHJhaXNlIGVycm9yIHdoZW4gdGhleSBkbyBub3QuXG4gICAgKi9cbiAgICBjaGVjaygpIHtcbiAgICAgICAgdGhpcy50eXBlLmNoZWNrQ29udGVudCh0aGlzLmNvbnRlbnQpO1xuICAgICAgICBsZXQgY29weSA9IE1hcmsubm9uZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgY29weSA9IHRoaXMubWFya3NbaV0uYWRkVG9TZXQoY29weSk7XG4gICAgICAgIGlmICghTWFyay5zYW1lU2V0KGNvcHksIHRoaXMubWFya3MpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbiBvZiBtYXJrcyBmb3Igbm9kZSAke3RoaXMudHlwZS5uYW1lfTogJHt0aGlzLm1hcmtzLm1hcChtID0+IG0udHlwZS5uYW1lKX1gKTtcbiAgICAgICAgdGhpcy5jb250ZW50LmZvckVhY2gobm9kZSA9PiBub2RlLmNoZWNrKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBKU09OLXNlcmlhbGl6ZWFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBub2RlLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgb2JqID0geyB0eXBlOiB0aGlzLnR5cGUubmFtZSB9O1xuICAgICAgICBmb3IgKGxldCBfIGluIHRoaXMuYXR0cnMpIHtcbiAgICAgICAgICAgIG9iai5hdHRycyA9IHRoaXMuYXR0cnM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250ZW50LnNpemUpXG4gICAgICAgICAgICBvYmouY29udGVudCA9IHRoaXMuY29udGVudC50b0pTT04oKTtcbiAgICAgICAgaWYgKHRoaXMubWFya3MubGVuZ3RoKVxuICAgICAgICAgICAgb2JqLm1hcmtzID0gdGhpcy5tYXJrcy5tYXAobiA9PiBuLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBub2RlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTlwiKTtcbiAgICAgICAgbGV0IG1hcmtzID0gbnVsbDtcbiAgICAgICAgaWYgKGpzb24ubWFya3MpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShqc29uLm1hcmtzKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OXCIpO1xuICAgICAgICAgICAgbWFya3MgPSBqc29uLm1hcmtzLm1hcChzY2hlbWEubWFya0Zyb21KU09OKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi50eXBlID09IFwidGV4dFwiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpzb24udGV4dCAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTlwiKTtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEudGV4dChqc29uLnRleHQsIG1hcmtzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGVudCA9IEZyYWdtZW50LmZyb21KU09OKHNjaGVtYSwganNvbi5jb250ZW50KTtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5ub2RlVHlwZShqc29uLnR5cGUpLmNyZWF0ZShqc29uLmF0dHJzLCBjb250ZW50LCBtYXJrcyk7XG4gICAgfVxufVxuTm9kZS5wcm90b3R5cGUudGV4dCA9IHVuZGVmaW5lZDtcbmNsYXNzIFRleHROb2RlIGV4dGVuZHMgTm9kZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBhdHRycywgY29udGVudCwgbWFya3MpIHtcbiAgICAgICAgc3VwZXIodHlwZSwgYXR0cnMsIG51bGwsIG1hcmtzKTtcbiAgICAgICAgaWYgKCFjb250ZW50KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZFwiKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gY29udGVudDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7XG4gICAgICAgIHJldHVybiB3cmFwTWFya3ModGhpcy5tYXJrcywgSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSk7XG4gICAgfVxuICAgIGdldCB0ZXh0Q29udGVudCgpIHsgcmV0dXJuIHRoaXMudGV4dDsgfVxuICAgIHRleHRCZXR3ZWVuKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnRleHQuc2xpY2UoZnJvbSwgdG8pOyB9XG4gICAgZ2V0IG5vZGVTaXplKCkgeyByZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aDsgfVxuICAgIG1hcmsobWFya3MpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtzID09IHRoaXMubWFya3MgPyB0aGlzIDogbmV3IFRleHROb2RlKHRoaXMudHlwZSwgdGhpcy5hdHRycywgdGhpcy50ZXh0LCBtYXJrcyk7XG4gICAgfVxuICAgIHdpdGhUZXh0KHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQgPT0gdGhpcy50ZXh0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dE5vZGUodGhpcy50eXBlLCB0aGlzLmF0dHJzLCB0ZXh0LCB0aGlzLm1hcmtzKTtcbiAgICB9XG4gICAgY3V0KGZyb20gPSAwLCB0byA9IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGZyb20gPT0gMCAmJiB0byA9PSB0aGlzLnRleHQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZShmcm9tLCB0bykpO1xuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zYW1lTWFya3VwKG90aGVyKSAmJiB0aGlzLnRleHQgPT0gb3RoZXIudGV4dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgYmFzZSA9IHN1cGVyLnRvSlNPTigpO1xuICAgICAgICBiYXNlLnRleHQgPSB0aGlzLnRleHQ7XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyYXBNYXJrcyhtYXJrcywgc3RyKSB7XG4gICAgZm9yIChsZXQgaSA9IG1hcmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBzdHIgPSBtYXJrc1tpXS50eXBlLm5hbWUgKyBcIihcIiArIHN0ciArIFwiKVwiO1xuICAgIHJldHVybiBzdHI7XG59XG5cbi8qKlxuSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50IGEgbWF0Y2ggc3RhdGUgb2YgYSBub2RlIHR5cGUnc1xuW2NvbnRlbnQgZXhwcmVzc2lvbl0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmNvbnRlbnQpLCBhbmQgY2FuIGJlIHVzZWQgdG9cbmZpbmQgb3V0IHdoZXRoZXIgZnVydGhlciBjb250ZW50IG1hdGNoZXMgaGVyZSwgYW5kIHdoZXRoZXIgYSBnaXZlblxucG9zaXRpb24gaXMgYSB2YWxpZCBlbmQgb2YgdGhlIG5vZGUuXG4qL1xuY2xhc3MgQ29udGVudE1hdGNoIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIG1hdGNoIHN0YXRlIHJlcHJlc2VudHMgYSB2YWxpZCBlbmQgb2YgdGhlIG5vZGUuXG4gICAgKi9cbiAgICB2YWxpZEVuZCkge1xuICAgICAgICB0aGlzLnZhbGlkRW5kID0gdmFsaWRFbmQ7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uZXh0ID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cmFwQ2FjaGUgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcGFyc2Uoc3RyaW5nLCBub2RlVHlwZXMpIHtcbiAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBUb2tlblN0cmVhbShzdHJpbmcsIG5vZGVUeXBlcyk7XG4gICAgICAgIGlmIChzdHJlYW0ubmV4dCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnRNYXRjaC5lbXB0eTtcbiAgICAgICAgbGV0IGV4cHIgPSBwYXJzZUV4cHIoc3RyZWFtKTtcbiAgICAgICAgaWYgKHN0cmVhbS5uZXh0KVxuICAgICAgICAgICAgc3RyZWFtLmVycihcIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dFwiKTtcbiAgICAgICAgbGV0IG1hdGNoID0gZGZhKG5mYShleHByKSk7XG4gICAgICAgIGNoZWNrRm9yRGVhZEVuZHMobWF0Y2gsIHN0cmVhbSk7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG4gICAgLyoqXG4gICAgTWF0Y2ggYSBub2RlIHR5cGUsIHJldHVybmluZyBhIG1hdGNoIGFmdGVyIHRoYXQgbm9kZSBpZlxuICAgIHN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBtYXRjaFR5cGUodHlwZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRbaV0udHlwZSA9PSB0eXBlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRbaV0ubmV4dDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRyeSB0byBtYXRjaCBhIGZyYWdtZW50LiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgbWF0Y2ggd2hlblxuICAgIHN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBtYXRjaEZyYWdtZW50KGZyYWcsIHN0YXJ0ID0gMCwgZW5kID0gZnJhZy5jaGlsZENvdW50KSB7XG4gICAgICAgIGxldCBjdXIgPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGN1ciAmJiBpIDwgZW5kOyBpKyspXG4gICAgICAgICAgICBjdXIgPSBjdXIubWF0Y2hUeXBlKGZyYWcuY2hpbGQoaSkudHlwZSk7XG4gICAgICAgIHJldHVybiBjdXI7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGlubGluZUNvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQubGVuZ3RoICE9IDAgJiYgdGhpcy5uZXh0WzBdLnR5cGUuaXNJbmxpbmU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgZmlyc3QgbWF0Y2hpbmcgbm9kZSB0eXBlIGF0IHRoaXMgbWF0Y2ggcG9zaXRpb24gdGhhdCBjYW5cbiAgICBiZSBnZW5lcmF0ZWQuXG4gICAgKi9cbiAgICBnZXQgZGVmYXVsdFR5cGUoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyB0eXBlIH0gPSB0aGlzLm5leHRbaV07XG4gICAgICAgICAgICBpZiAoISh0eXBlLmlzVGV4dCB8fCB0eXBlLmhhc1JlcXVpcmVkQXR0cnMoKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcGF0aWJsZShvdGhlcikge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgb3RoZXIubmV4dC5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0W2ldLnR5cGUgPT0gb3RoZXIubmV4dFtqXS50eXBlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnkgdG8gbWF0Y2ggdGhlIGdpdmVuIGZyYWdtZW50LCBhbmQgaWYgdGhhdCBmYWlscywgc2VlIGlmIGl0IGNhblxuICAgIGJlIG1hZGUgdG8gbWF0Y2ggYnkgaW5zZXJ0aW5nIG5vZGVzIGluIGZyb250IG9mIGl0LiBXaGVuXG4gICAgc3VjY2Vzc2Z1bCwgcmV0dXJuIGEgZnJhZ21lbnQgb2YgaW5zZXJ0ZWQgbm9kZXMgKHdoaWNoIG1heSBiZVxuICAgIGVtcHR5IGlmIG5vdGhpbmcgaGFkIHRvIGJlIGluc2VydGVkKS4gV2hlbiBgdG9FbmRgIGlzIHRydWUsIG9ubHlcbiAgICByZXR1cm4gYSBmcmFnbWVudCBpZiB0aGUgcmVzdWx0aW5nIG1hdGNoIGdvZXMgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICBjb250ZW50IGV4cHJlc3Npb24uXG4gICAgKi9cbiAgICBmaWxsQmVmb3JlKGFmdGVyLCB0b0VuZCA9IGZhbHNlLCBzdGFydEluZGV4ID0gMCkge1xuICAgICAgICBsZXQgc2VlbiA9IFt0aGlzXTtcbiAgICAgICAgZnVuY3Rpb24gc2VhcmNoKG1hdGNoLCB0eXBlcykge1xuICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gbWF0Y2gubWF0Y2hGcmFnbWVudChhZnRlciwgc3RhcnRJbmRleCk7XG4gICAgICAgICAgICBpZiAoZmluaXNoZWQgJiYgKCF0b0VuZCB8fCBmaW5pc2hlZC52YWxpZEVuZCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50LmZyb20odHlwZXMubWFwKHRwID0+IHRwLmNyZWF0ZUFuZEZpbGwoKSkpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaC5uZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdHlwZSwgbmV4dCB9ID0gbWF0Y2gubmV4dFtpXTtcbiAgICAgICAgICAgICAgICBpZiAoISh0eXBlLmlzVGV4dCB8fCB0eXBlLmhhc1JlcXVpcmVkQXR0cnMoKSkgJiYgc2Vlbi5pbmRleE9mKG5leHQpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlZW4ucHVzaChuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gc2VhcmNoKG5leHQsIHR5cGVzLmNvbmNhdCh0eXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VhcmNoKHRoaXMsIFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCBhIHNldCBvZiB3cmFwcGluZyBub2RlIHR5cGVzIHRoYXQgd291bGQgYWxsb3cgYSBub2RlIG9mIHRoZVxuICAgIGdpdmVuIHR5cGUgdG8gYXBwZWFyIGF0IHRoaXMgcG9zaXRpb24uIFRoZSByZXN1bHQgbWF5IGJlIGVtcHR5XG4gICAgKHdoZW4gaXQgZml0cyBkaXJlY3RseSkgYW5kIHdpbGwgYmUgbnVsbCB3aGVuIG5vIHN1Y2ggd3JhcHBpbmdcbiAgICBleGlzdHMuXG4gICAgKi9cbiAgICBmaW5kV3JhcHBpbmcodGFyZ2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53cmFwQ2FjaGUubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICBpZiAodGhpcy53cmFwQ2FjaGVbaV0gPT0gdGFyZ2V0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBDYWNoZVtpICsgMV07XG4gICAgICAgIGxldCBjb21wdXRlZCA9IHRoaXMuY29tcHV0ZVdyYXBwaW5nKHRhcmdldCk7XG4gICAgICAgIHRoaXMud3JhcENhY2hlLnB1c2godGFyZ2V0LCBjb21wdXRlZCk7XG4gICAgICAgIHJldHVybiBjb21wdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21wdXRlV3JhcHBpbmcodGFyZ2V0KSB7XG4gICAgICAgIGxldCBzZWVuID0gT2JqZWN0LmNyZWF0ZShudWxsKSwgYWN0aXZlID0gW3sgbWF0Y2g6IHRoaXMsIHR5cGU6IG51bGwsIHZpYTogbnVsbCB9XTtcbiAgICAgICAgd2hpbGUgKGFjdGl2ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gYWN0aXZlLnNoaWZ0KCksIG1hdGNoID0gY3VycmVudC5tYXRjaDtcbiAgICAgICAgICAgIGlmIChtYXRjaC5tYXRjaFR5cGUodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBvYmogPSBjdXJyZW50OyBvYmoudHlwZTsgb2JqID0gb2JqLnZpYSlcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob2JqLnR5cGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmV2ZXJzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaC5uZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdHlwZSwgbmV4dCB9ID0gbWF0Y2gubmV4dFtpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXR5cGUuaXNMZWFmICYmICF0eXBlLmhhc1JlcXVpcmVkQXR0cnMoKSAmJiAhKHR5cGUubmFtZSBpbiBzZWVuKSAmJiAoIWN1cnJlbnQudHlwZSB8fCBuZXh0LnZhbGlkRW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmUucHVzaCh7IG1hdGNoOiB0eXBlLmNvbnRlbnRNYXRjaCwgdHlwZSwgdmlhOiBjdXJyZW50IH0pO1xuICAgICAgICAgICAgICAgICAgICBzZWVuW3R5cGUubmFtZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyB0aGlzIG5vZGUgaGFzIGluIHRoZSBmaW5pdGVcbiAgICBhdXRvbWF0b24gdGhhdCBkZXNjcmliZXMgdGhlIGNvbnRlbnQgZXhwcmVzc2lvbi5cbiAgICAqL1xuICAgIGdldCBlZGdlQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQubGVuZ3RoO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIF9uX+KAi3RoIG91dGdvaW5nIGVkZ2UgZnJvbSB0aGlzIG5vZGUgaW4gdGhlIGZpbml0ZVxuICAgIGF1dG9tYXRvbiB0aGF0IGRlc2NyaWJlcyB0aGUgY29udGVudCBleHByZXNzaW9uLlxuICAgICovXG4gICAgZWRnZShuKSB7XG4gICAgICAgIGlmIChuID49IHRoaXMubmV4dC5sZW5ndGgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVGhlcmUncyBubyAke259dGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2hgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dFtuXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHNlZW4gPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gc2NhbihtKSB7XG4gICAgICAgICAgICBzZWVuLnB1c2gobSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG0ubmV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5pbmRleE9mKG0ubmV4dFtpXS5uZXh0KSA9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgc2NhbihtLm5leHRbaV0ubmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgc2Nhbih0aGlzKTtcbiAgICAgICAgcmV0dXJuIHNlZW4ubWFwKChtLCBpKSA9PiB7XG4gICAgICAgICAgICBsZXQgb3V0ID0gaSArIChtLnZhbGlkRW5kID8gXCIqXCIgOiBcIiBcIikgKyBcIiBcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbS5uZXh0Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIG91dCArPSAoaSA/IFwiLCBcIiA6IFwiXCIpICsgbS5uZXh0W2ldLnR5cGUubmFtZSArIFwiLT5cIiArIHNlZW4uaW5kZXhPZihtLm5leHRbaV0ubmV4dCk7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgIH1cbn1cbi8qKlxuQGludGVybmFsXG4qL1xuQ29udGVudE1hdGNoLmVtcHR5ID0gbmV3IENvbnRlbnRNYXRjaCh0cnVlKTtcbmNsYXNzIFRva2VuU3RyZWFtIHtcbiAgICBjb25zdHJ1Y3RvcihzdHJpbmcsIG5vZGVUeXBlcykge1xuICAgICAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgICAgICAgdGhpcy5ub2RlVHlwZXMgPSBub2RlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5saW5lID0gbnVsbDtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLnRva2VucyA9IHN0cmluZy5zcGxpdCgvXFxzKig/PVxcYnxcXFd8JCkvKTtcbiAgICAgICAgaWYgKHRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aCAtIDFdID09IFwiXCIpXG4gICAgICAgICAgICB0aGlzLnRva2Vucy5wb3AoKTtcbiAgICAgICAgaWYgKHRoaXMudG9rZW5zWzBdID09IFwiXCIpXG4gICAgICAgICAgICB0aGlzLnRva2Vucy5zaGlmdCgpO1xuICAgIH1cbiAgICBnZXQgbmV4dCgpIHsgcmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXTsgfVxuICAgIGVhdCh0b2spIHsgcmV0dXJuIHRoaXMubmV4dCA9PSB0b2sgJiYgKHRoaXMucG9zKysgfHwgdHJ1ZSk7IH1cbiAgICBlcnIoc3RyKSB7IHRocm93IG5ldyBTeW50YXhFcnJvcihzdHIgKyBcIiAoaW4gY29udGVudCBleHByZXNzaW9uICdcIiArIHRoaXMuc3RyaW5nICsgXCInKVwiKTsgfVxufVxuZnVuY3Rpb24gcGFyc2VFeHByKHN0cmVhbSkge1xuICAgIGxldCBleHBycyA9IFtdO1xuICAgIGRvIHtcbiAgICAgICAgZXhwcnMucHVzaChwYXJzZUV4cHJTZXEoc3RyZWFtKSk7XG4gICAgfSB3aGlsZSAoc3RyZWFtLmVhdChcInxcIikpO1xuICAgIHJldHVybiBleHBycy5sZW5ndGggPT0gMSA/IGV4cHJzWzBdIDogeyB0eXBlOiBcImNob2ljZVwiLCBleHBycyB9O1xufVxuZnVuY3Rpb24gcGFyc2VFeHByU2VxKHN0cmVhbSkge1xuICAgIGxldCBleHBycyA9IFtdO1xuICAgIGRvIHtcbiAgICAgICAgZXhwcnMucHVzaChwYXJzZUV4cHJTdWJzY3JpcHQoc3RyZWFtKSk7XG4gICAgfSB3aGlsZSAoc3RyZWFtLm5leHQgJiYgc3RyZWFtLm5leHQgIT0gXCIpXCIgJiYgc3RyZWFtLm5leHQgIT0gXCJ8XCIpO1xuICAgIHJldHVybiBleHBycy5sZW5ndGggPT0gMSA/IGV4cHJzWzBdIDogeyB0eXBlOiBcInNlcVwiLCBleHBycyB9O1xufVxuZnVuY3Rpb24gcGFyc2VFeHByU3Vic2NyaXB0KHN0cmVhbSkge1xuICAgIGxldCBleHByID0gcGFyc2VFeHByQXRvbShzdHJlYW0pO1xuICAgIGZvciAoOzspIHtcbiAgICAgICAgaWYgKHN0cmVhbS5lYXQoXCIrXCIpKVxuICAgICAgICAgICAgZXhwciA9IHsgdHlwZTogXCJwbHVzXCIsIGV4cHIgfTtcbiAgICAgICAgZWxzZSBpZiAoc3RyZWFtLmVhdChcIipcIikpXG4gICAgICAgICAgICBleHByID0geyB0eXBlOiBcInN0YXJcIiwgZXhwciB9O1xuICAgICAgICBlbHNlIGlmIChzdHJlYW0uZWF0KFwiP1wiKSlcbiAgICAgICAgICAgIGV4cHIgPSB7IHR5cGU6IFwib3B0XCIsIGV4cHIgfTtcbiAgICAgICAgZWxzZSBpZiAoc3RyZWFtLmVhdChcIntcIikpXG4gICAgICAgICAgICBleHByID0gcGFyc2VFeHByUmFuZ2Uoc3RyZWFtLCBleHByKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBleHByO1xufVxuZnVuY3Rpb24gcGFyc2VOdW0oc3RyZWFtKSB7XG4gICAgaWYgKC9cXEQvLnRlc3Qoc3RyZWFtLm5leHQpKVxuICAgICAgICBzdHJlYW0uZXJyKFwiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJ1wiICsgc3RyZWFtLm5leHQgKyBcIidcIik7XG4gICAgbGV0IHJlc3VsdCA9IE51bWJlcihzdHJlYW0ubmV4dCk7XG4gICAgc3RyZWFtLnBvcysrO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBwYXJzZUV4cHJSYW5nZShzdHJlYW0sIGV4cHIpIHtcbiAgICBsZXQgbWluID0gcGFyc2VOdW0oc3RyZWFtKSwgbWF4ID0gbWluO1xuICAgIGlmIChzdHJlYW0uZWF0KFwiLFwiKSkge1xuICAgICAgICBpZiAoc3RyZWFtLm5leHQgIT0gXCJ9XCIpXG4gICAgICAgICAgICBtYXggPSBwYXJzZU51bShzdHJlYW0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBtYXggPSAtMTtcbiAgICB9XG4gICAgaWYgKCFzdHJlYW0uZWF0KFwifVwiKSlcbiAgICAgICAgc3RyZWFtLmVycihcIlVuY2xvc2VkIGJyYWNlZCByYW5nZVwiKTtcbiAgICByZXR1cm4geyB0eXBlOiBcInJhbmdlXCIsIG1pbiwgbWF4LCBleHByIH07XG59XG5mdW5jdGlvbiByZXNvbHZlTmFtZShzdHJlYW0sIG5hbWUpIHtcbiAgICBsZXQgdHlwZXMgPSBzdHJlYW0ubm9kZVR5cGVzLCB0eXBlID0gdHlwZXNbbmFtZV07XG4gICAgaWYgKHR5cGUpXG4gICAgICAgIHJldHVybiBbdHlwZV07XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IHR5cGVOYW1lIGluIHR5cGVzKSB7XG4gICAgICAgIGxldCB0eXBlID0gdHlwZXNbdHlwZU5hbWVdO1xuICAgICAgICBpZiAodHlwZS5ncm91cHMuaW5kZXhPZihuYW1lKSA+IC0xKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2godHlwZSk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQubGVuZ3RoID09IDApXG4gICAgICAgIHN0cmVhbS5lcnIoXCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJ1wiICsgbmFtZSArIFwiJyBmb3VuZFwiKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGFyc2VFeHByQXRvbShzdHJlYW0pIHtcbiAgICBpZiAoc3RyZWFtLmVhdChcIihcIikpIHtcbiAgICAgICAgbGV0IGV4cHIgPSBwYXJzZUV4cHIoc3RyZWFtKTtcbiAgICAgICAgaWYgKCFzdHJlYW0uZWF0KFwiKVwiKSlcbiAgICAgICAgICAgIHN0cmVhbS5lcnIoXCJNaXNzaW5nIGNsb3NpbmcgcGFyZW5cIik7XG4gICAgICAgIHJldHVybiBleHByO1xuICAgIH1cbiAgICBlbHNlIGlmICghL1xcVy8udGVzdChzdHJlYW0ubmV4dCkpIHtcbiAgICAgICAgbGV0IGV4cHJzID0gcmVzb2x2ZU5hbWUoc3RyZWFtLCBzdHJlYW0ubmV4dCkubWFwKHR5cGUgPT4ge1xuICAgICAgICAgICAgaWYgKHN0cmVhbS5pbmxpbmUgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBzdHJlYW0uaW5saW5lID0gdHlwZS5pc0lubGluZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHN0cmVhbS5pbmxpbmUgIT0gdHlwZS5pc0lubGluZSlcbiAgICAgICAgICAgICAgICBzdHJlYW0uZXJyKFwiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudFwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IFwibmFtZVwiLCB2YWx1ZTogdHlwZSB9O1xuICAgICAgICB9KTtcbiAgICAgICAgc3RyZWFtLnBvcysrO1xuICAgICAgICByZXR1cm4gZXhwcnMubGVuZ3RoID09IDEgPyBleHByc1swXSA6IHsgdHlwZTogXCJjaG9pY2VcIiwgZXhwcnMgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN0cmVhbS5lcnIoXCJVbmV4cGVjdGVkIHRva2VuICdcIiArIHN0cmVhbS5uZXh0ICsgXCInXCIpO1xuICAgIH1cbn1cbi8qKlxuQ29uc3RydWN0IGFuIE5GQSBmcm9tIGFuIGV4cHJlc3Npb24gYXMgcmV0dXJuZWQgYnkgdGhlIHBhcnNlci4gVGhlXG5ORkEgaXMgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2Ygc3RhdGVzLCB3aGljaCBhcmUgdGhlbXNlbHZlc1xuYXJyYXlzIG9mIGVkZ2VzLCB3aGljaCBhcmUgYHt0ZXJtLCB0b31gIG9iamVjdHMuIFRoZSBmaXJzdCBzdGF0ZSBpc1xudGhlIGVudHJ5IHN0YXRlIGFuZCB0aGUgbGFzdCBub2RlIGlzIHRoZSBzdWNjZXNzIHN0YXRlLlxuXG5Ob3RlIHRoYXQgdW5saWtlIHR5cGljYWwgTkZBcywgdGhlIGVkZ2Ugb3JkZXJpbmcgaW4gdGhpcyBvbmUgaXNcbnNpZ25pZmljYW50LCBpbiB0aGF0IGl0IGlzIHVzZWQgdG8gY29udHJ1Y3QgZmlsbGVyIGNvbnRlbnQgd2hlblxubmVjZXNzYXJ5LlxuKi9cbmZ1bmN0aW9uIG5mYShleHByKSB7XG4gICAgbGV0IG5mYSA9IFtbXV07XG4gICAgY29ubmVjdChjb21waWxlKGV4cHIsIDApLCBub2RlKCkpO1xuICAgIHJldHVybiBuZmE7XG4gICAgZnVuY3Rpb24gbm9kZSgpIHsgcmV0dXJuIG5mYS5wdXNoKFtdKSAtIDE7IH1cbiAgICBmdW5jdGlvbiBlZGdlKGZyb20sIHRvLCB0ZXJtKSB7XG4gICAgICAgIGxldCBlZGdlID0geyB0ZXJtLCB0byB9O1xuICAgICAgICBuZmFbZnJvbV0ucHVzaChlZGdlKTtcbiAgICAgICAgcmV0dXJuIGVkZ2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNvbm5lY3QoZWRnZXMsIHRvKSB7XG4gICAgICAgIGVkZ2VzLmZvckVhY2goZWRnZSA9PiBlZGdlLnRvID0gdG8pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb21waWxlKGV4cHIsIGZyb20pIHtcbiAgICAgICAgaWYgKGV4cHIudHlwZSA9PSBcImNob2ljZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhwci5leHBycy5yZWR1Y2UoKG91dCwgZXhwcikgPT4gb3V0LmNvbmNhdChjb21waWxlKGV4cHIsIGZyb20pKSwgW10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cHIudHlwZSA9PSBcInNlcVwiKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDs7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY29tcGlsZShleHByLmV4cHJzW2ldLCBmcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBleHByLmV4cHJzLmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgICAgIGNvbm5lY3QobmV4dCwgZnJvbSA9IG5vZGUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwci50eXBlID09IFwic3RhclwiKSB7XG4gICAgICAgICAgICBsZXQgbG9vcCA9IG5vZGUoKTtcbiAgICAgICAgICAgIGVkZ2UoZnJvbSwgbG9vcCk7XG4gICAgICAgICAgICBjb25uZWN0KGNvbXBpbGUoZXhwci5leHByLCBsb29wKSwgbG9vcCk7XG4gICAgICAgICAgICByZXR1cm4gW2VkZ2UobG9vcCldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cHIudHlwZSA9PSBcInBsdXNcIikge1xuICAgICAgICAgICAgbGV0IGxvb3AgPSBub2RlKCk7XG4gICAgICAgICAgICBjb25uZWN0KGNvbXBpbGUoZXhwci5leHByLCBmcm9tKSwgbG9vcCk7XG4gICAgICAgICAgICBjb25uZWN0KGNvbXBpbGUoZXhwci5leHByLCBsb29wKSwgbG9vcCk7XG4gICAgICAgICAgICByZXR1cm4gW2VkZ2UobG9vcCldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cHIudHlwZSA9PSBcIm9wdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW2VkZ2UoZnJvbSldLmNvbmNhdChjb21waWxlKGV4cHIuZXhwciwgZnJvbSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cHIudHlwZSA9PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSBmcm9tO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHByLm1pbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2RlKCk7XG4gICAgICAgICAgICAgICAgY29ubmVjdChjb21waWxlKGV4cHIuZXhwciwgY3VyKSwgbmV4dCk7XG4gICAgICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHByLm1heCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbm5lY3QoY29tcGlsZShleHByLmV4cHIsIGN1ciksIGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZXhwci5taW47IGkgPCBleHByLm1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gbm9kZSgpO1xuICAgICAgICAgICAgICAgICAgICBlZGdlKGN1ciwgbmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3QoY29tcGlsZShleHByLmV4cHIsIGN1ciksIG5leHQpO1xuICAgICAgICAgICAgICAgICAgICBjdXIgPSBuZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbZWRnZShjdXIpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHByLnR5cGUgPT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbZWRnZShmcm9tLCB1bmRlZmluZWQsIGV4cHIudmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gZXhwciB0eXBlXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY21wKGEsIGIpIHsgcmV0dXJuIGIgLSBhOyB9XG4vLyBHZXQgdGhlIHNldCBvZiBub2RlcyByZWFjaGFibGUgYnkgbnVsbCBlZGdlcyBmcm9tIGBub2RlYC4gT21pdFxuLy8gbm9kZXMgd2l0aCBvbmx5IGEgc2luZ2xlIG51bGwtb3V0LWVkZ2UsIHNpbmNlIHRoZXkgbWF5IGxlYWQgdG9cbi8vIG5lZWRsZXNzIGR1cGxpY2F0ZWQgbm9kZXMuXG5mdW5jdGlvbiBudWxsRnJvbShuZmEsIG5vZGUpIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgc2Nhbihub2RlKTtcbiAgICByZXR1cm4gcmVzdWx0LnNvcnQoY21wKTtcbiAgICBmdW5jdGlvbiBzY2FuKG5vZGUpIHtcbiAgICAgICAgbGV0IGVkZ2VzID0gbmZhW25vZGVdO1xuICAgICAgICBpZiAoZWRnZXMubGVuZ3RoID09IDEgJiYgIWVkZ2VzWzBdLnRlcm0pXG4gICAgICAgICAgICByZXR1cm4gc2NhbihlZGdlc1swXS50byk7XG4gICAgICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyB0ZXJtLCB0byB9ID0gZWRnZXNbaV07XG4gICAgICAgICAgICBpZiAoIXRlcm0gJiYgcmVzdWx0LmluZGV4T2YodG8pID09IC0xKVxuICAgICAgICAgICAgICAgIHNjYW4odG8pO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gQ29tcGlsZXMgYW4gTkZBIGFzIHByb2R1Y2VkIGJ5IGBuZmFgIGludG8gYSBERkEsIG1vZGVsZWQgYXMgYSBzZXRcbi8vIG9mIHN0YXRlIG9iamVjdHMgKGBDb250ZW50TWF0Y2hgIGluc3RhbmNlcykgd2l0aCB0cmFuc2l0aW9uc1xuLy8gYmV0d2VlbiB0aGVtLlxuZnVuY3Rpb24gZGZhKG5mYSkge1xuICAgIGxldCBsYWJlbGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gZXhwbG9yZShudWxsRnJvbShuZmEsIDApKTtcbiAgICBmdW5jdGlvbiBleHBsb3JlKHN0YXRlcykge1xuICAgICAgICBsZXQgb3V0ID0gW107XG4gICAgICAgIHN0YXRlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgbmZhW25vZGVdLmZvckVhY2goKHsgdGVybSwgdG8gfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGVybSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBzZXQ7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRbaV1bMF0gPT0gdGVybSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldCA9IG91dFtpXVsxXTtcbiAgICAgICAgICAgICAgICBudWxsRnJvbShuZmEsIHRvKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNldClcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dC5wdXNoKFt0ZXJtLCBzZXQgPSBbXV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0LmluZGV4T2Yobm9kZSkgPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHN0YXRlID0gbGFiZWxlZFtzdGF0ZXMuam9pbihcIixcIildID0gbmV3IENvbnRlbnRNYXRjaChzdGF0ZXMuaW5kZXhPZihuZmEubGVuZ3RoIC0gMSkgPiAtMSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVzID0gb3V0W2ldWzFdLnNvcnQoY21wKTtcbiAgICAgICAgICAgIHN0YXRlLm5leHQucHVzaCh7IHR5cGU6IG91dFtpXVswXSwgbmV4dDogbGFiZWxlZFtzdGF0ZXMuam9pbihcIixcIildIHx8IGV4cGxvcmUoc3RhdGVzKSB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tGb3JEZWFkRW5kcyhtYXRjaCwgc3RyZWFtKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIHdvcmsgPSBbbWF0Y2hdOyBpIDwgd29yay5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3RhdGUgPSB3b3JrW2ldLCBkZWFkID0gIXN0YXRlLnZhbGlkRW5kLCBub2RlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN0YXRlLm5leHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGxldCB7IHR5cGUsIG5leHQgfSA9IHN0YXRlLm5leHRbal07XG4gICAgICAgICAgICBub2Rlcy5wdXNoKHR5cGUubmFtZSk7XG4gICAgICAgICAgICBpZiAoZGVhZCAmJiAhKHR5cGUuaXNUZXh0IHx8IHR5cGUuaGFzUmVxdWlyZWRBdHRycygpKSlcbiAgICAgICAgICAgICAgICBkZWFkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAod29yay5pbmRleE9mKG5leHQpID09IC0xKVxuICAgICAgICAgICAgICAgIHdvcmsucHVzaChuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVhZClcbiAgICAgICAgICAgIHN0cmVhbS5lcnIoXCJPbmx5IG5vbi1nZW5lcmF0YWJsZSBub2RlcyAoXCIgKyBub2Rlcy5qb2luKFwiLCBcIikgKyBcIikgaW4gYSByZXF1aXJlZCBwb3NpdGlvbiAoc2VlIGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvZ3VpZGUvI2dlbmVyYXRhYmxlKVwiKTtcbiAgICB9XG59XG5cbi8vIEZvciBub2RlIHR5cGVzIHdoZXJlIGFsbCBhdHRycyBoYXZlIGEgZGVmYXVsdCB2YWx1ZSAob3Igd2hpY2ggZG9uJ3Rcbi8vIGhhdmUgYW55IGF0dHJpYnV0ZXMpLCBidWlsZCB1cCBhIHNpbmdsZSByZXVzYWJsZSBkZWZhdWx0IGF0dHJpYnV0ZVxuLy8gb2JqZWN0LCBhbmQgdXNlIGl0IGZvciBhbGwgbm9kZXMgdGhhdCBkb24ndCBzcGVjaWZ5IHNwZWNpZmljXG4vLyBhdHRyaWJ1dGVzLlxuZnVuY3Rpb24gZGVmYXVsdEF0dHJzKGF0dHJzKSB7XG4gICAgbGV0IGRlZmF1bHRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBhdHRyTmFtZSBpbiBhdHRycykge1xuICAgICAgICBsZXQgYXR0ciA9IGF0dHJzW2F0dHJOYW1lXTtcbiAgICAgICAgaWYgKCFhdHRyLmhhc0RlZmF1bHQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZGVmYXVsdHNbYXR0ck5hbWVdID0gYXR0ci5kZWZhdWx0O1xuICAgIH1cbiAgICByZXR1cm4gZGVmYXVsdHM7XG59XG5mdW5jdGlvbiBjb21wdXRlQXR0cnMoYXR0cnMsIHZhbHVlKSB7XG4gICAgbGV0IGJ1aWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKSB7XG4gICAgICAgIGxldCBnaXZlbiA9IHZhbHVlICYmIHZhbHVlW25hbWVdO1xuICAgICAgICBpZiAoZ2l2ZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGV0IGF0dHIgPSBhdHRyc1tuYW1lXTtcbiAgICAgICAgICAgIGlmIChhdHRyLmhhc0RlZmF1bHQpXG4gICAgICAgICAgICAgICAgZ2l2ZW4gPSBhdHRyLmRlZmF1bHQ7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlIFwiICsgbmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbHRbbmFtZV0gPSBnaXZlbjtcbiAgICB9XG4gICAgcmV0dXJuIGJ1aWx0O1xufVxuZnVuY3Rpb24gaW5pdEF0dHJzKGF0dHJzKSB7XG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKGF0dHJzKVxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKVxuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gbmV3IEF0dHJpYnV0ZShhdHRyc1tuYW1lXSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuTm9kZSB0eXBlcyBhcmUgb2JqZWN0cyBhbGxvY2F0ZWQgb25jZSBwZXIgYFNjaGVtYWAgYW5kIHVzZWQgdG9cblt0YWddKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnR5cGUpIGBOb2RlYCBpbnN0YW5jZXMuIFRoZXkgY29udGFpbiBpbmZvcm1hdGlvblxuYWJvdXQgdGhlIG5vZGUgdHlwZSwgc3VjaCBhcyBpdHMgbmFtZSBhbmQgd2hhdCBraW5kIG9mIG5vZGUgaXRcbnJlcHJlc2VudHMuXG4qL1xuY2xhc3MgTm9kZVR5cGUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIG5hbWUgdGhlIG5vZGUgdHlwZSBoYXMgaW4gdGhpcyBzY2hlbWEuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBBIGxpbmsgYmFjayB0byB0aGUgYFNjaGVtYWAgdGhlIG5vZGUgdHlwZSBiZWxvbmdzIHRvLlxuICAgICovXG4gICAgc2NoZW1hLCBcbiAgICAvKipcbiAgICBUaGUgc3BlYyB0aGF0IHRoaXMgdHlwZSBpcyBiYXNlZCBvblxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBzZXQgb2YgbWFya3MgYWxsb3dlZCBpbiB0aGlzIG5vZGUuIGBudWxsYCBtZWFucyBhbGwgbWFya3NcbiAgICAgICAgYXJlIGFsbG93ZWQuXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubWFya1NldCA9IG51bGw7XG4gICAgICAgIHRoaXMuZ3JvdXBzID0gc3BlYy5ncm91cCA/IHNwZWMuZ3JvdXAuc3BsaXQoXCIgXCIpIDogW107XG4gICAgICAgIHRoaXMuYXR0cnMgPSBpbml0QXR0cnMoc3BlYy5hdHRycyk7XG4gICAgICAgIHRoaXMuZGVmYXVsdEF0dHJzID0gZGVmYXVsdEF0dHJzKHRoaXMuYXR0cnMpO1xuICAgICAgICB0aGlzLmNvbnRlbnRNYXRjaCA9IG51bGw7XG4gICAgICAgIHRoaXMuaW5saW5lQ29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNCbG9jayA9ICEoc3BlYy5pbmxpbmUgfHwgbmFtZSA9PSBcInRleHRcIik7XG4gICAgICAgIHRoaXMuaXNUZXh0ID0gbmFtZSA9PSBcInRleHRcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSBpZiB0aGlzIGlzIGFuIGlubGluZSB0eXBlLlxuICAgICovXG4gICAgZ2V0IGlzSW5saW5lKCkgeyByZXR1cm4gIXRoaXMuaXNCbG9jazsgfVxuICAgIC8qKlxuICAgIFRydWUgaWYgdGhpcyBpcyBhIHRleHRibG9jayB0eXBlLCBhIGJsb2NrIHRoYXQgY29udGFpbnMgaW5saW5lXG4gICAgY29udGVudC5cbiAgICAqL1xuICAgIGdldCBpc1RleHRibG9jaygpIHsgcmV0dXJuIHRoaXMuaXNCbG9jayAmJiB0aGlzLmlubGluZUNvbnRlbnQ7IH1cbiAgICAvKipcbiAgICBUcnVlIGZvciBub2RlIHR5cGVzIHRoYXQgYWxsb3cgbm8gY29udGVudC5cbiAgICAqL1xuICAgIGdldCBpc0xlYWYoKSB7IHJldHVybiB0aGlzLmNvbnRlbnRNYXRjaCA9PSBDb250ZW50TWF0Y2guZW1wdHk7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBub2RlIGlzIGFuIGF0b20sIGkuZS4gd2hlbiBpdCBkb2VzIG5vdCBoYXZlXG4gICAgZGlyZWN0bHkgZWRpdGFibGUgY29udGVudC5cbiAgICAqL1xuICAgIGdldCBpc0F0b20oKSB7IHJldHVybiB0aGlzLmlzTGVhZiB8fCAhIXRoaXMuc3BlYy5hdG9tOyB9XG4gICAgLyoqXG4gICAgVGhlIG5vZGUgdHlwZSdzIFt3aGl0ZXNwYWNlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMud2hpdGVzcGFjZSkgb3B0aW9uLlxuICAgICovXG4gICAgZ2V0IHdoaXRlc3BhY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwZWMud2hpdGVzcGFjZSB8fCAodGhpcy5zcGVjLmNvZGUgPyBcInByZVwiIDogXCJub3JtYWxcIik7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoaXMgbm9kZSB0eXBlIGhhcyBhbnkgcmVxdWlyZWQgYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIGhhc1JlcXVpcmVkQXR0cnMoKSB7XG4gICAgICAgIGZvciAobGV0IG4gaW4gdGhpcy5hdHRycylcbiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJzW25dLmlzUmVxdWlyZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhpcyBub2RlIGFsbG93cyBzb21lIG9mIHRoZSBzYW1lIGNvbnRlbnQgYXNcbiAgICB0aGUgZ2l2ZW4gbm9kZSB0eXBlLlxuICAgICovXG4gICAgY29tcGF0aWJsZUNvbnRlbnQob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgdGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZShvdGhlci5jb250ZW50TWF0Y2gpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXB1dGVBdHRycyhhdHRycykge1xuICAgICAgICBpZiAoIWF0dHJzICYmIHRoaXMuZGVmYXVsdEF0dHJzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdEF0dHJzO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZUF0dHJzKHRoaXMuYXR0cnMsIGF0dHJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgYE5vZGVgIG9mIHRoaXMgdHlwZS4gVGhlIGdpdmVuIGF0dHJpYnV0ZXMgYXJlXG4gICAgY2hlY2tlZCBhbmQgZGVmYXVsdGVkICh5b3UgY2FuIHBhc3MgYG51bGxgIHRvIHVzZSB0aGUgdHlwZSdzXG4gICAgZGVmYXVsdHMgZW50aXJlbHksIGlmIG5vIHJlcXVpcmVkIGF0dHJpYnV0ZXMgZXhpc3QpLiBgY29udGVudGBcbiAgICBtYXkgYmUgYSBgRnJhZ21lbnRgLCBhIG5vZGUsIGFuIGFycmF5IG9mIG5vZGVzLCBvclxuICAgIGBudWxsYC4gU2ltaWxhcmx5IGBtYXJrc2AgbWF5IGJlIGBudWxsYCB0byBkZWZhdWx0IHRvIHRoZSBlbXB0eVxuICAgIHNldCBvZiBtYXJrcy5cbiAgICAqL1xuICAgIGNyZWF0ZShhdHRycyA9IG51bGwsIGNvbnRlbnQsIG1hcmtzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVGV4dClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2Rlc1wiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMsIHRoaXMuY29tcHV0ZUF0dHJzKGF0dHJzKSwgRnJhZ21lbnQuZnJvbShjb250ZW50KSwgTWFyay5zZXRGcm9tKG1hcmtzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIExpa2UgW2BjcmVhdGVgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVR5cGUuY3JlYXRlKSwgYnV0IGNoZWNrIHRoZSBnaXZlbiBjb250ZW50XG4gICAgYWdhaW5zdCB0aGUgbm9kZSB0eXBlJ3MgY29udGVudCByZXN0cmljdGlvbnMsIGFuZCB0aHJvdyBhbiBlcnJvclxuICAgIGlmIGl0IGRvZXNuJ3QgbWF0Y2guXG4gICAgKi9cbiAgICBjcmVhdGVDaGVja2VkKGF0dHJzID0gbnVsbCwgY29udGVudCwgbWFya3MpIHtcbiAgICAgICAgY29udGVudCA9IEZyYWdtZW50LmZyb20oY29udGVudCk7XG4gICAgICAgIHRoaXMuY2hlY2tDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGUodGhpcywgdGhpcy5jb21wdXRlQXR0cnMoYXR0cnMpLCBjb250ZW50LCBNYXJrLnNldEZyb20obWFya3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTGlrZSBbYGNyZWF0ZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlVHlwZS5jcmVhdGUpLCBidXQgc2VlIGlmIGl0IGlzXG4gICAgbmVjZXNzYXJ5IHRvIGFkZCBub2RlcyB0byB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBnaXZlbiBmcmFnbWVudFxuICAgIHRvIG1ha2UgaXQgZml0IHRoZSBub2RlLiBJZiBubyBmaXR0aW5nIHdyYXBwaW5nIGNhbiBiZSBmb3VuZCxcbiAgICByZXR1cm4gbnVsbC4gTm90ZSB0aGF0LCBkdWUgdG8gdGhlIGZhY3QgdGhhdCByZXF1aXJlZCBub2RlcyBjYW5cbiAgICBhbHdheXMgYmUgY3JlYXRlZCwgdGhpcyB3aWxsIGFsd2F5cyBzdWNjZWVkIGlmIHlvdSBwYXNzIG51bGwgb3JcbiAgICBgRnJhZ21lbnQuZW1wdHlgIGFzIGNvbnRlbnQuXG4gICAgKi9cbiAgICBjcmVhdGVBbmRGaWxsKGF0dHJzID0gbnVsbCwgY29udGVudCwgbWFya3MpIHtcbiAgICAgICAgYXR0cnMgPSB0aGlzLmNvbXB1dGVBdHRycyhhdHRycyk7XG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKGNvbnRlbnQpO1xuICAgICAgICBpZiAoY29udGVudC5zaXplKSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gdGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShjb250ZW50KTtcbiAgICAgICAgICAgIGlmICghYmVmb3JlKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29udGVudCA9IGJlZm9yZS5hcHBlbmQoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdGNoZWQgPSB0aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGNvbnRlbnQpO1xuICAgICAgICBsZXQgYWZ0ZXIgPSBtYXRjaGVkICYmIG1hdGNoZWQuZmlsbEJlZm9yZShGcmFnbWVudC5lbXB0eSwgdHJ1ZSk7XG4gICAgICAgIGlmICghYWZ0ZXIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMsIGF0dHJzLCBjb250ZW50LmFwcGVuZChhZnRlciksIE1hcmsuc2V0RnJvbShtYXJrcykpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZyYWdtZW50IGlzIHZhbGlkIGNvbnRlbnQgZm9yIHRoaXMgbm9kZVxuICAgIHR5cGUgd2l0aCB0aGUgZ2l2ZW4gYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIHZhbGlkQ29udGVudChjb250ZW50KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGNvbnRlbnQpO1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LnZhbGlkRW5kKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQuY2hpbGRDb3VudDsgaSsrKVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93c01hcmtzKGNvbnRlbnQuY2hpbGQoaSkubWFya3MpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRocm93cyBhIFJhbmdlRXJyb3IgaWYgdGhlIGdpdmVuIGZyYWdtZW50IGlzIG5vdCB2YWxpZCBjb250ZW50IGZvciB0aGlzXG4gICAgbm9kZSB0eXBlLlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY2hlY2tDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkQ29udGVudChjb250ZW50KSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgJHt0aGlzLm5hbWV9OiAke2NvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLCA1MCl9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIG1hcmsgdHlwZSBpcyBhbGxvd2VkIGluIHRoaXMgbm9kZS5cbiAgICAqL1xuICAgIGFsbG93c01hcmtUeXBlKG1hcmtUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtTZXQgPT0gbnVsbCB8fCB0aGlzLm1hcmtTZXQuaW5kZXhPZihtYXJrVHlwZSkgPiAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoZSBnaXZlbiBzZXQgb2YgbWFya3MgYXJlIGFsbG93ZWQgaW4gdGhpcyBub2RlLlxuICAgICovXG4gICAgYWxsb3dzTWFya3MobWFya3MpIHtcbiAgICAgICAgaWYgKHRoaXMubWFya1NldCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dzTWFya1R5cGUobWFya3NbaV0udHlwZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlcyB0aGUgbWFya3MgdGhhdCBhcmUgbm90IGFsbG93ZWQgaW4gdGhpcyBub2RlIGZyb20gdGhlIGdpdmVuIHNldC5cbiAgICAqL1xuICAgIGFsbG93ZWRNYXJrcyhtYXJrcykge1xuICAgICAgICBpZiAodGhpcy5tYXJrU2V0ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgICAgIGxldCBjb3B5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dzTWFya1R5cGUobWFya3NbaV0udHlwZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvcHkpXG4gICAgICAgICAgICAgICAgICAgIGNvcHkgPSBtYXJrcy5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvcHkpIHtcbiAgICAgICAgICAgICAgICBjb3B5LnB1c2gobWFya3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhY29weSA/IG1hcmtzIDogY29weS5sZW5ndGggPyBjb3B5IDogTWFyay5ub25lO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjb21waWxlKG5vZGVzLCBzY2hlbWEpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIG5vZGVzLmZvckVhY2goKG5hbWUsIHNwZWMpID0+IHJlc3VsdFtuYW1lXSA9IG5ldyBOb2RlVHlwZShuYW1lLCBzY2hlbWEsIHNwZWMpKTtcbiAgICAgICAgbGV0IHRvcFR5cGUgPSBzY2hlbWEuc3BlYy50b3BOb2RlIHx8IFwiZG9jXCI7XG4gICAgICAgIGlmICghcmVzdWx0W3RvcFR5cGVdKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJ1wiICsgdG9wVHlwZSArIFwiJylcIik7XG4gICAgICAgIGlmICghcmVzdWx0LnRleHQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlXCIpO1xuICAgICAgICBmb3IgKGxldCBfIGluIHJlc3VsdC50ZXh0LmF0dHJzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLy8gQXR0cmlidXRlIGRlc2NyaXB0b3JzXG5jbGFzcyBBdHRyaWJ1dGUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5oYXNEZWZhdWx0ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIFwiZGVmYXVsdFwiKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gb3B0aW9ucy5kZWZhdWx0O1xuICAgIH1cbiAgICBnZXQgaXNSZXF1aXJlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhhc0RlZmF1bHQ7XG4gICAgfVxufVxuLy8gTWFya3Ncbi8qKlxuTGlrZSBub2RlcywgbWFya3MgKHdoaWNoIGFyZSBhc3NvY2lhdGVkIHdpdGggbm9kZXMgdG8gc2lnbmlmeVxudGhpbmdzIGxpa2UgZW1waGFzaXMgb3IgYmVpbmcgcGFydCBvZiBhIGxpbmspIGFyZVxuW3RhZ2dlZF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmsudHlwZSkgd2l0aCB0eXBlIG9iamVjdHMsIHdoaWNoIGFyZVxuaW5zdGFudGlhdGVkIG9uY2UgcGVyIGBTY2hlbWFgLlxuKi9cbmNsYXNzIE1hcmtUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoZSBtYXJrIHR5cGUuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJhbmssIFxuICAgIC8qKlxuICAgIFRoZSBzY2hlbWEgdGhhdCB0aGlzIG1hcmsgdHlwZSBpbnN0YW5jZSBpcyBwYXJ0IG9mLlxuICAgICovXG4gICAgc2NoZW1hLCBcbiAgICAvKipcbiAgICBUaGUgc3BlYyBvbiB3aGljaCB0aGUgdHlwZSBpcyBiYXNlZC5cbiAgICAqL1xuICAgIHNwZWMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBpbml0QXR0cnMoc3BlYy5hdHRycyk7XG4gICAgICAgIHRoaXMuZXhjbHVkZWQgPSBudWxsO1xuICAgICAgICBsZXQgZGVmYXVsdHMgPSBkZWZhdWx0QXR0cnModGhpcy5hdHRycyk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBkZWZhdWx0cyA/IG5ldyBNYXJrKHRoaXMsIGRlZmF1bHRzKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmsgb2YgdGhpcyB0eXBlLiBgYXR0cnNgIG1heSBiZSBgbnVsbGAgb3IgYW4gb2JqZWN0XG4gICAgY29udGFpbmluZyBvbmx5IHNvbWUgb2YgdGhlIG1hcmsncyBhdHRyaWJ1dGVzLiBUaGUgb3RoZXJzLCBpZlxuICAgIHRoZXkgaGF2ZSBkZWZhdWx0cywgd2lsbCBiZSBhZGRlZC5cbiAgICAqL1xuICAgIGNyZWF0ZShhdHRycyA9IG51bGwpIHtcbiAgICAgICAgaWYgKCFhdHRycyAmJiB0aGlzLmluc3RhbmNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gICAgICAgIHJldHVybiBuZXcgTWFyayh0aGlzLCBjb21wdXRlQXR0cnModGhpcy5hdHRycywgYXR0cnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY29tcGlsZShtYXJrcywgc2NoZW1hKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpLCByYW5rID0gMDtcbiAgICAgICAgbWFya3MuZm9yRWFjaCgobmFtZSwgc3BlYykgPT4gcmVzdWx0W25hbWVdID0gbmV3IE1hcmtUeXBlKG5hbWUsIHJhbmsrKywgc2NoZW1hLCBzcGVjKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZW4gdGhlcmUgaXMgYSBtYXJrIG9mIHRoaXMgdHlwZSBpbiB0aGUgZ2l2ZW4gc2V0LCBhIG5ldyBzZXRcbiAgICB3aXRob3V0IGl0IGlzIHJldHVybmVkLiBPdGhlcndpc2UsIHRoZSBpbnB1dCBzZXQgaXMgcmV0dXJuZWQuXG4gICAgKi9cbiAgICByZW1vdmVGcm9tU2V0KHNldCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChzZXRbaV0udHlwZSA9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgc2V0ID0gc2V0LnNsaWNlKDAsIGkpLmNvbmNhdChzZXQuc2xpY2UoaSArIDEpKTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3RzIHdoZXRoZXIgdGhlcmUgaXMgYSBtYXJrIG9mIHRoaXMgdHlwZSBpbiB0aGUgZ2l2ZW4gc2V0LlxuICAgICovXG4gICAgaXNJblNldChzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoc2V0W2ldLnR5cGUgPT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0W2ldO1xuICAgIH1cbiAgICAvKipcbiAgICBRdWVyaWVzIHdoZXRoZXIgYSBnaXZlbiBtYXJrIHR5cGUgaXNcbiAgICBbZXhjbHVkZWRdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5NYXJrU3BlYy5leGNsdWRlcykgYnkgdGhpcyBvbmUuXG4gICAgKi9cbiAgICBleGNsdWRlcyhvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKG90aGVyKSA+IC0xO1xuICAgIH1cbn1cbi8qKlxuQSBkb2N1bWVudCBzY2hlbWEuIEhvbGRzIFtub2RlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVR5cGUpIGFuZCBbbWFya1xudHlwZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmtUeXBlKSBvYmplY3RzIGZvciB0aGUgbm9kZXMgYW5kIG1hcmtzIHRoYXQgbWF5XG5vY2N1ciBpbiBjb25mb3JtaW5nIGRvY3VtZW50cywgYW5kIHByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgZm9yXG5jcmVhdGluZyBhbmQgZGVzZXJpYWxpemluZyBzdWNoIGRvY3VtZW50cy5cblxuV2hlbiBnaXZlbiwgdGhlIHR5cGUgcGFyYW1ldGVycyBwcm92aWRlIHRoZSBuYW1lcyBvZiB0aGUgbm9kZXMgYW5kXG5tYXJrcyBpbiB0aGlzIHNjaGVtYS5cbiovXG5jbGFzcyBTY2hlbWEge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIHNjaGVtYSBmcm9tIGEgc2NoZW1hIFtzcGVjaWZpY2F0aW9uXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuU2NoZW1hU3BlYykuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIC8qKlxuICAgICAgICBBbiBvYmplY3QgZm9yIHN0b3Jpbmcgd2hhdGV2ZXIgdmFsdWVzIG1vZHVsZXMgbWF5IHdhbnQgdG9cbiAgICAgICAgY29tcHV0ZSBhbmQgY2FjaGUgcGVyIHNjaGVtYS4gKElmIHlvdSB3YW50IHRvIHN0b3JlIHNvbWV0aGluZ1xuICAgICAgICBpbiBpdCwgdHJ5IHRvIHVzZSBwcm9wZXJ0eSBuYW1lcyB1bmxpa2VseSB0byBjbGFzaC4pXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgbGV0IGluc3RhbmNlU3BlYyA9IHRoaXMuc3BlYyA9IHt9O1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHNwZWMpXG4gICAgICAgICAgICBpbnN0YW5jZVNwZWNbcHJvcF0gPSBzcGVjW3Byb3BdO1xuICAgICAgICBpbnN0YW5jZVNwZWMubm9kZXMgPSBPcmRlcmVkTWFwLmZyb20oc3BlYy5ub2RlcyksXG4gICAgICAgICAgICBpbnN0YW5jZVNwZWMubWFya3MgPSBPcmRlcmVkTWFwLmZyb20oc3BlYy5tYXJrcyB8fCB7fSksXG4gICAgICAgICAgICB0aGlzLm5vZGVzID0gTm9kZVR5cGUuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsIHRoaXMpO1xuICAgICAgICB0aGlzLm1hcmtzID0gTWFya1R5cGUuY29tcGlsZSh0aGlzLnNwZWMubWFya3MsIHRoaXMpO1xuICAgICAgICBsZXQgY29udGVudEV4cHJDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gdGhpcy5ub2Rlcykge1xuICAgICAgICAgICAgaWYgKHByb3AgaW4gdGhpcy5tYXJrcylcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihwcm9wICsgXCIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrXCIpO1xuICAgICAgICAgICAgbGV0IHR5cGUgPSB0aGlzLm5vZGVzW3Byb3BdLCBjb250ZW50RXhwciA9IHR5cGUuc3BlYy5jb250ZW50IHx8IFwiXCIsIG1hcmtFeHByID0gdHlwZS5zcGVjLm1hcmtzO1xuICAgICAgICAgICAgdHlwZS5jb250ZW50TWF0Y2ggPSBjb250ZW50RXhwckNhY2hlW2NvbnRlbnRFeHByXSB8fFxuICAgICAgICAgICAgICAgIChjb250ZW50RXhwckNhY2hlW2NvbnRlbnRFeHByXSA9IENvbnRlbnRNYXRjaC5wYXJzZShjb250ZW50RXhwciwgdGhpcy5ub2RlcykpO1xuICAgICAgICAgICAgdHlwZS5pbmxpbmVDb250ZW50ID0gdHlwZS5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudDtcbiAgICAgICAgICAgIHR5cGUubWFya1NldCA9IG1hcmtFeHByID09IFwiX1wiID8gbnVsbCA6XG4gICAgICAgICAgICAgICAgbWFya0V4cHIgPyBnYXRoZXJNYXJrcyh0aGlzLCBtYXJrRXhwci5zcGxpdChcIiBcIikpIDpcbiAgICAgICAgICAgICAgICAgICAgbWFya0V4cHIgPT0gXCJcIiB8fCAhdHlwZS5pbmxpbmVDb250ZW50ID8gW10gOiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gdGhpcy5tYXJrcykge1xuICAgICAgICAgICAgbGV0IHR5cGUgPSB0aGlzLm1hcmtzW3Byb3BdLCBleGNsID0gdHlwZS5zcGVjLmV4Y2x1ZGVzO1xuICAgICAgICAgICAgdHlwZS5leGNsdWRlZCA9IGV4Y2wgPT0gbnVsbCA/IFt0eXBlXSA6IGV4Y2wgPT0gXCJcIiA/IFtdIDogZ2F0aGVyTWFya3ModGhpcywgZXhjbC5zcGxpdChcIiBcIikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm9kZUZyb21KU09OID0gdGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tYXJrRnJvbUpTT04gPSB0aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRvcE5vZGVUeXBlID0gdGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZSB8fCBcImRvY1wiXTtcbiAgICAgICAgdGhpcy5jYWNoZWQud3JhcHBpbmdzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbm9kZSBpbiB0aGlzIHNjaGVtYS4gVGhlIGB0eXBlYCBtYXkgYmUgYSBzdHJpbmcgb3IgYVxuICAgIGBOb2RlVHlwZWAgaW5zdGFuY2UuIEF0dHJpYnV0ZXMgd2lsbCBiZSBleHRlbmRlZCB3aXRoIGRlZmF1bHRzLFxuICAgIGBjb250ZW50YCBtYXkgYmUgYSBgRnJhZ21lbnRgLCBgbnVsbGAsIGEgYE5vZGVgLCBvciBhbiBhcnJheSBvZlxuICAgIG5vZGVzLlxuICAgICovXG4gICAgbm9kZSh0eXBlLCBhdHRycyA9IG51bGwsIGNvbnRlbnQsIG1hcmtzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdHlwZSA9IHRoaXMubm9kZVR5cGUodHlwZSk7XG4gICAgICAgIGVsc2UgaWYgKCEodHlwZSBpbnN0YW5jZW9mIE5vZGVUeXBlKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBub2RlIHR5cGU6IFwiICsgdHlwZSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUuc2NoZW1hICE9IHRoaXMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoXCIgKyB0eXBlLm5hbWUgKyBcIilcIik7XG4gICAgICAgIHJldHVybiB0eXBlLmNyZWF0ZUNoZWNrZWQoYXR0cnMsIGNvbnRlbnQsIG1hcmtzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdGV4dCBub2RlIGluIHRoZSBzY2hlbWEuIEVtcHR5IHRleHQgbm9kZXMgYXJlIG5vdFxuICAgIGFsbG93ZWQuXG4gICAgKi9cbiAgICB0ZXh0KHRleHQsIG1hcmtzKSB7XG4gICAgICAgIGxldCB0eXBlID0gdGhpcy5ub2Rlcy50ZXh0O1xuICAgICAgICByZXR1cm4gbmV3IFRleHROb2RlKHR5cGUsIHR5cGUuZGVmYXVsdEF0dHJzLCB0ZXh0LCBNYXJrLnNldEZyb20obWFya3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWFyayB3aXRoIHRoZSBnaXZlbiB0eXBlIGFuZCBhdHRyaWJ1dGVzLlxuICAgICovXG4gICAgbWFyayh0eXBlLCBhdHRycykge1xuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLm1hcmtzW3R5cGVdO1xuICAgICAgICByZXR1cm4gdHlwZS5jcmVhdGUoYXR0cnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIG5vZGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gVGhpcyBtZXRob2QgaXNcbiAgICBib3VuZC5cbiAgICAqL1xuICAgIG5vZGVGcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBOb2RlLmZyb21KU09OKHRoaXMsIGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIG1hcmsgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gVGhpcyBtZXRob2QgaXNcbiAgICBib3VuZC5cbiAgICAqL1xuICAgIG1hcmtGcm9tSlNPTihqc29uKSB7XG4gICAgICAgIHJldHVybiBNYXJrLmZyb21KU09OKHRoaXMsIGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG5vZGVUeXBlKG5hbWUpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gdGhpcy5ub2Rlc1tuYW1lXTtcbiAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVW5rbm93biBub2RlIHR5cGU6IFwiICsgbmFtZSk7XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG59XG5mdW5jdGlvbiBnYXRoZXJNYXJrcyhzY2hlbWEsIG1hcmtzKSB7XG4gICAgbGV0IGZvdW5kID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbmFtZSA9IG1hcmtzW2ldLCBtYXJrID0gc2NoZW1hLm1hcmtzW25hbWVdLCBvayA9IG1hcms7XG4gICAgICAgIGlmIChtYXJrKSB7XG4gICAgICAgICAgICBmb3VuZC5wdXNoKG1hcmspO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBzY2hlbWEubWFya3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFyayA9IHNjaGVtYS5tYXJrc1twcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBcIl9cIiB8fCAobWFyay5zcGVjLmdyb3VwICYmIG1hcmsuc3BlYy5ncm91cC5zcGxpdChcIiBcIikuaW5kZXhPZihuYW1lKSA+IC0xKSlcbiAgICAgICAgICAgICAgICAgICAgZm91bmQucHVzaChvayA9IG1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghb2spXG4gICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJVbmtub3duIG1hcmsgdHlwZTogJ1wiICsgbWFya3NbaV0gKyBcIidcIik7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cblxuLyoqXG5BIERPTSBwYXJzZXIgcmVwcmVzZW50cyBhIHN0cmF0ZWd5IGZvciBwYXJzaW5nIERPTSBjb250ZW50IGludG8gYVxuUHJvc2VNaXJyb3IgZG9jdW1lbnQgY29uZm9ybWluZyB0byBhIGdpdmVuIHNjaGVtYS4gSXRzIGJlaGF2aW9yIGlzXG5kZWZpbmVkIGJ5IGFuIGFycmF5IG9mIFtydWxlc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlBhcnNlUnVsZSkuXG4qL1xuY2xhc3MgRE9NUGFyc2VyIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBwYXJzZXIgdGhhdCB0YXJnZXRzIHRoZSBnaXZlbiBzY2hlbWEsIHVzaW5nIHRoZSBnaXZlblxuICAgIHBhcnNpbmcgcnVsZXMuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc2NoZW1hIGludG8gd2hpY2ggdGhlIHBhcnNlciBwYXJzZXMuXG4gICAgKi9cbiAgICBzY2hlbWEsIFxuICAgIC8qKlxuICAgIFRoZSBzZXQgb2YgW3BhcnNlIHJ1bGVzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuUGFyc2VSdWxlKSB0aGF0IHRoZSBwYXJzZXJcbiAgICB1c2VzLCBpbiBvcmRlciBvZiBwcmVjZWRlbmNlLlxuICAgICovXG4gICAgcnVsZXMpIHtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMucnVsZXMgPSBydWxlcztcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhZ3MgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xuICAgICAgICBydWxlcy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bGUudGFnKVxuICAgICAgICAgICAgICAgIHRoaXMudGFncy5wdXNoKHJ1bGUpO1xuICAgICAgICAgICAgZWxzZSBpZiAocnVsZS5zdHlsZSlcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gT25seSBub3JtYWxpemUgbGlzdCBlbGVtZW50cyB3aGVuIGxpc3RzIGluIHRoZSBzY2hlbWEgY2FuJ3QgZGlyZWN0bHkgY29udGFpbiB0aGVtc2VsdmVzXG4gICAgICAgIHRoaXMubm9ybWFsaXplTGlzdHMgPSAhdGhpcy50YWdzLnNvbWUociA9PiB7XG4gICAgICAgICAgICBpZiAoIS9eKHVsfG9sKVxcYi8udGVzdChyLnRhZykgfHwgIXIubm9kZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbm9kZSA9IHNjaGVtYS5ub2Rlc1tyLm5vZGVdO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGUuY29udGVudE1hdGNoLm1hdGNoVHlwZShub2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFBhcnNlIGEgZG9jdW1lbnQgZnJvbSB0aGUgY29udGVudCBvZiBhIERPTSBub2RlLlxuICAgICovXG4gICAgcGFyc2UoZG9tLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KHRoaXMsIG9wdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgY29udGV4dC5hZGRBbGwoZG9tLCBvcHRpb25zLmZyb20sIG9wdGlvbnMudG8pO1xuICAgICAgICByZXR1cm4gY29udGV4dC5maW5pc2goKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUGFyc2VzIHRoZSBjb250ZW50IG9mIHRoZSBnaXZlbiBET00gbm9kZSwgbGlrZVxuICAgIFtgcGFyc2VgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuRE9NUGFyc2VyLnBhcnNlKSwgYW5kIHRha2VzIHRoZSBzYW1lIHNldCBvZlxuICAgIG9wdGlvbnMuIEJ1dCB1bmxpa2UgdGhhdCBtZXRob2QsIHdoaWNoIHByb2R1Y2VzIGEgd2hvbGUgbm9kZSxcbiAgICB0aGlzIG9uZSByZXR1cm5zIGEgc2xpY2UgdGhhdCBpcyBvcGVuIGF0IHRoZSBzaWRlcywgbWVhbmluZyB0aGF0XG4gICAgdGhlIHNjaGVtYSBjb25zdHJhaW50cyBhcmVuJ3QgYXBwbGllZCB0byB0aGUgc3RhcnQgb2Ygbm9kZXMgdG9cbiAgICB0aGUgbGVmdCBvZiB0aGUgaW5wdXQgYW5kIHRoZSBlbmQgb2Ygbm9kZXMgYXQgdGhlIGVuZC5cbiAgICAqL1xuICAgIHBhcnNlU2xpY2UoZG9tLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgbGV0IGNvbnRleHQgPSBuZXcgUGFyc2VDb250ZXh0KHRoaXMsIG9wdGlvbnMsIHRydWUpO1xuICAgICAgICBjb250ZXh0LmFkZEFsbChkb20sIG9wdGlvbnMuZnJvbSwgb3B0aW9ucy50byk7XG4gICAgICAgIHJldHVybiBTbGljZS5tYXhPcGVuKGNvbnRleHQuZmluaXNoKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1hdGNoVGFnKGRvbSwgY29udGV4dCwgYWZ0ZXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFmdGVyID8gdGhpcy50YWdzLmluZGV4T2YoYWZ0ZXIpICsgMSA6IDA7IGkgPCB0aGlzLnRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBydWxlID0gdGhpcy50YWdzW2ldO1xuICAgICAgICAgICAgaWYgKG1hdGNoZXMoZG9tLCBydWxlLnRhZykgJiZcbiAgICAgICAgICAgICAgICAocnVsZS5uYW1lc3BhY2UgPT09IHVuZGVmaW5lZCB8fCBkb20ubmFtZXNwYWNlVVJJID09IHJ1bGUubmFtZXNwYWNlKSAmJlxuICAgICAgICAgICAgICAgICghcnVsZS5jb250ZXh0IHx8IGNvbnRleHQubWF0Y2hlc0NvbnRleHQocnVsZS5jb250ZXh0KSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5nZXRBdHRycykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gcnVsZS5nZXRBdHRycyhkb20pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBydWxlLmF0dHJzID0gcmVzdWx0IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXRjaFN0eWxlKHByb3AsIHZhbHVlLCBjb250ZXh0LCBhZnRlcikge1xuICAgICAgICBmb3IgKGxldCBpID0gYWZ0ZXIgPyB0aGlzLnN0eWxlcy5pbmRleE9mKGFmdGVyKSArIDEgOiAwOyBpIDwgdGhpcy5zdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBydWxlID0gdGhpcy5zdHlsZXNbaV0sIHN0eWxlID0gcnVsZS5zdHlsZTtcbiAgICAgICAgICAgIGlmIChzdHlsZS5pbmRleE9mKHByb3ApICE9IDAgfHxcbiAgICAgICAgICAgICAgICBydWxlLmNvbnRleHQgJiYgIWNvbnRleHQubWF0Y2hlc0NvbnRleHQocnVsZS5jb250ZXh0KSB8fFxuICAgICAgICAgICAgICAgIC8vIFRlc3QgdGhhdCB0aGUgc3R5bGUgc3RyaW5nIGVpdGhlciBwcmVjaXNlbHkgbWF0Y2hlcyB0aGUgcHJvcCxcbiAgICAgICAgICAgICAgICAvLyBvciBoYXMgYW4gJz0nIHNpZ24gYWZ0ZXIgdGhlIHByb3AsIGZvbGxvd2VkIGJ5IHRoZSBnaXZlblxuICAgICAgICAgICAgICAgIC8vIHZhbHVlLlxuICAgICAgICAgICAgICAgIHN0eWxlLmxlbmd0aCA+IHByb3AubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgIChzdHlsZS5jaGFyQ29kZUF0KHByb3AubGVuZ3RoKSAhPSA2MSB8fCBzdHlsZS5zbGljZShwcm9wLmxlbmd0aCArIDEpICE9IHZhbHVlKSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChydWxlLmdldEF0dHJzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJ1bGUuZ2V0QXR0cnModmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBydWxlLmF0dHJzID0gcmVzdWx0IHx8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIHNjaGVtYVJ1bGVzKHNjaGVtYSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIGZ1bmN0aW9uIGluc2VydChydWxlKSB7XG4gICAgICAgICAgICBsZXQgcHJpb3JpdHkgPSBydWxlLnByaW9yaXR5ID09IG51bGwgPyA1MCA6IHJ1bGUucHJpb3JpdHksIGkgPSAwO1xuICAgICAgICAgICAgZm9yICg7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHJlc3VsdFtpXSwgbmV4dFByaW9yaXR5ID0gbmV4dC5wcmlvcml0eSA9PSBudWxsID8gNTAgOiBuZXh0LnByaW9yaXR5O1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UHJpb3JpdHkgPCBwcmlvcml0eSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQuc3BsaWNlKGksIDAsIHJ1bGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gc2NoZW1hLm1hcmtzKSB7XG4gICAgICAgICAgICBsZXQgcnVsZXMgPSBzY2hlbWEubWFya3NbbmFtZV0uc3BlYy5wYXJzZURPTTtcbiAgICAgICAgICAgIGlmIChydWxlcylcbiAgICAgICAgICAgICAgICBydWxlcy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpbnNlcnQocnVsZSA9IGNvcHkocnVsZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShydWxlLm1hcmsgfHwgcnVsZS5pZ25vcmUgfHwgcnVsZS5jbGVhck1hcmspKVxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS5tYXJrID0gbmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHNjaGVtYS5ub2Rlcykge1xuICAgICAgICAgICAgbGV0IHJ1bGVzID0gc2NoZW1hLm5vZGVzW25hbWVdLnNwZWMucGFyc2VET007XG4gICAgICAgICAgICBpZiAocnVsZXMpXG4gICAgICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KHJ1bGUgPSBjb3B5KHJ1bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocnVsZS5ub2RlIHx8IHJ1bGUuaWdub3JlIHx8IHJ1bGUubWFyaykpXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlLm5vZGUgPSBuYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIERPTSBwYXJzZXIgdXNpbmcgdGhlIHBhcnNpbmcgcnVsZXMgbGlzdGVkIGluIGFcbiAgICBzY2hlbWEncyBbbm9kZSBzcGVjc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLnBhcnNlRE9NKSwgcmVvcmRlcmVkIGJ5XG4gICAgW3ByaW9yaXR5XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuUGFyc2VSdWxlLnByaW9yaXR5KS5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gc2NoZW1hLmNhY2hlZC5kb21QYXJzZXIgfHxcbiAgICAgICAgICAgIChzY2hlbWEuY2FjaGVkLmRvbVBhcnNlciA9IG5ldyBET01QYXJzZXIoc2NoZW1hLCBET01QYXJzZXIuc2NoZW1hUnVsZXMoc2NoZW1hKSkpO1xuICAgIH1cbn1cbmNvbnN0IGJsb2NrVGFncyA9IHtcbiAgICBhZGRyZXNzOiB0cnVlLCBhcnRpY2xlOiB0cnVlLCBhc2lkZTogdHJ1ZSwgYmxvY2txdW90ZTogdHJ1ZSwgY2FudmFzOiB0cnVlLFxuICAgIGRkOiB0cnVlLCBkaXY6IHRydWUsIGRsOiB0cnVlLCBmaWVsZHNldDogdHJ1ZSwgZmlnY2FwdGlvbjogdHJ1ZSwgZmlndXJlOiB0cnVlLFxuICAgIGZvb3RlcjogdHJ1ZSwgZm9ybTogdHJ1ZSwgaDE6IHRydWUsIGgyOiB0cnVlLCBoMzogdHJ1ZSwgaDQ6IHRydWUsIGg1OiB0cnVlLFxuICAgIGg2OiB0cnVlLCBoZWFkZXI6IHRydWUsIGhncm91cDogdHJ1ZSwgaHI6IHRydWUsIGxpOiB0cnVlLCBub3NjcmlwdDogdHJ1ZSwgb2w6IHRydWUsXG4gICAgb3V0cHV0OiB0cnVlLCBwOiB0cnVlLCBwcmU6IHRydWUsIHNlY3Rpb246IHRydWUsIHRhYmxlOiB0cnVlLCB0Zm9vdDogdHJ1ZSwgdWw6IHRydWVcbn07XG5jb25zdCBpZ25vcmVUYWdzID0ge1xuICAgIGhlYWQ6IHRydWUsIG5vc2NyaXB0OiB0cnVlLCBvYmplY3Q6IHRydWUsIHNjcmlwdDogdHJ1ZSwgc3R5bGU6IHRydWUsIHRpdGxlOiB0cnVlXG59O1xuY29uc3QgbGlzdFRhZ3MgPSB7IG9sOiB0cnVlLCB1bDogdHJ1ZSB9O1xuLy8gVXNpbmcgYSBiaXRmaWVsZCBmb3Igbm9kZSBjb250ZXh0IG9wdGlvbnNcbmNvbnN0IE9QVF9QUkVTRVJWRV9XUyA9IDEsIE9QVF9QUkVTRVJWRV9XU19GVUxMID0gMiwgT1BUX09QRU5fTEVGVCA9IDQ7XG5mdW5jdGlvbiB3c09wdGlvbnNGb3IodHlwZSwgcHJlc2VydmVXaGl0ZXNwYWNlLCBiYXNlKSB7XG4gICAgaWYgKHByZXNlcnZlV2hpdGVzcGFjZSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gKHByZXNlcnZlV2hpdGVzcGFjZSA/IE9QVF9QUkVTRVJWRV9XUyA6IDApIHxcbiAgICAgICAgICAgIChwcmVzZXJ2ZVdoaXRlc3BhY2UgPT09IFwiZnVsbFwiID8gT1BUX1BSRVNFUlZFX1dTX0ZVTEwgOiAwKTtcbiAgICByZXR1cm4gdHlwZSAmJiB0eXBlLndoaXRlc3BhY2UgPT0gXCJwcmVcIiA/IE9QVF9QUkVTRVJWRV9XUyB8IE9QVF9QUkVTRVJWRV9XU19GVUxMIDogYmFzZSAmIH5PUFRfT1BFTl9MRUZUO1xufVxuY2xhc3MgTm9kZUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGF0dHJzLCBcbiAgICAvLyBNYXJrcyBhcHBsaWVkIHRvIHRoaXMgbm9kZSBpdHNlbGZcbiAgICBtYXJrcywgXG4gICAgLy8gTWFya3MgdGhhdCBjYW4ndCBhcHBseSBoZXJlLCBidXQgd2lsbCBiZSB1c2VkIGluIGNoaWxkcmVuIGlmIHBvc3NpYmxlXG4gICAgcGVuZGluZ01hcmtzLCBzb2xpZCwgbWF0Y2gsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgICAgICB0aGlzLm1hcmtzID0gbWFya3M7XG4gICAgICAgIHRoaXMucGVuZGluZ01hcmtzID0gcGVuZGluZ01hcmtzO1xuICAgICAgICB0aGlzLnNvbGlkID0gc29saWQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgICAgICAvLyBNYXJrcyBhcHBsaWVkIHRvIHRoZSBub2RlJ3MgY2hpbGRyZW5cbiAgICAgICAgdGhpcy5hY3RpdmVNYXJrcyA9IE1hcmsubm9uZTtcbiAgICAgICAgLy8gTmVzdGVkIE1hcmtzIHdpdGggc2FtZSB0eXBlXG4gICAgICAgIHRoaXMuc3Rhc2hNYXJrcyA9IFtdO1xuICAgICAgICB0aGlzLm1hdGNoID0gbWF0Y2ggfHwgKG9wdGlvbnMgJiBPUFRfT1BFTl9MRUZUID8gbnVsbCA6IHR5cGUuY29udGVudE1hdGNoKTtcbiAgICB9XG4gICAgZmluZFdyYXBwaW5nKG5vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1hdGNoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHlwZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICBsZXQgZmlsbCA9IHRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShGcmFnbWVudC5mcm9tKG5vZGUpKTtcbiAgICAgICAgICAgIGlmIChmaWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaCA9IHRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChmaWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMudHlwZS5jb250ZW50TWF0Y2gsIHdyYXA7XG4gICAgICAgICAgICAgICAgaWYgKHdyYXAgPSBzdGFydC5maW5kV3JhcHBpbmcobm9kZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdGNoID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cmFwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyhub2RlLnR5cGUpO1xuICAgIH1cbiAgICBmaW5pc2gob3BlbkVuZCkge1xuICAgICAgICBpZiAoISh0aGlzLm9wdGlvbnMgJiBPUFRfUFJFU0VSVkVfV1MpKSB7IC8vIFN0cmlwIHRyYWlsaW5nIHdoaXRlc3BhY2VcbiAgICAgICAgICAgIGxldCBsYXN0ID0gdGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGggLSAxXSwgbTtcbiAgICAgICAgICAgIGlmIChsYXN0ICYmIGxhc3QuaXNUZXh0ICYmIChtID0gL1sgXFx0XFxyXFxuXFx1MDAwY10rJC8uZXhlYyhsYXN0LnRleHQpKSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gbGFzdDtcbiAgICAgICAgICAgICAgICBpZiAobGFzdC50ZXh0Lmxlbmd0aCA9PSBtWzBdLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnBvcCgpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGggLSAxXSA9IHRleHQud2l0aFRleHQodGV4dC50ZXh0LnNsaWNlKDAsIHRleHQudGV4dC5sZW5ndGggLSBtWzBdLmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBjb250ZW50ID0gRnJhZ21lbnQuZnJvbSh0aGlzLmNvbnRlbnQpO1xuICAgICAgICBpZiAoIW9wZW5FbmQgJiYgdGhpcy5tYXRjaClcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoRnJhZ21lbnQuZW1wdHksIHRydWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA/IHRoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycywgY29udGVudCwgdGhpcy5tYXJrcykgOiBjb250ZW50O1xuICAgIH1cbiAgICBwb3BGcm9tU3Rhc2hNYXJrKG1hcmspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3Rhc2hNYXJrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgIGlmIChtYXJrLmVxKHRoaXMuc3Rhc2hNYXJrc1tpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3Rhc2hNYXJrcy5zcGxpY2UoaSwgMSlbMF07XG4gICAgfVxuICAgIGFwcGx5UGVuZGluZyhuZXh0VHlwZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcGVuZGluZyA9IHRoaXMucGVuZGluZ01hcmtzOyBpIDwgcGVuZGluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG1hcmsgPSBwZW5kaW5nW2ldO1xuICAgICAgICAgICAgaWYgKCh0aGlzLnR5cGUgPyB0aGlzLnR5cGUuYWxsb3dzTWFya1R5cGUobWFyay50eXBlKSA6IG1hcmtNYXlBcHBseShtYXJrLnR5cGUsIG5leHRUeXBlKSkgJiZcbiAgICAgICAgICAgICAgICAhbWFyay5pc0luU2V0KHRoaXMuYWN0aXZlTWFya3MpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVNYXJrcyA9IG1hcmsuYWRkVG9TZXQodGhpcy5hY3RpdmVNYXJrcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nTWFya3MgPSBtYXJrLnJlbW92ZUZyb21TZXQodGhpcy5wZW5kaW5nTWFya3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlubGluZUNvbnRleHQobm9kZSkge1xuICAgICAgICBpZiAodGhpcy50eXBlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50O1xuICAgICAgICBpZiAodGhpcy5jb250ZW50Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRbMF0uaXNJbmxpbmU7XG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudE5vZGUgJiYgIWJsb2NrVGFncy5oYXNPd25Qcm9wZXJ0eShub2RlLnBhcmVudE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSk7XG4gICAgfVxufVxuY2xhc3MgUGFyc2VDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUaGUgcGFyc2VyIHdlIGFyZSB1c2luZy5cbiAgICBwYXJzZXIsIFxuICAgIC8vIFRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGlzIHBhcnNlLlxuICAgIG9wdGlvbnMsIGlzT3Blbikge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5pc09wZW4gPSBpc09wZW47XG4gICAgICAgIHRoaXMub3BlbiA9IDA7XG4gICAgICAgIGxldCB0b3BOb2RlID0gb3B0aW9ucy50b3BOb2RlLCB0b3BDb250ZXh0O1xuICAgICAgICBsZXQgdG9wT3B0aW9ucyA9IHdzT3B0aW9uc0ZvcihudWxsLCBvcHRpb25zLnByZXNlcnZlV2hpdGVzcGFjZSwgMCkgfCAoaXNPcGVuID8gT1BUX09QRU5fTEVGVCA6IDApO1xuICAgICAgICBpZiAodG9wTm9kZSlcbiAgICAgICAgICAgIHRvcENvbnRleHQgPSBuZXcgTm9kZUNvbnRleHQodG9wTm9kZS50eXBlLCB0b3BOb2RlLmF0dHJzLCBNYXJrLm5vbmUsIE1hcmsubm9uZSwgdHJ1ZSwgb3B0aW9ucy50b3BNYXRjaCB8fCB0b3BOb2RlLnR5cGUuY29udGVudE1hdGNoLCB0b3BPcHRpb25zKTtcbiAgICAgICAgZWxzZSBpZiAoaXNPcGVuKVxuICAgICAgICAgICAgdG9wQ29udGV4dCA9IG5ldyBOb2RlQ29udGV4dChudWxsLCBudWxsLCBNYXJrLm5vbmUsIE1hcmsubm9uZSwgdHJ1ZSwgbnVsbCwgdG9wT3B0aW9ucyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRvcENvbnRleHQgPSBuZXcgTm9kZUNvbnRleHQocGFyc2VyLnNjaGVtYS50b3BOb2RlVHlwZSwgbnVsbCwgTWFyay5ub25lLCBNYXJrLm5vbmUsIHRydWUsIG51bGwsIHRvcE9wdGlvbnMpO1xuICAgICAgICB0aGlzLm5vZGVzID0gW3RvcENvbnRleHRdO1xuICAgICAgICB0aGlzLmZpbmQgPSBvcHRpb25zLmZpbmRQb3NpdGlvbnM7XG4gICAgICAgIHRoaXMubmVlZHNCbG9jayA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dO1xuICAgIH1cbiAgICAvLyBBZGQgYSBET00gbm9kZSB0byB0aGUgY29udGVudC4gVGV4dCBpcyBpbnNlcnRlZCBhcyB0ZXh0IG5vZGUsXG4gICAgLy8gb3RoZXJ3aXNlLCB0aGUgbm9kZSBpcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgIG9yLCBpZiBpdCBoYXMgYVxuICAgIC8vIGBzdHlsZWAgYXR0cmlidXRlLCBgYWRkRWxlbWVudFdpdGhTdHlsZXNgLlxuICAgIGFkZERPTShkb20pIHtcbiAgICAgICAgaWYgKGRvbS5ub2RlVHlwZSA9PSAzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRleHROb2RlKGRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9tLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IGRvbS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIGlmICghc3R5bGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoZG9tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBtYXJrcyA9IHRoaXMucmVhZFN0eWxlcyhwYXJzZVN0eWxlcyhzdHlsZSkpO1xuICAgICAgICAgICAgICAgIGlmICghbWFya3MpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gQSBzdHlsZSB3aXRoIGlnbm9yZTogdHJ1ZVxuICAgICAgICAgICAgICAgIGxldCBbYWRkTWFya3MsIHJlbW92ZU1hcmtzXSA9IG1hcmtzLCB0b3AgPSB0aGlzLnRvcDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbW92ZU1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKHJlbW92ZU1hcmtzW2ldLCB0b3ApO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkTWFya3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ01hcmsoYWRkTWFya3NbaV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudChkb20pO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkTWFya3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGVuZGluZ01hcmsoYWRkTWFya3NbaV0sIHRvcCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVNYXJrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTWFyayhyZW1vdmVNYXJrc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVGV4dE5vZGUoZG9tKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IGRvbS5ub2RlVmFsdWU7XG4gICAgICAgIGxldCB0b3AgPSB0aGlzLnRvcDtcbiAgICAgICAgaWYgKHRvcC5vcHRpb25zICYgT1BUX1BSRVNFUlZFX1dTX0ZVTEwgfHxcbiAgICAgICAgICAgIHRvcC5pbmxpbmVDb250ZXh0KGRvbSkgfHxcbiAgICAgICAgICAgIC9bXiBcXHRcXHJcXG5cXHUwMDBjXS8udGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGlmICghKHRvcC5vcHRpb25zICYgT1BUX1BSRVNFUlZFX1dTKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvWyBcXHRcXHJcXG5cXHUwMDBjXSsvZywgXCIgXCIpO1xuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgc3RhcnRzIHdpdGggd2hpdGVzcGFjZSwgYW5kIHRoZXJlIGlzIG5vIG5vZGUgYmVmb3JlIGl0LCBvclxuICAgICAgICAgICAgICAgIC8vIGEgaGFyZCBicmVhaywgb3IgYSB0ZXh0IG5vZGUgdGhhdCBlbmRzIHdpdGggd2hpdGVzcGFjZSwgc3RyaXAgdGhlXG4gICAgICAgICAgICAgICAgLy8gbGVhZGluZyBzcGFjZS5cbiAgICAgICAgICAgICAgICBpZiAoL15bIFxcdFxcclxcblxcdTAwMGNdLy50ZXN0KHZhbHVlKSAmJiB0aGlzLm9wZW4gPT0gdGhpcy5ub2Rlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBub2RlQmVmb3JlID0gdG9wLmNvbnRlbnRbdG9wLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGxldCBkb21Ob2RlQmVmb3JlID0gZG9tLnByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlQmVmb3JlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAoZG9tTm9kZUJlZm9yZSAmJiBkb21Ob2RlQmVmb3JlLm5vZGVOYW1lID09ICdCUicpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAobm9kZUJlZm9yZS5pc1RleHQgJiYgL1sgXFx0XFxyXFxuXFx1MDAwY10kLy50ZXN0KG5vZGVCZWZvcmUudGV4dCkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghKHRvcC5vcHRpb25zICYgT1BUX1BSRVNFUlZFX1dTX0ZVTEwpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHI/XFxufFxcci9nLCBcIiBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcclxcbj8vZywgXCJcXG5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUpXG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KHZhbHVlKSk7XG4gICAgICAgICAgICB0aGlzLmZpbmRJblRleHQoZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEluc2lkZShkb20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRyeSB0byBmaW5kIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIHRhZyBhbmQgdXNlIHRoYXQgdG8gcGFyc2UuIElmXG4gICAgLy8gbm9uZSBpcyBmb3VuZCwgdGhlIGVsZW1lbnQncyBjb250ZW50IG5vZGVzIGFyZSBhZGRlZCBkaXJlY3RseS5cbiAgICBhZGRFbGVtZW50KGRvbSwgbWF0Y2hBZnRlcikge1xuICAgICAgICBsZXQgbmFtZSA9IGRvbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCBydWxlSUQ7XG4gICAgICAgIGlmIChsaXN0VGFncy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB0aGlzLnBhcnNlci5ub3JtYWxpemVMaXN0cylcbiAgICAgICAgICAgIG5vcm1hbGl6ZUxpc3QoZG9tKTtcbiAgICAgICAgbGV0IHJ1bGUgPSAodGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSAmJiB0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKGRvbSkpIHx8XG4gICAgICAgICAgICAocnVsZUlEID0gdGhpcy5wYXJzZXIubWF0Y2hUYWcoZG9tLCB0aGlzLCBtYXRjaEFmdGVyKSk7XG4gICAgICAgIGlmIChydWxlID8gcnVsZS5pZ25vcmUgOiBpZ25vcmVUYWdzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmRJbnNpZGUoZG9tKTtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlRmFsbGJhY2soZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghcnVsZSB8fCBydWxlLnNraXAgfHwgcnVsZS5jbG9zZVBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHJ1bGUgJiYgcnVsZS5jbG9zZVBhcmVudClcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBNYXRoLm1heCgwLCB0aGlzLm9wZW4gLSAxKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUgJiYgcnVsZS5za2lwLm5vZGVUeXBlKVxuICAgICAgICAgICAgICAgIGRvbSA9IHJ1bGUuc2tpcDtcbiAgICAgICAgICAgIGxldCBzeW5jLCB0b3AgPSB0aGlzLnRvcCwgb2xkTmVlZHNCbG9jayA9IHRoaXMubmVlZHNCbG9jaztcbiAgICAgICAgICAgIGlmIChibG9ja1RhZ3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9wLmNvbnRlbnQubGVuZ3RoICYmIHRvcC5jb250ZW50WzBdLmlzSW5saW5lICYmIHRoaXMub3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4tLTtcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gdGhpcy50b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghdG9wLnR5cGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmVlZHNCbG9jayA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZG9tLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlYWZGYWxsYmFjayhkb20pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkQWxsKGRvbSk7XG4gICAgICAgICAgICBpZiAoc3luYylcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmModG9wKTtcbiAgICAgICAgICAgIHRoaXMubmVlZHNCbG9jayA9IG9sZE5lZWRzQmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUoZG9tLCBydWxlLCBydWxlLmNvbnN1bWluZyA9PT0gZmFsc2UgPyBydWxlSUQgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENhbGxlZCBmb3IgbGVhZiBET00gbm9kZXMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYmUgaWdub3JlZFxuICAgIGxlYWZGYWxsYmFjayhkb20pIHtcbiAgICAgICAgaWYgKGRvbS5ub2RlTmFtZSA9PSBcIkJSXCIgJiYgdGhpcy50b3AudHlwZSAmJiB0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQpXG4gICAgICAgICAgICB0aGlzLmFkZFRleHROb2RlKGRvbS5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXFxuXCIpKTtcbiAgICB9XG4gICAgLy8gQ2FsbGVkIGZvciBpZ25vcmVkIG5vZGVzXG4gICAgaWdub3JlRmFsbGJhY2soZG9tKSB7XG4gICAgICAgIC8vIElnbm9yZWQgQlIgbm9kZXMgc2hvdWxkIGF0IGxlYXN0IGNyZWF0ZSBhbiBpbmxpbmUgY29udGV4dFxuICAgICAgICBpZiAoZG9tLm5vZGVOYW1lID09IFwiQlJcIiAmJiAoIXRoaXMudG9wLnR5cGUgfHwgIXRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCkpXG4gICAgICAgICAgICB0aGlzLmZpbmRQbGFjZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChcIi1cIikpO1xuICAgIH1cbiAgICAvLyBSdW4gYW55IHN0eWxlIHBhcnNlciBhc3NvY2lhdGVkIHdpdGggdGhlIG5vZGUncyBzdHlsZXMuIEVpdGhlclxuICAgIC8vIHJldHVybiBhbiBhcnJheSBvZiBtYXJrcywgb3IgbnVsbCB0byBpbmRpY2F0ZSBzb21lIG9mIHRoZSBzdHlsZXNcbiAgICAvLyBoYWQgYSBydWxlIHdpdGggYGlnbm9yZWAgc2V0LlxuICAgIHJlYWRTdHlsZXMoc3R5bGVzKSB7XG4gICAgICAgIGxldCBhZGQgPSBNYXJrLm5vbmUsIHJlbW92ZSA9IE1hcmsubm9uZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGFmdGVyID0gdW5kZWZpbmVkOzspIHtcbiAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IHRoaXMucGFyc2VyLm1hdGNoU3R5bGUoc3R5bGVzW2ldLCBzdHlsZXNbaSArIDFdLCB0aGlzLCBhZnRlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFydWxlKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAocnVsZS5pZ25vcmUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChydWxlLmNsZWFyTWFyaykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvcC5wZW5kaW5nTWFya3MuY29uY2F0KHRoaXMudG9wLmFjdGl2ZU1hcmtzKS5mb3JFYWNoKG0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUuY2xlYXJNYXJrKG0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZSA9IG0uYWRkVG9TZXQocmVtb3ZlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGQgPSB0aGlzLnBhcnNlci5zY2hlbWEubWFya3NbcnVsZS5tYXJrXS5jcmVhdGUocnVsZS5hdHRycykuYWRkVG9TZXQoYWRkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuY29uc3VtaW5nID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSBydWxlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFthZGQsIHJlbW92ZV07XG4gICAgfVxuICAgIC8vIExvb2sgdXAgYSBoYW5kbGVyIGZvciB0aGUgZ2l2ZW4gbm9kZS4gSWYgbm9uZSBhcmUgZm91bmQsIHJldHVyblxuICAgIC8vIGZhbHNlLiBPdGhlcndpc2UsIGFwcGx5IGl0LCB1c2UgaXRzIHJldHVybiB2YWx1ZSB0byBkcml2ZSB0aGUgd2F5XG4gICAgLy8gdGhlIG5vZGUncyBjb250ZW50IGlzIHdyYXBwZWQsIGFuZCByZXR1cm4gdHJ1ZS5cbiAgICBhZGRFbGVtZW50QnlSdWxlKGRvbSwgcnVsZSwgY29udGludWVBZnRlcikge1xuICAgICAgICBsZXQgc3luYywgbm9kZVR5cGUsIG1hcms7XG4gICAgICAgIGlmIChydWxlLm5vZGUpIHtcbiAgICAgICAgICAgIG5vZGVUeXBlID0gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3J1bGUubm9kZV07XG4gICAgICAgICAgICBpZiAoIW5vZGVUeXBlLmlzTGVhZikge1xuICAgICAgICAgICAgICAgIHN5bmMgPSB0aGlzLmVudGVyKG5vZGVUeXBlLCBydWxlLmF0dHJzIHx8IG51bGwsIHJ1bGUucHJlc2VydmVXaGl0ZXNwYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmluc2VydE5vZGUobm9kZVR5cGUuY3JlYXRlKHJ1bGUuYXR0cnMpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGVhZkZhbGxiYWNrKGRvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWFya1R5cGUgPSB0aGlzLnBhcnNlci5zY2hlbWEubWFya3NbcnVsZS5tYXJrXTtcbiAgICAgICAgICAgIG1hcmsgPSBtYXJrVHlwZS5jcmVhdGUocnVsZS5hdHRycyk7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNYXJrKG1hcmspO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdGFydEluID0gdGhpcy50b3A7XG4gICAgICAgIGlmIChub2RlVHlwZSAmJiBub2RlVHlwZS5pc0xlYWYpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEluc2lkZShkb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbnRpbnVlQWZ0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudChkb20sIGNvbnRpbnVlQWZ0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bGUuZ2V0Q29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5maW5kSW5zaWRlKGRvbSk7XG4gICAgICAgICAgICBydWxlLmdldENvbnRlbnQoZG9tLCB0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2gobm9kZSA9PiB0aGlzLmluc2VydE5vZGUobm9kZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGNvbnRlbnRET00gPSBkb207XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUuY29udGVudEVsZW1lbnQgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBjb250ZW50RE9NID0gZG9tLnF1ZXJ5U2VsZWN0b3IocnVsZS5jb250ZW50RWxlbWVudCk7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcnVsZS5jb250ZW50RWxlbWVudCA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgY29udGVudERPTSA9IHJ1bGUuY29udGVudEVsZW1lbnQoZG9tKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUuY29udGVudEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgY29udGVudERPTSA9IHJ1bGUuY29udGVudEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLmZpbmRBcm91bmQoZG9tLCBjb250ZW50RE9NLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuYWRkQWxsKGNvbnRlbnRET00pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzeW5jICYmIHRoaXMuc3luYyhzdGFydEluKSlcbiAgICAgICAgICAgIHRoaXMub3Blbi0tO1xuICAgICAgICBpZiAobWFyaylcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUGVuZGluZ01hcmsobWFyaywgc3RhcnRJbik7XG4gICAgfVxuICAgIC8vIEFkZCBhbGwgY2hpbGQgbm9kZXMgYmV0d2VlbiBgc3RhcnRJbmRleGAgYW5kIGBlbmRJbmRleGAgKG9yIHRoZVxuICAgIC8vIHdob2xlIG5vZGUsIGlmIG5vdCBnaXZlbikuIElmIGBzeW5jYCBpcyBwYXNzZWQsIHVzZSBpdCB0b1xuICAgIC8vIHN5bmNocm9uaXplIGFmdGVyIGV2ZXJ5IGJsb2NrIGVsZW1lbnQuXG4gICAgYWRkQWxsKHBhcmVudCwgc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gc3RhcnRJbmRleCB8fCAwO1xuICAgICAgICBmb3IgKGxldCBkb20gPSBzdGFydEluZGV4ID8gcGFyZW50LmNoaWxkTm9kZXNbc3RhcnRJbmRleF0gOiBwYXJlbnQuZmlyc3RDaGlsZCwgZW5kID0gZW5kSW5kZXggPT0gbnVsbCA/IG51bGwgOiBwYXJlbnQuY2hpbGROb2Rlc1tlbmRJbmRleF07IGRvbSAhPSBlbmQ7IGRvbSA9IGRvbS5uZXh0U2libGluZywgKytpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5maW5kQXRQb2ludChwYXJlbnQsIGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuYWRkRE9NKGRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5maW5kQXRQb2ludChwYXJlbnQsIGluZGV4KTtcbiAgICB9XG4gICAgLy8gVHJ5IHRvIGZpbmQgYSB3YXkgdG8gZml0IHRoZSBnaXZlbiBub2RlIHR5cGUgaW50byB0aGUgY3VycmVudFxuICAgIC8vIGNvbnRleHQuIE1heSBhZGQgaW50ZXJtZWRpYXRlIHdyYXBwZXJzIGFuZC9vciBsZWF2ZSBub24tc29saWRcbiAgICAvLyBub2RlcyB0aGF0IHdlJ3JlIGluLlxuICAgIGZpbmRQbGFjZShub2RlKSB7XG4gICAgICAgIGxldCByb3V0ZSwgc3luYztcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSB0aGlzLm9wZW47IGRlcHRoID49IDA7IGRlcHRoLS0pIHtcbiAgICAgICAgICAgIGxldCBjeCA9IHRoaXMubm9kZXNbZGVwdGhdO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gY3guZmluZFdyYXBwaW5nKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGZvdW5kICYmICghcm91dGUgfHwgcm91dGUubGVuZ3RoID4gZm91bmQubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgIHJvdXRlID0gZm91bmQ7XG4gICAgICAgICAgICAgICAgc3luYyA9IGN4O1xuICAgICAgICAgICAgICAgIGlmICghZm91bmQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjeC5zb2xpZClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJvdXRlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnN5bmMoc3luYyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm91dGUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB0aGlzLmVudGVySW5uZXIocm91dGVbaV0sIG51bGwsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIFRyeSB0byBpbnNlcnQgdGhlIGdpdmVuIG5vZGUsIGFkanVzdGluZyB0aGUgY29udGV4dCB3aGVuIG5lZWRlZC5cbiAgICBpbnNlcnROb2RlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUuaXNJbmxpbmUgJiYgdGhpcy5uZWVkc0Jsb2NrICYmICF0aGlzLnRvcC50eXBlKSB7XG4gICAgICAgICAgICBsZXQgYmxvY2sgPSB0aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7XG4gICAgICAgICAgICBpZiAoYmxvY2spXG4gICAgICAgICAgICAgICAgdGhpcy5lbnRlcklubmVyKGJsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maW5kUGxhY2Uobm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VFeHRyYSgpO1xuICAgICAgICAgICAgbGV0IHRvcCA9IHRoaXMudG9wO1xuICAgICAgICAgICAgdG9wLmFwcGx5UGVuZGluZyhub2RlLnR5cGUpO1xuICAgICAgICAgICAgaWYgKHRvcC5tYXRjaClcbiAgICAgICAgICAgICAgICB0b3AubWF0Y2ggPSB0b3AubWF0Y2gubWF0Y2hUeXBlKG5vZGUudHlwZSk7XG4gICAgICAgICAgICBsZXQgbWFya3MgPSB0b3AuYWN0aXZlTWFya3M7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUubWFya3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKCF0b3AudHlwZSB8fCB0b3AudHlwZS5hbGxvd3NNYXJrVHlwZShub2RlLm1hcmtzW2ldLnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICBtYXJrcyA9IG5vZGUubWFya3NbaV0uYWRkVG9TZXQobWFya3MpO1xuICAgICAgICAgICAgdG9wLmNvbnRlbnQucHVzaChub2RlLm1hcmsobWFya3MpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gVHJ5IHRvIHN0YXJ0IGEgbm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZSwgYWRqdXN0aW5nIHRoZSBjb250ZXh0IHdoZW5cbiAgICAvLyBuZWNlc3NhcnkuXG4gICAgZW50ZXIodHlwZSwgYXR0cnMsIHByZXNlcnZlV1MpIHtcbiAgICAgICAgbGV0IG9rID0gdGhpcy5maW5kUGxhY2UodHlwZS5jcmVhdGUoYXR0cnMpKTtcbiAgICAgICAgaWYgKG9rKVxuICAgICAgICAgICAgdGhpcy5lbnRlcklubmVyKHR5cGUsIGF0dHJzLCB0cnVlLCBwcmVzZXJ2ZVdTKTtcbiAgICAgICAgcmV0dXJuIG9rO1xuICAgIH1cbiAgICAvLyBPcGVuIGEgbm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZVxuICAgIGVudGVySW5uZXIodHlwZSwgYXR0cnMgPSBudWxsLCBzb2xpZCA9IGZhbHNlLCBwcmVzZXJ2ZVdTKSB7XG4gICAgICAgIHRoaXMuY2xvc2VFeHRyYSgpO1xuICAgICAgICBsZXQgdG9wID0gdGhpcy50b3A7XG4gICAgICAgIHRvcC5hcHBseVBlbmRpbmcodHlwZSk7XG4gICAgICAgIHRvcC5tYXRjaCA9IHRvcC5tYXRjaCAmJiB0b3AubWF0Y2gubWF0Y2hUeXBlKHR5cGUpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHdzT3B0aW9uc0Zvcih0eXBlLCBwcmVzZXJ2ZVdTLCB0b3Aub3B0aW9ucyk7XG4gICAgICAgIGlmICgodG9wLm9wdGlvbnMgJiBPUFRfT1BFTl9MRUZUKSAmJiB0b3AuY29udGVudC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIG9wdGlvbnMgfD0gT1BUX09QRU5fTEVGVDtcbiAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5ldyBOb2RlQ29udGV4dCh0eXBlLCBhdHRycywgdG9wLmFjdGl2ZU1hcmtzLCB0b3AucGVuZGluZ01hcmtzLCBzb2xpZCwgbnVsbCwgb3B0aW9ucykpO1xuICAgICAgICB0aGlzLm9wZW4rKztcbiAgICB9XG4gICAgLy8gTWFrZSBzdXJlIGFsbCBub2RlcyBhYm92ZSB0aGlzLm9wZW4gYXJlIGZpbmlzaGVkIGFuZCBhZGRlZCB0b1xuICAgIC8vIHRoZWlyIHBhcmVudHNcbiAgICBjbG9zZUV4dHJhKG9wZW5FbmQgPSBmYWxzZSkge1xuICAgICAgICBsZXQgaSA9IHRoaXMubm9kZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKGkgPiB0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIGZvciAoOyBpID4gdGhpcy5vcGVuOyBpLS0pXG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlc1tpIC0gMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbaV0uZmluaXNoKG9wZW5FbmQpKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXMubGVuZ3RoID0gdGhpcy5vcGVuICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHRoaXMub3BlbiA9IDA7XG4gICAgICAgIHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3Blbik7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3BlbiB8fCB0aGlzLm9wdGlvbnMudG9wT3Blbik7XG4gICAgfVxuICAgIHN5bmModG8pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMub3BlbjsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBpZiAodGhpcy5ub2Rlc1tpXSA9PSB0bykge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRQb3MoKSB7XG4gICAgICAgIHRoaXMuY2xvc2VFeHRyYSgpO1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMub3BlbjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5ub2Rlc1tpXS5jb250ZW50O1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGNvbnRlbnQubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pXG4gICAgICAgICAgICAgICAgcG9zICs9IGNvbnRlbnRbal0ubm9kZVNpemU7XG4gICAgICAgICAgICBpZiAoaSlcbiAgICAgICAgICAgICAgICBwb3MrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zO1xuICAgIH1cbiAgICBmaW5kQXRQb2ludChwYXJlbnQsIG9mZnNldCkge1xuICAgICAgICBpZiAodGhpcy5maW5kKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kW2ldLm5vZGUgPT0gcGFyZW50ICYmIHRoaXMuZmluZFtpXS5vZmZzZXQgPT0gb2Zmc2V0KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRbaV0ucG9zID0gdGhpcy5jdXJyZW50UG9zO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kSW5zaWRlKHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy5maW5kKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kW2ldLnBvcyA9PSBudWxsICYmIHBhcmVudC5ub2RlVHlwZSA9PSAxICYmIHBhcmVudC5jb250YWlucyh0aGlzLmZpbmRbaV0ubm9kZSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZFtpXS5wb3MgPSB0aGlzLmN1cnJlbnRQb3M7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRBcm91bmQocGFyZW50LCBjb250ZW50LCBiZWZvcmUpIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPSBjb250ZW50ICYmIHRoaXMuZmluZClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maW5kLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFtpXS5wb3MgPT0gbnVsbCAmJiBwYXJlbnQubm9kZVR5cGUgPT0gMSAmJiBwYXJlbnQuY29udGFpbnModGhpcy5maW5kW2ldLm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3MgPSBjb250ZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtpXS5ub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyAmIChiZWZvcmUgPyAyIDogNCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRbaV0ucG9zID0gdGhpcy5jdXJyZW50UG9zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluVGV4dCh0ZXh0Tm9kZSkge1xuICAgICAgICBpZiAodGhpcy5maW5kKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5kW2ldLm5vZGUgPT0gdGV4dE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmluZFtpXS5wb3MgPSB0aGlzLmN1cnJlbnRQb3MgLSAodGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCAtIHRoaXMuZmluZFtpXS5vZmZzZXQpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIGNvbnRleHQgc3RyaW5nIG1hdGNoZXMgdGhpcyBjb250ZXh0LlxuICAgIG1hdGNoZXNDb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgaWYgKGNvbnRleHQuaW5kZXhPZihcInxcIikgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnNwbGl0KC9cXHMqXFx8XFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCwgdGhpcyk7XG4gICAgICAgIGxldCBwYXJ0cyA9IGNvbnRleHQuc3BsaXQoXCIvXCIpO1xuICAgICAgICBsZXQgb3B0aW9uID0gdGhpcy5vcHRpb25zLmNvbnRleHQ7XG4gICAgICAgIGxldCB1c2VSb290ID0gIXRoaXMuaXNPcGVuICYmICghb3B0aW9uIHx8IG9wdGlvbi5wYXJlbnQudHlwZSA9PSB0aGlzLm5vZGVzWzBdLnR5cGUpO1xuICAgICAgICBsZXQgbWluRGVwdGggPSAtKG9wdGlvbiA/IG9wdGlvbi5kZXB0aCArIDEgOiAwKSArICh1c2VSb290ID8gMCA6IDEpO1xuICAgICAgICBsZXQgbWF0Y2ggPSAoaSwgZGVwdGgpID0+IHtcbiAgICAgICAgICAgIGZvciAoOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBwYXJ0cy5sZW5ndGggLSAxIHx8IGkgPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgZGVwdGggPj0gbWluRGVwdGg7IGRlcHRoLS0pXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2goaSAtIDEsIGRlcHRoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBkZXB0aCA+IDAgfHwgKGRlcHRoID09IDAgJiYgdXNlUm9vdCkgPyB0aGlzLm5vZGVzW2RlcHRoXS50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9wdGlvbiAmJiBkZXB0aCA+PSBtaW5EZXB0aCA/IG9wdGlvbi5ub2RlKGRlcHRoIC0gbWluRGVwdGgpLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmV4dCB8fCAobmV4dC5uYW1lICE9IHBhcnQgJiYgbmV4dC5ncm91cHMuaW5kZXhPZihwYXJ0KSA9PSAtMSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBtYXRjaChwYXJ0cy5sZW5ndGggLSAxLCB0aGlzLm9wZW4pO1xuICAgIH1cbiAgICB0ZXh0YmxvY2tGcm9tQ29udGV4dCgpIHtcbiAgICAgICAgbGV0ICRjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQ7XG4gICAgICAgIGlmICgkY29udGV4dClcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAkY29udGV4dC5kZXB0aDsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgZGVmbHQgPSAkY29udGV4dC5ub2RlKGQpLmNvbnRlbnRNYXRjaEF0KCRjb250ZXh0LmluZGV4QWZ0ZXIoZCkpLmRlZmF1bHRUeXBlO1xuICAgICAgICAgICAgICAgIGlmIChkZWZsdCAmJiBkZWZsdC5pc1RleHRibG9jayAmJiBkZWZsdC5kZWZhdWx0QXR0cnMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW25hbWVdO1xuICAgICAgICAgICAgaWYgKHR5cGUuaXNUZXh0YmxvY2sgJiYgdHlwZS5kZWZhdWx0QXR0cnMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkUGVuZGluZ01hcmsobWFyaykge1xuICAgICAgICBsZXQgZm91bmQgPSBmaW5kU2FtZU1hcmtJblNldChtYXJrLCB0aGlzLnRvcC5wZW5kaW5nTWFya3MpO1xuICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICB0aGlzLnRvcC5zdGFzaE1hcmtzLnB1c2goZm91bmQpO1xuICAgICAgICB0aGlzLnRvcC5wZW5kaW5nTWFya3MgPSBtYXJrLmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyk7XG4gICAgfVxuICAgIHJlbW92ZVBlbmRpbmdNYXJrKG1hcmssIHVwdG8pIHtcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSB0aGlzLm9wZW47IGRlcHRoID49IDA7IGRlcHRoLS0pIHtcbiAgICAgICAgICAgIGxldCBsZXZlbCA9IHRoaXMubm9kZXNbZGVwdGhdO1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gbGV2ZWwucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKG1hcmspO1xuICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICBsZXZlbC5wZW5kaW5nTWFya3MgPSBtYXJrLnJlbW92ZUZyb21TZXQobGV2ZWwucGVuZGluZ01hcmtzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldmVsLmFjdGl2ZU1hcmtzID0gbWFyay5yZW1vdmVGcm9tU2V0KGxldmVsLmFjdGl2ZU1hcmtzKTtcbiAgICAgICAgICAgICAgICBsZXQgc3Rhc2hNYXJrID0gbGV2ZWwucG9wRnJvbVN0YXNoTWFyayhtYXJrKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Rhc2hNYXJrICYmIGxldmVsLnR5cGUgJiYgbGV2ZWwudHlwZS5hbGxvd3NNYXJrVHlwZShzdGFzaE1hcmsudHlwZSkpXG4gICAgICAgICAgICAgICAgICAgIGxldmVsLmFjdGl2ZU1hcmtzID0gc3Rhc2hNYXJrLmFkZFRvU2V0KGxldmVsLmFjdGl2ZU1hcmtzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsZXZlbCA9PSB1cHRvKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gS2x1ZGdlIHRvIHdvcmsgYXJvdW5kIGRpcmVjdGx5IG5lc3RlZCBsaXN0IG5vZGVzIHByb2R1Y2VkIGJ5IHNvbWVcbi8vIHRvb2xzIGFuZCBhbGxvd2VkIGJ5IGJyb3dzZXJzIHRvIG1lYW4gdGhhdCB0aGUgbmVzdGVkIGxpc3QgaXNcbi8vIGFjdHVhbGx5IHBhcnQgb2YgdGhlIGxpc3QgaXRlbSBhYm92ZSBpdC5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxpc3QoZG9tKSB7XG4gICAgZm9yIChsZXQgY2hpbGQgPSBkb20uZmlyc3RDaGlsZCwgcHJldkl0ZW0gPSBudWxsOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZykge1xuICAgICAgICBsZXQgbmFtZSA9IGNoaWxkLm5vZGVUeXBlID09IDEgPyBjaGlsZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbiAgICAgICAgaWYgKG5hbWUgJiYgbGlzdFRhZ3MuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgcHJldkl0ZW0pIHtcbiAgICAgICAgICAgIHByZXZJdGVtLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgICAgICAgIGNoaWxkID0gcHJldkl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmFtZSA9PSBcImxpXCIpIHtcbiAgICAgICAgICAgIHByZXZJdGVtID0gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmFtZSkge1xuICAgICAgICAgICAgcHJldkl0ZW0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gQXBwbHkgYSBDU1Mgc2VsZWN0b3IuXG5mdW5jdGlvbiBtYXRjaGVzKGRvbSwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gKGRvbS5tYXRjaGVzIHx8IGRvbS5tc01hdGNoZXNTZWxlY3RvciB8fCBkb20ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGRvbS5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwoZG9tLCBzZWxlY3Rvcik7XG59XG4vLyBUb2tlbml6ZSBhIHN0eWxlIGF0dHJpYnV0ZSBpbnRvIHByb3BlcnR5L3ZhbHVlIHBhaXJzLlxuZnVuY3Rpb24gcGFyc2VTdHlsZXMoc3R5bGUpIHtcbiAgICBsZXQgcmUgPSAvXFxzKihbXFx3LV0rKVxccyo6XFxzKihbXjtdKykvZywgbSwgcmVzdWx0ID0gW107XG4gICAgd2hpbGUgKG0gPSByZS5leGVjKHN0eWxlKSlcbiAgICAgICAgcmVzdWx0LnB1c2gobVsxXSwgbVsyXS50cmltKCkpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjb3B5KG9iaikge1xuICAgIGxldCBjb3B5ID0ge307XG4gICAgZm9yIChsZXQgcHJvcCBpbiBvYmopXG4gICAgICAgIGNvcHlbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgcmV0dXJuIGNvcHk7XG59XG4vLyBVc2VkIHdoZW4gZmluZGluZyBhIG1hcmsgYXQgdGhlIHRvcCBsZXZlbCBvZiBhIGZyYWdtZW50IHBhcnNlLlxuLy8gQ2hlY2tzIHdoZXRoZXIgaXQgd291bGQgYmUgcmVhc29uYWJsZSB0byBhcHBseSBhIGdpdmVuIG1hcmsgdHlwZSB0b1xuLy8gYSBnaXZlbiBub2RlLCBieSBsb29raW5nIGF0IHRoZSB3YXkgdGhlIG1hcmsgb2NjdXJzIGluIHRoZSBzY2hlbWEuXG5mdW5jdGlvbiBtYXJrTWF5QXBwbHkobWFya1R5cGUsIG5vZGVUeXBlKSB7XG4gICAgbGV0IG5vZGVzID0gbm9kZVR5cGUuc2NoZW1hLm5vZGVzO1xuICAgIGZvciAobGV0IG5hbWUgaW4gbm9kZXMpIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IG5vZGVzW25hbWVdO1xuICAgICAgICBpZiAoIXBhcmVudC5hbGxvd3NNYXJrVHlwZShtYXJrVHlwZSkpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGV0IHNlZW4gPSBbXSwgc2NhbiA9IChtYXRjaCkgPT4ge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKG1hdGNoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2guZWRnZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgeyB0eXBlLCBuZXh0IH0gPSBtYXRjaC5lZGdlKGkpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlID09IG5vZGVUeXBlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5pbmRleE9mKG5leHQpIDwgMCAmJiBzY2FuKG5leHQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNjYW4ocGFyZW50LmNvbnRlbnRNYXRjaCkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kU2FtZU1hcmtJblNldChtYXJrLCBzZXQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobWFyay5lcShzZXRbaV0pKVxuICAgICAgICAgICAgcmV0dXJuIHNldFtpXTtcbiAgICB9XG59XG5cbi8qKlxuQSBET00gc2VyaWFsaXplciBrbm93cyBob3cgdG8gY29udmVydCBQcm9zZU1pcnJvciBub2RlcyBhbmRcbm1hcmtzIG9mIHZhcmlvdXMgdHlwZXMgdG8gRE9NIG5vZGVzLlxuKi9cbmNsYXNzIERPTVNlcmlhbGl6ZXIge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNlcmlhbGl6ZXIuIGBub2Rlc2Agc2hvdWxkIG1hcCBub2RlIG5hbWVzIHRvIGZ1bmN0aW9uc1xuICAgIHRoYXQgdGFrZSBhIG5vZGUgYW5kIHJldHVybiBhIGRlc2NyaXB0aW9uIG9mIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgRE9NLiBgbWFya3NgIGRvZXMgdGhlIHNhbWUgZm9yIG1hcmsgbmFtZXMsIGJ1dCBhbHNvIGdldHMgYW5cbiAgICBhcmd1bWVudCB0aGF0IHRlbGxzIGl0IHdoZXRoZXIgdGhlIG1hcmsncyBjb250ZW50IGlzIGJsb2NrIG9yXG4gICAgaW5saW5lIGNvbnRlbnQgKGZvciB0eXBpY2FsIHVzZSwgaXQnbGwgYWx3YXlzIGJlIGlubGluZSkuIEEgbWFya1xuICAgIHNlcmlhbGl6ZXIgbWF5IGJlIGBudWxsYCB0byBpbmRpY2F0ZSB0aGF0IG1hcmtzIG9mIHRoYXQgdHlwZVxuICAgIHNob3VsZCBub3QgYmUgc2VyaWFsaXplZC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBub2RlIHNlcmlhbGl6YXRpb24gZnVuY3Rpb25zLlxuICAgICovXG4gICAgbm9kZXMsIFxuICAgIC8qKlxuICAgIFRoZSBtYXJrIHNlcmlhbGl6YXRpb24gZnVuY3Rpb25zLlxuICAgICovXG4gICAgbWFya3MpIHtcbiAgICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xuICAgICAgICB0aGlzLm1hcmtzID0gbWFya3M7XG4gICAgfVxuICAgIC8qKlxuICAgIFNlcmlhbGl6ZSB0aGUgY29udGVudCBvZiB0aGlzIGZyYWdtZW50IHRvIGEgRE9NIGZyYWdtZW50LiBXaGVuXG4gICAgbm90IGluIHRoZSBicm93c2VyLCB0aGUgYGRvY3VtZW50YCBvcHRpb24sIGNvbnRhaW5pbmcgYSBET01cbiAgICBkb2N1bWVudCwgc2hvdWxkIGJlIHBhc3NlZCBzbyB0aGF0IHRoZSBzZXJpYWxpemVyIGNhbiBjcmVhdGVcbiAgICBub2Rlcy5cbiAgICAqL1xuICAgIHNlcmlhbGl6ZUZyYWdtZW50KGZyYWdtZW50LCBvcHRpb25zID0ge30sIHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldClcbiAgICAgICAgICAgIHRhcmdldCA9IGRvYyhvcHRpb25zKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIGxldCB0b3AgPSB0YXJnZXQsIGFjdGl2ZSA9IFtdO1xuICAgICAgICBmcmFnbWVudC5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZS5sZW5ndGggfHwgbm9kZS5tYXJrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQga2VlcCA9IDAsIHJlbmRlcmVkID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoa2VlcCA8IGFjdGl2ZS5sZW5ndGggJiYgcmVuZGVyZWQgPCBub2RlLm1hcmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGUubWFya3NbcmVuZGVyZWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubWFya3NbbmV4dC50eXBlLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0LmVxKGFjdGl2ZVtrZWVwXVswXSkgfHwgbmV4dC50eXBlLnNwZWMuc3Bhbm5pbmcgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGtlZXArKztcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2hpbGUgKGtlZXAgPCBhY3RpdmUubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICB0b3AgPSBhY3RpdmUucG9wKClbMV07XG4gICAgICAgICAgICAgICAgd2hpbGUgKHJlbmRlcmVkIDwgbm9kZS5tYXJrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFkZCA9IG5vZGUubWFya3NbcmVuZGVyZWQrK107XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXJrRE9NID0gdGhpcy5zZXJpYWxpemVNYXJrKGFkZCwgbm9kZS5pc0lubGluZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrRE9NKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUucHVzaChbYWRkLCB0b3BdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcC5hcHBlbmRDaGlsZChtYXJrRE9NLmRvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBtYXJrRE9NLmNvbnRlbnRET00gfHwgbWFya0RPTS5kb207XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b3AuYXBwZW5kQ2hpbGQodGhpcy5zZXJpYWxpemVOb2RlSW5uZXIobm9kZSwgb3B0aW9ucykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzZXJpYWxpemVOb2RlSW5uZXIobm9kZSwgb3B0aW9ucykge1xuICAgICAgICBsZXQgeyBkb20sIGNvbnRlbnRET00gfSA9IERPTVNlcmlhbGl6ZXIucmVuZGVyU3BlYyhkb2Mob3B0aW9ucyksIHRoaXMubm9kZXNbbm9kZS50eXBlLm5hbWVdKG5vZGUpKTtcbiAgICAgICAgaWYgKGNvbnRlbnRET00pIHtcbiAgICAgICAgICAgIGlmIChub2RlLmlzTGVhZilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjXCIpO1xuICAgICAgICAgICAgdGhpcy5zZXJpYWxpemVGcmFnbWVudChub2RlLmNvbnRlbnQsIG9wdGlvbnMsIGNvbnRlbnRET00pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb207XG4gICAgfVxuICAgIC8qKlxuICAgIFNlcmlhbGl6ZSB0aGlzIG5vZGUgdG8gYSBET00gbm9kZS4gVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4geW91XG4gICAgbmVlZCB0byBzZXJpYWxpemUgYSBwYXJ0IG9mIGEgZG9jdW1lbnQsIGFzIG9wcG9zZWQgdG8gdGhlIHdob2xlXG4gICAgZG9jdW1lbnQuIFRvIHNlcmlhbGl6ZSBhIHdob2xlIGRvY3VtZW50LCB1c2VcbiAgICBbYHNlcmlhbGl6ZUZyYWdtZW50YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLkRPTVNlcmlhbGl6ZXIuc2VyaWFsaXplRnJhZ21lbnQpIG9uXG4gICAgaXRzIFtjb250ZW50XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZS5jb250ZW50KS5cbiAgICAqL1xuICAgIHNlcmlhbGl6ZU5vZGUobm9kZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCBkb20gPSB0aGlzLnNlcmlhbGl6ZU5vZGVJbm5lcihub2RlLCBvcHRpb25zKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IG5vZGUubWFya3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCB3cmFwID0gdGhpcy5zZXJpYWxpemVNYXJrKG5vZGUubWFya3NbaV0sIG5vZGUuaXNJbmxpbmUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHdyYXApIHtcbiAgICAgICAgICAgICAgICAod3JhcC5jb250ZW50RE9NIHx8IHdyYXAuZG9tKS5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICAgICAgICAgIGRvbSA9IHdyYXAuZG9tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkb207XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2VyaWFsaXplTWFyayhtYXJrLCBpbmxpbmUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBsZXQgdG9ET00gPSB0aGlzLm1hcmtzW21hcmsudHlwZS5uYW1lXTtcbiAgICAgICAgcmV0dXJuIHRvRE9NICYmIERPTVNlcmlhbGl6ZXIucmVuZGVyU3BlYyhkb2Mob3B0aW9ucyksIHRvRE9NKG1hcmssIGlubGluZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW5kZXIgYW4gW291dHB1dCBzcGVjXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuRE9NT3V0cHV0U3BlYykgdG8gYSBET00gbm9kZS4gSWZcbiAgICB0aGUgc3BlYyBoYXMgYSBob2xlICh6ZXJvKSBpbiBpdCwgYGNvbnRlbnRET01gIHdpbGwgcG9pbnQgYXQgdGhlXG4gICAgbm9kZSB3aXRoIHRoZSBob2xlLlxuICAgICovXG4gICAgc3RhdGljIHJlbmRlclNwZWMoZG9jLCBzdHJ1Y3R1cmUsIHhtbE5TID0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHN0cnVjdHVyZSA9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgcmV0dXJuIHsgZG9tOiBkb2MuY3JlYXRlVGV4dE5vZGUoc3RydWN0dXJlKSB9O1xuICAgICAgICBpZiAoc3RydWN0dXJlLm5vZGVUeXBlICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4geyBkb206IHN0cnVjdHVyZSB9O1xuICAgICAgICBpZiAoc3RydWN0dXJlLmRvbSAmJiBzdHJ1Y3R1cmUuZG9tLm5vZGVUeXBlICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gc3RydWN0dXJlO1xuICAgICAgICBsZXQgdGFnTmFtZSA9IHN0cnVjdHVyZVswXSwgc3BhY2UgPSB0YWdOYW1lLmluZGV4T2YoXCIgXCIpO1xuICAgICAgICBpZiAoc3BhY2UgPiAwKSB7XG4gICAgICAgICAgICB4bWxOUyA9IHRhZ05hbWUuc2xpY2UoMCwgc3BhY2UpO1xuICAgICAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUuc2xpY2Uoc3BhY2UgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGVudERPTTtcbiAgICAgICAgbGV0IGRvbSA9ICh4bWxOUyA/IGRvYy5jcmVhdGVFbGVtZW50TlMoeG1sTlMsIHRhZ05hbWUpIDogZG9jLmNyZWF0ZUVsZW1lbnQodGFnTmFtZSkpO1xuICAgICAgICBsZXQgYXR0cnMgPSBzdHJ1Y3R1cmVbMV0sIHN0YXJ0ID0gMTtcbiAgICAgICAgaWYgKGF0dHJzICYmIHR5cGVvZiBhdHRycyA9PSBcIm9iamVjdFwiICYmIGF0dHJzLm5vZGVUeXBlID09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoYXR0cnMpKSB7XG4gICAgICAgICAgICBzdGFydCA9IDI7XG4gICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIGF0dHJzKVxuICAgICAgICAgICAgICAgIGlmIChhdHRyc1tuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZSA9IG5hbWUuaW5kZXhPZihcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFjZSA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlTlMobmFtZS5zbGljZSgwLCBzcGFjZSksIG5hbWUuc2xpY2Uoc3BhY2UgKyAxKSwgYXR0cnNbbmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBkb20uc2V0QXR0cmlidXRlKG5hbWUsIGF0dHJzW25hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgc3RydWN0dXJlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBzdHJ1Y3R1cmVbaV07XG4gICAgICAgICAgICBpZiAoY2hpbGQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IHN0cnVjdHVyZS5sZW5ndGggLSAxIHx8IGkgPiBzdGFydClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZG9tLCBjb250ZW50RE9NOiBkb20gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB7IGRvbTogaW5uZXIsIGNvbnRlbnRET006IGlubmVyQ29udGVudCB9ID0gRE9NU2VyaWFsaXplci5yZW5kZXJTcGVjKGRvYywgY2hpbGQsIHhtbE5TKTtcbiAgICAgICAgICAgICAgICBkb20uYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lckNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk11bHRpcGxlIGNvbnRlbnQgaG9sZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRET00gPSBpbm5lckNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRvbSwgY29udGVudERPTSB9O1xuICAgIH1cbiAgICAvKipcbiAgICBCdWlsZCBhIHNlcmlhbGl6ZXIgdXNpbmcgdGhlIFtgdG9ET01gXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMudG9ET00pXG4gICAgcHJvcGVydGllcyBpbiBhIHNjaGVtYSdzIG5vZGUgYW5kIG1hcmsgc3BlY3MuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5jYWNoZWQuZG9tU2VyaWFsaXplciB8fFxuICAgICAgICAgICAgKHNjaGVtYS5jYWNoZWQuZG9tU2VyaWFsaXplciA9IG5ldyBET01TZXJpYWxpemVyKHRoaXMubm9kZXNGcm9tU2NoZW1hKHNjaGVtYSksIHRoaXMubWFya3NGcm9tU2NoZW1hKHNjaGVtYSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2F0aGVyIHRoZSBzZXJpYWxpemVycyBpbiBhIHNjaGVtYSdzIG5vZGUgc3BlY3MgaW50byBhbiBvYmplY3QuXG4gICAgVGhpcyBjYW4gYmUgdXNlZnVsIGFzIGEgYmFzZSB0byBidWlsZCBhIGN1c3RvbSBzZXJpYWxpemVyIGZyb20uXG4gICAgKi9cbiAgICBzdGF0aWMgbm9kZXNGcm9tU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gZ2F0aGVyVG9ET00oc2NoZW1hLm5vZGVzKTtcbiAgICAgICAgaWYgKCFyZXN1bHQudGV4dClcbiAgICAgICAgICAgIHJlc3VsdC50ZXh0ID0gbm9kZSA9PiBub2RlLnRleHQ7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEdhdGhlciB0aGUgc2VyaWFsaXplcnMgaW4gYSBzY2hlbWEncyBtYXJrIHNwZWNzIGludG8gYW4gb2JqZWN0LlxuICAgICovXG4gICAgc3RhdGljIG1hcmtzRnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIGdhdGhlclRvRE9NKHNjaGVtYS5tYXJrcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2F0aGVyVG9ET00ob2JqKSB7XG4gICAgbGV0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAobGV0IG5hbWUgaW4gb2JqKSB7XG4gICAgICAgIGxldCB0b0RPTSA9IG9ialtuYW1lXS5zcGVjLnRvRE9NO1xuICAgICAgICBpZiAodG9ET00pXG4gICAgICAgICAgICByZXN1bHRbbmFtZV0gPSB0b0RPTTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGRvYyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuZG9jdW1lbnQgfHwgd2luZG93LmRvY3VtZW50O1xufVxuXG5leHBvcnQgeyBDb250ZW50TWF0Y2gsIERPTVBhcnNlciwgRE9NU2VyaWFsaXplciwgRnJhZ21lbnQsIE1hcmssIE1hcmtUeXBlLCBOb2RlLCBOb2RlUmFuZ2UsIE5vZGVUeXBlLCBSZXBsYWNlRXJyb3IsIFJlc29sdmVkUG9zLCBTY2hlbWEsIFNsaWNlIH07XG4iLCJpbXBvcnQgeyBSZXBsYWNlRXJyb3IsIFNsaWNlLCBGcmFnbWVudCwgTWFya1R5cGUsIE1hcmsgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5cbi8vIFJlY292ZXJ5IHZhbHVlcyBlbmNvZGUgYSByYW5nZSBpbmRleCBhbmQgYW4gb2Zmc2V0LiBUaGV5IGFyZVxuLy8gcmVwcmVzZW50ZWQgYXMgbnVtYmVycywgYmVjYXVzZSB0b25zIG9mIHRoZW0gd2lsbCBiZSBjcmVhdGVkIHdoZW5cbi8vIG1hcHBpbmcsIGZvciBleGFtcGxlLCBhIGxhcmdlIG51bWJlciBvZiBkZWNvcmF0aW9ucy4gVGhlIG51bWJlcidzXG4vLyBsb3dlciAxNiBiaXRzIHByb3ZpZGUgdGhlIGluZGV4LCB0aGUgcmVtYWluaW5nIGJpdHMgdGhlIG9mZnNldC5cbi8vXG4vLyBOb3RlOiBXZSBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBiaXQgc2hpZnQgb3BlcmF0b3JzIHRvIGVuLSBhbmRcbi8vIGRlY29kZSB0aGVzZSwgc2luY2UgdGhvc2UgY2xpcCB0byAzMiBiaXRzLCB3aGljaCB3ZSBtaWdodCBpbiByYXJlXG4vLyBjYXNlcyB3YW50IHRvIG92ZXJmbG93LiBBIDY0LWJpdCBmbG9hdCBjYW4gcmVwcmVzZW50IDQ4LWJpdFxuLy8gaW50ZWdlcnMgcHJlY2lzZWx5LlxuY29uc3QgbG93ZXIxNiA9IDB4ZmZmZjtcbmNvbnN0IGZhY3RvcjE2ID0gTWF0aC5wb3coMiwgMTYpO1xuZnVuY3Rpb24gbWFrZVJlY292ZXIoaW5kZXgsIG9mZnNldCkgeyByZXR1cm4gaW5kZXggKyBvZmZzZXQgKiBmYWN0b3IxNjsgfVxuZnVuY3Rpb24gcmVjb3ZlckluZGV4KHZhbHVlKSB7IHJldHVybiB2YWx1ZSAmIGxvd2VyMTY7IH1cbmZ1bmN0aW9uIHJlY292ZXJPZmZzZXQodmFsdWUpIHsgcmV0dXJuICh2YWx1ZSAtICh2YWx1ZSAmIGxvd2VyMTYpKSAvIGZhY3RvcjE2OyB9XG5jb25zdCBERUxfQkVGT1JFID0gMSwgREVMX0FGVEVSID0gMiwgREVMX0FDUk9TUyA9IDQsIERFTF9TSURFID0gODtcbi8qKlxuQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhIG1hcHBlZCBwb3NpdGlvbiB3aXRoIGV4dHJhXG5pbmZvcm1hdGlvbi5cbiovXG5jbGFzcyBNYXBSZXN1bHQge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIG1hcHBlZCB2ZXJzaW9uIG9mIHRoZSBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHBvcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBkZWxJbmZvLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlY292ZXIpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZGVsSW5mbyA9IGRlbEluZm87XG4gICAgICAgIHRoaXMucmVjb3ZlciA9IHJlY292ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoZSBwb3NpdGlvbiB3YXMgZGVsZXRlZCwgdGhhdCBpcywgd2hldGhlciB0aGVcbiAgICBzdGVwIHJlbW92ZWQgdGhlIHRva2VuIG9uIHRoZSBzaWRlIHF1ZXJpZWQgKHZpYSB0aGUgYGFzc29jYClcbiAgICBhcmd1bWVudCBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBkZWxldGVkKCkgeyByZXR1cm4gKHRoaXMuZGVsSW5mbyAmIERFTF9TSURFKSA+IDA7IH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGUgdG9rZW4gYmVmb3JlIHRoZSBtYXBwZWQgcG9zaXRpb24gd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEJlZm9yZSgpIHsgcmV0dXJuICh0aGlzLmRlbEluZm8gJiAoREVMX0JFRk9SRSB8IERFTF9BQ1JPU1MpKSA+IDA7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhlIHRva2VuIGFmdGVyIHRoZSBtYXBwZWQgcG9zaXRpb24gd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEFmdGVyKCkgeyByZXR1cm4gKHRoaXMuZGVsSW5mbyAmIChERUxfQUZURVIgfCBERUxfQUNST1NTKSkgPiAwOyB9XG4gICAgLyoqXG4gICAgVGVsbHMgd2hldGhlciBhbnkgb2YgdGhlIHN0ZXBzIG1hcHBlZCB0aHJvdWdoIGRlbGV0ZXMgYWNyb3NzIHRoZVxuICAgIHBvc2l0aW9uIChpbmNsdWRpbmcgYm90aCB0aGUgdG9rZW4gYmVmb3JlIGFuZCBhZnRlciB0aGVcbiAgICBwb3NpdGlvbikuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEFjcm9zcygpIHsgcmV0dXJuICh0aGlzLmRlbEluZm8gJiBERUxfQUNST1NTKSA+IDA7IH1cbn1cbi8qKlxuQSBtYXAgZGVzY3JpYmluZyB0aGUgZGVsZXRpb25zIGFuZCBpbnNlcnRpb25zIG1hZGUgYnkgYSBzdGVwLCB3aGljaFxuY2FuIGJlIHVzZWQgdG8gZmluZCB0aGUgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBwb3NpdGlvbnMgaW4gdGhlXG5wcmUtc3RlcCB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgYW5kIHRoZSBzYW1lIHBvc2l0aW9uIGluIHRoZVxucG9zdC1zdGVwIHZlcnNpb24uXG4qL1xuY2xhc3MgU3RlcE1hcCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcG9zaXRpb24gbWFwLiBUaGUgbW9kaWZpY2F0aW9ucyB0byB0aGUgZG9jdW1lbnQgYXJlXG4gICAgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2YgbnVtYmVycywgaW4gd2hpY2ggZWFjaCBncm91cCBvZiB0aHJlZVxuICAgIHJlcHJlc2VudHMgYSBtb2RpZmllZCBjaHVuayBhcyBgW3N0YXJ0LCBvbGRTaXplLCBuZXdTaXplXWAuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJhbmdlcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpbnZlcnRlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLmludmVydGVkID0gaW52ZXJ0ZWQ7XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCAmJiBTdGVwTWFwLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBNYXAuZW1wdHk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVjb3Zlcih2YWx1ZSkge1xuICAgICAgICBsZXQgZGlmZiA9IDAsIGluZGV4ID0gcmVjb3ZlckluZGV4KHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLmludmVydGVkKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKVxuICAgICAgICAgICAgICAgIGRpZmYgKz0gdGhpcy5yYW5nZXNbaSAqIDMgKyAyXSAtIHRoaXMucmFuZ2VzW2kgKiAzICsgMV07XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlc1tpbmRleCAqIDNdICsgZGlmZiArIHJlY292ZXJPZmZzZXQodmFsdWUpO1xuICAgIH1cbiAgICBtYXBSZXN1bHQocG9zLCBhc3NvYyA9IDEpIHsgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCBmYWxzZSk7IH1cbiAgICBtYXAocG9zLCBhc3NvYyA9IDEpIHsgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCB0cnVlKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgX21hcChwb3MsIGFzc29jLCBzaW1wbGUpIHtcbiAgICAgICAgbGV0IGRpZmYgPSAwLCBvbGRJbmRleCA9IHRoaXMuaW52ZXJ0ZWQgPyAyIDogMSwgbmV3SW5kZXggPSB0aGlzLmludmVydGVkID8gMSA6IDI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMucmFuZ2VzW2ldIC0gKHRoaXMuaW52ZXJ0ZWQgPyBkaWZmIDogMCk7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPiBwb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgb2xkU2l6ZSA9IHRoaXMucmFuZ2VzW2kgKyBvbGRJbmRleF0sIG5ld1NpemUgPSB0aGlzLnJhbmdlc1tpICsgbmV3SW5kZXhdLCBlbmQgPSBzdGFydCArIG9sZFNpemU7XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCBzaWRlID0gIW9sZFNpemUgPyBhc3NvYyA6IHBvcyA9PSBzdGFydCA/IC0xIDogcG9zID09IGVuZCA/IDEgOiBhc3NvYztcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gc3RhcnQgKyBkaWZmICsgKHNpZGUgPCAwID8gMCA6IG5ld1NpemUpO1xuICAgICAgICAgICAgICAgIGlmIChzaW1wbGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgbGV0IHJlY292ZXIgPSBwb3MgPT0gKGFzc29jIDwgMCA/IHN0YXJ0IDogZW5kKSA/IG51bGwgOiBtYWtlUmVjb3ZlcihpIC8gMywgcG9zIC0gc3RhcnQpO1xuICAgICAgICAgICAgICAgIGxldCBkZWwgPSBwb3MgPT0gc3RhcnQgPyBERUxfQUZURVIgOiBwb3MgPT0gZW5kID8gREVMX0JFRk9SRSA6IERFTF9BQ1JPU1M7XG4gICAgICAgICAgICAgICAgaWYgKGFzc29jIDwgMCA/IHBvcyAhPSBzdGFydCA6IHBvcyAhPSBlbmQpXG4gICAgICAgICAgICAgICAgICAgIGRlbCB8PSBERUxfU0lERTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcFJlc3VsdChyZXN1bHQsIGRlbCwgcmVjb3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaWZmICs9IG5ld1NpemUgLSBvbGRTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGUgPyBwb3MgKyBkaWZmIDogbmV3IE1hcFJlc3VsdChwb3MgKyBkaWZmLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b3VjaGVzKHBvcywgcmVjb3Zlcikge1xuICAgICAgICBsZXQgZGlmZiA9IDAsIGluZGV4ID0gcmVjb3ZlckluZGV4KHJlY292ZXIpO1xuICAgICAgICBsZXQgb2xkSW5kZXggPSB0aGlzLmludmVydGVkID8gMiA6IDEsIG5ld0luZGV4ID0gdGhpcy5pbnZlcnRlZCA/IDEgOiAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnJhbmdlc1tpXSAtICh0aGlzLmludmVydGVkID8gZGlmZiA6IDApO1xuICAgICAgICAgICAgaWYgKHN0YXJ0ID4gcG9zKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IG9sZFNpemUgPSB0aGlzLnJhbmdlc1tpICsgb2xkSW5kZXhdLCBlbmQgPSBzdGFydCArIG9sZFNpemU7XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZCAmJiBpID09IGluZGV4ICogMylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGRpZmYgKz0gdGhpcy5yYW5nZXNbaSArIG5ld0luZGV4XSAtIG9sZFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBDYWxscyB0aGUgZ2l2ZW4gZnVuY3Rpb24gb24gZWFjaCBvZiB0aGUgY2hhbmdlZCByYW5nZXMgaW5jbHVkZWQgaW5cbiAgICB0aGlzIG1hcC5cbiAgICAqL1xuICAgIGZvckVhY2goZikge1xuICAgICAgICBsZXQgb2xkSW5kZXggPSB0aGlzLmludmVydGVkID8gMiA6IDEsIG5ld0luZGV4ID0gdGhpcy5pbnZlcnRlZCA/IDEgOiAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgZGlmZiA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5yYW5nZXNbaV0sIG9sZFN0YXJ0ID0gc3RhcnQgLSAodGhpcy5pbnZlcnRlZCA/IGRpZmYgOiAwKSwgbmV3U3RhcnQgPSBzdGFydCArICh0aGlzLmludmVydGVkID8gMCA6IGRpZmYpO1xuICAgICAgICAgICAgbGV0IG9sZFNpemUgPSB0aGlzLnJhbmdlc1tpICsgb2xkSW5kZXhdLCBuZXdTaXplID0gdGhpcy5yYW5nZXNbaSArIG5ld0luZGV4XTtcbiAgICAgICAgICAgIGYob2xkU3RhcnQsIG9sZFN0YXJ0ICsgb2xkU2l6ZSwgbmV3U3RhcnQsIG5ld1N0YXJ0ICsgbmV3U2l6ZSk7XG4gICAgICAgICAgICBkaWZmICs9IG5ld1NpemUgLSBvbGRTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnZlcnRlZCB2ZXJzaW9uIG9mIHRoaXMgbWFwLiBUaGUgcmVzdWx0IGNhbiBiZSB1c2VkIHRvXG4gICAgbWFwIHBvc2l0aW9ucyBpbiB0aGUgcG9zdC1zdGVwIGRvY3VtZW50IHRvIHRoZSBwcmUtc3RlcCBkb2N1bWVudC5cbiAgICAqL1xuICAgIGludmVydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGVwTWFwKHRoaXMucmFuZ2VzLCAhdGhpcy5pbnZlcnRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbnZlcnRlZCA/IFwiLVwiIDogXCJcIikgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnJhbmdlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcCB0aGF0IG1vdmVzIGFsbCBwb3NpdGlvbnMgYnkgb2Zmc2V0IGBuYCAod2hpY2ggbWF5IGJlXG4gICAgbmVnYXRpdmUpLiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiBhcHBseWluZyBzdGVwcyBtZWFudCBmb3IgYVxuICAgIHN1Yi1kb2N1bWVudCB0byBhIGxhcmdlciBkb2N1bWVudCwgb3IgdmljZS12ZXJzYS5cbiAgICAqL1xuICAgIHN0YXRpYyBvZmZzZXQobikge1xuICAgICAgICByZXR1cm4gbiA9PSAwID8gU3RlcE1hcC5lbXB0eSA6IG5ldyBTdGVwTWFwKG4gPCAwID8gWzAsIC1uLCAwXSA6IFswLCAwLCBuXSk7XG4gICAgfVxufVxuLyoqXG5BIFN0ZXBNYXAgdGhhdCBjb250YWlucyBubyBjaGFuZ2VkIHJhbmdlcy5cbiovXG5TdGVwTWFwLmVtcHR5ID0gbmV3IFN0ZXBNYXAoW10pO1xuLyoqXG5BIG1hcHBpbmcgcmVwcmVzZW50cyBhIHBpcGVsaW5lIG9mIHplcm8gb3IgbW9yZSBbc3RlcFxubWFwc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5TdGVwTWFwKS4gSXQgaGFzIHNwZWNpYWwgcHJvdmlzaW9ucyBmb3IgbG9zc2xlc3NseVxuaGFuZGxpbmcgbWFwcGluZyBwb3NpdGlvbnMgdGhyb3VnaCBhIHNlcmllcyBvZiBzdGVwcyBpbiB3aGljaCBzb21lXG5zdGVwcyBhcmUgaW52ZXJ0ZWQgdmVyc2lvbnMgb2YgZWFybGllciBzdGVwcy4gKFRoaXMgY29tZXMgdXAgd2hlblxu4oCYW3JlYmFzaW5nXSgvZG9jcy9ndWlkZS8jdHJhbnNmb3JtLnJlYmFzaW5nKeKAmSBzdGVwcyBmb3JcbmNvbGxhYm9yYXRpb24gb3IgaGlzdG9yeSBtYW5hZ2VtZW50LilcbiovXG5jbGFzcyBNYXBwaW5nIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgbWFwcGluZyB3aXRoIHRoZSBnaXZlbiBwb3NpdGlvbiBtYXBzLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0ZXAgbWFwcyBpbiB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBtYXBzID0gW10sIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbWlycm9yLCBcbiAgICAvKipcbiAgICBUaGUgc3RhcnRpbmcgcG9zaXRpb24gaW4gdGhlIGBtYXBzYCBhcnJheSwgdXNlZCB3aGVuIGBtYXBgIG9yXG4gICAgYG1hcFJlc3VsdGAgaXMgY2FsbGVkLlxuICAgICovXG4gICAgZnJvbSA9IDAsIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgcG9zaXRpb24gaW4gdGhlIGBtYXBzYCBhcnJheS5cbiAgICAqL1xuICAgIHRvID0gbWFwcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5tYXBzID0gbWFwcztcbiAgICAgICAgdGhpcy5taXJyb3IgPSBtaXJyb3I7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWFwcGluZyB0aGF0IG1hcHMgb25seSB0aHJvdWdoIGEgcGFydCBvZiB0aGlzIG9uZS5cbiAgICAqL1xuICAgIHNsaWNlKGZyb20gPSAwLCB0byA9IHRoaXMubWFwcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXBwaW5nKHRoaXMubWFwcywgdGhpcy5taXJyb3IsIGZyb20sIHRvKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE1hcHBpbmcodGhpcy5tYXBzLnNsaWNlKCksIHRoaXMubWlycm9yICYmIHRoaXMubWlycm9yLnNsaWNlKCksIHRoaXMuZnJvbSwgdGhpcy50byk7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIHN0ZXAgbWFwIHRvIHRoZSBlbmQgb2YgdGhpcyBtYXBwaW5nLiBJZiBgbWlycm9yc2AgaXNcbiAgICBnaXZlbiwgaXQgc2hvdWxkIGJlIHRoZSBpbmRleCBvZiB0aGUgc3RlcCBtYXAgdGhhdCBpcyB0aGUgbWlycm9yXG4gICAgaW1hZ2Ugb2YgdGhpcyBvbmUuXG4gICAgKi9cbiAgICBhcHBlbmRNYXAobWFwLCBtaXJyb3JzKSB7XG4gICAgICAgIHRoaXMudG8gPSB0aGlzLm1hcHMucHVzaChtYXApO1xuICAgICAgICBpZiAobWlycm9ycyAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5zZXRNaXJyb3IodGhpcy5tYXBzLmxlbmd0aCAtIDEsIG1pcnJvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYWxsIHRoZSBzdGVwIG1hcHMgaW4gYSBnaXZlbiBtYXBwaW5nIHRvIHRoaXMgb25lIChwcmVzZXJ2aW5nXG4gICAgbWlycm9yaW5nIGluZm9ybWF0aW9uKS5cbiAgICAqL1xuICAgIGFwcGVuZE1hcHBpbmcobWFwcGluZykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgc3RhcnRTaXplID0gdGhpcy5tYXBzLmxlbmd0aDsgaSA8IG1hcHBpbmcubWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG1pcnIgPSBtYXBwaW5nLmdldE1pcnJvcihpKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTWFwKG1hcHBpbmcubWFwc1tpXSwgbWlyciAhPSBudWxsICYmIG1pcnIgPCBpID8gc3RhcnRTaXplICsgbWlyciA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgRmluZHMgdGhlIG9mZnNldCBvZiB0aGUgc3RlcCBtYXAgdGhhdCBtaXJyb3JzIHRoZSBtYXAgYXQgdGhlXG4gICAgZ2l2ZW4gb2Zmc2V0LCBpbiB0aGlzIG1hcHBpbmcgKGFzIHBlciB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvXG4gICAgYGFwcGVuZE1hcGApLlxuICAgICovXG4gICAgZ2V0TWlycm9yKG4pIHtcbiAgICAgICAgaWYgKHRoaXMubWlycm9yKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1pcnJvci5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5taXJyb3JbaV0gPT0gbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWlycm9yW2kgKyAoaSAlIDIgPyAtMSA6IDEpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzZXRNaXJyb3IobiwgbSkge1xuICAgICAgICBpZiAoIXRoaXMubWlycm9yKVxuICAgICAgICAgICAgdGhpcy5taXJyb3IgPSBbXTtcbiAgICAgICAgdGhpcy5taXJyb3IucHVzaChuLCBtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwZW5kIHRoZSBpbnZlcnNlIG9mIHRoZSBnaXZlbiBtYXBwaW5nIHRvIHRoaXMgb25lLlxuICAgICovXG4gICAgYXBwZW5kTWFwcGluZ0ludmVydGVkKG1hcHBpbmcpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IG1hcHBpbmcubWFwcy5sZW5ndGggLSAxLCB0b3RhbFNpemUgPSB0aGlzLm1hcHMubGVuZ3RoICsgbWFwcGluZy5tYXBzLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBtaXJyID0gbWFwcGluZy5nZXRNaXJyb3IoaSk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZE1hcChtYXBwaW5nLm1hcHNbaV0uaW52ZXJ0KCksIG1pcnIgIT0gbnVsbCAmJiBtaXJyID4gaSA/IHRvdGFsU2l6ZSAtIG1pcnIgLSAxIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBpbnZlcnQoKSB7XG4gICAgICAgIGxldCBpbnZlcnNlID0gbmV3IE1hcHBpbmc7XG4gICAgICAgIGludmVyc2UuYXBwZW5kTWFwcGluZ0ludmVydGVkKHRoaXMpO1xuICAgICAgICByZXR1cm4gaW52ZXJzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIGEgcG9zaXRpb24gdGhyb3VnaCB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBtYXAocG9zLCBhc3NvYyA9IDEpIHtcbiAgICAgICAgaWYgKHRoaXMubWlycm9yKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCB0cnVlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZnJvbTsgaSA8IHRoaXMudG87IGkrKylcbiAgICAgICAgICAgIHBvcyA9IHRoaXMubWFwc1tpXS5tYXAocG9zLCBhc3NvYyk7XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhIHBvc2l0aW9uIHRocm91Z2ggdGhpcyBtYXBwaW5nLCByZXR1cm5pbmcgYSBtYXBwaW5nXG4gICAgcmVzdWx0LlxuICAgICovXG4gICAgbWFwUmVzdWx0KHBvcywgYXNzb2MgPSAxKSB7IHJldHVybiB0aGlzLl9tYXAocG9zLCBhc3NvYywgZmFsc2UpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBfbWFwKHBvcywgYXNzb2MsIHNpbXBsZSkge1xuICAgICAgICBsZXQgZGVsSW5mbyA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmZyb207IGkgPCB0aGlzLnRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBtYXAgPSB0aGlzLm1hcHNbaV0sIHJlc3VsdCA9IG1hcC5tYXBSZXN1bHQocG9zLCBhc3NvYyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnJlY292ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBjb3JyID0gdGhpcy5nZXRNaXJyb3IoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvcnIgIT0gbnVsbCAmJiBjb3JyID4gaSAmJiBjb3JyIDwgdGhpcy50bykge1xuICAgICAgICAgICAgICAgICAgICBpID0gY29ycjtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5tYXBzW2NvcnJdLnJlY292ZXIocmVzdWx0LnJlY292ZXIpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxJbmZvIHw9IHJlc3VsdC5kZWxJbmZvO1xuICAgICAgICAgICAgcG9zID0gcmVzdWx0LnBvcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxlID8gcG9zIDogbmV3IE1hcFJlc3VsdChwb3MsIGRlbEluZm8sIG51bGwpO1xuICAgIH1cbn1cblxuY29uc3Qgc3RlcHNCeUlEID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKlxuQSBzdGVwIG9iamVjdCByZXByZXNlbnRzIGFuIGF0b21pYyBjaGFuZ2UuIEl0IGdlbmVyYWxseSBhcHBsaWVzXG5vbmx5IHRvIHRoZSBkb2N1bWVudCBpdCB3YXMgY3JlYXRlZCBmb3IsIHNpbmNlIHRoZSBwb3NpdGlvbnNcbnN0b3JlZCBpbiBpdCB3aWxsIG9ubHkgbWFrZSBzZW5zZSBmb3IgdGhhdCBkb2N1bWVudC5cblxuTmV3IHN0ZXBzIGFyZSBkZWZpbmVkIGJ5IGNyZWF0aW5nIGNsYXNzZXMgdGhhdCBleHRlbmQgYFN0ZXBgLFxub3ZlcnJpZGluZyB0aGUgYGFwcGx5YCwgYGludmVydGAsIGBtYXBgLCBgZ2V0TWFwYCBhbmQgYGZyb21KU09OYFxubWV0aG9kcywgYW5kIHJlZ2lzdGVyaW5nIHlvdXIgY2xhc3Mgd2l0aCBhIHVuaXF1ZVxuSlNPTi1zZXJpYWxpemF0aW9uIGlkZW50aWZpZXIgdXNpbmdcbltgU3RlcC5qc29uSURgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlN0ZXBeanNvbklEKS5cbiovXG5jbGFzcyBTdGVwIHtcbiAgICAvKipcbiAgICBHZXQgdGhlIHN0ZXAgbWFwIHRoYXQgcmVwcmVzZW50cyB0aGUgY2hhbmdlcyBtYWRlIGJ5IHRoaXMgc3RlcCxcbiAgICBhbmQgd2hpY2ggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGJldHdlZW4gcG9zaXRpb25zIGluIHRoZSBvbGRcbiAgICBhbmQgdGhlIG5ldyBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldE1hcCgpIHsgcmV0dXJuIFN0ZXBNYXAuZW1wdHk7IH1cbiAgICAvKipcbiAgICBUcnkgdG8gbWVyZ2UgdGhpcyBzdGVwIHdpdGggYW5vdGhlciBvbmUsIHRvIGJlIGFwcGxpZWQgZGlyZWN0bHlcbiAgICBhZnRlciBpdC4gUmV0dXJucyB0aGUgbWVyZ2VkIHN0ZXAgd2hlbiBwb3NzaWJsZSwgbnVsbCBpZiB0aGVcbiAgICBzdGVwcyBjYW4ndCBiZSBtZXJnZWQuXG4gICAgKi9cbiAgICBtZXJnZShvdGhlcikgeyByZXR1cm4gbnVsbDsgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgc3RlcCBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uLiBXaWxsIGNhbGxcbiAgICB0aHJvdWdoIHRvIHRoZSBzdGVwIGNsYXNzJyBvd24gaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbiB8fCAhanNvbi5zdGVwVHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgU3RlcC5mcm9tSlNPTlwiKTtcbiAgICAgICAgbGV0IHR5cGUgPSBzdGVwc0J5SURbanNvbi5zdGVwVHlwZV07XG4gICAgICAgIGlmICghdHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBObyBzdGVwIHR5cGUgJHtqc29uLnN0ZXBUeXBlfSBkZWZpbmVkYCk7XG4gICAgICAgIHJldHVybiB0eXBlLmZyb21KU09OKHNjaGVtYSwganNvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIFRvIGJlIGFibGUgdG8gc2VyaWFsaXplIHN0ZXBzIHRvIEpTT04sIGVhY2ggc3RlcCBuZWVkcyBhIHN0cmluZ1xuICAgIElEIHRvIGF0dGFjaCB0byBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gVXNlIHRoaXMgbWV0aG9kIHRvXG4gICAgcmVnaXN0ZXIgYW4gSUQgZm9yIHlvdXIgc3RlcCBjbGFzc2VzLiBUcnkgdG8gcGljayBzb21ldGhpbmdcbiAgICB0aGF0J3MgdW5saWtlbHkgdG8gY2xhc2ggd2l0aCBzdGVwcyBmcm9tIG90aGVyIG1vZHVsZXMuXG4gICAgKi9cbiAgICBzdGF0aWMganNvbklEKGlkLCBzdGVwQ2xhc3MpIHtcbiAgICAgICAgaWYgKGlkIGluIHN0ZXBzQnlJRClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgXCIgKyBpZCk7XG4gICAgICAgIHN0ZXBzQnlJRFtpZF0gPSBzdGVwQ2xhc3M7XG4gICAgICAgIHN0ZXBDbGFzcy5wcm90b3R5cGUuanNvbklEID0gaWQ7XG4gICAgICAgIHJldHVybiBzdGVwQ2xhc3M7XG4gICAgfVxufVxuLyoqXG5UaGUgcmVzdWx0IG9mIFthcHBseWluZ10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5TdGVwLmFwcGx5KSBhIHN0ZXAuIENvbnRhaW5zIGVpdGhlciBhXG5uZXcgZG9jdW1lbnQgb3IgYSBmYWlsdXJlIHZhbHVlLlxuKi9cbmNsYXNzIFN0ZXBSZXN1bHQge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50LCBpZiBzdWNjZXNzZnVsLlxuICAgICovXG4gICAgZG9jLCBcbiAgICAvKipcbiAgICBUaGUgZmFpbHVyZSBtZXNzYWdlLCBpZiB1bnN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBmYWlsZWQpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMuZmFpbGVkID0gZmFpbGVkO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzdWNjZXNzZnVsIHN0ZXAgcmVzdWx0LlxuICAgICovXG4gICAgc3RhdGljIG9rKGRvYykgeyByZXR1cm4gbmV3IFN0ZXBSZXN1bHQoZG9jLCBudWxsKTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGZhaWxlZCBzdGVwIHJlc3VsdC5cbiAgICAqL1xuICAgIHN0YXRpYyBmYWlsKG1lc3NhZ2UpIHsgcmV0dXJuIG5ldyBTdGVwUmVzdWx0KG51bGwsIG1lc3NhZ2UpOyB9XG4gICAgLyoqXG4gICAgQ2FsbCBbYE5vZGUucmVwbGFjZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnJlcGxhY2UpIHdpdGggdGhlIGdpdmVuXG4gICAgYXJndW1lbnRzLiBDcmVhdGUgYSBzdWNjZXNzZnVsIHJlc3VsdCBpZiBpdCBzdWNjZWVkcywgYW5kIGFcbiAgICBmYWlsZWQgb25lIGlmIGl0IHRocm93cyBhIGBSZXBsYWNlRXJyb3JgLlxuICAgICovXG4gICAgc3RhdGljIGZyb21SZXBsYWNlKGRvYywgZnJvbSwgdG8sIHNsaWNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5vayhkb2MucmVwbGFjZShmcm9tLCB0bywgc2xpY2UpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZXBsYWNlRXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFwRnJhZ21lbnQoZnJhZ21lbnQsIGYsIHBhcmVudCkge1xuICAgIGxldCBtYXBwZWQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYWdtZW50LmNoaWxkQ291bnQ7IGkrKykge1xuICAgICAgICBsZXQgY2hpbGQgPSBmcmFnbWVudC5jaGlsZChpKTtcbiAgICAgICAgaWYgKGNoaWxkLmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuY29weShtYXBGcmFnbWVudChjaGlsZC5jb250ZW50LCBmLCBjaGlsZCkpO1xuICAgICAgICBpZiAoY2hpbGQuaXNJbmxpbmUpXG4gICAgICAgICAgICBjaGlsZCA9IGYoY2hpbGQsIHBhcmVudCwgaSk7XG4gICAgICAgIG1hcHBlZC5wdXNoKGNoaWxkKTtcbiAgICB9XG4gICAgcmV0dXJuIEZyYWdtZW50LmZyb21BcnJheShtYXBwZWQpO1xufVxuLyoqXG5BZGQgYSBtYXJrIHRvIGFsbCBpbmxpbmUgY29udGVudCBiZXR3ZWVuIHR3byBwb3NpdGlvbnMuXG4qL1xuY2xhc3MgQWRkTWFya1N0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBtYXJrIHN0ZXAuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIG1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIG1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgbWFyayB0byBhZGQuXG4gICAgKi9cbiAgICBtYXJrKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGxldCBvbGRTbGljZSA9IGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pLCAkZnJvbSA9IGRvYy5yZXNvbHZlKHRoaXMuZnJvbSk7XG4gICAgICAgIGxldCBwYXJlbnQgPSAkZnJvbS5ub2RlKCRmcm9tLnNoYXJlZERlcHRoKHRoaXMudG8pKTtcbiAgICAgICAgbGV0IHNsaWNlID0gbmV3IFNsaWNlKG1hcEZyYWdtZW50KG9sZFNsaWNlLmNvbnRlbnQsIChub2RlLCBwYXJlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kZS5pc0F0b20gfHwgIXBhcmVudC50eXBlLmFsbG93c01hcmtUeXBlKHRoaXMubWFyay50eXBlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIHJldHVybiBub2RlLm1hcmsodGhpcy5tYXJrLmFkZFRvU2V0KG5vZGUubWFya3MpKTtcbiAgICAgICAgfSwgcGFyZW50KSwgb2xkU2xpY2Uub3BlblN0YXJ0LCBvbGRTbGljZS5vcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLmZyb20sIHRoaXMudG8sIHNsaWNlKTtcbiAgICB9XG4gICAgaW52ZXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5tYXJrKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgaWYgKGZyb20uZGVsZXRlZCAmJiB0by5kZWxldGVkIHx8IGZyb20ucG9zID49IHRvLnBvcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKGZyb20ucG9zLCB0by5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIG1lcmdlKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEFkZE1hcmtTdGVwICYmXG4gICAgICAgICAgICBvdGhlci5tYXJrLmVxKHRoaXMubWFyaykgJiZcbiAgICAgICAgICAgIHRoaXMuZnJvbSA8PSBvdGhlci50byAmJiB0aGlzLnRvID49IG90aGVyLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKE1hdGgubWluKHRoaXMuZnJvbSwgb3RoZXIuZnJvbSksIE1hdGgubWF4KHRoaXMudG8sIG90aGVyLnRvKSwgdGhpcy5tYXJrKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwiYWRkTWFya1wiLCBtYXJrOiB0aGlzLm1hcmsudG9KU09OKCksXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLnRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEFkZE1hcmtTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKGpzb24uZnJvbSwganNvbi50bywgc2NoZW1hLm1hcmtGcm9tSlNPTihqc29uLm1hcmspKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcImFkZE1hcmtcIiwgQWRkTWFya1N0ZXApO1xuLyoqXG5SZW1vdmUgYSBtYXJrIGZyb20gYWxsIGlubGluZSBjb250ZW50IGJldHdlZW4gdHdvIHBvc2l0aW9ucy5cbiovXG5jbGFzcyBSZW1vdmVNYXJrU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmstcmVtb3Zpbmcgc3RlcC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBvZiB0aGUgdW5tYXJrZWQgcmFuZ2UuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgZW5kIG9mIHRoZSB1bm1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgbWFyayB0byByZW1vdmUuXG4gICAgKi9cbiAgICBtYXJrKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGxldCBvbGRTbGljZSA9IGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pO1xuICAgICAgICBsZXQgc2xpY2UgPSBuZXcgU2xpY2UobWFwRnJhZ21lbnQob2xkU2xpY2UuY29udGVudCwgbm9kZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5tYXJrKHRoaXMubWFyay5yZW1vdmVGcm9tU2V0KG5vZGUubWFya3MpKTtcbiAgICAgICAgfSwgZG9jKSwgb2xkU2xpY2Uub3BlblN0YXJ0LCBvbGRTbGljZS5vcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLmZyb20sIHRoaXMudG8sIHNsaWNlKTtcbiAgICB9XG4gICAgaW52ZXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5tYXJrKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgaWYgKGZyb20uZGVsZXRlZCAmJiB0by5kZWxldGVkIHx8IGZyb20ucG9zID49IHRvLnBvcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKGZyb20ucG9zLCB0by5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIG1lcmdlKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFJlbW92ZU1hcmtTdGVwICYmXG4gICAgICAgICAgICBvdGhlci5tYXJrLmVxKHRoaXMubWFyaykgJiZcbiAgICAgICAgICAgIHRoaXMuZnJvbSA8PSBvdGhlci50byAmJiB0aGlzLnRvID49IG90aGVyLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKE1hdGgubWluKHRoaXMuZnJvbSwgb3RoZXIuZnJvbSksIE1hdGgubWF4KHRoaXMudG8sIG90aGVyLnRvKSwgdGhpcy5tYXJrKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwicmVtb3ZlTWFya1wiLCBtYXJrOiB0aGlzLm1hcmsudG9KU09OKCksXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLnRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIFJlbW92ZU1hcmtTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKGpzb24uZnJvbSwganNvbi50bywgc2NoZW1hLm1hcmtGcm9tSlNPTihqc29uLm1hcmspKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcInJlbW92ZU1hcmtcIiwgUmVtb3ZlTWFya1N0ZXApO1xuLyoqXG5BZGQgYSBtYXJrIHRvIGEgc3BlY2lmaWMgbm9kZS5cbiovXG5jbGFzcyBBZGROb2RlTWFya1N0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBub2RlIG1hcmsgc3RlcC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAgKi9cbiAgICBwb3MsIFxuICAgIC8qKlxuICAgIFRoZSBtYXJrIHRvIGFkZC5cbiAgICAqL1xuICAgIG1hcmspIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgfVxuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBsZXQgbm9kZSA9IGRvYy5ub2RlQXQodGhpcy5wb3MpO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiTm8gbm9kZSBhdCBtYXJrIHN0ZXAncyBwb3NpdGlvblwiKTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBub2RlLnR5cGUuY3JlYXRlKG5vZGUuYXR0cnMsIG51bGwsIHRoaXMubWFyay5hZGRUb1NldChub2RlLm1hcmtzKSk7XG4gICAgICAgIHJldHVybiBTdGVwUmVzdWx0LmZyb21SZXBsYWNlKGRvYywgdGhpcy5wb3MsIHRoaXMucG9zICsgMSwgbmV3IFNsaWNlKEZyYWdtZW50LmZyb20odXBkYXRlZCksIDAsIG5vZGUuaXNMZWFmID8gMCA6IDEpKTtcbiAgICB9XG4gICAgaW52ZXJ0KGRvYykge1xuICAgICAgICBsZXQgbm9kZSA9IGRvYy5ub2RlQXQodGhpcy5wb3MpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgbGV0IG5ld1NldCA9IHRoaXMubWFyay5hZGRUb1NldChub2RlLm1hcmtzKTtcbiAgICAgICAgICAgIGlmIChuZXdTZXQubGVuZ3RoID09IG5vZGUubWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLm1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGUubWFya3NbaV0uaXNJblNldChuZXdTZXQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBZGROb2RlTWFya1N0ZXAodGhpcy5wb3MsIG5vZGUubWFya3NbaV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWRkTm9kZU1hcmtTdGVwKHRoaXMucG9zLCB0aGlzLm1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVtb3ZlTm9kZU1hcmtTdGVwKHRoaXMucG9zLCB0aGlzLm1hcmspO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICBsZXQgcG9zID0gbWFwcGluZy5tYXBSZXN1bHQodGhpcy5wb3MsIDEpO1xuICAgICAgICByZXR1cm4gcG9zLmRlbGV0ZWRBZnRlciA/IG51bGwgOiBuZXcgQWRkTm9kZU1hcmtTdGVwKHBvcy5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwiYWRkTm9kZU1hcmtcIiwgcG9zOiB0aGlzLnBvcywgbWFyazogdGhpcy5tYXJrLnRvSlNPTigpIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24ucG9zICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEFkZE5vZGVNYXJrU3RlcC5mcm9tSlNPTlwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBZGROb2RlTWFya1N0ZXAoanNvbi5wb3MsIHNjaGVtYS5tYXJrRnJvbUpTT04oanNvbi5tYXJrKSk7XG4gICAgfVxufVxuU3RlcC5qc29uSUQoXCJhZGROb2RlTWFya1wiLCBBZGROb2RlTWFya1N0ZXApO1xuLyoqXG5SZW1vdmUgYSBtYXJrIGZyb20gYSBzcGVjaWZpYyBub2RlLlxuKi9cbmNsYXNzIFJlbW92ZU5vZGVNYXJrU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmstcmVtb3Zpbmcgc3RlcC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBvZiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAgKi9cbiAgICBwb3MsIFxuICAgIC8qKlxuICAgIFRoZSBtYXJrIHRvIHJlbW92ZS5cbiAgICAqL1xuICAgIG1hcmspIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgfVxuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBsZXQgbm9kZSA9IGRvYy5ub2RlQXQodGhpcy5wb3MpO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiTm8gbm9kZSBhdCBtYXJrIHN0ZXAncyBwb3NpdGlvblwiKTtcbiAgICAgICAgbGV0IHVwZGF0ZWQgPSBub2RlLnR5cGUuY3JlYXRlKG5vZGUuYXR0cnMsIG51bGwsIHRoaXMubWFyay5yZW1vdmVGcm9tU2V0KG5vZGUubWFya3MpKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLnBvcywgdGhpcy5wb3MgKyAxLCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbSh1cGRhdGVkKSwgMCwgbm9kZS5pc0xlYWYgPyAwIDogMSkpO1xuICAgIH1cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIGxldCBub2RlID0gZG9jLm5vZGVBdCh0aGlzLnBvcyk7XG4gICAgICAgIGlmICghbm9kZSB8fCAhdGhpcy5tYXJrLmlzSW5TZXQobm9kZS5tYXJrcykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBBZGROb2RlTWFya1N0ZXAodGhpcy5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGxldCBwb3MgPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLnBvcywgMSk7XG4gICAgICAgIHJldHVybiBwb3MuZGVsZXRlZEFmdGVyID8gbnVsbCA6IG5ldyBSZW1vdmVOb2RlTWFya1N0ZXAocG9zLnBvcywgdGhpcy5tYXJrKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyBzdGVwVHlwZTogXCJyZW1vdmVOb2RlTWFya1wiLCBwb3M6IHRoaXMucG9zLCBtYXJrOiB0aGlzLm1hcmsudG9KU09OKCkgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YganNvbi5wb3MgIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgUmVtb3ZlTm9kZU1hcmtTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU5vZGVNYXJrU3RlcChqc29uLnBvcywgc2NoZW1hLm1hcmtGcm9tSlNPTihqc29uLm1hcmspKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcInJlbW92ZU5vZGVNYXJrXCIsIFJlbW92ZU5vZGVNYXJrU3RlcCk7XG5cbi8qKlxuUmVwbGFjZSBhIHBhcnQgb2YgdGhlIGRvY3VtZW50IHdpdGggYSBzbGljZSBvZiBuZXcgY29udGVudC5cbiovXG5jbGFzcyBSZXBsYWNlU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIC8qKlxuICAgIFRoZSBnaXZlbiBgc2xpY2VgIHNob3VsZCBmaXQgdGhlICdnYXAnIGJldHdlZW4gYGZyb21gIGFuZFxuICAgIGB0b2DigJR0aGUgZGVwdGhzIG11c3QgbGluZSB1cCwgYW5kIHRoZSBzdXJyb3VuZGluZyBub2RlcyBtdXN0IGJlXG4gICAgYWJsZSB0byBiZSBqb2luZWQgd2l0aCB0aGUgb3BlbiBzaWRlcyBvZiB0aGUgc2xpY2UuIFdoZW5cbiAgICBgc3RydWN0dXJlYCBpcyB0cnVlLCB0aGUgc3RlcCB3aWxsIGZhaWwgaWYgdGhlIGNvbnRlbnQgYmV0d2VlblxuICAgIGZyb20gYW5kIHRvIGlzIG5vdCBqdXN0IGEgc2VxdWVuY2Ugb2YgY2xvc2luZyBhbmQgdGhlbiBvcGVuaW5nXG4gICAgdG9rZW5zICh0aGlzIGlzIHRvIGd1YXJkIGFnYWluc3QgcmViYXNlZCByZXBsYWNlIHN0ZXBzXG4gICAgb3ZlcndyaXRpbmcgc29tZXRoaW5nIHRoZXkgd2VyZW4ndCBzdXBwb3NlZCB0bykuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlcGxhY2VkIHJhbmdlLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBwb3NpdGlvbiBvZiB0aGUgcmVwbGFjZWQgcmFuZ2UuXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhlIHNsaWNlIHRvIGluc2VydC5cbiAgICAqL1xuICAgIHNsaWNlLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0cnVjdHVyZSA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5zbGljZSA9IHNsaWNlO1xuICAgICAgICB0aGlzLnN0cnVjdHVyZSA9IHN0cnVjdHVyZTtcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGlmICh0aGlzLnN0cnVjdHVyZSAmJiBjb250ZW50QmV0d2Vlbihkb2MsIHRoaXMuZnJvbSwgdGhpcy50bykpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiU3RydWN0dXJlIHJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnRcIik7XG4gICAgICAgIHJldHVybiBTdGVwUmVzdWx0LmZyb21SZXBsYWNlKGRvYywgdGhpcy5mcm9tLCB0aGlzLnRvLCB0aGlzLnNsaWNlKTtcbiAgICB9XG4gICAgZ2V0TWFwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0ZXBNYXAoW3RoaXMuZnJvbSwgdGhpcy50byAtIHRoaXMuZnJvbSwgdGhpcy5zbGljZS5zaXplXSk7XG4gICAgfVxuICAgIGludmVydChkb2MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlU3RlcCh0aGlzLmZyb20sIHRoaXMuZnJvbSArIHRoaXMuc2xpY2Uuc2l6ZSwgZG9jLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50bykpO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICBsZXQgZnJvbSA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMuZnJvbSwgMSksIHRvID0gbWFwcGluZy5tYXBSZXN1bHQodGhpcy50bywgLTEpO1xuICAgICAgICBpZiAoZnJvbS5kZWxldGVkQWNyb3NzICYmIHRvLmRlbGV0ZWRBY3Jvc3MpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlU3RlcChmcm9tLnBvcywgTWF0aC5tYXgoZnJvbS5wb3MsIHRvLnBvcyksIHRoaXMuc2xpY2UpO1xuICAgIH1cbiAgICBtZXJnZShvdGhlcikge1xuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIFJlcGxhY2VTdGVwKSB8fCBvdGhlci5zdHJ1Y3R1cmUgfHwgdGhpcy5zdHJ1Y3R1cmUpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuZnJvbSArIHRoaXMuc2xpY2Uuc2l6ZSA9PSBvdGhlci5mcm9tICYmICF0aGlzLnNsaWNlLm9wZW5FbmQgJiYgIW90aGVyLnNsaWNlLm9wZW5TdGFydCkge1xuICAgICAgICAgICAgbGV0IHNsaWNlID0gdGhpcy5zbGljZS5zaXplICsgb3RoZXIuc2xpY2Uuc2l6ZSA9PSAwID8gU2xpY2UuZW1wdHlcbiAgICAgICAgICAgICAgICA6IG5ldyBTbGljZSh0aGlzLnNsaWNlLmNvbnRlbnQuYXBwZW5kKG90aGVyLnNsaWNlLmNvbnRlbnQpLCB0aGlzLnNsaWNlLm9wZW5TdGFydCwgb3RoZXIuc2xpY2Uub3BlbkVuZCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VTdGVwKHRoaXMuZnJvbSwgdGhpcy50byArIChvdGhlci50byAtIG90aGVyLmZyb20pLCBzbGljZSwgdGhpcy5zdHJ1Y3R1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG90aGVyLnRvID09IHRoaXMuZnJvbSAmJiAhdGhpcy5zbGljZS5vcGVuU3RhcnQgJiYgIW90aGVyLnNsaWNlLm9wZW5FbmQpIHtcbiAgICAgICAgICAgIGxldCBzbGljZSA9IHRoaXMuc2xpY2Uuc2l6ZSArIG90aGVyLnNsaWNlLnNpemUgPT0gMCA/IFNsaWNlLmVtcHR5XG4gICAgICAgICAgICAgICAgOiBuZXcgU2xpY2Uob3RoZXIuc2xpY2UuY29udGVudC5hcHBlbmQodGhpcy5zbGljZS5jb250ZW50KSwgb3RoZXIuc2xpY2Uub3BlblN0YXJ0LCB0aGlzLnNsaWNlLm9wZW5FbmQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlU3RlcChvdGhlci5mcm9tLCB0aGlzLnRvLCBzbGljZSwgdGhpcy5zdHJ1Y3R1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQganNvbiA9IHsgc3RlcFR5cGU6IFwicmVwbGFjZVwiLCBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvIH07XG4gICAgICAgIGlmICh0aGlzLnNsaWNlLnNpemUpXG4gICAgICAgICAgICBqc29uLnNsaWNlID0gdGhpcy5zbGljZS50b0pTT04oKTtcbiAgICAgICAgaWYgKHRoaXMuc3RydWN0dXJlKVxuICAgICAgICAgICAganNvbi5zdHJ1Y3R1cmUgPSB0cnVlO1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YganNvbi5mcm9tICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24udG8gIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZVN0ZXAuZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZVN0ZXAoanNvbi5mcm9tLCBqc29uLnRvLCBTbGljZS5mcm9tSlNPTihzY2hlbWEsIGpzb24uc2xpY2UpLCAhIWpzb24uc3RydWN0dXJlKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcInJlcGxhY2VcIiwgUmVwbGFjZVN0ZXApO1xuLyoqXG5SZXBsYWNlIGEgcGFydCBvZiB0aGUgZG9jdW1lbnQgd2l0aCBhIHNsaWNlIG9mIGNvbnRlbnQsIGJ1dFxucHJlc2VydmUgYSByYW5nZSBvZiB0aGUgcmVwbGFjZWQgY29udGVudCBieSBtb3ZpbmcgaXQgaW50byB0aGVcbnNsaWNlLlxuKi9cbmNsYXNzIFJlcGxhY2VBcm91bmRTdGVwIGV4dGVuZHMgU3RlcCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcmVwbGFjZS1hcm91bmQgc3RlcCB3aXRoIHRoZSBnaXZlbiByYW5nZSBhbmQgZ2FwLlxuICAgIGBpbnNlcnRgIHNob3VsZCBiZSB0aGUgcG9pbnQgaW4gdGhlIHNsaWNlIGludG8gd2hpY2ggdGhlIGNvbnRlbnRcbiAgICBvZiB0aGUgZ2FwIHNob3VsZCBiZSBtb3ZlZC4gYHN0cnVjdHVyZWAgaGFzIHRoZSBzYW1lIG1lYW5pbmcgYXNcbiAgICBpdCBoYXMgaW4gdGhlIFtgUmVwbGFjZVN0ZXBgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlJlcGxhY2VTdGVwKSBjbGFzcy5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVwbGFjZWQgcmFuZ2UuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgZW5kIHBvc2l0aW9uIG9mIHRoZSByZXBsYWNlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgcHJlc2VydmVkIHJhbmdlLlxuICAgICovXG4gICAgZ2FwRnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBvZiBwcmVzZXJ2ZWQgcmFuZ2UuXG4gICAgKi9cbiAgICBnYXBUbywgXG4gICAgLyoqXG4gICAgVGhlIHNsaWNlIHRvIGluc2VydC5cbiAgICAqL1xuICAgIHNsaWNlLCBcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gaW4gdGhlIHNsaWNlIHdoZXJlIHRoZSBwcmVzZXJ2ZWQgcmFuZ2Ugc2hvdWxkIGJlXG4gICAgaW5zZXJ0ZWQuXG4gICAgKi9cbiAgICBpbnNlcnQsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RydWN0dXJlID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLmdhcEZyb20gPSBnYXBGcm9tO1xuICAgICAgICB0aGlzLmdhcFRvID0gZ2FwVG87XG4gICAgICAgIHRoaXMuc2xpY2UgPSBzbGljZTtcbiAgICAgICAgdGhpcy5pbnNlcnQgPSBpbnNlcnQ7XG4gICAgICAgIHRoaXMuc3RydWN0dXJlID0gc3RydWN0dXJlO1xuICAgIH1cbiAgICBhcHBseShkb2MpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RydWN0dXJlICYmIChjb250ZW50QmV0d2Vlbihkb2MsIHRoaXMuZnJvbSwgdGhpcy5nYXBGcm9tKSB8fFxuICAgICAgICAgICAgY29udGVudEJldHdlZW4oZG9jLCB0aGlzLmdhcFRvLCB0aGlzLnRvKSkpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiU3RydWN0dXJlIGdhcC1yZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50XCIpO1xuICAgICAgICBsZXQgZ2FwID0gZG9jLnNsaWNlKHRoaXMuZ2FwRnJvbSwgdGhpcy5nYXBUbyk7XG4gICAgICAgIGlmIChnYXAub3BlblN0YXJ0IHx8IGdhcC5vcGVuRW5kKVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChcIkdhcCBpcyBub3QgYSBmbGF0IHJhbmdlXCIpO1xuICAgICAgICBsZXQgaW5zZXJ0ZWQgPSB0aGlzLnNsaWNlLmluc2VydEF0KHRoaXMuaW5zZXJ0LCBnYXAuY29udGVudCk7XG4gICAgICAgIGlmICghaW5zZXJ0ZWQpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiQ29udGVudCBkb2VzIG5vdCBmaXQgaW4gZ2FwXCIpO1xuICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mcm9tUmVwbGFjZShkb2MsIHRoaXMuZnJvbSwgdGhpcy50bywgaW5zZXJ0ZWQpO1xuICAgIH1cbiAgICBnZXRNYXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RlcE1hcChbdGhpcy5mcm9tLCB0aGlzLmdhcEZyb20gLSB0aGlzLmZyb20sIHRoaXMuaW5zZXJ0LFxuICAgICAgICAgICAgdGhpcy5nYXBUbywgdGhpcy50byAtIHRoaXMuZ2FwVG8sIHRoaXMuc2xpY2Uuc2l6ZSAtIHRoaXMuaW5zZXJ0XSk7XG4gICAgfVxuICAgIGludmVydChkb2MpIHtcbiAgICAgICAgbGV0IGdhcCA9IHRoaXMuZ2FwVG8gLSB0aGlzLmdhcEZyb207XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZUFyb3VuZFN0ZXAodGhpcy5mcm9tLCB0aGlzLmZyb20gKyB0aGlzLnNsaWNlLnNpemUgKyBnYXAsIHRoaXMuZnJvbSArIHRoaXMuaW5zZXJ0LCB0aGlzLmZyb20gKyB0aGlzLmluc2VydCArIGdhcCwgZG9jLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50bykucmVtb3ZlQmV0d2Vlbih0aGlzLmdhcEZyb20gLSB0aGlzLmZyb20sIHRoaXMuZ2FwVG8gLSB0aGlzLmZyb20pLCB0aGlzLmdhcEZyb20gLSB0aGlzLmZyb20sIHRoaXMuc3RydWN0dXJlKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgbGV0IGdhcEZyb20gPSBtYXBwaW5nLm1hcCh0aGlzLmdhcEZyb20sIC0xKSwgZ2FwVG8gPSBtYXBwaW5nLm1hcCh0aGlzLmdhcFRvLCAxKTtcbiAgICAgICAgaWYgKChmcm9tLmRlbGV0ZWRBY3Jvc3MgJiYgdG8uZGVsZXRlZEFjcm9zcykgfHwgZ2FwRnJvbSA8IGZyb20ucG9zIHx8IGdhcFRvID4gdG8ucG9zKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoZnJvbS5wb3MsIHRvLnBvcywgZ2FwRnJvbSwgZ2FwVG8sIHRoaXMuc2xpY2UsIHRoaXMuaW5zZXJ0LCB0aGlzLnN0cnVjdHVyZSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgbGV0IGpzb24gPSB7IHN0ZXBUeXBlOiBcInJlcGxhY2VBcm91bmRcIiwgZnJvbTogdGhpcy5mcm9tLCB0bzogdGhpcy50byxcbiAgICAgICAgICAgIGdhcEZyb206IHRoaXMuZ2FwRnJvbSwgZ2FwVG86IHRoaXMuZ2FwVG8sIGluc2VydDogdGhpcy5pbnNlcnQgfTtcbiAgICAgICAgaWYgKHRoaXMuc2xpY2Uuc2l6ZSlcbiAgICAgICAgICAgIGpzb24uc2xpY2UgPSB0aGlzLnNsaWNlLnRvSlNPTigpO1xuICAgICAgICBpZiAodGhpcy5zdHJ1Y3R1cmUpXG4gICAgICAgICAgICBqc29uLnN0cnVjdHVyZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihzY2hlbWEsIGpzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uLmZyb20gIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YganNvbi50byAhPSBcIm51bWJlclwiIHx8XG4gICAgICAgICAgICB0eXBlb2YganNvbi5nYXBGcm9tICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24uZ2FwVG8gIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YganNvbi5pbnNlcnQgIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZUFyb3VuZFN0ZXAuZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoanNvbi5mcm9tLCBqc29uLnRvLCBqc29uLmdhcEZyb20sIGpzb24uZ2FwVG8sIFNsaWNlLmZyb21KU09OKHNjaGVtYSwganNvbi5zbGljZSksIGpzb24uaW5zZXJ0LCAhIWpzb24uc3RydWN0dXJlKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcInJlcGxhY2VBcm91bmRcIiwgUmVwbGFjZUFyb3VuZFN0ZXApO1xuZnVuY3Rpb24gY29udGVudEJldHdlZW4oZG9jLCBmcm9tLCB0bykge1xuICAgIGxldCAkZnJvbSA9IGRvYy5yZXNvbHZlKGZyb20pLCBkaXN0ID0gdG8gLSBmcm9tLCBkZXB0aCA9ICRmcm9tLmRlcHRoO1xuICAgIHdoaWxlIChkaXN0ID4gMCAmJiBkZXB0aCA+IDAgJiYgJGZyb20uaW5kZXhBZnRlcihkZXB0aCkgPT0gJGZyb20ubm9kZShkZXB0aCkuY2hpbGRDb3VudCkge1xuICAgICAgICBkZXB0aC0tO1xuICAgICAgICBkaXN0LS07XG4gICAgfVxuICAgIGlmIChkaXN0ID4gMCkge1xuICAgICAgICBsZXQgbmV4dCA9ICRmcm9tLm5vZGUoZGVwdGgpLm1heWJlQ2hpbGQoJGZyb20uaW5kZXhBZnRlcihkZXB0aCkpO1xuICAgICAgICB3aGlsZSAoZGlzdCA+IDApIHtcbiAgICAgICAgICAgIGlmICghbmV4dCB8fCBuZXh0LmlzTGVhZilcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIG5leHQgPSBuZXh0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBkaXN0LS07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhZGRNYXJrKHRyLCBmcm9tLCB0bywgbWFyaykge1xuICAgIGxldCByZW1vdmVkID0gW10sIGFkZGVkID0gW107XG4gICAgbGV0IHJlbW92aW5nLCBhZGRpbmc7XG4gICAgdHIuZG9jLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgKG5vZGUsIHBvcywgcGFyZW50KSA9PiB7XG4gICAgICAgIGlmICghbm9kZS5pc0lubGluZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG1hcmtzID0gbm9kZS5tYXJrcztcbiAgICAgICAgaWYgKCFtYXJrLmlzSW5TZXQobWFya3MpICYmIHBhcmVudC50eXBlLmFsbG93c01hcmtUeXBlKG1hcmsudHlwZSkpIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IE1hdGgubWF4KHBvcywgZnJvbSksIGVuZCA9IE1hdGgubWluKHBvcyArIG5vZGUubm9kZVNpemUsIHRvKTtcbiAgICAgICAgICAgIGxldCBuZXdTZXQgPSBtYXJrLmFkZFRvU2V0KG1hcmtzKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcmtzW2ldLmlzSW5TZXQobmV3U2V0KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZpbmcgJiYgcmVtb3ZpbmcudG8gPT0gc3RhcnQgJiYgcmVtb3ZpbmcubWFyay5lcShtYXJrc1tpXSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmluZy50byA9IGVuZDtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKHJlbW92aW5nID0gbmV3IFJlbW92ZU1hcmtTdGVwKHN0YXJ0LCBlbmQsIG1hcmtzW2ldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFkZGluZyAmJiBhZGRpbmcudG8gPT0gc3RhcnQpXG4gICAgICAgICAgICAgICAgYWRkaW5nLnRvID0gZW5kO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGFkZGVkLnB1c2goYWRkaW5nID0gbmV3IEFkZE1hcmtTdGVwKHN0YXJ0LCBlbmQsIG1hcmspKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJlbW92ZWQuZm9yRWFjaChzID0+IHRyLnN0ZXAocykpO1xuICAgIGFkZGVkLmZvckVhY2gocyA9PiB0ci5zdGVwKHMpKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZU1hcmsodHIsIGZyb20sIHRvLCBtYXJrKSB7XG4gICAgbGV0IG1hdGNoZWQgPSBbXSwgc3RlcCA9IDA7XG4gICAgdHIuZG9jLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgKG5vZGUsIHBvcykgPT4ge1xuICAgICAgICBpZiAoIW5vZGUuaXNJbmxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHN0ZXArKztcbiAgICAgICAgbGV0IHRvUmVtb3ZlID0gbnVsbDtcbiAgICAgICAgaWYgKG1hcmsgaW5zdGFuY2VvZiBNYXJrVHlwZSkge1xuICAgICAgICAgICAgbGV0IHNldCA9IG5vZGUubWFya3MsIGZvdW5kO1xuICAgICAgICAgICAgd2hpbGUgKGZvdW5kID0gbWFyay5pc0luU2V0KHNldCkpIHtcbiAgICAgICAgICAgICAgICAodG9SZW1vdmUgfHwgKHRvUmVtb3ZlID0gW10pKS5wdXNoKGZvdW5kKTtcbiAgICAgICAgICAgICAgICBzZXQgPSBmb3VuZC5yZW1vdmVGcm9tU2V0KHNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWFyaykge1xuICAgICAgICAgICAgaWYgKG1hcmsuaXNJblNldChub2RlLm1hcmtzKSlcbiAgICAgICAgICAgICAgICB0b1JlbW92ZSA9IFttYXJrXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRvUmVtb3ZlID0gbm9kZS5tYXJrcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZW1vdmUgJiYgdG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgZW5kID0gTWF0aC5taW4ocG9zICsgbm9kZS5ub2RlU2l6ZSwgdG8pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b1JlbW92ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBzdHlsZSA9IHRvUmVtb3ZlW2ldLCBmb3VuZDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG1hdGNoZWQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSBtYXRjaGVkW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobS5zdGVwID09IHN0ZXAgLSAxICYmIHN0eWxlLmVxKG1hdGNoZWRbal0uc3R5bGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQudG8gPSBlbmQ7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kLnN0ZXAgPSBzdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZC5wdXNoKHsgc3R5bGUsIGZyb206IE1hdGgubWF4KHBvcywgZnJvbSksIHRvOiBlbmQsIHN0ZXAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgbWF0Y2hlZC5mb3JFYWNoKG0gPT4gdHIuc3RlcChuZXcgUmVtb3ZlTWFya1N0ZXAobS5mcm9tLCBtLnRvLCBtLnN0eWxlKSkpO1xufVxuZnVuY3Rpb24gY2xlYXJJbmNvbXBhdGlibGUodHIsIHBvcywgcGFyZW50VHlwZSwgbWF0Y2ggPSBwYXJlbnRUeXBlLmNvbnRlbnRNYXRjaCkge1xuICAgIGxldCBub2RlID0gdHIuZG9jLm5vZGVBdChwb3MpO1xuICAgIGxldCBkZWxTdGVwcyA9IFtdLCBjdXIgPSBwb3MgKyAxO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZENvdW50OyBpKyspIHtcbiAgICAgICAgbGV0IGNoaWxkID0gbm9kZS5jaGlsZChpKSwgZW5kID0gY3VyICsgY2hpbGQubm9kZVNpemU7XG4gICAgICAgIGxldCBhbGxvd2VkID0gbWF0Y2gubWF0Y2hUeXBlKGNoaWxkLnR5cGUpO1xuICAgICAgICBpZiAoIWFsbG93ZWQpIHtcbiAgICAgICAgICAgIGRlbFN0ZXBzLnB1c2gobmV3IFJlcGxhY2VTdGVwKGN1ciwgZW5kLCBTbGljZS5lbXB0eSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF0Y2ggPSBhbGxvd2VkO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjaGlsZC5tYXJrcy5sZW5ndGg7IGorKylcbiAgICAgICAgICAgICAgICBpZiAoIXBhcmVudFR5cGUuYWxsb3dzTWFya1R5cGUoY2hpbGQubWFya3Nbal0udHlwZSkpXG4gICAgICAgICAgICAgICAgICAgIHRyLnN0ZXAobmV3IFJlbW92ZU1hcmtTdGVwKGN1ciwgZW5kLCBjaGlsZC5tYXJrc1tqXSkpO1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IGVuZDtcbiAgICB9XG4gICAgaWYgKCFtYXRjaC52YWxpZEVuZCkge1xuICAgICAgICBsZXQgZmlsbCA9IG1hdGNoLmZpbGxCZWZvcmUoRnJhZ21lbnQuZW1wdHksIHRydWUpO1xuICAgICAgICB0ci5yZXBsYWNlKGN1ciwgY3VyLCBuZXcgU2xpY2UoZmlsbCwgMCwgMCkpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gZGVsU3RlcHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIHRyLnN0ZXAoZGVsU3RlcHNbaV0pO1xufVxuXG5mdW5jdGlvbiBjYW5DdXQobm9kZSwgc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiAoc3RhcnQgPT0gMCB8fCBub2RlLmNhblJlcGxhY2Uoc3RhcnQsIG5vZGUuY2hpbGRDb3VudCkpICYmXG4gICAgICAgIChlbmQgPT0gbm9kZS5jaGlsZENvdW50IHx8IG5vZGUuY2FuUmVwbGFjZSgwLCBlbmQpKTtcbn1cbi8qKlxuVHJ5IHRvIGZpbmQgYSB0YXJnZXQgZGVwdGggdG8gd2hpY2ggdGhlIGNvbnRlbnQgaW4gdGhlIGdpdmVuIHJhbmdlXG5jYW4gYmUgbGlmdGVkLiBXaWxsIG5vdCBnbyBhY3Jvc3Ncbltpc29sYXRpbmddKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlYy5pc29sYXRpbmcpIHBhcmVudCBub2Rlcy5cbiovXG5mdW5jdGlvbiBsaWZ0VGFyZ2V0KHJhbmdlKSB7XG4gICAgbGV0IHBhcmVudCA9IHJhbmdlLnBhcmVudDtcbiAgICBsZXQgY29udGVudCA9IHBhcmVudC5jb250ZW50LmN1dEJ5SW5kZXgocmFuZ2Uuc3RhcnRJbmRleCwgcmFuZ2UuZW5kSW5kZXgpO1xuICAgIGZvciAobGV0IGRlcHRoID0gcmFuZ2UuZGVwdGg7OyAtLWRlcHRoKSB7XG4gICAgICAgIGxldCBub2RlID0gcmFuZ2UuJGZyb20ubm9kZShkZXB0aCk7XG4gICAgICAgIGxldCBpbmRleCA9IHJhbmdlLiRmcm9tLmluZGV4KGRlcHRoKSwgZW5kSW5kZXggPSByYW5nZS4kdG8uaW5kZXhBZnRlcihkZXB0aCk7XG4gICAgICAgIGlmIChkZXB0aCA8IHJhbmdlLmRlcHRoICYmIG5vZGUuY2FuUmVwbGFjZShpbmRleCwgZW5kSW5kZXgsIGNvbnRlbnQpKVxuICAgICAgICAgICAgcmV0dXJuIGRlcHRoO1xuICAgICAgICBpZiAoZGVwdGggPT0gMCB8fCBub2RlLnR5cGUuc3BlYy5pc29sYXRpbmcgfHwgIWNhbkN1dChub2RlLCBpbmRleCwgZW5kSW5kZXgpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbGlmdCh0ciwgcmFuZ2UsIHRhcmdldCkge1xuICAgIGxldCB7ICRmcm9tLCAkdG8sIGRlcHRoIH0gPSByYW5nZTtcbiAgICBsZXQgZ2FwU3RhcnQgPSAkZnJvbS5iZWZvcmUoZGVwdGggKyAxKSwgZ2FwRW5kID0gJHRvLmFmdGVyKGRlcHRoICsgMSk7XG4gICAgbGV0IHN0YXJ0ID0gZ2FwU3RhcnQsIGVuZCA9IGdhcEVuZDtcbiAgICBsZXQgYmVmb3JlID0gRnJhZ21lbnQuZW1wdHksIG9wZW5TdGFydCA9IDA7XG4gICAgZm9yIChsZXQgZCA9IGRlcHRoLCBzcGxpdHRpbmcgPSBmYWxzZTsgZCA+IHRhcmdldDsgZC0tKVxuICAgICAgICBpZiAoc3BsaXR0aW5nIHx8ICRmcm9tLmluZGV4KGQpID4gMCkge1xuICAgICAgICAgICAgc3BsaXR0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGJlZm9yZSA9IEZyYWdtZW50LmZyb20oJGZyb20ubm9kZShkKS5jb3B5KGJlZm9yZSkpO1xuICAgICAgICAgICAgb3BlblN0YXJ0Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGFydC0tO1xuICAgICAgICB9XG4gICAgbGV0IGFmdGVyID0gRnJhZ21lbnQuZW1wdHksIG9wZW5FbmQgPSAwO1xuICAgIGZvciAobGV0IGQgPSBkZXB0aCwgc3BsaXR0aW5nID0gZmFsc2U7IGQgPiB0YXJnZXQ7IGQtLSlcbiAgICAgICAgaWYgKHNwbGl0dGluZyB8fCAkdG8uYWZ0ZXIoZCArIDEpIDwgJHRvLmVuZChkKSkge1xuICAgICAgICAgICAgc3BsaXR0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGFmdGVyID0gRnJhZ21lbnQuZnJvbSgkdG8ubm9kZShkKS5jb3B5KGFmdGVyKSk7XG4gICAgICAgICAgICBvcGVuRW5kKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmQrKztcbiAgICAgICAgfVxuICAgIHRyLnN0ZXAobmV3IFJlcGxhY2VBcm91bmRTdGVwKHN0YXJ0LCBlbmQsIGdhcFN0YXJ0LCBnYXBFbmQsIG5ldyBTbGljZShiZWZvcmUuYXBwZW5kKGFmdGVyKSwgb3BlblN0YXJ0LCBvcGVuRW5kKSwgYmVmb3JlLnNpemUgLSBvcGVuU3RhcnQsIHRydWUpKTtcbn1cbi8qKlxuVHJ5IHRvIGZpbmQgYSB2YWxpZCB3YXkgdG8gd3JhcCB0aGUgY29udGVudCBpbiB0aGUgZ2l2ZW4gcmFuZ2UgaW4gYVxubm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZS4gTWF5IGludHJvZHVjZSBleHRyYSBub2RlcyBhcm91bmQgYW5kIGluc2lkZVxudGhlIHdyYXBwZXIgbm9kZSwgaWYgbmVjZXNzYXJ5LiBSZXR1cm5zIG51bGwgaWYgbm8gdmFsaWQgd3JhcHBpbmdcbmNvdWxkIGJlIGZvdW5kLiBXaGVuIGBpbm5lclJhbmdlYCBpcyBnaXZlbiwgdGhhdCByYW5nZSdzIGNvbnRlbnQgaXNcbnVzZWQgYXMgdGhlIGNvbnRlbnQgdG8gZml0IGludG8gdGhlIHdyYXBwaW5nLCBpbnN0ZWFkIG9mIHRoZVxuY29udGVudCBvZiBgcmFuZ2VgLlxuKi9cbmZ1bmN0aW9uIGZpbmRXcmFwcGluZyhyYW5nZSwgbm9kZVR5cGUsIGF0dHJzID0gbnVsbCwgaW5uZXJSYW5nZSA9IHJhbmdlKSB7XG4gICAgbGV0IGFyb3VuZCA9IGZpbmRXcmFwcGluZ091dHNpZGUocmFuZ2UsIG5vZGVUeXBlKTtcbiAgICBsZXQgaW5uZXIgPSBhcm91bmQgJiYgZmluZFdyYXBwaW5nSW5zaWRlKGlubmVyUmFuZ2UsIG5vZGVUeXBlKTtcbiAgICBpZiAoIWlubmVyKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gYXJvdW5kLm1hcCh3aXRoQXR0cnMpXG4gICAgICAgIC5jb25jYXQoeyB0eXBlOiBub2RlVHlwZSwgYXR0cnMgfSkuY29uY2F0KGlubmVyLm1hcCh3aXRoQXR0cnMpKTtcbn1cbmZ1bmN0aW9uIHdpdGhBdHRycyh0eXBlKSB7IHJldHVybiB7IHR5cGUsIGF0dHJzOiBudWxsIH07IH1cbmZ1bmN0aW9uIGZpbmRXcmFwcGluZ091dHNpZGUocmFuZ2UsIHR5cGUpIHtcbiAgICBsZXQgeyBwYXJlbnQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4IH0gPSByYW5nZTtcbiAgICBsZXQgYXJvdW5kID0gcGFyZW50LmNvbnRlbnRNYXRjaEF0KHN0YXJ0SW5kZXgpLmZpbmRXcmFwcGluZyh0eXBlKTtcbiAgICBpZiAoIWFyb3VuZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IG91dGVyID0gYXJvdW5kLmxlbmd0aCA/IGFyb3VuZFswXSA6IHR5cGU7XG4gICAgcmV0dXJuIHBhcmVudC5jYW5SZXBsYWNlV2l0aChzdGFydEluZGV4LCBlbmRJbmRleCwgb3V0ZXIpID8gYXJvdW5kIDogbnVsbDtcbn1cbmZ1bmN0aW9uIGZpbmRXcmFwcGluZ0luc2lkZShyYW5nZSwgdHlwZSkge1xuICAgIGxldCB7IHBhcmVudCwgc3RhcnRJbmRleCwgZW5kSW5kZXggfSA9IHJhbmdlO1xuICAgIGxldCBpbm5lciA9IHBhcmVudC5jaGlsZChzdGFydEluZGV4KTtcbiAgICBsZXQgaW5zaWRlID0gdHlwZS5jb250ZW50TWF0Y2guZmluZFdyYXBwaW5nKGlubmVyLnR5cGUpO1xuICAgIGlmICghaW5zaWRlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgbGFzdFR5cGUgPSBpbnNpZGUubGVuZ3RoID8gaW5zaWRlW2luc2lkZS5sZW5ndGggLSAxXSA6IHR5cGU7XG4gICAgbGV0IGlubmVyTWF0Y2ggPSBsYXN0VHlwZS5jb250ZW50TWF0Y2g7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGlubmVyTWF0Y2ggJiYgaSA8IGVuZEluZGV4OyBpKyspXG4gICAgICAgIGlubmVyTWF0Y2ggPSBpbm5lck1hdGNoLm1hdGNoVHlwZShwYXJlbnQuY2hpbGQoaSkudHlwZSk7XG4gICAgaWYgKCFpbm5lck1hdGNoIHx8ICFpbm5lck1hdGNoLnZhbGlkRW5kKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gaW5zaWRlO1xufVxuZnVuY3Rpb24gd3JhcCh0ciwgcmFuZ2UsIHdyYXBwZXJzKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBGcmFnbWVudC5lbXB0eTtcbiAgICBmb3IgKGxldCBpID0gd3JhcHBlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGNvbnRlbnQuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IG1hdGNoID0gd3JhcHBlcnNbaV0udHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChjb250ZW50KTtcbiAgICAgICAgICAgIGlmICghbWF0Y2ggfHwgIW1hdGNoLnZhbGlkRW5kKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiV3JhcHBlciB0eXBlIGdpdmVuIHRvIFRyYW5zZm9ybS53cmFwIGRvZXMgbm90IGZvcm0gdmFsaWQgY29udGVudCBvZiBpdHMgcGFyZW50IHdyYXBwZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGVudCA9IEZyYWdtZW50LmZyb20od3JhcHBlcnNbaV0udHlwZS5jcmVhdGUod3JhcHBlcnNbaV0uYXR0cnMsIGNvbnRlbnQpKTtcbiAgICB9XG4gICAgbGV0IHN0YXJ0ID0gcmFuZ2Uuc3RhcnQsIGVuZCA9IHJhbmdlLmVuZDtcbiAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChzdGFydCwgZW5kLCBzdGFydCwgZW5kLCBuZXcgU2xpY2UoY29udGVudCwgMCwgMCksIHdyYXBwZXJzLmxlbmd0aCwgdHJ1ZSkpO1xufVxuZnVuY3Rpb24gc2V0QmxvY2tUeXBlKHRyLCBmcm9tLCB0bywgdHlwZSwgYXR0cnMpIHtcbiAgICBpZiAoIXR5cGUuaXNUZXh0YmxvY2spXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVHlwZSBnaXZlbiB0byBzZXRCbG9ja1R5cGUgc2hvdWxkIGJlIGEgdGV4dGJsb2NrXCIpO1xuICAgIGxldCBtYXBGcm9tID0gdHIuc3RlcHMubGVuZ3RoO1xuICAgIHRyLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgaWYgKG5vZGUuaXNUZXh0YmxvY2sgJiYgIW5vZGUuaGFzTWFya3VwKHR5cGUsIGF0dHJzKSAmJiBjYW5DaGFuZ2VUeXBlKHRyLmRvYywgdHIubWFwcGluZy5zbGljZShtYXBGcm9tKS5tYXAocG9zKSwgdHlwZSkpIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBhbGwgbWFya3VwIHRoYXQgaXNuJ3QgYWxsb3dlZCBpbiB0aGUgbmV3IG5vZGUgdHlwZSBpcyBjbGVhcmVkXG4gICAgICAgICAgICB0ci5jbGVhckluY29tcGF0aWJsZSh0ci5tYXBwaW5nLnNsaWNlKG1hcEZyb20pLm1hcChwb3MsIDEpLCB0eXBlKTtcbiAgICAgICAgICAgIGxldCBtYXBwaW5nID0gdHIubWFwcGluZy5zbGljZShtYXBGcm9tKTtcbiAgICAgICAgICAgIGxldCBzdGFydE0gPSBtYXBwaW5nLm1hcChwb3MsIDEpLCBlbmRNID0gbWFwcGluZy5tYXAocG9zICsgbm9kZS5ub2RlU2l6ZSwgMSk7XG4gICAgICAgICAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChzdGFydE0sIGVuZE0sIHN0YXJ0TSArIDEsIGVuZE0gLSAxLCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbSh0eXBlLmNyZWF0ZShhdHRycywgbnVsbCwgbm9kZS5tYXJrcykpLCAwLCAwKSwgMSwgdHJ1ZSkpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjYW5DaGFuZ2VUeXBlKGRvYywgcG9zLCB0eXBlKSB7XG4gICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZShwb3MpLCBpbmRleCA9ICRwb3MuaW5kZXgoKTtcbiAgICByZXR1cm4gJHBvcy5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoaW5kZXgsIGluZGV4ICsgMSwgdHlwZSk7XG59XG4vKipcbkNoYW5nZSB0aGUgdHlwZSwgYXR0cmlidXRlcywgYW5kL29yIG1hcmtzIG9mIHRoZSBub2RlIGF0IGBwb3NgLlxuV2hlbiBgdHlwZWAgaXNuJ3QgZ2l2ZW4sIHRoZSBleGlzdGluZyBub2RlIHR5cGUgaXMgcHJlc2VydmVkLFxuKi9cbmZ1bmN0aW9uIHNldE5vZGVNYXJrdXAodHIsIHBvcywgdHlwZSwgYXR0cnMsIG1hcmtzKSB7XG4gICAgbGV0IG5vZGUgPSB0ci5kb2Mubm9kZUF0KHBvcyk7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk5vIG5vZGUgYXQgZ2l2ZW4gcG9zaXRpb25cIik7XG4gICAgaWYgKCF0eXBlKVxuICAgICAgICB0eXBlID0gbm9kZS50eXBlO1xuICAgIGxldCBuZXdOb2RlID0gdHlwZS5jcmVhdGUoYXR0cnMsIG51bGwsIG1hcmtzIHx8IG5vZGUubWFya3MpO1xuICAgIGlmIChub2RlLmlzTGVhZilcbiAgICAgICAgcmV0dXJuIHRyLnJlcGxhY2VXaXRoKHBvcywgcG9zICsgbm9kZS5ub2RlU2l6ZSwgbmV3Tm9kZSk7XG4gICAgaWYgKCF0eXBlLnZhbGlkQ29udGVudChub2RlLmNvbnRlbnQpKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgY29udGVudCBmb3Igbm9kZSB0eXBlIFwiICsgdHlwZS5uYW1lKTtcbiAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChwb3MsIHBvcyArIG5vZGUubm9kZVNpemUsIHBvcyArIDEsIHBvcyArIG5vZGUubm9kZVNpemUgLSAxLCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbShuZXdOb2RlKSwgMCwgMCksIDEsIHRydWUpKTtcbn1cbi8qKlxuQ2hlY2sgd2hldGhlciBzcGxpdHRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uIGlzIGFsbG93ZWQuXG4qL1xuZnVuY3Rpb24gY2FuU3BsaXQoZG9jLCBwb3MsIGRlcHRoID0gMSwgdHlwZXNBZnRlcikge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKSwgYmFzZSA9ICRwb3MuZGVwdGggLSBkZXB0aDtcbiAgICBsZXQgaW5uZXJUeXBlID0gKHR5cGVzQWZ0ZXIgJiYgdHlwZXNBZnRlclt0eXBlc0FmdGVyLmxlbmd0aCAtIDFdKSB8fCAkcG9zLnBhcmVudDtcbiAgICBpZiAoYmFzZSA8IDAgfHwgJHBvcy5wYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZyB8fFxuICAgICAgICAhJHBvcy5wYXJlbnQuY2FuUmVwbGFjZSgkcG9zLmluZGV4KCksICRwb3MucGFyZW50LmNoaWxkQ291bnQpIHx8XG4gICAgICAgICFpbm5lclR5cGUudHlwZS52YWxpZENvbnRlbnQoJHBvcy5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KCRwb3MuaW5kZXgoKSwgJHBvcy5wYXJlbnQuY2hpbGRDb3VudCkpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGggLSAxLCBpID0gZGVwdGggLSAyOyBkID4gYmFzZTsgZC0tLCBpLS0pIHtcbiAgICAgICAgbGV0IG5vZGUgPSAkcG9zLm5vZGUoZCksIGluZGV4ID0gJHBvcy5pbmRleChkKTtcbiAgICAgICAgaWYgKG5vZGUudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHJlc3QgPSBub2RlLmNvbnRlbnQuY3V0QnlJbmRleChpbmRleCwgbm9kZS5jaGlsZENvdW50KTtcbiAgICAgICAgbGV0IG92ZXJyaWRlQ2hpbGQgPSB0eXBlc0FmdGVyICYmIHR5cGVzQWZ0ZXJbaSArIDFdO1xuICAgICAgICBpZiAob3ZlcnJpZGVDaGlsZClcbiAgICAgICAgICAgIHJlc3QgPSByZXN0LnJlcGxhY2VDaGlsZCgwLCBvdmVycmlkZUNoaWxkLnR5cGUuY3JlYXRlKG92ZXJyaWRlQ2hpbGQuYXR0cnMpKTtcbiAgICAgICAgbGV0IGFmdGVyID0gKHR5cGVzQWZ0ZXIgJiYgdHlwZXNBZnRlcltpXSkgfHwgbm9kZTtcbiAgICAgICAgaWYgKCFub2RlLmNhblJlcGxhY2UoaW5kZXggKyAxLCBub2RlLmNoaWxkQ291bnQpIHx8ICFhZnRlci50eXBlLnZhbGlkQ29udGVudChyZXN0KSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gJHBvcy5pbmRleEFmdGVyKGJhc2UpO1xuICAgIGxldCBiYXNlVHlwZSA9IHR5cGVzQWZ0ZXIgJiYgdHlwZXNBZnRlclswXTtcbiAgICByZXR1cm4gJHBvcy5ub2RlKGJhc2UpLmNhblJlcGxhY2VXaXRoKGluZGV4LCBpbmRleCwgYmFzZVR5cGUgPyBiYXNlVHlwZS50eXBlIDogJHBvcy5ub2RlKGJhc2UgKyAxKS50eXBlKTtcbn1cbmZ1bmN0aW9uIHNwbGl0KHRyLCBwb3MsIGRlcHRoID0gMSwgdHlwZXNBZnRlcikge1xuICAgIGxldCAkcG9zID0gdHIuZG9jLnJlc29sdmUocG9zKSwgYmVmb3JlID0gRnJhZ21lbnQuZW1wdHksIGFmdGVyID0gRnJhZ21lbnQuZW1wdHk7XG4gICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGgsIGUgPSAkcG9zLmRlcHRoIC0gZGVwdGgsIGkgPSBkZXB0aCAtIDE7IGQgPiBlOyBkLS0sIGktLSkge1xuICAgICAgICBiZWZvcmUgPSBGcmFnbWVudC5mcm9tKCRwb3Mubm9kZShkKS5jb3B5KGJlZm9yZSkpO1xuICAgICAgICBsZXQgdHlwZUFmdGVyID0gdHlwZXNBZnRlciAmJiB0eXBlc0FmdGVyW2ldO1xuICAgICAgICBhZnRlciA9IEZyYWdtZW50LmZyb20odHlwZUFmdGVyID8gdHlwZUFmdGVyLnR5cGUuY3JlYXRlKHR5cGVBZnRlci5hdHRycywgYWZ0ZXIpIDogJHBvcy5ub2RlKGQpLmNvcHkoYWZ0ZXIpKTtcbiAgICB9XG4gICAgdHIuc3RlcChuZXcgUmVwbGFjZVN0ZXAocG9zLCBwb3MsIG5ldyBTbGljZShiZWZvcmUuYXBwZW5kKGFmdGVyKSwgZGVwdGgsIGRlcHRoKSwgdHJ1ZSkpO1xufVxuLyoqXG5UZXN0IHdoZXRoZXIgdGhlIGJsb2NrcyBiZWZvcmUgYW5kIGFmdGVyIGEgZ2l2ZW4gcG9zaXRpb24gY2FuIGJlXG5qb2luZWQuXG4qL1xuZnVuY3Rpb24gY2FuSm9pbihkb2MsIHBvcykge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKSwgaW5kZXggPSAkcG9zLmluZGV4KCk7XG4gICAgcmV0dXJuIGpvaW5hYmxlKCRwb3Mubm9kZUJlZm9yZSwgJHBvcy5ub2RlQWZ0ZXIpICYmXG4gICAgICAgICRwb3MucGFyZW50LmNhblJlcGxhY2UoaW5kZXgsIGluZGV4ICsgMSk7XG59XG5mdW5jdGlvbiBqb2luYWJsZShhLCBiKSB7XG4gICAgcmV0dXJuICEhKGEgJiYgYiAmJiAhYS5pc0xlYWYgJiYgYS5jYW5BcHBlbmQoYikpO1xufVxuLyoqXG5GaW5kIGFuIGFuY2VzdG9yIG9mIHRoZSBnaXZlbiBwb3NpdGlvbiB0aGF0IGNhbiBiZSBqb2luZWQgdG8gdGhlXG5ibG9jayBiZWZvcmUgKG9yIGFmdGVyIGlmIGBkaXJgIGlzIHBvc2l0aXZlKS4gUmV0dXJucyB0aGUgam9pbmFibGVcbnBvaW50LCBpZiBhbnkuXG4qL1xuZnVuY3Rpb24gam9pblBvaW50KGRvYywgcG9zLCBkaXIgPSAtMSkge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKTtcbiAgICBmb3IgKGxldCBkID0gJHBvcy5kZXB0aDs7IGQtLSkge1xuICAgICAgICBsZXQgYmVmb3JlLCBhZnRlciwgaW5kZXggPSAkcG9zLmluZGV4KGQpO1xuICAgICAgICBpZiAoZCA9PSAkcG9zLmRlcHRoKSB7XG4gICAgICAgICAgICBiZWZvcmUgPSAkcG9zLm5vZGVCZWZvcmU7XG4gICAgICAgICAgICBhZnRlciA9ICRwb3Mubm9kZUFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIGJlZm9yZSA9ICRwb3Mubm9kZShkICsgMSk7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgYWZ0ZXIgPSAkcG9zLm5vZGUoZCkubWF5YmVDaGlsZChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiZWZvcmUgPSAkcG9zLm5vZGUoZCkubWF5YmVDaGlsZChpbmRleCAtIDEpO1xuICAgICAgICAgICAgYWZ0ZXIgPSAkcG9zLm5vZGUoZCArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChiZWZvcmUgJiYgIWJlZm9yZS5pc1RleHRibG9jayAmJiBqb2luYWJsZShiZWZvcmUsIGFmdGVyKSAmJlxuICAgICAgICAgICAgJHBvcy5ub2RlKGQpLmNhblJlcGxhY2UoaW5kZXgsIGluZGV4ICsgMSkpXG4gICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICBpZiAoZCA9PSAwKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIHBvcyA9IGRpciA8IDAgPyAkcG9zLmJlZm9yZShkKSA6ICRwb3MuYWZ0ZXIoZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gam9pbih0ciwgcG9zLCBkZXB0aCkge1xuICAgIGxldCBzdGVwID0gbmV3IFJlcGxhY2VTdGVwKHBvcyAtIGRlcHRoLCBwb3MgKyBkZXB0aCwgU2xpY2UuZW1wdHksIHRydWUpO1xuICAgIHRyLnN0ZXAoc3RlcCk7XG59XG4vKipcblRyeSB0byBmaW5kIGEgcG9pbnQgd2hlcmUgYSBub2RlIG9mIHRoZSBnaXZlbiB0eXBlIGNhbiBiZSBpbnNlcnRlZFxubmVhciBgcG9zYCwgYnkgc2VhcmNoaW5nIHVwIHRoZSBub2RlIGhpZXJhcmNoeSB3aGVuIGBwb3NgIGl0c2VsZlxuaXNuJ3QgYSB2YWxpZCBwbGFjZSBidXQgaXMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhIG5vZGUuIFJldHVyblxubnVsbCBpZiBubyBwb3NpdGlvbiB3YXMgZm91bmQuXG4qL1xuZnVuY3Rpb24gaW5zZXJ0UG9pbnQoZG9jLCBwb3MsIG5vZGVUeXBlKSB7XG4gICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZShwb3MpO1xuICAgIGlmICgkcG9zLnBhcmVudC5jYW5SZXBsYWNlV2l0aCgkcG9zLmluZGV4KCksICRwb3MuaW5kZXgoKSwgbm9kZVR5cGUpKVxuICAgICAgICByZXR1cm4gcG9zO1xuICAgIGlmICgkcG9zLnBhcmVudE9mZnNldCA9PSAwKVxuICAgICAgICBmb3IgKGxldCBkID0gJHBvcy5kZXB0aCAtIDE7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAkcG9zLmluZGV4KGQpO1xuICAgICAgICAgICAgaWYgKCRwb3Mubm9kZShkKS5jYW5SZXBsYWNlV2l0aChpbmRleCwgaW5kZXgsIG5vZGVUeXBlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJHBvcy5iZWZvcmUoZCArIDEpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIGlmICgkcG9zLnBhcmVudE9mZnNldCA9PSAkcG9zLnBhcmVudC5jb250ZW50LnNpemUpXG4gICAgICAgIGZvciAobGV0IGQgPSAkcG9zLmRlcHRoIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgICAgIGxldCBpbmRleCA9ICRwb3MuaW5kZXhBZnRlcihkKTtcbiAgICAgICAgICAgIGlmICgkcG9zLm5vZGUoZCkuY2FuUmVwbGFjZVdpdGgoaW5kZXgsIGluZGV4LCBub2RlVHlwZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuICRwb3MuYWZ0ZXIoZCArIDEpO1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgJHBvcy5ub2RlKGQpLmNoaWxkQ291bnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuRmluZHMgYSBwb3NpdGlvbiBhdCBvciBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uIHdoZXJlIHRoZSBnaXZlblxuc2xpY2UgY2FuIGJlIGluc2VydGVkLiBXaWxsIGxvb2sgYXQgcGFyZW50IG5vZGVzJyBuZWFyZXN0IGJvdW5kYXJ5XG5hbmQgdHJ5IHRoZXJlLCBldmVuIGlmIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiB3YXNuJ3QgZGlyZWN0bHkgYXQgdGhlXG5zdGFydCBvciBlbmQgb2YgdGhhdCBub2RlLiBSZXR1cm5zIG51bGwgd2hlbiBubyBwb3NpdGlvbiB3YXMgZm91bmQuXG4qL1xuZnVuY3Rpb24gZHJvcFBvaW50KGRvYywgcG9zLCBzbGljZSkge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKTtcbiAgICBpZiAoIXNsaWNlLmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICBsZXQgY29udGVudCA9IHNsaWNlLmNvbnRlbnQ7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbGljZS5vcGVuU3RhcnQ7IGkrKylcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQuZmlyc3RDaGlsZC5jb250ZW50O1xuICAgIGZvciAobGV0IHBhc3MgPSAxOyBwYXNzIDw9IChzbGljZS5vcGVuU3RhcnQgPT0gMCAmJiBzbGljZS5zaXplID8gMiA6IDEpOyBwYXNzKyspIHtcbiAgICAgICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGg7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICBsZXQgYmlhcyA9IGQgPT0gJHBvcy5kZXB0aCA/IDAgOiAkcG9zLnBvcyA8PSAoJHBvcy5zdGFydChkICsgMSkgKyAkcG9zLmVuZChkICsgMSkpIC8gMiA/IC0xIDogMTtcbiAgICAgICAgICAgIGxldCBpbnNlcnRQb3MgPSAkcG9zLmluZGV4KGQpICsgKGJpYXMgPiAwID8gMSA6IDApO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9ICRwb3Mubm9kZShkKSwgZml0cyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHBhc3MgPT0gMSkge1xuICAgICAgICAgICAgICAgIGZpdHMgPSBwYXJlbnQuY2FuUmVwbGFjZShpbnNlcnRQb3MsIGluc2VydFBvcywgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgd3JhcHBpbmcgPSBwYXJlbnQuY29udGVudE1hdGNoQXQoaW5zZXJ0UG9zKS5maW5kV3JhcHBpbmcoY29udGVudC5maXJzdENoaWxkLnR5cGUpO1xuICAgICAgICAgICAgICAgIGZpdHMgPSB3cmFwcGluZyAmJiBwYXJlbnQuY2FuUmVwbGFjZVdpdGgoaW5zZXJ0UG9zLCBpbnNlcnRQb3MsIHdyYXBwaW5nWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmaXRzKVxuICAgICAgICAgICAgICAgIHJldHVybiBiaWFzID09IDAgPyAkcG9zLnBvcyA6IGJpYXMgPCAwID8gJHBvcy5iZWZvcmUoZCArIDEpIDogJHBvcy5hZnRlcihkICsgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxu4oCYRml04oCZIGEgc2xpY2UgaW50byBhIGdpdmVuIHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudCwgcHJvZHVjaW5nIGFcbltzdGVwXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlN0ZXApIHRoYXQgaW5zZXJ0cyBpdC4gV2lsbCByZXR1cm4gbnVsbCBpZlxudGhlcmUncyBubyBtZWFuaW5nZnVsIHdheSB0byBpbnNlcnQgdGhlIHNsaWNlIGhlcmUsIG9yIGluc2VydGluZyBpdFxud291bGQgYmUgYSBuby1vcCAoYW4gZW1wdHkgc2xpY2Ugb3ZlciBhbiBlbXB0eSByYW5nZSkuXG4qL1xuZnVuY3Rpb24gcmVwbGFjZVN0ZXAoZG9jLCBmcm9tLCB0byA9IGZyb20sIHNsaWNlID0gU2xpY2UuZW1wdHkpIHtcbiAgICBpZiAoZnJvbSA9PSB0byAmJiAhc2xpY2Uuc2l6ZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0ICRmcm9tID0gZG9jLnJlc29sdmUoZnJvbSksICR0byA9IGRvYy5yZXNvbHZlKHRvKTtcbiAgICAvLyBPcHRpbWl6YXRpb24gLS0gYXZvaWQgd29yayBpZiBpdCdzIG9idmlvdXMgdGhhdCBpdCdzIG5vdCBuZWVkZWQuXG4gICAgaWYgKGZpdHNUcml2aWFsbHkoJGZyb20sICR0bywgc2xpY2UpKVxuICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VTdGVwKGZyb20sIHRvLCBzbGljZSk7XG4gICAgcmV0dXJuIG5ldyBGaXR0ZXIoJGZyb20sICR0bywgc2xpY2UpLmZpdCgpO1xufVxuZnVuY3Rpb24gZml0c1RyaXZpYWxseSgkZnJvbSwgJHRvLCBzbGljZSkge1xuICAgIHJldHVybiAhc2xpY2Uub3BlblN0YXJ0ICYmICFzbGljZS5vcGVuRW5kICYmICRmcm9tLnN0YXJ0KCkgPT0gJHRvLnN0YXJ0KCkgJiZcbiAgICAgICAgJGZyb20ucGFyZW50LmNhblJlcGxhY2UoJGZyb20uaW5kZXgoKSwgJHRvLmluZGV4KCksIHNsaWNlLmNvbnRlbnQpO1xufVxuLy8gQWxnb3JpdGhtIGZvciAncGxhY2luZycgdGhlIGVsZW1lbnRzIG9mIGEgc2xpY2UgaW50byBhIGdhcDpcbi8vXG4vLyBXZSBjb25zaWRlciB0aGUgY29udGVudCBvZiBlYWNoIG5vZGUgdGhhdCBpcyBvcGVuIHRvIHRoZSBsZWZ0IHRvIGJlXG4vLyBpbmRlcGVuZGVudGx5IHBsYWNlYWJsZS4gSS5lLiBpbiA8cChcImZvb1wiKSwgcChcImJhclwiKT4sIHdoZW4gdGhlXG4vLyBwYXJhZ3JhcGggb24gdGhlIGxlZnQgaXMgb3BlbiwgXCJmb29cIiBjYW4gYmUgcGxhY2VkIChzb21ld2hlcmUgb25cbi8vIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIHJlcGxhY2VtZW50IGdhcCkgaW5kZXBlbmRlbnRseSBmcm9tIHAoXCJiYXJcIikuXG4vL1xuLy8gVGhpcyBjbGFzcyB0cmFja3MgdGhlIHN0YXRlIG9mIHRoZSBwbGFjZW1lbnQgcHJvZ3Jlc3MgaW4gdGhlXG4vLyBmb2xsb3dpbmcgcHJvcGVydGllczpcbi8vXG4vLyAgLSBgZnJvbnRpZXJgIGhvbGRzIGEgc3RhY2sgb2YgYHt0eXBlLCBtYXRjaH1gIG9iamVjdHMgdGhhdFxuLy8gICAgcmVwcmVzZW50IHRoZSBvcGVuIHNpZGUgb2YgdGhlIHJlcGxhY2VtZW50LiBJdCBzdGFydHMgYXRcbi8vICAgIGAkZnJvbWAsIHRoZW4gbW92ZXMgZm9yd2FyZCBhcyBjb250ZW50IGlzIHBsYWNlZCwgYW5kIGlzIGZpbmFsbHlcbi8vICAgIHJlY29uY2lsZWQgd2l0aCBgJHRvYC5cbi8vXG4vLyAgLSBgdW5wbGFjZWRgIGlzIGEgc2xpY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjb250ZW50IHRoYXQgaGFzbid0XG4vLyAgICBiZWVuIHBsYWNlZCB5ZXQuXG4vL1xuLy8gIC0gYHBsYWNlZGAgaXMgYSBmcmFnbWVudCBvZiBwbGFjZWQgY29udGVudC4gSXRzIG9wZW4tc3RhcnQgdmFsdWVcbi8vICAgIGlzIGltcGxpY2l0IGluIGAkZnJvbWAsIGFuZCBpdHMgb3Blbi1lbmQgdmFsdWUgaW4gYGZyb250aWVyYC5cbmNsYXNzIEZpdHRlciB7XG4gICAgY29uc3RydWN0b3IoJGZyb20sICR0bywgdW5wbGFjZWQpIHtcbiAgICAgICAgdGhpcy4kZnJvbSA9ICRmcm9tO1xuICAgICAgICB0aGlzLiR0byA9ICR0bztcbiAgICAgICAgdGhpcy51bnBsYWNlZCA9IHVucGxhY2VkO1xuICAgICAgICB0aGlzLmZyb250aWVyID0gW107XG4gICAgICAgIHRoaXMucGxhY2VkID0gRnJhZ21lbnQuZW1wdHk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9ICRmcm9tLmRlcHRoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gJGZyb20ubm9kZShpKTtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRpZXIucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogbm9kZS50eXBlLFxuICAgICAgICAgICAgICAgIG1hdGNoOiBub2RlLmNvbnRlbnRNYXRjaEF0KCRmcm9tLmluZGV4QWZ0ZXIoaSkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gJGZyb20uZGVwdGg7IGkgPiAwOyBpLS0pXG4gICAgICAgICAgICB0aGlzLnBsYWNlZCA9IEZyYWdtZW50LmZyb20oJGZyb20ubm9kZShpKS5jb3B5KHRoaXMucGxhY2VkKSk7XG4gICAgfVxuICAgIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuZnJvbnRpZXIubGVuZ3RoIC0gMTsgfVxuICAgIGZpdCgpIHtcbiAgICAgICAgLy8gQXMgbG9uZyBhcyB0aGVyZSdzIHVucGxhY2VkIGNvbnRlbnQsIHRyeSB0byBwbGFjZSBzb21lIG9mIGl0LlxuICAgICAgICAvLyBJZiB0aGF0IGZhaWxzLCBlaXRoZXIgaW5jcmVhc2UgdGhlIG9wZW4gc2NvcmUgb2YgdGhlIHVucGxhY2VkXG4gICAgICAgIC8vIHNsaWNlLCBvciBkcm9wIG5vZGVzIGZyb20gaXQsIGFuZCB0aGVuIHRyeSBhZ2Fpbi5cbiAgICAgICAgd2hpbGUgKHRoaXMudW5wbGFjZWQuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGZpdCA9IHRoaXMuZmluZEZpdHRhYmxlKCk7XG4gICAgICAgICAgICBpZiAoZml0KVxuICAgICAgICAgICAgICAgIHRoaXMucGxhY2VOb2RlcyhmaXQpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMub3Blbk1vcmUoKSB8fCB0aGlzLmRyb3BOb2RlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGVyZSdzIGlubGluZSBjb250ZW50IGRpcmVjdGx5IGFmdGVyIHRoZSBmcm9udGllciBfYW5kX1xuICAgICAgICAvLyBkaXJlY3RseSBhZnRlciBgdGhpcy4kdG9gLCB3ZSBtdXN0IGdlbmVyYXRlIGEgYFJlcGxhY2VBcm91bmRgXG4gICAgICAgIC8vIHN0ZXAgdGhhdCBwdWxscyB0aGF0IGNvbnRlbnQgaW50byB0aGUgbm9kZSBhZnRlciB0aGUgZnJvbnRpZXIuXG4gICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlIGZpdHRpbmcgbXVzdCBiZSBkb25lIHRvIHRoZSBlbmQgb2YgdGhlIHRleHRibG9ja1xuICAgICAgICAvLyBub2RlIGFmdGVyIGB0aGlzLiR0b2AsIG5vdCBgdGhpcy4kdG9gIGl0c2VsZi5cbiAgICAgICAgbGV0IG1vdmVJbmxpbmUgPSB0aGlzLm11c3RNb3ZlSW5saW5lKCksIHBsYWNlZFNpemUgPSB0aGlzLnBsYWNlZC5zaXplIC0gdGhpcy5kZXB0aCAtIHRoaXMuJGZyb20uZGVwdGg7XG4gICAgICAgIGxldCAkZnJvbSA9IHRoaXMuJGZyb20sICR0byA9IHRoaXMuY2xvc2UobW92ZUlubGluZSA8IDAgPyB0aGlzLiR0byA6ICRmcm9tLmRvYy5yZXNvbHZlKG1vdmVJbmxpbmUpKTtcbiAgICAgICAgaWYgKCEkdG8pXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgLy8gSWYgY2xvc2luZyB0byBgJHRvYCBzdWNjZWVkZWQsIGNyZWF0ZSBhIHN0ZXBcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLnBsYWNlZCwgb3BlblN0YXJ0ID0gJGZyb20uZGVwdGgsIG9wZW5FbmQgPSAkdG8uZGVwdGg7XG4gICAgICAgIHdoaWxlIChvcGVuU3RhcnQgJiYgb3BlbkVuZCAmJiBjb250ZW50LmNoaWxkQ291bnQgPT0gMSkgeyAvLyBOb3JtYWxpemUgYnkgZHJvcHBpbmcgb3BlbiBwYXJlbnQgbm9kZXNcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQuY29udGVudDtcbiAgICAgICAgICAgIG9wZW5TdGFydC0tO1xuICAgICAgICAgICAgb3BlbkVuZC0tO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzbGljZSA9IG5ldyBTbGljZShjb250ZW50LCBvcGVuU3RhcnQsIG9wZW5FbmQpO1xuICAgICAgICBpZiAobW92ZUlubGluZSA+IC0xKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlQXJvdW5kU3RlcCgkZnJvbS5wb3MsIG1vdmVJbmxpbmUsIHRoaXMuJHRvLnBvcywgdGhpcy4kdG8uZW5kKCksIHNsaWNlLCBwbGFjZWRTaXplKTtcbiAgICAgICAgaWYgKHNsaWNlLnNpemUgfHwgJGZyb20ucG9zICE9IHRoaXMuJHRvLnBvcykgLy8gRG9uJ3QgZ2VuZXJhdGUgbm8tb3Agc3RlcHNcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVwbGFjZVN0ZXAoJGZyb20ucG9zLCAkdG8ucG9zLCBzbGljZSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBGaW5kIGEgcG9zaXRpb24gb24gdGhlIHN0YXJ0IHNwaW5lIG9mIGB0aGlzLnVucGxhY2VkYCB0aGF0IGhhc1xuICAgIC8vIGNvbnRlbnQgdGhhdCBjYW4gYmUgbW92ZWQgc29tZXdoZXJlIG9uIHRoZSBmcm9udGllci4gUmV0dXJucyB0d29cbiAgICAvLyBkZXB0aHMsIG9uZSBmb3IgdGhlIHNsaWNlIGFuZCBvbmUgZm9yIHRoZSBmcm9udGllci5cbiAgICBmaW5kRml0dGFibGUoKSB7XG4gICAgICAgIGxldCBzdGFydERlcHRoID0gdGhpcy51bnBsYWNlZC5vcGVuU3RhcnQ7XG4gICAgICAgIGZvciAobGV0IGN1ciA9IHRoaXMudW5wbGFjZWQuY29udGVudCwgZCA9IDAsIG9wZW5FbmQgPSB0aGlzLnVucGxhY2VkLm9wZW5FbmQ7IGQgPCBzdGFydERlcHRoOyBkKyspIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gY3VyLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoY3VyLmNoaWxkQ291bnQgPiAxKVxuICAgICAgICAgICAgICAgIG9wZW5FbmQgPSAwO1xuICAgICAgICAgICAgaWYgKG5vZGUudHlwZS5zcGVjLmlzb2xhdGluZyAmJiBvcGVuRW5kIDw9IGQpIHtcbiAgICAgICAgICAgICAgICBzdGFydERlcHRoID0gZDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IG5vZGUuY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbmx5IHRyeSB3cmFwcGluZyBub2RlcyAocGFzcyAyKSBhZnRlciBmaW5kaW5nIGEgcGxhY2Ugd2l0aG91dFxuICAgICAgICAvLyB3cmFwcGluZyBmYWlsZWQuXG4gICAgICAgIGZvciAobGV0IHBhc3MgPSAxOyBwYXNzIDw9IDI7IHBhc3MrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgc2xpY2VEZXB0aCA9IHBhc3MgPT0gMSA/IHN0YXJ0RGVwdGggOiB0aGlzLnVucGxhY2VkLm9wZW5TdGFydDsgc2xpY2VEZXB0aCA+PSAwOyBzbGljZURlcHRoLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgZnJhZ21lbnQsIHBhcmVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHNsaWNlRGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gY29udGVudEF0KHRoaXMudW5wbGFjZWQuY29udGVudCwgc2xpY2VEZXB0aCAtIDEpLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gcGFyZW50LmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudCA9IHRoaXMudW5wbGFjZWQuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBmcm9udGllckRlcHRoID0gdGhpcy5kZXB0aDsgZnJvbnRpZXJEZXB0aCA+PSAwOyBmcm9udGllckRlcHRoLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHsgdHlwZSwgbWF0Y2ggfSA9IHRoaXMuZnJvbnRpZXJbZnJvbnRpZXJEZXB0aF0sIHdyYXAsIGluamVjdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHBhc3MgMSwgaWYgdGhlIG5leHQgbm9kZSBtYXRjaGVzLCBvciB0aGVyZSBpcyBubyBuZXh0XG4gICAgICAgICAgICAgICAgICAgIC8vIG5vZGUgYnV0IHRoZSBwYXJlbnRzIGxvb2sgY29tcGF0aWJsZSwgd2UndmUgZm91bmQgYVxuICAgICAgICAgICAgICAgICAgICAvLyBwbGFjZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3MgPT0gMSAmJiAoZmlyc3QgPyBtYXRjaC5tYXRjaFR5cGUoZmlyc3QudHlwZSkgfHwgKGluamVjdCA9IG1hdGNoLmZpbGxCZWZvcmUoRnJhZ21lbnQuZnJvbShmaXJzdCksIGZhbHNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcGFyZW50ICYmIHR5cGUuY29tcGF0aWJsZUNvbnRlbnQocGFyZW50LnR5cGUpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNsaWNlRGVwdGgsIGZyb250aWVyRGVwdGgsIHBhcmVudCwgaW5qZWN0IH07XG4gICAgICAgICAgICAgICAgICAgIC8vIEluIHBhc3MgMiwgbG9vayBmb3IgYSBzZXQgb2Ygd3JhcHBpbmcgbm9kZXMgdGhhdCBtYWtlXG4gICAgICAgICAgICAgICAgICAgIC8vIGBmaXJzdGAgZml0IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhc3MgPT0gMiAmJiBmaXJzdCAmJiAod3JhcCA9IG1hdGNoLmZpbmRXcmFwcGluZyhmaXJzdC50eXBlKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzbGljZURlcHRoLCBmcm9udGllckRlcHRoLCBwYXJlbnQsIHdyYXAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgY29udGludWUgbG9va2luZyBmdXJ0aGVyIHVwIGlmIHRoZSBwYXJlbnQgbm9kZVxuICAgICAgICAgICAgICAgICAgICAvLyB3b3VsZCBmaXQgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudCAmJiBtYXRjaC5tYXRjaFR5cGUocGFyZW50LnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW5Nb3JlKCkge1xuICAgICAgICBsZXQgeyBjb250ZW50LCBvcGVuU3RhcnQsIG9wZW5FbmQgfSA9IHRoaXMudW5wbGFjZWQ7XG4gICAgICAgIGxldCBpbm5lciA9IGNvbnRlbnRBdChjb250ZW50LCBvcGVuU3RhcnQpO1xuICAgICAgICBpZiAoIWlubmVyLmNoaWxkQ291bnQgfHwgaW5uZXIuZmlyc3RDaGlsZC5pc0xlYWYpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMudW5wbGFjZWQgPSBuZXcgU2xpY2UoY29udGVudCwgb3BlblN0YXJ0ICsgMSwgTWF0aC5tYXgob3BlbkVuZCwgaW5uZXIuc2l6ZSArIG9wZW5TdGFydCA+PSBjb250ZW50LnNpemUgLSBvcGVuRW5kID8gb3BlblN0YXJ0ICsgMSA6IDApKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGRyb3BOb2RlKCkge1xuICAgICAgICBsZXQgeyBjb250ZW50LCBvcGVuU3RhcnQsIG9wZW5FbmQgfSA9IHRoaXMudW5wbGFjZWQ7XG4gICAgICAgIGxldCBpbm5lciA9IGNvbnRlbnRBdChjb250ZW50LCBvcGVuU3RhcnQpO1xuICAgICAgICBpZiAoaW5uZXIuY2hpbGRDb3VudCA8PSAxICYmIG9wZW5TdGFydCA+IDApIHtcbiAgICAgICAgICAgIGxldCBvcGVuQXRFbmQgPSBjb250ZW50LnNpemUgLSBvcGVuU3RhcnQgPD0gb3BlblN0YXJ0ICsgaW5uZXIuc2l6ZTtcbiAgICAgICAgICAgIHRoaXMudW5wbGFjZWQgPSBuZXcgU2xpY2UoZHJvcEZyb21GcmFnbWVudChjb250ZW50LCBvcGVuU3RhcnQgLSAxLCAxKSwgb3BlblN0YXJ0IC0gMSwgb3BlbkF0RW5kID8gb3BlblN0YXJ0IC0gMSA6IG9wZW5FbmQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51bnBsYWNlZCA9IG5ldyBTbGljZShkcm9wRnJvbUZyYWdtZW50KGNvbnRlbnQsIG9wZW5TdGFydCwgMSksIG9wZW5TdGFydCwgb3BlbkVuZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTW92ZSBjb250ZW50IGZyb20gdGhlIHVucGxhY2VkIHNsaWNlIGF0IGBzbGljZURlcHRoYCB0byB0aGVcbiAgICAvLyBmcm9udGllciBub2RlIGF0IGBmcm9udGllckRlcHRoYC4gQ2xvc2UgdGhhdCBmcm9udGllciBub2RlIHdoZW5cbiAgICAvLyBhcHBsaWNhYmxlLlxuICAgIHBsYWNlTm9kZXMoeyBzbGljZURlcHRoLCBmcm9udGllckRlcHRoLCBwYXJlbnQsIGluamVjdCwgd3JhcCB9KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmRlcHRoID4gZnJvbnRpZXJEZXB0aClcbiAgICAgICAgICAgIHRoaXMuY2xvc2VGcm9udGllck5vZGUoKTtcbiAgICAgICAgaWYgKHdyYXApXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyYXAubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRnJvbnRpZXJOb2RlKHdyYXBbaV0pO1xuICAgICAgICBsZXQgc2xpY2UgPSB0aGlzLnVucGxhY2VkLCBmcmFnbWVudCA9IHBhcmVudCA/IHBhcmVudC5jb250ZW50IDogc2xpY2UuY29udGVudDtcbiAgICAgICAgbGV0IG9wZW5TdGFydCA9IHNsaWNlLm9wZW5TdGFydCAtIHNsaWNlRGVwdGg7XG4gICAgICAgIGxldCB0YWtlbiA9IDAsIGFkZCA9IFtdO1xuICAgICAgICBsZXQgeyBtYXRjaCwgdHlwZSB9ID0gdGhpcy5mcm9udGllcltmcm9udGllckRlcHRoXTtcbiAgICAgICAgaWYgKGluamVjdCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmplY3QuY2hpbGRDb3VudDsgaSsrKVxuICAgICAgICAgICAgICAgIGFkZC5wdXNoKGluamVjdC5jaGlsZChpKSk7XG4gICAgICAgICAgICBtYXRjaCA9IG1hdGNoLm1hdGNoRnJhZ21lbnQoaW5qZWN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb21wdXRlcyB0aGUgYW1vdW50IG9mIChlbmQpIG9wZW4gbm9kZXMgYXQgdGhlIGVuZCBvZiB0aGVcbiAgICAgICAgLy8gZnJhZ21lbnQuIFdoZW4gMCwgdGhlIHBhcmVudCBpcyBvcGVuLCBidXQgbm8gbW9yZS4gV2hlblxuICAgICAgICAvLyBuZWdhdGl2ZSwgbm90aGluZyBpcyBvcGVuLlxuICAgICAgICBsZXQgb3BlbkVuZENvdW50ID0gKGZyYWdtZW50LnNpemUgKyBzbGljZURlcHRoKSAtIChzbGljZS5jb250ZW50LnNpemUgLSBzbGljZS5vcGVuRW5kKTtcbiAgICAgICAgLy8gU2NhbiBvdmVyIHRoZSBmcmFnbWVudCwgZml0dGluZyBhcyBtYW55IGNoaWxkIG5vZGVzIGFzXG4gICAgICAgIC8vIHBvc3NpYmxlLlxuICAgICAgICB3aGlsZSAodGFrZW4gPCBmcmFnbWVudC5jaGlsZENvdW50KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGZyYWdtZW50LmNoaWxkKHRha2VuKSwgbWF0Y2hlcyA9IG1hdGNoLm1hdGNoVHlwZShuZXh0LnR5cGUpO1xuICAgICAgICAgICAgaWYgKCFtYXRjaGVzKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgdGFrZW4rKztcbiAgICAgICAgICAgIGlmICh0YWtlbiA+IDEgfHwgb3BlblN0YXJ0ID09IDAgfHwgbmV4dC5jb250ZW50LnNpemUpIHsgLy8gRHJvcCBlbXB0eSBvcGVuIG5vZGVzXG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBtYXRjaGVzO1xuICAgICAgICAgICAgICAgIGFkZC5wdXNoKGNsb3NlTm9kZVN0YXJ0KG5leHQubWFyayh0eXBlLmFsbG93ZWRNYXJrcyhuZXh0Lm1hcmtzKSksIHRha2VuID09IDEgPyBvcGVuU3RhcnQgOiAwLCB0YWtlbiA9PSBmcmFnbWVudC5jaGlsZENvdW50ID8gb3BlbkVuZENvdW50IDogLTEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgdG9FbmQgPSB0YWtlbiA9PSBmcmFnbWVudC5jaGlsZENvdW50O1xuICAgICAgICBpZiAoIXRvRW5kKVxuICAgICAgICAgICAgb3BlbkVuZENvdW50ID0gLTE7XG4gICAgICAgIHRoaXMucGxhY2VkID0gYWRkVG9GcmFnbWVudCh0aGlzLnBsYWNlZCwgZnJvbnRpZXJEZXB0aCwgRnJhZ21lbnQuZnJvbShhZGQpKTtcbiAgICAgICAgdGhpcy5mcm9udGllcltmcm9udGllckRlcHRoXS5tYXRjaCA9IG1hdGNoO1xuICAgICAgICAvLyBJZiB0aGUgcGFyZW50IHR5cGVzIG1hdGNoLCBhbmQgdGhlIGVudGlyZSBub2RlIHdhcyBtb3ZlZCwgYW5kXG4gICAgICAgIC8vIGl0J3Mgbm90IG9wZW4sIGNsb3NlIHRoaXMgZnJvbnRpZXIgbm9kZSByaWdodCBhd2F5LlxuICAgICAgICBpZiAodG9FbmQgJiYgb3BlbkVuZENvdW50IDwgMCAmJiBwYXJlbnQgJiYgcGFyZW50LnR5cGUgPT0gdGhpcy5mcm9udGllclt0aGlzLmRlcHRoXS50eXBlICYmIHRoaXMuZnJvbnRpZXIubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIHRoaXMuY2xvc2VGcm9udGllck5vZGUoKTtcbiAgICAgICAgLy8gQWRkIG5ldyBmcm9udGllciBub2RlcyBmb3IgYW55IG9wZW4gbm9kZXMgYXQgdGhlIGVuZC5cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGN1ciA9IGZyYWdtZW50OyBpIDwgb3BlbkVuZENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gY3VyLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIHRoaXMuZnJvbnRpZXIucHVzaCh7IHR5cGU6IG5vZGUudHlwZSwgbWF0Y2g6IG5vZGUuY29udGVudE1hdGNoQXQobm9kZS5jaGlsZENvdW50KSB9KTtcbiAgICAgICAgICAgIGN1ciA9IG5vZGUuY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgYHRoaXMudW5wbGFjZWRgLiBEcm9wIHRoZSBlbnRpcmUgbm9kZSBmcm9tIHdoaWNoIHdlXG4gICAgICAgIC8vIHBsYWNlZCBpdCB3ZSBnb3QgdG8gaXRzIGVuZCwgb3RoZXJ3aXNlIGp1c3QgZHJvcCB0aGUgcGxhY2VkXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICB0aGlzLnVucGxhY2VkID0gIXRvRW5kID8gbmV3IFNsaWNlKGRyb3BGcm9tRnJhZ21lbnQoc2xpY2UuY29udGVudCwgc2xpY2VEZXB0aCwgdGFrZW4pLCBzbGljZS5vcGVuU3RhcnQsIHNsaWNlLm9wZW5FbmQpXG4gICAgICAgICAgICA6IHNsaWNlRGVwdGggPT0gMCA/IFNsaWNlLmVtcHR5XG4gICAgICAgICAgICAgICAgOiBuZXcgU2xpY2UoZHJvcEZyb21GcmFnbWVudChzbGljZS5jb250ZW50LCBzbGljZURlcHRoIC0gMSwgMSksIHNsaWNlRGVwdGggLSAxLCBvcGVuRW5kQ291bnQgPCAwID8gc2xpY2Uub3BlbkVuZCA6IHNsaWNlRGVwdGggLSAxKTtcbiAgICB9XG4gICAgbXVzdE1vdmVJbmxpbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy4kdG8ucGFyZW50LmlzVGV4dGJsb2NrKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgdG9wID0gdGhpcy5mcm9udGllclt0aGlzLmRlcHRoXSwgbGV2ZWw7XG4gICAgICAgIGlmICghdG9wLnR5cGUuaXNUZXh0YmxvY2sgfHwgIWNvbnRlbnRBZnRlckZpdHModGhpcy4kdG8sIHRoaXMuJHRvLmRlcHRoLCB0b3AudHlwZSwgdG9wLm1hdGNoLCBmYWxzZSkgfHxcbiAgICAgICAgICAgICh0aGlzLiR0by5kZXB0aCA9PSB0aGlzLmRlcHRoICYmIChsZXZlbCA9IHRoaXMuZmluZENsb3NlTGV2ZWwodGhpcy4kdG8pKSAmJiBsZXZlbC5kZXB0aCA9PSB0aGlzLmRlcHRoKSlcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgbGV0IHsgZGVwdGggfSA9IHRoaXMuJHRvLCBhZnRlciA9IHRoaXMuJHRvLmFmdGVyKGRlcHRoKTtcbiAgICAgICAgd2hpbGUgKGRlcHRoID4gMSAmJiBhZnRlciA9PSB0aGlzLiR0by5lbmQoLS1kZXB0aCkpXG4gICAgICAgICAgICArK2FmdGVyO1xuICAgICAgICByZXR1cm4gYWZ0ZXI7XG4gICAgfVxuICAgIGZpbmRDbG9zZUxldmVsKCR0bykge1xuICAgICAgICBzY2FuOiBmb3IgKGxldCBpID0gTWF0aC5taW4odGhpcy5kZXB0aCwgJHRvLmRlcHRoKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCB7IG1hdGNoLCB0eXBlIH0gPSB0aGlzLmZyb250aWVyW2ldO1xuICAgICAgICAgICAgbGV0IGRyb3BJbm5lciA9IGkgPCAkdG8uZGVwdGggJiYgJHRvLmVuZChpICsgMSkgPT0gJHRvLnBvcyArICgkdG8uZGVwdGggLSAoaSArIDEpKTtcbiAgICAgICAgICAgIGxldCBmaXQgPSBjb250ZW50QWZ0ZXJGaXRzKCR0bywgaSwgdHlwZSwgbWF0Y2gsIGRyb3BJbm5lcik7XG4gICAgICAgICAgICBpZiAoIWZpdClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGZvciAobGV0IGQgPSBpIC0gMTsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBtYXRjaCwgdHlwZSB9ID0gdGhpcy5mcm9udGllcltkXTtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlcyA9IGNvbnRlbnRBZnRlckZpdHMoJHRvLCBkLCB0eXBlLCBtYXRjaCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzIHx8IG1hdGNoZXMuY2hpbGRDb3VudClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgc2NhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGRlcHRoOiBpLCBmaXQsIG1vdmU6IGRyb3BJbm5lciA/ICR0by5kb2MucmVzb2x2ZSgkdG8uYWZ0ZXIoaSArIDEpKSA6ICR0byB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCR0bykge1xuICAgICAgICBsZXQgY2xvc2UgPSB0aGlzLmZpbmRDbG9zZUxldmVsKCR0byk7XG4gICAgICAgIGlmICghY2xvc2UpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgd2hpbGUgKHRoaXMuZGVwdGggPiBjbG9zZS5kZXB0aClcbiAgICAgICAgICAgIHRoaXMuY2xvc2VGcm9udGllck5vZGUoKTtcbiAgICAgICAgaWYgKGNsb3NlLmZpdC5jaGlsZENvdW50KVxuICAgICAgICAgICAgdGhpcy5wbGFjZWQgPSBhZGRUb0ZyYWdtZW50KHRoaXMucGxhY2VkLCBjbG9zZS5kZXB0aCwgY2xvc2UuZml0KTtcbiAgICAgICAgJHRvID0gY2xvc2UubW92ZTtcbiAgICAgICAgZm9yIChsZXQgZCA9IGNsb3NlLmRlcHRoICsgMTsgZCA8PSAkdG8uZGVwdGg7IGQrKykge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSAkdG8ubm9kZShkKSwgYWRkID0gbm9kZS50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKG5vZGUuY29udGVudCwgdHJ1ZSwgJHRvLmluZGV4KGQpKTtcbiAgICAgICAgICAgIHRoaXMub3BlbkZyb250aWVyTm9kZShub2RlLnR5cGUsIG5vZGUuYXR0cnMsIGFkZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICR0bztcbiAgICB9XG4gICAgb3BlbkZyb250aWVyTm9kZSh0eXBlLCBhdHRycyA9IG51bGwsIGNvbnRlbnQpIHtcbiAgICAgICAgbGV0IHRvcCA9IHRoaXMuZnJvbnRpZXJbdGhpcy5kZXB0aF07XG4gICAgICAgIHRvcC5tYXRjaCA9IHRvcC5tYXRjaC5tYXRjaFR5cGUodHlwZSk7XG4gICAgICAgIHRoaXMucGxhY2VkID0gYWRkVG9GcmFnbWVudCh0aGlzLnBsYWNlZCwgdGhpcy5kZXB0aCwgRnJhZ21lbnQuZnJvbSh0eXBlLmNyZWF0ZShhdHRycywgY29udGVudCkpKTtcbiAgICAgICAgdGhpcy5mcm9udGllci5wdXNoKHsgdHlwZSwgbWF0Y2g6IHR5cGUuY29udGVudE1hdGNoIH0pO1xuICAgIH1cbiAgICBjbG9zZUZyb250aWVyTm9kZSgpIHtcbiAgICAgICAgbGV0IG9wZW4gPSB0aGlzLmZyb250aWVyLnBvcCgpO1xuICAgICAgICBsZXQgYWRkID0gb3Blbi5tYXRjaC5maWxsQmVmb3JlKEZyYWdtZW50LmVtcHR5LCB0cnVlKTtcbiAgICAgICAgaWYgKGFkZC5jaGlsZENvdW50KVxuICAgICAgICAgICAgdGhpcy5wbGFjZWQgPSBhZGRUb0ZyYWdtZW50KHRoaXMucGxhY2VkLCB0aGlzLmZyb250aWVyLmxlbmd0aCwgYWRkKTtcbiAgICB9XG59XG5mdW5jdGlvbiBkcm9wRnJvbUZyYWdtZW50KGZyYWdtZW50LCBkZXB0aCwgY291bnQpIHtcbiAgICBpZiAoZGVwdGggPT0gMClcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50LmN1dEJ5SW5kZXgoY291bnQsIGZyYWdtZW50LmNoaWxkQ291bnQpO1xuICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlQ2hpbGQoMCwgZnJhZ21lbnQuZmlyc3RDaGlsZC5jb3B5KGRyb3BGcm9tRnJhZ21lbnQoZnJhZ21lbnQuZmlyc3RDaGlsZC5jb250ZW50LCBkZXB0aCAtIDEsIGNvdW50KSkpO1xufVxuZnVuY3Rpb24gYWRkVG9GcmFnbWVudChmcmFnbWVudCwgZGVwdGgsIGNvbnRlbnQpIHtcbiAgICBpZiAoZGVwdGggPT0gMClcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50LmFwcGVuZChjb250ZW50KTtcbiAgICByZXR1cm4gZnJhZ21lbnQucmVwbGFjZUNoaWxkKGZyYWdtZW50LmNoaWxkQ291bnQgLSAxLCBmcmFnbWVudC5sYXN0Q2hpbGQuY29weShhZGRUb0ZyYWdtZW50KGZyYWdtZW50Lmxhc3RDaGlsZC5jb250ZW50LCBkZXB0aCAtIDEsIGNvbnRlbnQpKSk7XG59XG5mdW5jdGlvbiBjb250ZW50QXQoZnJhZ21lbnQsIGRlcHRoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXB0aDsgaSsrKVxuICAgICAgICBmcmFnbWVudCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQuY29udGVudDtcbiAgICByZXR1cm4gZnJhZ21lbnQ7XG59XG5mdW5jdGlvbiBjbG9zZU5vZGVTdGFydChub2RlLCBvcGVuU3RhcnQsIG9wZW5FbmQpIHtcbiAgICBpZiAob3BlblN0YXJ0IDw9IDApXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIGxldCBmcmFnID0gbm9kZS5jb250ZW50O1xuICAgIGlmIChvcGVuU3RhcnQgPiAxKVxuICAgICAgICBmcmFnID0gZnJhZy5yZXBsYWNlQ2hpbGQoMCwgY2xvc2VOb2RlU3RhcnQoZnJhZy5maXJzdENoaWxkLCBvcGVuU3RhcnQgLSAxLCBmcmFnLmNoaWxkQ291bnQgPT0gMSA/IG9wZW5FbmQgLSAxIDogMCkpO1xuICAgIGlmIChvcGVuU3RhcnQgPiAwKSB7XG4gICAgICAgIGZyYWcgPSBub2RlLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZnJhZykuYXBwZW5kKGZyYWcpO1xuICAgICAgICBpZiAob3BlbkVuZCA8PSAwKVxuICAgICAgICAgICAgZnJhZyA9IGZyYWcuYXBwZW5kKG5vZGUudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChmcmFnKS5maWxsQmVmb3JlKEZyYWdtZW50LmVtcHR5LCB0cnVlKSk7XG4gICAgfVxuICAgIHJldHVybiBub2RlLmNvcHkoZnJhZyk7XG59XG5mdW5jdGlvbiBjb250ZW50QWZ0ZXJGaXRzKCR0bywgZGVwdGgsIHR5cGUsIG1hdGNoLCBvcGVuKSB7XG4gICAgbGV0IG5vZGUgPSAkdG8ubm9kZShkZXB0aCksIGluZGV4ID0gb3BlbiA/ICR0by5pbmRleEFmdGVyKGRlcHRoKSA6ICR0by5pbmRleChkZXB0aCk7XG4gICAgaWYgKGluZGV4ID09IG5vZGUuY2hpbGRDb3VudCAmJiAhdHlwZS5jb21wYXRpYmxlQ29udGVudChub2RlLnR5cGUpKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZml0ID0gbWF0Y2guZmlsbEJlZm9yZShub2RlLmNvbnRlbnQsIHRydWUsIGluZGV4KTtcbiAgICByZXR1cm4gZml0ICYmICFpbnZhbGlkTWFya3ModHlwZSwgbm9kZS5jb250ZW50LCBpbmRleCkgPyBmaXQgOiBudWxsO1xufVxuZnVuY3Rpb24gaW52YWxpZE1hcmtzKHR5cGUsIGZyYWdtZW50LCBzdGFydCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGZyYWdtZW50LmNoaWxkQ291bnQ7IGkrKylcbiAgICAgICAgaWYgKCF0eXBlLmFsbG93c01hcmtzKGZyYWdtZW50LmNoaWxkKGkpLm1hcmtzKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGRlZmluZXNDb250ZW50KHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZS5zcGVjLmRlZmluaW5nIHx8IHR5cGUuc3BlYy5kZWZpbmluZ0ZvckNvbnRlbnQ7XG59XG5mdW5jdGlvbiByZXBsYWNlUmFuZ2UodHIsIGZyb20sIHRvLCBzbGljZSkge1xuICAgIGlmICghc2xpY2Uuc2l6ZSlcbiAgICAgICAgcmV0dXJuIHRyLmRlbGV0ZVJhbmdlKGZyb20sIHRvKTtcbiAgICBsZXQgJGZyb20gPSB0ci5kb2MucmVzb2x2ZShmcm9tKSwgJHRvID0gdHIuZG9jLnJlc29sdmUodG8pO1xuICAgIGlmIChmaXRzVHJpdmlhbGx5KCRmcm9tLCAkdG8sIHNsaWNlKSlcbiAgICAgICAgcmV0dXJuIHRyLnN0ZXAobmV3IFJlcGxhY2VTdGVwKGZyb20sIHRvLCBzbGljZSkpO1xuICAgIGxldCB0YXJnZXREZXB0aHMgPSBjb3ZlcmVkRGVwdGhzKCRmcm9tLCB0ci5kb2MucmVzb2x2ZSh0bykpO1xuICAgIC8vIENhbid0IHJlcGxhY2UgdGhlIHdob2xlIGRvY3VtZW50LCBzbyByZW1vdmUgMCBpZiBpdCdzIHByZXNlbnRcbiAgICBpZiAodGFyZ2V0RGVwdGhzW3RhcmdldERlcHRocy5sZW5ndGggLSAxXSA9PSAwKVxuICAgICAgICB0YXJnZXREZXB0aHMucG9wKCk7XG4gICAgLy8gTmVnYXRpdmUgbnVtYmVycyByZXByZXNlbnQgbm90IGV4cGFuc2lvbiBvdmVyIHRoZSB3aG9sZSBub2RlIGF0XG4gICAgLy8gdGhhdCBkZXB0aCwgYnV0IHJlcGxhY2luZyBmcm9tICRmcm9tLmJlZm9yZSgtRCkgdG8gJHRvLnBvcy5cbiAgICBsZXQgcHJlZmVycmVkVGFyZ2V0ID0gLSgkZnJvbS5kZXB0aCArIDEpO1xuICAgIHRhcmdldERlcHRocy51bnNoaWZ0KHByZWZlcnJlZFRhcmdldCk7XG4gICAgLy8gVGhpcyBsb29wIHBpY2tzIGEgcHJlZmVycmVkIHRhcmdldCBkZXB0aCwgaWYgb25lIG9mIHRoZSBjb3ZlcmluZ1xuICAgIC8vIGRlcHRocyBpcyBub3Qgb3V0c2lkZSBvZiBhIGRlZmluaW5nIG5vZGUsIGFuZCBhZGRzIG5lZ2F0aXZlXG4gICAgLy8gZGVwdGhzIGZvciBhbnkgZGVwdGggdGhhdCBoYXMgJGZyb20gYXQgaXRzIHN0YXJ0IGFuZCBkb2VzIG5vdFxuICAgIC8vIGNyb3NzIGEgZGVmaW5pbmcgbm9kZS5cbiAgICBmb3IgKGxldCBkID0gJGZyb20uZGVwdGgsIHBvcyA9ICRmcm9tLnBvcyAtIDE7IGQgPiAwOyBkLS0sIHBvcy0tKSB7XG4gICAgICAgIGxldCBzcGVjID0gJGZyb20ubm9kZShkKS50eXBlLnNwZWM7XG4gICAgICAgIGlmIChzcGVjLmRlZmluaW5nIHx8IHNwZWMuZGVmaW5pbmdBc0NvbnRleHQgfHwgc3BlYy5pc29sYXRpbmcpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKHRhcmdldERlcHRocy5pbmRleE9mKGQpID4gLTEpXG4gICAgICAgICAgICBwcmVmZXJyZWRUYXJnZXQgPSBkO1xuICAgICAgICBlbHNlIGlmICgkZnJvbS5iZWZvcmUoZCkgPT0gcG9zKVxuICAgICAgICAgICAgdGFyZ2V0RGVwdGhzLnNwbGljZSgxLCAwLCAtZCk7XG4gICAgfVxuICAgIC8vIFRyeSB0byBmaXQgZWFjaCBwb3NzaWJsZSBkZXB0aCBvZiB0aGUgc2xpY2UgaW50byBlYWNoIHBvc3NpYmxlXG4gICAgLy8gdGFyZ2V0IGRlcHRoLCBzdGFydGluZyB3aXRoIHRoZSBwcmVmZXJyZWQgZGVwdGhzLlxuICAgIGxldCBwcmVmZXJyZWRUYXJnZXRJbmRleCA9IHRhcmdldERlcHRocy5pbmRleE9mKHByZWZlcnJlZFRhcmdldCk7XG4gICAgbGV0IGxlZnROb2RlcyA9IFtdLCBwcmVmZXJyZWREZXB0aCA9IHNsaWNlLm9wZW5TdGFydDtcbiAgICBmb3IgKGxldCBjb250ZW50ID0gc2xpY2UuY29udGVudCwgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBjb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGxlZnROb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBpZiAoaSA9PSBzbGljZS5vcGVuU3RhcnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY29udGVudCA9IG5vZGUuY29udGVudDtcbiAgICB9XG4gICAgLy8gQmFjayB1cCBwcmVmZXJyZWREZXB0aCB0byBjb3ZlciBkZWZpbmluZyB0ZXh0YmxvY2tzIGRpcmVjdGx5XG4gICAgLy8gYWJvdmUgaXQsIHBvc3NpYmx5IHNraXBwaW5nIGEgbm9uLWRlZmluaW5nIHRleHRibG9jay5cbiAgICBmb3IgKGxldCBkID0gcHJlZmVycmVkRGVwdGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICBsZXQgdHlwZSA9IGxlZnROb2Rlc1tkXS50eXBlLCBkZWYgPSBkZWZpbmVzQ29udGVudCh0eXBlKTtcbiAgICAgICAgaWYgKGRlZiAmJiAkZnJvbS5ub2RlKHByZWZlcnJlZFRhcmdldEluZGV4KS50eXBlICE9IHR5cGUpXG4gICAgICAgICAgICBwcmVmZXJyZWREZXB0aCA9IGQ7XG4gICAgICAgIGVsc2UgaWYgKGRlZiB8fCAhdHlwZS5pc1RleHRibG9jaylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBmb3IgKGxldCBqID0gc2xpY2Uub3BlblN0YXJ0OyBqID49IDA7IGotLSkge1xuICAgICAgICBsZXQgb3BlbkRlcHRoID0gKGogKyBwcmVmZXJyZWREZXB0aCArIDEpICUgKHNsaWNlLm9wZW5TdGFydCArIDEpO1xuICAgICAgICBsZXQgaW5zZXJ0ID0gbGVmdE5vZGVzW29wZW5EZXB0aF07XG4gICAgICAgIGlmICghaW5zZXJ0KVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0RGVwdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBMb29wIG92ZXIgcG9zc2libGUgZXhwYW5zaW9uIGxldmVscywgc3RhcnRpbmcgd2l0aCB0aGVcbiAgICAgICAgICAgIC8vIHByZWZlcnJlZCBvbmVcbiAgICAgICAgICAgIGxldCB0YXJnZXREZXB0aCA9IHRhcmdldERlcHRoc1soaSArIHByZWZlcnJlZFRhcmdldEluZGV4KSAlIHRhcmdldERlcHRocy5sZW5ndGhdLCBleHBhbmQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRhcmdldERlcHRoIDwgMCkge1xuICAgICAgICAgICAgICAgIGV4cGFuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRhcmdldERlcHRoID0gLXRhcmdldERlcHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHBhcmVudCA9ICRmcm9tLm5vZGUodGFyZ2V0RGVwdGggLSAxKSwgaW5kZXggPSAkZnJvbS5pbmRleCh0YXJnZXREZXB0aCAtIDEpO1xuICAgICAgICAgICAgaWYgKHBhcmVudC5jYW5SZXBsYWNlV2l0aChpbmRleCwgaW5kZXgsIGluc2VydC50eXBlLCBpbnNlcnQubWFya3MpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0ci5yZXBsYWNlKCRmcm9tLmJlZm9yZSh0YXJnZXREZXB0aCksIGV4cGFuZCA/ICR0by5hZnRlcih0YXJnZXREZXB0aCkgOiB0bywgbmV3IFNsaWNlKGNsb3NlRnJhZ21lbnQoc2xpY2UuY29udGVudCwgMCwgc2xpY2Uub3BlblN0YXJ0LCBvcGVuRGVwdGgpLCBvcGVuRGVwdGgsIHNsaWNlLm9wZW5FbmQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgc3RhcnRTdGVwcyA9IHRyLnN0ZXBzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gdGFyZ2V0RGVwdGhzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRyLnJlcGxhY2UoZnJvbSwgdG8sIHNsaWNlKTtcbiAgICAgICAgaWYgKHRyLnN0ZXBzLmxlbmd0aCA+IHN0YXJ0U3RlcHMpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgbGV0IGRlcHRoID0gdGFyZ2V0RGVwdGhzW2ldO1xuICAgICAgICBpZiAoZGVwdGggPCAwKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGZyb20gPSAkZnJvbS5iZWZvcmUoZGVwdGgpO1xuICAgICAgICB0byA9ICR0by5hZnRlcihkZXB0aCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xvc2VGcmFnbWVudChmcmFnbWVudCwgZGVwdGgsIG9sZE9wZW4sIG5ld09wZW4sIHBhcmVudCkge1xuICAgIGlmIChkZXB0aCA8IG9sZE9wZW4pIHtcbiAgICAgICAgbGV0IGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudC5yZXBsYWNlQ2hpbGQoMCwgZmlyc3QuY29weShjbG9zZUZyYWdtZW50KGZpcnN0LmNvbnRlbnQsIGRlcHRoICsgMSwgb2xkT3BlbiwgbmV3T3BlbiwgZmlyc3QpKSk7XG4gICAgfVxuICAgIGlmIChkZXB0aCA+IG5ld09wZW4pIHtcbiAgICAgICAgbGV0IG1hdGNoID0gcGFyZW50LmNvbnRlbnRNYXRjaEF0KDApO1xuICAgICAgICBsZXQgc3RhcnQgPSBtYXRjaC5maWxsQmVmb3JlKGZyYWdtZW50KS5hcHBlbmQoZnJhZ21lbnQpO1xuICAgICAgICBmcmFnbWVudCA9IHN0YXJ0LmFwcGVuZChtYXRjaC5tYXRjaEZyYWdtZW50KHN0YXJ0KS5maWxsQmVmb3JlKEZyYWdtZW50LmVtcHR5LCB0cnVlKSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnbWVudDtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VSYW5nZVdpdGgodHIsIGZyb20sIHRvLCBub2RlKSB7XG4gICAgaWYgKCFub2RlLmlzSW5saW5lICYmIGZyb20gPT0gdG8gJiYgdHIuZG9jLnJlc29sdmUoZnJvbSkucGFyZW50LmNvbnRlbnQuc2l6ZSkge1xuICAgICAgICBsZXQgcG9pbnQgPSBpbnNlcnRQb2ludCh0ci5kb2MsIGZyb20sIG5vZGUudHlwZSk7XG4gICAgICAgIGlmIChwb2ludCAhPSBudWxsKVxuICAgICAgICAgICAgZnJvbSA9IHRvID0gcG9pbnQ7XG4gICAgfVxuICAgIHRyLnJlcGxhY2VSYW5nZShmcm9tLCB0bywgbmV3IFNsaWNlKEZyYWdtZW50LmZyb20obm9kZSksIDAsIDApKTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZVJhbmdlKHRyLCBmcm9tLCB0bykge1xuICAgIGxldCAkZnJvbSA9IHRyLmRvYy5yZXNvbHZlKGZyb20pLCAkdG8gPSB0ci5kb2MucmVzb2x2ZSh0byk7XG4gICAgbGV0IGNvdmVyZWQgPSBjb3ZlcmVkRGVwdGhzKCRmcm9tLCAkdG8pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY292ZXJlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZGVwdGggPSBjb3ZlcmVkW2ldLCBsYXN0ID0gaSA9PSBjb3ZlcmVkLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmICgobGFzdCAmJiBkZXB0aCA9PSAwKSB8fCAkZnJvbS5ub2RlKGRlcHRoKS50eXBlLmNvbnRlbnRNYXRjaC52YWxpZEVuZClcbiAgICAgICAgICAgIHJldHVybiB0ci5kZWxldGUoJGZyb20uc3RhcnQoZGVwdGgpLCAkdG8uZW5kKGRlcHRoKSk7XG4gICAgICAgIGlmIChkZXB0aCA+IDAgJiYgKGxhc3QgfHwgJGZyb20ubm9kZShkZXB0aCAtIDEpLmNhblJlcGxhY2UoJGZyb20uaW5kZXgoZGVwdGggLSAxKSwgJHRvLmluZGV4QWZ0ZXIoZGVwdGggLSAxKSkpKVxuICAgICAgICAgICAgcmV0dXJuIHRyLmRlbGV0ZSgkZnJvbS5iZWZvcmUoZGVwdGgpLCAkdG8uYWZ0ZXIoZGVwdGgpKTtcbiAgICB9XG4gICAgZm9yIChsZXQgZCA9IDE7IGQgPD0gJGZyb20uZGVwdGggJiYgZCA8PSAkdG8uZGVwdGg7IGQrKykge1xuICAgICAgICBpZiAoZnJvbSAtICRmcm9tLnN0YXJ0KGQpID09ICRmcm9tLmRlcHRoIC0gZCAmJiB0byA+ICRmcm9tLmVuZChkKSAmJiAkdG8uZW5kKGQpIC0gdG8gIT0gJHRvLmRlcHRoIC0gZClcbiAgICAgICAgICAgIHJldHVybiB0ci5kZWxldGUoJGZyb20uYmVmb3JlKGQpLCB0byk7XG4gICAgfVxuICAgIHRyLmRlbGV0ZShmcm9tLCB0byk7XG59XG4vLyBSZXR1cm5zIGFuIGFycmF5IG9mIGFsbCBkZXB0aHMgZm9yIHdoaWNoICRmcm9tIC0gJHRvIHNwYW5zIHRoZVxuLy8gd2hvbGUgY29udGVudCBvZiB0aGUgbm9kZXMgYXQgdGhhdCBkZXB0aC5cbmZ1bmN0aW9uIGNvdmVyZWREZXB0aHMoJGZyb20sICR0bykge1xuICAgIGxldCByZXN1bHQgPSBbXSwgbWluRGVwdGggPSBNYXRoLm1pbigkZnJvbS5kZXB0aCwgJHRvLmRlcHRoKTtcbiAgICBmb3IgKGxldCBkID0gbWluRGVwdGg7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgIGxldCBzdGFydCA9ICRmcm9tLnN0YXJ0KGQpO1xuICAgICAgICBpZiAoc3RhcnQgPCAkZnJvbS5wb3MgLSAoJGZyb20uZGVwdGggLSBkKSB8fFxuICAgICAgICAgICAgJHRvLmVuZChkKSA+ICR0by5wb3MgKyAoJHRvLmRlcHRoIC0gZCkgfHxcbiAgICAgICAgICAgICRmcm9tLm5vZGUoZCkudHlwZS5zcGVjLmlzb2xhdGluZyB8fFxuICAgICAgICAgICAgJHRvLm5vZGUoZCkudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoc3RhcnQgPT0gJHRvLnN0YXJ0KGQpIHx8XG4gICAgICAgICAgICAoZCA9PSAkZnJvbS5kZXB0aCAmJiBkID09ICR0by5kZXB0aCAmJiAkZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudCAmJiAkdG8ucGFyZW50LmlubGluZUNvbnRlbnQgJiZcbiAgICAgICAgICAgICAgICBkICYmICR0by5zdGFydChkIC0gMSkgPT0gc3RhcnQgLSAxKSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcblVwZGF0ZSBhbiBhdHRyaWJ1dGUgaW4gYSBzcGVjaWZpYyBub2RlLlxuKi9cbmNsYXNzIEF0dHJTdGVwIGV4dGVuZHMgU3RlcCB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGFuIGF0dHJpYnV0ZSBzdGVwLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICAqL1xuICAgIHBvcywgXG4gICAgLyoqXG4gICAgVGhlIGF0dHJpYnV0ZSB0byBzZXQuXG4gICAgKi9cbiAgICBhdHRyLCBcbiAgICAvLyBUaGUgYXR0cmlidXRlJ3MgbmV3IHZhbHVlLlxuICAgIHZhbHVlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmF0dHIgPSBhdHRyO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBsZXQgbm9kZSA9IGRvYy5ub2RlQXQodGhpcy5wb3MpO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mYWlsKFwiTm8gbm9kZSBhdCBhdHRyaWJ1dGUgc3RlcCdzIHBvc2l0aW9uXCIpO1xuICAgICAgICBsZXQgYXR0cnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBmb3IgKGxldCBuYW1lIGluIG5vZGUuYXR0cnMpXG4gICAgICAgICAgICBhdHRyc1tuYW1lXSA9IG5vZGUuYXR0cnNbbmFtZV07XG4gICAgICAgIGF0dHJzW3RoaXMuYXR0cl0gPSB0aGlzLnZhbHVlO1xuICAgICAgICBsZXQgdXBkYXRlZCA9IG5vZGUudHlwZS5jcmVhdGUoYXR0cnMsIG51bGwsIG5vZGUubWFya3MpO1xuICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mcm9tUmVwbGFjZShkb2MsIHRoaXMucG9zLCB0aGlzLnBvcyArIDEsIG5ldyBTbGljZShGcmFnbWVudC5mcm9tKHVwZGF0ZWQpLCAwLCBub2RlLmlzTGVhZiA/IDAgOiAxKSk7XG4gICAgfVxuICAgIGdldE1hcCgpIHtcbiAgICAgICAgcmV0dXJuIFN0ZXBNYXAuZW1wdHk7XG4gICAgfVxuICAgIGludmVydChkb2MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3RlcCh0aGlzLnBvcywgdGhpcy5hdHRyLCBkb2Mubm9kZUF0KHRoaXMucG9zKS5hdHRyc1t0aGlzLmF0dHJdKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IHBvcyA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMucG9zLCAxKTtcbiAgICAgICAgcmV0dXJuIHBvcy5kZWxldGVkQWZ0ZXIgPyBudWxsIDogbmV3IEF0dHJTdGVwKHBvcy5wb3MsIHRoaXMuYXR0ciwgdGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwiYXR0clwiLCBwb3M6IHRoaXMucG9zLCBhdHRyOiB0aGlzLmF0dHIsIHZhbHVlOiB0aGlzLnZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tSlNPTihzY2hlbWEsIGpzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uLnBvcyAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLmF0dHIgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgQXR0clN0ZXAuZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN0ZXAoanNvbi5wb3MsIGpzb24uYXR0ciwganNvbi52YWx1ZSk7XG4gICAgfVxufVxuU3RlcC5qc29uSUQoXCJhdHRyXCIsIEF0dHJTdGVwKTtcblxuLyoqXG5AaW50ZXJuYWxcbiovXG5sZXQgVHJhbnNmb3JtRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcbn07XG5UcmFuc2Zvcm1FcnJvciA9IGZ1bmN0aW9uIFRyYW5zZm9ybUVycm9yKG1lc3NhZ2UpIHtcbiAgICBsZXQgZXJyID0gRXJyb3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcbiAgICBlcnIuX19wcm90b19fID0gVHJhbnNmb3JtRXJyb3IucHJvdG90eXBlO1xuICAgIHJldHVybiBlcnI7XG59O1xuVHJhbnNmb3JtRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuVHJhbnNmb3JtRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVHJhbnNmb3JtRXJyb3I7XG5UcmFuc2Zvcm1FcnJvci5wcm90b3R5cGUubmFtZSA9IFwiVHJhbnNmb3JtRXJyb3JcIjtcbi8qKlxuQWJzdHJhY3Rpb24gdG8gYnVpbGQgdXAgYW5kIHRyYWNrIGFuIGFycmF5IG9mXG5bc3RlcHNdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN0cmFuc2Zvcm0uU3RlcCkgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24uXG5cbk1vc3QgdHJhbnNmb3JtaW5nIG1ldGhvZHMgcmV0dXJuIHRoZSBgVHJhbnNmb3JtYCBvYmplY3QgaXRzZWxmLCBzb1xudGhhdCB0aGV5IGNhbiBiZSBjaGFpbmVkLlxuKi9cbmNsYXNzIFRyYW5zZm9ybSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdHJhbnNmb3JtIHRoYXQgc3RhcnRzIHdpdGggdGhlIGdpdmVuIGRvY3VtZW50LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGN1cnJlbnQgZG9jdW1lbnQgKHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIHN0ZXBzIGluIHRoZVxuICAgIHRyYW5zZm9ybSkuXG4gICAgKi9cbiAgICBkb2MpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgc3RlcHMgaW4gdGhpcyB0cmFuc2Zvcm0uXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuc3RlcHMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgIFRoZSBkb2N1bWVudHMgYmVmb3JlIGVhY2ggb2YgdGhlIHN0ZXBzLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgIEEgbWFwcGluZyB3aXRoIHRoZSBtYXBzIGZvciBlYWNoIG9mIHRoZSBzdGVwcyBpbiB0aGlzIHRyYW5zZm9ybS5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXBwaW5nID0gbmV3IE1hcHBpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzdGFydGluZyBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBiZWZvcmUoKSB7IHJldHVybiB0aGlzLmRvY3MubGVuZ3RoID8gdGhpcy5kb2NzWzBdIDogdGhpcy5kb2M7IH1cbiAgICAvKipcbiAgICBBcHBseSBhIG5ldyBzdGVwIGluIHRoaXMgdHJhbnNmb3JtLCBzYXZpbmcgdGhlIHJlc3VsdC4gVGhyb3dzIGFuXG4gICAgZXJyb3Igd2hlbiB0aGUgc3RlcCBmYWlscy5cbiAgICAqL1xuICAgIHN0ZXAoc3RlcCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5tYXliZVN0ZXAoc3RlcCk7XG4gICAgICAgIGlmIChyZXN1bHQuZmFpbGVkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFRyYW5zZm9ybUVycm9yKHJlc3VsdC5mYWlsZWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ5IHRvIGFwcGx5IGEgc3RlcCBpbiB0aGlzIHRyYW5zZm9ybWF0aW9uLCBpZ25vcmluZyBpdCBpZiBpdFxuICAgIGZhaWxzLiBSZXR1cm5zIHRoZSBzdGVwIHJlc3VsdC5cbiAgICAqL1xuICAgIG1heWJlU3RlcChzdGVwKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBzdGVwLmFwcGx5KHRoaXMuZG9jKTtcbiAgICAgICAgaWYgKCFyZXN1bHQuZmFpbGVkKVxuICAgICAgICAgICAgdGhpcy5hZGRTdGVwKHN0ZXAsIHJlc3VsdC5kb2MpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhlIGRvY3VtZW50IGhhcyBiZWVuIGNoYW5nZWQgKHdoZW4gdGhlcmUgYXJlIGFueVxuICAgIHN0ZXBzKS5cbiAgICAqL1xuICAgIGdldCBkb2NDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwcy5sZW5ndGggPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFkZFN0ZXAoc3RlcCwgZG9jKSB7XG4gICAgICAgIHRoaXMuZG9jcy5wdXNoKHRoaXMuZG9jKTtcbiAgICAgICAgdGhpcy5zdGVwcy5wdXNoKHN0ZXApO1xuICAgICAgICB0aGlzLm1hcHBpbmcuYXBwZW5kTWFwKHN0ZXAuZ2V0TWFwKCkpO1xuICAgICAgICB0aGlzLmRvYyA9IGRvYztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgcGFydCBvZiB0aGUgZG9jdW1lbnQgYmV0d2VlbiBgZnJvbWAgYW5kIGB0b2Agd2l0aCB0aGVcbiAgICBnaXZlbiBgc2xpY2VgLlxuICAgICovXG4gICAgcmVwbGFjZShmcm9tLCB0byA9IGZyb20sIHNsaWNlID0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgbGV0IHN0ZXAgPSByZXBsYWNlU3RlcCh0aGlzLmRvYywgZnJvbSwgdG8sIHNsaWNlKTtcbiAgICAgICAgaWYgKHN0ZXApXG4gICAgICAgICAgICB0aGlzLnN0ZXAoc3RlcCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBnaXZlbiByYW5nZSB3aXRoIHRoZSBnaXZlbiBjb250ZW50LCB3aGljaCBtYXkgYmUgYVxuICAgIGZyYWdtZW50LCBub2RlLCBvciBhcnJheSBvZiBub2Rlcy5cbiAgICAqL1xuICAgIHJlcGxhY2VXaXRoKGZyb20sIHRvLCBjb250ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoZnJvbSwgdG8sIG5ldyBTbGljZShGcmFnbWVudC5mcm9tKGNvbnRlbnQpLCAwLCAwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIERlbGV0ZSB0aGUgY29udGVudCBiZXR3ZWVuIHRoZSBnaXZlbiBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBkZWxldGUoZnJvbSwgdG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZShmcm9tLCB0bywgU2xpY2UuZW1wdHkpO1xuICAgIH1cbiAgICAvKipcbiAgICBJbnNlcnQgdGhlIGdpdmVuIGNvbnRlbnQgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgaW5zZXJ0KHBvcywgY29udGVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlV2l0aChwb3MsIHBvcywgY29udGVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcGxhY2UgYSByYW5nZSBvZiB0aGUgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIHNsaWNlLCB1c2luZ1xuICAgIGBmcm9tYCwgYHRvYCwgYW5kIHRoZSBzbGljZSdzXG4gICAgW2BvcGVuU3RhcnRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuU2xpY2Uub3BlblN0YXJ0KSBwcm9wZXJ0eSBhcyBoaW50cywgcmF0aGVyXG4gICAgdGhhbiBmaXhlZCBzdGFydCBhbmQgZW5kIHBvaW50cy4gVGhpcyBtZXRob2QgbWF5IGdyb3cgdGhlXG4gICAgcmVwbGFjZWQgYXJlYSBvciBjbG9zZSBvcGVuIG5vZGVzIGluIHRoZSBzbGljZSBpbiBvcmRlciB0byBnZXQgYVxuICAgIGZpdCB0aGF0IGlzIG1vcmUgaW4gbGluZSB3aXRoIFdZU0lXWUcgZXhwZWN0YXRpb25zLCBieSBkcm9wcGluZ1xuICAgIGZ1bGx5IGNvdmVyZWQgcGFyZW50IG5vZGVzIG9mIHRoZSByZXBsYWNlZCByZWdpb24gd2hlbiB0aGV5IGFyZVxuICAgIG1hcmtlZCBbbm9uLWRlZmluaW5nIGFzXG4gICAgY29udGV4dF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmRlZmluaW5nQXNDb250ZXh0KSwgb3IgaW5jbHVkaW5nIGFuXG4gICAgb3BlbiBwYXJlbnQgbm9kZSBmcm9tIHRoZSBzbGljZSB0aGF0IF9pc18gbWFya2VkIGFzIFtkZWZpbmluZ1xuICAgIGl0cyBjb250ZW50XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuZGVmaW5pbmdGb3JDb250ZW50KS5cbiAgICBcbiAgICBUaGlzIGlzIHRoZSBtZXRob2QsIGZvciBleGFtcGxlLCB0byBoYW5kbGUgcGFzdGUuIFRoZSBzaW1pbGFyXG4gICAgW2ByZXBsYWNlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5UcmFuc2Zvcm0ucmVwbGFjZSkgbWV0aG9kIGlzIGEgbW9yZVxuICAgIHByaW1pdGl2ZSB0b29sIHdoaWNoIHdpbGwgX25vdF8gbW92ZSB0aGUgc3RhcnQgYW5kIGVuZCBvZiBpdHMgZ2l2ZW5cbiAgICByYW5nZSwgYW5kIGlzIHVzZWZ1bCBpbiBzaXR1YXRpb25zIHdoZXJlIHlvdSBuZWVkIG1vcmUgcHJlY2lzZVxuICAgIGNvbnRyb2wgb3ZlciB3aGF0IGhhcHBlbnMuXG4gICAgKi9cbiAgICByZXBsYWNlUmFuZ2UoZnJvbSwgdG8sIHNsaWNlKSB7XG4gICAgICAgIHJlcGxhY2VSYW5nZSh0aGlzLCBmcm9tLCB0bywgc2xpY2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgZ2l2ZW4gcmFuZ2Ugd2l0aCBhIG5vZGUsIGJ1dCB1c2UgYGZyb21gIGFuZCBgdG9gIGFzXG4gICAgaGludHMsIHJhdGhlciB0aGFuIHByZWNpc2UgcG9zaXRpb25zLiBXaGVuIGZyb20gYW5kIHRvIGFyZSB0aGUgc2FtZVxuICAgIGFuZCBhcmUgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBhIHBhcmVudCBub2RlIGluIHdoaWNoIHRoZSBnaXZlblxuICAgIG5vZGUgZG9lc24ndCBmaXQsIHRoaXMgbWV0aG9kIG1heSBfbW92ZV8gdGhlbSBvdXQgdG93YXJkcyBhIHBhcmVudFxuICAgIHRoYXQgZG9lcyBhbGxvdyB0aGUgZ2l2ZW4gbm9kZSB0byBiZSBwbGFjZWQuIFdoZW4gdGhlIGdpdmVuIHJhbmdlXG4gICAgY29tcGxldGVseSBjb3ZlcnMgYSBwYXJlbnQgbm9kZSwgdGhpcyBtZXRob2QgbWF5IGNvbXBsZXRlbHkgcmVwbGFjZVxuICAgIHRoYXQgcGFyZW50IG5vZGUuXG4gICAgKi9cbiAgICByZXBsYWNlUmFuZ2VXaXRoKGZyb20sIHRvLCBub2RlKSB7XG4gICAgICAgIHJlcGxhY2VSYW5nZVdpdGgodGhpcywgZnJvbSwgdG8sIG5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgRGVsZXRlIHRoZSBnaXZlbiByYW5nZSwgZXhwYW5kaW5nIGl0IHRvIGNvdmVyIGZ1bGx5IGNvdmVyZWRcbiAgICBwYXJlbnQgbm9kZXMgdW50aWwgYSB2YWxpZCByZXBsYWNlIGlzIGZvdW5kLlxuICAgICovXG4gICAgZGVsZXRlUmFuZ2UoZnJvbSwgdG8pIHtcbiAgICAgICAgZGVsZXRlUmFuZ2UodGhpcywgZnJvbSwgdG8pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgU3BsaXQgdGhlIGNvbnRlbnQgaW4gdGhlIGdpdmVuIHJhbmdlIG9mZiBmcm9tIGl0cyBwYXJlbnQsIGlmIHRoZXJlXG4gICAgaXMgc2libGluZyBjb250ZW50IGJlZm9yZSBvciBhZnRlciBpdCwgYW5kIG1vdmUgaXQgdXAgdGhlIHRyZWUgdG9cbiAgICB0aGUgZGVwdGggc3BlY2lmaWVkIGJ5IGB0YXJnZXRgLiBZb3UnbGwgcHJvYmFibHkgd2FudCB0byB1c2VcbiAgICBbYGxpZnRUYXJnZXRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLmxpZnRUYXJnZXQpIHRvIGNvbXB1dGUgYHRhcmdldGAsIHRvIG1ha2VcbiAgICBzdXJlIHRoZSBsaWZ0IGlzIHZhbGlkLlxuICAgICovXG4gICAgbGlmdChyYW5nZSwgdGFyZ2V0KSB7XG4gICAgICAgIGxpZnQodGhpcywgcmFuZ2UsIHRhcmdldCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBKb2luIHRoZSBibG9ja3MgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbi4gSWYgZGVwdGggaXMgMiwgdGhlaXJcbiAgICBsYXN0IGFuZCBmaXJzdCBzaWJsaW5ncyBhcmUgYWxzbyBqb2luZWQsIGFuZCBzbyBvbi5cbiAgICAqL1xuICAgIGpvaW4ocG9zLCBkZXB0aCA9IDEpIHtcbiAgICAgICAgam9pbih0aGlzLCBwb3MsIGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFdyYXAgdGhlIGdpdmVuIFtyYW5nZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVSYW5nZSkgaW4gdGhlIGdpdmVuIHNldCBvZiB3cmFwcGVycy5cbiAgICBUaGUgd3JhcHBlcnMgYXJlIGFzc3VtZWQgdG8gYmUgdmFsaWQgaW4gdGhpcyBwb3NpdGlvbiwgYW5kIHNob3VsZFxuICAgIHByb2JhYmx5IGJlIGNvbXB1dGVkIHdpdGggW2BmaW5kV3JhcHBpbmdgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLmZpbmRXcmFwcGluZykuXG4gICAgKi9cbiAgICB3cmFwKHJhbmdlLCB3cmFwcGVycykge1xuICAgICAgICB3cmFwKHRoaXMsIHJhbmdlLCB3cmFwcGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBTZXQgdGhlIHR5cGUgb2YgYWxsIHRleHRibG9ja3MgKHBhcnRseSkgYmV0d2VlbiBgZnJvbWAgYW5kIGB0b2AgdG9cbiAgICB0aGUgZ2l2ZW4gbm9kZSB0eXBlIHdpdGggdGhlIGdpdmVuIGF0dHJpYnV0ZXMuXG4gICAgKi9cbiAgICBzZXRCbG9ja1R5cGUoZnJvbSwgdG8gPSBmcm9tLCB0eXBlLCBhdHRycyA9IG51bGwpIHtcbiAgICAgICAgc2V0QmxvY2tUeXBlKHRoaXMsIGZyb20sIHRvLCB0eXBlLCBhdHRycyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGFuZ2UgdGhlIHR5cGUsIGF0dHJpYnV0ZXMsIGFuZC9vciBtYXJrcyBvZiB0aGUgbm9kZSBhdCBgcG9zYC5cbiAgICBXaGVuIGB0eXBlYCBpc24ndCBnaXZlbiwgdGhlIGV4aXN0aW5nIG5vZGUgdHlwZSBpcyBwcmVzZXJ2ZWQsXG4gICAgKi9cbiAgICBzZXROb2RlTWFya3VwKHBvcywgdHlwZSwgYXR0cnMgPSBudWxsLCBtYXJrcykge1xuICAgICAgICBzZXROb2RlTWFya3VwKHRoaXMsIHBvcywgdHlwZSwgYXR0cnMsIG1hcmtzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFNldCBhIHNpbmdsZSBhdHRyaWJ1dGUgb24gYSBnaXZlbiBub2RlIHRvIGEgbmV3IHZhbHVlLlxuICAgICovXG4gICAgc2V0Tm9kZUF0dHJpYnV0ZShwb3MsIGF0dHIsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3RlcChuZXcgQXR0clN0ZXAocG9zLCBhdHRyLCB2YWx1ZSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQWRkIGEgbWFyayB0byB0aGUgbm9kZSBhdCBwb3NpdGlvbiBgcG9zYC5cbiAgICAqL1xuICAgIGFkZE5vZGVNYXJrKHBvcywgbWFyaykge1xuICAgICAgICB0aGlzLnN0ZXAobmV3IEFkZE5vZGVNYXJrU3RlcChwb3MsIG1hcmspKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlbW92ZSBhIG1hcmsgKG9yIGEgbWFyayBvZiB0aGUgZ2l2ZW4gdHlwZSkgZnJvbSB0aGUgbm9kZSBhdFxuICAgIHBvc2l0aW9uIGBwb3NgLlxuICAgICovXG4gICAgcmVtb3ZlTm9kZU1hcmsocG9zLCBtYXJrKSB7XG4gICAgICAgIGlmICghKG1hcmsgaW5zdGFuY2VvZiBNYXJrKSkge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmRvYy5ub2RlQXQocG9zKTtcbiAgICAgICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk5vIG5vZGUgYXQgcG9zaXRpb24gXCIgKyBwb3MpO1xuICAgICAgICAgICAgbWFyayA9IG1hcmsuaXNJblNldChub2RlLm1hcmtzKTtcbiAgICAgICAgICAgIGlmICghbWFyaylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0ZXAobmV3IFJlbW92ZU5vZGVNYXJrU3RlcChwb3MsIG1hcmspKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFNwbGl0IHRoZSBub2RlIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgYW5kIG9wdGlvbmFsbHksIGlmIGBkZXB0aGAgaXNcbiAgICBncmVhdGVyIHRoYW4gb25lLCBhbnkgbnVtYmVyIG9mIG5vZGVzIGFib3ZlIHRoYXQuIEJ5IGRlZmF1bHQsIHRoZVxuICAgIHBhcnRzIHNwbGl0IG9mZiB3aWxsIGluaGVyaXQgdGhlIG5vZGUgdHlwZSBvZiB0aGUgb3JpZ2luYWwgbm9kZS5cbiAgICBUaGlzIGNhbiBiZSBjaGFuZ2VkIGJ5IHBhc3NpbmcgYW4gYXJyYXkgb2YgdHlwZXMgYW5kIGF0dHJpYnV0ZXMgdG9cbiAgICB1c2UgYWZ0ZXIgdGhlIHNwbGl0LlxuICAgICovXG4gICAgc3BsaXQocG9zLCBkZXB0aCA9IDEsIHR5cGVzQWZ0ZXIpIHtcbiAgICAgICAgc3BsaXQodGhpcywgcG9zLCBkZXB0aCwgdHlwZXNBZnRlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgdGhlIGdpdmVuIG1hcmsgdG8gdGhlIGlubGluZSBjb250ZW50IGJldHdlZW4gYGZyb21gIGFuZCBgdG9gLlxuICAgICovXG4gICAgYWRkTWFyayhmcm9tLCB0bywgbWFyaykge1xuICAgICAgICBhZGRNYXJrKHRoaXMsIGZyb20sIHRvLCBtYXJrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlbW92ZSBtYXJrcyBmcm9tIGlubGluZSBub2RlcyBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYC4gV2hlblxuICAgIGBtYXJrYCBpcyBhIHNpbmdsZSBtYXJrLCByZW1vdmUgcHJlY2lzZWx5IHRoYXQgbWFyay4gV2hlbiBpdCBpc1xuICAgIGEgbWFyayB0eXBlLCByZW1vdmUgYWxsIG1hcmtzIG9mIHRoYXQgdHlwZS4gV2hlbiBpdCBpcyBudWxsLFxuICAgIHJlbW92ZSBhbGwgbWFya3Mgb2YgYW55IHR5cGUuXG4gICAgKi9cbiAgICByZW1vdmVNYXJrKGZyb20sIHRvLCBtYXJrKSB7XG4gICAgICAgIHJlbW92ZU1hcmsodGhpcywgZnJvbSwgdG8sIG1hcmspO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlcyBhbGwgbWFya3MgYW5kIG5vZGVzIGZyb20gdGhlIGNvbnRlbnQgb2YgdGhlIG5vZGUgYXRcbiAgICBgcG9zYCB0aGF0IGRvbid0IG1hdGNoIHRoZSBnaXZlbiBuZXcgcGFyZW50IG5vZGUgdHlwZS4gQWNjZXB0c1xuICAgIGFuIG9wdGlvbmFsIHN0YXJ0aW5nIFtjb250ZW50IG1hdGNoXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuQ29udGVudE1hdGNoKSBhc1xuICAgIHRoaXJkIGFyZ3VtZW50LlxuICAgICovXG4gICAgY2xlYXJJbmNvbXBhdGlibGUocG9zLCBwYXJlbnRUeXBlLCBtYXRjaCkge1xuICAgICAgICBjbGVhckluY29tcGF0aWJsZSh0aGlzLCBwb3MsIHBhcmVudFR5cGUsIG1hdGNoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5leHBvcnQgeyBBZGRNYXJrU3RlcCwgQWRkTm9kZU1hcmtTdGVwLCBBdHRyU3RlcCwgTWFwUmVzdWx0LCBNYXBwaW5nLCBSZW1vdmVNYXJrU3RlcCwgUmVtb3ZlTm9kZU1hcmtTdGVwLCBSZXBsYWNlQXJvdW5kU3RlcCwgUmVwbGFjZVN0ZXAsIFN0ZXAsIFN0ZXBNYXAsIFN0ZXBSZXN1bHQsIFRyYW5zZm9ybSwgVHJhbnNmb3JtRXJyb3IsIGNhbkpvaW4sIGNhblNwbGl0LCBkcm9wUG9pbnQsIGZpbmRXcmFwcGluZywgaW5zZXJ0UG9pbnQsIGpvaW5Qb2ludCwgbGlmdFRhcmdldCwgcmVwbGFjZVN0ZXAgfTtcbiIsImltcG9ydCB7IFNsaWNlLCBGcmFnbWVudCwgTWFyaywgTm9kZSB9IGZyb20gJ3Byb3NlbWlycm9yLW1vZGVsJztcbmltcG9ydCB7IFJlcGxhY2VTdGVwLCBSZXBsYWNlQXJvdW5kU3RlcCwgVHJhbnNmb3JtIH0gZnJvbSAncHJvc2VtaXJyb3ItdHJhbnNmb3JtJztcblxuY29uc3QgY2xhc3Nlc0J5SWQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqXG5TdXBlcmNsYXNzIGZvciBlZGl0b3Igc2VsZWN0aW9ucy4gRXZlcnkgc2VsZWN0aW9uIHR5cGUgc2hvdWxkXG5leHRlbmQgdGhpcy4gU2hvdWxkIG5vdCBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXG4qL1xuY2xhc3MgU2VsZWN0aW9uIHtcbiAgICAvKipcbiAgICBJbml0aWFsaXplIGEgc2VsZWN0aW9uIHdpdGggdGhlIGhlYWQgYW5kIGFuY2hvciBhbmQgcmFuZ2VzLiBJZiBub1xuICAgIHJhbmdlcyBhcmUgZ2l2ZW4sIGNvbnN0cnVjdHMgYSBzaW5nbGUgcmFuZ2UgYWNyb3NzIGAkYW5jaG9yYCBhbmRcbiAgICBgJGhlYWRgLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHJlc29sdmVkIGFuY2hvciBvZiB0aGUgc2VsZWN0aW9uICh0aGUgc2lkZSB0aGF0IHN0YXlzIGluXG4gICAgcGxhY2Ugd2hlbiB0aGUgc2VsZWN0aW9uIGlzIG1vZGlmaWVkKS5cbiAgICAqL1xuICAgICRhbmNob3IsIFxuICAgIC8qKlxuICAgIFRoZSByZXNvbHZlZCBoZWFkIG9mIHRoZSBzZWxlY3Rpb24gKHRoZSBzaWRlIHRoYXQgbW92ZXMgd2hlblxuICAgIHRoZSBzZWxlY3Rpb24gaXMgbW9kaWZpZWQpLlxuICAgICovXG4gICAgJGhlYWQsIHJhbmdlcykge1xuICAgICAgICB0aGlzLiRhbmNob3IgPSAkYW5jaG9yO1xuICAgICAgICB0aGlzLiRoZWFkID0gJGhlYWQ7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzIHx8IFtuZXcgU2VsZWN0aW9uUmFuZ2UoJGFuY2hvci5taW4oJGhlYWQpLCAkYW5jaG9yLm1heCgkaGVhZCkpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHNlbGVjdGlvbidzIGFuY2hvciwgYXMgYW4gdW5yZXNvbHZlZCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGdldCBhbmNob3IoKSB7IHJldHVybiB0aGlzLiRhbmNob3IucG9zOyB9XG4gICAgLyoqXG4gICAgVGhlIHNlbGVjdGlvbidzIGhlYWQuXG4gICAgKi9cbiAgICBnZXQgaGVhZCgpIHsgcmV0dXJuIHRoaXMuJGhlYWQucG9zOyB9XG4gICAgLyoqXG4gICAgVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBzZWxlY3Rpb24ncyBtYWluIHJhbmdlLlxuICAgICovXG4gICAgZ2V0IGZyb20oKSB7IHJldHVybiB0aGlzLiRmcm9tLnBvczsgfVxuICAgIC8qKlxuICAgIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgc2VsZWN0aW9uJ3MgbWFpbiByYW5nZS5cbiAgICAqL1xuICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuJHRvLnBvczsgfVxuICAgIC8qKlxuICAgIFRoZSByZXNvbHZlZCBsb3dlciAgYm91bmQgb2YgdGhlIHNlbGVjdGlvbidzIG1haW4gcmFuZ2UuXG4gICAgKi9cbiAgICBnZXQgJGZyb20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlc1swXS4kZnJvbTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHJlc29sdmVkIHVwcGVyIGJvdW5kIG9mIHRoZSBzZWxlY3Rpb24ncyBtYWluIHJhbmdlLlxuICAgICovXG4gICAgZ2V0ICR0bygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFuZ2VzWzBdLiR0bztcbiAgICB9XG4gICAgLyoqXG4gICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBjb250YWlucyBhbnkgY29udGVudC5cbiAgICAqL1xuICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgbGV0IHJhbmdlcyA9IHRoaXMucmFuZ2VzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChyYW5nZXNbaV0uJGZyb20ucG9zICE9IHJhbmdlc1tpXS4kdG8ucG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY29udGVudCBvZiB0aGlzIHNlbGVjdGlvbiBhcyBhIHNsaWNlLlxuICAgICovXG4gICAgY29udGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGZyb20uZG9jLnNsaWNlKHRoaXMuZnJvbSwgdGhpcy50bywgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcGxhY2UgdGhlIHNlbGVjdGlvbiB3aXRoIGEgc2xpY2Ugb3IsIGlmIG5vIHNsaWNlIGlzIGdpdmVuLFxuICAgIGRlbGV0ZSB0aGUgc2VsZWN0aW9uLiBXaWxsIGFwcGVuZCB0byB0aGUgZ2l2ZW4gdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICByZXBsYWNlKHRyLCBjb250ZW50ID0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgLy8gUHV0IHRoZSBuZXcgc2VsZWN0aW9uIGF0IHRoZSBwb3NpdGlvbiBhZnRlciB0aGUgaW5zZXJ0ZWRcbiAgICAgICAgLy8gY29udGVudC4gV2hlbiB0aGF0IGVuZGVkIGluIGFuIGlubGluZSBub2RlLCBzZWFyY2ggYmFja3dhcmRzLFxuICAgICAgICAvLyB0byBnZXQgdGhlIHBvc2l0aW9uIGFmdGVyIHRoYXQgbm9kZS4gSWYgbm90LCBzZWFyY2ggZm9yd2FyZC5cbiAgICAgICAgbGV0IGxhc3ROb2RlID0gY29udGVudC5jb250ZW50Lmxhc3RDaGlsZCwgbGFzdFBhcmVudCA9IG51bGw7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudC5vcGVuRW5kOyBpKyspIHtcbiAgICAgICAgICAgIGxhc3RQYXJlbnQgPSBsYXN0Tm9kZTtcbiAgICAgICAgICAgIGxhc3ROb2RlID0gbGFzdE5vZGUubGFzdENoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtYXBGcm9tID0gdHIuc3RlcHMubGVuZ3RoLCByYW5nZXMgPSB0aGlzLnJhbmdlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHJhbmdlc1tpXSwgbWFwcGluZyA9IHRyLm1hcHBpbmcuc2xpY2UobWFwRnJvbSk7XG4gICAgICAgICAgICB0ci5yZXBsYWNlUmFuZ2UobWFwcGluZy5tYXAoJGZyb20ucG9zKSwgbWFwcGluZy5tYXAoJHRvLnBvcyksIGkgPyBTbGljZS5lbXB0eSA6IGNvbnRlbnQpO1xuICAgICAgICAgICAgaWYgKGkgPT0gMClcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25Ub0luc2VydGlvbkVuZCh0ciwgbWFwRnJvbSwgKGxhc3ROb2RlID8gbGFzdE5vZGUuaXNJbmxpbmUgOiBsYXN0UGFyZW50ICYmIGxhc3RQYXJlbnQuaXNUZXh0YmxvY2spID8gLTEgOiAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gbm9kZSwgYXBwZW5kaW5nIHRoZSBjaGFuZ2VzXG4gICAgdG8gdGhlIGdpdmVuIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgcmVwbGFjZVdpdGgodHIsIG5vZGUpIHtcbiAgICAgICAgbGV0IG1hcEZyb20gPSB0ci5zdGVwcy5sZW5ndGgsIHJhbmdlcyA9IHRoaXMucmFuZ2VzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgJGZyb20sICR0byB9ID0gcmFuZ2VzW2ldLCBtYXBwaW5nID0gdHIubWFwcGluZy5zbGljZShtYXBGcm9tKTtcbiAgICAgICAgICAgIGxldCBmcm9tID0gbWFwcGluZy5tYXAoJGZyb20ucG9zKSwgdG8gPSBtYXBwaW5nLm1hcCgkdG8ucG9zKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgdHIuZGVsZXRlUmFuZ2UoZnJvbSwgdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHIucmVwbGFjZVJhbmdlV2l0aChmcm9tLCB0bywgbm9kZSk7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uVG9JbnNlcnRpb25FbmQodHIsIG1hcEZyb20sIG5vZGUuaXNJbmxpbmUgPyAtMSA6IDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgYSB2YWxpZCBjdXJzb3Igb3IgbGVhZiBub2RlIHNlbGVjdGlvbiBzdGFydGluZyBhdCB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbiBhbmQgc2VhcmNoaW5nIGJhY2sgaWYgYGRpcmAgaXMgbmVnYXRpdmUsIGFuZCBmb3J3YXJkIGlmXG4gICAgcG9zaXRpdmUuIFdoZW4gYHRleHRPbmx5YCBpcyB0cnVlLCBvbmx5IGNvbnNpZGVyIGN1cnNvclxuICAgIHNlbGVjdGlvbnMuIFdpbGwgcmV0dXJuIG51bGwgd2hlbiBubyB2YWxpZCBzZWxlY3Rpb24gcG9zaXRpb24gaXNcbiAgICBmb3VuZC5cbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kRnJvbSgkcG9zLCBkaXIsIHRleHRPbmx5ID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGlubmVyID0gJHBvcy5wYXJlbnQuaW5saW5lQ29udGVudCA/IG5ldyBUZXh0U2VsZWN0aW9uKCRwb3MpXG4gICAgICAgICAgICA6IGZpbmRTZWxlY3Rpb25JbigkcG9zLm5vZGUoMCksICRwb3MucGFyZW50LCAkcG9zLnBvcywgJHBvcy5pbmRleCgpLCBkaXIsIHRleHRPbmx5KTtcbiAgICAgICAgaWYgKGlubmVyKVxuICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICBmb3IgKGxldCBkZXB0aCA9ICRwb3MuZGVwdGggLSAxOyBkZXB0aCA+PSAwOyBkZXB0aC0tKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBkaXIgPCAwXG4gICAgICAgICAgICAgICAgPyBmaW5kU2VsZWN0aW9uSW4oJHBvcy5ub2RlKDApLCAkcG9zLm5vZGUoZGVwdGgpLCAkcG9zLmJlZm9yZShkZXB0aCArIDEpLCAkcG9zLmluZGV4KGRlcHRoKSwgZGlyLCB0ZXh0T25seSlcbiAgICAgICAgICAgICAgICA6IGZpbmRTZWxlY3Rpb25JbigkcG9zLm5vZGUoMCksICRwb3Mubm9kZShkZXB0aCksICRwb3MuYWZ0ZXIoZGVwdGggKyAxKSwgJHBvcy5pbmRleChkZXB0aCkgKyAxLCBkaXIsIHRleHRPbmx5KTtcbiAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgYSB2YWxpZCBjdXJzb3Igb3IgbGVhZiBub2RlIHNlbGVjdGlvbiBuZWFyIHRoZSBnaXZlblxuICAgIHBvc2l0aW9uLiBTZWFyY2hlcyBmb3J3YXJkIGZpcnN0IGJ5IGRlZmF1bHQsIGJ1dCBpZiBgYmlhc2AgaXNcbiAgICBuZWdhdGl2ZSwgaXQgd2lsbCBzZWFyY2ggYmFja3dhcmRzIGZpcnN0LlxuICAgICovXG4gICAgc3RhdGljIG5lYXIoJHBvcywgYmlhcyA9IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZEZyb20oJHBvcywgYmlhcykgfHwgdGhpcy5maW5kRnJvbSgkcG9zLCAtYmlhcykgfHwgbmV3IEFsbFNlbGVjdGlvbigkcG9zLm5vZGUoMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBjdXJzb3Igb3IgbGVhZiBub2RlIHNlbGVjdGlvbiBjbG9zZXN0IHRvIHRoZSBzdGFydCBvZlxuICAgIHRoZSBnaXZlbiBkb2N1bWVudC4gV2lsbCByZXR1cm4gYW5cbiAgICBbYEFsbFNlbGVjdGlvbmBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5BbGxTZWxlY3Rpb24pIGlmIG5vIHZhbGlkIHBvc2l0aW9uXG4gICAgZXhpc3RzLlxuICAgICovXG4gICAgc3RhdGljIGF0U3RhcnQoZG9jKSB7XG4gICAgICAgIHJldHVybiBmaW5kU2VsZWN0aW9uSW4oZG9jLCBkb2MsIDAsIDAsIDEpIHx8IG5ldyBBbGxTZWxlY3Rpb24oZG9jKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgY3Vyc29yIG9yIGxlYWYgbm9kZSBzZWxlY3Rpb24gY2xvc2VzdCB0byB0aGUgZW5kIG9mIHRoZVxuICAgIGdpdmVuIGRvY3VtZW50LlxuICAgICovXG4gICAgc3RhdGljIGF0RW5kKGRvYykge1xuICAgICAgICByZXR1cm4gZmluZFNlbGVjdGlvbkluKGRvYywgZG9jLCBkb2MuY29udGVudC5zaXplLCBkb2MuY2hpbGRDb3VudCwgLTEpIHx8IG5ldyBBbGxTZWxlY3Rpb24oZG9jKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBzZWxlY3Rpb24uIE11c3QgYmVcbiAgICBpbXBsZW1lbnRlZCBmb3IgY3VzdG9tIGNsYXNzZXMgKGFzIGEgc3RhdGljIGNsYXNzIG1ldGhvZCkuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oZG9jLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbiB8fCAhanNvbi50eXBlKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBTZWxlY3Rpb24uZnJvbUpTT05cIik7XG4gICAgICAgIGxldCBjbHMgPSBjbGFzc2VzQnlJZFtqc29uLnR5cGVdO1xuICAgICAgICBpZiAoIWNscylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBObyBzZWxlY3Rpb24gdHlwZSAke2pzb24udHlwZX0gZGVmaW5lZGApO1xuICAgICAgICByZXR1cm4gY2xzLmZyb21KU09OKGRvYywganNvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIFRvIGJlIGFibGUgdG8gZGVzZXJpYWxpemUgc2VsZWN0aW9ucyBmcm9tIEpTT04sIGN1c3RvbSBzZWxlY3Rpb25cbiAgICBjbGFzc2VzIG11c3QgcmVnaXN0ZXIgdGhlbXNlbHZlcyB3aXRoIGFuIElEIHN0cmluZywgc28gdGhhdCB0aGV5XG4gICAgY2FuIGJlIGRpc2FtYmlndWF0ZWQuIFRyeSB0byBwaWNrIHNvbWV0aGluZyB0aGF0J3MgdW5saWtlbHkgdG9cbiAgICBjbGFzaCB3aXRoIGNsYXNzZXMgZnJvbSBvdGhlciBtb2R1bGVzLlxuICAgICovXG4gICAgc3RhdGljIGpzb25JRChpZCwgc2VsZWN0aW9uQ2xhc3MpIHtcbiAgICAgICAgaWYgKGlkIGluIGNsYXNzZXNCeUlkKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJEdXBsaWNhdGUgdXNlIG9mIHNlbGVjdGlvbiBKU09OIElEIFwiICsgaWQpO1xuICAgICAgICBjbGFzc2VzQnlJZFtpZF0gPSBzZWxlY3Rpb25DbGFzcztcbiAgICAgICAgc2VsZWN0aW9uQ2xhc3MucHJvdG90eXBlLmpzb25JRCA9IGlkO1xuICAgICAgICByZXR1cm4gc2VsZWN0aW9uQ2xhc3M7XG4gICAgfVxuICAgIC8qKlxuICAgIEdldCBhIFtib29rbWFya10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlNlbGVjdGlvbkJvb2ttYXJrKSBmb3IgdGhpcyBzZWxlY3Rpb24sXG4gICAgd2hpY2ggaXMgYSB2YWx1ZSB0aGF0IGNhbiBiZSBtYXBwZWQgd2l0aG91dCBoYXZpbmcgYWNjZXNzIHRvIGFcbiAgICBjdXJyZW50IGRvY3VtZW50LCBhbmQgbGF0ZXIgcmVzb2x2ZWQgdG8gYSByZWFsIHNlbGVjdGlvbiBmb3IgYVxuICAgIGdpdmVuIGRvY3VtZW50IGFnYWluLiAoVGhpcyBpcyB1c2VkIG1vc3RseSBieSB0aGUgaGlzdG9yeSB0b1xuICAgIHRyYWNrIGFuZCByZXN0b3JlIG9sZCBzZWxlY3Rpb25zLikgVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2ZcbiAgICB0aGlzIG1ldGhvZCBqdXN0IGNvbnZlcnRzIHRoZSBzZWxlY3Rpb24gdG8gYSB0ZXh0IHNlbGVjdGlvbiBhbmRcbiAgICByZXR1cm5zIHRoZSBib29rbWFyayBmb3IgdGhhdC5cbiAgICAqL1xuICAgIGdldEJvb2ttYXJrKCkge1xuICAgICAgICByZXR1cm4gVGV4dFNlbGVjdGlvbi5iZXR3ZWVuKHRoaXMuJGFuY2hvciwgdGhpcy4kaGVhZCkuZ2V0Qm9va21hcmsoKTtcbiAgICB9XG59XG5TZWxlY3Rpb24ucHJvdG90eXBlLnZpc2libGUgPSB0cnVlO1xuLyoqXG5SZXByZXNlbnRzIGEgc2VsZWN0ZWQgcmFuZ2UgaW4gYSBkb2N1bWVudC5cbiovXG5jbGFzcyBTZWxlY3Rpb25SYW5nZSB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcmFuZ2UuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbG93ZXIgYm91bmQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgJGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgcmFuZ2UuXG4gICAgKi9cbiAgICAkdG8pIHtcbiAgICAgICAgdGhpcy4kZnJvbSA9ICRmcm9tO1xuICAgICAgICB0aGlzLiR0byA9ICR0bztcbiAgICB9XG59XG5sZXQgd2FybmVkQWJvdXRUZXh0U2VsZWN0aW9uID0gZmFsc2U7XG5mdW5jdGlvbiBjaGVja1RleHRTZWxlY3Rpb24oJHBvcykge1xuICAgIGlmICghd2FybmVkQWJvdXRUZXh0U2VsZWN0aW9uICYmICEkcG9zLnBhcmVudC5pbmxpbmVDb250ZW50KSB7XG4gICAgICAgIHdhcm5lZEFib3V0VGV4dFNlbGVjdGlvbiA9IHRydWU7XG4gICAgICAgIGNvbnNvbGVbXCJ3YXJuXCJdKFwiVGV4dFNlbGVjdGlvbiBlbmRwb2ludCBub3QgcG9pbnRpbmcgaW50byBhIG5vZGUgd2l0aCBpbmxpbmUgY29udGVudCAoXCIgKyAkcG9zLnBhcmVudC50eXBlLm5hbWUgKyBcIilcIik7XG4gICAgfVxufVxuLyoqXG5BIHRleHQgc2VsZWN0aW9uIHJlcHJlc2VudHMgYSBjbGFzc2ljYWwgZWRpdG9yIHNlbGVjdGlvbiwgd2l0aCBhXG5oZWFkICh0aGUgbW92aW5nIHNpZGUpIGFuZCBhbmNob3IgKGltbW9iaWxlIHNpZGUpLCBib3RoIG9mIHdoaWNoXG5wb2ludCBpbnRvIHRleHRibG9jayBub2Rlcy4gSXQgY2FuIGJlIGVtcHR5IChhIHJlZ3VsYXIgY3Vyc29yXG5wb3NpdGlvbikuXG4qL1xuY2xhc3MgVGV4dFNlbGVjdGlvbiBleHRlbmRzIFNlbGVjdGlvbiB7XG4gICAgLyoqXG4gICAgQ29uc3RydWN0IGEgdGV4dCBzZWxlY3Rpb24gYmV0d2VlbiB0aGUgZ2l2ZW4gcG9pbnRzLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoJGFuY2hvciwgJGhlYWQgPSAkYW5jaG9yKSB7XG4gICAgICAgIGNoZWNrVGV4dFNlbGVjdGlvbigkYW5jaG9yKTtcbiAgICAgICAgY2hlY2tUZXh0U2VsZWN0aW9uKCRoZWFkKTtcbiAgICAgICAgc3VwZXIoJGFuY2hvciwgJGhlYWQpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIGEgcmVzb2x2ZWQgcG9zaXRpb24gaWYgdGhpcyBpcyBhIGN1cnNvciBzZWxlY3Rpb24gKGFuXG4gICAgZW1wdHkgdGV4dCBzZWxlY3Rpb24pLCBhbmQgbnVsbCBvdGhlcndpc2UuXG4gICAgKi9cbiAgICBnZXQgJGN1cnNvcigpIHsgcmV0dXJuIHRoaXMuJGFuY2hvci5wb3MgPT0gdGhpcy4kaGVhZC5wb3MgPyB0aGlzLiRoZWFkIDogbnVsbDsgfVxuICAgIG1hcChkb2MsIG1hcHBpbmcpIHtcbiAgICAgICAgbGV0ICRoZWFkID0gZG9jLnJlc29sdmUobWFwcGluZy5tYXAodGhpcy5oZWFkKSk7XG4gICAgICAgIGlmICghJGhlYWQucGFyZW50LmlubGluZUNvbnRlbnQpXG4gICAgICAgICAgICByZXR1cm4gU2VsZWN0aW9uLm5lYXIoJGhlYWQpO1xuICAgICAgICBsZXQgJGFuY2hvciA9IGRvYy5yZXNvbHZlKG1hcHBpbmcubWFwKHRoaXMuYW5jaG9yKSk7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dFNlbGVjdGlvbigkYW5jaG9yLnBhcmVudC5pbmxpbmVDb250ZW50ID8gJGFuY2hvciA6ICRoZWFkLCAkaGVhZCk7XG4gICAgfVxuICAgIHJlcGxhY2UodHIsIGNvbnRlbnQgPSBTbGljZS5lbXB0eSkge1xuICAgICAgICBzdXBlci5yZXBsYWNlKHRyLCBjb250ZW50KTtcbiAgICAgICAgaWYgKGNvbnRlbnQgPT0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgICAgIGxldCBtYXJrcyA9IHRoaXMuJGZyb20ubWFya3NBY3Jvc3ModGhpcy4kdG8pO1xuICAgICAgICAgICAgaWYgKG1hcmtzKVxuICAgICAgICAgICAgICAgIHRyLmVuc3VyZU1hcmtzKG1hcmtzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBUZXh0U2VsZWN0aW9uICYmIG90aGVyLmFuY2hvciA9PSB0aGlzLmFuY2hvciAmJiBvdGhlci5oZWFkID09IHRoaXMuaGVhZDtcbiAgICB9XG4gICAgZ2V0Qm9va21hcmsoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dEJvb2ttYXJrKHRoaXMuYW5jaG9yLCB0aGlzLmhlYWQpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwidGV4dFwiLCBhbmNob3I6IHRoaXMuYW5jaG9yLCBoZWFkOiB0aGlzLmhlYWQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oZG9jLCBqc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YganNvbi5hbmNob3IgIT0gXCJudW1iZXJcIiB8fCB0eXBlb2YganNvbi5oZWFkICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIFRleHRTZWxlY3Rpb24uZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dFNlbGVjdGlvbihkb2MucmVzb2x2ZShqc29uLmFuY2hvciksIGRvYy5yZXNvbHZlKGpzb24uaGVhZCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSB0ZXh0IHNlbGVjdGlvbiBmcm9tIG5vbi1yZXNvbHZlZCBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRvYywgYW5jaG9yLCBoZWFkID0gYW5jaG9yKSB7XG4gICAgICAgIGxldCAkYW5jaG9yID0gZG9jLnJlc29sdmUoYW5jaG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKCRhbmNob3IsIGhlYWQgPT0gYW5jaG9yID8gJGFuY2hvciA6IGRvYy5yZXNvbHZlKGhlYWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgdGV4dCBzZWxlY3Rpb24gdGhhdCBzcGFucyB0aGUgZ2l2ZW4gcG9zaXRpb25zIG9yLCBpZlxuICAgIHRoZXkgYXJlbid0IHRleHQgcG9zaXRpb25zLCBmaW5kIGEgdGV4dCBzZWxlY3Rpb24gbmVhciB0aGVtLlxuICAgIGBiaWFzYCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIG1ldGhvZCBzZWFyY2hlcyBmb3J3YXJkIChkZWZhdWx0KVxuICAgIG9yIGJhY2t3YXJkcyAobmVnYXRpdmUgbnVtYmVyKSBmaXJzdC4gV2lsbCBmYWxsIGJhY2sgdG8gY2FsbGluZ1xuICAgIFtgU2VsZWN0aW9uLm5lYXJgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uXm5lYXIpIHdoZW4gdGhlIGRvY3VtZW50XG4gICAgZG9lc24ndCBjb250YWluIGEgdmFsaWQgdGV4dCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBiZXR3ZWVuKCRhbmNob3IsICRoZWFkLCBiaWFzKSB7XG4gICAgICAgIGxldCBkUG9zID0gJGFuY2hvci5wb3MgLSAkaGVhZC5wb3M7XG4gICAgICAgIGlmICghYmlhcyB8fCBkUG9zKVxuICAgICAgICAgICAgYmlhcyA9IGRQb3MgPj0gMCA/IDEgOiAtMTtcbiAgICAgICAgaWYgKCEkaGVhZC5wYXJlbnQuaW5saW5lQ29udGVudCkge1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gU2VsZWN0aW9uLmZpbmRGcm9tKCRoZWFkLCBiaWFzLCB0cnVlKSB8fCBTZWxlY3Rpb24uZmluZEZyb20oJGhlYWQsIC1iaWFzLCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChmb3VuZClcbiAgICAgICAgICAgICAgICAkaGVhZCA9IGZvdW5kLiRoZWFkO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBTZWxlY3Rpb24ubmVhcigkaGVhZCwgYmlhcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkYW5jaG9yLnBhcmVudC5pbmxpbmVDb250ZW50KSB7XG4gICAgICAgICAgICBpZiAoZFBvcyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgJGFuY2hvciA9ICRoZWFkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJGFuY2hvciA9IChTZWxlY3Rpb24uZmluZEZyb20oJGFuY2hvciwgLWJpYXMsIHRydWUpIHx8IFNlbGVjdGlvbi5maW5kRnJvbSgkYW5jaG9yLCBiaWFzLCB0cnVlKSkuJGFuY2hvcjtcbiAgICAgICAgICAgICAgICBpZiAoKCRhbmNob3IucG9zIDwgJGhlYWQucG9zKSAhPSAoZFBvcyA8IDApKVxuICAgICAgICAgICAgICAgICAgICAkYW5jaG9yID0gJGhlYWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0U2VsZWN0aW9uKCRhbmNob3IsICRoZWFkKTtcbiAgICB9XG59XG5TZWxlY3Rpb24uanNvbklEKFwidGV4dFwiLCBUZXh0U2VsZWN0aW9uKTtcbmNsYXNzIFRleHRCb29rbWFyayB7XG4gICAgY29uc3RydWN0b3IoYW5jaG9yLCBoZWFkKSB7XG4gICAgICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yO1xuICAgICAgICB0aGlzLmhlYWQgPSBoZWFkO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRCb29rbWFyayhtYXBwaW5nLm1hcCh0aGlzLmFuY2hvciksIG1hcHBpbmcubWFwKHRoaXMuaGVhZCkpO1xuICAgIH1cbiAgICByZXNvbHZlKGRvYykge1xuICAgICAgICByZXR1cm4gVGV4dFNlbGVjdGlvbi5iZXR3ZWVuKGRvYy5yZXNvbHZlKHRoaXMuYW5jaG9yKSwgZG9jLnJlc29sdmUodGhpcy5oZWFkKSk7XG4gICAgfVxufVxuLyoqXG5BIG5vZGUgc2VsZWN0aW9uIGlzIGEgc2VsZWN0aW9uIHRoYXQgcG9pbnRzIGF0IGEgc2luZ2xlIG5vZGUuIEFsbFxubm9kZXMgbWFya2VkIFtzZWxlY3RhYmxlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuc2VsZWN0YWJsZSkgY2FuIGJlIHRoZVxudGFyZ2V0IG9mIGEgbm9kZSBzZWxlY3Rpb24uIEluIHN1Y2ggYSBzZWxlY3Rpb24sIGBmcm9tYCBhbmQgYHRvYFxucG9pbnQgZGlyZWN0bHkgYmVmb3JlIGFuZCBhZnRlciB0aGUgc2VsZWN0ZWQgbm9kZSwgYGFuY2hvcmAgZXF1YWxzXG5gZnJvbWAsIGFuZCBgaGVhZGAgZXF1YWxzIGB0b2AuLlxuKi9cbmNsYXNzIE5vZGVTZWxlY3Rpb24gZXh0ZW5kcyBTZWxlY3Rpb24ge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5vZGUgc2VsZWN0aW9uLiBEb2VzIG5vdCB2ZXJpZnkgdGhlIHZhbGlkaXR5IG9mIGl0c1xuICAgIGFyZ3VtZW50LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoJHBvcykge1xuICAgICAgICBsZXQgbm9kZSA9ICRwb3Mubm9kZUFmdGVyO1xuICAgICAgICBsZXQgJGVuZCA9ICRwb3Mubm9kZSgwKS5yZXNvbHZlKCRwb3MucG9zICsgbm9kZS5ub2RlU2l6ZSk7XG4gICAgICAgIHN1cGVyKCRwb3MsICRlbmQpO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgIH1cbiAgICBtYXAoZG9jLCBtYXBwaW5nKSB7XG4gICAgICAgIGxldCB7IGRlbGV0ZWQsIHBvcyB9ID0gbWFwcGluZy5tYXBSZXN1bHQodGhpcy5hbmNob3IpO1xuICAgICAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHBvcyk7XG4gICAgICAgIGlmIChkZWxldGVkKVxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdGlvbi5uZWFyKCRwb3MpO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24oJHBvcyk7XG4gICAgfVxuICAgIGNvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbSh0aGlzLm5vZGUpLCAwLCAwKTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbiAmJiBvdGhlci5hbmNob3IgPT0gdGhpcy5hbmNob3I7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogXCJub2RlXCIsIGFuY2hvcjogdGhpcy5hbmNob3IgfTtcbiAgICB9XG4gICAgZ2V0Qm9va21hcmsoKSB7IHJldHVybiBuZXcgTm9kZUJvb2ttYXJrKHRoaXMuYW5jaG9yKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGRvYywganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uYW5jaG9yICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIE5vZGVTZWxlY3Rpb24uZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZVNlbGVjdGlvbihkb2MucmVzb2x2ZShqc29uLmFuY2hvcikpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBub2RlIHNlbGVjdGlvbiBmcm9tIG5vbi1yZXNvbHZlZCBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRvYywgZnJvbSkge1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24oZG9jLnJlc29sdmUoZnJvbSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG5vZGUgbWF5IGJlIHNlbGVjdGVkIGFzIGEgbm9kZVxuICAgIHNlbGVjdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyBpc1NlbGVjdGFibGUobm9kZSkge1xuICAgICAgICByZXR1cm4gIW5vZGUuaXNUZXh0ICYmIG5vZGUudHlwZS5zcGVjLnNlbGVjdGFibGUgIT09IGZhbHNlO1xuICAgIH1cbn1cbk5vZGVTZWxlY3Rpb24ucHJvdG90eXBlLnZpc2libGUgPSBmYWxzZTtcblNlbGVjdGlvbi5qc29uSUQoXCJub2RlXCIsIE5vZGVTZWxlY3Rpb24pO1xuY2xhc3MgTm9kZUJvb2ttYXJrIHtcbiAgICBjb25zdHJ1Y3RvcihhbmNob3IpIHtcbiAgICAgICAgdGhpcy5hbmNob3IgPSBhbmNob3I7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGxldCB7IGRlbGV0ZWQsIHBvcyB9ID0gbWFwcGluZy5tYXBSZXN1bHQodGhpcy5hbmNob3IpO1xuICAgICAgICByZXR1cm4gZGVsZXRlZCA/IG5ldyBUZXh0Qm9va21hcmsocG9zLCBwb3MpIDogbmV3IE5vZGVCb29rbWFyayhwb3MpO1xuICAgIH1cbiAgICByZXNvbHZlKGRvYykge1xuICAgICAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHRoaXMuYW5jaG9yKSwgbm9kZSA9ICRwb3Mubm9kZUFmdGVyO1xuICAgICAgICBpZiAobm9kZSAmJiBOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShub2RlKSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9kZVNlbGVjdGlvbigkcG9zKTtcbiAgICAgICAgcmV0dXJuIFNlbGVjdGlvbi5uZWFyKCRwb3MpO1xuICAgIH1cbn1cbi8qKlxuQSBzZWxlY3Rpb24gdHlwZSB0aGF0IHJlcHJlc2VudHMgc2VsZWN0aW5nIHRoZSB3aG9sZSBkb2N1bWVudFxuKHdoaWNoIGNhbiBub3QgbmVjZXNzYXJpbHkgYmUgZXhwcmVzc2VkIHdpdGggYSB0ZXh0IHNlbGVjdGlvbiwgd2hlblxudGhlcmUgYXJlIGZvciBleGFtcGxlIGxlYWYgYmxvY2sgbm9kZXMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiB0aGVcbmRvY3VtZW50KS5cbiovXG5jbGFzcyBBbGxTZWxlY3Rpb24gZXh0ZW5kcyBTZWxlY3Rpb24ge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBhbGwtc2VsZWN0aW9uIG92ZXIgdGhlIGdpdmVuIGRvY3VtZW50LlxuICAgICovXG4gICAgY29uc3RydWN0b3IoZG9jKSB7XG4gICAgICAgIHN1cGVyKGRvYy5yZXNvbHZlKDApLCBkb2MucmVzb2x2ZShkb2MuY29udGVudC5zaXplKSk7XG4gICAgfVxuICAgIHJlcGxhY2UodHIsIGNvbnRlbnQgPSBTbGljZS5lbXB0eSkge1xuICAgICAgICBpZiAoY29udGVudCA9PSBTbGljZS5lbXB0eSkge1xuICAgICAgICAgICAgdHIuZGVsZXRlKDAsIHRyLmRvYy5jb250ZW50LnNpemUpO1xuICAgICAgICAgICAgbGV0IHNlbCA9IFNlbGVjdGlvbi5hdFN0YXJ0KHRyLmRvYyk7XG4gICAgICAgICAgICBpZiAoIXNlbC5lcSh0ci5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgICAgIHRyLnNldFNlbGVjdGlvbihzZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIucmVwbGFjZSh0ciwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9KU09OKCkgeyByZXR1cm4geyB0eXBlOiBcImFsbFwiIH07IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihkb2MpIHsgcmV0dXJuIG5ldyBBbGxTZWxlY3Rpb24oZG9jKTsgfVxuICAgIG1hcChkb2MpIHsgcmV0dXJuIG5ldyBBbGxTZWxlY3Rpb24oZG9jKTsgfVxuICAgIGVxKG90aGVyKSB7IHJldHVybiBvdGhlciBpbnN0YW5jZW9mIEFsbFNlbGVjdGlvbjsgfVxuICAgIGdldEJvb2ttYXJrKCkgeyByZXR1cm4gQWxsQm9va21hcms7IH1cbn1cblNlbGVjdGlvbi5qc29uSUQoXCJhbGxcIiwgQWxsU2VsZWN0aW9uKTtcbmNvbnN0IEFsbEJvb2ttYXJrID0ge1xuICAgIG1hcCgpIHsgcmV0dXJuIHRoaXM7IH0sXG4gICAgcmVzb2x2ZShkb2MpIHsgcmV0dXJuIG5ldyBBbGxTZWxlY3Rpb24oZG9jKTsgfVxufTtcbi8vIEZJWE1FIHdlJ2xsIG5lZWQgc29tZSBhd2FyZW5lc3Mgb2YgdGV4dCBkaXJlY3Rpb24gd2hlbiBzY2FubmluZyBmb3Igc2VsZWN0aW9uc1xuLy8gVHJ5IHRvIGZpbmQgYSBzZWxlY3Rpb24gaW5zaWRlIHRoZSBnaXZlbiBub2RlLiBgcG9zYCBwb2ludHMgYXQgdGhlXG4vLyBwb3NpdGlvbiB3aGVyZSB0aGUgc2VhcmNoIHN0YXJ0cy4gV2hlbiBgdGV4dGAgaXMgdHJ1ZSwgb25seSByZXR1cm5cbi8vIHRleHQgc2VsZWN0aW9ucy5cbmZ1bmN0aW9uIGZpbmRTZWxlY3Rpb25Jbihkb2MsIG5vZGUsIHBvcywgaW5kZXgsIGRpciwgdGV4dCA9IGZhbHNlKSB7XG4gICAgaWYgKG5vZGUuaW5saW5lQ29udGVudClcbiAgICAgICAgcmV0dXJuIFRleHRTZWxlY3Rpb24uY3JlYXRlKGRvYywgcG9zKTtcbiAgICBmb3IgKGxldCBpID0gaW5kZXggLSAoZGlyID4gMCA/IDAgOiAxKTsgZGlyID4gMCA/IGkgPCBub2RlLmNoaWxkQ291bnQgOiBpID49IDA7IGkgKz0gZGlyKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IG5vZGUuY2hpbGQoaSk7XG4gICAgICAgIGlmICghY2hpbGQuaXNBdG9tKSB7XG4gICAgICAgICAgICBsZXQgaW5uZXIgPSBmaW5kU2VsZWN0aW9uSW4oZG9jLCBjaGlsZCwgcG9zICsgZGlyLCBkaXIgPCAwID8gY2hpbGQuY2hpbGRDb3VudCA6IDAsIGRpciwgdGV4dCk7XG4gICAgICAgICAgICBpZiAoaW5uZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0ZXh0ICYmIE5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGNoaWxkKSkge1xuICAgICAgICAgICAgcmV0dXJuIE5vZGVTZWxlY3Rpb24uY3JlYXRlKGRvYywgcG9zIC0gKGRpciA8IDAgPyBjaGlsZC5ub2RlU2l6ZSA6IDApKTtcbiAgICAgICAgfVxuICAgICAgICBwb3MgKz0gY2hpbGQubm9kZVNpemUgKiBkaXI7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gc2VsZWN0aW9uVG9JbnNlcnRpb25FbmQodHIsIHN0YXJ0TGVuLCBiaWFzKSB7XG4gICAgbGV0IGxhc3QgPSB0ci5zdGVwcy5sZW5ndGggLSAxO1xuICAgIGlmIChsYXN0IDwgc3RhcnRMZW4pXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgc3RlcCA9IHRyLnN0ZXBzW2xhc3RdO1xuICAgIGlmICghKHN0ZXAgaW5zdGFuY2VvZiBSZXBsYWNlU3RlcCB8fCBzdGVwIGluc3RhbmNlb2YgUmVwbGFjZUFyb3VuZFN0ZXApKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IG1hcCA9IHRyLm1hcHBpbmcubWFwc1tsYXN0XSwgZW5kO1xuICAgIG1hcC5mb3JFYWNoKChfZnJvbSwgX3RvLCBfbmV3RnJvbSwgbmV3VG8pID0+IHsgaWYgKGVuZCA9PSBudWxsKVxuICAgICAgICBlbmQgPSBuZXdUbzsgfSk7XG4gICAgdHIuc2V0U2VsZWN0aW9uKFNlbGVjdGlvbi5uZWFyKHRyLmRvYy5yZXNvbHZlKGVuZCksIGJpYXMpKTtcbn1cblxuY29uc3QgVVBEQVRFRF9TRUwgPSAxLCBVUERBVEVEX01BUktTID0gMiwgVVBEQVRFRF9TQ1JPTEwgPSA0O1xuLyoqXG5BbiBlZGl0b3Igc3RhdGUgdHJhbnNhY3Rpb24sIHdoaWNoIGNhbiBiZSBhcHBsaWVkIHRvIGEgc3RhdGUgdG9cbmNyZWF0ZSBhbiB1cGRhdGVkIHN0YXRlLiBVc2VcbltgRWRpdG9yU3RhdGUudHJgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUudHIpIHRvIGNyZWF0ZSBhbiBpbnN0YW5jZS5cblxuVHJhbnNhY3Rpb25zIHRyYWNrIGNoYW5nZXMgdG8gdGhlIGRvY3VtZW50ICh0aGV5IGFyZSBhIHN1YmNsYXNzIG9mXG5bYFRyYW5zZm9ybWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN0cmFuc2Zvcm0uVHJhbnNmb3JtKSksIGJ1dCBhbHNvIG90aGVyIHN0YXRlIGNoYW5nZXMsXG5saWtlIHNlbGVjdGlvbiB1cGRhdGVzIGFuZCBhZGp1c3RtZW50cyBvZiB0aGUgc2V0IG9mIFtzdG9yZWRcbm1hcmtzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuc3RvcmVkTWFya3MpLiBJbiBhZGRpdGlvbiwgeW91IGNhbiBzdG9yZVxubWV0YWRhdGEgcHJvcGVydGllcyBpbiBhIHRyYW5zYWN0aW9uLCB3aGljaCBhcmUgZXh0cmEgcGllY2VzIG9mXG5pbmZvcm1hdGlvbiB0aGF0IGNsaWVudCBjb2RlIG9yIHBsdWdpbnMgY2FuIHVzZSB0byBkZXNjcmliZSB3aGF0IGFcbnRyYW5zYWN0aW9uIHJlcHJlc2VudHMsIHNvIHRoYXQgdGhleSBjYW4gdXBkYXRlIHRoZWlyIFtvd25cbnN0YXRlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuU3RhdGVGaWVsZCkgYWNjb3JkaW5nbHkuXG5cblRoZSBbZWRpdG9yIHZpZXddKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3LkVkaXRvclZpZXcpIHVzZXMgYSBmZXcgbWV0YWRhdGFcbnByb3BlcnRpZXM6IGl0IHdpbGwgYXR0YWNoIGEgcHJvcGVydHkgYFwicG9pbnRlclwiYCB3aXRoIHRoZSB2YWx1ZVxuYHRydWVgIHRvIHNlbGVjdGlvbiB0cmFuc2FjdGlvbnMgZGlyZWN0bHkgY2F1c2VkIGJ5IG1vdXNlIG9yIHRvdWNoXG5pbnB1dCwgYSBgXCJjb21wb3NpdGlvblwiYCBwcm9wZXJ0eSBob2xkaW5nIGFuIElEIGlkZW50aWZ5aW5nIHRoZVxuY29tcG9zaXRpb24gdGhhdCBjYXVzZWQgaXQgdG8gdHJhbnNhY3Rpb25zIGNhdXNlZCBieSBjb21wb3NlZCBET01cbmlucHV0LCBhbmQgYSBgXCJ1aUV2ZW50XCJgIHByb3BlcnR5IG9mIHRoYXQgbWF5IGJlIGBcInBhc3RlXCJgLFxuYFwiY3V0XCJgLCBvciBgXCJkcm9wXCJgLlxuKi9cbmNsYXNzIFRyYW5zYWN0aW9uIGV4dGVuZHMgVHJhbnNmb3JtIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlLmRvYyk7XG4gICAgICAgIC8vIFRoZSBzdGVwIGNvdW50IGZvciB3aGljaCB0aGUgY3VycmVudCBzZWxlY3Rpb24gaXMgdmFsaWQuXG4gICAgICAgIHRoaXMuY3VyU2VsZWN0aW9uRm9yID0gMDtcbiAgICAgICAgLy8gQml0ZmllbGQgdG8gdHJhY2sgd2hpY2ggYXNwZWN0cyBvZiB0aGUgc3RhdGUgd2VyZSB1cGRhdGVkIGJ5XG4gICAgICAgIC8vIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgIHRoaXMudXBkYXRlZCA9IDA7XG4gICAgICAgIC8vIE9iamVjdCB1c2VkIHRvIHN0b3JlIG1ldGFkYXRhIHByb3BlcnRpZXMgZm9yIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5tZXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy50aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5jdXJTZWxlY3Rpb24gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIHRoaXMuc3RvcmVkTWFya3MgPSBzdGF0ZS5zdG9yZWRNYXJrcztcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHRyYW5zYWN0aW9uJ3MgY3VycmVudCBzZWxlY3Rpb24uIFRoaXMgZGVmYXVsdHMgdG8gdGhlIGVkaXRvclxuICAgIHNlbGVjdGlvbiBbbWFwcGVkXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuU2VsZWN0aW9uLm1hcCkgdGhyb3VnaCB0aGUgc3RlcHMgaW4gdGhlXG4gICAgdHJhbnNhY3Rpb24sIGJ1dCBjYW4gYmUgb3ZlcndyaXR0ZW4gd2l0aFxuICAgIFtgc2V0U2VsZWN0aW9uYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uLnNldFNlbGVjdGlvbikuXG4gICAgKi9cbiAgICBnZXQgc2VsZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJTZWxlY3Rpb25Gb3IgPCB0aGlzLnN0ZXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jdXJTZWxlY3Rpb24gPSB0aGlzLmN1clNlbGVjdGlvbi5tYXAodGhpcy5kb2MsIHRoaXMubWFwcGluZy5zbGljZSh0aGlzLmN1clNlbGVjdGlvbkZvcikpO1xuICAgICAgICAgICAgdGhpcy5jdXJTZWxlY3Rpb25Gb3IgPSB0aGlzLnN0ZXBzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgIFVwZGF0ZSB0aGUgdHJhbnNhY3Rpb24ncyBjdXJyZW50IHNlbGVjdGlvbi4gV2lsbCBkZXRlcm1pbmUgdGhlXG4gICAgc2VsZWN0aW9uIHRoYXQgdGhlIGVkaXRvciBnZXRzIHdoZW4gdGhlIHRyYW5zYWN0aW9uIGlzIGFwcGxpZWQuXG4gICAgKi9cbiAgICBzZXRTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XG4gICAgICAgIGlmIChzZWxlY3Rpb24uJGZyb20uZG9jICE9IHRoaXMuZG9jKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJTZWxlY3Rpb24gcGFzc2VkIHRvIHNldFNlbGVjdGlvbiBtdXN0IHBvaW50IGF0IHRoZSBjdXJyZW50IGRvY3VtZW50XCIpO1xuICAgICAgICB0aGlzLmN1clNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5jdXJTZWxlY3Rpb25Gb3IgPSB0aGlzLnN0ZXBzLmxlbmd0aDtcbiAgICAgICAgdGhpcy51cGRhdGVkID0gKHRoaXMudXBkYXRlZCB8IFVQREFURURfU0VMKSAmIH5VUERBVEVEX01BUktTO1xuICAgICAgICB0aGlzLnN0b3JlZE1hcmtzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHNlbGVjdGlvbiB3YXMgZXhwbGljaXRseSB1cGRhdGVkIGJ5IHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBnZXQgc2VsZWN0aW9uU2V0KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudXBkYXRlZCAmIFVQREFURURfU0VMKSA+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgIFNldCB0aGUgY3VycmVudCBzdG9yZWQgbWFya3MuXG4gICAgKi9cbiAgICBzZXRTdG9yZWRNYXJrcyhtYXJrcykge1xuICAgICAgICB0aGlzLnN0b3JlZE1hcmtzID0gbWFya3M7XG4gICAgICAgIHRoaXMudXBkYXRlZCB8PSBVUERBVEVEX01BUktTO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgTWFrZSBzdXJlIHRoZSBjdXJyZW50IHN0b3JlZCBtYXJrcyBvciwgaWYgdGhhdCBpcyBudWxsLCB0aGUgbWFya3NcbiAgICBhdCB0aGUgc2VsZWN0aW9uLCBtYXRjaCB0aGUgZ2l2ZW4gc2V0IG9mIG1hcmtzLiBEb2VzIG5vdGhpbmcgaWZcbiAgICB0aGlzIGlzIGFscmVhZHkgdGhlIGNhc2UuXG4gICAgKi9cbiAgICBlbnN1cmVNYXJrcyhtYXJrcykge1xuICAgICAgICBpZiAoIU1hcmsuc2FtZVNldCh0aGlzLnN0b3JlZE1hcmtzIHx8IHRoaXMuc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCksIG1hcmtzKSlcbiAgICAgICAgICAgIHRoaXMuc2V0U3RvcmVkTWFya3MobWFya3MpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQWRkIGEgbWFyayB0byB0aGUgc2V0IG9mIHN0b3JlZCBtYXJrcy5cbiAgICAqL1xuICAgIGFkZFN0b3JlZE1hcmsobWFyaykge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyhtYXJrLmFkZFRvU2V0KHRoaXMuc3RvcmVkTWFya3MgfHwgdGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW1vdmUgYSBtYXJrIG9yIG1hcmsgdHlwZSBmcm9tIHRoZSBzZXQgb2Ygc3RvcmVkIG1hcmtzLlxuICAgICovXG4gICAgcmVtb3ZlU3RvcmVkTWFyayhtYXJrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuc3VyZU1hcmtzKG1hcmsucmVtb3ZlRnJvbVNldCh0aGlzLnN0b3JlZE1hcmtzIHx8IHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgV2hldGhlciB0aGUgc3RvcmVkIG1hcmtzIHdlcmUgZXhwbGljaXRseSBzZXQgZm9yIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgKi9cbiAgICBnZXQgc3RvcmVkTWFya3NTZXQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy51cGRhdGVkICYgVVBEQVRFRF9NQVJLUykgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFkZFN0ZXAoc3RlcCwgZG9jKSB7XG4gICAgICAgIHN1cGVyLmFkZFN0ZXAoc3RlcCwgZG9jKTtcbiAgICAgICAgdGhpcy51cGRhdGVkID0gdGhpcy51cGRhdGVkICYgflVQREFURURfTUFSS1M7XG4gICAgICAgIHRoaXMuc3RvcmVkTWFya3MgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHRpbWVzdGFtcCBmb3IgdGhlIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgc2V0VGltZSh0aW1lKSB7XG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB3aXRoIHRoZSBnaXZlbiBzbGljZS5cbiAgICAqL1xuICAgIHJlcGxhY2VTZWxlY3Rpb24oc2xpY2UpIHtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzLCBzbGljZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gbm9kZS4gV2hlbiBgaW5oZXJpdE1hcmtzYCBpc1xuICAgIHRydWUgYW5kIHRoZSBjb250ZW50IGlzIGlubGluZSwgaXQgaW5oZXJpdHMgdGhlIG1hcmtzIGZyb20gdGhlXG4gICAgcGxhY2Ugd2hlcmUgaXQgaXMgaW5zZXJ0ZWQuXG4gICAgKi9cbiAgICByZXBsYWNlU2VsZWN0aW9uV2l0aChub2RlLCBpbmhlcml0TWFya3MgPSB0cnVlKSB7XG4gICAgICAgIGxldCBzZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKGluaGVyaXRNYXJrcylcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm1hcmsodGhpcy5zdG9yZWRNYXJrcyB8fCAoc2VsZWN0aW9uLmVtcHR5ID8gc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCkgOiAoc2VsZWN0aW9uLiRmcm9tLm1hcmtzQWNyb3NzKHNlbGVjdGlvbi4kdG8pIHx8IE1hcmsubm9uZSkpKTtcbiAgICAgICAgc2VsZWN0aW9uLnJlcGxhY2VXaXRoKHRoaXMsIG5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgRGVsZXRlIHRoZSBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBkZWxldGVTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBnaXZlbiByYW5nZSwgb3IgdGhlIHNlbGVjdGlvbiBpZiBubyByYW5nZSBpcyBnaXZlbixcbiAgICB3aXRoIGEgdGV4dCBub2RlIGNvbnRhaW5pbmcgdGhlIGdpdmVuIHN0cmluZy5cbiAgICAqL1xuICAgIGluc2VydFRleHQodGV4dCwgZnJvbSwgdG8pIHtcbiAgICAgICAgbGV0IHNjaGVtYSA9IHRoaXMuZG9jLnR5cGUuc2NoZW1hO1xuICAgICAgICBpZiAoZnJvbSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIXRleHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlU2VsZWN0aW9uV2l0aChzY2hlbWEudGV4dCh0ZXh0KSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodG8gPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0byA9IGZyb207XG4gICAgICAgICAgICB0byA9IHRvID09IG51bGwgPyBmcm9tIDogdG87XG4gICAgICAgICAgICBpZiAoIXRleHQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UoZnJvbSwgdG8pO1xuICAgICAgICAgICAgbGV0IG1hcmtzID0gdGhpcy5zdG9yZWRNYXJrcztcbiAgICAgICAgICAgIGlmICghbWFya3MpIHtcbiAgICAgICAgICAgICAgICBsZXQgJGZyb20gPSB0aGlzLmRvYy5yZXNvbHZlKGZyb20pO1xuICAgICAgICAgICAgICAgIG1hcmtzID0gdG8gPT0gZnJvbSA/ICRmcm9tLm1hcmtzKCkgOiAkZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLmRvYy5yZXNvbHZlKHRvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlcGxhY2VSYW5nZVdpdGgoZnJvbSwgdG8sIHNjaGVtYS50ZXh0KHRleHQsIG1hcmtzKSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uLmVtcHR5KVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKFNlbGVjdGlvbi5uZWFyKHRoaXMuc2VsZWN0aW9uLiR0bykpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgU3RvcmUgYSBtZXRhZGF0YSBwcm9wZXJ0eSBpbiB0aGlzIHRyYW5zYWN0aW9uLCBrZXllZCBlaXRoZXIgYnlcbiAgICBuYW1lIG9yIGJ5IHBsdWdpbi5cbiAgICAqL1xuICAgIHNldE1ldGEoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLm1ldGFbdHlwZW9mIGtleSA9PSBcInN0cmluZ1wiID8ga2V5IDoga2V5LmtleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHJpZXZlIGEgbWV0YWRhdGEgcHJvcGVydHkgZm9yIGEgZ2l2ZW4gbmFtZSBvciBwbHVnaW4uXG4gICAgKi9cbiAgICBnZXRNZXRhKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhW3R5cGVvZiBrZXkgPT0gXCJzdHJpbmdcIiA/IGtleSA6IGtleS5rZXldO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgaWYgdGhpcyB0cmFuc2FjdGlvbiBkb2Vzbid0IGNvbnRhaW4gYW55IG1ldGFkYXRhLFxuICAgIGFuZCBjYW4gdGh1cyBzYWZlbHkgYmUgZXh0ZW5kZWQuXG4gICAgKi9cbiAgICBnZXQgaXNHZW5lcmljKCkge1xuICAgICAgICBmb3IgKGxldCBfIGluIHRoaXMubWV0YSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlIHRoYXQgdGhlIGVkaXRvciBzaG91bGQgc2Nyb2xsIHRoZSBzZWxlY3Rpb24gaW50byB2aWV3XG4gICAgd2hlbiB1cGRhdGVkIHRvIHRoZSBzdGF0ZSBwcm9kdWNlZCBieSB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgc2Nyb2xsSW50b1ZpZXcoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlZCB8PSBVUERBVEVEX1NDUk9MTDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIHRyYW5zYWN0aW9uIGhhcyBoYWQgYHNjcm9sbEludG9WaWV3YCBjYWxsZWQgb24gaXQuXG4gICAgKi9cbiAgICBnZXQgc2Nyb2xsZWRJbnRvVmlldygpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnVwZGF0ZWQgJiBVUERBVEVEX1NDUk9MTCkgPiAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYmluZChmLCBzZWxmKSB7XG4gICAgcmV0dXJuICFzZWxmIHx8ICFmID8gZiA6IGYuYmluZChzZWxmKTtcbn1cbmNsYXNzIEZpZWxkRGVzYyB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZGVzYywgc2VsZikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmluaXQgPSBiaW5kKGRlc2MuaW5pdCwgc2VsZik7XG4gICAgICAgIHRoaXMuYXBwbHkgPSBiaW5kKGRlc2MuYXBwbHksIHNlbGYpO1xuICAgIH1cbn1cbmNvbnN0IGJhc2VGaWVsZHMgPSBbXG4gICAgbmV3IEZpZWxkRGVzYyhcImRvY1wiLCB7XG4gICAgICAgIGluaXQoY29uZmlnKSB7IHJldHVybiBjb25maWcuZG9jIHx8IGNvbmZpZy5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpOyB9LFxuICAgICAgICBhcHBseSh0cikgeyByZXR1cm4gdHIuZG9jOyB9XG4gICAgfSksXG4gICAgbmV3IEZpZWxkRGVzYyhcInNlbGVjdGlvblwiLCB7XG4gICAgICAgIGluaXQoY29uZmlnLCBpbnN0YW5jZSkgeyByZXR1cm4gY29uZmlnLnNlbGVjdGlvbiB8fCBTZWxlY3Rpb24uYXRTdGFydChpbnN0YW5jZS5kb2MpOyB9LFxuICAgICAgICBhcHBseSh0cikgeyByZXR1cm4gdHIuc2VsZWN0aW9uOyB9XG4gICAgfSksXG4gICAgbmV3IEZpZWxkRGVzYyhcInN0b3JlZE1hcmtzXCIsIHtcbiAgICAgICAgaW5pdChjb25maWcpIHsgcmV0dXJuIGNvbmZpZy5zdG9yZWRNYXJrcyB8fCBudWxsOyB9LFxuICAgICAgICBhcHBseSh0ciwgX21hcmtzLCBfb2xkLCBzdGF0ZSkgeyByZXR1cm4gc3RhdGUuc2VsZWN0aW9uLiRjdXJzb3IgPyB0ci5zdG9yZWRNYXJrcyA6IG51bGw7IH1cbiAgICB9KSxcbiAgICBuZXcgRmllbGREZXNjKFwic2Nyb2xsVG9TZWxlY3Rpb25cIiwge1xuICAgICAgICBpbml0KCkgeyByZXR1cm4gMDsgfSxcbiAgICAgICAgYXBwbHkodHIsIHByZXYpIHsgcmV0dXJuIHRyLnNjcm9sbGVkSW50b1ZpZXcgPyBwcmV2ICsgMSA6IHByZXY7IH1cbiAgICB9KVxuXTtcbi8vIE9iamVjdCB3cmFwcGluZyB0aGUgcGFydCBvZiBhIHN0YXRlIG9iamVjdCB0aGF0IHN0YXlzIHRoZSBzYW1lXG4vLyBhY3Jvc3MgdHJhbnNhY3Rpb25zLiBTdG9yZWQgaW4gdGhlIHN0YXRlJ3MgYGNvbmZpZ2AgcHJvcGVydHkuXG5jbGFzcyBDb25maWd1cmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlbWEsIHBsdWdpbnMpIHtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IFtdO1xuICAgICAgICB0aGlzLnBsdWdpbnNCeUtleSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuZmllbGRzID0gYmFzZUZpZWxkcy5zbGljZSgpO1xuICAgICAgICBpZiAocGx1Z2lucylcbiAgICAgICAgICAgIHBsdWdpbnMuZm9yRWFjaChwbHVnaW4gPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbnNCeUtleVtwbHVnaW4ua2V5XSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBZGRpbmcgZGlmZmVyZW50IGluc3RhbmNlcyBvZiBhIGtleWVkIHBsdWdpbiAoXCIgKyBwbHVnaW4ua2V5ICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5zQnlLZXlbcGx1Z2luLmtleV0gPSBwbHVnaW47XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5zcGVjLnN0YXRlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpZWxkcy5wdXNoKG5ldyBGaWVsZERlc2MocGx1Z2luLmtleSwgcGx1Z2luLnNwZWMuc3RhdGUsIHBsdWdpbikpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG5UaGUgc3RhdGUgb2YgYSBQcm9zZU1pcnJvciBlZGl0b3IgaXMgcmVwcmVzZW50ZWQgYnkgYW4gb2JqZWN0IG9mXG50aGlzIHR5cGUuIEEgc3RhdGUgaXMgYSBwZXJzaXN0ZW50IGRhdGEgc3RydWN0dXJl4oCUaXQgaXNuJ3RcbnVwZGF0ZWQsIGJ1dCByYXRoZXIgYSBuZXcgc3RhdGUgdmFsdWUgaXMgY29tcHV0ZWQgZnJvbSBhbiBvbGQgb25lXG51c2luZyB0aGUgW2BhcHBseWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5hcHBseSkgbWV0aG9kLlxuXG5BIHN0YXRlIGhvbGRzIGEgbnVtYmVyIG9mIGJ1aWx0LWluIGZpZWxkcywgYW5kIHBsdWdpbnMgY2FuXG5bZGVmaW5lXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuUGx1Z2luU3BlYy5zdGF0ZSkgYWRkaXRpb25hbCBmaWVsZHMuXG4qL1xuY2xhc3MgRWRpdG9yU3RhdGUge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzY2hlbWEgb2YgdGhlIHN0YXRlJ3MgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuc2NoZW1hO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgcGx1Z2lucyB0aGF0IGFyZSBhY3RpdmUgaW4gdGhpcyBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCBwbHVnaW5zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcucGx1Z2lucztcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwbHkgdGhlIGdpdmVuIHRyYW5zYWN0aW9uIHRvIHByb2R1Y2UgYSBuZXcgc3RhdGUuXG4gICAgKi9cbiAgICBhcHBseSh0cikge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHRyKS5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBmaWx0ZXJUcmFuc2FjdGlvbih0ciwgaWdub3JlID0gLTEpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKGkgIT0gaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBsdWdpbiA9IHRoaXMuY29uZmlnLnBsdWdpbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5zcGVjLmZpbHRlclRyYW5zYWN0aW9uICYmICFwbHVnaW4uc3BlYy5maWx0ZXJUcmFuc2FjdGlvbi5jYWxsKHBsdWdpbiwgdHIsIHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBWZXJib3NlIHZhcmlhbnQgb2YgW2BhcHBseWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZS5hcHBseSkgdGhhdFxuICAgIHJldHVybnMgdGhlIHByZWNpc2UgdHJhbnNhY3Rpb25zIHRoYXQgd2VyZSBhcHBsaWVkICh3aGljaCBtaWdodFxuICAgIGJlIGluZmx1ZW5jZWQgYnkgdGhlIFt0cmFuc2FjdGlvblxuICAgIGhvb2tzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuUGx1Z2luU3BlYy5maWx0ZXJUcmFuc2FjdGlvbikgb2ZcbiAgICBwbHVnaW5zKSBhbG9uZyB3aXRoIHRoZSBuZXcgc3RhdGUuXG4gICAgKi9cbiAgICBhcHBseVRyYW5zYWN0aW9uKHJvb3RUcikge1xuICAgICAgICBpZiAoIXRoaXMuZmlsdGVyVHJhbnNhY3Rpb24ocm9vdFRyKSlcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiB0aGlzLCB0cmFuc2FjdGlvbnM6IFtdIH07XG4gICAgICAgIGxldCB0cnMgPSBbcm9vdFRyXSwgbmV3U3RhdGUgPSB0aGlzLmFwcGx5SW5uZXIocm9vdFRyKSwgc2VlbiA9IG51bGw7XG4gICAgICAgIC8vIFRoaXMgbG9vcCByZXBlYXRlZGx5IGdpdmVzIHBsdWdpbnMgYSBjaGFuY2UgdG8gcmVzcG9uZCB0b1xuICAgICAgICAvLyB0cmFuc2FjdGlvbnMgYXMgbmV3IHRyYW5zYWN0aW9ucyBhcmUgYWRkZWQsIG1ha2luZyBzdXJlIHRvIG9ubHlcbiAgICAgICAgLy8gcGFzcyB0aGUgdHJhbnNhY3Rpb25zIHRoZSBwbHVnaW4gZGlkIG5vdCBzZWUgYmVmb3JlLlxuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBsZXQgaGF2ZU5ldyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBsdWdpbiA9IHRoaXMuY29uZmlnLnBsdWdpbnNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gc2VlbiA/IHNlZW5baV0ubiA6IDAsIG9sZFN0YXRlID0gc2VlbiA/IHNlZW5baV0uc3RhdGUgOiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHIgPSBuIDwgdHJzLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24uY2FsbChwbHVnaW4sIG4gPyB0cnMuc2xpY2UobikgOiB0cnMsIG9sZFN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ciAmJiBuZXdTdGF0ZS5maWx0ZXJUcmFuc2FjdGlvbih0ciwgaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyLnNldE1ldGEoXCJhcHBlbmRlZFRyYW5zYWN0aW9uXCIsIHJvb3RUcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNlZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVuLnB1c2goaiA8IGkgPyB7IHN0YXRlOiBuZXdTdGF0ZSwgbjogdHJzLmxlbmd0aCB9IDogeyBzdGF0ZTogdGhpcywgbjogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRycy5wdXNoKHRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0YXRlID0gbmV3U3RhdGUuYXBwbHlJbm5lcih0cik7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXZlTmV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZW5baV0gPSB7IHN0YXRlOiBuZXdTdGF0ZSwgbjogdHJzLmxlbmd0aCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaGF2ZU5ldylcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0ZTogbmV3U3RhdGUsIHRyYW5zYWN0aW9uczogdHJzIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhcHBseUlubmVyKHRyKSB7XG4gICAgICAgIGlmICghdHIuYmVmb3JlLmVxKHRoaXMuZG9jKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQXBwbHlpbmcgYSBtaXNtYXRjaGVkIHRyYW5zYWN0aW9uXCIpO1xuICAgICAgICBsZXQgbmV3SW5zdGFuY2UgPSBuZXcgRWRpdG9yU3RhdGUodGhpcy5jb25maWcpLCBmaWVsZHMgPSB0aGlzLmNvbmZpZy5maWVsZHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZmllbGQgPSBmaWVsZHNbaV07XG4gICAgICAgICAgICBuZXdJbnN0YW5jZVtmaWVsZC5uYW1lXSA9IGZpZWxkLmFwcGx5KHRyLCB0aGlzW2ZpZWxkLm5hbWVdLCB0aGlzLCBuZXdJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICBTdGFydCBhIFt0cmFuc2FjdGlvbl0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlRyYW5zYWN0aW9uKSBmcm9tIHRoaXMgc3RhdGUuXG4gICAgKi9cbiAgICBnZXQgdHIoKSB7IHJldHVybiBuZXcgVHJhbnNhY3Rpb24odGhpcyk7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgc3RhdGUuXG4gICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNvbmZpZykge1xuICAgICAgICBsZXQgJGNvbmZpZyA9IG5ldyBDb25maWd1cmF0aW9uKGNvbmZpZy5kb2MgPyBjb25maWcuZG9jLnR5cGUuc2NoZW1hIDogY29uZmlnLnNjaGVtYSwgY29uZmlnLnBsdWdpbnMpO1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSBuZXcgRWRpdG9yU3RhdGUoJGNvbmZpZyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgJGNvbmZpZy5maWVsZHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpbnN0YW5jZVskY29uZmlnLmZpZWxkc1tpXS5uYW1lXSA9ICRjb25maWcuZmllbGRzW2ldLmluaXQoY29uZmlnLCBpbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IHN0YXRlIGJhc2VkIG9uIHRoaXMgb25lLCBidXQgd2l0aCBhbiBhZGp1c3RlZCBzZXRcbiAgICBvZiBhY3RpdmUgcGx1Z2lucy4gU3RhdGUgZmllbGRzIHRoYXQgZXhpc3QgaW4gYm90aCBzZXRzIG9mXG4gICAgcGx1Z2lucyBhcmUga2VwdCB1bmNoYW5nZWQuIFRob3NlIHRoYXQgbm8gbG9uZ2VyIGV4aXN0IGFyZVxuICAgIGRyb3BwZWQsIGFuZCB0aG9zZSB0aGF0IGFyZSBuZXcgYXJlIGluaXRpYWxpemVkIHVzaW5nIHRoZWlyXG4gICAgW2Bpbml0YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRmllbGQuaW5pdCkgbWV0aG9kLCBwYXNzaW5nIGluIHRoZSBuZXdcbiAgICBjb25maWd1cmF0aW9uIG9iamVjdC4uXG4gICAgKi9cbiAgICByZWNvbmZpZ3VyZShjb25maWcpIHtcbiAgICAgICAgbGV0ICRjb25maWcgPSBuZXcgQ29uZmlndXJhdGlvbih0aGlzLnNjaGVtYSwgY29uZmlnLnBsdWdpbnMpO1xuICAgICAgICBsZXQgZmllbGRzID0gJGNvbmZpZy5maWVsZHMsIGluc3RhbmNlID0gbmV3IEVkaXRvclN0YXRlKCRjb25maWcpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5hbWUgPSBmaWVsZHNbaV0ubmFtZTtcbiAgICAgICAgICAgIGluc3RhbmNlW25hbWVdID0gdGhpcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IHRoaXNbbmFtZV0gOiBmaWVsZHNbaV0uaW5pdChjb25maWcsIGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgIFNlcmlhbGl6ZSB0aGlzIHN0YXRlIHRvIEpTT04uIElmIHlvdSB3YW50IHRvIHNlcmlhbGl6ZSB0aGUgc3RhdGVcbiAgICBvZiBwbHVnaW5zLCBwYXNzIGFuIG9iamVjdCBtYXBwaW5nIHByb3BlcnR5IG5hbWVzIHRvIHVzZSBpbiB0aGVcbiAgICByZXN1bHRpbmcgSlNPTiBvYmplY3QgdG8gcGx1Z2luIG9iamVjdHMuIFRoZSBhcmd1bWVudCBtYXkgYWxzbyBiZVxuICAgIGEgc3RyaW5nIG9yIG51bWJlciwgaW4gd2hpY2ggY2FzZSBpdCBpcyBpZ25vcmVkLCB0byBzdXBwb3J0IHRoZVxuICAgIHdheSBgSlNPTi5zdHJpbmdpZnlgIGNhbGxzIGB0b1N0cmluZ2AgbWV0aG9kcy5cbiAgICAqL1xuICAgIHRvSlNPTihwbHVnaW5GaWVsZHMpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHsgZG9jOiB0aGlzLmRvYy50b0pTT04oKSwgc2VsZWN0aW9uOiB0aGlzLnNlbGVjdGlvbi50b0pTT04oKSB9O1xuICAgICAgICBpZiAodGhpcy5zdG9yZWRNYXJrcylcbiAgICAgICAgICAgIHJlc3VsdC5zdG9yZWRNYXJrcyA9IHRoaXMuc3RvcmVkTWFya3MubWFwKG0gPT4gbS50b0pTT04oKSk7XG4gICAgICAgIGlmIChwbHVnaW5GaWVsZHMgJiYgdHlwZW9mIHBsdWdpbkZpZWxkcyA9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gcGx1Z2luRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT0gXCJkb2NcIiB8fCBwcm9wID09IFwic2VsZWN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIEpTT04gZmllbGRzIGBkb2NgIGFuZCBgc2VsZWN0aW9uYCBhcmUgcmVzZXJ2ZWRcIik7XG4gICAgICAgICAgICAgICAgbGV0IHBsdWdpbiA9IHBsdWdpbkZpZWxkc1twcm9wXSwgc3RhdGUgPSBwbHVnaW4uc3BlYy5zdGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUudG9KU09OKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBzdGF0ZS50b0pTT04uY2FsbChwbHVnaW4sIHRoaXNbcGx1Z2luLmtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYSBzdGF0ZS4gYGNvbmZpZ2Agc2hvdWxkXG4gICAgaGF2ZSBhdCBsZWFzdCBhIGBzY2hlbWFgIGZpZWxkLCBhbmQgc2hvdWxkIGNvbnRhaW4gYXJyYXkgb2ZcbiAgICBwbHVnaW5zIHRvIGluaXRpYWxpemUgdGhlIHN0YXRlIHdpdGguIGBwbHVnaW5GaWVsZHNgIGNhbiBiZSB1c2VkXG4gICAgdG8gZGVzZXJpYWxpemUgdGhlIHN0YXRlIG9mIHBsdWdpbnMsIGJ5IGFzc29jaWF0aW5nIHBsdWdpblxuICAgIGluc3RhbmNlcyB3aXRoIHRoZSBwcm9wZXJ0eSBuYW1lcyB0aGV5IHVzZSBpbiB0aGUgSlNPTiBvYmplY3QuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oY29uZmlnLCBqc29uLCBwbHVnaW5GaWVsZHMpIHtcbiAgICAgICAgaWYgKCFqc29uKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBFZGl0b3JTdGF0ZS5mcm9tSlNPTlwiKTtcbiAgICAgICAgaWYgKCFjb25maWcuc2NoZW1hKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJSZXF1aXJlZCBjb25maWcgZmllbGQgJ3NjaGVtYScgbWlzc2luZ1wiKTtcbiAgICAgICAgbGV0ICRjb25maWcgPSBuZXcgQ29uZmlndXJhdGlvbihjb25maWcuc2NoZW1hLCBjb25maWcucGx1Z2lucyk7XG4gICAgICAgIGxldCBpbnN0YW5jZSA9IG5ldyBFZGl0b3JTdGF0ZSgkY29uZmlnKTtcbiAgICAgICAgJGNvbmZpZy5maWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBpZiAoZmllbGQubmFtZSA9PSBcImRvY1wiKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZG9jID0gTm9kZS5mcm9tSlNPTihjb25maWcuc2NoZW1hLCBqc29uLmRvYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmaWVsZC5uYW1lID09IFwic2VsZWN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5zZWxlY3Rpb24gPSBTZWxlY3Rpb24uZnJvbUpTT04oaW5zdGFuY2UuZG9jLCBqc29uLnNlbGVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChmaWVsZC5uYW1lID09IFwic3RvcmVkTWFya3NcIikge1xuICAgICAgICAgICAgICAgIGlmIChqc29uLnN0b3JlZE1hcmtzKVxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5zdG9yZWRNYXJrcyA9IGpzb24uc3RvcmVkTWFya3MubWFwKGNvbmZpZy5zY2hlbWEubWFya0Zyb21KU09OKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW5GaWVsZHMpXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gcGx1Z2luRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gcGx1Z2luRmllbGRzW3Byb3BdLCBzdGF0ZSA9IHBsdWdpbi5zcGVjLnN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5rZXkgPT0gZmllbGQubmFtZSAmJiBzdGF0ZSAmJiBzdGF0ZS5mcm9tSlNPTiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChqc29uLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlW2ZpZWxkLm5hbWVdID0gc3RhdGUuZnJvbUpTT04uY2FsbChwbHVnaW4sIGNvbmZpZywganNvbltwcm9wXSwgaW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RhbmNlW2ZpZWxkLm5hbWVdID0gZmllbGQuaW5pdChjb25maWcsIGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJpbmRQcm9wcyhvYmosIHNlbGYsIHRhcmdldCkge1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKSB7XG4gICAgICAgIGxldCB2YWwgPSBvYmpbcHJvcF07XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBGdW5jdGlvbilcbiAgICAgICAgICAgIHZhbCA9IHZhbC5iaW5kKHNlbGYpO1xuICAgICAgICBlbHNlIGlmIChwcm9wID09IFwiaGFuZGxlRE9NRXZlbnRzXCIpXG4gICAgICAgICAgICB2YWwgPSBiaW5kUHJvcHModmFsLCBzZWxmLCB7fSk7XG4gICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbi8qKlxuUGx1Z2lucyBidW5kbGUgZnVuY3Rpb25hbGl0eSB0aGF0IGNhbiBiZSBhZGRlZCB0byBhbiBlZGl0b3IuXG5UaGV5IGFyZSBwYXJ0IG9mIHRoZSBbZWRpdG9yIHN0YXRlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUpIGFuZFxubWF5IGluZmx1ZW5jZSB0aGF0IHN0YXRlIGFuZCB0aGUgdmlldyB0aGF0IGNvbnRhaW5zIGl0LlxuKi9cbmNsYXNzIFBsdWdpbiB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcGx1Z2luLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHBsdWdpbidzIFtzcGVjIG9iamVjdF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlBsdWdpblNwZWMpLlxuICAgICovXG4gICAgc3BlYykge1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIFtwcm9wc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3ZpZXcuRWRpdG9yUHJvcHMpIGV4cG9ydGVkIGJ5IHRoaXMgcGx1Z2luLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BzID0ge307XG4gICAgICAgIGlmIChzcGVjLnByb3BzKVxuICAgICAgICAgICAgYmluZFByb3BzKHNwZWMucHJvcHMsIHRoaXMsIHRoaXMucHJvcHMpO1xuICAgICAgICB0aGlzLmtleSA9IHNwZWMua2V5ID8gc3BlYy5rZXkua2V5IDogY3JlYXRlS2V5KFwicGx1Z2luXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBFeHRyYWN0IHRoZSBwbHVnaW4ncyBzdGF0ZSBmaWVsZCBmcm9tIGFuIGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIGdldFN0YXRlKHN0YXRlKSB7IHJldHVybiBzdGF0ZVt0aGlzLmtleV07IH1cbn1cbmNvbnN0IGtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZnVuY3Rpb24gY3JlYXRlS2V5KG5hbWUpIHtcbiAgICBpZiAobmFtZSBpbiBrZXlzKVxuICAgICAgICByZXR1cm4gbmFtZSArIFwiJFwiICsgKytrZXlzW25hbWVdO1xuICAgIGtleXNbbmFtZV0gPSAwO1xuICAgIHJldHVybiBuYW1lICsgXCIkXCI7XG59XG4vKipcbkEga2V5IGlzIHVzZWQgdG8gW3RhZ10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlBsdWdpblNwZWMua2V5KSBwbHVnaW5zIGluIGEgd2F5XG50aGF0IG1ha2VzIGl0IHBvc3NpYmxlIHRvIGZpbmQgdGhlbSwgZ2l2ZW4gYW4gZWRpdG9yIHN0YXRlLlxuQXNzaWduaW5nIGEga2V5IGRvZXMgbWVhbiBvbmx5IG9uZSBwbHVnaW4gb2YgdGhhdCB0eXBlIGNhbiBiZVxuYWN0aXZlIGluIGEgc3RhdGUuXG4qL1xuY2xhc3MgUGx1Z2luS2V5IHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBwbHVnaW4ga2V5LlxuICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwia2V5XCIpIHsgdGhpcy5rZXkgPSBjcmVhdGVLZXkobmFtZSk7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGFjdGl2ZSBwbHVnaW4gd2l0aCB0aGlzIGtleSwgaWYgYW55LCBmcm9tIGFuIGVkaXRvclxuICAgIHN0YXRlLlxuICAgICovXG4gICAgZ2V0KHN0YXRlKSB7IHJldHVybiBzdGF0ZS5jb25maWcucGx1Z2luc0J5S2V5W3RoaXMua2V5XTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgcGx1Z2luJ3Mgc3RhdGUgZnJvbSBhbiBlZGl0b3Igc3RhdGUuXG4gICAgKi9cbiAgICBnZXRTdGF0ZShzdGF0ZSkgeyByZXR1cm4gc3RhdGVbdGhpcy5rZXldOyB9XG59XG5cbmV4cG9ydCB7IEFsbFNlbGVjdGlvbiwgRWRpdG9yU3RhdGUsIE5vZGVTZWxlY3Rpb24sIFBsdWdpbiwgUGx1Z2luS2V5LCBTZWxlY3Rpb24sIFNlbGVjdGlvblJhbmdlLCBUZXh0U2VsZWN0aW9uLCBUcmFuc2FjdGlvbiB9O1xuIiwiaW1wb3J0IHsgVGV4dFNlbGVjdGlvbiwgTm9kZVNlbGVjdGlvbiwgU2VsZWN0aW9uLCBBbGxTZWxlY3Rpb24gfSBmcm9tICdwcm9zZW1pcnJvci1zdGF0ZSc7XG5pbXBvcnQgeyBET01TZXJpYWxpemVyLCBGcmFnbWVudCwgTWFyaywgU2xpY2UsIERPTVBhcnNlciB9IGZyb20gJ3Byb3NlbWlycm9yLW1vZGVsJztcbmltcG9ydCB7IGRyb3BQb2ludCB9IGZyb20gJ3Byb3NlbWlycm9yLXRyYW5zZm9ybSc7XG5cbmNvbnN0IGRvbUluZGV4ID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7OyBpbmRleCsrKSB7XG4gICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgaWYgKCFub2RlKVxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbn07XG5jb25zdCBwYXJlbnROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBsZXQgcGFyZW50ID0gbm9kZS5hc3NpZ25lZFNsb3QgfHwgbm9kZS5wYXJlbnROb2RlO1xuICAgIHJldHVybiBwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09IDExID8gcGFyZW50Lmhvc3QgOiBwYXJlbnQ7XG59O1xubGV0IHJldXNlZFJhbmdlID0gbnVsbDtcbi8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgYWx3YXlzIHJldHVybiB0aGUgc2FtZSByYW5nZSwgYmVjYXVzZSBET00gcmFuZ2Vcbi8vIG9iamVjdHMgYXJlIGV2ZXJ5IGV4cGVuc2l2ZSwgYW5kIGtlZXAgc2xvd2luZyBkb3duIHN1YnNlcXVlbnQgRE9NXG4vLyB1cGRhdGVzLCBmb3Igc29tZSByZWFzb24uXG5jb25zdCB0ZXh0UmFuZ2UgPSBmdW5jdGlvbiAobm9kZSwgZnJvbSwgdG8pIHtcbiAgICBsZXQgcmFuZ2UgPSByZXVzZWRSYW5nZSB8fCAocmV1c2VkUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpKTtcbiAgICByYW5nZS5zZXRFbmQobm9kZSwgdG8gPT0gbnVsbCA/IG5vZGUubm9kZVZhbHVlLmxlbmd0aCA6IHRvKTtcbiAgICByYW5nZS5zZXRTdGFydChub2RlLCBmcm9tIHx8IDApO1xuICAgIHJldHVybiByYW5nZTtcbn07XG4vLyBTY2FucyBmb3J3YXJkIGFuZCBiYWNrd2FyZCB0aHJvdWdoIERPTSBwb3NpdGlvbnMgZXF1aXZhbGVudCB0byB0aGVcbi8vIGdpdmVuIG9uZSB0byBzZWUgaWYgdGhlIHR3byBhcmUgaW4gdGhlIHNhbWUgcGxhY2UgKGkuZS4gYWZ0ZXIgYVxuLy8gdGV4dCBub2RlIHZzIGF0IHRoZSBlbmQgb2YgdGhhdCB0ZXh0IG5vZGUpXG5jb25zdCBpc0VxdWl2YWxlbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZikge1xuICAgIHJldHVybiB0YXJnZXROb2RlICYmIChzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCAtMSkgfHxcbiAgICAgICAgc2NhbkZvcihub2RlLCBvZmYsIHRhcmdldE5vZGUsIHRhcmdldE9mZiwgMSkpO1xufTtcbmNvbnN0IGF0b21FbGVtZW50cyA9IC9eKGltZ3xicnxpbnB1dHx0ZXh0YXJlYXxocikkL2k7XG5mdW5jdGlvbiBzY2FuRm9yKG5vZGUsIG9mZiwgdGFyZ2V0Tm9kZSwgdGFyZ2V0T2ZmLCBkaXIpIHtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChub2RlID09IHRhcmdldE5vZGUgJiYgb2ZmID09IHRhcmdldE9mZilcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob2ZmID09IChkaXIgPCAwID8gMCA6IG5vZGVTaXplKG5vZGUpKSkge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICghcGFyZW50IHx8IHBhcmVudC5ub2RlVHlwZSAhPSAxIHx8IGhhc0Jsb2NrRGVzYyhub2RlKSB8fCBhdG9tRWxlbWVudHMudGVzdChub2RlLm5vZGVOYW1lKSB8fFxuICAgICAgICAgICAgICAgIG5vZGUuY29udGVudEVkaXRhYmxlID09IFwiZmFsc2VcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBvZmYgPSBkb21JbmRleChub2RlKSArIChkaXIgPCAwID8gMCA6IDEpO1xuICAgICAgICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2ZmICsgKGRpciA8IDAgPyAtMSA6IDApXTtcbiAgICAgICAgICAgIGlmIChub2RlLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgb2ZmID0gZGlyIDwgMCA/IG5vZGVTaXplKG5vZGUpIDogMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG5vZGVTaXplKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSAzID8gbm9kZS5ub2RlVmFsdWUubGVuZ3RoIDogbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtcbn1cbmZ1bmN0aW9uIGlzT25FZGdlKG5vZGUsIG9mZnNldCwgcGFyZW50KSB7XG4gICAgZm9yIChsZXQgYXRTdGFydCA9IG9mZnNldCA9PSAwLCBhdEVuZCA9IG9mZnNldCA9PSBub2RlU2l6ZShub2RlKTsgYXRTdGFydCB8fCBhdEVuZDspIHtcbiAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGxldCBpbmRleCA9IGRvbUluZGV4KG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICBpZiAoIW5vZGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGF0U3RhcnQgPSBhdFN0YXJ0ICYmIGluZGV4ID09IDA7XG4gICAgICAgIGF0RW5kID0gYXRFbmQgJiYgaW5kZXggPT0gbm9kZVNpemUobm9kZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzQmxvY2tEZXNjKGRvbSkge1xuICAgIGxldCBkZXNjO1xuICAgIGZvciAobGV0IGN1ciA9IGRvbTsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSlcbiAgICAgICAgaWYgKGRlc2MgPSBjdXIucG1WaWV3RGVzYylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIHJldHVybiBkZXNjICYmIGRlc2Mubm9kZSAmJiBkZXNjLm5vZGUuaXNCbG9jayAmJiAoZGVzYy5kb20gPT0gZG9tIHx8IGRlc2MuY29udGVudERPTSA9PSBkb20pO1xufVxuLy8gV29yayBhcm91bmQgQ2hyb21lIGlzc3VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0NzUyM1xuLy8gKGlzQ29sbGFwc2VkIGluYXBwcm9wcmlhdGVseSByZXR1cm5zIHRydWUgaW4gc2hhZG93IGRvbSlcbmNvbnN0IHNlbGVjdGlvbkNvbGxhcHNlZCA9IGZ1bmN0aW9uIChkb21TZWwpIHtcbiAgICByZXR1cm4gZG9tU2VsLmZvY3VzTm9kZSAmJiBpc0VxdWl2YWxlbnRQb3NpdGlvbihkb21TZWwuZm9jdXNOb2RlLCBkb21TZWwuZm9jdXNPZmZzZXQsIGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KTtcbn07XG5mdW5jdGlvbiBrZXlFdmVudChrZXlDb2RlLCBrZXkpIHtcbiAgICBsZXQgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgIGV2ZW50LmluaXRFdmVudChcImtleWRvd25cIiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgZXZlbnQua2V5Q29kZSA9IGtleUNvZGU7XG4gICAgZXZlbnQua2V5ID0gZXZlbnQuY29kZSA9IGtleTtcbiAgICByZXR1cm4gZXZlbnQ7XG59XG5mdW5jdGlvbiBkZWVwQWN0aXZlRWxlbWVudChkb2MpIHtcbiAgICBsZXQgZWx0ID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgd2hpbGUgKGVsdCAmJiBlbHQuc2hhZG93Um9vdClcbiAgICAgICAgZWx0ID0gZWx0LnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDtcbiAgICByZXR1cm4gZWx0O1xufVxuZnVuY3Rpb24gY2FyZXRGcm9tUG9pbnQoZG9jLCB4LCB5KSB7XG4gICAgaWYgKGRvYy5jYXJldFBvc2l0aW9uRnJvbVBvaW50KSB7XG4gICAgICAgIHRyeSB7IC8vIEZpcmVmb3ggdGhyb3dzIGZvciB0aGlzIGNhbGwgaW4gaGFyZC10by1wcmVkaWN0IGNpcmN1bXN0YW5jZXMgKCM5OTQpXG4gICAgICAgICAgICBsZXQgcG9zID0gZG9jLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoeCwgeSk7XG4gICAgICAgICAgICBpZiAocG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiB7IG5vZGU6IHBvcy5vZmZzZXROb2RlLCBvZmZzZXQ6IHBvcy5vZmZzZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoXykgeyB9XG4gICAgfVxuICAgIGlmIChkb2MuY2FyZXRSYW5nZUZyb21Qb2ludCkge1xuICAgICAgICBsZXQgcmFuZ2UgPSBkb2MuY2FyZXRSYW5nZUZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgaWYgKHJhbmdlKVxuICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogcmFuZ2Uuc3RhcnRDb250YWluZXIsIG9mZnNldDogcmFuZ2Uuc3RhcnRPZmZzZXQgfTtcbiAgICB9XG59XG5cbmNvbnN0IG5hdiA9IHR5cGVvZiBuYXZpZ2F0b3IgIT0gXCJ1bmRlZmluZWRcIiA/IG5hdmlnYXRvciA6IG51bGw7XG5jb25zdCBkb2MgPSB0eXBlb2YgZG9jdW1lbnQgIT0gXCJ1bmRlZmluZWRcIiA/IGRvY3VtZW50IDogbnVsbDtcbmNvbnN0IGFnZW50ID0gKG5hdiAmJiBuYXYudXNlckFnZW50KSB8fCBcIlwiO1xuY29uc3QgaWVfZWRnZSA9IC9FZGdlXFwvKFxcZCspLy5leGVjKGFnZW50KTtcbmNvbnN0IGllX3VwdG8xMCA9IC9NU0lFIFxcZC8uZXhlYyhhZ2VudCk7XG5jb25zdCBpZV8xMXVwID0gL1RyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKGFnZW50KTtcbmNvbnN0IGllID0gISEoaWVfdXB0bzEwIHx8IGllXzExdXAgfHwgaWVfZWRnZSk7XG5jb25zdCBpZV92ZXJzaW9uID0gaWVfdXB0bzEwID8gZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDogaWVfMTF1cCA/ICtpZV8xMXVwWzFdIDogaWVfZWRnZSA/ICtpZV9lZGdlWzFdIDogMDtcbmNvbnN0IGdlY2tvID0gIWllICYmIC9nZWNrb1xcLyhcXGQrKS9pLnRlc3QoYWdlbnQpO1xuZ2Vja28gJiYgKygvRmlyZWZveFxcLyhcXGQrKS8uZXhlYyhhZ2VudCkgfHwgWzAsIDBdKVsxXTtcbmNvbnN0IF9jaHJvbWUgPSAhaWUgJiYgL0Nocm9tZVxcLyhcXGQrKS8uZXhlYyhhZ2VudCk7XG5jb25zdCBjaHJvbWUgPSAhIV9jaHJvbWU7XG5jb25zdCBjaHJvbWVfdmVyc2lvbiA9IF9jaHJvbWUgPyArX2Nocm9tZVsxXSA6IDA7XG5jb25zdCBzYWZhcmkgPSAhaWUgJiYgISFuYXYgJiYgL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdi52ZW5kb3IpO1xuLy8gSXMgdHJ1ZSBmb3IgYm90aCBpT1MgYW5kIGlQYWRPUyBmb3IgY29udmVuaWVuY2VcbmNvbnN0IGlvcyA9IHNhZmFyaSAmJiAoL01vYmlsZVxcL1xcdysvLnRlc3QoYWdlbnQpIHx8ICEhbmF2ICYmIG5hdi5tYXhUb3VjaFBvaW50cyA+IDIpO1xuY29uc3QgbWFjID0gaW9zIHx8IChuYXYgPyAvTWFjLy50ZXN0KG5hdi5wbGF0Zm9ybSkgOiBmYWxzZSk7XG5jb25zdCB3aW5kb3dzID0gbmF2ID8gL1dpbi8udGVzdChuYXYucGxhdGZvcm0pIDogZmFsc2U7XG5jb25zdCBhbmRyb2lkID0gL0FuZHJvaWQgXFxkLy50ZXN0KGFnZW50KTtcbmNvbnN0IHdlYmtpdCA9ICEhZG9jICYmIFwid2Via2l0Rm9udFNtb290aGluZ1wiIGluIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGU7XG5jb25zdCB3ZWJraXRfdmVyc2lvbiA9IHdlYmtpdCA/ICsoL1xcYkFwcGxlV2ViS2l0XFwvKFxcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpIHx8IFswLCAwXSlbMV0gOiAwO1xuXG5mdW5jdGlvbiB3aW5kb3dSZWN0KGRvYykge1xuICAgIHJldHVybiB7IGxlZnQ6IDAsIHJpZ2h0OiBkb2MuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICB0b3A6IDAsIGJvdHRvbTogZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfTtcbn1cbmZ1bmN0aW9uIGdldFNpZGUodmFsdWUsIHNpZGUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIgPyB2YWx1ZSA6IHZhbHVlW3NpZGVdO1xufVxuZnVuY3Rpb24gY2xpZW50UmVjdChub2RlKSB7XG4gICAgbGV0IHJlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIC8vIEFkanVzdCBmb3IgZWxlbWVudHMgd2l0aCBzdHlsZSBcInRyYW5zZm9ybTogc2NhbGUoKVwiXG4gICAgbGV0IHNjYWxlWCA9IChyZWN0LndpZHRoIC8gbm9kZS5vZmZzZXRXaWR0aCkgfHwgMTtcbiAgICBsZXQgc2NhbGVZID0gKHJlY3QuaGVpZ2h0IC8gbm9kZS5vZmZzZXRIZWlnaHQpIHx8IDE7XG4gICAgLy8gTWFrZSBzdXJlIHNjcm9sbGJhciB3aWR0aCBpc24ndCBpbmNsdWRlZCBpbiB0aGUgcmVjdGFuZ2xlXG4gICAgcmV0dXJuIHsgbGVmdDogcmVjdC5sZWZ0LCByaWdodDogcmVjdC5sZWZ0ICsgbm9kZS5jbGllbnRXaWR0aCAqIHNjYWxlWCxcbiAgICAgICAgdG9wOiByZWN0LnRvcCwgYm90dG9tOiByZWN0LnRvcCArIG5vZGUuY2xpZW50SGVpZ2h0ICogc2NhbGVZIH07XG59XG5mdW5jdGlvbiBzY3JvbGxSZWN0SW50b1ZpZXcodmlldywgcmVjdCwgc3RhcnRET00pIHtcbiAgICBsZXQgc2Nyb2xsVGhyZXNob2xkID0gdmlldy5zb21lUHJvcChcInNjcm9sbFRocmVzaG9sZFwiKSB8fCAwLCBzY3JvbGxNYXJnaW4gPSB2aWV3LnNvbWVQcm9wKFwic2Nyb2xsTWFyZ2luXCIpIHx8IDU7XG4gICAgbGV0IGRvYyA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQ7XG4gICAgZm9yIChsZXQgcGFyZW50ID0gc3RhcnRET00gfHwgdmlldy5kb207OyBwYXJlbnQgPSBwYXJlbnROb2RlKHBhcmVudCkpIHtcbiAgICAgICAgaWYgKCFwYXJlbnQpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgaWYgKHBhcmVudC5ub2RlVHlwZSAhPSAxKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxldCBlbHQgPSBwYXJlbnQ7XG4gICAgICAgIGxldCBhdFRvcCA9IGVsdCA9PSBkb2MuYm9keTtcbiAgICAgICAgbGV0IGJvdW5kaW5nID0gYXRUb3AgPyB3aW5kb3dSZWN0KGRvYykgOiBjbGllbnRSZWN0KGVsdCk7XG4gICAgICAgIGxldCBtb3ZlWCA9IDAsIG1vdmVZID0gMDtcbiAgICAgICAgaWYgKHJlY3QudG9wIDwgYm91bmRpbmcudG9wICsgZ2V0U2lkZShzY3JvbGxUaHJlc2hvbGQsIFwidG9wXCIpKVxuICAgICAgICAgICAgbW92ZVkgPSAtKGJvdW5kaW5nLnRvcCAtIHJlY3QudG9wICsgZ2V0U2lkZShzY3JvbGxNYXJnaW4sIFwidG9wXCIpKTtcbiAgICAgICAgZWxzZSBpZiAocmVjdC5ib3R0b20gPiBib3VuZGluZy5ib3R0b20gLSBnZXRTaWRlKHNjcm9sbFRocmVzaG9sZCwgXCJib3R0b21cIikpXG4gICAgICAgICAgICBtb3ZlWSA9IHJlY3QuYm90dG9tIC0gYm91bmRpbmcuYm90dG9tICsgZ2V0U2lkZShzY3JvbGxNYXJnaW4sIFwiYm90dG9tXCIpO1xuICAgICAgICBpZiAocmVjdC5sZWZ0IDwgYm91bmRpbmcubGVmdCArIGdldFNpZGUoc2Nyb2xsVGhyZXNob2xkLCBcImxlZnRcIikpXG4gICAgICAgICAgICBtb3ZlWCA9IC0oYm91bmRpbmcubGVmdCAtIHJlY3QubGVmdCArIGdldFNpZGUoc2Nyb2xsTWFyZ2luLCBcImxlZnRcIikpO1xuICAgICAgICBlbHNlIGlmIChyZWN0LnJpZ2h0ID4gYm91bmRpbmcucmlnaHQgLSBnZXRTaWRlKHNjcm9sbFRocmVzaG9sZCwgXCJyaWdodFwiKSlcbiAgICAgICAgICAgIG1vdmVYID0gcmVjdC5yaWdodCAtIGJvdW5kaW5nLnJpZ2h0ICsgZ2V0U2lkZShzY3JvbGxNYXJnaW4sIFwicmlnaHRcIik7XG4gICAgICAgIGlmIChtb3ZlWCB8fCBtb3ZlWSkge1xuICAgICAgICAgICAgaWYgKGF0VG9wKSB7XG4gICAgICAgICAgICAgICAgZG9jLmRlZmF1bHRWaWV3LnNjcm9sbEJ5KG1vdmVYLCBtb3ZlWSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnRYID0gZWx0LnNjcm9sbExlZnQsIHN0YXJ0WSA9IGVsdC5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVZKVxuICAgICAgICAgICAgICAgICAgICBlbHQuc2Nyb2xsVG9wICs9IG1vdmVZO1xuICAgICAgICAgICAgICAgIGlmIChtb3ZlWClcbiAgICAgICAgICAgICAgICAgICAgZWx0LnNjcm9sbExlZnQgKz0gbW92ZVg7XG4gICAgICAgICAgICAgICAgbGV0IGRYID0gZWx0LnNjcm9sbExlZnQgLSBzdGFydFgsIGRZID0gZWx0LnNjcm9sbFRvcCAtIHN0YXJ0WTtcbiAgICAgICAgICAgICAgICByZWN0ID0geyBsZWZ0OiByZWN0LmxlZnQgLSBkWCwgdG9wOiByZWN0LnRvcCAtIGRZLCByaWdodDogcmVjdC5yaWdodCAtIGRYLCBib3R0b206IHJlY3QuYm90dG9tIC0gZFkgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXRUb3ApXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59XG4vLyBTdG9yZSB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBlZGl0b3IncyBwYXJlbnQgbm9kZXMsIGFsb25nIHdpdGhcbi8vIHRoZSB0b3AgcG9zaXRpb24gb2YgYW4gZWxlbWVudCBuZWFyIHRoZSB0b3Agb2YgdGhlIGVkaXRvciwgd2hpY2hcbi8vIHdpbGwgYmUgdXNlZCB0byBtYWtlIHN1cmUgdGhlIHZpc2libGUgdmlld3BvcnQgcmVtYWlucyBzdGFibGUgZXZlblxuLy8gd2hlbiB0aGUgc2l6ZSBvZiB0aGUgY29udGVudCBhYm92ZSBjaGFuZ2VzLlxuZnVuY3Rpb24gc3RvcmVTY3JvbGxQb3Modmlldykge1xuICAgIGxldCByZWN0ID0gdmlldy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHN0YXJ0WSA9IE1hdGgubWF4KDAsIHJlY3QudG9wKTtcbiAgICBsZXQgcmVmRE9NLCByZWZUb3A7XG4gICAgZm9yIChsZXQgeCA9IChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIsIHkgPSBzdGFydFkgKyAxOyB5IDwgTWF0aC5taW4oaW5uZXJIZWlnaHQsIHJlY3QuYm90dG9tKTsgeSArPSA1KSB7XG4gICAgICAgIGxldCBkb20gPSB2aWV3LnJvb3QuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgICAgICAgaWYgKCFkb20gfHwgZG9tID09IHZpZXcuZG9tIHx8ICF2aWV3LmRvbS5jb250YWlucyhkb20pKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxldCBsb2NhbFJlY3QgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChsb2NhbFJlY3QudG9wID49IHN0YXJ0WSAtIDIwKSB7XG4gICAgICAgICAgICByZWZET00gPSBkb207XG4gICAgICAgICAgICByZWZUb3AgPSBsb2NhbFJlY3QudG9wO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgcmVmRE9NOiByZWZET00sIHJlZlRvcDogcmVmVG9wLCBzdGFjazogc2Nyb2xsU3RhY2sodmlldy5kb20pIH07XG59XG5mdW5jdGlvbiBzY3JvbGxTdGFjayhkb20pIHtcbiAgICBsZXQgc3RhY2sgPSBbXSwgZG9jID0gZG9tLm93bmVyRG9jdW1lbnQ7XG4gICAgZm9yIChsZXQgY3VyID0gZG9tOyBjdXI7IGN1ciA9IHBhcmVudE5vZGUoY3VyKSkge1xuICAgICAgICBzdGFjay5wdXNoKHsgZG9tOiBjdXIsIHRvcDogY3VyLnNjcm9sbFRvcCwgbGVmdDogY3VyLnNjcm9sbExlZnQgfSk7XG4gICAgICAgIGlmIChkb20gPT0gZG9jKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzdGFjaztcbn1cbi8vIFJlc2V0IHRoZSBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGVkaXRvcidzIHBhcmVudCBub2RlcyB0byB0aGF0IHdoYXRcbi8vIGl0IHdhcyBiZWZvcmUsIHdoZW4gc3RvcmVTY3JvbGxQb3Mgd2FzIGNhbGxlZC5cbmZ1bmN0aW9uIHJlc2V0U2Nyb2xsUG9zKHsgcmVmRE9NLCByZWZUb3AsIHN0YWNrIH0pIHtcbiAgICBsZXQgbmV3UmVmVG9wID0gcmVmRE9NID8gcmVmRE9NLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA6IDA7XG4gICAgcmVzdG9yZVNjcm9sbFN0YWNrKHN0YWNrLCBuZXdSZWZUb3AgPT0gMCA/IDAgOiBuZXdSZWZUb3AgLSByZWZUb3ApO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcm9sbFN0YWNrKHN0YWNrLCBkVG9wKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGFjay5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgeyBkb20sIHRvcCwgbGVmdCB9ID0gc3RhY2tbaV07XG4gICAgICAgIGlmIChkb20uc2Nyb2xsVG9wICE9IHRvcCArIGRUb3ApXG4gICAgICAgICAgICBkb20uc2Nyb2xsVG9wID0gdG9wICsgZFRvcDtcbiAgICAgICAgaWYgKGRvbS5zY3JvbGxMZWZ0ICE9IGxlZnQpXG4gICAgICAgICAgICBkb20uc2Nyb2xsTGVmdCA9IGxlZnQ7XG4gICAgfVxufVxubGV0IHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQgPSBudWxsO1xuLy8gRmVhdHVyZS1kZXRlY3RzIHN1cHBvcnQgZm9yIC5mb2N1cyh7cHJldmVudFNjcm9sbDogdHJ1ZX0pLCBhbmQgdXNlc1xuLy8gYSBmYWxsYmFjayBrbHVkZ2Ugd2hlbiBub3Qgc3VwcG9ydGVkLlxuZnVuY3Rpb24gZm9jdXNQcmV2ZW50U2Nyb2xsKGRvbSkge1xuICAgIGlmIChkb20uc2V0QWN0aXZlKVxuICAgICAgICByZXR1cm4gZG9tLnNldEFjdGl2ZSgpOyAvLyBpbiBJRVxuICAgIGlmIChwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkKVxuICAgICAgICByZXR1cm4gZG9tLmZvY3VzKHByZXZlbnRTY3JvbGxTdXBwb3J0ZWQpO1xuICAgIGxldCBzdG9yZWQgPSBzY3JvbGxTdGFjayhkb20pO1xuICAgIGRvbS5mb2N1cyhwcmV2ZW50U2Nyb2xsU3VwcG9ydGVkID09IG51bGwgPyB7XG4gICAgICAgIGdldCBwcmV2ZW50U2Nyb2xsKCkge1xuICAgICAgICAgICAgcHJldmVudFNjcm9sbFN1cHBvcnRlZCA9IHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9IDogdW5kZWZpbmVkKTtcbiAgICBpZiAoIXByZXZlbnRTY3JvbGxTdXBwb3J0ZWQpIHtcbiAgICAgICAgcHJldmVudFNjcm9sbFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICByZXN0b3JlU2Nyb2xsU3RhY2soc3RvcmVkLCAwKTtcbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kT2Zmc2V0SW5Ob2RlKG5vZGUsIGNvb3Jkcykge1xuICAgIGxldCBjbG9zZXN0LCBkeENsb3Nlc3QgPSAyZTgsIGNvb3Jkc0Nsb3Nlc3QsIG9mZnNldCA9IDA7XG4gICAgbGV0IHJvd0JvdCA9IGNvb3Jkcy50b3AsIHJvd1RvcCA9IGNvb3Jkcy50b3A7XG4gICAgbGV0IGZpcnN0QmVsb3csIGNvb3Jkc0JlbG93O1xuICAgIGZvciAobGV0IGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBjaGlsZEluZGV4ID0gMDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcsIGNoaWxkSW5kZXgrKykge1xuICAgICAgICBsZXQgcmVjdHM7XG4gICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAxKVxuICAgICAgICAgICAgcmVjdHMgPSBjaGlsZC5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICBlbHNlIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAzKVxuICAgICAgICAgICAgcmVjdHMgPSB0ZXh0UmFuZ2UoY2hpbGQpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcmVjdCA9IHJlY3RzW2ldO1xuICAgICAgICAgICAgaWYgKHJlY3QudG9wIDw9IHJvd0JvdCAmJiByZWN0LmJvdHRvbSA+PSByb3dUb3ApIHtcbiAgICAgICAgICAgICAgICByb3dCb3QgPSBNYXRoLm1heChyZWN0LmJvdHRvbSwgcm93Qm90KTtcbiAgICAgICAgICAgICAgICByb3dUb3AgPSBNYXRoLm1pbihyZWN0LnRvcCwgcm93VG9wKTtcbiAgICAgICAgICAgICAgICBsZXQgZHggPSByZWN0LmxlZnQgPiBjb29yZHMubGVmdCA/IHJlY3QubGVmdCAtIGNvb3Jkcy5sZWZ0XG4gICAgICAgICAgICAgICAgICAgIDogcmVjdC5yaWdodCA8IGNvb3Jkcy5sZWZ0ID8gY29vcmRzLmxlZnQgLSByZWN0LnJpZ2h0IDogMDtcbiAgICAgICAgICAgICAgICBpZiAoZHggPCBkeENsb3Nlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VzdCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICBkeENsb3Nlc3QgPSBkeDtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRzQ2xvc2VzdCA9IGR4ICYmIGNsb3Nlc3Qubm9kZVR5cGUgPT0gMyA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHJlY3QucmlnaHQgPCBjb29yZHMubGVmdCA/IHJlY3QucmlnaHQgOiByZWN0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGNvb3Jkcy50b3BcbiAgICAgICAgICAgICAgICAgICAgfSA6IGNvb3JkcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDEgJiYgZHgpXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBjaGlsZEluZGV4ICsgKGNvb3Jkcy5sZWZ0ID49IChyZWN0LmxlZnQgKyByZWN0LnJpZ2h0KSAvIDIgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHJlY3QudG9wID4gY29vcmRzLnRvcCAmJiAhZmlyc3RCZWxvdyAmJiByZWN0LmxlZnQgPD0gY29vcmRzLmxlZnQgJiYgcmVjdC5yaWdodCA+PSBjb29yZHMubGVmdCkge1xuICAgICAgICAgICAgICAgIGZpcnN0QmVsb3cgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICBjb29yZHNCZWxvdyA9IHsgbGVmdDogTWF0aC5tYXgocmVjdC5sZWZ0LCBNYXRoLm1pbihyZWN0LnJpZ2h0LCBjb29yZHMubGVmdCkpLCB0b3A6IHJlY3QudG9wIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNsb3Nlc3QgJiYgKGNvb3Jkcy5sZWZ0ID49IHJlY3QucmlnaHQgJiYgY29vcmRzLnRvcCA+PSByZWN0LnRvcCB8fFxuICAgICAgICAgICAgICAgIGNvb3Jkcy5sZWZ0ID49IHJlY3QubGVmdCAmJiBjb29yZHMudG9wID49IHJlY3QuYm90dG9tKSlcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBjaGlsZEluZGV4ICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWNsb3Nlc3QgJiYgZmlyc3RCZWxvdykge1xuICAgICAgICBjbG9zZXN0ID0gZmlyc3RCZWxvdztcbiAgICAgICAgY29vcmRzQ2xvc2VzdCA9IGNvb3Jkc0JlbG93O1xuICAgICAgICBkeENsb3Nlc3QgPSAwO1xuICAgIH1cbiAgICBpZiAoY2xvc2VzdCAmJiBjbG9zZXN0Lm5vZGVUeXBlID09IDMpXG4gICAgICAgIHJldHVybiBmaW5kT2Zmc2V0SW5UZXh0KGNsb3Nlc3QsIGNvb3Jkc0Nsb3Nlc3QpO1xuICAgIGlmICghY2xvc2VzdCB8fCAoZHhDbG9zZXN0ICYmIGNsb3Nlc3Qubm9kZVR5cGUgPT0gMSkpXG4gICAgICAgIHJldHVybiB7IG5vZGUsIG9mZnNldCB9O1xuICAgIHJldHVybiBmaW5kT2Zmc2V0SW5Ob2RlKGNsb3Nlc3QsIGNvb3Jkc0Nsb3Nlc3QpO1xufVxuZnVuY3Rpb24gZmluZE9mZnNldEluVGV4dChub2RlLCBjb29yZHMpIHtcbiAgICBsZXQgbGVuID0gbm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgIGxldCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICByYW5nZS5zZXRFbmQobm9kZSwgaSArIDEpO1xuICAgICAgICByYW5nZS5zZXRTdGFydChub2RlLCBpKTtcbiAgICAgICAgbGV0IHJlY3QgPSBzaW5nbGVSZWN0KHJhbmdlLCAxKTtcbiAgICAgICAgaWYgKHJlY3QudG9wID09IHJlY3QuYm90dG9tKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChpblJlY3QoY29vcmRzLCByZWN0KSlcbiAgICAgICAgICAgIHJldHVybiB7IG5vZGUsIG9mZnNldDogaSArIChjb29yZHMubGVmdCA+PSAocmVjdC5sZWZ0ICsgcmVjdC5yaWdodCkgLyAyID8gMSA6IDApIH07XG4gICAgfVxuICAgIHJldHVybiB7IG5vZGUsIG9mZnNldDogMCB9O1xufVxuZnVuY3Rpb24gaW5SZWN0KGNvb3JkcywgcmVjdCkge1xuICAgIHJldHVybiBjb29yZHMubGVmdCA+PSByZWN0LmxlZnQgLSAxICYmIGNvb3Jkcy5sZWZ0IDw9IHJlY3QucmlnaHQgKyAxICYmXG4gICAgICAgIGNvb3Jkcy50b3AgPj0gcmVjdC50b3AgLSAxICYmIGNvb3Jkcy50b3AgPD0gcmVjdC5ib3R0b20gKyAxO1xufVxuZnVuY3Rpb24gdGFyZ2V0S2x1ZGdlKGRvbSwgY29vcmRzKSB7XG4gICAgbGV0IHBhcmVudCA9IGRvbS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQgJiYgL15saSQvaS50ZXN0KHBhcmVudC5ub2RlTmFtZSkgJiYgY29vcmRzLmxlZnQgPCBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdClcbiAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICByZXR1cm4gZG9tO1xufVxuZnVuY3Rpb24gcG9zRnJvbUVsZW1lbnQodmlldywgZWx0LCBjb29yZHMpIHtcbiAgICBsZXQgeyBub2RlLCBvZmZzZXQgfSA9IGZpbmRPZmZzZXRJbk5vZGUoZWx0LCBjb29yZHMpLCBiaWFzID0gLTE7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiAhbm9kZS5maXJzdENoaWxkKSB7XG4gICAgICAgIGxldCByZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgYmlhcyA9IHJlY3QubGVmdCAhPSByZWN0LnJpZ2h0ICYmIGNvb3Jkcy5sZWZ0ID4gKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMiA/IDEgOiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXcuZG9jVmlldy5wb3NGcm9tRE9NKG5vZGUsIG9mZnNldCwgYmlhcyk7XG59XG5mdW5jdGlvbiBwb3NGcm9tQ2FyZXQodmlldywgbm9kZSwgb2Zmc2V0LCBjb29yZHMpIHtcbiAgICAvLyBCcm93c2VyIChpbiBjYXJldFBvc2l0aW9uL1JhbmdlRnJvbVBvaW50KSB3aWxsIGFncmVzc2l2ZWx5XG4gICAgLy8gbm9ybWFsaXplIHRvd2FyZHMgbmVhcmJ5IGlubGluZSBub2Rlcy4gU2luY2Ugd2UgYXJlIGludGVyZXN0ZWQgaW5cbiAgICAvLyBwb3NpdGlvbnMgYmV0d2VlbiBibG9jayBub2RlcyB0b28sIHdlIGZpcnN0IHdhbGsgdXAgdGhlIGhpZXJhcmNoeVxuICAgIC8vIG9mIG5vZGVzIHRvIHNlZSBpZiB0aGVyZSBhcmUgYmxvY2sgbm9kZXMgdGhhdCB0aGUgY29vcmRpbmF0ZXNcbiAgICAvLyBmYWxsIG91dHNpZGUgb2YuIElmIHNvLCB3ZSB0YWtlIHRoZSBwb3NpdGlvbiBiZWZvcmUvYWZ0ZXIgdGhhdFxuICAgIC8vIGJsb2NrLiBJZiBub3QsIHdlIGNhbGwgYHBvc0Zyb21ET01gIG9uIHRoZSByYXcgbm9kZS9vZmZzZXQuXG4gICAgbGV0IG91dHNpZGVCbG9jayA9IC0xO1xuICAgIGZvciAobGV0IGN1ciA9IG5vZGUsIHNhd0Jsb2NrID0gZmFsc2U7Oykge1xuICAgICAgICBpZiAoY3VyID09IHZpZXcuZG9tKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGxldCBkZXNjID0gdmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKGN1ciwgdHJ1ZSk7XG4gICAgICAgIGlmICghZGVzYylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoZGVzYy5kb20ubm9kZVR5cGUgPT0gMSAmJiAoZGVzYy5ub2RlLmlzQmxvY2sgJiYgZGVzYy5wYXJlbnQgJiYgIXNhd0Jsb2NrIHx8ICFkZXNjLmNvbnRlbnRET00pKSB7XG4gICAgICAgICAgICBsZXQgcmVjdCA9IGRlc2MuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgaWYgKGRlc2Mubm9kZS5pc0Jsb2NrICYmIGRlc2MucGFyZW50ICYmICFzYXdCbG9jaykge1xuICAgICAgICAgICAgICAgIHNhd0Jsb2NrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAocmVjdC5sZWZ0ID4gY29vcmRzLmxlZnQgfHwgcmVjdC50b3AgPiBjb29yZHMudG9wKVxuICAgICAgICAgICAgICAgICAgICBvdXRzaWRlQmxvY2sgPSBkZXNjLnBvc0JlZm9yZTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWN0LnJpZ2h0IDwgY29vcmRzLmxlZnQgfHwgcmVjdC5ib3R0b20gPCBjb29yZHMudG9wKVxuICAgICAgICAgICAgICAgICAgICBvdXRzaWRlQmxvY2sgPSBkZXNjLnBvc0FmdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFkZXNjLmNvbnRlbnRET00gJiYgb3V0c2lkZUJsb2NrIDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGFyZSBpbnNpZGUgYSBsZWFmLCByZXR1cm4gdGhlIHNpZGUgb2YgdGhlIGxlYWYgY2xvc2VyIHRvIHRoZSBjb29yZHNcbiAgICAgICAgICAgICAgICBsZXQgYmVmb3JlID0gZGVzYy5ub2RlLmlzQmxvY2sgPyBjb29yZHMudG9wIDwgKHJlY3QudG9wICsgcmVjdC5ib3R0b20pIC8gMlxuICAgICAgICAgICAgICAgICAgICA6IGNvb3Jkcy5sZWZ0IDwgKHJlY3QubGVmdCArIHJlY3QucmlnaHQpIC8gMjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmVmb3JlID8gZGVzYy5wb3NCZWZvcmUgOiBkZXNjLnBvc0FmdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN1ciA9IGRlc2MuZG9tLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBvdXRzaWRlQmxvY2sgPiAtMSA/IG91dHNpZGVCbG9jayA6IHZpZXcuZG9jVmlldy5wb3NGcm9tRE9NKG5vZGUsIG9mZnNldCwgLTEpO1xufVxuZnVuY3Rpb24gZWxlbWVudEZyb21Qb2ludChlbGVtZW50LCBjb29yZHMsIGJveCkge1xuICAgIGxldCBsZW4gPSBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgIGlmIChsZW4gJiYgYm94LnRvcCA8IGJveC5ib3R0b20pIHtcbiAgICAgICAgZm9yIChsZXQgc3RhcnRJID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obGVuIC0gMSwgTWF0aC5mbG9vcihsZW4gKiAoY29vcmRzLnRvcCAtIGJveC50b3ApIC8gKGJveC5ib3R0b20gLSBib3gudG9wKSkgLSAyKSksIGkgPSBzdGFydEk7Oykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdHMgPSBjaGlsZC5nZXRDbGllbnRSZWN0cygpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmVjdHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3QgPSByZWN0c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluUmVjdChjb29yZHMsIHJlY3QpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRGcm9tUG9pbnQoY2hpbGQsIGNvb3JkcywgcmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChpID0gKGkgKyAxKSAlIGxlbikgPT0gc3RhcnRJKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50O1xufVxuLy8gR2l2ZW4gYW4geCx5IHBvc2l0aW9uIG9uIHRoZSBlZGl0b3IsIGdldCB0aGUgcG9zaXRpb24gaW4gdGhlIGRvY3VtZW50LlxuZnVuY3Rpb24gcG9zQXRDb29yZHModmlldywgY29vcmRzKSB7XG4gICAgbGV0IGRvYyA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQsIG5vZGUsIG9mZnNldCA9IDA7XG4gICAgbGV0IGNhcmV0ID0gY2FyZXRGcm9tUG9pbnQoZG9jLCBjb29yZHMubGVmdCwgY29vcmRzLnRvcCk7XG4gICAgaWYgKGNhcmV0KVxuICAgICAgICAoeyBub2RlLCBvZmZzZXQgfSA9IGNhcmV0KTtcbiAgICBsZXQgZWx0ID0gKHZpZXcucm9vdC5lbGVtZW50RnJvbVBvaW50ID8gdmlldy5yb290IDogZG9jKVxuICAgICAgICAuZWxlbWVudEZyb21Qb2ludChjb29yZHMubGVmdCwgY29vcmRzLnRvcCk7XG4gICAgbGV0IHBvcztcbiAgICBpZiAoIWVsdCB8fCAhdmlldy5kb20uY29udGFpbnMoZWx0Lm5vZGVUeXBlICE9IDEgPyBlbHQucGFyZW50Tm9kZSA6IGVsdCkpIHtcbiAgICAgICAgbGV0IGJveCA9IHZpZXcuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoIWluUmVjdChjb29yZHMsIGJveCkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgZWx0ID0gZWxlbWVudEZyb21Qb2ludCh2aWV3LmRvbSwgY29vcmRzLCBib3gpO1xuICAgICAgICBpZiAoIWVsdClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBTYWZhcmkncyBjYXJldFJhbmdlRnJvbVBvaW50IHJldHVybnMgbm9uc2Vuc2Ugd2hlbiBvbiBhIGRyYWdnYWJsZSBlbGVtZW50XG4gICAgaWYgKHNhZmFyaSkge1xuICAgICAgICBmb3IgKGxldCBwID0gZWx0OyBub2RlICYmIHA7IHAgPSBwYXJlbnROb2RlKHApKVxuICAgICAgICAgICAgaWYgKHAuZHJhZ2dhYmxlKVxuICAgICAgICAgICAgICAgIG5vZGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVsdCA9IHRhcmdldEtsdWRnZShlbHQsIGNvb3Jkcyk7XG4gICAgaWYgKG5vZGUpIHtcbiAgICAgICAgaWYgKGdlY2tvICYmIG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICAgICAgLy8gRmlyZWZveCB3aWxsIHNvbWV0aW1lcyByZXR1cm4gb2Zmc2V0cyBpbnRvIDxpbnB1dD4gbm9kZXMsIHdoaWNoXG4gICAgICAgICAgICAvLyBoYXZlIG5vIGFjdHVhbCBjaGlsZHJlbiwgZnJvbSBjYXJldFBvc2l0aW9uRnJvbVBvaW50ICgjOTUzKVxuICAgICAgICAgICAgb2Zmc2V0ID0gTWF0aC5taW4ob2Zmc2V0LCBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIC8vIEl0J2xsIGFsc28gbW92ZSB0aGUgcmV0dXJuZWQgcG9zaXRpb24gYmVmb3JlIGltYWdlIG5vZGVzLFxuICAgICAgICAgICAgLy8gZXZlbiBpZiB0aG9zZSBhcmUgYmVoaW5kIGl0LlxuICAgICAgICAgICAgaWYgKG9mZnNldCA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXRdLCBib3g7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQubm9kZU5hbWUgPT0gXCJJTUdcIiAmJiAoYm94ID0gbmV4dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkucmlnaHQgPD0gY29vcmRzLmxlZnQgJiZcbiAgICAgICAgICAgICAgICAgICAgYm94LmJvdHRvbSA+IGNvb3Jkcy50b3ApXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN1c3BpY2lvdXNseSBzcGVjaWZpYyBrbHVkZ2UgdG8gd29yayBhcm91bmQgY2FyZXQqRnJvbVBvaW50XG4gICAgICAgIC8vIG5ldmVyIHJldHVybmluZyBhIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIGRvY3VtZW50XG4gICAgICAgIGlmIChub2RlID09IHZpZXcuZG9tICYmIG9mZnNldCA9PSBub2RlLmNoaWxkTm9kZXMubGVuZ3RoIC0gMSAmJiBub2RlLmxhc3RDaGlsZC5ub2RlVHlwZSA9PSAxICYmXG4gICAgICAgICAgICBjb29yZHMudG9wID4gbm9kZS5sYXN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKVxuICAgICAgICAgICAgcG9zID0gdmlldy5zdGF0ZS5kb2MuY29udGVudC5zaXplO1xuICAgICAgICAvLyBJZ25vcmUgcG9zaXRpb25zIGRpcmVjdGx5IGFmdGVyIGEgQlIsIHNpbmNlIGNhcmV0KkZyb21Qb2ludFxuICAgICAgICAvLyAncm91bmQgdXAnIHBvc2l0aW9ucyB0aGF0IHdvdWxkIGJlIG1vcmUgYWNjdXJhdGVseSBwbGFjZWRcbiAgICAgICAgLy8gYmVmb3JlIHRoZSBCUiBub2RlLlxuICAgICAgICBlbHNlIGlmIChvZmZzZXQgPT0gMCB8fCBub2RlLm5vZGVUeXBlICE9IDEgfHwgbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdLm5vZGVOYW1lICE9IFwiQlJcIilcbiAgICAgICAgICAgIHBvcyA9IHBvc0Zyb21DYXJldCh2aWV3LCBub2RlLCBvZmZzZXQsIGNvb3Jkcyk7XG4gICAgfVxuICAgIGlmIChwb3MgPT0gbnVsbClcbiAgICAgICAgcG9zID0gcG9zRnJvbUVsZW1lbnQodmlldywgZWx0LCBjb29yZHMpO1xuICAgIGxldCBkZXNjID0gdmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKGVsdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIHsgcG9zLCBpbnNpZGU6IGRlc2MgPyBkZXNjLnBvc0F0U3RhcnQgLSBkZXNjLmJvcmRlciA6IC0xIH07XG59XG5mdW5jdGlvbiBub25aZXJvKHJlY3QpIHtcbiAgICByZXR1cm4gcmVjdC50b3AgPCByZWN0LmJvdHRvbSB8fCByZWN0LmxlZnQgPCByZWN0LnJpZ2h0O1xufVxuZnVuY3Rpb24gc2luZ2xlUmVjdCh0YXJnZXQsIGJpYXMpIHtcbiAgICBsZXQgcmVjdHMgPSB0YXJnZXQuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICBpZiAocmVjdHMubGVuZ3RoKSB7XG4gICAgICAgIGxldCBmaXJzdCA9IHJlY3RzW2JpYXMgPCAwID8gMCA6IHJlY3RzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobm9uWmVybyhmaXJzdCkpXG4gICAgICAgICAgICByZXR1cm4gZmlyc3Q7XG4gICAgfVxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKHJlY3RzLCBub25aZXJvKSB8fCB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG59XG5jb25zdCBCSURJID0gL1tcXHUwNTkwLVxcdTA1ZjRcXHUwNjAwLVxcdTA2ZmZcXHUwNzAwLVxcdTA4YWNdLztcbi8vIEdpdmVuIGEgcG9zaXRpb24gaW4gdGhlIGRvY3VtZW50IG1vZGVsLCBnZXQgYSBib3VuZGluZyBib3ggb2YgdGhlXG4vLyBjaGFyYWN0ZXIgYXQgdGhhdCBwb3NpdGlvbiwgcmVsYXRpdmUgdG8gdGhlIHdpbmRvdy5cbmZ1bmN0aW9uIGNvb3Jkc0F0UG9zKHZpZXcsIHBvcywgc2lkZSkge1xuICAgIGxldCB7IG5vZGUsIG9mZnNldCwgYXRvbSB9ID0gdmlldy5kb2NWaWV3LmRvbUZyb21Qb3MocG9zLCBzaWRlIDwgMCA/IC0xIDogMSk7XG4gICAgbGV0IHN1cHBvcnRFbXB0eVJhbmdlID0gd2Via2l0IHx8IGdlY2tvO1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgLy8gVGhlc2UgYnJvd3NlcnMgc3VwcG9ydCBxdWVyeWluZyBlbXB0eSB0ZXh0IHJhbmdlcy4gUHJlZmVyIHRoYXQgaW5cbiAgICAgICAgLy8gYmlkaSBjb250ZXh0IG9yIHdoZW4gYXQgdGhlIGVuZCBvZiBhIG5vZGUuXG4gICAgICAgIGlmIChzdXBwb3J0RW1wdHlSYW5nZSAmJiAoQklESS50ZXN0KG5vZGUubm9kZVZhbHVlKSB8fCAoc2lkZSA8IDAgPyAhb2Zmc2V0IDogb2Zmc2V0ID09IG5vZGUubm9kZVZhbHVlLmxlbmd0aCkpKSB7XG4gICAgICAgICAgICBsZXQgcmVjdCA9IHNpbmdsZVJlY3QodGV4dFJhbmdlKG5vZGUsIG9mZnNldCwgb2Zmc2V0KSwgc2lkZSk7XG4gICAgICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgYmFkIHJlc3VsdHMgKHRoZSBwb3NpdGlvbiBiZWZvcmUgdGhlIHNwYWNlKVxuICAgICAgICAgICAgLy8gd2hlbiBxdWVyeWluZyBhIHBvc2l0aW9uIGRpcmVjdGx5IGFmdGVyIGxpbmUtYnJva2VuXG4gICAgICAgICAgICAvLyB3aGl0ZXNwYWNlLiBEZXRlY3QgdGhpcyBzaXR1YXRpb24gYW5kIGFuZCBrbHVkZ2UgYXJvdW5kIGl0XG4gICAgICAgICAgICBpZiAoZ2Vja28gJiYgb2Zmc2V0ICYmIC9cXHMvLnRlc3Qobm9kZS5ub2RlVmFsdWVbb2Zmc2V0IC0gMV0pICYmIG9mZnNldCA8IG5vZGUubm9kZVZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCByZWN0QmVmb3JlID0gc2luZ2xlUmVjdCh0ZXh0UmFuZ2Uobm9kZSwgb2Zmc2V0IC0gMSwgb2Zmc2V0IC0gMSksIC0xKTtcbiAgICAgICAgICAgICAgICBpZiAocmVjdEJlZm9yZS50b3AgPT0gcmVjdC50b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlY3RBZnRlciA9IHNpbmdsZVJlY3QodGV4dFJhbmdlKG5vZGUsIG9mZnNldCwgb2Zmc2V0ICsgMSksIC0xKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3RBZnRlci50b3AgIT0gcmVjdC50b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmxhdHRlblYocmVjdEFmdGVyLCByZWN0QWZ0ZXIubGVmdCA8IHJlY3RCZWZvcmUubGVmdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IG9mZnNldCwgdG8gPSBvZmZzZXQsIHRha2VTaWRlID0gc2lkZSA8IDAgPyAxIDogLTE7XG4gICAgICAgICAgICBpZiAoc2lkZSA8IDAgJiYgIW9mZnNldCkge1xuICAgICAgICAgICAgICAgIHRvKys7XG4gICAgICAgICAgICAgICAgdGFrZVNpZGUgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNpZGUgPj0gMCAmJiBvZmZzZXQgPT0gbm9kZS5ub2RlVmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICAgICAgICAgIHRha2VTaWRlID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNpZGUgPCAwKSB7XG4gICAgICAgICAgICAgICAgZnJvbS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdG8rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmbGF0dGVuVihzaW5nbGVSZWN0KHRleHRSYW5nZShub2RlLCBmcm9tLCB0byksIHRha2VTaWRlKSwgdGFrZVNpZGUgPCAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgJGRvbSA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUocG9zIC0gKGF0b20gfHwgMCkpO1xuICAgIC8vIFJldHVybiBhIGhvcml6b250YWwgbGluZSBpbiBibG9jayBjb250ZXh0XG4gICAgaWYgKCEkZG9tLnBhcmVudC5pbmxpbmVDb250ZW50KSB7XG4gICAgICAgIGlmIChhdG9tID09IG51bGwgJiYgb2Zmc2V0ICYmIChzaWRlIDwgMCB8fCBvZmZzZXQgPT0gbm9kZVNpemUobm9kZSkpKSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdO1xuICAgICAgICAgICAgaWYgKGJlZm9yZS5ub2RlVHlwZSA9PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmbGF0dGVuSChiZWZvcmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXRvbSA9PSBudWxsICYmIG9mZnNldCA8IG5vZGVTaXplKG5vZGUpKSB7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIGlmIChhZnRlci5ub2RlVHlwZSA9PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmbGF0dGVuSChhZnRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYXR0ZW5IKG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHNpZGUgPj0gMCk7XG4gICAgfVxuICAgIC8vIElubGluZSwgbm90IGluIHRleHQgbm9kZSAodGhpcyBpcyBub3QgQmlkaS1zYWZlKVxuICAgIGlmIChhdG9tID09IG51bGwgJiYgb2Zmc2V0ICYmIChzaWRlIDwgMCB8fCBvZmZzZXQgPT0gbm9kZVNpemUobm9kZSkpKSB7XG4gICAgICAgIGxldCBiZWZvcmUgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgIGxldCB0YXJnZXQgPSBiZWZvcmUubm9kZVR5cGUgPT0gMyA/IHRleHRSYW5nZShiZWZvcmUsIG5vZGVTaXplKGJlZm9yZSkgLSAoc3VwcG9ydEVtcHR5UmFuZ2UgPyAwIDogMSkpXG4gICAgICAgICAgICAvLyBCUiBub2RlcyB0ZW5kIHRvIG9ubHkgcmV0dXJuIHRoZSByZWN0YW5nbGUgYmVmb3JlIHRoZW0uXG4gICAgICAgICAgICAvLyBPbmx5IHVzZSB0aGVtIGlmIHRoZXkgYXJlIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlaXIgcGFyZW50XG4gICAgICAgICAgICA6IGJlZm9yZS5ub2RlVHlwZSA9PSAxICYmIChiZWZvcmUubm9kZU5hbWUgIT0gXCJCUlwiIHx8ICFiZWZvcmUubmV4dFNpYmxpbmcpID8gYmVmb3JlIDogbnVsbDtcbiAgICAgICAgaWYgKHRhcmdldClcbiAgICAgICAgICAgIHJldHVybiBmbGF0dGVuVihzaW5nbGVSZWN0KHRhcmdldCwgMSksIGZhbHNlKTtcbiAgICB9XG4gICAgaWYgKGF0b20gPT0gbnVsbCAmJiBvZmZzZXQgPCBub2RlU2l6ZShub2RlKSkge1xuICAgICAgICBsZXQgYWZ0ZXIgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgd2hpbGUgKGFmdGVyLnBtVmlld0Rlc2MgJiYgYWZ0ZXIucG1WaWV3RGVzYy5pZ25vcmVGb3JDb29yZHMpXG4gICAgICAgICAgICBhZnRlciA9IGFmdGVyLm5leHRTaWJsaW5nO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gIWFmdGVyID8gbnVsbCA6IGFmdGVyLm5vZGVUeXBlID09IDMgPyB0ZXh0UmFuZ2UoYWZ0ZXIsIDAsIChzdXBwb3J0RW1wdHlSYW5nZSA/IDAgOiAxKSlcbiAgICAgICAgICAgIDogYWZ0ZXIubm9kZVR5cGUgPT0gMSA/IGFmdGVyIDogbnVsbDtcbiAgICAgICAgaWYgKHRhcmdldClcbiAgICAgICAgICAgIHJldHVybiBmbGF0dGVuVihzaW5nbGVSZWN0KHRhcmdldCwgLTEpLCB0cnVlKTtcbiAgICB9XG4gICAgLy8gQWxsIGVsc2UgZmFpbGVkLCBqdXN0IHRyeSB0byBnZXQgYSByZWN0YW5nbGUgZm9yIHRoZSB0YXJnZXQgbm9kZVxuICAgIHJldHVybiBmbGF0dGVuVihzaW5nbGVSZWN0KG5vZGUubm9kZVR5cGUgPT0gMyA/IHRleHRSYW5nZShub2RlKSA6IG5vZGUsIC1zaWRlKSwgc2lkZSA+PSAwKTtcbn1cbmZ1bmN0aW9uIGZsYXR0ZW5WKHJlY3QsIGxlZnQpIHtcbiAgICBpZiAocmVjdC53aWR0aCA9PSAwKVxuICAgICAgICByZXR1cm4gcmVjdDtcbiAgICBsZXQgeCA9IGxlZnQgPyByZWN0LmxlZnQgOiByZWN0LnJpZ2h0O1xuICAgIHJldHVybiB7IHRvcDogcmVjdC50b3AsIGJvdHRvbTogcmVjdC5ib3R0b20sIGxlZnQ6IHgsIHJpZ2h0OiB4IH07XG59XG5mdW5jdGlvbiBmbGF0dGVuSChyZWN0LCB0b3ApIHtcbiAgICBpZiAocmVjdC5oZWlnaHQgPT0gMClcbiAgICAgICAgcmV0dXJuIHJlY3Q7XG4gICAgbGV0IHkgPSB0b3AgPyByZWN0LnRvcCA6IHJlY3QuYm90dG9tO1xuICAgIHJldHVybiB7IHRvcDogeSwgYm90dG9tOiB5LCBsZWZ0OiByZWN0LmxlZnQsIHJpZ2h0OiByZWN0LnJpZ2h0IH07XG59XG5mdW5jdGlvbiB3aXRoRmx1c2hlZFN0YXRlKHZpZXcsIHN0YXRlLCBmKSB7XG4gICAgbGV0IHZpZXdTdGF0ZSA9IHZpZXcuc3RhdGUsIGFjdGl2ZSA9IHZpZXcucm9vdC5hY3RpdmVFbGVtZW50O1xuICAgIGlmICh2aWV3U3RhdGUgIT0gc3RhdGUpXG4gICAgICAgIHZpZXcudXBkYXRlU3RhdGUoc3RhdGUpO1xuICAgIGlmIChhY3RpdmUgIT0gdmlldy5kb20pXG4gICAgICAgIHZpZXcuZm9jdXMoKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZigpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWYgKHZpZXdTdGF0ZSAhPSBzdGF0ZSlcbiAgICAgICAgICAgIHZpZXcudXBkYXRlU3RhdGUodmlld1N0YXRlKTtcbiAgICAgICAgaWYgKGFjdGl2ZSAhPSB2aWV3LmRvbSAmJiBhY3RpdmUpXG4gICAgICAgICAgICBhY3RpdmUuZm9jdXMoKTtcbiAgICB9XG59XG4vLyBXaGV0aGVyIHZlcnRpY2FsIHBvc2l0aW9uIG1vdGlvbiBpbiBhIGdpdmVuIGRpcmVjdGlvblxuLy8gZnJvbSBhIHBvc2l0aW9uIHdvdWxkIGxlYXZlIGEgdGV4dCBibG9jay5cbmZ1bmN0aW9uIGVuZE9mVGV4dGJsb2NrVmVydGljYWwodmlldywgc3RhdGUsIGRpcikge1xuICAgIGxldCBzZWwgPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgbGV0ICRwb3MgPSBkaXIgPT0gXCJ1cFwiID8gc2VsLiRmcm9tIDogc2VsLiR0bztcbiAgICByZXR1cm4gd2l0aEZsdXNoZWRTdGF0ZSh2aWV3LCBzdGF0ZSwgKCkgPT4ge1xuICAgICAgICBsZXQgeyBub2RlOiBkb20gfSA9IHZpZXcuZG9jVmlldy5kb21Gcm9tUG9zKCRwb3MucG9zLCBkaXIgPT0gXCJ1cFwiID8gLTEgOiAxKTtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IG5lYXJlc3QgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZG9tLCB0cnVlKTtcbiAgICAgICAgICAgIGlmICghbmVhcmVzdClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGlmIChuZWFyZXN0Lm5vZGUuaXNCbG9jaykge1xuICAgICAgICAgICAgICAgIGRvbSA9IG5lYXJlc3QuY29udGVudERPTSB8fCBuZWFyZXN0LmRvbTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbSA9IG5lYXJlc3QuZG9tLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvb3JkcyA9IGNvb3Jkc0F0UG9zKHZpZXcsICRwb3MucG9zLCAxKTtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgPSBkb20uZmlyc3RDaGlsZDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgIGxldCBib3hlcztcbiAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSAxKVxuICAgICAgICAgICAgICAgIGJveGVzID0gY2hpbGQuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGNoaWxkLm5vZGVUeXBlID09IDMpXG4gICAgICAgICAgICAgICAgYm94ZXMgPSB0ZXh0UmFuZ2UoY2hpbGQsIDAsIGNoaWxkLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJveGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGJveCA9IGJveGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChib3guYm90dG9tID4gYm94LnRvcCArIDEgJiZcbiAgICAgICAgICAgICAgICAgICAgKGRpciA9PSBcInVwXCIgPyBjb29yZHMudG9wIC0gYm94LnRvcCA+IChib3guYm90dG9tIC0gY29vcmRzLnRvcCkgKiAyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGJveC5ib3R0b20gLSBjb29yZHMuYm90dG9tID4gKGNvb3Jkcy5ib3R0b20gLSBib3gudG9wKSAqIDIpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG59XG5jb25zdCBtYXliZVJUTCA9IC9bXFx1MDU5MC1cXHUwOGFjXS87XG5mdW5jdGlvbiBlbmRPZlRleHRibG9ja0hvcml6b250YWwodmlldywgc3RhdGUsIGRpcikge1xuICAgIGxldCB7ICRoZWFkIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKCEkaGVhZC5wYXJlbnQuaXNUZXh0YmxvY2spXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgb2Zmc2V0ID0gJGhlYWQucGFyZW50T2Zmc2V0LCBhdFN0YXJ0ID0gIW9mZnNldCwgYXRFbmQgPSBvZmZzZXQgPT0gJGhlYWQucGFyZW50LmNvbnRlbnQuc2l6ZTtcbiAgICBsZXQgc2VsID0gdmlldy5kb21TZWxlY3Rpb24oKTtcbiAgICAvLyBJZiB0aGUgdGV4dGJsb2NrIGlzIGFsbCBMVFIsIG9yIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydFxuICAgIC8vIFNlbGVjdGlvbi5tb2RpZnkgKEVkZ2UpLCBmYWxsIGJhY2sgdG8gYSBwcmltaXRpdmUgYXBwcm9hY2hcbiAgICBpZiAoIW1heWJlUlRMLnRlc3QoJGhlYWQucGFyZW50LnRleHRDb250ZW50KSB8fCAhc2VsLm1vZGlmeSlcbiAgICAgICAgcmV0dXJuIGRpciA9PSBcImxlZnRcIiB8fCBkaXIgPT0gXCJiYWNrd2FyZFwiID8gYXRTdGFydCA6IGF0RW5kO1xuICAgIHJldHVybiB3aXRoRmx1c2hlZFN0YXRlKHZpZXcsIHN0YXRlLCAoKSA9PiB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBodWdlIGhhY2ssIGJ1dCBhcHBlYXJzIHRvIGJlIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBjdXJyZW50bHkgZG86IHVzZSBgU2VsZWN0aW9uLm1vZGlmeWAgdG8gbW92ZSB0aGUgc2VsZWN0aW9uIGJ5XG4gICAgICAgIC8vIG9uZSBjaGFyYWN0ZXIsIGFuZCBzZWUgaWYgdGhhdCBtb3ZlcyB0aGUgY3Vyc29yIG91dCBvZiB0aGVcbiAgICAgICAgLy8gdGV4dGJsb2NrIChvciBkb2Vzbid0IG1vdmUgaXQgYXQgYWxsLCB3aGVuIGF0IHRoZSBzdGFydC9lbmQgb2ZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50KS5cbiAgICAgICAgbGV0IHsgZm9jdXNOb2RlOiBvbGROb2RlLCBmb2N1c09mZnNldDogb2xkT2ZmLCBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQgfSA9IHZpZXcuZG9tU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgbGV0IG9sZEJpZGlMZXZlbCA9IHNlbC5jYXJldEJpZGlMZXZlbCAvLyBPbmx5IGZvciBGaXJlZm94XG4gICAgICAgIDtcbiAgICAgICAgc2VsLm1vZGlmeShcIm1vdmVcIiwgZGlyLCBcImNoYXJhY3RlclwiKTtcbiAgICAgICAgbGV0IHBhcmVudERPTSA9ICRoZWFkLmRlcHRoID8gdmlldy5kb2NWaWV3LmRvbUFmdGVyUG9zKCRoZWFkLmJlZm9yZSgpKSA6IHZpZXcuZG9tO1xuICAgICAgICBsZXQgeyBmb2N1c05vZGU6IG5ld05vZGUsIGZvY3VzT2Zmc2V0OiBuZXdPZmYgfSA9IHZpZXcuZG9tU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG5ld05vZGUgJiYgIXBhcmVudERPTS5jb250YWlucyhuZXdOb2RlLm5vZGVUeXBlID09IDEgPyBuZXdOb2RlIDogbmV3Tm9kZS5wYXJlbnROb2RlKSB8fFxuICAgICAgICAgICAgKG9sZE5vZGUgPT0gbmV3Tm9kZSAmJiBvbGRPZmYgPT0gbmV3T2ZmKTtcbiAgICAgICAgLy8gUmVzdG9yZSB0aGUgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWwuY29sbGFwc2UoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChvbGROb2RlICYmIChvbGROb2RlICE9IGFuY2hvck5vZGUgfHwgb2xkT2ZmICE9IGFuY2hvck9mZnNldCkgJiYgc2VsLmV4dGVuZClcbiAgICAgICAgICAgICAgICBzZWwuZXh0ZW5kKG9sZE5vZGUsIG9sZE9mZik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF8pIHsgfVxuICAgICAgICBpZiAob2xkQmlkaUxldmVsICE9IG51bGwpXG4gICAgICAgICAgICBzZWwuY2FyZXRCaWRpTGV2ZWwgPSBvbGRCaWRpTGV2ZWw7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG59XG5sZXQgY2FjaGVkU3RhdGUgPSBudWxsO1xubGV0IGNhY2hlZERpciA9IG51bGw7XG5sZXQgY2FjaGVkUmVzdWx0ID0gZmFsc2U7XG5mdW5jdGlvbiBlbmRPZlRleHRibG9jayh2aWV3LCBzdGF0ZSwgZGlyKSB7XG4gICAgaWYgKGNhY2hlZFN0YXRlID09IHN0YXRlICYmIGNhY2hlZERpciA9PSBkaXIpXG4gICAgICAgIHJldHVybiBjYWNoZWRSZXN1bHQ7XG4gICAgY2FjaGVkU3RhdGUgPSBzdGF0ZTtcbiAgICBjYWNoZWREaXIgPSBkaXI7XG4gICAgcmV0dXJuIGNhY2hlZFJlc3VsdCA9IGRpciA9PSBcInVwXCIgfHwgZGlyID09IFwiZG93blwiXG4gICAgICAgID8gZW5kT2ZUZXh0YmxvY2tWZXJ0aWNhbCh2aWV3LCBzdGF0ZSwgZGlyKVxuICAgICAgICA6IGVuZE9mVGV4dGJsb2NrSG9yaXpvbnRhbCh2aWV3LCBzdGF0ZSwgZGlyKTtcbn1cblxuLy8gVmlldyBkZXNjcmlwdGlvbnMgYXJlIGRhdGEgc3RydWN0dXJlcyB0aGF0IGRlc2NyaWJlIHRoZSBET00gdGhhdCBpc1xuLy8gdXNlZCB0byByZXByZXNlbnQgdGhlIGVkaXRvcidzIGNvbnRlbnQuIFRoZXkgYXJlIHVzZWQgZm9yOlxuLy9cbi8vIC0gSW5jcmVtZW50YWwgcmVkcmF3aW5nIHdoZW4gdGhlIGRvY3VtZW50IGNoYW5nZXNcbi8vXG4vLyAtIEZpZ3VyaW5nIG91dCB3aGF0IHBhcnQgb2YgdGhlIGRvY3VtZW50IGEgZ2l2ZW4gRE9NIHBvc2l0aW9uXG4vLyAgIGNvcnJlc3BvbmRzIHRvXG4vL1xuLy8gLSBXaXJpbmcgaW4gY3VzdG9tIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgZWRpdGluZyBpbnRlcmZhY2UgZm9yIGFcbi8vICAgZ2l2ZW4gbm9kZVxuLy9cbi8vIFRoZXkgZm9ybSBhIGRvdWJseS1saW5rZWQgbXV0YWJsZSB0cmVlLCBzdGFydGluZyBhdCBgdmlldy5kb2NWaWV3YC5cbmNvbnN0IE5PVF9ESVJUWSA9IDAsIENISUxEX0RJUlRZID0gMSwgQ09OVEVOVF9ESVJUWSA9IDIsIE5PREVfRElSVFkgPSAzO1xuLy8gU3VwZXJjbGFzcyBmb3IgdGhlIHZhcmlvdXMga2luZHMgb2YgZGVzY3JpcHRpb25zLiBEZWZpbmVzIHRoZWlyXG4vLyBiYXNpYyBzdHJ1Y3R1cmUgYW5kIHNoYXJlZCBtZXRob2RzLlxuY2xhc3MgVmlld0Rlc2Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgY2hpbGRyZW4sIGRvbSwgXG4gICAgLy8gVGhpcyBpcyB0aGUgbm9kZSB0aGF0IGhvbGRzIHRoZSBjaGlsZCB2aWV3cy4gSXQgbWF5IGJlIG51bGwgZm9yXG4gICAgLy8gZGVzY3MgdGhhdCBkb24ndCBoYXZlIGNoaWxkcmVuLlxuICAgIGNvbnRlbnRET00pIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMuY29udGVudERPTSA9IGNvbnRlbnRET007XG4gICAgICAgIHRoaXMuZGlydHkgPSBOT1RfRElSVFk7XG4gICAgICAgIC8vIEFuIGV4cGFuZG8gcHJvcGVydHkgb24gdGhlIERPTSBub2RlIHByb3ZpZGVzIGEgbGluayBiYWNrIHRvIGl0c1xuICAgICAgICAvLyBkZXNjcmlwdGlvbi5cbiAgICAgICAgZG9tLnBtVmlld0Rlc2MgPSB0aGlzO1xuICAgIH1cbiAgICAvLyBVc2VkIHRvIGNoZWNrIHdoZXRoZXIgYSBnaXZlbiBkZXNjcmlwdGlvbiBjb3JyZXNwb25kcyB0byBhXG4gICAgLy8gd2lkZ2V0L21hcmsvbm9kZS5cbiAgICBtYXRjaGVzV2lkZ2V0KHdpZGdldCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBtYXRjaGVzTWFyayhtYXJrKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIG1hdGNoZXNOb2RlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIG1hdGNoZXNIYWNrKG5vZGVOYW1lKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8vIFdoZW4gcGFyc2luZyBpbi1lZGl0b3IgY29udGVudCAoaW4gZG9tY2hhbmdlLmpzKSwgd2UgYWxsb3dcbiAgICAvLyBkZXNjcmlwdGlvbnMgdG8gZGV0ZXJtaW5lIHRoZSBwYXJzZSBydWxlcyB0aGF0IHNob3VsZCBiZSB1c2VkIHRvXG4gICAgLy8gcGFyc2UgdGhlbS5cbiAgICBwYXJzZVJ1bGUoKSB7IHJldHVybiBudWxsOyB9XG4gICAgLy8gVXNlZCBieSB0aGUgZWRpdG9yJ3MgZXZlbnQgaGFuZGxlciB0byBpZ25vcmUgZXZlbnRzIHRoYXQgY29tZVxuICAgIC8vIGZyb20gY2VydGFpbiBkZXNjcy5cbiAgICBzdG9wRXZlbnQoZXZlbnQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLy8gVGhlIHNpemUgb2YgdGhlIGNvbnRlbnQgcmVwcmVzZW50ZWQgYnkgdGhpcyBkZXNjLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICBsZXQgc2l6ZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIHNpemUgKz0gdGhpcy5jaGlsZHJlbltpXS5zaXplO1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgLy8gRm9yIGJsb2NrIG5vZGVzLCB0aGlzIHJlcHJlc2VudHMgdGhlIHNwYWNlIHRha2VuIHVwIGJ5IHRoZWlyXG4gICAgLy8gc3RhcnQvZW5kIHRva2Vucy5cbiAgICBnZXQgYm9yZGVyKCkgeyByZXR1cm4gMDsgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5kb20ucG1WaWV3RGVzYyA9PSB0aGlzKVxuICAgICAgICAgICAgdGhpcy5kb20ucG1WaWV3RGVzYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbltpXS5kZXN0cm95KCk7XG4gICAgfVxuICAgIHBvc0JlZm9yZUNoaWxkKGNoaWxkKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBwb3MgPSB0aGlzLnBvc0F0U3RhcnQ7OyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGN1ciA9PSBjaGlsZClcbiAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgcG9zICs9IGN1ci5zaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwb3NCZWZvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5wb3NCZWZvcmVDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IHBvc0F0U3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudCA/IHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpICsgdGhpcy5ib3JkZXIgOiAwO1xuICAgIH1cbiAgICBnZXQgcG9zQWZ0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc0JlZm9yZSArIHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgZ2V0IHBvc0F0RW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NBdFN0YXJ0ICsgdGhpcy5zaXplIC0gMiAqIHRoaXMuYm9yZGVyO1xuICAgIH1cbiAgICBsb2NhbFBvc0Zyb21ET00oZG9tLCBvZmZzZXQsIGJpYXMpIHtcbiAgICAgICAgLy8gSWYgdGhlIERPTSBwb3NpdGlvbiBpcyBpbiB0aGUgY29udGVudCwgdXNlIHRoZSBjaGlsZCBkZXNjIGFmdGVyXG4gICAgICAgIC8vIGl0IHRvIGZpZ3VyZSBvdXQgYSBwb3NpdGlvbi5cbiAgICAgICAgaWYgKHRoaXMuY29udGVudERPTSAmJiB0aGlzLmNvbnRlbnRET00uY29udGFpbnMoZG9tLm5vZGVUeXBlID09IDEgPyBkb20gOiBkb20ucGFyZW50Tm9kZSkpIHtcbiAgICAgICAgICAgIGlmIChiaWFzIDwgMCkge1xuICAgICAgICAgICAgICAgIGxldCBkb21CZWZvcmUsIGRlc2M7XG4gICAgICAgICAgICAgICAgaWYgKGRvbSA9PSB0aGlzLmNvbnRlbnRET00pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tQmVmb3JlID0gZG9tLmNoaWxkTm9kZXNbb2Zmc2V0IC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZG9tLnBhcmVudE5vZGUgIT0gdGhpcy5jb250ZW50RE9NKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tID0gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGRvbUJlZm9yZSA9IGRvbS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdoaWxlIChkb21CZWZvcmUgJiYgISgoZGVzYyA9IGRvbUJlZm9yZS5wbVZpZXdEZXNjKSAmJiBkZXNjLnBhcmVudCA9PSB0aGlzKSlcbiAgICAgICAgICAgICAgICAgICAgZG9tQmVmb3JlID0gZG9tQmVmb3JlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9tQmVmb3JlID8gdGhpcy5wb3NCZWZvcmVDaGlsZChkZXNjKSArIGRlc2Muc2l6ZSA6IHRoaXMucG9zQXRTdGFydDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBkb21BZnRlciwgZGVzYztcbiAgICAgICAgICAgICAgICBpZiAoZG9tID09IHRoaXMuY29udGVudERPTSkge1xuICAgICAgICAgICAgICAgICAgICBkb21BZnRlciA9IGRvbS5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZG9tLnBhcmVudE5vZGUgIT0gdGhpcy5jb250ZW50RE9NKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tID0gZG9tLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGRvbUFmdGVyID0gZG9tLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAoZG9tQWZ0ZXIgJiYgISgoZGVzYyA9IGRvbUFmdGVyLnBtVmlld0Rlc2MpICYmIGRlc2MucGFyZW50ID09IHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICBkb21BZnRlciA9IGRvbUFmdGVyLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHJldHVybiBkb21BZnRlciA/IHRoaXMucG9zQmVmb3JlQ2hpbGQoZGVzYykgOiB0aGlzLnBvc0F0RW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgdXNlIHZhcmlvdXMgaGV1cmlzdGljcywgZmFsbGluZyBiYWNrIG9uIHRoZSBiaWFzXG4gICAgICAgIC8vIHBhcmFtZXRlciwgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gcmV0dXJuIHRoZSBwb3NpdGlvbiBhdCB0aGVcbiAgICAgICAgLy8gc3RhcnQgb3IgYXQgdGhlIGVuZCBvZiB0aGlzIHZpZXcgZGVzYy5cbiAgICAgICAgbGV0IGF0RW5kO1xuICAgICAgICBpZiAoZG9tID09IHRoaXMuZG9tICYmIHRoaXMuY29udGVudERPTSkge1xuICAgICAgICAgICAgYXRFbmQgPSBvZmZzZXQgPiBkb21JbmRleCh0aGlzLmNvbnRlbnRET00pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGVudERPTSAmJiB0aGlzLmNvbnRlbnRET00gIT0gdGhpcy5kb20gJiYgdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSkge1xuICAgICAgICAgICAgYXRFbmQgPSBkb20uY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5jb250ZW50RE9NKSAmIDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb20uZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgaWYgKG9mZnNldCA9PSAwKVxuICAgICAgICAgICAgICAgIGZvciAobGV0IHNlYXJjaCA9IGRvbTs7IHNlYXJjaCA9IHNlYXJjaC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2ggPT0gdGhpcy5kb20pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0RW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoLnByZXZpb3VzU2libGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhdEVuZCA9PSBudWxsICYmIG9mZnNldCA9PSBkb20uY2hpbGROb2Rlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc2VhcmNoID0gZG9tOzsgc2VhcmNoID0gc2VhcmNoLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaCA9PSB0aGlzLmRvbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXRFbmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaC5uZXh0U2libGluZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGF0RW5kID09IG51bGwgPyBiaWFzID4gMCA6IGF0RW5kKSA/IHRoaXMucG9zQXRFbmQgOiB0aGlzLnBvc0F0U3RhcnQ7XG4gICAgfVxuICAgIG5lYXJlc3REZXNjKGRvbSwgb25seU5vZGVzID0gZmFsc2UpIHtcbiAgICAgICAgZm9yIChsZXQgZmlyc3QgPSB0cnVlLCBjdXIgPSBkb207IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGxldCBkZXNjID0gdGhpcy5nZXREZXNjKGN1ciksIG5vZGVET007XG4gICAgICAgICAgICBpZiAoZGVzYyAmJiAoIW9ubHlOb2RlcyB8fCBkZXNjLm5vZGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgZG9tIGlzIG91dHNpZGUgb2YgdGhpcyBkZXNjJ3Mgbm9kZURPTSwgZG9uJ3QgY291bnQgaXQuXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0ICYmIChub2RlRE9NID0gZGVzYy5ub2RlRE9NKSAmJlxuICAgICAgICAgICAgICAgICAgICAhKG5vZGVET00ubm9kZVR5cGUgPT0gMSA/IG5vZGVET00uY29udGFpbnMoZG9tLm5vZGVUeXBlID09IDEgPyBkb20gOiBkb20ucGFyZW50Tm9kZSkgOiBub2RlRE9NID09IGRvbSkpXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXREZXNjKGRvbSkge1xuICAgICAgICBsZXQgZGVzYyA9IGRvbS5wbVZpZXdEZXNjO1xuICAgICAgICBmb3IgKGxldCBjdXIgPSBkZXNjOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnQpXG4gICAgICAgICAgICBpZiAoY3VyID09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlc2M7XG4gICAgfVxuICAgIHBvc0Zyb21ET00oZG9tLCBvZmZzZXQsIGJpYXMpIHtcbiAgICAgICAgZm9yIChsZXQgc2NhbiA9IGRvbTsgc2Nhbjsgc2NhbiA9IHNjYW4ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgbGV0IGRlc2MgPSB0aGlzLmdldERlc2Moc2Nhbik7XG4gICAgICAgICAgICBpZiAoZGVzYylcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzYy5sb2NhbFBvc0Zyb21ET00oZG9tLCBvZmZzZXQsIGJpYXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgLy8gRmluZCB0aGUgZGVzYyBmb3IgdGhlIG5vZGUgYWZ0ZXIgdGhlIGdpdmVuIHBvcywgaWYgYW55LiAoV2hlbiBhXG4gICAgLy8gcGFyZW50IG5vZGUgb3ZlcnJvZGUgcmVuZGVyaW5nLCB0aGVyZSBtaWdodCBub3QgYmUgb25lLilcbiAgICBkZXNjQXQocG9zKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBvZmZzZXQgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gb2Zmc2V0ICsgY2hpbGQuc2l6ZTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT0gcG9zICYmIGVuZCAhPSBvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoIWNoaWxkLmJvcmRlciAmJiBjaGlsZC5jaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvcyA8IGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuZGVzY0F0KHBvcyAtIG9mZnNldCAtIGNoaWxkLmJvcmRlcik7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9tRnJvbVBvcyhwb3MsIHNpZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRET00pXG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLmRvbSwgb2Zmc2V0OiAwLCBhdG9tOiBwb3MgKyAxIH07XG4gICAgICAgIC8vIEZpcnN0IGZpbmQgdGhlIHBvc2l0aW9uIGluIHRoZSBjaGlsZCBhcnJheVxuICAgICAgICBsZXQgaSA9IDAsIG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAobGV0IGN1clBvcyA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBjdXJQb3MgKyBjaGlsZC5zaXplO1xuICAgICAgICAgICAgaWYgKGVuZCA+IHBvcyB8fCBjaGlsZCBpbnN0YW5jZW9mIFRyYWlsaW5nSGFja1ZpZXdEZXNjKSB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gcG9zIC0gY3VyUG9zO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyUG9zID0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgcG9pbnRzIGludG8gdGhlIG1pZGRsZSBvZiBhIGNoaWxkLCBjYWxsIHRocm91Z2hcbiAgICAgICAgaWYgKG9mZnNldClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW2ldLmRvbUZyb21Qb3Mob2Zmc2V0IC0gdGhpcy5jaGlsZHJlbltpXS5ib3JkZXIsIHNpZGUpO1xuICAgICAgICAvLyBHbyBiYWNrIGlmIHRoZXJlIHdlcmUgYW55IHplcm8tbGVuZ3RoIHdpZGdldHMgd2l0aCBzaWRlID49IDAgYmVmb3JlIHRoaXMgcG9pbnRcbiAgICAgICAgZm9yIChsZXQgcHJldjsgaSAmJiAhKHByZXYgPSB0aGlzLmNoaWxkcmVuW2kgLSAxXSkuc2l6ZSAmJiBwcmV2IGluc3RhbmNlb2YgV2lkZ2V0Vmlld0Rlc2MgJiYgcHJldi5zaWRlID49IDA7IGktLSkgeyB9XG4gICAgICAgIC8vIFNjYW4gdG93YXJkcyB0aGUgZmlyc3QgdXNlYWJsZSBub2RlXG4gICAgICAgIGlmIChzaWRlIDw9IDApIHtcbiAgICAgICAgICAgIGxldCBwcmV2LCBlbnRlciA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKDs7IGktLSwgZW50ZXIgPSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHByZXYgPSBpID8gdGhpcy5jaGlsZHJlbltpIC0gMV0gOiBudWxsO1xuICAgICAgICAgICAgICAgIGlmICghcHJldiB8fCBwcmV2LmRvbS5wYXJlbnROb2RlID09IHRoaXMuY29udGVudERPTSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJldiAmJiBzaWRlICYmIGVudGVyICYmICFwcmV2LmJvcmRlciAmJiAhcHJldi5kb21BdG9tKVxuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2LmRvbUZyb21Qb3MocHJldi5zaXplLCBzaWRlKTtcbiAgICAgICAgICAgIHJldHVybiB7IG5vZGU6IHRoaXMuY29udGVudERPTSwgb2Zmc2V0OiBwcmV2ID8gZG9tSW5kZXgocHJldi5kb20pICsgMSA6IDAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBuZXh0LCBlbnRlciA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKDs7IGkrKywgZW50ZXIgPSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLmNoaWxkcmVuW2ldIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoIW5leHQgfHwgbmV4dC5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmNvbnRlbnRET00pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHQgJiYgZW50ZXIgJiYgIW5leHQuYm9yZGVyICYmICFuZXh0LmRvbUF0b20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQuZG9tRnJvbVBvcygwLCBzaWRlKTtcbiAgICAgICAgICAgIHJldHVybiB7IG5vZGU6IHRoaXMuY29udGVudERPTSwgb2Zmc2V0OiBuZXh0ID8gZG9tSW5kZXgobmV4dC5kb20pIDogdGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXNlZCB0byBmaW5kIGEgRE9NIHJhbmdlIGluIGEgc2luZ2xlIHBhcmVudCBmb3IgYSBnaXZlbiBjaGFuZ2VkXG4gICAgLy8gcmFuZ2UuXG4gICAgcGFyc2VSYW5nZShmcm9tLCB0bywgYmFzZSA9IDApIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLmNvbnRlbnRET00sIGZyb20sIHRvLCBmcm9tT2Zmc2V0OiAwLCB0b09mZnNldDogdGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoIH07XG4gICAgICAgIGxldCBmcm9tT2Zmc2V0ID0gLTEsIHRvT2Zmc2V0ID0gLTE7XG4gICAgICAgIGZvciAobGV0IG9mZnNldCA9IGJhc2UsIGkgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldLCBlbmQgPSBvZmZzZXQgKyBjaGlsZC5zaXplO1xuICAgICAgICAgICAgaWYgKGZyb21PZmZzZXQgPT0gLTEgJiYgZnJvbSA8PSBlbmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRCYXNlID0gb2Zmc2V0ICsgY2hpbGQuYm9yZGVyO1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FIG1heWJlIGRlc2NlbmQgbWFyayB2aWV3cyB0byBwYXJzZSBhIG5hcnJvd2VyIHJhbmdlP1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID49IGNoaWxkQmFzZSAmJiB0byA8PSBlbmQgLSBjaGlsZC5ib3JkZXIgJiYgY2hpbGQubm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5jb250ZW50RE9NICYmIHRoaXMuY29udGVudERPTS5jb250YWlucyhjaGlsZC5jb250ZW50RE9NKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkLnBhcnNlUmFuZ2UoZnJvbSwgdG8sIGNoaWxkQmFzZSk7XG4gICAgICAgICAgICAgICAgZnJvbSA9IG9mZnNldDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaTsgaiA+IDA7IGotLSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldiA9IHRoaXMuY2hpbGRyZW5baiAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldi5zaXplICYmIHByZXYuZG9tLnBhcmVudE5vZGUgPT0gdGhpcy5jb250ZW50RE9NICYmICFwcmV2LmVtcHR5Q2hpbGRBdCgxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbU9mZnNldCA9IGRvbUluZGV4KHByZXYuZG9tKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmcm9tIC09IHByZXYuc2l6ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZyb21PZmZzZXQgPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIGZyb21PZmZzZXQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZyb21PZmZzZXQgPiAtMSAmJiAoZW5kID4gdG8gfHwgaSA9PSB0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICAgICAgdG8gPSBlbmQ7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMuY2hpbGRyZW5bal07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnNpemUgJiYgbmV4dC5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmNvbnRlbnRET00gJiYgIW5leHQuZW1wdHlDaGlsZEF0KC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9PZmZzZXQgPSBkb21JbmRleChuZXh0LmRvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0byArPSBuZXh0LnNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0b09mZnNldCA9PSAtMSlcbiAgICAgICAgICAgICAgICAgICAgdG9PZmZzZXQgPSB0aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbm9kZTogdGhpcy5jb250ZW50RE9NLCBmcm9tLCB0bywgZnJvbU9mZnNldCwgdG9PZmZzZXQgfTtcbiAgICB9XG4gICAgZW1wdHlDaGlsZEF0KHNpZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9yZGVyIHx8ICF0aGlzLmNvbnRlbnRET00gfHwgIXRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW3NpZGUgPCAwID8gMCA6IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiBjaGlsZC5zaXplID09IDAgfHwgY2hpbGQuZW1wdHlDaGlsZEF0KHNpZGUpO1xuICAgIH1cbiAgICBkb21BZnRlclBvcyhwb3MpIHtcbiAgICAgICAgbGV0IHsgbm9kZSwgb2Zmc2V0IH0gPSB0aGlzLmRvbUZyb21Qb3MocG9zLCAwKTtcbiAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSB8fCBvZmZzZXQgPT0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTm8gbm9kZSBhZnRlciBwb3MgXCIgKyBwb3MpO1xuICAgICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgfVxuICAgIC8vIFZpZXcgZGVzY3MgYXJlIHJlc3BvbnNpYmxlIGZvciBzZXR0aW5nIGFueSBzZWxlY3Rpb24gdGhhdCBmYWxsc1xuICAgIC8vIGVudGlyZWx5IGluc2lkZSBvZiB0aGVtLCBzbyB0aGF0IGN1c3RvbSBpbXBsZW1lbnRhdGlvbnMgY2FuIGRvXG4gICAgLy8gY3VzdG9tIHRoaW5ncyB3aXRoIHRoZSBzZWxlY3Rpb24uIE5vdGUgdGhhdCB0aGlzIGZhbGxzIGFwYXJ0IHdoZW5cbiAgICAvLyBhIHNlbGVjdGlvbiBzdGFydHMgaW4gc3VjaCBhIG5vZGUgYW5kIGVuZHMgaW4gYW5vdGhlciwgaW4gd2hpY2hcbiAgICAvLyBjYXNlIHdlIGp1c3QgdXNlIHdoYXRldmVyIGRvbUZyb21Qb3MgcHJvZHVjZXMgYXMgYSBiZXN0IGVmZm9ydC5cbiAgICBzZXRTZWxlY3Rpb24oYW5jaG9yLCBoZWFkLCByb290LCBmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIHRoZSBzZWxlY3Rpb24gZmFsbHMgZW50aXJlbHkgaW4gYSBjaGlsZCwgZ2l2ZSBpdCB0byB0aGF0IGNoaWxkXG4gICAgICAgIGxldCBmcm9tID0gTWF0aC5taW4oYW5jaG9yLCBoZWFkKSwgdG8gPSBNYXRoLm1heChhbmNob3IsIGhlYWQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgb2Zmc2V0ID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV0sIGVuZCA9IG9mZnNldCArIGNoaWxkLnNpemU7XG4gICAgICAgICAgICBpZiAoZnJvbSA+IG9mZnNldCAmJiB0byA8IGVuZClcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuc2V0U2VsZWN0aW9uKGFuY2hvciAtIG9mZnNldCAtIGNoaWxkLmJvcmRlciwgaGVhZCAtIG9mZnNldCAtIGNoaWxkLmJvcmRlciwgcm9vdCwgZm9yY2UpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIGxldCBhbmNob3JET00gPSB0aGlzLmRvbUZyb21Qb3MoYW5jaG9yLCBhbmNob3IgPyAtMSA6IDEpO1xuICAgICAgICBsZXQgaGVhZERPTSA9IGhlYWQgPT0gYW5jaG9yID8gYW5jaG9yRE9NIDogdGhpcy5kb21Gcm9tUG9zKGhlYWQsIGhlYWQgPyAtMSA6IDEpO1xuICAgICAgICBsZXQgZG9tU2VsID0gcm9vdC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgbGV0IGJyS2x1ZGdlID0gZmFsc2U7XG4gICAgICAgIC8vIE9uIEZpcmVmb3gsIHVzaW5nIFNlbGVjdGlvbi5jb2xsYXBzZSB0byBwdXQgdGhlIGN1cnNvciBhZnRlciBhXG4gICAgICAgIC8vIEJSIG5vZGUgZm9yIHNvbWUgcmVhc29uIGRvZXNuJ3QgYWx3YXlzIHdvcmsgKCMxMDczKS4gT24gU2FmYXJpLFxuICAgICAgICAvLyB0aGUgY3Vyc29yIHNvbWV0aW1lcyBpbmV4cGxpY2FibGUgdmlzdWFsbHkgbGFncyBiZWhpbmQgaXRzXG4gICAgICAgIC8vIHJlcG9ydGVkIHBvc2l0aW9uIGluIHN1Y2ggc2l0dWF0aW9ucyAoIzEwOTIpLlxuICAgICAgICBpZiAoKGdlY2tvIHx8IHNhZmFyaSkgJiYgYW5jaG9yID09IGhlYWQpIHtcbiAgICAgICAgICAgIGxldCB7IG5vZGUsIG9mZnNldCB9ID0gYW5jaG9yRE9NO1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykge1xuICAgICAgICAgICAgICAgIGJyS2x1ZGdlID0gISEob2Zmc2V0ICYmIG5vZGUubm9kZVZhbHVlW29mZnNldCAtIDFdID09IFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIC8vIElzc3VlICMxMTI4XG4gICAgICAgICAgICAgICAgaWYgKGJyS2x1ZGdlICYmIG9mZnNldCA9PSBub2RlLm5vZGVWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc2NhbiA9IG5vZGUsIGFmdGVyOyBzY2FuOyBzY2FuID0gc2Nhbi5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIgPSBzY2FuLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFmdGVyLm5vZGVOYW1lID09IFwiQlJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yRE9NID0gaGVhZERPTSA9IHsgbm9kZTogYWZ0ZXIucGFyZW50Tm9kZSwgb2Zmc2V0OiBkb21JbmRleChhZnRlcikgKyAxIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVzYyA9IHNjYW4ucG1WaWV3RGVzYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICYmIGRlc2Mubm9kZSAmJiBkZXNjLm5vZGUuaXNCbG9jaylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBwcmV2ID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdO1xuICAgICAgICAgICAgICAgIGJyS2x1ZGdlID0gcHJldiAmJiAocHJldi5ub2RlTmFtZSA9PSBcIkJSXCIgfHwgcHJldi5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBGaXJlZm94IGNhbiBhY3Qgc3RyYW5nZWx5IHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBpbiBmcm9udCBvZiBhblxuICAgICAgICAvLyB1bmVkaXRhYmxlIG5vZGUuIFNlZSAjMTE2MyBhbmQgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTcwOTUzNlxuICAgICAgICBpZiAoZ2Vja28gJiYgZG9tU2VsLmZvY3VzTm9kZSAmJiBkb21TZWwuZm9jdXNOb2RlICE9IGhlYWRET00ubm9kZSAmJiBkb21TZWwuZm9jdXNOb2RlLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGxldCBhZnRlciA9IGRvbVNlbC5mb2N1c05vZGUuY2hpbGROb2Rlc1tkb21TZWwuZm9jdXNPZmZzZXRdO1xuICAgICAgICAgICAgaWYgKGFmdGVyICYmIGFmdGVyLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgZm9yY2UgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGZvcmNlIHx8IGJyS2x1ZGdlICYmIHNhZmFyaSkgJiZcbiAgICAgICAgICAgIGlzRXF1aXZhbGVudFBvc2l0aW9uKGFuY2hvckRPTS5ub2RlLCBhbmNob3JET00ub2Zmc2V0LCBkb21TZWwuYW5jaG9yTm9kZSwgZG9tU2VsLmFuY2hvck9mZnNldCkgJiZcbiAgICAgICAgICAgIGlzRXF1aXZhbGVudFBvc2l0aW9uKGhlYWRET00ubm9kZSwgaGVhZERPTS5vZmZzZXQsIGRvbVNlbC5mb2N1c05vZGUsIGRvbVNlbC5mb2N1c09mZnNldCkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIC8vIFNlbGVjdGlvbi5leHRlbmQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGFuICdpbnZlcnRlZCcgc2VsZWN0aW9uXG4gICAgICAgIC8vIChvbmUgd2hlcmUgdGhlIGZvY3VzIGlzIGJlZm9yZSB0aGUgYW5jaG9yKSwgYnV0IG5vdCBhbGxcbiAgICAgICAgLy8gYnJvd3NlcnMgc3VwcG9ydCBpdCB5ZXQuXG4gICAgICAgIGxldCBkb21TZWxFeHRlbmRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoKGRvbVNlbC5leHRlbmQgfHwgYW5jaG9yID09IGhlYWQpICYmICFicktsdWRnZSkge1xuICAgICAgICAgICAgZG9tU2VsLmNvbGxhcHNlKGFuY2hvckRPTS5ub2RlLCBhbmNob3JET00ub2Zmc2V0KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGFuY2hvciAhPSBoZWFkKVxuICAgICAgICAgICAgICAgICAgICBkb21TZWwuZXh0ZW5kKGhlYWRET00ubm9kZSwgaGVhZERPTS5vZmZzZXQpO1xuICAgICAgICAgICAgICAgIGRvbVNlbEV4dGVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gc29tZSBjYXNlcyB3aXRoIENocm9tZSB0aGUgc2VsZWN0aW9uIGlzIGVtcHR5IGFmdGVyIGNhbGxpbmdcbiAgICAgICAgICAgICAgICAvLyBjb2xsYXBzZSwgZXZlbiB3aGVuIGl0IHNob3VsZCBiZSB2YWxpZC4gVGhpcyBhcHBlYXJzIHRvIGJlIGEgYnVnLCBidXRcbiAgICAgICAgICAgICAgICAvLyBpdCBpcyBkaWZmaWN1bHQgdG8gaXNvbGF0ZS4gSWYgdGhpcyBoYXBwZW5zIGZhbGxiYWNrIHRvIHRoZSBvbGQgcGF0aFxuICAgICAgICAgICAgICAgIC8vIHdpdGhvdXQgdXNpbmcgZXh0ZW5kLlxuICAgICAgICAgICAgICAgIC8vIFNpbWlsYXJseSwgdGhpcyBjb3VsZCBjcmFzaCBvbiBTYWZhcmkgaWYgdGhlIGVkaXRvciBpcyBoaWRkZW4sIGFuZFxuICAgICAgICAgICAgICAgIC8vIHRoZXJlIHdhcyBubyBzZWxlY3Rpb24uXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkb21TZWxFeHRlbmRlZCkge1xuICAgICAgICAgICAgaWYgKGFuY2hvciA+IGhlYWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG1wID0gYW5jaG9yRE9NO1xuICAgICAgICAgICAgICAgIGFuY2hvckRPTSA9IGhlYWRET007XG4gICAgICAgICAgICAgICAgaGVhZERPTSA9IHRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICByYW5nZS5zZXRFbmQoaGVhZERPTS5ub2RlLCBoZWFkRE9NLm9mZnNldCk7XG4gICAgICAgICAgICByYW5nZS5zZXRTdGFydChhbmNob3JET00ubm9kZSwgYW5jaG9yRE9NLm9mZnNldCk7XG4gICAgICAgICAgICBkb21TZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICBkb21TZWwuYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlnbm9yZU11dGF0aW9uKG11dGF0aW9uKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb250ZW50RE9NICYmIG11dGF0aW9uLnR5cGUgIT0gXCJzZWxlY3Rpb25cIjtcbiAgICB9XG4gICAgZ2V0IGNvbnRlbnRMb3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50RE9NICYmIHRoaXMuY29udGVudERPTSAhPSB0aGlzLmRvbSAmJiAhdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIGEgc3VidHJlZSBvZiB0aGUgZWxlbWVudCB0cmVlIHRoYXQgaGFzIGJlZW4gdG91Y2hlZFxuICAgIC8vIGJ5IGEgRE9NIGNoYW5nZSwgc28gdGhhdCB0aGUgbmV4dCB1cGRhdGUgd2lsbCByZWRyYXcgaXQuXG4gICAgbWFya0RpcnR5KGZyb20sIHRvKSB7XG4gICAgICAgIGZvciAobGV0IG9mZnNldCA9IDAsIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXSwgZW5kID0gb2Zmc2V0ICsgY2hpbGQuc2l6ZTtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT0gZW5kID8gZnJvbSA8PSBlbmQgJiYgdG8gPj0gb2Zmc2V0IDogZnJvbSA8IGVuZCAmJiB0byA+IG9mZnNldCkge1xuICAgICAgICAgICAgICAgIGxldCBzdGFydEluc2lkZSA9IG9mZnNldCArIGNoaWxkLmJvcmRlciwgZW5kSW5zaWRlID0gZW5kIC0gY2hpbGQuYm9yZGVyO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tID49IHN0YXJ0SW5zaWRlICYmIHRvIDw9IGVuZEluc2lkZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpcnR5ID0gZnJvbSA9PSBvZmZzZXQgfHwgdG8gPT0gZW5kID8gQ09OVEVOVF9ESVJUWSA6IENISUxEX0RJUlRZO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbSA9PSBzdGFydEluc2lkZSAmJiB0byA9PSBlbmRJbnNpZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChjaGlsZC5jb250ZW50TG9zdCB8fCBjaGlsZC5kb20ucGFyZW50Tm9kZSAhPSB0aGlzLmNvbnRlbnRET00pKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGlydHkgPSBOT0RFX0RJUlRZO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5tYXJrRGlydHkoZnJvbSAtIHN0YXJ0SW5zaWRlLCB0byAtIHN0YXJ0SW5zaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZGlydHkgPSBjaGlsZC5kb20gPT0gY2hpbGQuY29udGVudERPTSAmJiBjaGlsZC5kb20ucGFyZW50Tm9kZSA9PSB0aGlzLmNvbnRlbnRET00gJiYgIWNoaWxkLmNoaWxkcmVuLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBDT05URU5UX0RJUlRZIDogTk9ERV9ESVJUWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSA9IENPTlRFTlRfRElSVFk7XG4gICAgfVxuICAgIG1hcmtQYXJlbnRzRGlydHkoKSB7XG4gICAgICAgIGxldCBsZXZlbCA9IDE7XG4gICAgICAgIGZvciAobGV0IG5vZGUgPSB0aGlzLnBhcmVudDsgbm9kZTsgbm9kZSA9IG5vZGUucGFyZW50LCBsZXZlbCsrKSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSBsZXZlbCA9PSAxID8gQ09OVEVOVF9ESVJUWSA6IENISUxEX0RJUlRZO1xuICAgICAgICAgICAgaWYgKG5vZGUuZGlydHkgPCBkaXJ0eSlcbiAgICAgICAgICAgICAgICBub2RlLmRpcnR5ID0gZGlydHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRvbUF0b20oKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIGdldCBpZ25vcmVGb3JDb29yZHMoKSB7IHJldHVybiBmYWxzZTsgfVxufVxuLy8gQSB3aWRnZXQgZGVzYyByZXByZXNlbnRzIGEgd2lkZ2V0IGRlY29yYXRpb24sIHdoaWNoIGlzIGEgRE9NIG5vZGVcbi8vIGRyYXduIGJldHdlZW4gdGhlIGRvY3VtZW50IG5vZGVzLlxuY2xhc3MgV2lkZ2V0Vmlld0Rlc2MgZXh0ZW5kcyBWaWV3RGVzYyB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCB3aWRnZXQsIHZpZXcsIHBvcykge1xuICAgICAgICBsZXQgc2VsZiwgZG9tID0gd2lkZ2V0LnR5cGUudG9ET007XG4gICAgICAgIGlmICh0eXBlb2YgZG9tID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIGRvbSA9IGRvbSh2aWV3LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnBhcmVudClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyZW50LnBvc0JlZm9yZUNoaWxkKHNlbGYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGlmICghd2lkZ2V0LnR5cGUuc3BlYy5yYXcpIHtcbiAgICAgICAgICAgIGlmIChkb20ubm9kZVR5cGUgIT0gMSkge1xuICAgICAgICAgICAgICAgIGxldCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChkb20pO1xuICAgICAgICAgICAgICAgIGRvbSA9IHdyYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb20uY29udGVudEVkaXRhYmxlID0gXCJmYWxzZVwiO1xuICAgICAgICAgICAgZG9tLmNsYXNzTGlzdC5hZGQoXCJQcm9zZU1pcnJvci13aWRnZXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIocGFyZW50LCBbXSwgZG9tLCBudWxsKTtcbiAgICAgICAgdGhpcy53aWRnZXQgPSB3aWRnZXQ7XG4gICAgICAgIHRoaXMud2lkZ2V0ID0gd2lkZ2V0O1xuICAgICAgICBzZWxmID0gdGhpcztcbiAgICB9XG4gICAgbWF0Y2hlc1dpZGdldCh3aWRnZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlydHkgPT0gTk9UX0RJUlRZICYmIHdpZGdldC50eXBlLmVxKHRoaXMud2lkZ2V0LnR5cGUpO1xuICAgIH1cbiAgICBwYXJzZVJ1bGUoKSB7IHJldHVybiB7IGlnbm9yZTogdHJ1ZSB9OyB9XG4gICAgc3RvcEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGxldCBzdG9wID0gdGhpcy53aWRnZXQuc3BlYy5zdG9wRXZlbnQ7XG4gICAgICAgIHJldHVybiBzdG9wID8gc3RvcChldmVudCkgOiBmYWxzZTtcbiAgICB9XG4gICAgaWdub3JlTXV0YXRpb24obXV0YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIG11dGF0aW9uLnR5cGUgIT0gXCJzZWxlY3Rpb25cIiB8fCB0aGlzLndpZGdldC5zcGVjLmlnbm9yZVNlbGVjdGlvbjtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy53aWRnZXQudHlwZS5kZXN0cm95KHRoaXMuZG9tKTtcbiAgICAgICAgc3VwZXIuZGVzdHJveSgpO1xuICAgIH1cbiAgICBnZXQgZG9tQXRvbSgpIHsgcmV0dXJuIHRydWU7IH1cbiAgICBnZXQgc2lkZSgpIHsgcmV0dXJuIHRoaXMud2lkZ2V0LnR5cGUuc2lkZTsgfVxufVxuY2xhc3MgQ29tcG9zaXRpb25WaWV3RGVzYyBleHRlbmRzIFZpZXdEZXNjIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGRvbSwgdGV4dERPTSwgdGV4dCkge1xuICAgICAgICBzdXBlcihwYXJlbnQsIFtdLCBkb20sIG51bGwpO1xuICAgICAgICB0aGlzLnRleHRET00gPSB0ZXh0RE9NO1xuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMudGV4dC5sZW5ndGg7IH1cbiAgICBsb2NhbFBvc0Zyb21ET00oZG9tLCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKGRvbSAhPSB0aGlzLnRleHRET00pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NBdFN0YXJ0ICsgKG9mZnNldCA/IHRoaXMuc2l6ZSA6IDApO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NBdFN0YXJ0ICsgb2Zmc2V0O1xuICAgIH1cbiAgICBkb21Gcm9tUG9zKHBvcykge1xuICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLnRleHRET00sIG9mZnNldDogcG9zIH07XG4gICAgfVxuICAgIGlnbm9yZU11dGF0aW9uKG11dCkge1xuICAgICAgICByZXR1cm4gbXV0LnR5cGUgPT09ICdjaGFyYWN0ZXJEYXRhJyAmJiBtdXQudGFyZ2V0Lm5vZGVWYWx1ZSA9PSBtdXQub2xkVmFsdWU7XG4gICAgfVxufVxuLy8gQSBtYXJrIGRlc2MgcmVwcmVzZW50cyBhIG1hcmsuIE1heSBoYXZlIG11bHRpcGxlIGNoaWxkcmVuLFxuLy8gZGVwZW5kaW5nIG9uIGhvdyB0aGUgbWFyayBpcyBzcGxpdC4gTm90ZSB0aGF0IG1hcmtzIGFyZSBkcmF3biB1c2luZ1xuLy8gYSBmaXhlZCBuZXN0aW5nIG9yZGVyLCBmb3Igc2ltcGxpY2l0eSBhbmQgcHJlZGljdGFiaWxpdHksIHNvIGluXG4vLyBzb21lIGNhc2VzIHRoZXkgd2lsbCBiZSBzcGxpdCBtb3JlIG9mdGVuIHRoYW4gd291bGQgYXBwZWFyXG4vLyBuZWNlc3NhcnkuXG5jbGFzcyBNYXJrVmlld0Rlc2MgZXh0ZW5kcyBWaWV3RGVzYyB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBtYXJrLCBkb20sIGNvbnRlbnRET00pIHtcbiAgICAgICAgc3VwZXIocGFyZW50LCBbXSwgZG9tLCBjb250ZW50RE9NKTtcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShwYXJlbnQsIG1hcmssIGlubGluZSwgdmlldykge1xuICAgICAgICBsZXQgY3VzdG9tID0gdmlldy5ub2RlVmlld3NbbWFyay50eXBlLm5hbWVdO1xuICAgICAgICBsZXQgc3BlYyA9IGN1c3RvbSAmJiBjdXN0b20obWFyaywgdmlldywgaW5saW5lKTtcbiAgICAgICAgaWYgKCFzcGVjIHx8ICFzcGVjLmRvbSlcbiAgICAgICAgICAgIHNwZWMgPSBET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jdW1lbnQsIG1hcmsudHlwZS5zcGVjLnRvRE9NKG1hcmssIGlubGluZSkpO1xuICAgICAgICByZXR1cm4gbmV3IE1hcmtWaWV3RGVzYyhwYXJlbnQsIG1hcmssIHNwZWMuZG9tLCBzcGVjLmNvbnRlbnRET00gfHwgc3BlYy5kb20pO1xuICAgIH1cbiAgICBwYXJzZVJ1bGUoKSB7XG4gICAgICAgIGlmICgodGhpcy5kaXJ0eSAmIE5PREVfRElSVFkpIHx8IHRoaXMubWFyay50eXBlLnNwZWMucmVwYXJzZUluVmlldylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4geyBtYXJrOiB0aGlzLm1hcmsudHlwZS5uYW1lLCBhdHRyczogdGhpcy5tYXJrLmF0dHJzLCBjb250ZW50RWxlbWVudDogdGhpcy5jb250ZW50RE9NIHx8IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICBtYXRjaGVzTWFyayhtYXJrKSB7IHJldHVybiB0aGlzLmRpcnR5ICE9IE5PREVfRElSVFkgJiYgdGhpcy5tYXJrLmVxKG1hcmspOyB9XG4gICAgbWFya0RpcnR5KGZyb20sIHRvKSB7XG4gICAgICAgIHN1cGVyLm1hcmtEaXJ0eShmcm9tLCB0byk7XG4gICAgICAgIC8vIE1vdmUgZGlydHkgaW5mbyB0byBuZWFyZXN0IG5vZGUgdmlld1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSAhPSBOT1RfRElSVFkpIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgICAgIHdoaWxlICghcGFyZW50Lm5vZGUpXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYXJlbnQuZGlydHkgPCB0aGlzLmRpcnR5KVxuICAgICAgICAgICAgICAgIHBhcmVudC5kaXJ0eSA9IHRoaXMuZGlydHk7XG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gTk9UX0RJUlRZO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNsaWNlKGZyb20sIHRvLCB2aWV3KSB7XG4gICAgICAgIGxldCBjb3B5ID0gTWFya1ZpZXdEZXNjLmNyZWF0ZSh0aGlzLnBhcmVudCwgdGhpcy5tYXJrLCB0cnVlLCB2aWV3KTtcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5jaGlsZHJlbiwgc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHRvIDwgc2l6ZSlcbiAgICAgICAgICAgIG5vZGVzID0gcmVwbGFjZU5vZGVzKG5vZGVzLCB0bywgc2l6ZSwgdmlldyk7XG4gICAgICAgIGlmIChmcm9tID4gMClcbiAgICAgICAgICAgIG5vZGVzID0gcmVwbGFjZU5vZGVzKG5vZGVzLCAwLCBmcm9tLCB2aWV3KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIG5vZGVzW2ldLnBhcmVudCA9IGNvcHk7XG4gICAgICAgIGNvcHkuY2hpbGRyZW4gPSBub2RlcztcbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxufVxuLy8gTm9kZSB2aWV3IGRlc2NzIGFyZSB0aGUgbWFpbiwgbW9zdCBjb21tb24gdHlwZSBvZiB2aWV3IGRlc2MsIGFuZFxuLy8gY29ycmVzcG9uZCB0byBhbiBhY3R1YWwgbm9kZSBpbiB0aGUgZG9jdW1lbnQuIFVubGlrZSBtYXJrIGRlc2NzLFxuLy8gdGhleSBwb3B1bGF0ZSB0aGVpciBjaGlsZCBhcnJheSB0aGVtc2VsdmVzLlxuY2xhc3MgTm9kZVZpZXdEZXNjIGV4dGVuZHMgVmlld0Rlc2Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgbm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGRvbSwgY29udGVudERPTSwgbm9kZURPTSwgdmlldywgcG9zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgW10sIGRvbSwgY29udGVudERPTSk7XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIHRoaXMub3V0ZXJEZWNvID0gb3V0ZXJEZWNvO1xuICAgICAgICB0aGlzLmlubmVyRGVjbyA9IGlubmVyRGVjbztcbiAgICAgICAgdGhpcy5ub2RlRE9NID0gbm9kZURPTTtcbiAgICB9XG4gICAgLy8gQnkgZGVmYXVsdCwgYSBub2RlIGlzIHJlbmRlcmVkIHVzaW5nIHRoZSBgdG9ET01gIG1ldGhvZCBmcm9tIHRoZVxuICAgIC8vIG5vZGUgdHlwZSBzcGVjLiBCdXQgY2xpZW50IGNvZGUgY2FuIHVzZSB0aGUgYG5vZGVWaWV3c2Agc3BlYyB0b1xuICAgIC8vIHN1cHBseSBhIGN1c3RvbSBub2RlIHZpZXcsIHdoaWNoIGNhbiBpbmZsdWVuY2UgdmFyaW91cyBhc3BlY3RzIG9mXG4gICAgLy8gdGhlIHdheSB0aGUgbm9kZSB3b3Jrcy5cbiAgICAvL1xuICAgIC8vIChVc2luZyBzdWJjbGFzc2luZyBmb3IgdGhpcyB3YXMgaW50ZW50aW9uYWxseSBkZWNpZGVkIGFnYWluc3QsXG4gICAgLy8gc2luY2UgaXQnZCByZXF1aXJlIGV4cG9zaW5nIGEgd2hvbGUgc2xldyBvZiBmaW5pY2t5XG4gICAgLy8gaW1wbGVtZW50YXRpb24gZGV0YWlscyB0byB0aGUgdXNlciBjb2RlIHRoYXQgdGhleSBwcm9iYWJseSB3aWxsXG4gICAgLy8gbmV2ZXIgbmVlZC4pXG4gICAgc3RhdGljIGNyZWF0ZShwYXJlbnQsIG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3LCBwb3MpIHtcbiAgICAgICAgbGV0IGN1c3RvbSA9IHZpZXcubm9kZVZpZXdzW25vZGUudHlwZS5uYW1lXSwgZGVzY09iajtcbiAgICAgICAgbGV0IHNwZWMgPSBjdXN0b20gJiYgY3VzdG9tKG5vZGUsIHZpZXcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIChUaGlzIGlzIGEgZnVuY3Rpb24gdGhhdCBhbGxvd3MgdGhlIGN1c3RvbSB2aWV3IHRvIGZpbmQgaXRzXG4gICAgICAgICAgICAvLyBvd24gcG9zaXRpb24pXG4gICAgICAgICAgICBpZiAoIWRlc2NPYmopXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgICAgIGlmIChkZXNjT2JqLnBhcmVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVzY09iai5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoZGVzY09iaik7XG4gICAgICAgIH0sIG91dGVyRGVjbywgaW5uZXJEZWNvKTtcbiAgICAgICAgbGV0IGRvbSA9IHNwZWMgJiYgc3BlYy5kb20sIGNvbnRlbnRET00gPSBzcGVjICYmIHNwZWMuY29udGVudERPTTtcbiAgICAgICAgaWYgKG5vZGUuaXNUZXh0KSB7XG4gICAgICAgICAgICBpZiAoIWRvbSlcbiAgICAgICAgICAgICAgICBkb20gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShub2RlLnRleHQpO1xuICAgICAgICAgICAgZWxzZSBpZiAoZG9tLm5vZGVUeXBlICE9IDMpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUZXh0IG11c3QgYmUgcmVuZGVyZWQgYXMgYSBET00gdGV4dCBub2RlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFkb20pIHtcbiAgICAgICAgICAgICh7IGRvbSwgY29udGVudERPTSB9ID0gRE9NU2VyaWFsaXplci5yZW5kZXJTcGVjKGRvY3VtZW50LCBub2RlLnR5cGUuc3BlYy50b0RPTShub2RlKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29udGVudERPTSAmJiAhbm9kZS5pc1RleHQgJiYgZG9tLm5vZGVOYW1lICE9IFwiQlJcIikgeyAvLyBDaHJvbWUgZ2V0cyBjb25mdXNlZCBieSA8YnIgY29udGVudGVkaXRhYmxlPWZhbHNlPlxuICAgICAgICAgICAgaWYgKCFkb20uaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpKVxuICAgICAgICAgICAgICAgIGRvbS5jb250ZW50RWRpdGFibGUgPSBcImZhbHNlXCI7XG4gICAgICAgICAgICBpZiAobm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlKVxuICAgICAgICAgICAgICAgIGRvbS5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBub2RlRE9NID0gZG9tO1xuICAgICAgICBkb20gPSBhcHBseU91dGVyRGVjbyhkb20sIG91dGVyRGVjbywgbm9kZSk7XG4gICAgICAgIGlmIChzcGVjKVxuICAgICAgICAgICAgcmV0dXJuIGRlc2NPYmogPSBuZXcgQ3VzdG9tTm9kZVZpZXdEZXNjKHBhcmVudCwgbm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGRvbSwgY29udGVudERPTSB8fCBudWxsLCBub2RlRE9NLCBzcGVjLCB2aWV3LCBwb3MgKyAxKTtcbiAgICAgICAgZWxzZSBpZiAobm9kZS5pc1RleHQpXG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHRWaWV3RGVzYyhwYXJlbnQsIG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCBkb20sIG5vZGVET00sIHZpZXcpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vZGVWaWV3RGVzYyhwYXJlbnQsIG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCBkb20sIGNvbnRlbnRET00gfHwgbnVsbCwgbm9kZURPTSwgdmlldywgcG9zICsgMSk7XG4gICAgfVxuICAgIHBhcnNlUnVsZSgpIHtcbiAgICAgICAgLy8gRXhwZXJpbWVudGFsIGtsdWRnZSB0byBhbGxvdyBvcHQtaW4gcmUtcGFyc2luZyBvZiBub2Rlc1xuICAgICAgICBpZiAodGhpcy5ub2RlLnR5cGUuc3BlYy5yZXBhcnNlSW5WaWV3KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIC8vIEZJWE1FIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhpcyBjYW4gYWx3YXlzIHJldHVybiB0aGUgY3VycmVudFxuICAgICAgICAvLyBhdHRycyBtZWFucyB0aGF0IGlmIHRoZSB1c2VyIHNvbWVob3cgbWFuYWdlcyB0byBjaGFuZ2UgdGhlXG4gICAgICAgIC8vIGF0dHJzIGluIHRoZSBkb20sIHRoYXQgd29uJ3QgYmUgcGlja2VkIHVwLiBOb3QgZW50aXJlbHkgc3VyZVxuICAgICAgICAvLyB3aGV0aGVyIHRoaXMgaXMgYSBwcm9ibGVtXG4gICAgICAgIGxldCBydWxlID0geyBub2RlOiB0aGlzLm5vZGUudHlwZS5uYW1lLCBhdHRyczogdGhpcy5ub2RlLmF0dHJzIH07XG4gICAgICAgIGlmICh0aGlzLm5vZGUudHlwZS53aGl0ZXNwYWNlID09IFwicHJlXCIpXG4gICAgICAgICAgICBydWxlLnByZXNlcnZlV2hpdGVzcGFjZSA9IFwiZnVsbFwiO1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudERPTSkge1xuICAgICAgICAgICAgcnVsZS5nZXRDb250ZW50ID0gKCkgPT4gdGhpcy5ub2RlLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuY29udGVudExvc3QpIHtcbiAgICAgICAgICAgIHJ1bGUuY29udGVudEVsZW1lbnQgPSB0aGlzLmNvbnRlbnRET007XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDaHJvbWUgbGlrZXMgdG8gcmFuZG9tbHkgcmVjcmVhdGUgcGFyZW50IG5vZGVzIHdoZW5cbiAgICAgICAgICAgIC8vIGJhY2tzcGFjaW5nIHRoaW5ncy4gV2hlbiB0aGF0IGhhcHBlbnMsIHRoaXMgdHJpZXMgdG8gZmluZCB0aGVcbiAgICAgICAgICAgIC8vIG5ldyBwYXJlbnQuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZG9tLmNvbnRhaW5zKGNoaWxkLmRvbS5wYXJlbnROb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBydWxlLmNvbnRlbnRFbGVtZW50ID0gY2hpbGQuZG9tLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcnVsZS5jb250ZW50RWxlbWVudClcbiAgICAgICAgICAgICAgICBydWxlLmdldENvbnRlbnQgPSAoKSA9PiBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnVsZTtcbiAgICB9XG4gICAgbWF0Y2hlc05vZGUobm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlydHkgPT0gTk9UX0RJUlRZICYmIG5vZGUuZXEodGhpcy5ub2RlKSAmJlxuICAgICAgICAgICAgc2FtZU91dGVyRGVjbyhvdXRlckRlY28sIHRoaXMub3V0ZXJEZWNvKSAmJiBpbm5lckRlY28uZXEodGhpcy5pbm5lckRlY28pO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMubm9kZS5ub2RlU2l6ZTsgfVxuICAgIGdldCBib3JkZXIoKSB7IHJldHVybiB0aGlzLm5vZGUuaXNMZWFmID8gMCA6IDE7IH1cbiAgICAvLyBTeW5jcyBgdGhpcy5jaGlsZHJlbmAgdG8gbWF0Y2ggYHRoaXMubm9kZS5jb250ZW50YCBhbmQgdGhlIGxvY2FsXG4gICAgLy8gZGVjb3JhdGlvbnMsIHBvc3NpYmx5IGludHJvZHVjaW5nIG5lc3RpbmcgZm9yIG1hcmtzLiBUaGVuLCBpbiBhXG4gICAgLy8gc2VwYXJhdGUgc3RlcCwgc3luY3MgdGhlIERPTSBpbnNpZGUgYHRoaXMuY29udGVudERPTWAgdG9cbiAgICAvLyBgdGhpcy5jaGlsZHJlbmAuXG4gICAgdXBkYXRlQ2hpbGRyZW4odmlldywgcG9zKSB7XG4gICAgICAgIGxldCBpbmxpbmUgPSB0aGlzLm5vZGUuaW5saW5lQ29udGVudCwgb2ZmID0gcG9zO1xuICAgICAgICBsZXQgY29tcG9zaXRpb24gPSB2aWV3LmNvbXBvc2luZyA/IHRoaXMubG9jYWxDb21wb3NpdGlvbkluZm8odmlldywgcG9zKSA6IG51bGw7XG4gICAgICAgIGxldCBsb2NhbENvbXBvc2l0aW9uID0gY29tcG9zaXRpb24gJiYgY29tcG9zaXRpb24ucG9zID4gLTEgPyBjb21wb3NpdGlvbiA6IG51bGw7XG4gICAgICAgIGxldCBjb21wb3NpdGlvbkluQ2hpbGQgPSBjb21wb3NpdGlvbiAmJiBjb21wb3NpdGlvbi5wb3MgPCAwO1xuICAgICAgICBsZXQgdXBkYXRlciA9IG5ldyBWaWV3VHJlZVVwZGF0ZXIodGhpcywgbG9jYWxDb21wb3NpdGlvbiAmJiBsb2NhbENvbXBvc2l0aW9uLm5vZGUsIHZpZXcpO1xuICAgICAgICBpdGVyRGVjbyh0aGlzLm5vZGUsIHRoaXMuaW5uZXJEZWNvLCAod2lkZ2V0LCBpLCBpbnNpZGVOb2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAod2lkZ2V0LnNwZWMubWFya3MpXG4gICAgICAgICAgICAgICAgdXBkYXRlci5zeW5jVG9NYXJrcyh3aWRnZXQuc3BlYy5tYXJrcywgaW5saW5lLCB2aWV3KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHdpZGdldC50eXBlLnNpZGUgPj0gMCAmJiAhaW5zaWRlTm9kZSlcbiAgICAgICAgICAgICAgICB1cGRhdGVyLnN5bmNUb01hcmtzKGkgPT0gdGhpcy5ub2RlLmNoaWxkQ291bnQgPyBNYXJrLm5vbmUgOiB0aGlzLm5vZGUuY2hpbGQoaSkubWFya3MsIGlubGluZSwgdmlldyk7XG4gICAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBub2RlIGlzIGEgZGVzYyBtYXRjaGluZyB0aGlzIHdpZGdldCwgcmV1c2UgaXQsXG4gICAgICAgICAgICAvLyBvdGhlcndpc2UgaW5zZXJ0IHRoZSB3aWRnZXQgYXMgYSBuZXcgdmlldyBkZXNjLlxuICAgICAgICAgICAgdXBkYXRlci5wbGFjZVdpZGdldCh3aWRnZXQsIHZpZXcsIG9mZik7XG4gICAgICAgIH0sIChjaGlsZCwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGkpID0+IHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgd3JhcHBpbmcgbWFyayBkZXNjcyBtYXRjaCB0aGUgbm9kZSdzIG1hcmtzLlxuICAgICAgICAgICAgdXBkYXRlci5zeW5jVG9NYXJrcyhjaGlsZC5tYXJrcywgaW5saW5lLCB2aWV3KTtcbiAgICAgICAgICAgIC8vIFRyeSBzZXZlcmFsIHN0cmF0ZWdpZXMgZm9yIGRyYXdpbmcgdGhpcyBub2RlXG4gICAgICAgICAgICBsZXQgY29tcEluZGV4O1xuICAgICAgICAgICAgaWYgKHVwZGF0ZXIuZmluZE5vZGVNYXRjaChjaGlsZCwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGkpKSA7XG4gICAgICAgICAgICBlbHNlIGlmIChjb21wb3NpdGlvbkluQ2hpbGQgJiYgdmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSA+IG9mZiAmJlxuICAgICAgICAgICAgICAgIHZpZXcuc3RhdGUuc2VsZWN0aW9uLnRvIDwgb2ZmICsgY2hpbGQubm9kZVNpemUgJiZcbiAgICAgICAgICAgICAgICAoY29tcEluZGV4ID0gdXBkYXRlci5maW5kSW5kZXhXaXRoQ2hpbGQoY29tcG9zaXRpb24ubm9kZSkpID4gLTEgJiZcbiAgICAgICAgICAgICAgICB1cGRhdGVyLnVwZGF0ZU5vZGVBdChjaGlsZCwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGNvbXBJbmRleCwgdmlldykpIDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHVwZGF0ZXIudXBkYXRlTmV4dE5vZGUoY2hpbGQsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3LCBpLCBvZmYpKSA7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgaXQgYXMgYSBuZXcgdmlld1xuICAgICAgICAgICAgICAgIHVwZGF0ZXIuYWRkTm9kZShjaGlsZCwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIHZpZXcsIG9mZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvZmYgKz0gY2hpbGQubm9kZVNpemU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBEcm9wIGFsbCByZW1haW5pbmcgZGVzY3MgYWZ0ZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICAgIHVwZGF0ZXIuc3luY1RvTWFya3MoW10sIGlubGluZSwgdmlldyk7XG4gICAgICAgIGlmICh0aGlzLm5vZGUuaXNUZXh0YmxvY2spXG4gICAgICAgICAgICB1cGRhdGVyLmFkZFRleHRibG9ja0hhY2tzKCk7XG4gICAgICAgIHVwZGF0ZXIuZGVzdHJveVJlc3QoKTtcbiAgICAgICAgLy8gU3luYyB0aGUgRE9NIGlmIGFueXRoaW5nIGNoYW5nZWRcbiAgICAgICAgaWYgKHVwZGF0ZXIuY2hhbmdlZCB8fCB0aGlzLmRpcnR5ID09IENPTlRFTlRfRElSVFkpIHtcbiAgICAgICAgICAgIC8vIE1heSBoYXZlIHRvIHByb3RlY3QgZm9jdXNlZCBET00gZnJvbSBiZWluZyBjaGFuZ2VkIGlmIGEgY29tcG9zaXRpb24gaXMgYWN0aXZlXG4gICAgICAgICAgICBpZiAobG9jYWxDb21wb3NpdGlvbilcbiAgICAgICAgICAgICAgICB0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHZpZXcsIGxvY2FsQ29tcG9zaXRpb24pO1xuICAgICAgICAgICAgcmVuZGVyRGVzY3ModGhpcy5jb250ZW50RE9NLCB0aGlzLmNoaWxkcmVuLCB2aWV3KTtcbiAgICAgICAgICAgIGlmIChpb3MpXG4gICAgICAgICAgICAgICAgaW9zSGFja3ModGhpcy5kb20pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvY2FsQ29tcG9zaXRpb25JbmZvKHZpZXcsIHBvcykge1xuICAgICAgICAvLyBPbmx5IGRvIHNvbWV0aGluZyBpZiBib3RoIHRoZSBzZWxlY3Rpb24gYW5kIGEgZm9jdXNlZCB0ZXh0IG5vZGVcbiAgICAgICAgLy8gYXJlIGluc2lkZSBvZiB0aGlzIG5vZGVcbiAgICAgICAgbGV0IHsgZnJvbSwgdG8gfSA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBpZiAoISh2aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIFRleHRTZWxlY3Rpb24pIHx8IGZyb20gPCBwb3MgfHwgdG8gPiBwb3MgKyB0aGlzLm5vZGUuY29udGVudC5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBzZWwgPSB2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgIGxldCB0ZXh0Tm9kZSA9IG5lYXJieVRleHROb2RlKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCk7XG4gICAgICAgIGlmICghdGV4dE5vZGUgfHwgIXRoaXMuZG9tLmNvbnRhaW5zKHRleHROb2RlLnBhcmVudE5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICh0aGlzLm5vZGUuaW5saW5lQ29udGVudCkge1xuICAgICAgICAgICAgLy8gRmluZCB0aGUgdGV4dCBpbiB0aGUgZm9jdXNlZCBub2RlIGluIHRoZSBub2RlLCBzdG9wIGlmIGl0J3Mgbm90XG4gICAgICAgICAgICAvLyB0aGVyZSAobWF5IGhhdmUgYmVlbiBtb2RpZmllZCB0aHJvdWdoIG90aGVyIG1lYW5zLCBpbiB3aGljaFxuICAgICAgICAgICAgLy8gY2FzZSBpdCBzaG91bGQgb3ZlcndyaXR0ZW4pXG4gICAgICAgICAgICBsZXQgdGV4dCA9IHRleHROb2RlLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgIGxldCB0ZXh0UG9zID0gZmluZFRleHRJbkZyYWdtZW50KHRoaXMubm9kZS5jb250ZW50LCB0ZXh0LCBmcm9tIC0gcG9zLCB0byAtIHBvcyk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dFBvcyA8IDAgPyBudWxsIDogeyBub2RlOiB0ZXh0Tm9kZSwgcG9zOiB0ZXh0UG9zLCB0ZXh0IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiB0ZXh0Tm9kZSwgcG9zOiAtMSwgdGV4dDogXCJcIiB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHZpZXcsIHsgbm9kZSwgcG9zLCB0ZXh0IH0pIHtcbiAgICAgICAgLy8gVGhlIG5vZGUgaXMgYWxyZWFkeSBwYXJ0IG9mIGEgbG9jYWwgdmlldyBkZXNjLCBsZWF2ZSBpdCB0aGVyZVxuICAgICAgICBpZiAodGhpcy5nZXREZXNjKG5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBDcmVhdGUgYSBjb21wb3NpdGlvbiB2aWV3IGZvciB0aGUgb3JwaGFuZWQgbm9kZXNcbiAgICAgICAgbGV0IHRvcE5vZGUgPSBub2RlO1xuICAgICAgICBmb3IgKDs7IHRvcE5vZGUgPSB0b3BOb2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGlmICh0b3BOb2RlLnBhcmVudE5vZGUgPT0gdGhpcy5jb250ZW50RE9NKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgd2hpbGUgKHRvcE5vZGUucHJldmlvdXNTaWJsaW5nKVxuICAgICAgICAgICAgICAgIHRvcE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0b3BOb2RlLnByZXZpb3VzU2libGluZyk7XG4gICAgICAgICAgICB3aGlsZSAodG9wTm9kZS5uZXh0U2libGluZylcbiAgICAgICAgICAgICAgICB0b3BOb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9wTm9kZS5uZXh0U2libGluZyk7XG4gICAgICAgICAgICBpZiAodG9wTm9kZS5wbVZpZXdEZXNjKVxuICAgICAgICAgICAgICAgIHRvcE5vZGUucG1WaWV3RGVzYyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVzYyA9IG5ldyBDb21wb3NpdGlvblZpZXdEZXNjKHRoaXMsIHRvcE5vZGUsIG5vZGUsIHRleHQpO1xuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2l0aW9uTm9kZXMucHVzaChkZXNjKTtcbiAgICAgICAgLy8gUGF0Y2ggdXAgdGhpcy5jaGlsZHJlbiB0byBjb250YWluIHRoZSBjb21wb3NpdGlvbiB2aWV3XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSByZXBsYWNlTm9kZXModGhpcy5jaGlsZHJlbiwgcG9zLCBwb3MgKyB0ZXh0Lmxlbmd0aCwgdmlldywgZGVzYyk7XG4gICAgfVxuICAgIC8vIElmIHRoaXMgZGVzYyBtdXN0IGJlIHVwZGF0ZWQgdG8gbWF0Y2ggdGhlIGdpdmVuIG5vZGUgZGVjb3JhdGlvbixcbiAgICAvLyBkbyBzbyBhbmQgcmV0dXJuIHRydWUuXG4gICAgdXBkYXRlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3KSB7XG4gICAgICAgIGlmICh0aGlzLmRpcnR5ID09IE5PREVfRElSVFkgfHxcbiAgICAgICAgICAgICFub2RlLnNhbWVNYXJrdXAodGhpcy5ub2RlKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVJbm5lcihub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB1cGRhdGVJbm5lcihub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldykge1xuICAgICAgICB0aGlzLnVwZGF0ZU91dGVyRGVjbyhvdXRlckRlY28pO1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICB0aGlzLmlubmVyRGVjbyA9IGlubmVyRGVjbztcbiAgICAgICAgaWYgKHRoaXMuY29udGVudERPTSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4odmlldywgdGhpcy5wb3NBdFN0YXJ0KTtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IE5PVF9ESVJUWTtcbiAgICB9XG4gICAgdXBkYXRlT3V0ZXJEZWNvKG91dGVyRGVjbykge1xuICAgICAgICBpZiAoc2FtZU91dGVyRGVjbyhvdXRlckRlY28sIHRoaXMub3V0ZXJEZWNvKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IG5lZWRzV3JhcCA9IHRoaXMubm9kZURPTS5ub2RlVHlwZSAhPSAxO1xuICAgICAgICBsZXQgb2xkRE9NID0gdGhpcy5kb207XG4gICAgICAgIHRoaXMuZG9tID0gcGF0Y2hPdXRlckRlY28odGhpcy5kb20sIHRoaXMubm9kZURPTSwgY29tcHV0ZU91dGVyRGVjbyh0aGlzLm91dGVyRGVjbywgdGhpcy5ub2RlLCBuZWVkc1dyYXApLCBjb21wdXRlT3V0ZXJEZWNvKG91dGVyRGVjbywgdGhpcy5ub2RlLCBuZWVkc1dyYXApKTtcbiAgICAgICAgaWYgKHRoaXMuZG9tICE9IG9sZERPTSkge1xuICAgICAgICAgICAgb2xkRE9NLnBtVmlld0Rlc2MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmRvbS5wbVZpZXdEZXNjID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm91dGVyRGVjbyA9IG91dGVyRGVjbztcbiAgICB9XG4gICAgLy8gTWFyayB0aGlzIG5vZGUgYXMgYmVpbmcgdGhlIHNlbGVjdGVkIG5vZGUuXG4gICAgc2VsZWN0Tm9kZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZURPTS5ub2RlVHlwZSA9PSAxKVxuICAgICAgICAgICAgdGhpcy5ub2RlRE9NLmNsYXNzTGlzdC5hZGQoXCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGVcIik7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRET00gfHwgIXRoaXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlKVxuICAgICAgICAgICAgdGhpcy5kb20uZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHNlbGVjdGVkIG5vZGUgbWFya2luZyBmcm9tIHRoaXMgbm9kZS5cbiAgICBkZXNlbGVjdE5vZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm5vZGVET00ubm9kZVR5cGUgPT0gMSlcbiAgICAgICAgICAgIHRoaXMubm9kZURPTS5jbGFzc0xpc3QucmVtb3ZlKFwiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlXCIpO1xuICAgICAgICBpZiAodGhpcy5jb250ZW50RE9NIHx8ICF0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZSlcbiAgICAgICAgICAgIHRoaXMuZG9tLnJlbW92ZUF0dHJpYnV0ZShcImRyYWdnYWJsZVwiKTtcbiAgICB9XG4gICAgZ2V0IGRvbUF0b20oKSB7IHJldHVybiB0aGlzLm5vZGUuaXNBdG9tOyB9XG59XG4vLyBDcmVhdGUgYSB2aWV3IGRlc2MgZm9yIHRoZSB0b3AtbGV2ZWwgZG9jdW1lbnQgbm9kZSwgdG8gYmUgZXhwb3J0ZWRcbi8vIGFuZCB1c2VkIGJ5IHRoZSB2aWV3IGNsYXNzLlxuZnVuY3Rpb24gZG9jVmlld0Rlc2MoZG9jLCBvdXRlckRlY28sIGlubmVyRGVjbywgZG9tLCB2aWV3KSB7XG4gICAgYXBwbHlPdXRlckRlY28oZG9tLCBvdXRlckRlY28sIGRvYyk7XG4gICAgbGV0IGRvY1ZpZXcgPSBuZXcgTm9kZVZpZXdEZXNjKHVuZGVmaW5lZCwgZG9jLCBvdXRlckRlY28sIGlubmVyRGVjbywgZG9tLCBkb20sIGRvbSwgdmlldywgMCk7XG4gICAgaWYgKGRvY1ZpZXcuY29udGVudERPTSlcbiAgICAgICAgZG9jVmlldy51cGRhdGVDaGlsZHJlbih2aWV3LCAwKTtcbiAgICByZXR1cm4gZG9jVmlldztcbn1cbmNsYXNzIFRleHRWaWV3RGVzYyBleHRlbmRzIE5vZGVWaWV3RGVzYyB7XG4gICAgY29uc3RydWN0b3IocGFyZW50LCBub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgZG9tLCBub2RlRE9NLCB2aWV3KSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgbm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGRvbSwgbnVsbCwgbm9kZURPTSwgdmlldywgMCk7XG4gICAgfVxuICAgIHBhcnNlUnVsZSgpIHtcbiAgICAgICAgbGV0IHNraXAgPSB0aGlzLm5vZGVET00ucGFyZW50Tm9kZTtcbiAgICAgICAgd2hpbGUgKHNraXAgJiYgc2tpcCAhPSB0aGlzLmRvbSAmJiAhc2tpcC5wbUlzRGVjbylcbiAgICAgICAgICAgIHNraXAgPSBza2lwLnBhcmVudE5vZGU7XG4gICAgICAgIHJldHVybiB7IHNraXA6IChza2lwIHx8IHRydWUpIH07XG4gICAgfVxuICAgIHVwZGF0ZShub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldykge1xuICAgICAgICBpZiAodGhpcy5kaXJ0eSA9PSBOT0RFX0RJUlRZIHx8ICh0aGlzLmRpcnR5ICE9IE5PVF9ESVJUWSAmJiAhdGhpcy5pblBhcmVudCgpKSB8fFxuICAgICAgICAgICAgIW5vZGUuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZU91dGVyRGVjbyhvdXRlckRlY28pO1xuICAgICAgICBpZiAoKHRoaXMuZGlydHkgIT0gTk9UX0RJUlRZIHx8IG5vZGUudGV4dCAhPSB0aGlzLm5vZGUudGV4dCkgJiYgbm9kZS50ZXh0ICE9IHRoaXMubm9kZURPTS5ub2RlVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZURPTS5ub2RlVmFsdWUgPSBub2RlLnRleHQ7XG4gICAgICAgICAgICBpZiAodmlldy50cmFja1dyaXRlcyA9PSB0aGlzLm5vZGVET00pXG4gICAgICAgICAgICAgICAgdmlldy50cmFja1dyaXRlcyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IE5PVF9ESVJUWTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGluUGFyZW50KCkge1xuICAgICAgICBsZXQgcGFyZW50RE9NID0gdGhpcy5wYXJlbnQuY29udGVudERPTTtcbiAgICAgICAgZm9yIChsZXQgbiA9IHRoaXMubm9kZURPTTsgbjsgbiA9IG4ucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIGlmIChuID09IHBhcmVudERPTSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBkb21Gcm9tUG9zKHBvcykge1xuICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLm5vZGVET00sIG9mZnNldDogcG9zIH07XG4gICAgfVxuICAgIGxvY2FsUG9zRnJvbURPTShkb20sIG9mZnNldCwgYmlhcykge1xuICAgICAgICBpZiAoZG9tID09IHRoaXMubm9kZURPTSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc0F0U3RhcnQgKyBNYXRoLm1pbihvZmZzZXQsIHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBzdXBlci5sb2NhbFBvc0Zyb21ET00oZG9tLCBvZmZzZXQsIGJpYXMpO1xuICAgIH1cbiAgICBpZ25vcmVNdXRhdGlvbihtdXRhdGlvbikge1xuICAgICAgICByZXR1cm4gbXV0YXRpb24udHlwZSAhPSBcImNoYXJhY3RlckRhdGFcIiAmJiBtdXRhdGlvbi50eXBlICE9IFwic2VsZWN0aW9uXCI7XG4gICAgfVxuICAgIHNsaWNlKGZyb20sIHRvLCB2aWV3KSB7XG4gICAgICAgIGxldCBub2RlID0gdGhpcy5ub2RlLmN1dChmcm9tLCB0byksIGRvbSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5vZGUudGV4dCk7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dFZpZXdEZXNjKHRoaXMucGFyZW50LCBub2RlLCB0aGlzLm91dGVyRGVjbywgdGhpcy5pbm5lckRlY28sIGRvbSwgZG9tLCB2aWV3KTtcbiAgICB9XG4gICAgbWFya0RpcnR5KGZyb20sIHRvKSB7XG4gICAgICAgIHN1cGVyLm1hcmtEaXJ0eShmcm9tLCB0byk7XG4gICAgICAgIGlmICh0aGlzLmRvbSAhPSB0aGlzLm5vZGVET00gJiYgKGZyb20gPT0gMCB8fCB0byA9PSB0aGlzLm5vZGVET00ubm9kZVZhbHVlLmxlbmd0aCkpXG4gICAgICAgICAgICB0aGlzLmRpcnR5ID0gTk9ERV9ESVJUWTtcbiAgICB9XG4gICAgZ2V0IGRvbUF0b20oKSB7IHJldHVybiBmYWxzZTsgfVxufVxuLy8gQSBkdW1teSBkZXNjIHVzZWQgdG8gdGFnIHRyYWlsaW5nIEJSIG9yIElNRyBub2RlcyBjcmVhdGVkIHRvIHdvcmtcbi8vIGFyb3VuZCBjb250ZW50RWRpdGFibGUgdGVycmlibGVuZXNzLlxuY2xhc3MgVHJhaWxpbmdIYWNrVmlld0Rlc2MgZXh0ZW5kcyBWaWV3RGVzYyB7XG4gICAgcGFyc2VSdWxlKCkgeyByZXR1cm4geyBpZ25vcmU6IHRydWUgfTsgfVxuICAgIG1hdGNoZXNIYWNrKG5vZGVOYW1lKSB7IHJldHVybiB0aGlzLmRpcnR5ID09IE5PVF9ESVJUWSAmJiB0aGlzLmRvbS5ub2RlTmFtZSA9PSBub2RlTmFtZTsgfVxuICAgIGdldCBkb21BdG9tKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGdldCBpZ25vcmVGb3JDb29yZHMoKSB7IHJldHVybiB0aGlzLmRvbS5ub2RlTmFtZSA9PSBcIklNR1wiOyB9XG59XG4vLyBBIHNlcGFyYXRlIHN1YmNsYXNzIGlzIHVzZWQgZm9yIGN1c3RvbWl6ZWQgbm9kZSB2aWV3cywgc28gdGhhdCB0aGVcbi8vIGV4dHJhIGNoZWNrcyBvbmx5IGhhdmUgdG8gYmUgbWFkZSBmb3Igbm9kZXMgdGhhdCBhcmUgYWN0dWFsbHlcbi8vIGN1c3RvbWl6ZWQuXG5jbGFzcyBDdXN0b21Ob2RlVmlld0Rlc2MgZXh0ZW5kcyBOb2RlVmlld0Rlc2Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgbm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGRvbSwgY29udGVudERPTSwgbm9kZURPTSwgc3BlYywgdmlldywgcG9zKSB7XG4gICAgICAgIHN1cGVyKHBhcmVudCwgbm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIGRvbSwgY29udGVudERPTSwgbm9kZURPTSwgdmlldywgcG9zKTtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICB9XG4gICAgLy8gQSBjdXN0b20gYHVwZGF0ZWAgbWV0aG9kIGdldHMgdG8gZGVjaWRlIHdoZXRoZXIgdGhlIHVwZGF0ZSBnb2VzXG4gICAgLy8gdGhyb3VnaC4gSWYgaXQgZG9lcywgYW5kIHRoZXJlJ3MgYSBgY29udGVudERPTWAgbm9kZSwgb3VyIGxvZ2ljXG4gICAgLy8gdXBkYXRlcyB0aGUgY2hpbGRyZW4uXG4gICAgdXBkYXRlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3KSB7XG4gICAgICAgIGlmICh0aGlzLmRpcnR5ID09IE5PREVfRElSVFkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNwZWMudXBkYXRlKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5zcGVjLnVwZGF0ZShub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0KVxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5uZXIobm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIHZpZXcpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5jb250ZW50RE9NICYmICFub2RlLmlzTGVhZikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0Tm9kZSgpIHtcbiAgICAgICAgdGhpcy5zcGVjLnNlbGVjdE5vZGUgPyB0aGlzLnNwZWMuc2VsZWN0Tm9kZSgpIDogc3VwZXIuc2VsZWN0Tm9kZSgpO1xuICAgIH1cbiAgICBkZXNlbGVjdE5vZGUoKSB7XG4gICAgICAgIHRoaXMuc3BlYy5kZXNlbGVjdE5vZGUgPyB0aGlzLnNwZWMuZGVzZWxlY3ROb2RlKCkgOiBzdXBlci5kZXNlbGVjdE5vZGUoKTtcbiAgICB9XG4gICAgc2V0U2VsZWN0aW9uKGFuY2hvciwgaGVhZCwgcm9vdCwgZm9yY2UpIHtcbiAgICAgICAgdGhpcy5zcGVjLnNldFNlbGVjdGlvbiA/IHRoaXMuc3BlYy5zZXRTZWxlY3Rpb24oYW5jaG9yLCBoZWFkLCByb290KVxuICAgICAgICAgICAgOiBzdXBlci5zZXRTZWxlY3Rpb24oYW5jaG9yLCBoZWFkLCByb290LCBmb3JjZSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnNwZWMuZGVzdHJveSlcbiAgICAgICAgICAgIHRoaXMuc3BlYy5kZXN0cm95KCk7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgc3RvcEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwZWMuc3RvcEV2ZW50ID8gdGhpcy5zcGVjLnN0b3BFdmVudChldmVudCkgOiBmYWxzZTtcbiAgICB9XG4gICAgaWdub3JlTXV0YXRpb24obXV0YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbiA/IHRoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbihtdXRhdGlvbikgOiBzdXBlci5pZ25vcmVNdXRhdGlvbihtdXRhdGlvbik7XG4gICAgfVxufVxuLy8gU3luYyB0aGUgY29udGVudCBvZiB0aGUgZ2l2ZW4gRE9NIG5vZGUgd2l0aCB0aGUgbm9kZXMgYXNzb2NpYXRlZFxuLy8gd2l0aCB0aGUgZ2l2ZW4gYXJyYXkgb2YgdmlldyBkZXNjcywgcmVjdXJzaW5nIGludG8gbWFyayBkZXNjc1xuLy8gYmVjYXVzZSB0aGlzIHNob3VsZCBzeW5jIHRoZSBzdWJ0cmVlIGZvciBhIHdob2xlIG5vZGUgYXQgYSB0aW1lLlxuZnVuY3Rpb24gcmVuZGVyRGVzY3MocGFyZW50RE9NLCBkZXNjcywgdmlldykge1xuICAgIGxldCBkb20gPSBwYXJlbnRET00uZmlyc3RDaGlsZCwgd3JpdHRlbiA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVzY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGRlc2MgPSBkZXNjc1tpXSwgY2hpbGRET00gPSBkZXNjLmRvbTtcbiAgICAgICAgaWYgKGNoaWxkRE9NLnBhcmVudE5vZGUgPT0gcGFyZW50RE9NKSB7XG4gICAgICAgICAgICB3aGlsZSAoY2hpbGRET00gIT0gZG9tKSB7XG4gICAgICAgICAgICAgICAgZG9tID0gcm0oZG9tKTtcbiAgICAgICAgICAgICAgICB3cml0dGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbSA9IGRvbS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgcGFyZW50RE9NLmluc2VydEJlZm9yZShjaGlsZERPTSwgZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVzYyBpbnN0YW5jZW9mIE1hcmtWaWV3RGVzYykge1xuICAgICAgICAgICAgbGV0IHBvcyA9IGRvbSA/IGRvbS5wcmV2aW91c1NpYmxpbmcgOiBwYXJlbnRET00ubGFzdENoaWxkO1xuICAgICAgICAgICAgcmVuZGVyRGVzY3MoZGVzYy5jb250ZW50RE9NLCBkZXNjLmNoaWxkcmVuLCB2aWV3KTtcbiAgICAgICAgICAgIGRvbSA9IHBvcyA/IHBvcy5uZXh0U2libGluZyA6IHBhcmVudERPTS5maXJzdENoaWxkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdoaWxlIChkb20pIHtcbiAgICAgICAgZG9tID0gcm0oZG9tKTtcbiAgICAgICAgd3JpdHRlbiA9IHRydWU7XG4gICAgfVxuICAgIGlmICh3cml0dGVuICYmIHZpZXcudHJhY2tXcml0ZXMgPT0gcGFyZW50RE9NKVxuICAgICAgICB2aWV3LnRyYWNrV3JpdGVzID0gbnVsbDtcbn1cbmNvbnN0IE91dGVyRGVjb0xldmVsID0gZnVuY3Rpb24gKG5vZGVOYW1lKSB7XG4gICAgaWYgKG5vZGVOYW1lKVxuICAgICAgICB0aGlzLm5vZGVOYW1lID0gbm9kZU5hbWU7XG59O1xuT3V0ZXJEZWNvTGV2ZWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IG5vRGVjbyA9IFtuZXcgT3V0ZXJEZWNvTGV2ZWxdO1xuZnVuY3Rpb24gY29tcHV0ZU91dGVyRGVjbyhvdXRlckRlY28sIG5vZGUsIG5lZWRzV3JhcCkge1xuICAgIGlmIChvdXRlckRlY28ubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybiBub0RlY287XG4gICAgbGV0IHRvcCA9IG5lZWRzV3JhcCA/IG5vRGVjb1swXSA6IG5ldyBPdXRlckRlY29MZXZlbCwgcmVzdWx0ID0gW3RvcF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRlckRlY28ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGF0dHJzID0gb3V0ZXJEZWNvW2ldLnR5cGUuYXR0cnM7XG4gICAgICAgIGlmICghYXR0cnMpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgaWYgKGF0dHJzLm5vZGVOYW1lKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2godG9wID0gbmV3IE91dGVyRGVjb0xldmVsKGF0dHJzLm5vZGVOYW1lKSk7XG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgIGxldCB2YWwgPSBhdHRyc1tuYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChuZWVkc1dyYXAgJiYgcmVzdWx0Lmxlbmd0aCA9PSAxKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRvcCA9IG5ldyBPdXRlckRlY29MZXZlbChub2RlLmlzSW5saW5lID8gXCJzcGFuXCIgOiBcImRpdlwiKSk7XG4gICAgICAgICAgICBpZiAobmFtZSA9PSBcImNsYXNzXCIpXG4gICAgICAgICAgICAgICAgdG9wLmNsYXNzID0gKHRvcC5jbGFzcyA/IHRvcC5jbGFzcyArIFwiIFwiIDogXCJcIikgKyB2YWw7XG4gICAgICAgICAgICBlbHNlIGlmIChuYW1lID09IFwic3R5bGVcIilcbiAgICAgICAgICAgICAgICB0b3Auc3R5bGUgPSAodG9wLnN0eWxlID8gdG9wLnN0eWxlICsgXCI7XCIgOiBcIlwiKSArIHZhbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUgIT0gXCJub2RlTmFtZVwiKVxuICAgICAgICAgICAgICAgIHRvcFtuYW1lXSA9IHZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGF0Y2hPdXRlckRlY28ob3V0ZXJET00sIG5vZGVET00sIHByZXZDb21wdXRlZCwgY3VyQ29tcHV0ZWQpIHtcbiAgICAvLyBTaG9ydGN1dCBmb3IgdHJpdmlhbCBjYXNlXG4gICAgaWYgKHByZXZDb21wdXRlZCA9PSBub0RlY28gJiYgY3VyQ29tcHV0ZWQgPT0gbm9EZWNvKVxuICAgICAgICByZXR1cm4gbm9kZURPTTtcbiAgICBsZXQgY3VyRE9NID0gbm9kZURPTTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1ckNvbXB1dGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBkZWNvID0gY3VyQ29tcHV0ZWRbaV0sIHByZXYgPSBwcmV2Q29tcHV0ZWRbaV07XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50O1xuICAgICAgICAgICAgaWYgKHByZXYgJiYgcHJldi5ub2RlTmFtZSA9PSBkZWNvLm5vZGVOYW1lICYmIGN1ckRPTSAhPSBvdXRlckRPTSAmJlxuICAgICAgICAgICAgICAgIChwYXJlbnQgPSBjdXJET00ucGFyZW50Tm9kZSkgJiYgcGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gZGVjby5ub2RlTmFtZSkge1xuICAgICAgICAgICAgICAgIGN1ckRPTSA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZGVjby5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgcGFyZW50LnBtSXNEZWNvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY3VyRE9NKTtcbiAgICAgICAgICAgICAgICBwcmV2ID0gbm9EZWNvWzBdO1xuICAgICAgICAgICAgICAgIGN1ckRPTSA9IHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXRjaEF0dHJpYnV0ZXMoY3VyRE9NLCBwcmV2IHx8IG5vRGVjb1swXSwgZGVjbyk7XG4gICAgfVxuICAgIHJldHVybiBjdXJET007XG59XG5mdW5jdGlvbiBwYXRjaEF0dHJpYnV0ZXMoZG9tLCBwcmV2LCBjdXIpIHtcbiAgICBmb3IgKGxldCBuYW1lIGluIHByZXYpXG4gICAgICAgIGlmIChuYW1lICE9IFwiY2xhc3NcIiAmJiBuYW1lICE9IFwic3R5bGVcIiAmJiBuYW1lICE9IFwibm9kZU5hbWVcIiAmJiAhKG5hbWUgaW4gY3VyKSlcbiAgICAgICAgICAgIGRvbS5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZm9yIChsZXQgbmFtZSBpbiBjdXIpXG4gICAgICAgIGlmIChuYW1lICE9IFwiY2xhc3NcIiAmJiBuYW1lICE9IFwic3R5bGVcIiAmJiBuYW1lICE9IFwibm9kZU5hbWVcIiAmJiBjdXJbbmFtZV0gIT0gcHJldltuYW1lXSlcbiAgICAgICAgICAgIGRvbS5zZXRBdHRyaWJ1dGUobmFtZSwgY3VyW25hbWVdKTtcbiAgICBpZiAocHJldi5jbGFzcyAhPSBjdXIuY2xhc3MpIHtcbiAgICAgICAgbGV0IHByZXZMaXN0ID0gcHJldi5jbGFzcyA/IHByZXYuY2xhc3Muc3BsaXQoXCIgXCIpLmZpbHRlcihCb29sZWFuKSA6IFtdO1xuICAgICAgICBsZXQgY3VyTGlzdCA9IGN1ci5jbGFzcyA/IGN1ci5jbGFzcy5zcGxpdChcIiBcIikuZmlsdGVyKEJvb2xlYW4pIDogW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldkxpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoY3VyTGlzdC5pbmRleE9mKHByZXZMaXN0W2ldKSA9PSAtMSlcbiAgICAgICAgICAgICAgICBkb20uY2xhc3NMaXN0LnJlbW92ZShwcmV2TGlzdFtpXSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VyTGlzdC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChwcmV2TGlzdC5pbmRleE9mKGN1ckxpc3RbaV0pID09IC0xKVxuICAgICAgICAgICAgICAgIGRvbS5jbGFzc0xpc3QuYWRkKGN1ckxpc3RbaV0pO1xuICAgICAgICBpZiAoZG9tLmNsYXNzTGlzdC5sZW5ndGggPT0gMClcbiAgICAgICAgICAgIGRvbS5yZW1vdmVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICB9XG4gICAgaWYgKHByZXYuc3R5bGUgIT0gY3VyLnN0eWxlKSB7XG4gICAgICAgIGlmIChwcmV2LnN0eWxlKSB7XG4gICAgICAgICAgICBsZXQgcHJvcCA9IC9cXHMqKFtcXHdcXC1cXHhhMS1cXHVmZmZmXSspXFxzKjooPzpcIig/OlxcXFwufFteXCJdKSpcInwnKD86XFxcXC58W14nXSkqJ3xcXCguKj9cXCl8W147XSkqL2csIG07XG4gICAgICAgICAgICB3aGlsZSAobSA9IHByb3AuZXhlYyhwcmV2LnN0eWxlKSlcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUucmVtb3ZlUHJvcGVydHkobVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1ci5zdHlsZSlcbiAgICAgICAgICAgIGRvbS5zdHlsZS5jc3NUZXh0ICs9IGN1ci5zdHlsZTtcbiAgICB9XG59XG5mdW5jdGlvbiBhcHBseU91dGVyRGVjbyhkb20sIGRlY28sIG5vZGUpIHtcbiAgICByZXR1cm4gcGF0Y2hPdXRlckRlY28oZG9tLCBkb20sIG5vRGVjbywgY29tcHV0ZU91dGVyRGVjbyhkZWNvLCBub2RlLCBkb20ubm9kZVR5cGUgIT0gMSkpO1xufVxuZnVuY3Rpb24gc2FtZU91dGVyRGVjbyhhLCBiKSB7XG4gICAgaWYgKGEubGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoIWFbaV0udHlwZS5lcShiW2ldLnR5cGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8gUmVtb3ZlIGEgRE9NIG5vZGUgYW5kIHJldHVybiBpdHMgbmV4dCBzaWJsaW5nLlxuZnVuY3Rpb24gcm0oZG9tKSB7XG4gICAgbGV0IG5leHQgPSBkb20ubmV4dFNpYmxpbmc7XG4gICAgZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9tKTtcbiAgICByZXR1cm4gbmV4dDtcbn1cbi8vIEhlbHBlciBjbGFzcyBmb3IgaW5jcmVtZW50YWxseSB1cGRhdGluZyBhIHRyZWUgb2YgbWFyayBkZXNjcyBhbmRcbi8vIHRoZSB3aWRnZXQgYW5kIG5vZGUgZGVzY3MgaW5zaWRlIG9mIHRoZW0uXG5jbGFzcyBWaWV3VHJlZVVwZGF0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRvcCwgbG9jaywgdmlldykge1xuICAgICAgICB0aGlzLmxvY2sgPSBsb2NrO1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICAvLyBJbmRleCBpbnRvIGB0aGlzLnRvcGAncyBjaGlsZCBhcnJheSwgcmVwcmVzZW50cyB0aGUgY3VycmVudFxuICAgICAgICAvLyB1cGRhdGUgcG9zaXRpb24uXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICAvLyBXaGVuIGVudGVyaW5nIGEgbWFyaywgdGhlIGN1cnJlbnQgdG9wIGFuZCBpbmRleCBhcmUgcHVzaGVkXG4gICAgICAgIC8vIG9udG8gdGhpcy5cbiAgICAgICAgdGhpcy5zdGFjayA9IFtdO1xuICAgICAgICAvLyBUcmFja3Mgd2hldGhlciBhbnl0aGluZyB3YXMgY2hhbmdlZFxuICAgICAgICB0aGlzLmNoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMucHJlTWF0Y2ggPSBwcmVNYXRjaCh0b3Aubm9kZS5jb250ZW50LCB0b3ApO1xuICAgIH1cbiAgICAvLyBEZXN0cm95IGFuZCByZW1vdmUgdGhlIGNoaWxkcmVuIGJldHdlZW4gdGhlIGdpdmVuIGluZGljZXMgaW5cbiAgICAvLyBgdGhpcy50b3BgLlxuICAgIGRlc3Ryb3lCZXR3ZWVuKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09IGVuZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspXG4gICAgICAgICAgICB0aGlzLnRvcC5jaGlsZHJlbltpXS5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMudG9wLmNoaWxkcmVuLnNwbGljZShzdGFydCwgZW5kIC0gc3RhcnQpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBEZXN0cm95IGFsbCByZW1haW5pbmcgY2hpbGRyZW4gaW4gYHRoaXMudG9wYC5cbiAgICBkZXN0cm95UmVzdCgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LCB0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpO1xuICAgIH1cbiAgICAvLyBTeW5jIHRoZSBjdXJyZW50IHN0YWNrIG9mIG1hcmsgZGVzY3Mgd2l0aCB0aGUgZ2l2ZW4gYXJyYXkgb2ZcbiAgICAvLyBtYXJrcywgcmV1c2luZyBleGlzdGluZyBtYXJrIGRlc2NzIHdoZW4gcG9zc2libGUuXG4gICAgc3luY1RvTWFya3MobWFya3MsIGlubGluZSwgdmlldykge1xuICAgICAgICBsZXQga2VlcCA9IDAsIGRlcHRoID0gdGhpcy5zdGFjay5sZW5ndGggPj4gMTtcbiAgICAgICAgbGV0IG1heEtlZXAgPSBNYXRoLm1pbihkZXB0aCwgbWFya3MubGVuZ3RoKTtcbiAgICAgICAgd2hpbGUgKGtlZXAgPCBtYXhLZWVwICYmXG4gICAgICAgICAgICAoa2VlcCA9PSBkZXB0aCAtIDEgPyB0aGlzLnRvcCA6IHRoaXMuc3RhY2tbKGtlZXAgKyAxKSA8PCAxXSlcbiAgICAgICAgICAgICAgICAubWF0Y2hlc01hcmsobWFya3Nba2VlcF0pICYmIG1hcmtzW2tlZXBdLnR5cGUuc3BlYy5zcGFubmluZyAhPT0gZmFsc2UpXG4gICAgICAgICAgICBrZWVwKys7XG4gICAgICAgIHdoaWxlIChrZWVwIDwgZGVwdGgpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveVJlc3QoKTtcbiAgICAgICAgICAgIHRoaXMudG9wLmRpcnR5ID0gTk9UX0RJUlRZO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICAgICAgICB0aGlzLnRvcCA9IHRoaXMuc3RhY2sucG9wKCk7XG4gICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChkZXB0aCA8IG1hcmtzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMudG9wLCB0aGlzLmluZGV4ICsgMSk7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSAtMTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmluZGV4OyBpIDwgTWF0aC5taW4odGhpcy5pbmRleCArIDMsIHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy50b3AuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQubWF0Y2hlc01hcmsobWFya3NbZGVwdGhdKSAmJiAhdGhpcy5pc0xvY2tlZChuZXh0LmRvbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IHRoaXMuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LCBmb3VuZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudG9wID0gdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFya0Rlc2MgPSBNYXJrVmlld0Rlc2MuY3JlYXRlKHRoaXMudG9wLCBtYXJrc1tkZXB0aF0sIGlubGluZSwgdmlldyk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgsIDAsIG1hcmtEZXNjKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvcCA9IG1hcmtEZXNjO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIGRlcHRoKys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBub2RlIGRlc2MgbWF0Y2hpbmcgdGhlIGdpdmVuIGRhdGEuIFNraXAgb3ZlciBpdCBhbmRcbiAgICAvLyByZXR1cm4gdHJ1ZSB3aGVuIHN1Y2Nlc3NmdWwuXG4gICAgZmluZE5vZGVNYXRjaChub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgaW5kZXgpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gLTEsIHRhcmdldERlc2M7XG4gICAgICAgIGlmIChpbmRleCA+PSB0aGlzLnByZU1hdGNoLmluZGV4ICYmXG4gICAgICAgICAgICAodGFyZ2V0RGVzYyA9IHRoaXMucHJlTWF0Y2gubWF0Y2hlc1tpbmRleCAtIHRoaXMucHJlTWF0Y2guaW5kZXhdKS5wYXJlbnQgPT0gdGhpcy50b3AgJiZcbiAgICAgICAgICAgIHRhcmdldERlc2MubWF0Y2hlc05vZGUobm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28pKSB7XG4gICAgICAgICAgICBmb3VuZCA9IHRoaXMudG9wLmNoaWxkcmVuLmluZGV4T2YodGFyZ2V0RGVzYywgdGhpcy5pbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5pbmRleCwgZSA9IE1hdGgubWluKHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCwgaSArIDUpOyBpIDwgZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy50b3AuY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1hdGNoZXNOb2RlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvKSAmJiAhdGhpcy5wcmVNYXRjaC5tYXRjaGVkLmhhcyhjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvdW5kIDwgMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LCBmb3VuZCk7XG4gICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHVwZGF0ZU5vZGVBdChub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgaW5kZXgsIHZpZXcpIHtcbiAgICAgICAgbGV0IGNoaWxkID0gdGhpcy50b3AuY2hpbGRyZW5baW5kZXhdO1xuICAgICAgICBpZiAoY2hpbGQuZGlydHkgPT0gTk9ERV9ESVJUWSAmJiBjaGlsZC5kb20gPT0gY2hpbGQuY29udGVudERPTSlcbiAgICAgICAgICAgIGNoaWxkLmRpcnR5ID0gQ09OVEVOVF9ESVJUWTtcbiAgICAgICAgaWYgKCFjaGlsZC51cGRhdGUobm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIHZpZXcpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsIGluZGV4KTtcbiAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZmluZEluZGV4V2l0aENoaWxkKGRvbU5vZGUpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IGRvbU5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICghcGFyZW50KVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT0gdGhpcy50b3AuY29udGVudERPTSkge1xuICAgICAgICAgICAgICAgIGxldCBkZXNjID0gZG9tTm9kZS5wbVZpZXdEZXNjO1xuICAgICAgICAgICAgICAgIGlmIChkZXNjKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5pbmRleDsgaSA8IHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b3AuY2hpbGRyZW5baV0gPT0gZGVzYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbU5vZGUgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJ5IHRvIHVwZGF0ZSB0aGUgbmV4dCBub2RlLCBpZiBhbnksIHRvIHRoZSBnaXZlbiBkYXRhLiBDaGVja3NcbiAgICAvLyBwcmUtbWF0Y2hlcyB0byBhdm9pZCBvdmVyd3JpdGluZyBub2RlcyB0aGF0IGNvdWxkIHN0aWxsIGJlIHVzZWQuXG4gICAgdXBkYXRlTmV4dE5vZGUobm9kZSwgb3V0ZXJEZWNvLCBpbm5lckRlY28sIHZpZXcsIGluZGV4LCBwb3MpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaW5kZXg7IGkgPCB0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLnRvcC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChuZXh0IGluc3RhbmNlb2YgTm9kZVZpZXdEZXNjKSB7XG4gICAgICAgICAgICAgICAgbGV0IHByZU1hdGNoID0gdGhpcy5wcmVNYXRjaC5tYXRjaGVkLmdldChuZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAocHJlTWF0Y2ggIT0gbnVsbCAmJiBwcmVNYXRjaCAhPSBpbmRleClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGxldCBuZXh0RE9NID0gbmV4dC5kb20sIHVwZGF0ZWQ7XG4gICAgICAgICAgICAgICAgLy8gQ2FuJ3QgdXBkYXRlIGlmIG5leHRET00gaXMgb3IgY29udGFpbnMgdGhpcy5sb2NrLCBleGNlcHQgaWZcbiAgICAgICAgICAgICAgICAvLyBpdCdzIGEgdGV4dCBub2RlIHdob3NlIGNvbnRlbnQgYWxyZWFkeSBtYXRjaGVzIHRoZSBuZXcgdGV4dFxuICAgICAgICAgICAgICAgIC8vIGFuZCB3aG9zZSBkZWNvcmF0aW9ucyBtYXRjaCB0aGUgbmV3IG9uZXMuXG4gICAgICAgICAgICAgICAgbGV0IGxvY2tlZCA9IHRoaXMuaXNMb2NrZWQobmV4dERPTSkgJiZcbiAgICAgICAgICAgICAgICAgICAgIShub2RlLmlzVGV4dCAmJiBuZXh0Lm5vZGUgJiYgbmV4dC5ub2RlLmlzVGV4dCAmJiBuZXh0Lm5vZGVET00ubm9kZVZhbHVlID09IG5vZGUudGV4dCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5kaXJ0eSAhPSBOT0RFX0RJUlRZICYmIHNhbWVPdXRlckRlY28ob3V0ZXJEZWNvLCBuZXh0Lm91dGVyRGVjbykpO1xuICAgICAgICAgICAgICAgIGlmICghbG9ja2VkICYmIG5leHQudXBkYXRlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsIGkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC5kb20gIT0gbmV4dERPTSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFsb2NrZWQgJiYgKHVwZGF0ZWQgPSB0aGlzLnJlY3JlYXRlV3JhcHBlcihuZXh0LCBub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldywgcG9zKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0gPSB1cGRhdGVkO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkLmRpcnR5ID0gQ09OVEVOVF9ESVJUWTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC51cGRhdGVDaGlsZHJlbih2aWV3LCBwb3MgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZC5kaXJ0eSA9IE5PVF9ESVJUWTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBXaGVuIGEgbm9kZSB3aXRoIGNvbnRlbnQgaXMgcmVwbGFjZWQgYnkgYSBkaWZmZXJlbnQgbm9kZSB3aXRoXG4gICAgLy8gaWRlbnRpY2FsIGNvbnRlbnQsIG1vdmUgb3ZlciBpdHMgY2hpbGRyZW4uXG4gICAgcmVjcmVhdGVXcmFwcGVyKG5leHQsIG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3LCBwb3MpIHtcbiAgICAgICAgaWYgKG5leHQuZGlydHkgfHwgbm9kZS5pc0F0b20gfHwgIW5leHQuY2hpbGRyZW4ubGVuZ3RoIHx8XG4gICAgICAgICAgICAhbmV4dC5ub2RlLmNvbnRlbnQuZXEobm9kZS5jb250ZW50KSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgd3JhcHBlciA9IE5vZGVWaWV3RGVzYy5jcmVhdGUodGhpcy50b3AsIG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3LCBwb3MpO1xuICAgICAgICBpZiAoIXdyYXBwZXIuY29udGVudERPTSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3cmFwcGVyLmNoaWxkcmVuID0gbmV4dC5jaGlsZHJlbjtcbiAgICAgICAgbmV4dC5jaGlsZHJlbiA9IFtdO1xuICAgICAgICBuZXh0LmRlc3Ryb3koKTtcbiAgICAgICAgZm9yIChsZXQgY2ggb2Ygd3JhcHBlci5jaGlsZHJlbilcbiAgICAgICAgICAgIGNoLnBhcmVudCA9IHdyYXBwZXI7XG4gICAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cbiAgICAvLyBJbnNlcnQgdGhlIG5vZGUgYXMgYSBuZXdseSBjcmVhdGVkIG5vZGUgZGVzYy5cbiAgICBhZGROb2RlKG5vZGUsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB2aWV3LCBwb3MpIHtcbiAgICAgICAgbGV0IGRlc2MgPSBOb2RlVmlld0Rlc2MuY3JlYXRlKHRoaXMudG9wLCBub2RlLCBvdXRlckRlY28sIGlubmVyRGVjbywgdmlldywgcG9zKTtcbiAgICAgICAgaWYgKGRlc2MuY29udGVudERPTSlcbiAgICAgICAgICAgIGRlc2MudXBkYXRlQ2hpbGRyZW4odmlldywgcG9zICsgMSk7XG4gICAgICAgIHRoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssIDAsIGRlc2MpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBwbGFjZVdpZGdldCh3aWRnZXQsIHZpZXcsIHBvcykge1xuICAgICAgICBsZXQgbmV4dCA9IHRoaXMuaW5kZXggPCB0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGggPyB0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XSA6IG51bGw7XG4gICAgICAgIGlmIChuZXh0ICYmIG5leHQubWF0Y2hlc1dpZGdldCh3aWRnZXQpICYmXG4gICAgICAgICAgICAod2lkZ2V0ID09IG5leHQud2lkZ2V0IHx8ICFuZXh0LndpZGdldC50eXBlLnRvRE9NLnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGVzYyA9IG5ldyBXaWRnZXRWaWV3RGVzYyh0aGlzLnRvcCwgd2lkZ2V0LCB2aWV3LCBwb3MpO1xuICAgICAgICAgICAgdGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywgMCwgZGVzYyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSBhIHRleHRibG9jayBsb29rcyBhbmQgYmVoYXZlcyBjb3JyZWN0bHkgaW5cbiAgICAvLyBjb250ZW50RWRpdGFibGUuXG4gICAgYWRkVGV4dGJsb2NrSGFja3MoKSB7XG4gICAgICAgIGxldCBsYXN0Q2hpbGQgPSB0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4IC0gMV0sIHBhcmVudCA9IHRoaXMudG9wO1xuICAgICAgICB3aGlsZSAobGFzdENoaWxkIGluc3RhbmNlb2YgTWFya1ZpZXdEZXNjKSB7XG4gICAgICAgICAgICBwYXJlbnQgPSBsYXN0Q2hpbGQ7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSBwYXJlbnQuY2hpbGRyZW5bcGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbGFzdENoaWxkIHx8IC8vIEVtcHR5IHRleHRibG9ja1xuICAgICAgICAgICAgIShsYXN0Q2hpbGQgaW5zdGFuY2VvZiBUZXh0Vmlld0Rlc2MpIHx8XG4gICAgICAgICAgICAvXFxuJC8udGVzdChsYXN0Q2hpbGQubm9kZS50ZXh0KSB8fFxuICAgICAgICAgICAgKHRoaXMudmlldy5yZXF1aXJlc0dlY2tvSGFja05vZGUgJiYgL1xccyQvLnRlc3QobGFzdENoaWxkLm5vZGUudGV4dCkpKSB7XG4gICAgICAgICAgICAvLyBBdm9pZCBidWdzIGluIFNhZmFyaSdzIGN1cnNvciBkcmF3aW5nICgjMTE2NSkgYW5kIENocm9tZSdzIG1vdXNlIHNlbGVjdGlvbiAoIzExNTIpXG4gICAgICAgICAgICBpZiAoKHNhZmFyaSB8fCBjaHJvbWUpICYmIGxhc3RDaGlsZCAmJiBsYXN0Q2hpbGQuZG9tLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRIYWNrTm9kZShcIklNR1wiLCBwYXJlbnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRIYWNrTm9kZShcIkJSXCIsIHRoaXMudG9wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRIYWNrTm9kZShub2RlTmFtZSwgcGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gdGhpcy50b3AgJiYgdGhpcy5pbmRleCA8IHBhcmVudC5jaGlsZHJlbi5sZW5ndGggJiYgcGFyZW50LmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNIYWNrKG5vZGVOYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgICAgICAgICAgaWYgKG5vZGVOYW1lID09IFwiSU1HXCIpIHtcbiAgICAgICAgICAgICAgICBkb20uY2xhc3NOYW1lID0gXCJQcm9zZU1pcnJvci1zZXBhcmF0b3JcIjtcbiAgICAgICAgICAgICAgICBkb20uYWx0ID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlTmFtZSA9PSBcIkJSXCIpXG4gICAgICAgICAgICAgICAgZG9tLmNsYXNzTmFtZSA9IFwiUHJvc2VNaXJyb3ItdHJhaWxpbmdCcmVha1wiO1xuICAgICAgICAgICAgbGV0IGhhY2sgPSBuZXcgVHJhaWxpbmdIYWNrVmlld0Rlc2ModGhpcy50b3AsIFtdLCBkb20sIG51bGwpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCAhPSB0aGlzLnRvcClcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4ucHVzaChoYWNrKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywgMCwgaGFjayk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzTG9ja2VkKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jayAmJiAobm9kZSA9PSB0aGlzLmxvY2sgfHwgbm9kZS5ub2RlVHlwZSA9PSAxICYmIG5vZGUuY29udGFpbnModGhpcy5sb2NrLnBhcmVudE5vZGUpKTtcbiAgICB9XG59XG4vLyBJdGVyYXRlIGZyb20gdGhlIGVuZCBvZiB0aGUgZnJhZ21lbnQgYW5kIGFycmF5IG9mIGRlc2NzIHRvIGZpbmRcbi8vIGRpcmVjdGx5IG1hdGNoaW5nIG9uZXMsIGluIG9yZGVyIHRvIGF2b2lkIG92ZXJlYWdlcmx5IHJldXNpbmcgdGhvc2Vcbi8vIGZvciBvdGhlciBub2Rlcy4gUmV0dXJucyB0aGUgZnJhZ21lbnQgaW5kZXggb2YgdGhlIGZpcnN0IG5vZGUgdGhhdFxuLy8gaXMgcGFydCBvZiB0aGUgc2VxdWVuY2Ugb2YgbWF0Y2hlZCBub2RlcyBhdCB0aGUgZW5kIG9mIHRoZVxuLy8gZnJhZ21lbnQuXG5mdW5jdGlvbiBwcmVNYXRjaChmcmFnLCBwYXJlbnREZXNjKSB7XG4gICAgbGV0IGN1ckRlc2MgPSBwYXJlbnREZXNjLCBkZXNjSSA9IGN1ckRlc2MuY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGxldCBmSSA9IGZyYWcuY2hpbGRDb3VudCwgbWF0Y2hlZCA9IG5ldyBNYXAsIG1hdGNoZXMgPSBbXTtcbiAgICBvdXRlcjogd2hpbGUgKGZJID4gMCkge1xuICAgICAgICBsZXQgZGVzYztcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaWYgKGRlc2NJKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBjdXJEZXNjLmNoaWxkcmVuW2Rlc2NJIC0gMV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHQgaW5zdGFuY2VvZiBNYXJrVmlld0Rlc2MpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyRGVzYyA9IG5leHQ7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NJID0gbmV4dC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXNjID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgZGVzY0ktLTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VyRGVzYyA9PSBwYXJlbnREZXNjKSB7XG4gICAgICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgICAgIGRlc2NJID0gY3VyRGVzYy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihjdXJEZXNjKTtcbiAgICAgICAgICAgICAgICBjdXJEZXNjID0gY3VyRGVzYy5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5vZGUgPSBkZXNjLm5vZGU7XG4gICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBpZiAobm9kZSAhPSBmcmFnLmNoaWxkKGZJIC0gMSkpXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgLS1mSTtcbiAgICAgICAgbWF0Y2hlZC5zZXQoZGVzYywgZkkpO1xuICAgICAgICBtYXRjaGVzLnB1c2goZGVzYyk7XG4gICAgfVxuICAgIHJldHVybiB7IGluZGV4OiBmSSwgbWF0Y2hlZCwgbWF0Y2hlczogbWF0Y2hlcy5yZXZlcnNlKCkgfTtcbn1cbmZ1bmN0aW9uIGNvbXBhcmVTaWRlKGEsIGIpIHtcbiAgICByZXR1cm4gYS50eXBlLnNpZGUgLSBiLnR5cGUuc2lkZTtcbn1cbi8vIFRoaXMgZnVuY3Rpb24gYWJzdHJhY3RzIGl0ZXJhdGluZyBvdmVyIHRoZSBub2RlcyBhbmQgZGVjb3JhdGlvbnMgaW5cbi8vIGEgZnJhZ21lbnQuIENhbGxzIGBvbk5vZGVgIGZvciBlYWNoIG5vZGUsIHdpdGggaXRzIGxvY2FsIGFuZCBjaGlsZFxuLy8gZGVjb3JhdGlvbnMuIFNwbGl0cyB0ZXh0IG5vZGVzIHdoZW4gdGhlcmUgaXMgYSBkZWNvcmF0aW9uIHN0YXJ0aW5nXG4vLyBvciBlbmRpbmcgaW5zaWRlIG9mIHRoZW0uIENhbGxzIGBvbldpZGdldGAgZm9yIGVhY2ggd2lkZ2V0LlxuZnVuY3Rpb24gaXRlckRlY28ocGFyZW50LCBkZWNvLCBvbldpZGdldCwgb25Ob2RlKSB7XG4gICAgbGV0IGxvY2FscyA9IGRlY28ubG9jYWxzKHBhcmVudCksIG9mZnNldCA9IDA7XG4gICAgLy8gU2ltcGxlLCBjaGVhcCB2YXJpYW50IGZvciB3aGVuIHRoZXJlIGFyZSBubyBsb2NhbCBkZWNvcmF0aW9uc1xuICAgIGlmIChsb2NhbHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJlbnQuY2hpbGRDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBwYXJlbnQuY2hpbGQoaSk7XG4gICAgICAgICAgICBvbk5vZGUoY2hpbGQsIGxvY2FscywgZGVjby5mb3JDaGlsZChvZmZzZXQsIGNoaWxkKSwgaSk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gY2hpbGQubm9kZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZGVjb0luZGV4ID0gMCwgYWN0aXZlID0gW10sIHJlc3ROb2RlID0gbnVsbDtcbiAgICBmb3IgKGxldCBwYXJlbnRJbmRleCA9IDA7Oykge1xuICAgICAgICBpZiAoZGVjb0luZGV4IDwgbG9jYWxzLmxlbmd0aCAmJiBsb2NhbHNbZGVjb0luZGV4XS50byA9PSBvZmZzZXQpIHtcbiAgICAgICAgICAgIGxldCB3aWRnZXQgPSBsb2NhbHNbZGVjb0luZGV4KytdLCB3aWRnZXRzO1xuICAgICAgICAgICAgd2hpbGUgKGRlY29JbmRleCA8IGxvY2Fscy5sZW5ndGggJiYgbG9jYWxzW2RlY29JbmRleF0udG8gPT0gb2Zmc2V0KVxuICAgICAgICAgICAgICAgICh3aWRnZXRzIHx8ICh3aWRnZXRzID0gW3dpZGdldF0pKS5wdXNoKGxvY2Fsc1tkZWNvSW5kZXgrK10pO1xuICAgICAgICAgICAgaWYgKHdpZGdldHMpIHtcbiAgICAgICAgICAgICAgICB3aWRnZXRzLnNvcnQoY29tcGFyZVNpZGUpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2lkZ2V0cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgb25XaWRnZXQod2lkZ2V0c1tpXSwgcGFyZW50SW5kZXgsICEhcmVzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb25XaWRnZXQod2lkZ2V0LCBwYXJlbnRJbmRleCwgISFyZXN0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoaWxkLCBpbmRleDtcbiAgICAgICAgaWYgKHJlc3ROb2RlKSB7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgY2hpbGQgPSByZXN0Tm9kZTtcbiAgICAgICAgICAgIHJlc3ROb2RlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnRJbmRleCA8IHBhcmVudC5jaGlsZENvdW50KSB7XG4gICAgICAgICAgICBpbmRleCA9IHBhcmVudEluZGV4O1xuICAgICAgICAgICAgY2hpbGQgPSBwYXJlbnQuY2hpbGQocGFyZW50SW5kZXgrKyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChhY3RpdmVbaV0udG8gPD0gb2Zmc2V0KVxuICAgICAgICAgICAgICAgIGFjdGl2ZS5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgd2hpbGUgKGRlY29JbmRleCA8IGxvY2Fscy5sZW5ndGggJiYgbG9jYWxzW2RlY29JbmRleF0uZnJvbSA8PSBvZmZzZXQgJiYgbG9jYWxzW2RlY29JbmRleF0udG8gPiBvZmZzZXQpXG4gICAgICAgICAgICBhY3RpdmUucHVzaChsb2NhbHNbZGVjb0luZGV4KytdKTtcbiAgICAgICAgbGV0IGVuZCA9IG9mZnNldCArIGNoaWxkLm5vZGVTaXplO1xuICAgICAgICBpZiAoY2hpbGQuaXNUZXh0KSB7XG4gICAgICAgICAgICBsZXQgY3V0QXQgPSBlbmQ7XG4gICAgICAgICAgICBpZiAoZGVjb0luZGV4IDwgbG9jYWxzLmxlbmd0aCAmJiBsb2NhbHNbZGVjb0luZGV4XS5mcm9tIDwgY3V0QXQpXG4gICAgICAgICAgICAgICAgY3V0QXQgPSBsb2NhbHNbZGVjb0luZGV4XS5mcm9tO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmUubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVtpXS50byA8IGN1dEF0KVxuICAgICAgICAgICAgICAgICAgICBjdXRBdCA9IGFjdGl2ZVtpXS50bztcbiAgICAgICAgICAgIGlmIChjdXRBdCA8IGVuZCkge1xuICAgICAgICAgICAgICAgIHJlc3ROb2RlID0gY2hpbGQuY3V0KGN1dEF0IC0gb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLmN1dCgwLCBjdXRBdCAtIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgZW5kID0gY3V0QXQ7XG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3V0ZXJEZWNvID0gY2hpbGQuaXNJbmxpbmUgJiYgIWNoaWxkLmlzTGVhZiA/IGFjdGl2ZS5maWx0ZXIoZCA9PiAhZC5pbmxpbmUpIDogYWN0aXZlLnNsaWNlKCk7XG4gICAgICAgIG9uTm9kZShjaGlsZCwgb3V0ZXJEZWNvLCBkZWNvLmZvckNoaWxkKG9mZnNldCwgY2hpbGQpLCBpbmRleCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG59XG4vLyBMaXN0IG1hcmtlcnMgaW4gTW9iaWxlIFNhZmFyaSB3aWxsIG15c3RlcmlvdXNseSBkaXNhcHBlYXJcbi8vIHNvbWV0aW1lcy4gVGhpcyB3b3JrcyBhcm91bmQgdGhhdC5cbmZ1bmN0aW9uIGlvc0hhY2tzKGRvbSkge1xuICAgIGlmIChkb20ubm9kZU5hbWUgPT0gXCJVTFwiIHx8IGRvbS5ub2RlTmFtZSA9PSBcIk9MXCIpIHtcbiAgICAgICAgbGV0IG9sZENTUyA9IGRvbS5zdHlsZS5jc3NUZXh0O1xuICAgICAgICBkb20uc3R5bGUuY3NzVGV4dCA9IG9sZENTUyArIFwiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudFwiO1xuICAgICAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb20pLmxpc3RTdHlsZTtcbiAgICAgICAgZG9tLnN0eWxlLmNzc1RleHQgPSBvbGRDU1M7XG4gICAgfVxufVxuZnVuY3Rpb24gbmVhcmJ5VGV4dE5vZGUobm9kZSwgb2Zmc2V0KSB7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAzKVxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiBvZmZzZXQgJiYgbm9kZS5jaGlsZE5vZGVzW29mZnNldF0ubm9kZVR5cGUgPT0gMylcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdO1xuICAgICAgICAgICAgb2Zmc2V0ID0gbm9kZVNpemUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIG9mZnNldCA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEZpbmQgYSBwaWVjZSBvZiB0ZXh0IGluIGFuIGlubGluZSBmcmFnbWVudCwgb3ZlcmxhcHBpbmcgZnJvbS10b1xuZnVuY3Rpb24gZmluZFRleHRJbkZyYWdtZW50KGZyYWcsIHRleHQsIGZyb20sIHRvKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIHBvcyA9IDA7IGkgPCBmcmFnLmNoaWxkQ291bnQgJiYgcG9zIDw9IHRvOykge1xuICAgICAgICBsZXQgY2hpbGQgPSBmcmFnLmNoaWxkKGkrKyksIGNoaWxkU3RhcnQgPSBwb3M7XG4gICAgICAgIHBvcyArPSBjaGlsZC5ub2RlU2l6ZTtcbiAgICAgICAgaWYgKCFjaGlsZC5pc1RleHQpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgbGV0IHN0ciA9IGNoaWxkLnRleHQ7XG4gICAgICAgIHdoaWxlIChpIDwgZnJhZy5jaGlsZENvdW50KSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IGZyYWcuY2hpbGQoaSsrKTtcbiAgICAgICAgICAgIHBvcyArPSBuZXh0Lm5vZGVTaXplO1xuICAgICAgICAgICAgaWYgKCFuZXh0LmlzVGV4dClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIHN0ciArPSBuZXh0LnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcyA+PSBmcm9tKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBjaGlsZFN0YXJ0IDwgdG8gPyBzdHIubGFzdEluZGV4T2YodGV4dCwgdG8gLSBjaGlsZFN0YXJ0IC0gMSkgOiAtMTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA+PSAwICYmIGZvdW5kICsgdGV4dC5sZW5ndGggKyBjaGlsZFN0YXJ0ID49IGZyb20pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkU3RhcnQgKyBmb3VuZDtcbiAgICAgICAgICAgIGlmIChmcm9tID09IHRvICYmIHN0ci5sZW5ndGggPj0gKHRvICsgdGV4dC5sZW5ndGgpIC0gY2hpbGRTdGFydCAmJlxuICAgICAgICAgICAgICAgIHN0ci5zbGljZSh0byAtIGNoaWxkU3RhcnQsIHRvIC0gY2hpbGRTdGFydCArIHRleHQubGVuZ3RoKSA9PSB0ZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG4vLyBSZXBsYWNlIHJhbmdlIGZyb20tdG8gaW4gYW4gYXJyYXkgb2YgdmlldyBkZXNjcyB3aXRoIHJlcGxhY2VtZW50XG4vLyAobWF5IGJlIG51bGwgdG8ganVzdCBkZWxldGUpLiBUaGlzIGdvZXMgdmVyeSBtdWNoIGFnYWluc3QgdGhlIGdyYWluXG4vLyBvZiB0aGUgcmVzdCBvZiB0aGlzIGNvZGUsIHdoaWNoIHRlbmRzIHRvIGNyZWF0ZSBub2RlcyB3aXRoIHRoZVxuLy8gcmlnaHQgc2hhcGUgaW4gb25lIGdvLCByYXRoZXIgdGhhbiBtZXNzaW5nIHdpdGggdGhlbSBhZnRlclxuLy8gY3JlYXRpb24sIGJ1dCBpcyBuZWNlc3NhcnkgaW4gdGhlIGNvbXBvc2l0aW9uIGhhY2suXG5mdW5jdGlvbiByZXBsYWNlTm9kZXMobm9kZXMsIGZyb20sIHRvLCB2aWV3LCByZXBsYWNlbWVudCkge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgb2ZmID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IG5vZGVzW2ldLCBzdGFydCA9IG9mZiwgZW5kID0gb2ZmICs9IGNoaWxkLnNpemU7XG4gICAgICAgIGlmIChzdGFydCA+PSB0byB8fCBlbmQgPD0gZnJvbSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goY2hpbGQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHN0YXJ0IDwgZnJvbSlcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjaGlsZC5zbGljZSgwLCBmcm9tIC0gc3RhcnQsIHZpZXcpKTtcbiAgICAgICAgICAgIGlmIChyZXBsYWNlbWVudCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJlcGxhY2VtZW50KTtcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbmQgPiB0bylcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjaGlsZC5zbGljZSh0byAtIHN0YXJ0LCBjaGlsZC5zaXplLCB2aWV3KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gc2VsZWN0aW9uRnJvbURPTSh2aWV3LCBvcmlnaW4gPSBudWxsKSB7XG4gICAgbGV0IGRvbVNlbCA9IHZpZXcuZG9tU2VsZWN0aW9uUmFuZ2UoKSwgZG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgaWYgKCFkb21TZWwuZm9jdXNOb2RlKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgbmVhcmVzdERlc2MgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZG9tU2VsLmZvY3VzTm9kZSksIGluV2lkZ2V0ID0gbmVhcmVzdERlc2MgJiYgbmVhcmVzdERlc2Muc2l6ZSA9PSAwO1xuICAgIGxldCBoZWFkID0gdmlldy5kb2NWaWV3LnBvc0Zyb21ET00oZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0LCAxKTtcbiAgICBpZiAoaGVhZCA8IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCAkaGVhZCA9IGRvYy5yZXNvbHZlKGhlYWQpLCAkYW5jaG9yLCBzZWxlY3Rpb247XG4gICAgaWYgKHNlbGVjdGlvbkNvbGxhcHNlZChkb21TZWwpKSB7XG4gICAgICAgICRhbmNob3IgPSAkaGVhZDtcbiAgICAgICAgd2hpbGUgKG5lYXJlc3REZXNjICYmICFuZWFyZXN0RGVzYy5ub2RlKVxuICAgICAgICAgICAgbmVhcmVzdERlc2MgPSBuZWFyZXN0RGVzYy5wYXJlbnQ7XG4gICAgICAgIGxldCBuZWFyZXN0RGVzY05vZGUgPSBuZWFyZXN0RGVzYy5ub2RlO1xuICAgICAgICBpZiAobmVhcmVzdERlc2MgJiYgbmVhcmVzdERlc2NOb2RlLmlzQXRvbSAmJiBOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShuZWFyZXN0RGVzY05vZGUpICYmIG5lYXJlc3REZXNjLnBhcmVudFxuICAgICAgICAgICAgJiYgIShuZWFyZXN0RGVzY05vZGUuaXNJbmxpbmUgJiYgaXNPbkVkZ2UoZG9tU2VsLmZvY3VzTm9kZSwgZG9tU2VsLmZvY3VzT2Zmc2V0LCBuZWFyZXN0RGVzYy5kb20pKSkge1xuICAgICAgICAgICAgbGV0IHBvcyA9IG5lYXJlc3REZXNjLnBvc0JlZm9yZTtcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IG5ldyBOb2RlU2VsZWN0aW9uKGhlYWQgPT0gcG9zID8gJGhlYWQgOiBkb2MucmVzb2x2ZShwb3MpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGFuY2hvciA9IHZpZXcuZG9jVmlldy5wb3NGcm9tRE9NKGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0LCAxKTtcbiAgICAgICAgaWYgKGFuY2hvciA8IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgJGFuY2hvciA9IGRvYy5yZXNvbHZlKGFuY2hvcik7XG4gICAgfVxuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICAgIGxldCBiaWFzID0gb3JpZ2luID09IFwicG9pbnRlclwiIHx8ICh2aWV3LnN0YXRlLnNlbGVjdGlvbi5oZWFkIDwgJGhlYWQucG9zICYmICFpbldpZGdldCkgPyAxIDogLTE7XG4gICAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdGlvbkJldHdlZW4odmlldywgJGFuY2hvciwgJGhlYWQsIGJpYXMpO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZWN0aW9uO1xufVxuZnVuY3Rpb24gZWRpdG9yT3duc1NlbGVjdGlvbih2aWV3KSB7XG4gICAgcmV0dXJuIHZpZXcuZWRpdGFibGUgPyB2aWV3Lmhhc0ZvY3VzKCkgOlxuICAgICAgICBoYXNTZWxlY3Rpb24odmlldykgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNvbnRhaW5zKHZpZXcuZG9tKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvblRvRE9NKHZpZXcsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBsZXQgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgc3luY05vZGVTZWxlY3Rpb24odmlldywgc2VsKTtcbiAgICBpZiAoIWVkaXRvck93bnNTZWxlY3Rpb24odmlldykpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBUaGUgZGVsYXllZCBkcmFnIHNlbGVjdGlvbiBjYXVzZXMgaXNzdWVzIHdpdGggQ2VsbCBTZWxlY3Rpb25zXG4gICAgLy8gaW4gU2FmYXJpLiBBbmQgdGhlIGRyYWcgc2VsZWN0aW9uIGRlbGF5IGlzIHRvIHdvcmthcm9uZCBpc3N1ZXNcbiAgICAvLyB3aGljaCBvbmx5IHByZXNlbnQgaW4gQ2hyb21lLlxuICAgIGlmICghZm9yY2UgJiYgdmlldy5pbnB1dC5tb3VzZURvd24gJiYgdmlldy5pbnB1dC5tb3VzZURvd24uYWxsb3dEZWZhdWx0ICYmIGNocm9tZSkge1xuICAgICAgICBsZXQgZG9tU2VsID0gdmlldy5kb21TZWxlY3Rpb25SYW5nZSgpLCBjdXJTZWwgPSB2aWV3LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb247XG4gICAgICAgIGlmIChkb21TZWwuYW5jaG9yTm9kZSAmJiBjdXJTZWwuYW5jaG9yTm9kZSAmJlxuICAgICAgICAgICAgaXNFcXVpdmFsZW50UG9zaXRpb24oZG9tU2VsLmFuY2hvck5vZGUsIGRvbVNlbC5hbmNob3JPZmZzZXQsIGN1clNlbC5hbmNob3JOb2RlLCBjdXJTZWwuYW5jaG9yT2Zmc2V0KSkge1xuICAgICAgICAgICAgdmlldy5pbnB1dC5tb3VzZURvd24uZGVsYXllZFNlbGVjdGlvblN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgdmlldy5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aWV3LmRvbU9ic2VydmVyLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKTtcbiAgICBpZiAodmlldy5jdXJzb3JXcmFwcGVyKSB7XG4gICAgICAgIHNlbGVjdEN1cnNvcldyYXBwZXIodmlldyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgeyBhbmNob3IsIGhlYWQgfSA9IHNlbCwgcmVzZXRFZGl0YWJsZUZyb20sIHJlc2V0RWRpdGFibGVUbztcbiAgICAgICAgaWYgKGJyb2tlblNlbGVjdEJldHdlZW5VbmVkaXRhYmxlICYmICEoc2VsIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGlmICghc2VsLiRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50KVxuICAgICAgICAgICAgICAgIHJlc2V0RWRpdGFibGVGcm9tID0gdGVtcG9yYXJpbHlFZGl0YWJsZU5lYXIodmlldywgc2VsLmZyb20pO1xuICAgICAgICAgICAgaWYgKCFzZWwuZW1wdHkgJiYgIXNlbC4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudClcbiAgICAgICAgICAgICAgICByZXNldEVkaXRhYmxlVG8gPSB0ZW1wb3JhcmlseUVkaXRhYmxlTmVhcih2aWV3LCBzZWwudG8pO1xuICAgICAgICB9XG4gICAgICAgIHZpZXcuZG9jVmlldy5zZXRTZWxlY3Rpb24oYW5jaG9yLCBoZWFkLCB2aWV3LnJvb3QsIGZvcmNlKTtcbiAgICAgICAgaWYgKGJyb2tlblNlbGVjdEJldHdlZW5VbmVkaXRhYmxlKSB7XG4gICAgICAgICAgICBpZiAocmVzZXRFZGl0YWJsZUZyb20pXG4gICAgICAgICAgICAgICAgcmVzZXRFZGl0YWJsZShyZXNldEVkaXRhYmxlRnJvbSk7XG4gICAgICAgICAgICBpZiAocmVzZXRFZGl0YWJsZVRvKVxuICAgICAgICAgICAgICAgIHJlc2V0RWRpdGFibGUocmVzZXRFZGl0YWJsZVRvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsLnZpc2libGUpIHtcbiAgICAgICAgICAgIHZpZXcuZG9tLmNsYXNzTGlzdC5yZW1vdmUoXCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmlldy5kb20uY2xhc3NMaXN0LmFkZChcIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb25cIik7XG4gICAgICAgICAgICBpZiAoXCJvbnNlbGVjdGlvbmNoYW5nZVwiIGluIGRvY3VtZW50KVxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzT25TZWxlY3Rpb25DaGFuZ2Uodmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlldy5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKTtcbiAgICB2aWV3LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKTtcbn1cbi8vIEtsdWRnZSB0byB3b3JrIGFyb3VuZCBXZWJraXQgbm90IGFsbG93aW5nIGEgc2VsZWN0aW9uIHRvIHN0YXJ0L2VuZFxuLy8gYmV0d2VlbiBub24tZWRpdGFibGUgYmxvY2sgbm9kZXMuIFdlIGJyaWVmbHkgbWFrZSBzb21ldGhpbmdcbi8vIGVkaXRhYmxlLCBzZXQgdGhlIHNlbGVjdGlvbiwgdGhlbiBzZXQgaXQgdW5lZGl0YWJsZSBhZ2Fpbi5cbmNvbnN0IGJyb2tlblNlbGVjdEJldHdlZW5VbmVkaXRhYmxlID0gc2FmYXJpIHx8IGNocm9tZSAmJiBjaHJvbWVfdmVyc2lvbiA8IDYzO1xuZnVuY3Rpb24gdGVtcG9yYXJpbHlFZGl0YWJsZU5lYXIodmlldywgcG9zKSB7XG4gICAgbGV0IHsgbm9kZSwgb2Zmc2V0IH0gPSB2aWV3LmRvY1ZpZXcuZG9tRnJvbVBvcyhwb3MsIDApO1xuICAgIGxldCBhZnRlciA9IG9mZnNldCA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPyBub2RlLmNoaWxkTm9kZXNbb2Zmc2V0XSA6IG51bGw7XG4gICAgbGV0IGJlZm9yZSA9IG9mZnNldCA/IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXSA6IG51bGw7XG4gICAgaWYgKHNhZmFyaSAmJiBhZnRlciAmJiBhZnRlci5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKVxuICAgICAgICByZXR1cm4gc2V0RWRpdGFibGUoYWZ0ZXIpO1xuICAgIGlmICgoIWFmdGVyIHx8IGFmdGVyLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpICYmXG4gICAgICAgICghYmVmb3JlIHx8IGJlZm9yZS5jb250ZW50RWRpdGFibGUgPT0gXCJmYWxzZVwiKSkge1xuICAgICAgICBpZiAoYWZ0ZXIpXG4gICAgICAgICAgICByZXR1cm4gc2V0RWRpdGFibGUoYWZ0ZXIpO1xuICAgICAgICBlbHNlIGlmIChiZWZvcmUpXG4gICAgICAgICAgICByZXR1cm4gc2V0RWRpdGFibGUoYmVmb3JlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBzZXRFZGl0YWJsZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5jb250ZW50RWRpdGFibGUgPSBcInRydWVcIjtcbiAgICBpZiAoc2FmYXJpICYmIGVsZW1lbnQuZHJhZ2dhYmxlKSB7XG4gICAgICAgIGVsZW1lbnQuZHJhZ2dhYmxlID0gZmFsc2U7XG4gICAgICAgIGVsZW1lbnQud2FzRHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiByZXNldEVkaXRhYmxlKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmNvbnRlbnRFZGl0YWJsZSA9IFwiZmFsc2VcIjtcbiAgICBpZiAoZWxlbWVudC53YXNEcmFnZ2FibGUpIHtcbiAgICAgICAgZWxlbWVudC5kcmFnZ2FibGUgPSB0cnVlO1xuICAgICAgICBlbGVtZW50Lndhc0RyYWdnYWJsZSA9IG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3NPblNlbGVjdGlvbkNoYW5nZSh2aWV3KSB7XG4gICAgbGV0IGRvYyA9IHZpZXcuZG9tLm93bmVyRG9jdW1lbnQ7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgdmlldy5pbnB1dC5oaWRlU2VsZWN0aW9uR3VhcmQpO1xuICAgIGxldCBkb21TZWwgPSB2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgbGV0IG5vZGUgPSBkb21TZWwuYW5jaG9yTm9kZSwgb2Zmc2V0ID0gZG9tU2VsLmFuY2hvck9mZnNldDtcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB2aWV3LmlucHV0LmhpZGVTZWxlY3Rpb25HdWFyZCA9ICgpID0+IHtcbiAgICAgICAgaWYgKGRvbVNlbC5hbmNob3JOb2RlICE9IG5vZGUgfHwgZG9tU2VsLmFuY2hvck9mZnNldCAhPSBvZmZzZXQpIHtcbiAgICAgICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHZpZXcuaW5wdXQuaGlkZVNlbGVjdGlvbkd1YXJkKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZWRpdG9yT3duc1NlbGVjdGlvbih2aWV3KSB8fCB2aWV3LnN0YXRlLnNlbGVjdGlvbi52aXNpYmxlKVxuICAgICAgICAgICAgICAgICAgICB2aWV3LmRvbS5jbGFzc0xpc3QucmVtb3ZlKFwiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvblwiKTtcbiAgICAgICAgICAgIH0sIDIwKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gc2VsZWN0Q3Vyc29yV3JhcHBlcih2aWV3KSB7XG4gICAgbGV0IGRvbVNlbCA9IHZpZXcuZG9tU2VsZWN0aW9uKCksIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICBsZXQgbm9kZSA9IHZpZXcuY3Vyc29yV3JhcHBlci5kb20sIGltZyA9IG5vZGUubm9kZU5hbWUgPT0gXCJJTUdcIjtcbiAgICBpZiAoaW1nKVxuICAgICAgICByYW5nZS5zZXRFbmQobm9kZS5wYXJlbnROb2RlLCBkb21JbmRleChub2RlKSArIDEpO1xuICAgIGVsc2VcbiAgICAgICAgcmFuZ2Uuc2V0RW5kKG5vZGUsIDApO1xuICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTtcbiAgICBkb21TZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgZG9tU2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICAvLyBLbHVkZ2UgdG8ga2lsbCAnY29udHJvbCBzZWxlY3Rpb24nIGluIElFMTEgd2hlbiBzZWxlY3RpbmcgYW5cbiAgICAvLyBpbnZpc2libGUgY3Vyc29yIHdyYXBwZXIsIHNpbmNlIHRoYXQgd291bGQgcmVzdWx0IGluIHRob3NlIHdlaXJkXG4gICAgLy8gcmVzaXplIGhhbmRsZXMgYW5kIGEgc2VsZWN0aW9uIHRoYXQgY29uc2lkZXJzIHRoZSBhYnNvbHV0ZWx5XG4gICAgLy8gcG9zaXRpb25lZCB3cmFwcGVyLCByYXRoZXIgdGhhbiB0aGUgcm9vdCBlZGl0YWJsZSBub2RlLCB0aGVcbiAgICAvLyBmb2N1c2VkIGVsZW1lbnQuXG4gICAgaWYgKCFpbWcgJiYgIXZpZXcuc3RhdGUuc2VsZWN0aW9uLnZpc2libGUgJiYgaWUgJiYgaWVfdmVyc2lvbiA8PSAxMSkge1xuICAgICAgICBub2RlLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgbm9kZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN5bmNOb2RlU2VsZWN0aW9uKHZpZXcsIHNlbCkge1xuICAgIGlmIChzZWwgaW5zdGFuY2VvZiBOb2RlU2VsZWN0aW9uKSB7XG4gICAgICAgIGxldCBkZXNjID0gdmlldy5kb2NWaWV3LmRlc2NBdChzZWwuZnJvbSk7XG4gICAgICAgIGlmIChkZXNjICE9IHZpZXcubGFzdFNlbGVjdGVkVmlld0Rlc2MpIHtcbiAgICAgICAgICAgIGNsZWFyTm9kZVNlbGVjdGlvbih2aWV3KTtcbiAgICAgICAgICAgIGlmIChkZXNjKVxuICAgICAgICAgICAgICAgIGRlc2Muc2VsZWN0Tm9kZSgpO1xuICAgICAgICAgICAgdmlldy5sYXN0U2VsZWN0ZWRWaWV3RGVzYyA9IGRlc2M7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNsZWFyTm9kZVNlbGVjdGlvbih2aWV3KTtcbiAgICB9XG59XG4vLyBDbGVhciBhbGwgRE9NIHN0YXRlZnVsbmVzcyBvZiB0aGUgbGFzdCBub2RlIHNlbGVjdGlvbi5cbmZ1bmN0aW9uIGNsZWFyTm9kZVNlbGVjdGlvbih2aWV3KSB7XG4gICAgaWYgKHZpZXcubGFzdFNlbGVjdGVkVmlld0Rlc2MpIHtcbiAgICAgICAgaWYgKHZpZXcubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50KVxuICAgICAgICAgICAgdmlldy5sYXN0U2VsZWN0ZWRWaWV3RGVzYy5kZXNlbGVjdE5vZGUoKTtcbiAgICAgICAgdmlldy5sYXN0U2VsZWN0ZWRWaWV3RGVzYyA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG5mdW5jdGlvbiBzZWxlY3Rpb25CZXR3ZWVuKHZpZXcsICRhbmNob3IsICRoZWFkLCBiaWFzKSB7XG4gICAgcmV0dXJuIHZpZXcuc29tZVByb3AoXCJjcmVhdGVTZWxlY3Rpb25CZXR3ZWVuXCIsIGYgPT4gZih2aWV3LCAkYW5jaG9yLCAkaGVhZCkpXG4gICAgICAgIHx8IFRleHRTZWxlY3Rpb24uYmV0d2VlbigkYW5jaG9yLCAkaGVhZCwgYmlhcyk7XG59XG5mdW5jdGlvbiBoYXNGb2N1c0FuZFNlbGVjdGlvbih2aWV3KSB7XG4gICAgaWYgKHZpZXcuZWRpdGFibGUgJiYgIXZpZXcuaGFzRm9jdXMoKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBoYXNTZWxlY3Rpb24odmlldyk7XG59XG5mdW5jdGlvbiBoYXNTZWxlY3Rpb24odmlldykge1xuICAgIGxldCBzZWwgPSB2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgaWYgKCFzZWwuYW5jaG9yTm9kZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEZpcmVmb3ggd2lsbCByYWlzZSAncGVybWlzc2lvbiBkZW5pZWQnIGVycm9ycyB3aGVuIGFjY2Vzc2luZ1xuICAgICAgICAvLyBwcm9wZXJ0aWVzIG9mIGBzZWwuYW5jaG9yTm9kZWAgd2hlbiBpdCdzIGluIGEgZ2VuZXJhdGVkIENTU1xuICAgICAgICAvLyBlbGVtZW50LlxuICAgICAgICByZXR1cm4gdmlldy5kb20uY29udGFpbnMoc2VsLmFuY2hvck5vZGUubm9kZVR5cGUgPT0gMyA/IHNlbC5hbmNob3JOb2RlLnBhcmVudE5vZGUgOiBzZWwuYW5jaG9yTm9kZSkgJiZcbiAgICAgICAgICAgICh2aWV3LmVkaXRhYmxlIHx8IHZpZXcuZG9tLmNvbnRhaW5zKHNlbC5mb2N1c05vZGUubm9kZVR5cGUgPT0gMyA/IHNlbC5mb2N1c05vZGUucGFyZW50Tm9kZSA6IHNlbC5mb2N1c05vZGUpKTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFuY2hvckluUmlnaHRQbGFjZSh2aWV3KSB7XG4gICAgbGV0IGFuY2hvckRPTSA9IHZpZXcuZG9jVmlldy5kb21Gcm9tUG9zKHZpZXcuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciwgMCk7XG4gICAgbGV0IGRvbVNlbCA9IHZpZXcuZG9tU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICByZXR1cm4gaXNFcXVpdmFsZW50UG9zaXRpb24oYW5jaG9yRE9NLm5vZGUsIGFuY2hvckRPTS5vZmZzZXQsIGRvbVNlbC5hbmNob3JOb2RlLCBkb21TZWwuYW5jaG9yT2Zmc2V0KTtcbn1cblxuZnVuY3Rpb24gbW92ZVNlbGVjdGlvbkJsb2NrKHN0YXRlLCBkaXIpIHtcbiAgICBsZXQgeyAkYW5jaG9yLCAkaGVhZCB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGxldCAkc2lkZSA9IGRpciA+IDAgPyAkYW5jaG9yLm1heCgkaGVhZCkgOiAkYW5jaG9yLm1pbigkaGVhZCk7XG4gICAgbGV0ICRzdGFydCA9ICEkc2lkZS5wYXJlbnQuaW5saW5lQ29udGVudCA/ICRzaWRlIDogJHNpZGUuZGVwdGggPyBzdGF0ZS5kb2MucmVzb2x2ZShkaXIgPiAwID8gJHNpZGUuYWZ0ZXIoKSA6ICRzaWRlLmJlZm9yZSgpKSA6IG51bGw7XG4gICAgcmV0dXJuICRzdGFydCAmJiBTZWxlY3Rpb24uZmluZEZyb20oJHN0YXJ0LCBkaXIpO1xufVxuZnVuY3Rpb24gYXBwbHkodmlldywgc2VsKSB7XG4gICAgdmlldy5kaXNwYXRjaCh2aWV3LnN0YXRlLnRyLnNldFNlbGVjdGlvbihzZWwpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gc2VsZWN0SG9yaXpvbnRhbGx5KHZpZXcsIGRpciwgbW9kcykge1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoc2VsIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbikge1xuICAgICAgICBpZiAoIXNlbC5lbXB0eSB8fCBtb2RzLmluZGV4T2YoXCJzXCIpID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2aWV3LmVuZE9mVGV4dGJsb2NrKGRpciA+IDAgPyBcImZvcndhcmRcIiA6IFwiYmFja3dhcmRcIikpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gbW92ZVNlbGVjdGlvbkJsb2NrKHZpZXcuc3RhdGUsIGRpcik7XG4gICAgICAgICAgICBpZiAobmV4dCAmJiAobmV4dCBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24pKVxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseSh2aWV3LCBuZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghKG1hYyAmJiBtb2RzLmluZGV4T2YoXCJtXCIpID4gLTEpKSB7XG4gICAgICAgICAgICBsZXQgJGhlYWQgPSBzZWwuJGhlYWQsIG5vZGUgPSAkaGVhZC50ZXh0T2Zmc2V0ID8gbnVsbCA6IGRpciA8IDAgPyAkaGVhZC5ub2RlQmVmb3JlIDogJGhlYWQubm9kZUFmdGVyLCBkZXNjO1xuICAgICAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUuaXNUZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCBub2RlUG9zID0gZGlyIDwgMCA/ICRoZWFkLnBvcyAtIG5vZGUubm9kZVNpemUgOiAkaGVhZC5wb3M7XG4gICAgICAgICAgICBpZiAoIShub2RlLmlzQXRvbSB8fCAoZGVzYyA9IHZpZXcuZG9jVmlldy5kZXNjQXQobm9kZVBvcykpICYmICFkZXNjLmNvbnRlbnRET00pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShub2RlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhcHBseSh2aWV3LCBuZXcgTm9kZVNlbGVjdGlvbihkaXIgPCAwID8gdmlldy5zdGF0ZS5kb2MucmVzb2x2ZSgkaGVhZC5wb3MgLSBub2RlLm5vZGVTaXplKSA6ICRoZWFkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh3ZWJraXQpIHtcbiAgICAgICAgICAgICAgICAvLyBDaHJvbWUgYW5kIFNhZmFyaSB3aWxsIGludHJvZHVjZSBleHRyYSBwb2ludGxlc3MgY3Vyc29yXG4gICAgICAgICAgICAgICAgLy8gcG9zaXRpb25zIGFyb3VuZCBpbmxpbmUgdW5lZGl0YWJsZSBub2Rlcywgc28gd2UgaGF2ZSB0b1xuICAgICAgICAgICAgICAgIC8vIHRha2Ugb3ZlciBhbmQgbW92ZSB0aGUgY3Vyc29yIHBhc3QgdGhlbSAoIzkzNylcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbHkodmlldywgbmV3IFRleHRTZWxlY3Rpb24odmlldy5zdGF0ZS5kb2MucmVzb2x2ZShkaXIgPCAwID8gbm9kZVBvcyA6IG5vZGVQb3MgKyBub2RlLm5vZGVTaXplKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHNlbCBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24gJiYgc2VsLm5vZGUuaXNJbmxpbmUpIHtcbiAgICAgICAgcmV0dXJuIGFwcGx5KHZpZXcsIG5ldyBUZXh0U2VsZWN0aW9uKGRpciA+IDAgPyBzZWwuJHRvIDogc2VsLiRmcm9tKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbmV4dCA9IG1vdmVTZWxlY3Rpb25CbG9jayh2aWV3LnN0YXRlLCBkaXIpO1xuICAgICAgICBpZiAobmV4dClcbiAgICAgICAgICAgIHJldHVybiBhcHBseSh2aWV3LCBuZXh0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vZGVMZW4obm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09IDMgPyBub2RlLm5vZGVWYWx1ZS5sZW5ndGggOiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoO1xufVxuZnVuY3Rpb24gaXNJZ25vcmFibGUoZG9tKSB7XG4gICAgbGV0IGRlc2MgPSBkb20ucG1WaWV3RGVzYztcbiAgICByZXR1cm4gZGVzYyAmJiBkZXNjLnNpemUgPT0gMCAmJiAoZG9tLm5leHRTaWJsaW5nIHx8IGRvbS5ub2RlTmFtZSAhPSBcIkJSXCIpO1xufVxuZnVuY3Rpb24gc2tpcElnbm9yZWROb2Rlcyh2aWV3LCBkaXIpIHtcbiAgICByZXR1cm4gZGlyIDwgMCA/IHNraXBJZ25vcmVkTm9kZXNCZWZvcmUodmlldykgOiBza2lwSWdub3JlZE5vZGVzQWZ0ZXIodmlldyk7XG59XG4vLyBNYWtlIHN1cmUgdGhlIGN1cnNvciBpc24ndCBkaXJlY3RseSBhZnRlciBvbmUgb3IgbW9yZSBpZ25vcmVkXG4vLyBub2Rlcywgd2hpY2ggd2lsbCBjb25mdXNlIHRoZSBicm93c2VyJ3MgY3Vyc29yIG1vdGlvbiBsb2dpYy5cbmZ1bmN0aW9uIHNraXBJZ25vcmVkTm9kZXNCZWZvcmUodmlldykge1xuICAgIGxldCBzZWwgPSB2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgbGV0IG5vZGUgPSBzZWwuZm9jdXNOb2RlLCBvZmZzZXQgPSBzZWwuZm9jdXNPZmZzZXQ7XG4gICAgaWYgKCFub2RlKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IG1vdmVOb2RlLCBtb3ZlT2Zmc2V0LCBmb3JjZSA9IGZhbHNlO1xuICAgIC8vIEdlY2tvIHdpbGwgZG8gb2RkIHRoaW5ncyB3aGVuIHRoZSBzZWxlY3Rpb24gaXMgZGlyZWN0bHkgaW4gZnJvbnRcbiAgICAvLyBvZiBhIG5vbi1lZGl0YWJsZSBub2RlLCBzbyBpbiB0aGF0IGNhc2UsIG1vdmUgaXQgaW50byB0aGUgbmV4dFxuICAgIC8vIG5vZGUgaWYgcG9zc2libGUuIElzc3VlIHByb3NlbWlycm9yL3Byb3NlbWlycm9yIzgzMi5cbiAgICBpZiAoZ2Vja28gJiYgbm9kZS5ub2RlVHlwZSA9PSAxICYmIG9mZnNldCA8IG5vZGVMZW4obm9kZSkgJiYgaXNJZ25vcmFibGUobm9kZS5jaGlsZE5vZGVzW29mZnNldF0pKVxuICAgICAgICBmb3JjZSA9IHRydWU7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAob2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgIT0gMSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGJlZm9yZSA9IG5vZGUuY2hpbGROb2Rlc1tvZmZzZXQgLSAxXTtcbiAgICAgICAgICAgICAgICBpZiAoaXNJZ25vcmFibGUoYmVmb3JlKSkge1xuICAgICAgICAgICAgICAgICAgICBtb3ZlTm9kZSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgIG1vdmVPZmZzZXQgPSAtLW9mZnNldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYmVmb3JlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gbm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzQmxvY2tOb2RlKG5vZGUpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwcmV2ID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICB3aGlsZSAocHJldiAmJiBpc0lnbm9yYWJsZShwcmV2KSkge1xuICAgICAgICAgICAgICAgIG1vdmVOb2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIG1vdmVPZmZzZXQgPSBkb21JbmRleChwcmV2KTtcbiAgICAgICAgICAgICAgICBwcmV2ID0gcHJldi5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGlmIChub2RlID09IHZpZXcuZG9tKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHByZXY7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gbm9kZUxlbihub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2UpXG4gICAgICAgIHNldFNlbEZvY3VzKHZpZXcsIG5vZGUsIG9mZnNldCk7XG4gICAgZWxzZSBpZiAobW92ZU5vZGUpXG4gICAgICAgIHNldFNlbEZvY3VzKHZpZXcsIG1vdmVOb2RlLCBtb3ZlT2Zmc2V0KTtcbn1cbi8vIE1ha2Ugc3VyZSB0aGUgY3Vyc29yIGlzbid0IGRpcmVjdGx5IGJlZm9yZSBvbmUgb3IgbW9yZSBpZ25vcmVkXG4vLyBub2Rlcy5cbmZ1bmN0aW9uIHNraXBJZ25vcmVkTm9kZXNBZnRlcih2aWV3KSB7XG4gICAgbGV0IHNlbCA9IHZpZXcuZG9tU2VsZWN0aW9uUmFuZ2UoKTtcbiAgICBsZXQgbm9kZSA9IHNlbC5mb2N1c05vZGUsIG9mZnNldCA9IHNlbC5mb2N1c09mZnNldDtcbiAgICBpZiAoIW5vZGUpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgbGVuID0gbm9kZUxlbihub2RlKTtcbiAgICBsZXQgbW92ZU5vZGUsIG1vdmVPZmZzZXQ7XG4gICAgZm9yICg7Oykge1xuICAgICAgICBpZiAob2Zmc2V0IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPSAxKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IGFmdGVyID0gbm9kZS5jaGlsZE5vZGVzW29mZnNldF07XG4gICAgICAgICAgICBpZiAoaXNJZ25vcmFibGUoYWZ0ZXIpKSB7XG4gICAgICAgICAgICAgICAgbW92ZU5vZGUgPSBub2RlO1xuICAgICAgICAgICAgICAgIG1vdmVPZmZzZXQgPSArK29mZnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0Jsb2NrTm9kZShub2RlKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB3aGlsZSAobmV4dCAmJiBpc0lnbm9yYWJsZShuZXh0KSkge1xuICAgICAgICAgICAgICAgIG1vdmVOb2RlID0gbmV4dC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIG1vdmVPZmZzZXQgPSBkb21JbmRleChuZXh0KSArIDE7XG4gICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5leHQpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIGlmIChub2RlID09IHZpZXcuZG9tKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBsZW4gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICBsZW4gPSBub2RlTGVuKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChtb3ZlTm9kZSlcbiAgICAgICAgc2V0U2VsRm9jdXModmlldywgbW92ZU5vZGUsIG1vdmVPZmZzZXQpO1xufVxuZnVuY3Rpb24gaXNCbG9ja05vZGUoZG9tKSB7XG4gICAgbGV0IGRlc2MgPSBkb20ucG1WaWV3RGVzYztcbiAgICByZXR1cm4gZGVzYyAmJiBkZXNjLm5vZGUgJiYgZGVzYy5ub2RlLmlzQmxvY2s7XG59XG5mdW5jdGlvbiBzZXRTZWxGb2N1cyh2aWV3LCBub2RlLCBvZmZzZXQpIHtcbiAgICBsZXQgc2VsID0gdmlldy5kb21TZWxlY3Rpb24oKTtcbiAgICBpZiAoc2VsZWN0aW9uQ29sbGFwc2VkKHNlbCkpIHtcbiAgICAgICAgbGV0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgcmFuZ2Uuc2V0RW5kKG5vZGUsIG9mZnNldCk7XG4gICAgICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7XG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2VsLmV4dGVuZCkge1xuICAgICAgICBzZWwuZXh0ZW5kKG5vZGUsIG9mZnNldCk7XG4gICAgfVxuICAgIHZpZXcuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCk7XG4gICAgbGV0IHsgc3RhdGUgfSA9IHZpZXc7XG4gICAgLy8gSWYgbm8gc3RhdGUgdXBkYXRlIGVuZHMgdXAgaGFwcGVuaW5nLCByZXNldCB0aGUgc2VsZWN0aW9uLlxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodmlldy5zdGF0ZSA9PSBzdGF0ZSlcbiAgICAgICAgICAgIHNlbGVjdGlvblRvRE9NKHZpZXcpO1xuICAgIH0sIDUwKTtcbn1cbmZ1bmN0aW9uIGZpbmREaXJlY3Rpb24odmlldywgcG9zKSB7XG4gICAgbGV0ICRwb3MgPSB2aWV3LnN0YXRlLmRvYy5yZXNvbHZlKHBvcyk7XG4gICAgaWYgKCEoY2hyb21lIHx8IHdpbmRvd3MpICYmICRwb3MucGFyZW50LmlubGluZUNvbnRlbnQpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IHZpZXcuY29vcmRzQXRQb3MocG9zKTtcbiAgICAgICAgaWYgKHBvcyA+ICRwb3Muc3RhcnQoKSkge1xuICAgICAgICAgICAgbGV0IGJlZm9yZSA9IHZpZXcuY29vcmRzQXRQb3MocG9zIC0gMSk7XG4gICAgICAgICAgICBsZXQgbWlkID0gKGJlZm9yZS50b3AgKyBiZWZvcmUuYm90dG9tKSAvIDI7XG4gICAgICAgICAgICBpZiAobWlkID4gY29vcmRzLnRvcCAmJiBtaWQgPCBjb29yZHMuYm90dG9tICYmIE1hdGguYWJzKGJlZm9yZS5sZWZ0IC0gY29vcmRzLmxlZnQpID4gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYmVmb3JlLmxlZnQgPCBjb29yZHMubGVmdCA/IFwibHRyXCIgOiBcInJ0bFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3MgPCAkcG9zLmVuZCgpKSB7XG4gICAgICAgICAgICBsZXQgYWZ0ZXIgPSB2aWV3LmNvb3Jkc0F0UG9zKHBvcyArIDEpO1xuICAgICAgICAgICAgbGV0IG1pZCA9IChhZnRlci50b3AgKyBhZnRlci5ib3R0b20pIC8gMjtcbiAgICAgICAgICAgIGlmIChtaWQgPiBjb29yZHMudG9wICYmIG1pZCA8IGNvb3Jkcy5ib3R0b20gJiYgTWF0aC5hYnMoYWZ0ZXIubGVmdCAtIGNvb3Jkcy5sZWZ0KSA+IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFmdGVyLmxlZnQgPiBjb29yZHMubGVmdCA/IFwibHRyXCIgOiBcInJ0bFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjb21wdXRlZCA9IGdldENvbXB1dGVkU3R5bGUodmlldy5kb20pLmRpcmVjdGlvbjtcbiAgICByZXR1cm4gY29tcHV0ZWQgPT0gXCJydGxcIiA/IFwicnRsXCIgOiBcImx0clwiO1xufVxuLy8gQ2hlY2sgd2hldGhlciB2ZXJ0aWNhbCBzZWxlY3Rpb24gbW90aW9uIHdvdWxkIGludm9sdmUgbm9kZVxuLy8gc2VsZWN0aW9ucy4gSWYgc28sIGFwcGx5IGl0IChpZiBub3QsIHRoZSByZXN1bHQgaXMgbGVmdCB0byB0aGVcbi8vIGJyb3dzZXIpXG5mdW5jdGlvbiBzZWxlY3RWZXJ0aWNhbGx5KHZpZXcsIGRpciwgbW9kcykge1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoc2VsIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbiAmJiAhc2VsLmVtcHR5IHx8IG1vZHMuaW5kZXhPZihcInNcIikgPiAtMSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChtYWMgJiYgbW9kcy5pbmRleE9mKFwibVwiKSA+IC0xKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHsgJGZyb20sICR0byB9ID0gc2VsO1xuICAgIGlmICghJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnQgfHwgdmlldy5lbmRPZlRleHRibG9jayhkaXIgPCAwID8gXCJ1cFwiIDogXCJkb3duXCIpKSB7XG4gICAgICAgIGxldCBuZXh0ID0gbW92ZVNlbGVjdGlvbkJsb2NrKHZpZXcuc3RhdGUsIGRpcik7XG4gICAgICAgIGlmIChuZXh0ICYmIChuZXh0IGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbikpXG4gICAgICAgICAgICByZXR1cm4gYXBwbHkodmlldywgbmV4dCk7XG4gICAgfVxuICAgIGlmICghJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnQpIHtcbiAgICAgICAgbGV0IHNpZGUgPSBkaXIgPCAwID8gJGZyb20gOiAkdG87XG4gICAgICAgIGxldCBiZXlvbmQgPSBzZWwgaW5zdGFuY2VvZiBBbGxTZWxlY3Rpb24gPyBTZWxlY3Rpb24ubmVhcihzaWRlLCBkaXIpIDogU2VsZWN0aW9uLmZpbmRGcm9tKHNpZGUsIGRpcik7XG4gICAgICAgIHJldHVybiBiZXlvbmQgPyBhcHBseSh2aWV3LCBiZXlvbmQpIDogZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHN0b3BOYXRpdmVIb3Jpem9udGFsRGVsZXRlKHZpZXcsIGRpcikge1xuICAgIGlmICghKHZpZXcuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbikpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCB7ICRoZWFkLCAkYW5jaG9yLCBlbXB0eSB9ID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKCEkaGVhZC5zYW1lUGFyZW50KCRhbmNob3IpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIWVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHZpZXcuZW5kT2ZUZXh0YmxvY2soZGlyID4gMCA/IFwiZm9yd2FyZFwiIDogXCJiYWNrd2FyZFwiKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgbGV0IG5leHROb2RlID0gISRoZWFkLnRleHRPZmZzZXQgJiYgKGRpciA8IDAgPyAkaGVhZC5ub2RlQmVmb3JlIDogJGhlYWQubm9kZUFmdGVyKTtcbiAgICBpZiAobmV4dE5vZGUgJiYgIW5leHROb2RlLmlzVGV4dCkge1xuICAgICAgICBsZXQgdHIgPSB2aWV3LnN0YXRlLnRyO1xuICAgICAgICBpZiAoZGlyIDwgMClcbiAgICAgICAgICAgIHRyLmRlbGV0ZSgkaGVhZC5wb3MgLSBuZXh0Tm9kZS5ub2RlU2l6ZSwgJGhlYWQucG9zKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdHIuZGVsZXRlKCRoZWFkLnBvcywgJGhlYWQucG9zICsgbmV4dE5vZGUubm9kZVNpemUpO1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHRyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHN3aXRjaEVkaXRhYmxlKHZpZXcsIG5vZGUsIHN0YXRlKSB7XG4gICAgdmlldy5kb21PYnNlcnZlci5zdG9wKCk7XG4gICAgbm9kZS5jb250ZW50RWRpdGFibGUgPSBzdGF0ZTtcbiAgICB2aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCk7XG59XG4vLyBJc3N1ZSAjODY3IC8gIzEwOTAgLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD05MDM4MjFcbi8vIEluIHdoaWNoIFNhZmFyaSAoYW5kIGF0IHNvbWUgcG9pbnQgaW4gdGhlIHBhc3QsIENocm9tZSkgZG9lcyByZWFsbHlcbi8vIHdyb25nIHRoaW5ncyB3aGVuIHRoZSBkb3duIGFycm93IGlzIHByZXNzZWQgd2hlbiB0aGUgY3Vyc29yIGlzXG4vLyBkaXJlY3RseSBhdCB0aGUgc3RhcnQgb2YgYSB0ZXh0YmxvY2sgYW5kIGhhcyBhbiB1bmVkaXRhYmxlIG5vZGVcbi8vIGFmdGVyIGl0XG5mdW5jdGlvbiBzYWZhcmlEb3duQXJyb3dCdWcodmlldykge1xuICAgIGlmICghc2FmYXJpIHx8IHZpZXcuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldCA+IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgeyBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0IH0gPSB2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgaWYgKGZvY3VzTm9kZSAmJiBmb2N1c05vZGUubm9kZVR5cGUgPT0gMSAmJiBmb2N1c09mZnNldCA9PSAwICYmXG4gICAgICAgIGZvY3VzTm9kZS5maXJzdENoaWxkICYmIGZvY3VzTm9kZS5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSA9PSBcImZhbHNlXCIpIHtcbiAgICAgICAgbGV0IGNoaWxkID0gZm9jdXNOb2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHN3aXRjaEVkaXRhYmxlKHZpZXcsIGNoaWxkLCBcInRydWVcIik7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc3dpdGNoRWRpdGFibGUodmlldywgY2hpbGQsIFwiZmFsc2VcIiksIDIwKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8gQSBiYWNrZHJvcCBrZXkgbWFwcGluZyB1c2VkIHRvIG1ha2Ugc3VyZSB3ZSBhbHdheXMgc3VwcHJlc3Mga2V5c1xuLy8gdGhhdCBoYXZlIGEgZGFuZ2Vyb3VzIGRlZmF1bHQgZWZmZWN0LCBldmVuIGlmIHRoZSBjb21tYW5kcyB0aGV5IGFyZVxuLy8gYm91bmQgdG8gcmV0dXJuIGZhbHNlLCBhbmQgdG8gbWFrZSBzdXJlIHRoYXQgY3Vyc29yLW1vdGlvbiBrZXlzXG4vLyBmaW5kIGEgY3Vyc29yIChhcyBvcHBvc2VkIHRvIGEgbm9kZSBzZWxlY3Rpb24pIHdoZW4gcHJlc3NlZC4gRm9yXG4vLyBjdXJzb3ItbW90aW9uIGtleXMsIHRoZSBjb2RlIGluIHRoZSBoYW5kbGVycyBhbHNvIHRha2VzIGNhcmUgb2Zcbi8vIGJsb2NrIHNlbGVjdGlvbnMuXG5mdW5jdGlvbiBnZXRNb2RzKGV2ZW50KSB7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgaWYgKGV2ZW50LmN0cmxLZXkpXG4gICAgICAgIHJlc3VsdCArPSBcImNcIjtcbiAgICBpZiAoZXZlbnQubWV0YUtleSlcbiAgICAgICAgcmVzdWx0ICs9IFwibVwiO1xuICAgIGlmIChldmVudC5hbHRLZXkpXG4gICAgICAgIHJlc3VsdCArPSBcImFcIjtcbiAgICBpZiAoZXZlbnQuc2hpZnRLZXkpXG4gICAgICAgIHJlc3VsdCArPSBcInNcIjtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY2FwdHVyZUtleURvd24odmlldywgZXZlbnQpIHtcbiAgICBsZXQgY29kZSA9IGV2ZW50LmtleUNvZGUsIG1vZHMgPSBnZXRNb2RzKGV2ZW50KTtcbiAgICBpZiAoY29kZSA9PSA4IHx8IChtYWMgJiYgY29kZSA9PSA3MiAmJiBtb2RzID09IFwiY1wiKSkgeyAvLyBCYWNrc3BhY2UsIEN0cmwtaCBvbiBNYWNcbiAgICAgICAgcmV0dXJuIHN0b3BOYXRpdmVIb3Jpem9udGFsRGVsZXRlKHZpZXcsIC0xKSB8fCBza2lwSWdub3JlZE5vZGVzKHZpZXcsIC0xKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKGNvZGUgPT0gNDYgJiYgIWV2ZW50LnNoaWZ0S2V5KSB8fCAobWFjICYmIGNvZGUgPT0gNjggJiYgbW9kcyA9PSBcImNcIikpIHsgLy8gRGVsZXRlLCBDdHJsLWQgb24gTWFjXG4gICAgICAgIHJldHVybiBzdG9wTmF0aXZlSG9yaXpvbnRhbERlbGV0ZSh2aWV3LCAxKSB8fCBza2lwSWdub3JlZE5vZGVzKHZpZXcsIDEpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID09IDEzIHx8IGNvZGUgPT0gMjcpIHsgLy8gRW50ZXIsIEVzY1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA9PSAzNyB8fCAobWFjICYmIGNvZGUgPT0gNjYgJiYgbW9kcyA9PSBcImNcIikpIHsgLy8gTGVmdCBhcnJvdywgQ3RybC1iIG9uIE1hY1xuICAgICAgICBsZXQgZGlyID0gY29kZSA9PSAzNyA/IChmaW5kRGlyZWN0aW9uKHZpZXcsIHZpZXcuc3RhdGUuc2VsZWN0aW9uLmZyb20pID09IFwibHRyXCIgPyAtMSA6IDEpIDogLTE7XG4gICAgICAgIHJldHVybiBzZWxlY3RIb3Jpem9udGFsbHkodmlldywgZGlyLCBtb2RzKSB8fCBza2lwSWdub3JlZE5vZGVzKHZpZXcsIGRpcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPT0gMzkgfHwgKG1hYyAmJiBjb2RlID09IDcwICYmIG1vZHMgPT0gXCJjXCIpKSB7IC8vIFJpZ2h0IGFycm93LCBDdHJsLWYgb24gTWFjXG4gICAgICAgIGxldCBkaXIgPSBjb2RlID09IDM5ID8gKGZpbmREaXJlY3Rpb24odmlldywgdmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSkgPT0gXCJsdHJcIiA/IDEgOiAtMSkgOiAxO1xuICAgICAgICByZXR1cm4gc2VsZWN0SG9yaXpvbnRhbGx5KHZpZXcsIGRpciwgbW9kcykgfHwgc2tpcElnbm9yZWROb2Rlcyh2aWV3LCBkaXIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID09IDM4IHx8IChtYWMgJiYgY29kZSA9PSA4MCAmJiBtb2RzID09IFwiY1wiKSkgeyAvLyBVcCBhcnJvdywgQ3RybC1wIG9uIE1hY1xuICAgICAgICByZXR1cm4gc2VsZWN0VmVydGljYWxseSh2aWV3LCAtMSwgbW9kcykgfHwgc2tpcElnbm9yZWROb2Rlcyh2aWV3LCAtMSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPT0gNDAgfHwgKG1hYyAmJiBjb2RlID09IDc4ICYmIG1vZHMgPT0gXCJjXCIpKSB7IC8vIERvd24gYXJyb3csIEN0cmwtbiBvbiBNYWNcbiAgICAgICAgcmV0dXJuIHNhZmFyaURvd25BcnJvd0J1Zyh2aWV3KSB8fCBzZWxlY3RWZXJ0aWNhbGx5KHZpZXcsIDEsIG1vZHMpIHx8IHNraXBJZ25vcmVkTm9kZXNBZnRlcih2aWV3KTtcbiAgICB9XG4gICAgZWxzZSBpZiAobW9kcyA9PSAobWFjID8gXCJtXCIgOiBcImNcIikgJiZcbiAgICAgICAgKGNvZGUgPT0gNjYgfHwgY29kZSA9PSA3MyB8fCBjb2RlID09IDg5IHx8IGNvZGUgPT0gOTApKSB7IC8vIE1vZC1bYml5el1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplRm9yQ2xpcGJvYXJkKHZpZXcsIHNsaWNlKSB7XG4gICAgdmlldy5zb21lUHJvcChcInRyYW5zZm9ybUNvcGllZFwiLCBmID0+IHsgc2xpY2UgPSBmKHNsaWNlLCB2aWV3KTsgfSk7XG4gICAgbGV0IGNvbnRleHQgPSBbXSwgeyBjb250ZW50LCBvcGVuU3RhcnQsIG9wZW5FbmQgfSA9IHNsaWNlO1xuICAgIHdoaWxlIChvcGVuU3RhcnQgPiAxICYmIG9wZW5FbmQgPiAxICYmIGNvbnRlbnQuY2hpbGRDb3VudCA9PSAxICYmIGNvbnRlbnQuZmlyc3RDaGlsZC5jaGlsZENvdW50ID09IDEpIHtcbiAgICAgICAgb3BlblN0YXJ0LS07XG4gICAgICAgIG9wZW5FbmQtLTtcbiAgICAgICAgbGV0IG5vZGUgPSBjb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIGNvbnRleHQucHVzaChub2RlLnR5cGUubmFtZSwgbm9kZS5hdHRycyAhPSBub2RlLnR5cGUuZGVmYXVsdEF0dHJzID8gbm9kZS5hdHRycyA6IG51bGwpO1xuICAgICAgICBjb250ZW50ID0gbm9kZS5jb250ZW50O1xuICAgIH1cbiAgICBsZXQgc2VyaWFsaXplciA9IHZpZXcuc29tZVByb3AoXCJjbGlwYm9hcmRTZXJpYWxpemVyXCIpIHx8IERPTVNlcmlhbGl6ZXIuZnJvbVNjaGVtYSh2aWV3LnN0YXRlLnNjaGVtYSk7XG4gICAgbGV0IGRvYyA9IGRldGFjaGVkRG9jKCksIHdyYXAgPSBkb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB3cmFwLmFwcGVuZENoaWxkKHNlcmlhbGl6ZXIuc2VyaWFsaXplRnJhZ21lbnQoY29udGVudCwgeyBkb2N1bWVudDogZG9jIH0pKTtcbiAgICBsZXQgZmlyc3RDaGlsZCA9IHdyYXAuZmlyc3RDaGlsZCwgbmVlZHNXcmFwLCB3cmFwcGVycyA9IDA7XG4gICAgd2hpbGUgKGZpcnN0Q2hpbGQgJiYgZmlyc3RDaGlsZC5ub2RlVHlwZSA9PSAxICYmIChuZWVkc1dyYXAgPSB3cmFwTWFwW2ZpcnN0Q2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBuZWVkc1dyYXAubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCB3cmFwcGVyID0gZG9jLmNyZWF0ZUVsZW1lbnQobmVlZHNXcmFwW2ldKTtcbiAgICAgICAgICAgIHdoaWxlICh3cmFwLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZCh3cmFwLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgd3JhcC5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgIHdyYXBwZXJzKys7XG4gICAgICAgIH1cbiAgICAgICAgZmlyc3RDaGlsZCA9IHdyYXAuZmlyc3RDaGlsZDtcbiAgICB9XG4gICAgaWYgKGZpcnN0Q2hpbGQgJiYgZmlyc3RDaGlsZC5ub2RlVHlwZSA9PSAxKVxuICAgICAgICBmaXJzdENoaWxkLnNldEF0dHJpYnV0ZShcImRhdGEtcG0tc2xpY2VcIiwgYCR7b3BlblN0YXJ0fSAke29wZW5FbmR9JHt3cmFwcGVycyA/IGAgLSR7d3JhcHBlcnN9YCA6IFwiXCJ9ICR7SlNPTi5zdHJpbmdpZnkoY29udGV4dCl9YCk7XG4gICAgbGV0IHRleHQgPSB2aWV3LnNvbWVQcm9wKFwiY2xpcGJvYXJkVGV4dFNlcmlhbGl6ZXJcIiwgZiA9PiBmKHNsaWNlLCB2aWV3KSkgfHxcbiAgICAgICAgc2xpY2UuY29udGVudC50ZXh0QmV0d2VlbigwLCBzbGljZS5jb250ZW50LnNpemUsIFwiXFxuXFxuXCIpO1xuICAgIHJldHVybiB7IGRvbTogd3JhcCwgdGV4dCB9O1xufVxuLy8gUmVhZCBhIHNsaWNlIG9mIGNvbnRlbnQgZnJvbSB0aGUgY2xpcGJvYXJkIChvciBkcm9wIGRhdGEpLlxuZnVuY3Rpb24gcGFyc2VGcm9tQ2xpcGJvYXJkKHZpZXcsIHRleHQsIGh0bWwsIHBsYWluVGV4dCwgJGNvbnRleHQpIHtcbiAgICBsZXQgaW5Db2RlID0gJGNvbnRleHQucGFyZW50LnR5cGUuc3BlYy5jb2RlO1xuICAgIGxldCBkb20sIHNsaWNlO1xuICAgIGlmICghaHRtbCAmJiAhdGV4dClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGFzVGV4dCA9IHRleHQgJiYgKHBsYWluVGV4dCB8fCBpbkNvZGUgfHwgIWh0bWwpO1xuICAgIGlmIChhc1RleHQpIHtcbiAgICAgICAgdmlldy5zb21lUHJvcChcInRyYW5zZm9ybVBhc3RlZFRleHRcIiwgZiA9PiB7IHRleHQgPSBmKHRleHQsIGluQ29kZSB8fCBwbGFpblRleHQsIHZpZXcpOyB9KTtcbiAgICAgICAgaWYgKGluQ29kZSlcbiAgICAgICAgICAgIHJldHVybiB0ZXh0ID8gbmV3IFNsaWNlKEZyYWdtZW50LmZyb20odmlldy5zdGF0ZS5zY2hlbWEudGV4dCh0ZXh0LnJlcGxhY2UoL1xcclxcbj8vZywgXCJcXG5cIikpKSwgMCwgMCkgOiBTbGljZS5lbXB0eTtcbiAgICAgICAgbGV0IHBhcnNlZCA9IHZpZXcuc29tZVByb3AoXCJjbGlwYm9hcmRUZXh0UGFyc2VyXCIsIGYgPT4gZih0ZXh0LCAkY29udGV4dCwgcGxhaW5UZXh0LCB2aWV3KSk7XG4gICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICAgIHNsaWNlID0gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1hcmtzID0gJGNvbnRleHQubWFya3MoKTtcbiAgICAgICAgICAgIGxldCB7IHNjaGVtYSB9ID0gdmlldy5zdGF0ZSwgc2VyaWFsaXplciA9IERPTVNlcmlhbGl6ZXIuZnJvbVNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRleHQuc3BsaXQoLyg/Olxcclxcbj98XFxuKSsvKS5mb3JFYWNoKGJsb2NrID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcCA9IGRvbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrKVxuICAgICAgICAgICAgICAgICAgICBwLmFwcGVuZENoaWxkKHNlcmlhbGl6ZXIuc2VyaWFsaXplTm9kZShzY2hlbWEudGV4dChibG9jaywgbWFya3MpKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5zb21lUHJvcChcInRyYW5zZm9ybVBhc3RlZEhUTUxcIiwgZiA9PiB7IGh0bWwgPSBmKGh0bWwsIHZpZXcpOyB9KTtcbiAgICAgICAgZG9tID0gcmVhZEhUTUwoaHRtbCk7XG4gICAgICAgIGlmICh3ZWJraXQpXG4gICAgICAgICAgICByZXN0b3JlUmVwbGFjZWRTcGFjZXMoZG9tKTtcbiAgICB9XG4gICAgbGV0IGNvbnRleHROb2RlID0gZG9tICYmIGRvbS5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtcG0tc2xpY2VdXCIpO1xuICAgIGxldCBzbGljZURhdGEgPSBjb250ZXh0Tm9kZSAmJiAvXihcXGQrKSAoXFxkKykoPzogLShcXGQrKSk/ICguKikvLmV4ZWMoY29udGV4dE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1wbS1zbGljZVwiKSB8fCBcIlwiKTtcbiAgICBpZiAoc2xpY2VEYXRhICYmIHNsaWNlRGF0YVszXSlcbiAgICAgICAgZm9yIChsZXQgaSA9ICtzbGljZURhdGFbM107IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGRvbS5maXJzdENoaWxkO1xuICAgICAgICAgICAgd2hpbGUgKGNoaWxkICYmIGNoaWxkLm5vZGVUeXBlICE9IDEpXG4gICAgICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmICghY2hpbGQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkb20gPSBjaGlsZDtcbiAgICAgICAgfVxuICAgIGlmICghc2xpY2UpIHtcbiAgICAgICAgbGV0IHBhcnNlciA9IHZpZXcuc29tZVByb3AoXCJjbGlwYm9hcmRQYXJzZXJcIikgfHwgdmlldy5zb21lUHJvcChcImRvbVBhcnNlclwiKSB8fCBET01QYXJzZXIuZnJvbVNjaGVtYSh2aWV3LnN0YXRlLnNjaGVtYSk7XG4gICAgICAgIHNsaWNlID0gcGFyc2VyLnBhcnNlU2xpY2UoZG9tLCB7XG4gICAgICAgICAgICBwcmVzZXJ2ZVdoaXRlc3BhY2U6ICEhKGFzVGV4dCB8fCBzbGljZURhdGEpLFxuICAgICAgICAgICAgY29udGV4dDogJGNvbnRleHQsXG4gICAgICAgICAgICBydWxlRnJvbU5vZGUoZG9tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvbS5ub2RlTmFtZSA9PSBcIkJSXCIgJiYgIWRvbS5uZXh0U2libGluZyAmJlxuICAgICAgICAgICAgICAgICAgICBkb20ucGFyZW50Tm9kZSAmJiAhaW5saW5lUGFyZW50cy50ZXN0KGRvbS5wYXJlbnROb2RlLm5vZGVOYW1lKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaWdub3JlOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoc2xpY2VEYXRhKSB7XG4gICAgICAgIHNsaWNlID0gYWRkQ29udGV4dChjbG9zZVNsaWNlKHNsaWNlLCArc2xpY2VEYXRhWzFdLCArc2xpY2VEYXRhWzJdKSwgc2xpY2VEYXRhWzRdKTtcbiAgICB9XG4gICAgZWxzZSB7IC8vIEhUTUwgd2Fzbid0IGNyZWF0ZWQgYnkgUHJvc2VNaXJyb3IuIE1ha2Ugc3VyZSB0b3AtbGV2ZWwgc2libGluZ3MgYXJlIGNvaGVyZW50XG4gICAgICAgIHNsaWNlID0gU2xpY2UubWF4T3Blbihub3JtYWxpemVTaWJsaW5ncyhzbGljZS5jb250ZW50LCAkY29udGV4dCksIHRydWUpO1xuICAgICAgICBpZiAoc2xpY2Uub3BlblN0YXJ0IHx8IHNsaWNlLm9wZW5FbmQpIHtcbiAgICAgICAgICAgIGxldCBvcGVuU3RhcnQgPSAwLCBvcGVuRW5kID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IG5vZGUgPSBzbGljZS5jb250ZW50LmZpcnN0Q2hpbGQ7IG9wZW5TdGFydCA8IHNsaWNlLm9wZW5TdGFydCAmJiAhbm9kZS50eXBlLnNwZWMuaXNvbGF0aW5nOyBvcGVuU3RhcnQrKywgbm9kZSA9IG5vZGUuZmlyc3RDaGlsZCkgeyB9XG4gICAgICAgICAgICBmb3IgKGxldCBub2RlID0gc2xpY2UuY29udGVudC5sYXN0Q2hpbGQ7IG9wZW5FbmQgPCBzbGljZS5vcGVuRW5kICYmICFub2RlLnR5cGUuc3BlYy5pc29sYXRpbmc7IG9wZW5FbmQrKywgbm9kZSA9IG5vZGUubGFzdENoaWxkKSB7IH1cbiAgICAgICAgICAgIHNsaWNlID0gY2xvc2VTbGljZShzbGljZSwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aWV3LnNvbWVQcm9wKFwidHJhbnNmb3JtUGFzdGVkXCIsIGYgPT4geyBzbGljZSA9IGYoc2xpY2UsIHZpZXcpOyB9KTtcbiAgICByZXR1cm4gc2xpY2U7XG59XG5jb25zdCBpbmxpbmVQYXJlbnRzID0gL14oYXxhYmJyfGFjcm9ueW18YnxjaXRlfGNvZGV8ZGVsfGVtfGl8aW5zfGtiZHxsYWJlbHxvdXRwdXR8cXxydWJ5fHN8c2FtcHxzcGFufHN0cm9uZ3xzdWJ8c3VwfHRpbWV8dXx0dHx2YXIpJC9pO1xuLy8gVGFrZXMgYSBzbGljZSBwYXJzZWQgd2l0aCBwYXJzZVNsaWNlLCB3aGljaCBtZWFucyB0aGVyZSBoYXNuJ3QgYmVlblxuLy8gYW55IGNvbnRlbnQtZXhwcmVzc2lvbiBjaGVja2luZyBkb25lIG9uIHRoZSB0b3Agbm9kZXMsIHRyaWVzIHRvXG4vLyBmaW5kIGEgcGFyZW50IG5vZGUgaW4gdGhlIGN1cnJlbnQgY29udGV4dCB0aGF0IG1pZ2h0IGZpdCB0aGUgbm9kZXMsXG4vLyBhbmQgaWYgc3VjY2Vzc2Z1bCwgcmVidWlsZHMgdGhlIHNsaWNlIHNvIHRoYXQgaXQgZml0cyBpbnRvIHRoYXQgcGFyZW50LlxuLy9cbi8vIFRoaXMgYWRkcmVzc2VzIHRoZSBwcm9ibGVtIHRoYXQgVHJhbnNmb3JtLnJlcGxhY2UgZXhwZWN0cyBhXG4vLyBjb2hlcmVudCBzbGljZSwgYW5kIHdpbGwgZmFpbCB0byBwbGFjZSBhIHNldCBvZiBzaWJsaW5ncyB0aGF0IGRvbid0XG4vLyBmaXQgYW55d2hlcmUgaW4gdGhlIHNjaGVtYS5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNpYmxpbmdzKGZyYWdtZW50LCAkY29udGV4dCkge1xuICAgIGlmIChmcmFnbWVudC5jaGlsZENvdW50IDwgMilcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50O1xuICAgIGZvciAobGV0IGQgPSAkY29udGV4dC5kZXB0aDsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgbGV0IHBhcmVudCA9ICRjb250ZXh0Lm5vZGUoZCk7XG4gICAgICAgIGxldCBtYXRjaCA9IHBhcmVudC5jb250ZW50TWF0Y2hBdCgkY29udGV4dC5pbmRleChkKSk7XG4gICAgICAgIGxldCBsYXN0V3JhcCwgcmVzdWx0ID0gW107XG4gICAgICAgIGZyYWdtZW50LmZvckVhY2gobm9kZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBsZXQgd3JhcCA9IG1hdGNoLmZpbmRXcmFwcGluZyhub2RlLnR5cGUpLCBpbkxhc3Q7XG4gICAgICAgICAgICBpZiAoIXdyYXApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoaW5MYXN0ID0gcmVzdWx0Lmxlbmd0aCAmJiBsYXN0V3JhcC5sZW5ndGggJiYgYWRkVG9TaWJsaW5nKHdyYXAsIGxhc3RXcmFwLCBub2RlLCByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdLCAwKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0gPSBpbkxhc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9IGNsb3NlUmlnaHQocmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSwgbGFzdFdyYXAubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBsZXQgd3JhcHBlZCA9IHdpdGhXcmFwcGVycyhub2RlLCB3cmFwKTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh3cmFwcGVkKTtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoLm1hdGNoVHlwZSh3cmFwcGVkLnR5cGUpO1xuICAgICAgICAgICAgICAgIGxhc3RXcmFwID0gd3JhcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgICAgICByZXR1cm4gRnJhZ21lbnQuZnJvbShyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gZnJhZ21lbnQ7XG59XG5mdW5jdGlvbiB3aXRoV3JhcHBlcnMobm9kZSwgd3JhcCwgZnJvbSA9IDApIHtcbiAgICBmb3IgKGxldCBpID0gd3JhcC5sZW5ndGggLSAxOyBpID49IGZyb207IGktLSlcbiAgICAgICAgbm9kZSA9IHdyYXBbaV0uY3JlYXRlKG51bGwsIEZyYWdtZW50LmZyb20obm9kZSkpO1xuICAgIHJldHVybiBub2RlO1xufVxuLy8gVXNlZCB0byBncm91cCBhZGphY2VudCBub2RlcyB3cmFwcGVkIGluIHNpbWlsYXIgcGFyZW50cyBieVxuLy8gbm9ybWFsaXplU2libGluZ3MgaW50byB0aGUgc2FtZSBwYXJlbnQgbm9kZVxuZnVuY3Rpb24gYWRkVG9TaWJsaW5nKHdyYXAsIGxhc3RXcmFwLCBub2RlLCBzaWJsaW5nLCBkZXB0aCkge1xuICAgIGlmIChkZXB0aCA8IHdyYXAubGVuZ3RoICYmIGRlcHRoIDwgbGFzdFdyYXAubGVuZ3RoICYmIHdyYXBbZGVwdGhdID09IGxhc3RXcmFwW2RlcHRoXSkge1xuICAgICAgICBsZXQgaW5uZXIgPSBhZGRUb1NpYmxpbmcod3JhcCwgbGFzdFdyYXAsIG5vZGUsIHNpYmxpbmcubGFzdENoaWxkLCBkZXB0aCArIDEpO1xuICAgICAgICBpZiAoaW5uZXIpXG4gICAgICAgICAgICByZXR1cm4gc2libGluZy5jb3B5KHNpYmxpbmcuY29udGVudC5yZXBsYWNlQ2hpbGQoc2libGluZy5jaGlsZENvdW50IC0gMSwgaW5uZXIpKTtcbiAgICAgICAgbGV0IG1hdGNoID0gc2libGluZy5jb250ZW50TWF0Y2hBdChzaWJsaW5nLmNoaWxkQ291bnQpO1xuICAgICAgICBpZiAobWF0Y2gubWF0Y2hUeXBlKGRlcHRoID09IHdyYXAubGVuZ3RoIC0gMSA/IG5vZGUudHlwZSA6IHdyYXBbZGVwdGggKyAxXSkpXG4gICAgICAgICAgICByZXR1cm4gc2libGluZy5jb3B5KHNpYmxpbmcuY29udGVudC5hcHBlbmQoRnJhZ21lbnQuZnJvbSh3aXRoV3JhcHBlcnMobm9kZSwgd3JhcCwgZGVwdGggKyAxKSkpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbG9zZVJpZ2h0KG5vZGUsIGRlcHRoKSB7XG4gICAgaWYgKGRlcHRoID09IDApXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIGxldCBmcmFnbWVudCA9IG5vZGUuY29udGVudC5yZXBsYWNlQ2hpbGQobm9kZS5jaGlsZENvdW50IC0gMSwgY2xvc2VSaWdodChub2RlLmxhc3RDaGlsZCwgZGVwdGggLSAxKSk7XG4gICAgbGV0IGZpbGwgPSBub2RlLmNvbnRlbnRNYXRjaEF0KG5vZGUuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShGcmFnbWVudC5lbXB0eSwgdHJ1ZSk7XG4gICAgcmV0dXJuIG5vZGUuY29weShmcmFnbWVudC5hcHBlbmQoZmlsbCkpO1xufVxuZnVuY3Rpb24gY2xvc2VSYW5nZShmcmFnbWVudCwgc2lkZSwgZnJvbSwgdG8sIGRlcHRoLCBvcGVuRW5kKSB7XG4gICAgbGV0IG5vZGUgPSBzaWRlIDwgMCA/IGZyYWdtZW50LmZpcnN0Q2hpbGQgOiBmcmFnbWVudC5sYXN0Q2hpbGQsIGlubmVyID0gbm9kZS5jb250ZW50O1xuICAgIGlmIChmcmFnbWVudC5jaGlsZENvdW50ID4gMSlcbiAgICAgICAgb3BlbkVuZCA9IDA7XG4gICAgaWYgKGRlcHRoIDwgdG8gLSAxKVxuICAgICAgICBpbm5lciA9IGNsb3NlUmFuZ2UoaW5uZXIsIHNpZGUsIGZyb20sIHRvLCBkZXB0aCArIDEsIG9wZW5FbmQpO1xuICAgIGlmIChkZXB0aCA+PSBmcm9tKVxuICAgICAgICBpbm5lciA9IHNpZGUgPCAwID8gbm9kZS5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGlubmVyLCBvcGVuRW5kIDw9IGRlcHRoKS5hcHBlbmQoaW5uZXIpXG4gICAgICAgICAgICA6IGlubmVyLmFwcGVuZChub2RlLmNvbnRlbnRNYXRjaEF0KG5vZGUuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShGcmFnbWVudC5lbXB0eSwgdHJ1ZSkpO1xuICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlQ2hpbGQoc2lkZSA8IDAgPyAwIDogZnJhZ21lbnQuY2hpbGRDb3VudCAtIDEsIG5vZGUuY29weShpbm5lcikpO1xufVxuZnVuY3Rpb24gY2xvc2VTbGljZShzbGljZSwgb3BlblN0YXJ0LCBvcGVuRW5kKSB7XG4gICAgaWYgKG9wZW5TdGFydCA8IHNsaWNlLm9wZW5TdGFydClcbiAgICAgICAgc2xpY2UgPSBuZXcgU2xpY2UoY2xvc2VSYW5nZShzbGljZS5jb250ZW50LCAtMSwgb3BlblN0YXJ0LCBzbGljZS5vcGVuU3RhcnQsIDAsIHNsaWNlLm9wZW5FbmQpLCBvcGVuU3RhcnQsIHNsaWNlLm9wZW5FbmQpO1xuICAgIGlmIChvcGVuRW5kIDwgc2xpY2Uub3BlbkVuZClcbiAgICAgICAgc2xpY2UgPSBuZXcgU2xpY2UoY2xvc2VSYW5nZShzbGljZS5jb250ZW50LCAxLCBvcGVuRW5kLCBzbGljZS5vcGVuRW5kLCAwLCAwKSwgc2xpY2Uub3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICByZXR1cm4gc2xpY2U7XG59XG4vLyBUcmljayBmcm9tIGpRdWVyeSAtLSBzb21lIGVsZW1lbnRzIG11c3QgYmUgd3JhcHBlZCBpbiBvdGhlclxuLy8gZWxlbWVudHMgZm9yIGlubmVySFRNTCB0byB3b3JrLiBJLmUuIGlmIHlvdSBkbyBgZGl2LmlubmVySFRNTCA9XG4vLyBcIjx0ZD4uLjwvdGQ+XCJgIHRoZSB0YWJsZSBjZWxscyBhcmUgaWdub3JlZC5cbmNvbnN0IHdyYXBNYXAgPSB7XG4gICAgdGhlYWQ6IFtcInRhYmxlXCJdLFxuICAgIHRib2R5OiBbXCJ0YWJsZVwiXSxcbiAgICB0Zm9vdDogW1widGFibGVcIl0sXG4gICAgY2FwdGlvbjogW1widGFibGVcIl0sXG4gICAgY29sZ3JvdXA6IFtcInRhYmxlXCJdLFxuICAgIGNvbDogW1widGFibGVcIiwgXCJjb2xncm91cFwiXSxcbiAgICB0cjogW1widGFibGVcIiwgXCJ0Ym9keVwiXSxcbiAgICB0ZDogW1widGFibGVcIiwgXCJ0Ym9keVwiLCBcInRyXCJdLFxuICAgIHRoOiBbXCJ0YWJsZVwiLCBcInRib2R5XCIsIFwidHJcIl1cbn07XG5sZXQgX2RldGFjaGVkRG9jID0gbnVsbDtcbmZ1bmN0aW9uIGRldGFjaGVkRG9jKCkge1xuICAgIHJldHVybiBfZGV0YWNoZWREb2MgfHwgKF9kZXRhY2hlZERvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcInRpdGxlXCIpKTtcbn1cbmZ1bmN0aW9uIHJlYWRIVE1MKGh0bWwpIHtcbiAgICBsZXQgbWV0YXMgPSAvXihcXHMqPG1ldGEgW14+XSo+KSovLmV4ZWMoaHRtbCk7XG4gICAgaWYgKG1ldGFzKVxuICAgICAgICBodG1sID0gaHRtbC5zbGljZShtZXRhc1swXS5sZW5ndGgpO1xuICAgIGxldCBlbHQgPSBkZXRhY2hlZERvYygpLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGV0IGZpcnN0VGFnID0gLzwoW2Etel1bXj5cXHNdKykvaS5leGVjKGh0bWwpLCB3cmFwO1xuICAgIGlmICh3cmFwID0gZmlyc3RUYWcgJiYgd3JhcE1hcFtmaXJzdFRhZ1sxXS50b0xvd2VyQ2FzZSgpXSlcbiAgICAgICAgaHRtbCA9IHdyYXAubWFwKG4gPT4gXCI8XCIgKyBuICsgXCI+XCIpLmpvaW4oXCJcIikgKyBodG1sICsgd3JhcC5tYXAobiA9PiBcIjwvXCIgKyBuICsgXCI+XCIpLnJldmVyc2UoKS5qb2luKFwiXCIpO1xuICAgIGVsdC5pbm5lckhUTUwgPSBodG1sO1xuICAgIGlmICh3cmFwKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyYXAubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBlbHQgPSBlbHQucXVlcnlTZWxlY3Rvcih3cmFwW2ldKSB8fCBlbHQ7XG4gICAgcmV0dXJuIGVsdDtcbn1cbi8vIFdlYmtpdCBicm93c2VycyBkbyBzb21lIGhhcmQtdG8tcHJlZGljdCByZXBsYWNlbWVudCBvZiByZWd1bGFyXG4vLyBzcGFjZXMgd2l0aCBub24tYnJlYWtpbmcgc3BhY2VzIHdoZW4gcHV0dGluZyBjb250ZW50IG9uIHRoZVxuLy8gY2xpcGJvYXJkLiBUaGlzIHRyaWVzIHRvIGNvbnZlcnQgc3VjaCBub24tYnJlYWtpbmcgc3BhY2VzICh3aGljaFxuLy8gd2lsbCBiZSB3cmFwcGVkIGluIGEgcGxhaW4gc3BhbiBvbiBDaHJvbWUsIGEgc3BhbiB3aXRoIGNsYXNzXG4vLyBBcHBsZS1jb252ZXJ0ZWQtc3BhY2Ugb24gU2FmYXJpKSBiYWNrIHRvIHJlZ3VsYXIgc3BhY2VzLlxuZnVuY3Rpb24gcmVzdG9yZVJlcGxhY2VkU3BhY2VzKGRvbSkge1xuICAgIGxldCBub2RlcyA9IGRvbS5xdWVyeVNlbGVjdG9yQWxsKGNocm9tZSA/IFwic3Bhbjpub3QoW2NsYXNzXSk6bm90KFtzdHlsZV0pXCIgOiBcInNwYW4uQXBwbGUtY29udmVydGVkLXNwYWNlXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSAmJiBub2RlLnRleHRDb250ZW50ID09IFwiXFx1MDBhMFwiICYmIG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZG9tLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIgXCIpLCBub2RlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRDb250ZXh0KHNsaWNlLCBjb250ZXh0KSB7XG4gICAgaWYgKCFzbGljZS5zaXplKVxuICAgICAgICByZXR1cm4gc2xpY2U7XG4gICAgbGV0IHNjaGVtYSA9IHNsaWNlLmNvbnRlbnQuZmlyc3RDaGlsZC50eXBlLnNjaGVtYSwgYXJyYXk7XG4gICAgdHJ5IHtcbiAgICAgICAgYXJyYXkgPSBKU09OLnBhcnNlKGNvbnRleHQpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gc2xpY2U7XG4gICAgfVxuICAgIGxldCB7IGNvbnRlbnQsIG9wZW5TdGFydCwgb3BlbkVuZCB9ID0gc2xpY2U7XG4gICAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDI7IGkgPj0gMDsgaSAtPSAyKSB7XG4gICAgICAgIGxldCB0eXBlID0gc2NoZW1hLm5vZGVzW2FycmF5W2ldXTtcbiAgICAgICAgaWYgKCF0eXBlIHx8IHR5cGUuaGFzUmVxdWlyZWRBdHRycygpKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKHR5cGUuY3JlYXRlKGFycmF5W2kgKyAxXSwgY29udGVudCkpO1xuICAgICAgICBvcGVuU3RhcnQrKztcbiAgICAgICAgb3BlbkVuZCsrO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNsaWNlKGNvbnRlbnQsIG9wZW5TdGFydCwgb3BlbkVuZCk7XG59XG5cbi8vIEEgY29sbGVjdGlvbiBvZiBET00gZXZlbnRzIHRoYXQgb2NjdXIgd2l0aGluIHRoZSBlZGl0b3IsIGFuZCBjYWxsYmFjayBmdW5jdGlvbnNcbi8vIHRvIGludm9rZSB3aGVuIHRoZSBldmVudCBmaXJlcy5cbmNvbnN0IGhhbmRsZXJzID0ge307XG5jb25zdCBlZGl0SGFuZGxlcnMgPSB7fTtcbmNvbnN0IHBhc3NpdmVIYW5kbGVycyA9IHsgdG91Y2hzdGFydDogdHJ1ZSwgdG91Y2htb3ZlOiB0cnVlIH07XG5jbGFzcyBJbnB1dFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaGlmdEtleSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1vdXNlRG93biA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdEtleUNvZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RLZXlDb2RlVGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdENsaWNrID0geyB0aW1lOiAwLCB4OiAwLCB5OiAwLCB0eXBlOiBcIlwiIH07XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvbk9yaWdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGlvblRpbWUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RJT1NFbnRlciA9IDA7XG4gICAgICAgIHRoaXMubGFzdElPU0VudGVyRmFsbGJhY2tUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMubGFzdEZvY3VzID0gMDtcbiAgICAgICAgdGhpcy5sYXN0VG91Y2ggPSAwO1xuICAgICAgICB0aGlzLmxhc3RBbmRyb2lkRGVsZXRlID0gMDtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb21wb3NpbmdUaW1lb3V0ID0gLTE7XG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25Ob2RlcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbXBvc2l0aW9uRW5kZWRBdCA9IC0yZTg7XG4gICAgICAgIHRoaXMuY29tcG9zaXRpb25JRCA9IDE7XG4gICAgICAgIHRoaXMuZG9tQ2hhbmdlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmhpZGVTZWxlY3Rpb25HdWFyZCA9IG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5pdElucHV0KHZpZXcpIHtcbiAgICBmb3IgKGxldCBldmVudCBpbiBoYW5kbGVycykge1xuICAgICAgICBsZXQgaGFuZGxlciA9IGhhbmRsZXJzW2V2ZW50XTtcbiAgICAgICAgdmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdmlldy5pbnB1dC5ldmVudEhhbmRsZXJzW2V2ZW50XSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50QmVsb25nc1RvVmlldyh2aWV3LCBldmVudCkgJiYgIXJ1bkN1c3RvbUhhbmRsZXIodmlldywgZXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKHZpZXcuZWRpdGFibGUgfHwgIShldmVudC50eXBlIGluIGVkaXRIYW5kbGVycykpKVxuICAgICAgICAgICAgICAgIGhhbmRsZXIodmlldywgZXZlbnQpO1xuICAgICAgICB9LCBwYXNzaXZlSGFuZGxlcnNbZXZlbnRdID8geyBwYXNzaXZlOiB0cnVlIH0gOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICAvLyBPbiBTYWZhcmksIGZvciByZWFzb25zIGJleW9uZCBteSB1bmRlcnN0YW5kaW5nLCBhZGRpbmcgYW4gaW5wdXRcbiAgICAvLyBldmVudCBoYW5kbGVyIG1ha2VzIGFuIGlzc3VlIHdoZXJlIHRoZSBjb21wb3NpdGlvbiB2YW5pc2hlcyB3aGVuXG4gICAgLy8geW91IHByZXNzIGVudGVyIGdvIGF3YXkuXG4gICAgaWYgKHNhZmFyaSlcbiAgICAgICAgdmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IG51bGwpO1xuICAgIGVuc3VyZUxpc3RlbmVycyh2aWV3KTtcbn1cbmZ1bmN0aW9uIHNldFNlbGVjdGlvbk9yaWdpbih2aWV3LCBvcmlnaW4pIHtcbiAgICB2aWV3LmlucHV0Lmxhc3RTZWxlY3Rpb25PcmlnaW4gPSBvcmlnaW47XG4gICAgdmlldy5pbnB1dC5sYXN0U2VsZWN0aW9uVGltZSA9IERhdGUubm93KCk7XG59XG5mdW5jdGlvbiBkZXN0cm95SW5wdXQodmlldykge1xuICAgIHZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpO1xuICAgIGZvciAobGV0IHR5cGUgaW4gdmlldy5pbnB1dC5ldmVudEhhbmRsZXJzKVxuICAgICAgICB2aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIHZpZXcuaW5wdXQuZXZlbnRIYW5kbGVyc1t0eXBlXSk7XG4gICAgY2xlYXJUaW1lb3V0KHZpZXcuaW5wdXQuY29tcG9zaW5nVGltZW91dCk7XG4gICAgY2xlYXJUaW1lb3V0KHZpZXcuaW5wdXQubGFzdElPU0VudGVyRmFsbGJhY2tUaW1lb3V0KTtcbn1cbmZ1bmN0aW9uIGVuc3VyZUxpc3RlbmVycyh2aWV3KSB7XG4gICAgdmlldy5zb21lUHJvcChcImhhbmRsZURPTUV2ZW50c1wiLCBjdXJyZW50SGFuZGxlcnMgPT4ge1xuICAgICAgICBmb3IgKGxldCB0eXBlIGluIGN1cnJlbnRIYW5kbGVycylcbiAgICAgICAgICAgIGlmICghdmlldy5pbnB1dC5ldmVudEhhbmRsZXJzW3R5cGVdKVxuICAgICAgICAgICAgICAgIHZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdmlldy5pbnB1dC5ldmVudEhhbmRsZXJzW3R5cGVdID0gZXZlbnQgPT4gcnVuQ3VzdG9tSGFuZGxlcih2aWV3LCBldmVudCkpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gcnVuQ3VzdG9tSGFuZGxlcih2aWV3LCBldmVudCkge1xuICAgIHJldHVybiB2aWV3LnNvbWVQcm9wKFwiaGFuZGxlRE9NRXZlbnRzXCIsIGhhbmRsZXJzID0+IHtcbiAgICAgICAgbGV0IGhhbmRsZXIgPSBoYW5kbGVyc1tldmVudC50eXBlXTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXIgPyBoYW5kbGVyKHZpZXcsIGV2ZW50KSB8fCBldmVudC5kZWZhdWx0UHJldmVudGVkIDogZmFsc2U7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBldmVudEJlbG9uZ3NUb1ZpZXcodmlldywgZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmJ1YmJsZXMpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgbm9kZSA9IGV2ZW50LnRhcmdldDsgbm9kZSAhPSB2aWV3LmRvbTsgbm9kZSA9IG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZVR5cGUgPT0gMTEgfHxcbiAgICAgICAgICAgIChub2RlLnBtVmlld0Rlc2MgJiYgbm9kZS5wbVZpZXdEZXNjLnN0b3BFdmVudChldmVudCkpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCh2aWV3LCBldmVudCkge1xuICAgIGlmICghcnVuQ3VzdG9tSGFuZGxlcih2aWV3LCBldmVudCkgJiYgaGFuZGxlcnNbZXZlbnQudHlwZV0gJiZcbiAgICAgICAgKHZpZXcuZWRpdGFibGUgfHwgIShldmVudC50eXBlIGluIGVkaXRIYW5kbGVycykpKVxuICAgICAgICBoYW5kbGVyc1tldmVudC50eXBlXSh2aWV3LCBldmVudCk7XG59XG5lZGl0SGFuZGxlcnMua2V5ZG93biA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgdmlldy5pbnB1dC5zaGlmdEtleSA9IGV2ZW50LmtleUNvZGUgPT0gMTYgfHwgZXZlbnQuc2hpZnRLZXk7XG4gICAgaWYgKGluT3JOZWFyQ29tcG9zaXRpb24odmlldywgZXZlbnQpKVxuICAgICAgICByZXR1cm47XG4gICAgdmlldy5pbnB1dC5sYXN0S2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgdmlldy5pbnB1dC5sYXN0S2V5Q29kZVRpbWUgPSBEYXRlLm5vdygpO1xuICAgIC8vIFN1cHByZXNzIGVudGVyIGtleSBldmVudHMgb24gQ2hyb21lIEFuZHJvaWQsIGJlY2F1c2UgdGhvc2UgdGVuZFxuICAgIC8vIHRvIGJlIHBhcnQgb2YgYSBjb25mdXNlZCBzZXF1ZW5jZSBvZiBjb21wb3NpdGlvbiBldmVudHMgZmlyZWQsXG4gICAgLy8gYW5kIGhhbmRsaW5nIHRoZW0gZWFnZXJseSB0ZW5kcyB0byBjb3JydXB0IHRoZSBpbnB1dC5cbiAgICBpZiAoYW5kcm9pZCAmJiBjaHJvbWUgJiYgZXZlbnQua2V5Q29kZSA9PSAxMylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChldmVudC5rZXlDb2RlICE9IDIyOSlcbiAgICAgICAgdmlldy5kb21PYnNlcnZlci5mb3JjZUZsdXNoKCk7XG4gICAgLy8gT24gaU9TLCBpZiB3ZSBwcmV2ZW50RGVmYXVsdCBlbnRlciBrZXkgcHJlc3NlcywgdGhlIHZpcnR1YWxcbiAgICAvLyBrZXlib2FyZCBnZXRzIGNvbmZ1c2VkLiBTbyB0aGUgaGFjayBoZXJlIGlzIHRvIHNldCBhIGZsYWcgdGhhdFxuICAgIC8vIG1ha2VzIHRoZSBET00gY2hhbmdlIGNvZGUgcmVjb2duaXplIHRoYXQgd2hhdCBqdXN0IGhhcHBlbnMgc2hvdWxkXG4gICAgLy8gYmUgcmVwbGFjZWQgYnkgd2hhdGV2ZXIgdGhlIEVudGVyIGtleSBoYW5kbGVycyBkby5cbiAgICBpZiAoaW9zICYmIGV2ZW50LmtleUNvZGUgPT0gMTMgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LmFsdEtleSAmJiAhZXZlbnQubWV0YUtleSkge1xuICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmlldy5pbnB1dC5sYXN0SU9TRW50ZXIgPSBub3c7XG4gICAgICAgIHZpZXcuaW5wdXQubGFzdElPU0VudGVyRmFsbGJhY2tUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlldy5pbnB1dC5sYXN0SU9TRW50ZXIgPT0gbm93KSB7XG4gICAgICAgICAgICAgICAgdmlldy5zb21lUHJvcChcImhhbmRsZUtleURvd25cIiwgZiA9PiBmKHZpZXcsIGtleUV2ZW50KDEzLCBcIkVudGVyXCIpKSk7XG4gICAgICAgICAgICAgICAgdmlldy5pbnB1dC5sYXN0SU9TRW50ZXIgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAyMDApO1xuICAgIH1cbiAgICBlbHNlIGlmICh2aWV3LnNvbWVQcm9wKFwiaGFuZGxlS2V5RG93blwiLCBmID0+IGYodmlldywgZXZlbnQpKSB8fCBjYXB0dXJlS2V5RG93bih2aWV3LCBldmVudCkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldFNlbGVjdGlvbk9yaWdpbih2aWV3LCBcImtleVwiKTtcbiAgICB9XG59O1xuZWRpdEhhbmRsZXJzLmtleXVwID0gKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT0gMTYpXG4gICAgICAgIHZpZXcuaW5wdXQuc2hpZnRLZXkgPSBmYWxzZTtcbn07XG5lZGl0SGFuZGxlcnMua2V5cHJlc3MgPSAodmlldywgX2V2ZW50KSA9PiB7XG4gICAgbGV0IGV2ZW50ID0gX2V2ZW50O1xuICAgIGlmIChpbk9yTmVhckNvbXBvc2l0aW9uKHZpZXcsIGV2ZW50KSB8fCAhZXZlbnQuY2hhckNvZGUgfHxcbiAgICAgICAgZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuYWx0S2V5IHx8IG1hYyAmJiBldmVudC5tZXRhS2V5KVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHZpZXcuc29tZVByb3AoXCJoYW5kbGVLZXlQcmVzc1wiLCBmID0+IGYodmlldywgZXZlbnQpKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoIShzZWwgaW5zdGFuY2VvZiBUZXh0U2VsZWN0aW9uKSB8fCAhc2VsLiRmcm9tLnNhbWVQYXJlbnQoc2VsLiR0bykpIHtcbiAgICAgICAgbGV0IHRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmNoYXJDb2RlKTtcbiAgICAgICAgaWYgKCEvW1xcclxcbl0vLnRlc3QodGV4dCkgJiYgIXZpZXcuc29tZVByb3AoXCJoYW5kbGVUZXh0SW5wdXRcIiwgZiA9PiBmKHZpZXcsIHNlbC4kZnJvbS5wb3MsIHNlbC4kdG8ucG9zLCB0ZXh0KSkpXG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHZpZXcuc3RhdGUudHIuaW5zZXJ0VGV4dCh0ZXh0KS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gZXZlbnRDb29yZHMoZXZlbnQpIHsgcmV0dXJuIHsgbGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZIH07IH1cbmZ1bmN0aW9uIGlzTmVhcihldmVudCwgY2xpY2spIHtcbiAgICBsZXQgZHggPSBjbGljay54IC0gZXZlbnQuY2xpZW50WCwgZHkgPSBjbGljay55IC0gZXZlbnQuY2xpZW50WTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgPCAxMDA7XG59XG5mdW5jdGlvbiBydW5IYW5kbGVyT25Db250ZXh0KHZpZXcsIHByb3BOYW1lLCBwb3MsIGluc2lkZSwgZXZlbnQpIHtcbiAgICBpZiAoaW5zaWRlID09IC0xKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0ICRwb3MgPSB2aWV3LnN0YXRlLmRvYy5yZXNvbHZlKGluc2lkZSk7XG4gICAgZm9yIChsZXQgaSA9ICRwb3MuZGVwdGggKyAxOyBpID4gMDsgaS0tKSB7XG4gICAgICAgIGlmICh2aWV3LnNvbWVQcm9wKHByb3BOYW1lLCBmID0+IGkgPiAkcG9zLmRlcHRoID8gZih2aWV3LCBwb3MsICRwb3Mubm9kZUFmdGVyLCAkcG9zLmJlZm9yZShpKSwgZXZlbnQsIHRydWUpXG4gICAgICAgICAgICA6IGYodmlldywgcG9zLCAkcG9zLm5vZGUoaSksICRwb3MuYmVmb3JlKGkpLCBldmVudCwgZmFsc2UpKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1cGRhdGVTZWxlY3Rpb24odmlldywgc2VsZWN0aW9uLCBvcmlnaW4pIHtcbiAgICBpZiAoIXZpZXcuZm9jdXNlZClcbiAgICAgICAgdmlldy5mb2N1cygpO1xuICAgIGxldCB0ciA9IHZpZXcuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbik7XG4gICAgaWYgKG9yaWdpbiA9PSBcInBvaW50ZXJcIilcbiAgICAgICAgdHIuc2V0TWV0YShcInBvaW50ZXJcIiwgdHJ1ZSk7XG4gICAgdmlldy5kaXNwYXRjaCh0cik7XG59XG5mdW5jdGlvbiBzZWxlY3RDbGlja2VkTGVhZih2aWV3LCBpbnNpZGUpIHtcbiAgICBpZiAoaW5zaWRlID09IC0xKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0ICRwb3MgPSB2aWV3LnN0YXRlLmRvYy5yZXNvbHZlKGluc2lkZSksIG5vZGUgPSAkcG9zLm5vZGVBZnRlcjtcbiAgICBpZiAobm9kZSAmJiBub2RlLmlzQXRvbSAmJiBOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShub2RlKSkge1xuICAgICAgICB1cGRhdGVTZWxlY3Rpb24odmlldywgbmV3IE5vZGVTZWxlY3Rpb24oJHBvcyksIFwicG9pbnRlclwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHNlbGVjdENsaWNrZWROb2RlKHZpZXcsIGluc2lkZSkge1xuICAgIGlmIChpbnNpZGUgPT0gLTEpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24sIHNlbGVjdGVkTm9kZSwgc2VsZWN0QXQ7XG4gICAgaWYgKHNlbCBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24pXG4gICAgICAgIHNlbGVjdGVkTm9kZSA9IHNlbC5ub2RlO1xuICAgIGxldCAkcG9zID0gdmlldy5zdGF0ZS5kb2MucmVzb2x2ZShpbnNpZGUpO1xuICAgIGZvciAobGV0IGkgPSAkcG9zLmRlcHRoICsgMTsgaSA+IDA7IGktLSkge1xuICAgICAgICBsZXQgbm9kZSA9IGkgPiAkcG9zLmRlcHRoID8gJHBvcy5ub2RlQWZ0ZXIgOiAkcG9zLm5vZGUoaSk7XG4gICAgICAgIGlmIChOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShub2RlKSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkTm9kZSAmJiBzZWwuJGZyb20uZGVwdGggPiAwICYmXG4gICAgICAgICAgICAgICAgaSA+PSBzZWwuJGZyb20uZGVwdGggJiYgJHBvcy5iZWZvcmUoc2VsLiRmcm9tLmRlcHRoICsgMSkgPT0gc2VsLiRmcm9tLnBvcylcbiAgICAgICAgICAgICAgICBzZWxlY3RBdCA9ICRwb3MuYmVmb3JlKHNlbC4kZnJvbS5kZXB0aCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZWN0QXQgPSAkcG9zLmJlZm9yZShpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWxlY3RBdCAhPSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZVNlbGVjdGlvbih2aWV3LCBOb2RlU2VsZWN0aW9uLmNyZWF0ZSh2aWV3LnN0YXRlLmRvYywgc2VsZWN0QXQpLCBcInBvaW50ZXJcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZVNpbmdsZUNsaWNrKHZpZXcsIHBvcywgaW5zaWRlLCBldmVudCwgc2VsZWN0Tm9kZSkge1xuICAgIHJldHVybiBydW5IYW5kbGVyT25Db250ZXh0KHZpZXcsIFwiaGFuZGxlQ2xpY2tPblwiLCBwb3MsIGluc2lkZSwgZXZlbnQpIHx8XG4gICAgICAgIHZpZXcuc29tZVByb3AoXCJoYW5kbGVDbGlja1wiLCBmID0+IGYodmlldywgcG9zLCBldmVudCkpIHx8XG4gICAgICAgIChzZWxlY3ROb2RlID8gc2VsZWN0Q2xpY2tlZE5vZGUodmlldywgaW5zaWRlKSA6IHNlbGVjdENsaWNrZWRMZWFmKHZpZXcsIGluc2lkZSkpO1xufVxuZnVuY3Rpb24gaGFuZGxlRG91YmxlQ2xpY2sodmlldywgcG9zLCBpbnNpZGUsIGV2ZW50KSB7XG4gICAgcmV0dXJuIHJ1bkhhbmRsZXJPbkNvbnRleHQodmlldywgXCJoYW5kbGVEb3VibGVDbGlja09uXCIsIHBvcywgaW5zaWRlLCBldmVudCkgfHxcbiAgICAgICAgdmlldy5zb21lUHJvcChcImhhbmRsZURvdWJsZUNsaWNrXCIsIGYgPT4gZih2aWV3LCBwb3MsIGV2ZW50KSk7XG59XG5mdW5jdGlvbiBoYW5kbGVUcmlwbGVDbGljayh2aWV3LCBwb3MsIGluc2lkZSwgZXZlbnQpIHtcbiAgICByZXR1cm4gcnVuSGFuZGxlck9uQ29udGV4dCh2aWV3LCBcImhhbmRsZVRyaXBsZUNsaWNrT25cIiwgcG9zLCBpbnNpZGUsIGV2ZW50KSB8fFxuICAgICAgICB2aWV3LnNvbWVQcm9wKFwiaGFuZGxlVHJpcGxlQ2xpY2tcIiwgZiA9PiBmKHZpZXcsIHBvcywgZXZlbnQpKSB8fFxuICAgICAgICBkZWZhdWx0VHJpcGxlQ2xpY2sodmlldywgaW5zaWRlLCBldmVudCk7XG59XG5mdW5jdGlvbiBkZWZhdWx0VHJpcGxlQ2xpY2sodmlldywgaW5zaWRlLCBldmVudCkge1xuICAgIGlmIChldmVudC5idXR0b24gIT0gMClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBkb2MgPSB2aWV3LnN0YXRlLmRvYztcbiAgICBpZiAoaW5zaWRlID09IC0xKSB7XG4gICAgICAgIGlmIChkb2MuaW5saW5lQ29udGVudCkge1xuICAgICAgICAgICAgdXBkYXRlU2VsZWN0aW9uKHZpZXcsIFRleHRTZWxlY3Rpb24uY3JlYXRlKGRvYywgMCwgZG9jLmNvbnRlbnQuc2l6ZSksIFwicG9pbnRlclwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZShpbnNpZGUpO1xuICAgIGZvciAobGV0IGkgPSAkcG9zLmRlcHRoICsgMTsgaSA+IDA7IGktLSkge1xuICAgICAgICBsZXQgbm9kZSA9IGkgPiAkcG9zLmRlcHRoID8gJHBvcy5ub2RlQWZ0ZXIgOiAkcG9zLm5vZGUoaSk7XG4gICAgICAgIGxldCBub2RlUG9zID0gJHBvcy5iZWZvcmUoaSk7XG4gICAgICAgIGlmIChub2RlLmlubGluZUNvbnRlbnQpXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3Rpb24odmlldywgVGV4dFNlbGVjdGlvbi5jcmVhdGUoZG9jLCBub2RlUG9zICsgMSwgbm9kZVBvcyArIDEgKyBub2RlLmNvbnRlbnQuc2l6ZSksIFwicG9pbnRlclwiKTtcbiAgICAgICAgZWxzZSBpZiAoTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobm9kZSkpXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3Rpb24odmlldywgTm9kZVNlbGVjdGlvbi5jcmVhdGUoZG9jLCBub2RlUG9zKSwgXCJwb2ludGVyXCIpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gZm9yY2VET01GbHVzaCh2aWV3KSB7XG4gICAgcmV0dXJuIGVuZENvbXBvc2l0aW9uKHZpZXcpO1xufVxuY29uc3Qgc2VsZWN0Tm9kZU1vZGlmaWVyID0gbWFjID8gXCJtZXRhS2V5XCIgOiBcImN0cmxLZXlcIjtcbmhhbmRsZXJzLm1vdXNlZG93biA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgdmlldy5pbnB1dC5zaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5O1xuICAgIGxldCBmbHVzaGVkID0gZm9yY2VET01GbHVzaCh2aWV3KTtcbiAgICBsZXQgbm93ID0gRGF0ZS5ub3coKSwgdHlwZSA9IFwic2luZ2xlQ2xpY2tcIjtcbiAgICBpZiAobm93IC0gdmlldy5pbnB1dC5sYXN0Q2xpY2sudGltZSA8IDUwMCAmJiBpc05lYXIoZXZlbnQsIHZpZXcuaW5wdXQubGFzdENsaWNrKSAmJiAhZXZlbnRbc2VsZWN0Tm9kZU1vZGlmaWVyXSkge1xuICAgICAgICBpZiAodmlldy5pbnB1dC5sYXN0Q2xpY2sudHlwZSA9PSBcInNpbmdsZUNsaWNrXCIpXG4gICAgICAgICAgICB0eXBlID0gXCJkb3VibGVDbGlja1wiO1xuICAgICAgICBlbHNlIGlmICh2aWV3LmlucHV0Lmxhc3RDbGljay50eXBlID09IFwiZG91YmxlQ2xpY2tcIilcbiAgICAgICAgICAgIHR5cGUgPSBcInRyaXBsZUNsaWNrXCI7XG4gICAgfVxuICAgIHZpZXcuaW5wdXQubGFzdENsaWNrID0geyB0aW1lOiBub3csIHg6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFksIHR5cGUgfTtcbiAgICBsZXQgcG9zID0gdmlldy5wb3NBdENvb3JkcyhldmVudENvb3JkcyhldmVudCkpO1xuICAgIGlmICghcG9zKVxuICAgICAgICByZXR1cm47XG4gICAgaWYgKHR5cGUgPT0gXCJzaW5nbGVDbGlja1wiKSB7XG4gICAgICAgIGlmICh2aWV3LmlucHV0Lm1vdXNlRG93bilcbiAgICAgICAgICAgIHZpZXcuaW5wdXQubW91c2VEb3duLmRvbmUoKTtcbiAgICAgICAgdmlldy5pbnB1dC5tb3VzZURvd24gPSBuZXcgTW91c2VEb3duKHZpZXcsIHBvcywgZXZlbnQsICEhZmx1c2hlZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCh0eXBlID09IFwiZG91YmxlQ2xpY2tcIiA/IGhhbmRsZURvdWJsZUNsaWNrIDogaGFuZGxlVHJpcGxlQ2xpY2spKHZpZXcsIHBvcy5wb3MsIHBvcy5pbnNpZGUsIGV2ZW50KSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0U2VsZWN0aW9uT3JpZ2luKHZpZXcsIFwicG9pbnRlclwiKTtcbiAgICB9XG59O1xuY2xhc3MgTW91c2VEb3duIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBwb3MsIGV2ZW50LCBmbHVzaGVkKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMucG9zID0gcG9zO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuZmx1c2hlZCA9IGZsdXNoZWQ7XG4gICAgICAgIHRoaXMuZGVsYXllZFNlbGVjdGlvblN5bmMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taWdodERyYWcgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXJ0RG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgICAgIHRoaXMuc2VsZWN0Tm9kZSA9ICEhZXZlbnRbc2VsZWN0Tm9kZU1vZGlmaWVyXTtcbiAgICAgICAgdGhpcy5hbGxvd0RlZmF1bHQgPSBldmVudC5zaGlmdEtleTtcbiAgICAgICAgbGV0IHRhcmdldE5vZGUsIHRhcmdldFBvcztcbiAgICAgICAgaWYgKHBvcy5pbnNpZGUgPiAtMSkge1xuICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHZpZXcuc3RhdGUuZG9jLm5vZGVBdChwb3MuaW5zaWRlKTtcbiAgICAgICAgICAgIHRhcmdldFBvcyA9IHBvcy5pbnNpZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgJHBvcyA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUocG9zLnBvcyk7XG4gICAgICAgICAgICB0YXJnZXROb2RlID0gJHBvcy5wYXJlbnQ7XG4gICAgICAgICAgICB0YXJnZXRQb3MgPSAkcG9zLmRlcHRoID8gJHBvcy5iZWZvcmUoKSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZmx1c2hlZCA/IG51bGwgOiBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHRhcmdldERlc2MgPSB0YXJnZXQgPyB2aWV3LmRvY1ZpZXcubmVhcmVzdERlc2ModGFyZ2V0LCB0cnVlKSA6IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0RGVzYyA/IHRhcmdldERlc2MuZG9tIDogbnVsbDtcbiAgICAgICAgbGV0IHsgc2VsZWN0aW9uIH0gPSB2aWV3LnN0YXRlO1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09IDAgJiZcbiAgICAgICAgICAgIHRhcmdldE5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZSAmJiB0YXJnZXROb2RlLnR5cGUuc3BlYy5zZWxlY3RhYmxlICE9PSBmYWxzZSB8fFxuICAgICAgICAgICAgc2VsZWN0aW9uIGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbiAmJiBzZWxlY3Rpb24uZnJvbSA8PSB0YXJnZXRQb3MgJiYgc2VsZWN0aW9uLnRvID4gdGFyZ2V0UG9zKVxuICAgICAgICAgICAgdGhpcy5taWdodERyYWcgPSB7XG4gICAgICAgICAgICAgICAgbm9kZTogdGFyZ2V0Tm9kZSxcbiAgICAgICAgICAgICAgICBwb3M6IHRhcmdldFBvcyxcbiAgICAgICAgICAgICAgICBhZGRBdHRyOiAhISh0aGlzLnRhcmdldCAmJiAhdGhpcy50YXJnZXQuZHJhZ2dhYmxlKSxcbiAgICAgICAgICAgICAgICBzZXRVbmVkaXRhYmxlOiAhISh0aGlzLnRhcmdldCAmJiBnZWNrbyAmJiAhdGhpcy50YXJnZXQuaGFzQXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0ICYmIHRoaXMubWlnaHREcmFnICYmICh0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyIHx8IHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUpKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWlnaHREcmFnLmFkZEF0dHIpXG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3LmlucHV0Lm1vdXNlRG93biA9PSB0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuc2V0QXR0cmlidXRlKFwiY29udGVudEVkaXRhYmxlXCIsIFwiZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgfSwgMjApO1xuICAgICAgICAgICAgdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5yb290LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXAgPSB0aGlzLnVwLmJpbmQodGhpcykpO1xuICAgICAgICB2aWV3LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdmUgPSB0aGlzLm1vdmUuYmluZCh0aGlzKSk7XG4gICAgICAgIHNldFNlbGVjdGlvbk9yaWdpbih2aWV3LCBcInBvaW50ZXJcIik7XG4gICAgfVxuICAgIGRvbmUoKSB7XG4gICAgICAgIHRoaXMudmlldy5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMudXApO1xuICAgICAgICB0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW92ZSk7XG4gICAgICAgIGlmICh0aGlzLm1pZ2h0RHJhZyAmJiB0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyKVxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRyYWdnYWJsZVwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlKVxuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImNvbnRlbnRFZGl0YWJsZVwiKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlbGF5ZWRTZWxlY3Rpb25TeW5jKVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzZWxlY3Rpb25Ub0RPTSh0aGlzLnZpZXcpKTtcbiAgICAgICAgdGhpcy52aWV3LmlucHV0Lm1vdXNlRG93biA9IG51bGw7XG4gICAgfVxuICAgIHVwKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZG9uZSgpO1xuICAgICAgICBpZiAoIXRoaXMudmlldy5kb20uY29udGFpbnMoZXZlbnQudGFyZ2V0KSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMucG9zO1xuICAgICAgICBpZiAodGhpcy52aWV3LnN0YXRlLmRvYyAhPSB0aGlzLnN0YXJ0RG9jKVxuICAgICAgICAgICAgcG9zID0gdGhpcy52aWV3LnBvc0F0Q29vcmRzKGV2ZW50Q29vcmRzKGV2ZW50KSk7XG4gICAgICAgIHRoaXMudXBkYXRlQWxsb3dEZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dEZWZhdWx0IHx8ICFwb3MpIHtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbk9yaWdpbih0aGlzLnZpZXcsIFwicG9pbnRlclwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChoYW5kbGVTaW5nbGVDbGljayh0aGlzLnZpZXcsIHBvcy5wb3MsIHBvcy5pbnNpZGUsIGV2ZW50LCB0aGlzLnNlbGVjdE5vZGUpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PSAwICYmXG4gICAgICAgICAgICAodGhpcy5mbHVzaGVkIHx8XG4gICAgICAgICAgICAgICAgLy8gU2FmYXJpIGlnbm9yZXMgY2xpY2tzIG9uIGRyYWdnYWJsZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIChzYWZhcmkgJiYgdGhpcy5taWdodERyYWcgJiYgIXRoaXMubWlnaHREcmFnLm5vZGUuaXNBdG9tKSB8fFxuICAgICAgICAgICAgICAgIC8vIENocm9tZSB3aWxsIHNvbWV0aW1lcyB0cmVhdCBhIG5vZGUgc2VsZWN0aW9uIGFzIGFcbiAgICAgICAgICAgICAgICAvLyBjdXJzb3IsIGJ1dCBzdGlsbCByZXBvcnQgdGhhdCB0aGUgbm9kZSBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIC8vIHdoZW4gYXNrZWQgdGhyb3VnaCBnZXRTZWxlY3Rpb24uIFlvdSdsbCB0aGVuIGdldCBhXG4gICAgICAgICAgICAgICAgLy8gc2l0dWF0aW9uIHdoZXJlIGNsaWNraW5nIGF0IHRoZSBwb2ludCB3aGVyZSB0aGF0XG4gICAgICAgICAgICAgICAgLy8gKGhpZGRlbikgY3Vyc29yIGlzIGRvZXNuJ3QgY2hhbmdlIHRoZSBzZWxlY3Rpb24sIGFuZFxuICAgICAgICAgICAgICAgIC8vIHRodXMgZG9lc24ndCBnZXQgYSByZWFjdGlvbiBmcm9tIFByb3NlTWlycm9yLiBUaGlzXG4gICAgICAgICAgICAgICAgLy8gd29ya3MgYXJvdW5kIHRoYXQuXG4gICAgICAgICAgICAgICAgKGNocm9tZSAmJiAhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi52aXNpYmxlICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWluKE1hdGguYWJzKHBvcy5wb3MgLSB0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLmZyb20pLCBNYXRoLmFicyhwb3MucG9zIC0gdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50bykpIDw9IDIpKSkge1xuICAgICAgICAgICAgdXBkYXRlU2VsZWN0aW9uKHRoaXMudmlldywgU2VsZWN0aW9uLm5lYXIodGhpcy52aWV3LnN0YXRlLmRvYy5yZXNvbHZlKHBvcy5wb3MpKSwgXCJwb2ludGVyXCIpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFNlbGVjdGlvbk9yaWdpbih0aGlzLnZpZXcsIFwicG9pbnRlclwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3ZlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlQWxsb3dEZWZhdWx0KGV2ZW50KTtcbiAgICAgICAgc2V0U2VsZWN0aW9uT3JpZ2luKHRoaXMudmlldywgXCJwb2ludGVyXCIpO1xuICAgICAgICBpZiAoZXZlbnQuYnV0dG9ucyA9PSAwKVxuICAgICAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgfVxuICAgIHVwZGF0ZUFsbG93RGVmYXVsdChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuYWxsb3dEZWZhdWx0ICYmIChNYXRoLmFicyh0aGlzLmV2ZW50LnggLSBldmVudC5jbGllbnRYKSA+IDQgfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHRoaXMuZXZlbnQueSAtIGV2ZW50LmNsaWVudFkpID4gNCkpXG4gICAgICAgICAgICB0aGlzLmFsbG93RGVmYXVsdCA9IHRydWU7XG4gICAgfVxufVxuaGFuZGxlcnMudG91Y2hzdGFydCA9IHZpZXcgPT4ge1xuICAgIHZpZXcuaW5wdXQubGFzdFRvdWNoID0gRGF0ZS5ub3coKTtcbiAgICBmb3JjZURPTUZsdXNoKHZpZXcpO1xuICAgIHNldFNlbGVjdGlvbk9yaWdpbih2aWV3LCBcInBvaW50ZXJcIik7XG59O1xuaGFuZGxlcnMudG91Y2htb3ZlID0gdmlldyA9PiB7XG4gICAgdmlldy5pbnB1dC5sYXN0VG91Y2ggPSBEYXRlLm5vdygpO1xuICAgIHNldFNlbGVjdGlvbk9yaWdpbih2aWV3LCBcInBvaW50ZXJcIik7XG59O1xuaGFuZGxlcnMuY29udGV4dG1lbnUgPSB2aWV3ID0+IGZvcmNlRE9NRmx1c2godmlldyk7XG5mdW5jdGlvbiBpbk9yTmVhckNvbXBvc2l0aW9uKHZpZXcsIGV2ZW50KSB7XG4gICAgaWYgKHZpZXcuY29tcG9zaW5nKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBTZWUgaHR0cHM6Ly93d3cuc3R1bS5kZS8yMDE2LzA2LzI0L2hhbmRsaW5nLWltZS1ldmVudHMtaW4tamF2YXNjcmlwdC8uXG4gICAgLy8gT24gSmFwYW5lc2UgaW5wdXQgbWV0aG9kIGVkaXRvcnMgKElNRXMpLCB0aGUgRW50ZXIga2V5IGlzIHVzZWQgdG8gY29uZmlybSBjaGFyYWN0ZXJcbiAgICAvLyBzZWxlY3Rpb24uIE9uIFNhZmFyaSwgd2hlbiBFbnRlciBpcyBwcmVzc2VkLCBjb21wb3NpdGlvbmVuZCBhbmQga2V5ZG93biBldmVudHMgYXJlXG4gICAgLy8gZW1pdHRlZC4gVGhlIGtleWRvd24gZXZlbnQgdHJpZ2dlcnMgbmV3bGluZSBpbnNlcnRpb24sIHdoaWNoIHdlIGRvbid0IHdhbnQuXG4gICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyB0cnVlIGlmIHRoZSBrZXlkb3duIGV2ZW50IHNob3VsZCBiZSBpZ25vcmVkLlxuICAgIC8vIFdlIG9ubHkgaWdub3JlIGl0IG9uY2UsIGFzIHByZXNzaW5nIEVudGVyIGEgc2Vjb25kIHRpbWUgKnNob3VsZCogaW5zZXJ0IGEgbmV3bGluZS5cbiAgICAvLyBGdXJ0aGVybW9yZSwgdGhlIGtleWRvd24gZXZlbnQgdGltZXN0YW1wIG11c3QgYmUgY2xvc2UgdG8gdGhlIGNvbXBvc2l0aW9uRW5kZWRBdCB0aW1lc3RhbXAuXG4gICAgLy8gVGhpcyBndWFyZHMgYWdhaW5zdCB0aGUgY2FzZSB3aGVyZSBjb21wb3NpdGlvbmVuZCBpcyB0cmlnZ2VyZWQgd2l0aG91dCB0aGUga2V5Ym9hcmRcbiAgICAvLyAoZS5nLiBjaGFyYWN0ZXIgY29uZmlybWF0aW9uIG1heSBiZSBkb25lIHdpdGggdGhlIG1vdXNlKSwgYW5kIGtleWRvd24gaXMgdHJpZ2dlcmVkXG4gICAgLy8gYWZ0ZXJ3YXJkcy0gd2Ugd291bGRuJ3Qgd2FudCB0byBpZ25vcmUgdGhlIGtleWRvd24gZXZlbnQgaW4gdGhpcyBjYXNlLlxuICAgIGlmIChzYWZhcmkgJiYgTWF0aC5hYnMoZXZlbnQudGltZVN0YW1wIC0gdmlldy5pbnB1dC5jb21wb3NpdGlvbkVuZGVkQXQpIDwgNTAwKSB7XG4gICAgICAgIHZpZXcuaW5wdXQuY29tcG9zaXRpb25FbmRlZEF0ID0gLTJlODtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIERyb3AgYWN0aXZlIGNvbXBvc2l0aW9uIGFmdGVyIDUgc2Vjb25kcyBvZiBpbmFjdGl2aXR5IG9uIEFuZHJvaWRcbmNvbnN0IHRpbWVvdXRDb21wb3NpdGlvbiA9IGFuZHJvaWQgPyA1MDAwIDogLTE7XG5lZGl0SGFuZGxlcnMuY29tcG9zaXRpb25zdGFydCA9IGVkaXRIYW5kbGVycy5jb21wb3NpdGlvbnVwZGF0ZSA9IHZpZXcgPT4ge1xuICAgIGlmICghdmlldy5jb21wb3NpbmcpIHtcbiAgICAgICAgdmlldy5kb21PYnNlcnZlci5mbHVzaCgpO1xuICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gdmlldywgJHBvcyA9IHN0YXRlLnNlbGVjdGlvbi4kZnJvbTtcbiAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGlvbi5lbXB0eSAmJlxuICAgICAgICAgICAgKHN0YXRlLnN0b3JlZE1hcmtzIHx8XG4gICAgICAgICAgICAgICAgKCEkcG9zLnRleHRPZmZzZXQgJiYgJHBvcy5wYXJlbnRPZmZzZXQgJiYgJHBvcy5ub2RlQmVmb3JlLm1hcmtzLnNvbWUobSA9PiBtLnR5cGUuc3BlYy5pbmNsdXNpdmUgPT09IGZhbHNlKSkpKSB7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIHdyYXAgdGhlIGN1cnNvciBpbiBtYXJrIG5vZGVzIGRpZmZlcmVudCBmcm9tIHRoZSBvbmVzIGluIHRoZSBET00gY29udGV4dFxuICAgICAgICAgICAgdmlldy5tYXJrQ3Vyc29yID0gdmlldy5zdGF0ZS5zdG9yZWRNYXJrcyB8fCAkcG9zLm1hcmtzKCk7XG4gICAgICAgICAgICBlbmRDb21wb3NpdGlvbih2aWV3LCB0cnVlKTtcbiAgICAgICAgICAgIHZpZXcubWFya0N1cnNvciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmRDb21wb3NpdGlvbih2aWV3KTtcbiAgICAgICAgICAgIC8vIEluIGZpcmVmb3gsIGlmIHRoZSBjdXJzb3IgaXMgYWZ0ZXIgYnV0IG91dHNpZGUgYSBtYXJrZWQgbm9kZSxcbiAgICAgICAgICAgIC8vIHRoZSBpbnNlcnRlZCB0ZXh0IHdvbid0IGluaGVyaXQgdGhlIG1hcmtzLiBTbyB0aGlzIG1vdmVzIGl0XG4gICAgICAgICAgICAvLyBpbnNpZGUgaWYgbmVjZXNzYXJ5LlxuICAgICAgICAgICAgaWYgKGdlY2tvICYmIHN0YXRlLnNlbGVjdGlvbi5lbXB0eSAmJiAkcG9zLnBhcmVudE9mZnNldCAmJiAhJHBvcy50ZXh0T2Zmc2V0ICYmICRwb3Mubm9kZUJlZm9yZS5tYXJrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsZXQgc2VsID0gdmlldy5kb21TZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IG5vZGUgPSBzZWwuZm9jdXNOb2RlLCBvZmZzZXQgPSBzZWwuZm9jdXNPZmZzZXQ7IG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PSAxICYmIG9mZnNldCAhPSAwOykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmVmb3JlID0gb2Zmc2V0IDwgMCA/IG5vZGUubGFzdENoaWxkIDogbm9kZS5jaGlsZE5vZGVzW29mZnNldCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJlZm9yZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmVmb3JlLm5vZGVUeXBlID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZG9tU2VsZWN0aW9uKCkuY29sbGFwc2UoYmVmb3JlLCBiZWZvcmUubm9kZVZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBiZWZvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2luZyA9IHRydWU7XG4gICAgfVxuICAgIHNjaGVkdWxlQ29tcG9zZUVuZCh2aWV3LCB0aW1lb3V0Q29tcG9zaXRpb24pO1xufTtcbmVkaXRIYW5kbGVycy5jb21wb3NpdGlvbmVuZCA9ICh2aWV3LCBldmVudCkgPT4ge1xuICAgIGlmICh2aWV3LmNvbXBvc2luZykge1xuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2l0aW9uRW5kZWRBdCA9IGV2ZW50LnRpbWVTdGFtcDtcbiAgICAgICAgdmlldy5pbnB1dC5jb21wb3NpdGlvbklEKys7XG4gICAgICAgIHNjaGVkdWxlQ29tcG9zZUVuZCh2aWV3LCAyMCk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIHNjaGVkdWxlQ29tcG9zZUVuZCh2aWV3LCBkZWxheSkge1xuICAgIGNsZWFyVGltZW91dCh2aWV3LmlucHV0LmNvbXBvc2luZ1RpbWVvdXQpO1xuICAgIGlmIChkZWxheSA+IC0xKVxuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2luZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IGVuZENvbXBvc2l0aW9uKHZpZXcpLCBkZWxheSk7XG59XG5mdW5jdGlvbiBjbGVhckNvbXBvc2l0aW9uKHZpZXcpIHtcbiAgICBpZiAodmlldy5jb21wb3NpbmcpIHtcbiAgICAgICAgdmlldy5pbnB1dC5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdmlldy5pbnB1dC5jb21wb3NpdGlvbkVuZGVkQXQgPSB0aW1lc3RhbXBGcm9tQ3VzdG9tRXZlbnQoKTtcbiAgICB9XG4gICAgd2hpbGUgKHZpZXcuaW5wdXQuY29tcG9zaXRpb25Ob2Rlcy5sZW5ndGggPiAwKVxuICAgICAgICB2aWV3LmlucHV0LmNvbXBvc2l0aW9uTm9kZXMucG9wKCkubWFya1BhcmVudHNEaXJ0eSgpO1xufVxuZnVuY3Rpb24gdGltZXN0YW1wRnJvbUN1c3RvbUV2ZW50KCkge1xuICAgIGxldCBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgZXZlbnQuaW5pdEV2ZW50KFwiZXZlbnRcIiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIGV2ZW50LnRpbWVTdGFtcDtcbn1cbi8qKlxuQGludGVybmFsXG4qL1xuZnVuY3Rpb24gZW5kQ29tcG9zaXRpb24odmlldywgZm9yY2VVcGRhdGUgPSBmYWxzZSkge1xuICAgIGlmIChhbmRyb2lkICYmIHZpZXcuZG9tT2JzZXJ2ZXIuZmx1c2hpbmdTb29uID49IDApXG4gICAgICAgIHJldHVybjtcbiAgICB2aWV3LmRvbU9ic2VydmVyLmZvcmNlRmx1c2goKTtcbiAgICBjbGVhckNvbXBvc2l0aW9uKHZpZXcpO1xuICAgIGlmIChmb3JjZVVwZGF0ZSB8fCB2aWV3LmRvY1ZpZXcgJiYgdmlldy5kb2NWaWV3LmRpcnR5KSB7XG4gICAgICAgIGxldCBzZWwgPSBzZWxlY3Rpb25Gcm9tRE9NKHZpZXcpO1xuICAgICAgICBpZiAoc2VsICYmICFzZWwuZXEodmlldy5zdGF0ZS5zZWxlY3Rpb24pKVxuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh2aWV3LnN0YXRlLnRyLnNldFNlbGVjdGlvbihzZWwpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdmlldy51cGRhdGVTdGF0ZSh2aWV3LnN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGNhcHR1cmVDb3B5KHZpZXcsIGRvbSkge1xuICAgIC8vIFRoZSBleHRyYSB3cmFwcGVyIGlzIHNvbWVob3cgbmVjZXNzYXJ5IG9uIElFL0VkZ2UgdG8gcHJldmVudCB0aGVcbiAgICAvLyBjb250ZW50IGZyb20gYmVpbmcgbWFuZ2xlZCB3aGVuIGl0IGlzIHB1dCBvbnRvIHRoZSBjbGlwYm9hcmRcbiAgICBpZiAoIXZpZXcuZG9tLnBhcmVudE5vZGUpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgd3JhcCA9IHZpZXcuZG9tLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7XG4gICAgd3JhcC5hcHBlbmRDaGlsZChkb20pO1xuICAgIHdyYXAuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4XCI7XG4gICAgbGV0IHNlbCA9IGdldFNlbGVjdGlvbigpLCByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKGRvbSk7XG4gICAgLy8gRG9uZSBiZWNhdXNlIElFIHdpbGwgZmlyZSBhIHNlbGVjdGlvbmNoYW5nZSBtb3ZpbmcgdGhlIHNlbGVjdGlvblxuICAgIC8vIHRvIGl0cyBzdGFydCB3aGVuIHJlbW92ZUFsbFJhbmdlcyBpcyBjYWxsZWQgYW5kIHRoZSBlZGl0b3Igc3RpbGxcbiAgICAvLyBoYXMgZm9jdXMgKHdoaWNoIHdpbGwgbWVzcyB1cCB0aGUgZWRpdG9yJ3Mgc2VsZWN0aW9uIHN0YXRlKS5cbiAgICB2aWV3LmRvbS5ibHVyKCk7XG4gICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh3cmFwLnBhcmVudE5vZGUpXG4gICAgICAgICAgICB3cmFwLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQod3JhcCk7XG4gICAgICAgIHZpZXcuZm9jdXMoKTtcbiAgICB9LCA1MCk7XG59XG4vLyBUaGlzIGlzIHZlcnkgY3J1ZGUsIGJ1dCB1bmZvcnR1bmF0ZWx5IGJvdGggdGhlc2UgYnJvd3NlcnMgX3ByZXRlbmRfXG4vLyB0aGF0IHRoZXkgaGF2ZSBhIGNsaXBib2FyZCBBUEnigJRhbGwgdGhlIG9iamVjdHMgYW5kIG1ldGhvZHMgYXJlXG4vLyB0aGVyZSwgdGhleSBqdXN0IGRvbid0IHdvcmssIGFuZCB0aGV5IGFyZSBoYXJkIHRvIHRlc3QuXG5jb25zdCBicm9rZW5DbGlwYm9hcmRBUEkgPSAoaWUgJiYgaWVfdmVyc2lvbiA8IDE1KSB8fFxuICAgIChpb3MgJiYgd2Via2l0X3ZlcnNpb24gPCA2MDQpO1xuaGFuZGxlcnMuY29weSA9IGVkaXRIYW5kbGVycy5jdXQgPSAodmlldywgX2V2ZW50KSA9PiB7XG4gICAgbGV0IGV2ZW50ID0gX2V2ZW50O1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbiwgY3V0ID0gZXZlbnQudHlwZSA9PSBcImN1dFwiO1xuICAgIGlmIChzZWwuZW1wdHkpXG4gICAgICAgIHJldHVybjtcbiAgICAvLyBJRSBhbmQgRWRnZSdzIGNsaXBib2FyZCBpbnRlcmZhY2UgaXMgY29tcGxldGVseSBicm9rZW5cbiAgICBsZXQgZGF0YSA9IGJyb2tlbkNsaXBib2FyZEFQSSA/IG51bGwgOiBldmVudC5jbGlwYm9hcmREYXRhO1xuICAgIGxldCBzbGljZSA9IHNlbC5jb250ZW50KCksIHsgZG9tLCB0ZXh0IH0gPSBzZXJpYWxpemVGb3JDbGlwYm9hcmQodmlldywgc2xpY2UpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRhdGEuY2xlYXJEYXRhKCk7XG4gICAgICAgIGRhdGEuc2V0RGF0YShcInRleHQvaHRtbFwiLCBkb20uaW5uZXJIVE1MKTtcbiAgICAgICAgZGF0YS5zZXREYXRhKFwidGV4dC9wbGFpblwiLCB0ZXh0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhcHR1cmVDb3B5KHZpZXcsIGRvbSk7XG4gICAgfVxuICAgIGlmIChjdXQpXG4gICAgICAgIHZpZXcuZGlzcGF0Y2godmlldy5zdGF0ZS50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoXCJ1aUV2ZW50XCIsIFwiY3V0XCIpKTtcbn07XG5mdW5jdGlvbiBzbGljZVNpbmdsZU5vZGUoc2xpY2UpIHtcbiAgICByZXR1cm4gc2xpY2Uub3BlblN0YXJ0ID09IDAgJiYgc2xpY2Uub3BlbkVuZCA9PSAwICYmIHNsaWNlLmNvbnRlbnQuY2hpbGRDb3VudCA9PSAxID8gc2xpY2UuY29udGVudC5maXJzdENoaWxkIDogbnVsbDtcbn1cbmZ1bmN0aW9uIGNhcHR1cmVQYXN0ZSh2aWV3LCBldmVudCkge1xuICAgIGlmICghdmlldy5kb20ucGFyZW50Tm9kZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBwbGFpblRleHQgPSB2aWV3LmlucHV0LnNoaWZ0S2V5IHx8IHZpZXcuc3RhdGUuc2VsZWN0aW9uLiRmcm9tLnBhcmVudC50eXBlLnNwZWMuY29kZTtcbiAgICBsZXQgdGFyZ2V0ID0gdmlldy5kb20ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KHBsYWluVGV4dCA/IFwidGV4dGFyZWFcIiA6IFwiZGl2XCIpKTtcbiAgICBpZiAoIXBsYWluVGV4dClcbiAgICAgICAgdGFyZ2V0LmNvbnRlbnRFZGl0YWJsZSA9IFwidHJ1ZVwiO1xuICAgIHRhcmdldC5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHhcIjtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICBsZXQgcGxhaW4gPSB2aWV3LmlucHV0LnNoaWZ0S2V5ICYmIHZpZXcuaW5wdXQubGFzdEtleUNvZGUgIT0gNDU7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHZpZXcuZm9jdXMoKTtcbiAgICAgICAgaWYgKHRhcmdldC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFyZ2V0KTtcbiAgICAgICAgaWYgKHBsYWluVGV4dClcbiAgICAgICAgICAgIGRvUGFzdGUodmlldywgdGFyZ2V0LnZhbHVlLCBudWxsLCBwbGFpbiwgZXZlbnQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkb1Bhc3RlKHZpZXcsIHRhcmdldC50ZXh0Q29udGVudCwgdGFyZ2V0LmlubmVySFRNTCwgcGxhaW4sIGV2ZW50KTtcbiAgICB9LCA1MCk7XG59XG5mdW5jdGlvbiBkb1Bhc3RlKHZpZXcsIHRleHQsIGh0bWwsIHByZWZlclBsYWluLCBldmVudCkge1xuICAgIGxldCBzbGljZSA9IHBhcnNlRnJvbUNsaXBib2FyZCh2aWV3LCB0ZXh0LCBodG1sLCBwcmVmZXJQbGFpbiwgdmlldy5zdGF0ZS5zZWxlY3Rpb24uJGZyb20pO1xuICAgIGlmICh2aWV3LnNvbWVQcm9wKFwiaGFuZGxlUGFzdGVcIiwgZiA9PiBmKHZpZXcsIGV2ZW50LCBzbGljZSB8fCBTbGljZS5lbXB0eSkpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIXNsaWNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHNpbmdsZU5vZGUgPSBzbGljZVNpbmdsZU5vZGUoc2xpY2UpO1xuICAgIGxldCB0ciA9IHNpbmdsZU5vZGVcbiAgICAgICAgPyB2aWV3LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHNpbmdsZU5vZGUsIHByZWZlclBsYWluKVxuICAgICAgICA6IHZpZXcuc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbihzbGljZSk7XG4gICAgdmlldy5kaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoXCJwYXN0ZVwiLCB0cnVlKS5zZXRNZXRhKFwidWlFdmVudFwiLCBcInBhc3RlXCIpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmVkaXRIYW5kbGVycy5wYXN0ZSA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgLy8gSGFuZGxpbmcgcGFzdGUgZnJvbSBKYXZhU2NyaXB0IGR1cmluZyBjb21wb3NpdGlvbiBpcyB2ZXJ5IHBvb3JseVxuICAgIC8vIGhhbmRsZWQgYnkgYnJvd3NlcnMsIHNvIGFzIGEgZG9kZ3kgYnV0IHByZWZlcmFibGUga2x1ZGdlLCB3ZSBqdXN0XG4gICAgLy8gbGV0IHRoZSBicm93c2VyIGRvIGl0cyBuYXRpdmUgdGhpbmcgdGhlcmUsIGV4Y2VwdCBvbiBBbmRyb2lkLFxuICAgIC8vIHdoZXJlIHRoZSBlZGl0b3IgaXMgYWxtb3N0IGFsd2F5cyBjb21wb3NpbmcuXG4gICAgaWYgKHZpZXcuY29tcG9zaW5nICYmICFhbmRyb2lkKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IGRhdGEgPSBicm9rZW5DbGlwYm9hcmRBUEkgPyBudWxsIDogZXZlbnQuY2xpcGJvYXJkRGF0YTtcbiAgICBsZXQgcGxhaW4gPSB2aWV3LmlucHV0LnNoaWZ0S2V5ICYmIHZpZXcuaW5wdXQubGFzdEtleUNvZGUgIT0gNDU7XG4gICAgaWYgKGRhdGEgJiYgZG9QYXN0ZSh2aWV3LCBkYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpLCBkYXRhLmdldERhdGEoXCJ0ZXh0L2h0bWxcIiksIHBsYWluLCBldmVudCkpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZWxzZVxuICAgICAgICBjYXB0dXJlUGFzdGUodmlldywgZXZlbnQpO1xufTtcbmNsYXNzIERyYWdnaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihzbGljZSwgbW92ZSkge1xuICAgICAgICB0aGlzLnNsaWNlID0gc2xpY2U7XG4gICAgICAgIHRoaXMubW92ZSA9IG1vdmU7XG4gICAgfVxufVxuY29uc3QgZHJhZ0NvcHlNb2RpZmllciA9IG1hYyA/IFwiYWx0S2V5XCIgOiBcImN0cmxLZXlcIjtcbmhhbmRsZXJzLmRyYWdzdGFydCA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgbGV0IG1vdXNlRG93biA9IHZpZXcuaW5wdXQubW91c2VEb3duO1xuICAgIGlmIChtb3VzZURvd24pXG4gICAgICAgIG1vdXNlRG93bi5kb25lKCk7XG4gICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIpXG4gICAgICAgIHJldHVybjtcbiAgICBsZXQgc2VsID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgbGV0IHBvcyA9IHNlbC5lbXB0eSA/IG51bGwgOiB2aWV3LnBvc0F0Q29vcmRzKGV2ZW50Q29vcmRzKGV2ZW50KSk7XG4gICAgaWYgKHBvcyAmJiBwb3MucG9zID49IHNlbC5mcm9tICYmIHBvcy5wb3MgPD0gKHNlbCBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24gPyBzZWwudG8gLSAxIDogc2VsLnRvKSkgO1xuICAgIGVsc2UgaWYgKG1vdXNlRG93biAmJiBtb3VzZURvd24ubWlnaHREcmFnKSB7XG4gICAgICAgIHZpZXcuZGlzcGF0Y2godmlldy5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oTm9kZVNlbGVjdGlvbi5jcmVhdGUodmlldy5zdGF0ZS5kb2MsIG1vdXNlRG93bi5taWdodERyYWcucG9zKSkpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgbGV0IGRlc2MgPSB2aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZXZlbnQudGFyZ2V0LCB0cnVlKTtcbiAgICAgICAgaWYgKGRlc2MgJiYgZGVzYy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGUgJiYgZGVzYyAhPSB2aWV3LmRvY1ZpZXcpXG4gICAgICAgICAgICB2aWV3LmRpc3BhdGNoKHZpZXcuc3RhdGUudHIuc2V0U2VsZWN0aW9uKE5vZGVTZWxlY3Rpb24uY3JlYXRlKHZpZXcuc3RhdGUuZG9jLCBkZXNjLnBvc0JlZm9yZSkpKTtcbiAgICB9XG4gICAgbGV0IHNsaWNlID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24uY29udGVudCgpLCB7IGRvbSwgdGV4dCB9ID0gc2VyaWFsaXplRm9yQ2xpcGJvYXJkKHZpZXcsIHNsaWNlKTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuY2xlYXJEYXRhKCk7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoYnJva2VuQ2xpcGJvYXJkQVBJID8gXCJUZXh0XCIgOiBcInRleHQvaHRtbFwiLCBkb20uaW5uZXJIVE1MKTtcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL1Byb3NlTWlycm9yL3Byb3NlbWlycm9yL2lzc3Vlcy8xMTU2XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSBcImNvcHlNb3ZlXCI7XG4gICAgaWYgKCFicm9rZW5DbGlwYm9hcmRBUEkpXG4gICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9wbGFpblwiLCB0ZXh0KTtcbiAgICB2aWV3LmRyYWdnaW5nID0gbmV3IERyYWdnaW5nKHNsaWNlLCAhZXZlbnRbZHJhZ0NvcHlNb2RpZmllcl0pO1xufTtcbmhhbmRsZXJzLmRyYWdlbmQgPSB2aWV3ID0+IHtcbiAgICBsZXQgZHJhZ2dpbmcgPSB2aWV3LmRyYWdnaW5nO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHZpZXcuZHJhZ2dpbmcgPT0gZHJhZ2dpbmcpXG4gICAgICAgICAgICB2aWV3LmRyYWdnaW5nID0gbnVsbDtcbiAgICB9LCA1MCk7XG59O1xuZWRpdEhhbmRsZXJzLmRyYWdvdmVyID0gZWRpdEhhbmRsZXJzLmRyYWdlbnRlciA9IChfLCBlKSA9PiBlLnByZXZlbnREZWZhdWx0KCk7XG5lZGl0SGFuZGxlcnMuZHJvcCA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgbGV0IGRyYWdnaW5nID0gdmlldy5kcmFnZ2luZztcbiAgICB2aWV3LmRyYWdnaW5nID0gbnVsbDtcbiAgICBpZiAoIWV2ZW50LmRhdGFUcmFuc2ZlcilcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBldmVudFBvcyA9IHZpZXcucG9zQXRDb29yZHMoZXZlbnRDb29yZHMoZXZlbnQpKTtcbiAgICBpZiAoIWV2ZW50UG9zKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0ICRtb3VzZSA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZXZlbnRQb3MucG9zKTtcbiAgICBsZXQgc2xpY2UgPSBkcmFnZ2luZyAmJiBkcmFnZ2luZy5zbGljZTtcbiAgICBpZiAoc2xpY2UpIHtcbiAgICAgICAgdmlldy5zb21lUHJvcChcInRyYW5zZm9ybVBhc3RlZFwiLCBmID0+IHsgc2xpY2UgPSBmKHNsaWNlLCB2aWV3KTsgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzbGljZSA9IHBhcnNlRnJvbUNsaXBib2FyZCh2aWV3LCBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShicm9rZW5DbGlwYm9hcmRBUEkgPyBcIlRleHRcIiA6IFwidGV4dC9wbGFpblwiKSwgYnJva2VuQ2xpcGJvYXJkQVBJID8gbnVsbCA6IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC9odG1sXCIpLCBmYWxzZSwgJG1vdXNlKTtcbiAgICB9XG4gICAgbGV0IG1vdmUgPSAhIShkcmFnZ2luZyAmJiAhZXZlbnRbZHJhZ0NvcHlNb2RpZmllcl0pO1xuICAgIGlmICh2aWV3LnNvbWVQcm9wKFwiaGFuZGxlRHJvcFwiLCBmID0+IGYodmlldywgZXZlbnQsIHNsaWNlIHx8IFNsaWNlLmVtcHR5LCBtb3ZlKSkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXNsaWNlKVxuICAgICAgICByZXR1cm47XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgaW5zZXJ0UG9zID0gc2xpY2UgPyBkcm9wUG9pbnQodmlldy5zdGF0ZS5kb2MsICRtb3VzZS5wb3MsIHNsaWNlKSA6ICRtb3VzZS5wb3M7XG4gICAgaWYgKGluc2VydFBvcyA9PSBudWxsKVxuICAgICAgICBpbnNlcnRQb3MgPSAkbW91c2UucG9zO1xuICAgIGxldCB0ciA9IHZpZXcuc3RhdGUudHI7XG4gICAgaWYgKG1vdmUpXG4gICAgICAgIHRyLmRlbGV0ZVNlbGVjdGlvbigpO1xuICAgIGxldCBwb3MgPSB0ci5tYXBwaW5nLm1hcChpbnNlcnRQb3MpO1xuICAgIGxldCBpc05vZGUgPSBzbGljZS5vcGVuU3RhcnQgPT0gMCAmJiBzbGljZS5vcGVuRW5kID09IDAgJiYgc2xpY2UuY29udGVudC5jaGlsZENvdW50ID09IDE7XG4gICAgbGV0IGJlZm9yZUluc2VydCA9IHRyLmRvYztcbiAgICBpZiAoaXNOb2RlKVxuICAgICAgICB0ci5yZXBsYWNlUmFuZ2VXaXRoKHBvcywgcG9zLCBzbGljZS5jb250ZW50LmZpcnN0Q2hpbGQpO1xuICAgIGVsc2VcbiAgICAgICAgdHIucmVwbGFjZVJhbmdlKHBvcywgcG9zLCBzbGljZSk7XG4gICAgaWYgKHRyLmRvYy5lcShiZWZvcmVJbnNlcnQpKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0ICRwb3MgPSB0ci5kb2MucmVzb2x2ZShwb3MpO1xuICAgIGlmIChpc05vZGUgJiYgTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoc2xpY2UuY29udGVudC5maXJzdENoaWxkKSAmJlxuICAgICAgICAkcG9zLm5vZGVBZnRlciAmJiAkcG9zLm5vZGVBZnRlci5zYW1lTWFya3VwKHNsaWNlLmNvbnRlbnQuZmlyc3RDaGlsZCkpIHtcbiAgICAgICAgdHIuc2V0U2VsZWN0aW9uKG5ldyBOb2RlU2VsZWN0aW9uKCRwb3MpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBlbmQgPSB0ci5tYXBwaW5nLm1hcChpbnNlcnRQb3MpO1xuICAgICAgICB0ci5tYXBwaW5nLm1hcHNbdHIubWFwcGluZy5tYXBzLmxlbmd0aCAtIDFdLmZvckVhY2goKF9mcm9tLCBfdG8sIF9uZXdGcm9tLCBuZXdUbykgPT4gZW5kID0gbmV3VG8pO1xuICAgICAgICB0ci5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uQmV0d2Vlbih2aWV3LCAkcG9zLCB0ci5kb2MucmVzb2x2ZShlbmQpKSk7XG4gICAgfVxuICAgIHZpZXcuZm9jdXMoKTtcbiAgICB2aWV3LmRpc3BhdGNoKHRyLnNldE1ldGEoXCJ1aUV2ZW50XCIsIFwiZHJvcFwiKSk7XG59O1xuaGFuZGxlcnMuZm9jdXMgPSB2aWV3ID0+IHtcbiAgICB2aWV3LmlucHV0Lmxhc3RGb2N1cyA9IERhdGUubm93KCk7XG4gICAgaWYgKCF2aWV3LmZvY3VzZWQpIHtcbiAgICAgICAgdmlldy5kb21PYnNlcnZlci5zdG9wKCk7XG4gICAgICAgIHZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJQcm9zZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgICAgICB2aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIHZpZXcuZm9jdXNlZCA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZXcuZG9jVmlldyAmJiB2aWV3Lmhhc0ZvY3VzKCkgJiYgIXZpZXcuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh2aWV3LmRvbVNlbGVjdGlvblJhbmdlKCkpKVxuICAgICAgICAgICAgICAgIHNlbGVjdGlvblRvRE9NKHZpZXcpO1xuICAgICAgICB9LCAyMCk7XG4gICAgfVxufTtcbmhhbmRsZXJzLmJsdXIgPSAodmlldywgX2V2ZW50KSA9PiB7XG4gICAgbGV0IGV2ZW50ID0gX2V2ZW50O1xuICAgIGlmICh2aWV3LmZvY3VzZWQpIHtcbiAgICAgICAgdmlldy5kb21PYnNlcnZlci5zdG9wKCk7XG4gICAgICAgIHZpZXcuZG9tLmNsYXNzTGlzdC5yZW1vdmUoXCJQcm9zZU1pcnJvci1mb2N1c2VkXCIpO1xuICAgICAgICB2aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIGlmIChldmVudC5yZWxhdGVkVGFyZ2V0ICYmIHZpZXcuZG9tLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKVxuICAgICAgICAgICAgdmlldy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmNsZWFyKCk7XG4gICAgICAgIHZpZXcuZm9jdXNlZCA9IGZhbHNlO1xuICAgIH1cbn07XG5oYW5kbGVycy5iZWZvcmVpbnB1dCA9ICh2aWV3LCBfZXZlbnQpID0+IHtcbiAgICBsZXQgZXZlbnQgPSBfZXZlbnQ7XG4gICAgLy8gV2Ugc2hvdWxkIHByb2JhYmx5IGRvIG1vcmUgd2l0aCBiZWZvcmVpbnB1dCBldmVudHMsIGJ1dCBzdXBwb3J0XG4gICAgLy8gaXMgc28gc3BvdHR5IHRoYXQgSSdtIHN0aWxsIHdhaXRpbmcgdG8gc2VlIHdoZXJlIHRoZXkgYXJlIGdvaW5nLlxuICAgIC8vIFZlcnkgc3BlY2lmaWMgaGFjayB0byBkZWFsIHdpdGggYmFja3NwYWNlIHNvbWV0aW1lcyBmYWlsaW5nIG9uXG4gICAgLy8gQ2hyb21lIEFuZHJvaWQgd2hlbiBhZnRlciBhbiB1bmVkaXRhYmxlIG5vZGUuXG4gICAgaWYgKGNocm9tZSAmJiBhbmRyb2lkICYmIGV2ZW50LmlucHV0VHlwZSA9PSBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiKSB7XG4gICAgICAgIHZpZXcuZG9tT2JzZXJ2ZXIuZmx1c2hTb29uKCk7XG4gICAgICAgIGxldCB7IGRvbUNoYW5nZUNvdW50IH0gPSB2aWV3LmlucHV0O1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh2aWV3LmlucHV0LmRvbUNoYW5nZUNvdW50ICE9IGRvbUNoYW5nZUNvdW50KVxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRXZlbnQgYWxyZWFkeSBoYWQgc29tZSBlZmZlY3RcbiAgICAgICAgICAgIC8vIFRoaXMgYnVnIHRlbmRzIHRvIGNsb3NlIHRoZSB2aXJ0dWFsIGtleWJvYXJkLCBzbyB3ZSByZWZvY3VzXG4gICAgICAgICAgICB2aWV3LmRvbS5ibHVyKCk7XG4gICAgICAgICAgICB2aWV3LmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAodmlldy5zb21lUHJvcChcImhhbmRsZUtleURvd25cIiwgZiA9PiBmKHZpZXcsIGtleUV2ZW50KDgsIFwiQmFja3NwYWNlXCIpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHsgJGN1cnNvciB9ID0gdmlldy5zdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgICAgICAvLyBDcnVkZSBhcHByb3hpbWF0aW9uIG9mIGJhY2tzcGFjZSBiZWhhdmlvciB3aGVuIG5vIGNvbW1hbmQgaGFuZGxlZCBpdFxuICAgICAgICAgICAgaWYgKCRjdXJzb3IgJiYgJGN1cnNvci5wb3MgPiAwKVxuICAgICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2godmlldy5zdGF0ZS50ci5kZWxldGUoJGN1cnNvci5wb3MgLSAxLCAkY3Vyc29yLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9XG59O1xuLy8gTWFrZSBzdXJlIGFsbCBoYW5kbGVycyBnZXQgcmVnaXN0ZXJlZFxuZm9yIChsZXQgcHJvcCBpbiBlZGl0SGFuZGxlcnMpXG4gICAgaGFuZGxlcnNbcHJvcF0gPSBlZGl0SGFuZGxlcnNbcHJvcF07XG5cbmZ1bmN0aW9uIGNvbXBhcmVPYmpzKGEsIGIpIHtcbiAgICBpZiAoYSA9PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGxldCBwIGluIGEpXG4gICAgICAgIGlmIChhW3BdICE9PSBiW3BdKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IHAgaW4gYilcbiAgICAgICAgaWYgKCEocCBpbiBhKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNsYXNzIFdpZGdldFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKHRvRE9NLCBzcGVjKSB7XG4gICAgICAgIHRoaXMudG9ET00gPSB0b0RPTTtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYyB8fCBub1NwZWM7XG4gICAgICAgIHRoaXMuc2lkZSA9IHRoaXMuc3BlYy5zaWRlIHx8IDA7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nLCBzcGFuLCBvZmZzZXQsIG9sZE9mZnNldCkge1xuICAgICAgICBsZXQgeyBwb3MsIGRlbGV0ZWQgfSA9IG1hcHBpbmcubWFwUmVzdWx0KHNwYW4uZnJvbSArIG9sZE9mZnNldCwgdGhpcy5zaWRlIDwgMCA/IC0xIDogMSk7XG4gICAgICAgIHJldHVybiBkZWxldGVkID8gbnVsbCA6IG5ldyBEZWNvcmF0aW9uKHBvcyAtIG9mZnNldCwgcG9zIC0gb2Zmc2V0LCB0aGlzKTtcbiAgICB9XG4gICAgdmFsaWQoKSB7IHJldHVybiB0cnVlOyB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIFdpZGdldFR5cGUgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5zcGVjLmtleSAmJiB0aGlzLnNwZWMua2V5ID09IG90aGVyLnNwZWMua2V5IHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9ET00gPT0gb3RoZXIudG9ET00gJiYgY29tcGFyZU9ianModGhpcy5zcGVjLCBvdGhlci5zcGVjKSkpO1xuICAgIH1cbiAgICBkZXN0cm95KG5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3BlYy5kZXN0cm95KVxuICAgICAgICAgICAgdGhpcy5zcGVjLmRlc3Ryb3kobm9kZSk7XG4gICAgfVxufVxuY2xhc3MgSW5saW5lVHlwZSB7XG4gICAgY29uc3RydWN0b3IoYXR0cnMsIHNwZWMpIHtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjIHx8IG5vU3BlYztcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcsIHNwYW4sIG9mZnNldCwgb2xkT2Zmc2V0KSB7XG4gICAgICAgIGxldCBmcm9tID0gbWFwcGluZy5tYXAoc3Bhbi5mcm9tICsgb2xkT2Zmc2V0LCB0aGlzLnNwZWMuaW5jbHVzaXZlU3RhcnQgPyAtMSA6IDEpIC0gb2Zmc2V0O1xuICAgICAgICBsZXQgdG8gPSBtYXBwaW5nLm1hcChzcGFuLnRvICsgb2xkT2Zmc2V0LCB0aGlzLnNwZWMuaW5jbHVzaXZlRW5kID8gMSA6IC0xKSAtIG9mZnNldDtcbiAgICAgICAgcmV0dXJuIGZyb20gPj0gdG8gPyBudWxsIDogbmV3IERlY29yYXRpb24oZnJvbSwgdG8sIHRoaXMpO1xuICAgIH1cbiAgICB2YWxpZChfLCBzcGFuKSB7IHJldHVybiBzcGFuLmZyb20gPCBzcGFuLnRvOyB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHxcbiAgICAgICAgICAgIChvdGhlciBpbnN0YW5jZW9mIElubGluZVR5cGUgJiYgY29tcGFyZU9ianModGhpcy5hdHRycywgb3RoZXIuYXR0cnMpICYmXG4gICAgICAgICAgICAgICAgY29tcGFyZU9ianModGhpcy5zcGVjLCBvdGhlci5zcGVjKSk7XG4gICAgfVxuICAgIHN0YXRpYyBpcyhzcGFuKSB7IHJldHVybiBzcGFuLnR5cGUgaW5zdGFuY2VvZiBJbmxpbmVUeXBlOyB9XG4gICAgZGVzdHJveSgpIHsgfVxufVxuY2xhc3MgTm9kZVR5cGUge1xuICAgIGNvbnN0cnVjdG9yKGF0dHJzLCBzcGVjKSB7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYyB8fCBub1NwZWM7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nLCBzcGFuLCBvZmZzZXQsIG9sZE9mZnNldCkge1xuICAgICAgICBsZXQgZnJvbSA9IG1hcHBpbmcubWFwUmVzdWx0KHNwYW4uZnJvbSArIG9sZE9mZnNldCwgMSk7XG4gICAgICAgIGlmIChmcm9tLmRlbGV0ZWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IHRvID0gbWFwcGluZy5tYXBSZXN1bHQoc3Bhbi50byArIG9sZE9mZnNldCwgLTEpO1xuICAgICAgICBpZiAodG8uZGVsZXRlZCB8fCB0by5wb3MgPD0gZnJvbS5wb3MpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWNvcmF0aW9uKGZyb20ucG9zIC0gb2Zmc2V0LCB0by5wb3MgLSBvZmZzZXQsIHRoaXMpO1xuICAgIH1cbiAgICB2YWxpZChub2RlLCBzcGFuKSB7XG4gICAgICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IG5vZGUuY29udGVudC5maW5kSW5kZXgoc3Bhbi5mcm9tKSwgY2hpbGQ7XG4gICAgICAgIHJldHVybiBvZmZzZXQgPT0gc3Bhbi5mcm9tICYmICEoY2hpbGQgPSBub2RlLmNoaWxkKGluZGV4KSkuaXNUZXh0ICYmIG9mZnNldCArIGNoaWxkLm5vZGVTaXplID09IHNwYW4udG87XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzID09IG90aGVyIHx8XG4gICAgICAgICAgICAob3RoZXIgaW5zdGFuY2VvZiBOb2RlVHlwZSAmJiBjb21wYXJlT2Jqcyh0aGlzLmF0dHJzLCBvdGhlci5hdHRycykgJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlT2Jqcyh0aGlzLnNwZWMsIG90aGVyLnNwZWMpKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHsgfVxufVxuLyoqXG5EZWNvcmF0aW9uIG9iamVjdHMgY2FuIGJlIHByb3ZpZGVkIHRvIHRoZSB2aWV3IHRocm91Z2ggdGhlXG5bYGRlY29yYXRpb25zYCBwcm9wXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JQcm9wcy5kZWNvcmF0aW9ucykuIFRoZXkgY29tZSBpblxuc2V2ZXJhbCB2YXJpYW50c+KAlHNlZSB0aGUgc3RhdGljIG1lbWJlcnMgb2YgdGhpcyBjbGFzcyBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBEZWNvcmF0aW9uIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgZGVjb3JhdGlvbi5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgcG9zaXRpb24uIFdpbGwgYmUgdGhlIHNhbWUgYXMgYGZyb21gIGZvciBbd2lkZ2V0XG4gICAgZGVjb3JhdGlvbnNdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3LkRlY29yYXRpb25ed2lkZ2V0KS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHR5cGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvcHkoZnJvbSwgdG8pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWNvcmF0aW9uKGZyb20sIHRvLCB0aGlzLnR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGVxKG90aGVyLCBvZmZzZXQgPSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUuZXEob3RoZXIudHlwZSkgJiYgdGhpcy5mcm9tICsgb2Zmc2V0ID09IG90aGVyLmZyb20gJiYgdGhpcy50byArIG9mZnNldCA9PSBvdGhlci50bztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXAobWFwcGluZywgb2Zmc2V0LCBvbGRPZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5tYXAobWFwcGluZywgdGhpcywgb2Zmc2V0LCBvbGRPZmZzZXQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGVzIGEgd2lkZ2V0IGRlY29yYXRpb24sIHdoaWNoIGlzIGEgRE9NIG5vZGUgdGhhdCdzIHNob3duIGluXG4gICAgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvbi4gSXQgaXMgcmVjb21tZW5kZWQgdGhhdCB5b3VcbiAgICBkZWxheSByZW5kZXJpbmcgdGhlIHdpZGdldCBieSBwYXNzaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlXG4gICAgY2FsbGVkIHdoZW4gdGhlIHdpZGdldCBpcyBhY3R1YWxseSBkcmF3biBpbiBhIHZpZXcsIGJ1dCB5b3UgY2FuXG4gICAgYWxzbyBkaXJlY3RseSBwYXNzIGEgRE9NIG5vZGUuIGBnZXRQb3NgIGNhbiBiZSB1c2VkIHRvIGZpbmQgdGhlXG4gICAgd2lkZ2V0J3MgY3VycmVudCBkb2N1bWVudCBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHN0YXRpYyB3aWRnZXQocG9zLCB0b0RPTSwgc3BlYykge1xuICAgICAgICByZXR1cm4gbmV3IERlY29yYXRpb24ocG9zLCBwb3MsIG5ldyBXaWRnZXRUeXBlKHRvRE9NLCBzcGVjKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZXMgYW4gaW5saW5lIGRlY29yYXRpb24sIHdoaWNoIGFkZHMgdGhlIGdpdmVuIGF0dHJpYnV0ZXMgdG9cbiAgICBlYWNoIGlubGluZSBub2RlIGJldHdlZW4gYGZyb21gIGFuZCBgdG9gLlxuICAgICovXG4gICAgc3RhdGljIGlubGluZShmcm9tLCB0bywgYXR0cnMsIHNwZWMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWNvcmF0aW9uKGZyb20sIHRvLCBuZXcgSW5saW5lVHlwZShhdHRycywgc3BlYykpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGVzIGEgbm9kZSBkZWNvcmF0aW9uLiBgZnJvbWAgYW5kIGB0b2Agc2hvdWxkIHBvaW50IHByZWNpc2VseVxuICAgIGJlZm9yZSBhbmQgYWZ0ZXIgYSBub2RlIGluIHRoZSBkb2N1bWVudC4gVGhhdCBub2RlLCBhbmQgb25seSB0aGF0XG4gICAgbm9kZSwgd2lsbCByZWNlaXZlIHRoZSBnaXZlbiBhdHRyaWJ1dGVzLlxuICAgICovXG4gICAgc3RhdGljIG5vZGUoZnJvbSwgdG8sIGF0dHJzLCBzcGVjKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVjb3JhdGlvbihmcm9tLCB0bywgbmV3IE5vZGVUeXBlKGF0dHJzLCBzcGVjKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzcGVjIHByb3ZpZGVkIHdoZW4gY3JlYXRpbmcgdGhpcyBkZWNvcmF0aW9uLiBDYW4gYmUgdXNlZnVsXG4gICAgaWYgeW91J3ZlIHN0b3JlZCBleHRyYSBpbmZvcm1hdGlvbiBpbiB0aGF0IG9iamVjdC5cbiAgICAqL1xuICAgIGdldCBzcGVjKCkgeyByZXR1cm4gdGhpcy50eXBlLnNwZWM7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGdldCBpbmxpbmUoKSB7IHJldHVybiB0aGlzLnR5cGUgaW5zdGFuY2VvZiBJbmxpbmVUeXBlOyB9XG59XG5jb25zdCBub25lID0gW10sIG5vU3BlYyA9IHt9O1xuLyoqXG5BIGNvbGxlY3Rpb24gb2YgW2RlY29yYXRpb25zXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5EZWNvcmF0aW9uKSwgb3JnYW5pemVkIGluIHN1Y2hcbmEgd2F5IHRoYXQgdGhlIGRyYXdpbmcgYWxnb3JpdGhtIGNhbiBlZmZpY2llbnRseSB1c2UgYW5kIGNvbXBhcmVcbnRoZW0uIFRoaXMgaXMgYSBwZXJzaXN0ZW50IGRhdGEgc3RydWN0dXJl4oCUaXQgaXMgbm90IG1vZGlmaWVkLFxudXBkYXRlcyBjcmVhdGUgYSBuZXcgdmFsdWUuXG4qL1xuY2xhc3MgRGVjb3JhdGlvblNldCB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihsb2NhbCwgY2hpbGRyZW4pIHtcbiAgICAgICAgdGhpcy5sb2NhbCA9IGxvY2FsLmxlbmd0aCA/IGxvY2FsIDogbm9uZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuLmxlbmd0aCA/IGNoaWxkcmVuIDogbm9uZTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgc2V0IG9mIGRlY29yYXRpb25zLCB1c2luZyB0aGUgc3RydWN0dXJlIG9mIHRoZSBnaXZlblxuICAgIGRvY3VtZW50LlxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkb2MsIGRlY29yYXRpb25zKSB7XG4gICAgICAgIHJldHVybiBkZWNvcmF0aW9ucy5sZW5ndGggPyBidWlsZFRyZWUoZGVjb3JhdGlvbnMsIGRvYywgMCwgbm9TcGVjKSA6IGVtcHR5O1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIGFsbCBkZWNvcmF0aW9ucyBpbiB0aGlzIHNldCB3aGljaCB0b3VjaCB0aGUgZ2l2ZW4gcmFuZ2VcbiAgICAoaW5jbHVkaW5nIGRlY29yYXRpb25zIHRoYXQgc3RhcnQgb3IgZW5kIGRpcmVjdGx5IGF0IHRoZVxuICAgIGJvdW5kYXJpZXMpIGFuZCBtYXRjaCB0aGUgZ2l2ZW4gcHJlZGljYXRlIG9uIHRoZWlyIHNwZWMuIFdoZW5cbiAgICBgc3RhcnRgIGFuZCBgZW5kYCBhcmUgb21pdHRlZCwgYWxsIGRlY29yYXRpb25zIGluIHRoZSBzZXQgYXJlXG4gICAgY29uc2lkZXJlZC4gV2hlbiBgcHJlZGljYXRlYCBpc24ndCBnaXZlbiwgYWxsIGRlY29yYXRpb25zIGFyZVxuICAgIGFzc3VtZWQgdG8gbWF0Y2guXG4gICAgKi9cbiAgICBmaW5kKHN0YXJ0LCBlbmQsIHByZWRpY2F0ZSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgIHRoaXMuZmluZElubmVyKHN0YXJ0ID09IG51bGwgPyAwIDogc3RhcnQsIGVuZCA9PSBudWxsID8gMWU5IDogZW5kLCByZXN1bHQsIDAsIHByZWRpY2F0ZSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGZpbmRJbm5lcihzdGFydCwgZW5kLCByZXN1bHQsIG9mZnNldCwgcHJlZGljYXRlKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sb2NhbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHNwYW4gPSB0aGlzLmxvY2FsW2ldO1xuICAgICAgICAgICAgaWYgKHNwYW4uZnJvbSA8PSBlbmQgJiYgc3Bhbi50byA+PSBzdGFydCAmJiAoIXByZWRpY2F0ZSB8fCBwcmVkaWNhdGUoc3Bhbi5zcGVjKSkpXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goc3Bhbi5jb3B5KHNwYW4uZnJvbSArIG9mZnNldCwgc3Bhbi50byArIG9mZnNldCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5baV0gPCBlbmQgJiYgdGhpcy5jaGlsZHJlbltpICsgMV0gPiBzdGFydCkge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZE9mZiA9IHRoaXMuY2hpbGRyZW5baV0gKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baSArIDJdLmZpbmRJbm5lcihzdGFydCAtIGNoaWxkT2ZmLCBlbmQgLSBjaGlsZE9mZiwgcmVzdWx0LCBvZmZzZXQgKyBjaGlsZE9mZiwgcHJlZGljYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBNYXAgdGhlIHNldCBvZiBkZWNvcmF0aW9ucyBpbiByZXNwb25zZSB0byBhIGNoYW5nZSBpbiB0aGVcbiAgICBkb2N1bWVudC5cbiAgICAqL1xuICAgIG1hcChtYXBwaW5nLCBkb2MsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMgPT0gZW1wdHkgfHwgbWFwcGluZy5tYXBzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcElubmVyKG1hcHBpbmcsIGRvYywgMCwgMCwgb3B0aW9ucyB8fCBub1NwZWMpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIG1hcElubmVyKG1hcHBpbmcsIG5vZGUsIG9mZnNldCwgb2xkT2Zmc2V0LCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBuZXdMb2NhbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxvY2FsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbWFwcGVkID0gdGhpcy5sb2NhbFtpXS5tYXAobWFwcGluZywgb2Zmc2V0LCBvbGRPZmZzZXQpO1xuICAgICAgICAgICAgaWYgKG1hcHBlZCAmJiBtYXBwZWQudHlwZS52YWxpZChub2RlLCBtYXBwZWQpKVxuICAgICAgICAgICAgICAgIChuZXdMb2NhbCB8fCAobmV3TG9jYWwgPSBbXSkpLnB1c2gobWFwcGVkKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMub25SZW1vdmUpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vblJlbW92ZSh0aGlzLmxvY2FsW2ldLnNwZWMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoaWxkcmVuLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBtYXBDaGlsZHJlbih0aGlzLmNoaWxkcmVuLCBuZXdMb2NhbCB8fCBbXSwgbWFwcGluZywgbm9kZSwgb2Zmc2V0LCBvbGRPZmZzZXQsIG9wdGlvbnMpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbmV3TG9jYWwgPyBuZXcgRGVjb3JhdGlvblNldChuZXdMb2NhbC5zb3J0KGJ5UG9zKSwgbm9uZSkgOiBlbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgQWRkIHRoZSBnaXZlbiBhcnJheSBvZiBkZWNvcmF0aW9ucyB0byB0aGUgb25lcyBpbiB0aGUgc2V0LFxuICAgIHByb2R1Y2luZyBhIG5ldyBzZXQuIE5lZWRzIGFjY2VzcyB0byB0aGUgY3VycmVudCBkb2N1bWVudCB0b1xuICAgIGNyZWF0ZSB0aGUgYXBwcm9wcmlhdGUgdHJlZSBzdHJ1Y3R1cmUuXG4gICAgKi9cbiAgICBhZGQoZG9jLCBkZWNvcmF0aW9ucykge1xuICAgICAgICBpZiAoIWRlY29yYXRpb25zLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBpZiAodGhpcyA9PSBlbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uU2V0LmNyZWF0ZShkb2MsIGRlY29yYXRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkSW5uZXIoZG9jLCBkZWNvcmF0aW9ucywgMCk7XG4gICAgfVxuICAgIGFkZElubmVyKGRvYywgZGVjb3JhdGlvbnMsIG9mZnNldCkge1xuICAgICAgICBsZXQgY2hpbGRyZW4sIGNoaWxkSW5kZXggPSAwO1xuICAgICAgICBkb2MuZm9yRWFjaCgoY2hpbGROb2RlLCBjaGlsZE9mZnNldCkgPT4ge1xuICAgICAgICAgICAgbGV0IGJhc2VPZmZzZXQgPSBjaGlsZE9mZnNldCArIG9mZnNldCwgZm91bmQ7XG4gICAgICAgICAgICBpZiAoIShmb3VuZCA9IHRha2VTcGFuc0Zvck5vZGUoZGVjb3JhdGlvbnMsIGNoaWxkTm9kZSwgYmFzZU9mZnNldCkpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLnNsaWNlKCk7XG4gICAgICAgICAgICB3aGlsZSAoY2hpbGRJbmRleCA8IGNoaWxkcmVuLmxlbmd0aCAmJiBjaGlsZHJlbltjaGlsZEluZGV4XSA8IGNoaWxkT2Zmc2V0KVxuICAgICAgICAgICAgICAgIGNoaWxkSW5kZXggKz0gMztcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbltjaGlsZEluZGV4XSA9PSBjaGlsZE9mZnNldClcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltjaGlsZEluZGV4ICsgMl0gPSBjaGlsZHJlbltjaGlsZEluZGV4ICsgMl0uYWRkSW5uZXIoY2hpbGROb2RlLCBmb3VuZCwgYmFzZU9mZnNldCArIDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShjaGlsZEluZGV4LCAwLCBjaGlsZE9mZnNldCwgY2hpbGRPZmZzZXQgKyBjaGlsZE5vZGUubm9kZVNpemUsIGJ1aWxkVHJlZShmb3VuZCwgY2hpbGROb2RlLCBiYXNlT2Zmc2V0ICsgMSwgbm9TcGVjKSk7XG4gICAgICAgICAgICBjaGlsZEluZGV4ICs9IDM7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbG9jYWwgPSBtb3ZlU3BhbnMoY2hpbGRJbmRleCA/IHdpdGhvdXROdWxscyhkZWNvcmF0aW9ucykgOiBkZWNvcmF0aW9ucywgLW9mZnNldCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWwubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIWxvY2FsW2ldLnR5cGUudmFsaWQoZG9jLCBsb2NhbFtpXSkpXG4gICAgICAgICAgICAgICAgbG9jYWwuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVjb3JhdGlvblNldChsb2NhbC5sZW5ndGggPyB0aGlzLmxvY2FsLmNvbmNhdChsb2NhbCkuc29ydChieVBvcykgOiB0aGlzLmxvY2FsLCBjaGlsZHJlbiB8fCB0aGlzLmNoaWxkcmVuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IHNldCB0aGF0IGNvbnRhaW5zIHRoZSBkZWNvcmF0aW9ucyBpbiB0aGlzIHNldCwgbWludXNcbiAgICB0aGUgb25lcyBpbiB0aGUgZ2l2ZW4gYXJyYXkuXG4gICAgKi9cbiAgICByZW1vdmUoZGVjb3JhdGlvbnMpIHtcbiAgICAgICAgaWYgKGRlY29yYXRpb25zLmxlbmd0aCA9PSAwIHx8IHRoaXMgPT0gZW1wdHkpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSW5uZXIoZGVjb3JhdGlvbnMsIDApO1xuICAgIH1cbiAgICByZW1vdmVJbm5lcihkZWNvcmF0aW9ucywgb2Zmc2V0KSB7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW4sIGxvY2FsID0gdGhpcy5sb2NhbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgbGV0IGZvdW5kO1xuICAgICAgICAgICAgbGV0IGZyb20gPSBjaGlsZHJlbltpXSArIG9mZnNldCwgdG8gPSBjaGlsZHJlbltpICsgMV0gKyBvZmZzZXQ7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgc3BhbjsgaiA8IGRlY29yYXRpb25zLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgIGlmIChzcGFuID0gZGVjb3JhdGlvbnNbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwYW4uZnJvbSA+IGZyb20gJiYgc3Bhbi50byA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNvcmF0aW9uc1tqXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAoZm91bmQgfHwgKGZvdW5kID0gW10pKS5wdXNoKHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbiA9PSB0aGlzLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbi5zbGljZSgpO1xuICAgICAgICAgICAgbGV0IHJlbW92ZWQgPSBjaGlsZHJlbltpICsgMl0ucmVtb3ZlSW5uZXIoZm91bmQsIGZyb20gKyAxKTtcbiAgICAgICAgICAgIGlmIChyZW1vdmVkICE9IGVtcHR5KSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5baSArIDJdID0gcmVtb3ZlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnNwbGljZShpLCAzKTtcbiAgICAgICAgICAgICAgICBpIC09IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2FsLmxlbmd0aClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBzcGFuOyBpIDwgZGVjb3JhdGlvbnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKHNwYW4gPSBkZWNvcmF0aW9uc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxvY2FsLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsW2pdLmVxKHNwYW4sIG9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWwgPT0gdGhpcy5sb2NhbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgPSB0aGlzLmxvY2FsLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwuc3BsaWNlKGotLSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRyZW4gPT0gdGhpcy5jaGlsZHJlbiAmJiBsb2NhbCA9PSB0aGlzLmxvY2FsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBsb2NhbC5sZW5ndGggfHwgY2hpbGRyZW4ubGVuZ3RoID8gbmV3IERlY29yYXRpb25TZXQobG9jYWwsIGNoaWxkcmVuKSA6IGVtcHR5O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGZvckNoaWxkKG9mZnNldCwgbm9kZSkge1xuICAgICAgICBpZiAodGhpcyA9PSBlbXB0eSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBpZiAobm9kZS5pc0xlYWYpXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGlvblNldC5lbXB0eTtcbiAgICAgICAgbGV0IGNoaWxkLCBsb2NhbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSArPSAzKVxuICAgICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5baV0gPj0gb2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW5baV0gPT0gb2Zmc2V0KVxuICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IHRoaXMuY2hpbGRyZW5baSArIDJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnQgPSBvZmZzZXQgKyAxLCBlbmQgPSBzdGFydCArIG5vZGUuY29udGVudC5zaXplO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubG9jYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBkZWMgPSB0aGlzLmxvY2FsW2ldO1xuICAgICAgICAgICAgaWYgKGRlYy5mcm9tIDwgZW5kICYmIGRlYy50byA+IHN0YXJ0ICYmIChkZWMudHlwZSBpbnN0YW5jZW9mIElubGluZVR5cGUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZyb20gPSBNYXRoLm1heChzdGFydCwgZGVjLmZyb20pIC0gc3RhcnQsIHRvID0gTWF0aC5taW4oZW5kLCBkZWMudG8pIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgaWYgKGZyb20gPCB0bylcbiAgICAgICAgICAgICAgICAgICAgKGxvY2FsIHx8IChsb2NhbCA9IFtdKSkucHVzaChkZWMuY29weShmcm9tLCB0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhbCkge1xuICAgICAgICAgICAgbGV0IGxvY2FsU2V0ID0gbmV3IERlY29yYXRpb25TZXQobG9jYWwuc29ydChieVBvcyksIG5vbmUpO1xuICAgICAgICAgICAgcmV0dXJuIGNoaWxkID8gbmV3IERlY29yYXRpb25Hcm91cChbbG9jYWxTZXQsIGNoaWxkXSkgOiBsb2NhbFNldDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hpbGQgfHwgZW1wdHk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKHRoaXMgPT0gb3RoZXIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBEZWNvcmF0aW9uU2V0KSB8fFxuICAgICAgICAgICAgdGhpcy5sb2NhbC5sZW5ndGggIT0gb3RoZXIubG9jYWwubGVuZ3RoIHx8XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmxlbmd0aCAhPSBvdGhlci5jaGlsZHJlbi5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sb2NhbC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy5sb2NhbFtpXS5lcShvdGhlci5sb2NhbFtpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDMpXG4gICAgICAgICAgICBpZiAodGhpcy5jaGlsZHJlbltpXSAhPSBvdGhlci5jaGlsZHJlbltpXSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baSArIDFdICE9IG90aGVyLmNoaWxkcmVuW2kgKyAxXSB8fFxuICAgICAgICAgICAgICAgICF0aGlzLmNoaWxkcmVuW2kgKyAyXS5lcShvdGhlci5jaGlsZHJlbltpICsgMl0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbG9jYWxzKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZU92ZXJsYXAodGhpcy5sb2NhbHNJbm5lcihub2RlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbG9jYWxzSW5uZXIobm9kZSkge1xuICAgICAgICBpZiAodGhpcyA9PSBlbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBub25lO1xuICAgICAgICBpZiAobm9kZS5pbmxpbmVDb250ZW50IHx8ICF0aGlzLmxvY2FsLnNvbWUoSW5saW5lVHlwZS5pcykpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbDtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubG9jYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghKHRoaXMubG9jYWxbaV0udHlwZSBpbnN0YW5jZW9mIElubGluZVR5cGUpKVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMubG9jYWxbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2V0IG9mIGRlY29yYXRpb25zLlxuKi9cbkRlY29yYXRpb25TZXQuZW1wdHkgPSBuZXcgRGVjb3JhdGlvblNldChbXSwgW10pO1xuLyoqXG5AaW50ZXJuYWxcbiovXG5EZWNvcmF0aW9uU2V0LnJlbW92ZU92ZXJsYXAgPSByZW1vdmVPdmVybGFwO1xuY29uc3QgZW1wdHkgPSBEZWNvcmF0aW9uU2V0LmVtcHR5O1xuLy8gQW4gYWJzdHJhY3Rpb24gdGhhdCBhbGxvd3MgdGhlIGNvZGUgZGVhbGluZyB3aXRoIGRlY29yYXRpb25zIHRvXG4vLyB0cmVhdCBtdWx0aXBsZSBEZWNvcmF0aW9uU2V0IG9iamVjdHMgYXMgaWYgaXQgd2VyZSBhIHNpbmdsZSBvYmplY3Rcbi8vIHdpdGggKGEgc3Vic2V0IG9mKSB0aGUgc2FtZSBpbnRlcmZhY2UuXG5jbGFzcyBEZWNvcmF0aW9uR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKG1lbWJlcnMpIHtcbiAgICAgICAgdGhpcy5tZW1iZXJzID0gbWVtYmVycztcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcsIGRvYykge1xuICAgICAgICBjb25zdCBtYXBwZWREZWNvcyA9IHRoaXMubWVtYmVycy5tYXAobWVtYmVyID0+IG1lbWJlci5tYXAobWFwcGluZywgZG9jLCBub1NwZWMpKTtcbiAgICAgICAgcmV0dXJuIERlY29yYXRpb25Hcm91cC5mcm9tKG1hcHBlZERlY29zKTtcbiAgICB9XG4gICAgZm9yQ2hpbGQob2Zmc2V0LCBjaGlsZCkge1xuICAgICAgICBpZiAoY2hpbGQuaXNMZWFmKVxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRpb25TZXQuZW1wdHk7XG4gICAgICAgIGxldCBmb3VuZCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtYmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWVtYmVyc1tpXS5mb3JDaGlsZChvZmZzZXQsIGNoaWxkKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT0gZW1wdHkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRGVjb3JhdGlvbkdyb3VwKVxuICAgICAgICAgICAgICAgIGZvdW5kID0gZm91bmQuY29uY2F0KHJlc3VsdC5tZW1iZXJzKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIERlY29yYXRpb25Hcm91cC5mcm9tKGZvdW5kKTtcbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBEZWNvcmF0aW9uR3JvdXApIHx8XG4gICAgICAgICAgICBvdGhlci5tZW1iZXJzLmxlbmd0aCAhPSB0aGlzLm1lbWJlcnMubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVtYmVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy5tZW1iZXJzW2ldLmVxKG90aGVyLm1lbWJlcnNbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxvY2Fscyhub2RlKSB7XG4gICAgICAgIGxldCByZXN1bHQsIHNvcnRlZCA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW1iZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbG9jYWxzID0gdGhpcy5tZW1iZXJzW2ldLmxvY2Fsc0lubmVyKG5vZGUpO1xuICAgICAgICAgICAgaWYgKCFsb2NhbHMubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBsb2NhbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc29ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICBzb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsb2NhbHMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxvY2Fsc1tqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCA/IHJlbW92ZU92ZXJsYXAoc29ydGVkID8gcmVzdWx0IDogcmVzdWx0LnNvcnQoYnlQb3MpKSA6IG5vbmU7XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhIGdyb3VwIGZvciB0aGUgZ2l2ZW4gYXJyYXkgb2YgZGVjb3JhdGlvbiBzZXRzLCBvciByZXR1cm5cbiAgICAvLyBhIHNpbmdsZSBzZXQgd2hlbiBwb3NzaWJsZS5cbiAgICBzdGF0aWMgZnJvbShtZW1iZXJzKSB7XG4gICAgICAgIHN3aXRjaCAobWVtYmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIGVtcHR5O1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbWVtYmVyc1swXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBuZXcgRGVjb3JhdGlvbkdyb3VwKG1lbWJlcnMuZXZlcnkobSA9PiBtIGluc3RhbmNlb2YgRGVjb3JhdGlvblNldCkgPyBtZW1iZXJzIDpcbiAgICAgICAgICAgICAgICBtZW1iZXJzLnJlZHVjZSgociwgbSkgPT4gci5jb25jYXQobSBpbnN0YW5jZW9mIERlY29yYXRpb25TZXQgPyBtIDogbS5tZW1iZXJzKSwgW10pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcENoaWxkcmVuKG9sZENoaWxkcmVuLCBuZXdMb2NhbCwgbWFwcGluZywgbm9kZSwgb2Zmc2V0LCBvbGRPZmZzZXQsIG9wdGlvbnMpIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBvbGRDaGlsZHJlbi5zbGljZSgpO1xuICAgIC8vIE1hcmsgdGhlIGNoaWxkcmVuIHRoYXQgYXJlIGRpcmVjdGx5IHRvdWNoZWQgYnkgY2hhbmdlcywgYW5kXG4gICAgLy8gbW92ZSB0aG9zZSB0aGF0IGFyZSBhZnRlciB0aGUgY2hhbmdlcy5cbiAgICBmb3IgKGxldCBpID0gMCwgYmFzZU9mZnNldCA9IG9sZE9mZnNldDsgaSA8IG1hcHBpbmcubWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbW92ZWQgPSAwO1xuICAgICAgICBtYXBwaW5nLm1hcHNbaV0uZm9yRWFjaCgob2xkU3RhcnQsIG9sZEVuZCwgbmV3U3RhcnQsIG5ld0VuZCkgPT4ge1xuICAgICAgICAgICAgbGV0IGRTaXplID0gKG5ld0VuZCAtIG5ld1N0YXJ0KSAtIChvbGRFbmQgLSBvbGRTdGFydCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVuZCA9IGNoaWxkcmVuW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kIDwgMCB8fCBvbGRTdGFydCA+IGVuZCArIGJhc2VPZmZzZXQgLSBtb3ZlZClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gY2hpbGRyZW5baV0gKyBiYXNlT2Zmc2V0IC0gbW92ZWQ7XG4gICAgICAgICAgICAgICAgaWYgKG9sZEVuZCA+PSBzdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpICsgMV0gPSBvbGRTdGFydCA8PSBzdGFydCA/IC0yIDogLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ld1N0YXJ0ID49IG9mZnNldCAmJiBkU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpXSArPSBkU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baSArIDFdICs9IGRTaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vdmVkICs9IGRTaXplO1xuICAgICAgICB9KTtcbiAgICAgICAgYmFzZU9mZnNldCA9IG1hcHBpbmcubWFwc1tpXS5tYXAoYmFzZU9mZnNldCwgLTEpO1xuICAgIH1cbiAgICAvLyBGaW5kIHRoZSBjaGlsZCBub2RlcyB0aGF0IHN0aWxsIGNvcnJlc3BvbmQgdG8gYSBzaW5nbGUgbm9kZSxcbiAgICAvLyByZWN1cnNpdmVseSBjYWxsIG1hcElubmVyIG9uIHRoZW0gYW5kIHVwZGF0ZSB0aGVpciBwb3NpdGlvbnMuXG4gICAgbGV0IG11c3RSZWJ1aWxkID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgaWYgKGNoaWxkcmVuW2kgKyAxXSA8IDApIHsgLy8gVG91Y2hlZCBub2Rlc1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuW2kgKyAxXSA9PSAtMikge1xuICAgICAgICAgICAgICAgIG11c3RSZWJ1aWxkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltpICsgMV0gPSAtMTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmcm9tID0gbWFwcGluZy5tYXAob2xkQ2hpbGRyZW5baV0gKyBvbGRPZmZzZXQpLCBmcm9tTG9jYWwgPSBmcm9tIC0gb2Zmc2V0O1xuICAgICAgICAgICAgaWYgKGZyb21Mb2NhbCA8IDAgfHwgZnJvbUxvY2FsID49IG5vZGUuY29udGVudC5zaXplKSB7XG4gICAgICAgICAgICAgICAgbXVzdFJlYnVpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTXVzdCByZWFkIG9sZENoaWxkcmVuIGJlY2F1c2UgY2hpbGRyZW4gd2FzIHRhZ2dlZCB3aXRoIC0xXG4gICAgICAgICAgICBsZXQgdG8gPSBtYXBwaW5nLm1hcChvbGRDaGlsZHJlbltpICsgMV0gKyBvbGRPZmZzZXQsIC0xKSwgdG9Mb2NhbCA9IHRvIC0gb2Zmc2V0O1xuICAgICAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldDogY2hpbGRPZmZzZXQgfSA9IG5vZGUuY29udGVudC5maW5kSW5kZXgoZnJvbUxvY2FsKTtcbiAgICAgICAgICAgIGxldCBjaGlsZE5vZGUgPSBub2RlLm1heWJlQ2hpbGQoaW5kZXgpO1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZSAmJiBjaGlsZE9mZnNldCA9PSBmcm9tTG9jYWwgJiYgY2hpbGRPZmZzZXQgKyBjaGlsZE5vZGUubm9kZVNpemUgPT0gdG9Mb2NhbCkge1xuICAgICAgICAgICAgICAgIGxldCBtYXBwZWQgPSBjaGlsZHJlbltpICsgMl1cbiAgICAgICAgICAgICAgICAgICAgLm1hcElubmVyKG1hcHBpbmcsIGNoaWxkTm9kZSwgZnJvbSArIDEsIG9sZENoaWxkcmVuW2ldICsgb2xkT2Zmc2V0ICsgMSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZCAhPSBlbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpXSA9IGZyb21Mb2NhbDtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baSArIDFdID0gdG9Mb2NhbDtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baSArIDJdID0gbWFwcGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5baSArIDFdID0gLTI7XG4gICAgICAgICAgICAgICAgICAgIG11c3RSZWJ1aWxkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtdXN0UmVidWlsZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAvLyBSZW1haW5pbmcgY2hpbGRyZW4gbXVzdCBiZSBjb2xsZWN0ZWQgYW5kIHJlYnVpbHQgaW50byB0aGUgYXBwcm9wcmlhdGUgc3RydWN0dXJlXG4gICAgaWYgKG11c3RSZWJ1aWxkKSB7XG4gICAgICAgIGxldCBkZWNvcmF0aW9ucyA9IG1hcEFuZEdhdGhlclJlbWFpbmluZ0RlY29yYXRpb25zKGNoaWxkcmVuLCBvbGRDaGlsZHJlbiwgbmV3TG9jYWwsIG1hcHBpbmcsIG9mZnNldCwgb2xkT2Zmc2V0LCBvcHRpb25zKTtcbiAgICAgICAgbGV0IGJ1aWx0ID0gYnVpbGRUcmVlKGRlY29yYXRpb25zLCBub2RlLCAwLCBvcHRpb25zKTtcbiAgICAgICAgbmV3TG9jYWwgPSBidWlsdC5sb2NhbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbltpICsgMV0gPCAwKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uc3BsaWNlKGksIDMpO1xuICAgICAgICAgICAgICAgIGkgLT0gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgYnVpbHQuY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gYnVpbHQuY2hpbGRyZW5baV07XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGNoaWxkcmVuLmxlbmd0aCAmJiBjaGlsZHJlbltqXSA8IGZyb20pXG4gICAgICAgICAgICAgICAgaiArPSAzO1xuICAgICAgICAgICAgY2hpbGRyZW4uc3BsaWNlKGosIDAsIGJ1aWx0LmNoaWxkcmVuW2ldLCBidWlsdC5jaGlsZHJlbltpICsgMV0sIGJ1aWx0LmNoaWxkcmVuW2kgKyAyXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEZWNvcmF0aW9uU2V0KG5ld0xvY2FsLnNvcnQoYnlQb3MpLCBjaGlsZHJlbik7XG59XG5mdW5jdGlvbiBtb3ZlU3BhbnMoc3BhbnMsIG9mZnNldCkge1xuICAgIGlmICghb2Zmc2V0IHx8ICFzcGFucy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBzcGFucztcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGFucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgc3BhbiA9IHNwYW5zW2ldO1xuICAgICAgICByZXN1bHQucHVzaChuZXcgRGVjb3JhdGlvbihzcGFuLmZyb20gKyBvZmZzZXQsIHNwYW4udG8gKyBvZmZzZXQsIHNwYW4udHlwZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWFwQW5kR2F0aGVyUmVtYWluaW5nRGVjb3JhdGlvbnMoY2hpbGRyZW4sIG9sZENoaWxkcmVuLCBkZWNvcmF0aW9ucywgbWFwcGluZywgb2Zmc2V0LCBvbGRPZmZzZXQsIG9wdGlvbnMpIHtcbiAgICAvLyBHYXRoZXIgYWxsIGRlY29yYXRpb25zIGZyb20gdGhlIHJlbWFpbmluZyBtYXJrZWQgY2hpbGRyZW5cbiAgICBmdW5jdGlvbiBnYXRoZXIoc2V0LCBvbGRPZmZzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubG9jYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBtYXBwZWQgPSBzZXQubG9jYWxbaV0ubWFwKG1hcHBpbmcsIG9mZnNldCwgb2xkT2Zmc2V0KTtcbiAgICAgICAgICAgIGlmIChtYXBwZWQpXG4gICAgICAgICAgICAgICAgZGVjb3JhdGlvbnMucHVzaChtYXBwZWQpO1xuICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5vblJlbW92ZSlcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9uUmVtb3ZlKHNldC5sb2NhbFtpXS5zcGVjKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5jaGlsZHJlbi5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgICAgIGdhdGhlcihzZXQuY2hpbGRyZW5baSArIDJdLCBzZXQuY2hpbGRyZW5baV0gKyBvbGRPZmZzZXQgKyAxKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMylcbiAgICAgICAgaWYgKGNoaWxkcmVuW2kgKyAxXSA9PSAtMSlcbiAgICAgICAgICAgIGdhdGhlcihjaGlsZHJlbltpICsgMl0sIG9sZENoaWxkcmVuW2ldICsgb2xkT2Zmc2V0ICsgMSk7XG4gICAgcmV0dXJuIGRlY29yYXRpb25zO1xufVxuZnVuY3Rpb24gdGFrZVNwYW5zRm9yTm9kZShzcGFucywgbm9kZSwgb2Zmc2V0KSB7XG4gICAgaWYgKG5vZGUuaXNMZWFmKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgZW5kID0gb2Zmc2V0ICsgbm9kZS5ub2RlU2l6ZSwgZm91bmQgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwLCBzcGFuOyBpIDwgc3BhbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKChzcGFuID0gc3BhbnNbaV0pICYmIHNwYW4uZnJvbSA+IG9mZnNldCAmJiBzcGFuLnRvIDwgZW5kKSB7XG4gICAgICAgICAgICAoZm91bmQgfHwgKGZvdW5kID0gW10pKS5wdXNoKHNwYW4pO1xuICAgICAgICAgICAgc3BhbnNbaV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbmZ1bmN0aW9uIHdpdGhvdXROdWxscyhhcnJheSkge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAoYXJyYXlbaV0gIT0gbnVsbClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGFycmF5W2ldKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8gQnVpbGQgdXAgYSB0cmVlIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBzZXQgb2YgZGVjb3JhdGlvbnMuIGBvZmZzZXRgXG4vLyBpcyBhIGJhc2Ugb2Zmc2V0IHRoYXQgc2hvdWxkIGJlIHN1YnRyYWN0ZWQgZnJvbSB0aGUgYGZyb21gIGFuZCBgdG9gXG4vLyBwb3NpdGlvbnMgaW4gdGhlIHNwYW5zIChzbyB0aGF0IHdlIGRvbid0IGhhdmUgdG8gYWxsb2NhdGUgbmV3IHNwYW5zXG4vLyBmb3IgcmVjdXJzaXZlIGNhbGxzKS5cbmZ1bmN0aW9uIGJ1aWxkVHJlZShzcGFucywgbm9kZSwgb2Zmc2V0LCBvcHRpb25zKSB7XG4gICAgbGV0IGNoaWxkcmVuID0gW10sIGhhc051bGxzID0gZmFsc2U7XG4gICAgbm9kZS5mb3JFYWNoKChjaGlsZE5vZGUsIGxvY2FsU3RhcnQpID0+IHtcbiAgICAgICAgbGV0IGZvdW5kID0gdGFrZVNwYW5zRm9yTm9kZShzcGFucywgY2hpbGROb2RlLCBsb2NhbFN0YXJ0ICsgb2Zmc2V0KTtcbiAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICBoYXNOdWxscyA9IHRydWU7XG4gICAgICAgICAgICBsZXQgc3VidHJlZSA9IGJ1aWxkVHJlZShmb3VuZCwgY2hpbGROb2RlLCBvZmZzZXQgKyBsb2NhbFN0YXJ0ICsgMSwgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoc3VidHJlZSAhPSBlbXB0eSlcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGxvY2FsU3RhcnQsIGxvY2FsU3RhcnQgKyBjaGlsZE5vZGUubm9kZVNpemUsIHN1YnRyZWUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgbGV0IGxvY2FscyA9IG1vdmVTcGFucyhoYXNOdWxscyA/IHdpdGhvdXROdWxscyhzcGFucykgOiBzcGFucywgLW9mZnNldCkuc29ydChieVBvcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbHMubGVuZ3RoOyBpKyspXG4gICAgICAgIGlmICghbG9jYWxzW2ldLnR5cGUudmFsaWQobm9kZSwgbG9jYWxzW2ldKSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25SZW1vdmUpXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vblJlbW92ZShsb2NhbHNbaV0uc3BlYyk7XG4gICAgICAgICAgICBsb2NhbHMuc3BsaWNlKGktLSwgMSk7XG4gICAgICAgIH1cbiAgICByZXR1cm4gbG9jYWxzLmxlbmd0aCB8fCBjaGlsZHJlbi5sZW5ndGggPyBuZXcgRGVjb3JhdGlvblNldChsb2NhbHMsIGNoaWxkcmVuKSA6IGVtcHR5O1xufVxuLy8gVXNlZCB0byBzb3J0IGRlY29yYXRpb25zIHNvIHRoYXQgb25lcyB3aXRoIGEgbG93IHN0YXJ0IHBvc2l0aW9uXG4vLyBjb21lIGZpcnN0LCBhbmQgd2l0aGluIGEgc2V0IHdpdGggdGhlIHNhbWUgc3RhcnQgcG9zaXRpb24sIHRob3NlXG4vLyB3aXRoIGFuIHNtYWxsZXIgZW5kIHBvc2l0aW9uIGNvbWUgZmlyc3QuXG5mdW5jdGlvbiBieVBvcyhhLCBiKSB7XG4gICAgcmV0dXJuIGEuZnJvbSAtIGIuZnJvbSB8fCBhLnRvIC0gYi50bztcbn1cbi8vIFNjYW4gYSBzb3J0ZWQgYXJyYXkgb2YgZGVjb3JhdGlvbnMgZm9yIHBhcnRpYWxseSBvdmVybGFwcGluZyBzcGFucyxcbi8vIGFuZCBzcGxpdCB0aG9zZSBzbyB0aGF0IG9ubHkgZnVsbHkgb3ZlcmxhcHBpbmcgc3BhbnMgYXJlIGxlZnQgKHRvXG4vLyBtYWtlIHN1YnNlcXVlbnQgcmVuZGVyaW5nIGVhc2llcikuIFdpbGwgcmV0dXJuIHRoZSBpbnB1dCBhcnJheSBpZlxuLy8gbm8gcGFydGlhbGx5IG92ZXJsYXBwaW5nIHNwYW5zIGFyZSBmb3VuZCAodGhlIGNvbW1vbiBjYXNlKS5cbmZ1bmN0aW9uIHJlbW92ZU92ZXJsYXAoc3BhbnMpIHtcbiAgICBsZXQgd29ya2luZyA9IHNwYW5zO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ya2luZy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgbGV0IHNwYW4gPSB3b3JraW5nW2ldO1xuICAgICAgICBpZiAoc3Bhbi5mcm9tICE9IHNwYW4udG8pXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCB3b3JraW5nLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB3b3JraW5nW2pdO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0LmZyb20gPT0gc3Bhbi5mcm9tKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnRvICE9IHNwYW4udG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3b3JraW5nID09IHNwYW5zKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmcgPSBzcGFucy5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9sbG93ZWQgYnkgYSBwYXJ0aWFsbHkgb3ZlcmxhcHBpbmcgbGFyZ2VyIHNwYW4uIFNwbGl0IHRoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwYW4uXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nW2pdID0gbmV4dC5jb3B5KG5leHQuZnJvbSwgc3Bhbi50byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRBaGVhZCh3b3JraW5nLCBqICsgMSwgbmV4dC5jb3B5KHNwYW4udG8sIG5leHQudG8pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LmZyb20gPCBzcGFuLnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod29ya2luZyA9PSBzcGFucylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JraW5nID0gc3BhbnMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbmQgb2YgdGhpcyBvbmUgb3ZlcmxhcHMgd2l0aCBhIHN1YnNlcXVlbnQgc3Bhbi4gU3BsaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2luZ1tpXSA9IHNwYW4uY29weShzcGFuLmZyb20sIG5leHQuZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRBaGVhZCh3b3JraW5nLCBqLCBzcGFuLmNvcHkobmV4dC5mcm9tLCBzcGFuLnRvKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gd29ya2luZztcbn1cbmZ1bmN0aW9uIGluc2VydEFoZWFkKGFycmF5LCBpLCBkZWNvKSB7XG4gICAgd2hpbGUgKGkgPCBhcnJheS5sZW5ndGggJiYgYnlQb3MoZGVjbywgYXJyYXlbaV0pID4gMClcbiAgICAgICAgaSsrO1xuICAgIGFycmF5LnNwbGljZShpLCAwLCBkZWNvKTtcbn1cbi8vIEdldCB0aGUgZGVjb3JhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IHByb3BzIG9mIGEgdmlldy5cbmZ1bmN0aW9uIHZpZXdEZWNvcmF0aW9ucyh2aWV3KSB7XG4gICAgbGV0IGZvdW5kID0gW107XG4gICAgdmlldy5zb21lUHJvcChcImRlY29yYXRpb25zXCIsIGYgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gZih2aWV3LnN0YXRlKTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQgIT0gZW1wdHkpXG4gICAgICAgICAgICBmb3VuZC5wdXNoKHJlc3VsdCk7XG4gICAgfSk7XG4gICAgaWYgKHZpZXcuY3Vyc29yV3JhcHBlcilcbiAgICAgICAgZm91bmQucHVzaChEZWNvcmF0aW9uU2V0LmNyZWF0ZSh2aWV3LnN0YXRlLmRvYywgW3ZpZXcuY3Vyc29yV3JhcHBlci5kZWNvXSkpO1xuICAgIHJldHVybiBEZWNvcmF0aW9uR3JvdXAuZnJvbShmb3VuZCk7XG59XG5cbmNvbnN0IG9ic2VydmVPcHRpb25zID0ge1xuICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGFPbGRWYWx1ZTogdHJ1ZSxcbiAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgIGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWVcbn07XG4vLyBJRTExIGhhcyB2ZXJ5IGJyb2tlbiBtdXRhdGlvbiBvYnNlcnZlcnMsIHNvIHdlIGFsc28gbGlzdGVuIHRvIERPTUNoYXJhY3RlckRhdGFNb2RpZmllZFxuY29uc3QgdXNlQ2hhckRhdGEgPSBpZSAmJiBpZV92ZXJzaW9uIDw9IDExO1xuY2xhc3MgU2VsZWN0aW9uU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFuY2hvck5vZGUgPSBudWxsO1xuICAgICAgICB0aGlzLmFuY2hvck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuZm9jdXNOb2RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5mb2N1c09mZnNldCA9IDA7XG4gICAgfVxuICAgIHNldChzZWwpIHtcbiAgICAgICAgdGhpcy5hbmNob3JOb2RlID0gc2VsLmFuY2hvck5vZGU7XG4gICAgICAgIHRoaXMuYW5jaG9yT2Zmc2V0ID0gc2VsLmFuY2hvck9mZnNldDtcbiAgICAgICAgdGhpcy5mb2N1c05vZGUgPSBzZWwuZm9jdXNOb2RlO1xuICAgICAgICB0aGlzLmZvY3VzT2Zmc2V0ID0gc2VsLmZvY3VzT2Zmc2V0O1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgdGhpcy5hbmNob3JOb2RlID0gdGhpcy5mb2N1c05vZGUgPSBudWxsO1xuICAgIH1cbiAgICBlcShzZWwpIHtcbiAgICAgICAgcmV0dXJuIHNlbC5hbmNob3JOb2RlID09IHRoaXMuYW5jaG9yTm9kZSAmJiBzZWwuYW5jaG9yT2Zmc2V0ID09IHRoaXMuYW5jaG9yT2Zmc2V0ICYmXG4gICAgICAgICAgICBzZWwuZm9jdXNOb2RlID09IHRoaXMuZm9jdXNOb2RlICYmIHNlbC5mb2N1c09mZnNldCA9PSB0aGlzLmZvY3VzT2Zmc2V0O1xuICAgIH1cbn1cbmNsYXNzIERPTU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih2aWV3LCBoYW5kbGVET01DaGFuZ2UpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgdGhpcy5oYW5kbGVET01DaGFuZ2UgPSBoYW5kbGVET01DaGFuZ2U7XG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5mbHVzaGluZ1Nvb24gPSAtMTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbiA9IG5ldyBTZWxlY3Rpb25TdGF0ZTtcbiAgICAgICAgdGhpcy5vbkNoYXJEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyICYmXG4gICAgICAgICAgICBuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11dGF0aW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG11dGF0aW9uc1tpXSk7XG4gICAgICAgICAgICAgICAgLy8gSUUxMSB3aWxsIHNvbWV0aW1lcyAob24gYmFja3NwYWNpbmcgb3V0IGEgc2luZ2xlIGNoYXJhY3RlclxuICAgICAgICAgICAgICAgIC8vIHRleHQgbm9kZSBhZnRlciBhIEJSIG5vZGUpIGNhbGwgdGhlIG9ic2VydmVyIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgLy8gYmVmb3JlIGFjdHVhbGx5IHVwZGF0aW5nIHRoZSBET00sIHdoaWNoIHdpbGwgY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBQcm9zZU1pcnJvciB0byBtaXNzIHRoZSBjaGFuZ2UgKHNlZSAjOTMwKVxuICAgICAgICAgICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDw9IDExICYmIG11dGF0aW9ucy5zb21lKG0gPT4gbS50eXBlID09IFwiY2hpbGRMaXN0XCIgJiYgbS5yZW1vdmVkTm9kZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgIG0udHlwZSA9PSBcImNoYXJhY3RlckRhdGFcIiAmJiBtLm9sZFZhbHVlLmxlbmd0aCA+IG0udGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGgpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZsdXNoU29vbigpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGlmICh1c2VDaGFyRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5vbkNoYXJEYXRhID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHsgdGFyZ2V0OiBlLnRhcmdldCwgdHlwZTogXCJjaGFyYWN0ZXJEYXRhXCIsIG9sZFZhbHVlOiBlLnByZXZWYWx1ZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoU29vbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBmbHVzaFNvb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoaW5nU29vbiA8IDApXG4gICAgICAgICAgICB0aGlzLmZsdXNoaW5nU29vbiA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5mbHVzaGluZ1Nvb24gPSAtMTsgdGhpcy5mbHVzaCgpOyB9LCAyMCk7XG4gICAgfVxuICAgIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLmZsdXNoaW5nU29vbiA+IC0xKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmx1c2hpbmdTb29uKTtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hpbmdTb29uID0gLTE7XG4gICAgICAgICAgICB0aGlzLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LmRvbSwgb2JzZXJ2ZU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9uQ2hhckRhdGEpXG4gICAgICAgICAgICB0aGlzLnZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIiwgdGhpcy5vbkNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5jb25uZWN0U2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICAgICAgICBsZXQgdGFrZSA9IHRoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTtcbiAgICAgICAgICAgIGlmICh0YWtlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFrZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHRha2VbaV0pO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuZmx1c2goKSwgMjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub25DaGFyRGF0YSlcbiAgICAgICAgICAgIHRoaXMudmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLCB0aGlzLm9uQ2hhckRhdGEpO1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKTtcbiAgICB9XG4gICAgY29ubmVjdFNlbGVjdGlvbigpIHtcbiAgICAgICAgdGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgdGhpcy5vblNlbGVjdGlvbkNoYW5nZSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudmlldy5kb20ub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2VsZWN0aW9uY2hhbmdlXCIsIHRoaXMub25TZWxlY3Rpb25DaGFuZ2UpO1xuICAgIH1cbiAgICBzdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSB7XG4gICAgICAgIHRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcyA9IGZhbHNlLCA1MCk7XG4gICAgfVxuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICBpZiAoIWhhc0ZvY3VzQW5kU2VsZWN0aW9uKHRoaXMudmlldykpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25Ub0RPTSh0aGlzLnZpZXcpO1xuICAgICAgICAvLyBEZWxldGlvbnMgb24gSUUxMSBmaXJlIHRoZWlyIGV2ZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIsIGdpdmluZ1xuICAgICAgICAvLyB1cyBhIHNlbGVjdGlvbiBjaGFuZ2UgZXZlbnQgYmVmb3JlIHRoZSBET00gY2hhbmdlcyBhcmVcbiAgICAgICAgLy8gcmVwb3J0ZWQuXG4gICAgICAgIGlmIChpZSAmJiBpZV92ZXJzaW9uIDw9IDExICYmICF0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgc2VsID0gdGhpcy52aWV3LmRvbVNlbGVjdGlvblJhbmdlKCk7XG4gICAgICAgICAgICAvLyBTZWxlY3Rpb24uaXNDb2xsYXBzZWQgaXNuJ3QgcmVsaWFibGUgb24gSUVcbiAgICAgICAgICAgIGlmIChzZWwuZm9jdXNOb2RlICYmIGlzRXF1aXZhbGVudFBvc2l0aW9uKHNlbC5mb2N1c05vZGUsIHNlbC5mb2N1c09mZnNldCwgc2VsLmFuY2hvck5vZGUsIHNlbC5hbmNob3JPZmZzZXQpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZsdXNoU29vbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmx1c2goKTtcbiAgICB9XG4gICAgc2V0Q3VyU2VsZWN0aW9uKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5kb21TZWxlY3Rpb25SYW5nZSgpKTtcbiAgICB9XG4gICAgaWdub3JlU2VsZWN0aW9uQ2hhbmdlKHNlbCkge1xuICAgICAgICBpZiAoIXNlbC5mb2N1c05vZGUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IGFuY2VzdG9ycyA9IG5ldyBTZXQsIGNvbnRhaW5lcjtcbiAgICAgICAgZm9yIChsZXQgc2NhbiA9IHNlbC5mb2N1c05vZGU7IHNjYW47IHNjYW4gPSBwYXJlbnROb2RlKHNjYW4pKVxuICAgICAgICAgICAgYW5jZXN0b3JzLmFkZChzY2FuKTtcbiAgICAgICAgZm9yIChsZXQgc2NhbiA9IHNlbC5hbmNob3JOb2RlOyBzY2FuOyBzY2FuID0gcGFyZW50Tm9kZShzY2FuKSlcbiAgICAgICAgICAgIGlmIChhbmNlc3RvcnMuaGFzKHNjYW4pKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gc2NhbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgbGV0IGRlc2MgPSBjb250YWluZXIgJiYgdGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKGRlc2MgJiYgZGVzYy5pZ25vcmVNdXRhdGlvbih7XG4gICAgICAgICAgICB0eXBlOiBcInNlbGVjdGlvblwiLFxuICAgICAgICAgICAgdGFyZ2V0OiBjb250YWluZXIubm9kZVR5cGUgPT0gMyA/IGNvbnRhaW5lci5wYXJlbnROb2RlIDogY29udGFpbmVyXG4gICAgICAgIH0pKSB7XG4gICAgICAgICAgICB0aGlzLnNldEN1clNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGxldCB7IHZpZXcgfSA9IHRoaXM7XG4gICAgICAgIGlmICghdmlldy5kb2NWaWV3IHx8IHRoaXMuZmx1c2hpbmdTb29uID4gLTEpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBtdXRhdGlvbnMgPSB0aGlzLm9ic2VydmVyID8gdGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpIDogW107XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgbXV0YXRpb25zID0gdGhpcy5xdWV1ZS5jb25jYXQobXV0YXRpb25zKTtcbiAgICAgICAgICAgIHRoaXMucXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VsID0gdmlldy5kb21TZWxlY3Rpb25SYW5nZSgpO1xuICAgICAgICBsZXQgbmV3U2VsID0gIXRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzICYmICF0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoc2VsKSAmJiBoYXNGb2N1c0FuZFNlbGVjdGlvbih2aWV3KSAmJiAhdGhpcy5pZ25vcmVTZWxlY3Rpb25DaGFuZ2Uoc2VsKTtcbiAgICAgICAgbGV0IGZyb20gPSAtMSwgdG8gPSAtMSwgdHlwZU92ZXIgPSBmYWxzZSwgYWRkZWQgPSBbXTtcbiAgICAgICAgaWYgKHZpZXcuZWRpdGFibGUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucmVnaXN0ZXJNdXRhdGlvbihtdXRhdGlvbnNbaV0sIGFkZGVkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBmcm9tIDwgMCA/IHJlc3VsdC5mcm9tIDogTWF0aC5taW4ocmVzdWx0LmZyb20sIGZyb20pO1xuICAgICAgICAgICAgICAgICAgICB0byA9IHRvIDwgMCA/IHJlc3VsdC50byA6IE1hdGgubWF4KHJlc3VsdC50bywgdG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnR5cGVPdmVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2Vja28gJiYgYWRkZWQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbGV0IGJycyA9IGFkZGVkLmZpbHRlcihuID0+IG4ubm9kZU5hbWUgPT0gXCJCUlwiKTtcbiAgICAgICAgICAgIGlmIChicnMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGJyc1swXSwgYiA9IGJyc1sxXTtcbiAgICAgICAgICAgICAgICBpZiAoYS5wYXJlbnROb2RlICYmIGEucGFyZW50Tm9kZS5wYXJlbnROb2RlID09IGIucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICAgICAgYi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIGEucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlYWRTZWwgPSBudWxsO1xuICAgICAgICAvLyBJZiBpdCBsb29rcyBsaWtlIHRoZSBicm93c2VyIGhhcyByZXNldCB0aGUgc2VsZWN0aW9uIHRvIHRoZVxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgZm9jdXMsIHJlc3RvcmUgdGhlIHNlbGVjdGlvbiBmcm9tXG4gICAgICAgIC8vIHRoZSBzdGF0ZVxuICAgICAgICBpZiAoZnJvbSA8IDAgJiYgbmV3U2VsICYmIHZpZXcuaW5wdXQubGFzdEZvY3VzID4gRGF0ZS5ub3coKSAtIDIwMCAmJlxuICAgICAgICAgICAgTWF0aC5tYXgodmlldy5pbnB1dC5sYXN0VG91Y2gsIHZpZXcuaW5wdXQubGFzdENsaWNrLnRpbWUpIDwgRGF0ZS5ub3coKSAtIDMwMCAmJlxuICAgICAgICAgICAgc2VsZWN0aW9uQ29sbGFwc2VkKHNlbCkgJiYgKHJlYWRTZWwgPSBzZWxlY3Rpb25Gcm9tRE9NKHZpZXcpKSAmJlxuICAgICAgICAgICAgcmVhZFNlbC5lcShTZWxlY3Rpb24ubmVhcih2aWV3LnN0YXRlLmRvYy5yZXNvbHZlKDApLCAxKSkpIHtcbiAgICAgICAgICAgIHZpZXcuaW5wdXQubGFzdEZvY3VzID0gMDtcbiAgICAgICAgICAgIHNlbGVjdGlvblRvRE9NKHZpZXcpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VsZWN0aW9uLnNldChzZWwpO1xuICAgICAgICAgICAgdmlldy5zY3JvbGxUb1NlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGZyb20gPiAtMSB8fCBuZXdTZWwpIHtcbiAgICAgICAgICAgIGlmIChmcm9tID4gLTEpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmRvY1ZpZXcubWFya0RpcnR5KGZyb20sIHRvKTtcbiAgICAgICAgICAgICAgICBjaGVja0NTUyh2aWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRE9NQ2hhbmdlKGZyb20sIHRvLCB0eXBlT3ZlciwgYWRkZWQpO1xuICAgICAgICAgICAgaWYgKHZpZXcuZG9jVmlldyAmJiB2aWV3LmRvY1ZpZXcuZGlydHkpXG4gICAgICAgICAgICAgICAgdmlldy51cGRhdGVTdGF0ZSh2aWV3LnN0YXRlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoc2VsKSlcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25Ub0RPTSh2aWV3KTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlbGVjdGlvbi5zZXQoc2VsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWdpc3Rlck11dGF0aW9uKG11dCwgYWRkZWQpIHtcbiAgICAgICAgLy8gSWdub3JlIG11dGF0aW9ucyBpbnNpZGUgbm9kZXMgdGhhdCB3ZXJlIGFscmVhZHkgbm90ZWQgYXMgaW5zZXJ0ZWRcbiAgICAgICAgaWYgKGFkZGVkLmluZGV4T2YobXV0LnRhcmdldCkgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgZGVzYyA9IHRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKG11dC50YXJnZXQpO1xuICAgICAgICBpZiAobXV0LnR5cGUgPT0gXCJhdHRyaWJ1dGVzXCIgJiZcbiAgICAgICAgICAgIChkZXNjID09IHRoaXMudmlldy5kb2NWaWV3IHx8IG11dC5hdHRyaWJ1dGVOYW1lID09IFwiY29udGVudGVkaXRhYmxlXCIgfHxcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IHNvbWV0aW1lcyBmaXJlcyBzcHVyaW91cyBldmVudHMgZm9yIG51bGwvZW1wdHkgc3R5bGVzXG4gICAgICAgICAgICAgICAgKG11dC5hdHRyaWJ1dGVOYW1lID09IFwic3R5bGVcIiAmJiAhbXV0Lm9sZFZhbHVlICYmICFtdXQudGFyZ2V0LmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSkpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKCFkZXNjIHx8IGRlc2MuaWdub3JlTXV0YXRpb24obXV0KSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAobXV0LnR5cGUgPT0gXCJjaGlsZExpc3RcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXQuYWRkZWROb2Rlcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBhZGRlZC5wdXNoKG11dC5hZGRlZE5vZGVzW2ldKTtcbiAgICAgICAgICAgIGlmIChkZXNjLmNvbnRlbnRET00gJiYgZGVzYy5jb250ZW50RE9NICE9IGRlc2MuZG9tICYmICFkZXNjLmNvbnRlbnRET00uY29udGFpbnMobXV0LnRhcmdldCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZGVzYy5wb3NCZWZvcmUsIHRvOiBkZXNjLnBvc0FmdGVyIH07XG4gICAgICAgICAgICBsZXQgcHJldiA9IG11dC5wcmV2aW91c1NpYmxpbmcsIG5leHQgPSBtdXQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoaWUgJiYgaWVfdmVyc2lvbiA8PSAxMSAmJiBtdXQuYWRkZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvLyBJRTExIGdpdmVzIHVzIGluY29ycmVjdCBuZXh0L3ByZXYgc2libGluZ3MgZm9yIHNvbWVcbiAgICAgICAgICAgICAgICAvLyBpbnNlcnRpb25zLCBzbyBpZiB0aGVyZSBhcmUgYWRkZWQgbm9kZXMsIHJlY29tcHV0ZSB0aG9zZVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0LmFkZGVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHsgcHJldmlvdXNTaWJsaW5nLCBuZXh0U2libGluZyB9ID0gbXV0LmFkZGVkTm9kZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldmlvdXNTaWJsaW5nIHx8IEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwobXV0LmFkZGVkTm9kZXMsIHByZXZpb3VzU2libGluZykgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IHByZXZpb3VzU2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0U2libGluZyB8fCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKG11dC5hZGRlZE5vZGVzLCBuZXh0U2libGluZykgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmcm9tT2Zmc2V0ID0gcHJldiAmJiBwcmV2LnBhcmVudE5vZGUgPT0gbXV0LnRhcmdldFxuICAgICAgICAgICAgICAgID8gZG9tSW5kZXgocHJldikgKyAxIDogMDtcbiAgICAgICAgICAgIGxldCBmcm9tID0gZGVzYy5sb2NhbFBvc0Zyb21ET00obXV0LnRhcmdldCwgZnJvbU9mZnNldCwgLTEpO1xuICAgICAgICAgICAgbGV0IHRvT2Zmc2V0ID0gbmV4dCAmJiBuZXh0LnBhcmVudE5vZGUgPT0gbXV0LnRhcmdldFxuICAgICAgICAgICAgICAgID8gZG9tSW5kZXgobmV4dCkgOiBtdXQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHRvID0gZGVzYy5sb2NhbFBvc0Zyb21ET00obXV0LnRhcmdldCwgdG9PZmZzZXQsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8gfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtdXQudHlwZSA9PSBcImF0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbTogZGVzYy5wb3NBdFN0YXJ0IC0gZGVzYy5ib3JkZXIsIHRvOiBkZXNjLnBvc0F0RW5kICsgZGVzYy5ib3JkZXIgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gXCJjaGFyYWN0ZXJEYXRhXCJcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZnJvbTogZGVzYy5wb3NBdFN0YXJ0LFxuICAgICAgICAgICAgICAgIHRvOiBkZXNjLnBvc0F0RW5kLFxuICAgICAgICAgICAgICAgIC8vIEFuIGV2ZW50IHdhcyBnZW5lcmF0ZWQgZm9yIGEgdGV4dCBjaGFuZ2UgdGhhdCBkaWRuJ3QgY2hhbmdlXG4gICAgICAgICAgICAgICAgLy8gYW55IHRleHQuIE1hcmsgdGhlIGRvbSBjaGFuZ2UgdG8gZmFsbCBiYWNrIHRvIGFzc3VtaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvbiB3YXMgdHlwZWQgb3ZlciB3aXRoIGFuIGlkZW50aWNhbCB2YWx1ZSBpZiBpdCBjYW4ndFxuICAgICAgICAgICAgICAgIC8vIGZpbmQgYW5vdGhlciBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgdHlwZU92ZXI6IG11dC50YXJnZXQubm9kZVZhbHVlID09IG11dC5vbGRWYWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBjc3NDaGVja2VkID0gbmV3IFdlYWtNYXAoKTtcbmxldCBjc3NDaGVja1dhcm5lZCA9IGZhbHNlO1xuZnVuY3Rpb24gY2hlY2tDU1Modmlldykge1xuICAgIGlmIChjc3NDaGVja2VkLmhhcyh2aWV3KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNzc0NoZWNrZWQuc2V0KHZpZXcsIG51bGwpO1xuICAgIGlmIChbJ25vcm1hbCcsICdub3dyYXAnLCAncHJlLWxpbmUnXS5pbmRleE9mKGdldENvbXB1dGVkU3R5bGUodmlldy5kb20pLndoaXRlU3BhY2UpICE9PSAtMSkge1xuICAgICAgICB2aWV3LnJlcXVpcmVzR2Vja29IYWNrTm9kZSA9IGdlY2tvO1xuICAgICAgICBpZiAoY3NzQ2hlY2tXYXJuZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnNvbGVbXCJ3YXJuXCJdKFwiUHJvc2VNaXJyb3IgZXhwZWN0cyB0aGUgQ1NTIHdoaXRlLXNwYWNlIHByb3BlcnR5IHRvIGJlIHNldCwgcHJlZmVyYWJseSB0byAncHJlLXdyYXAnLiBJdCBpcyByZWNvbW1lbmRlZCB0byBsb2FkIHN0eWxlL3Byb3NlbWlycm9yLmNzcyBmcm9tIHRoZSBwcm9zZW1pcnJvci12aWV3IHBhY2thZ2UuXCIpO1xuICAgICAgICBjc3NDaGVja1dhcm5lZCA9IHRydWU7XG4gICAgfVxufVxuLy8gVXNlZCB0byB3b3JrIGFyb3VuZCBhIFNhZmFyaSBTZWxlY3Rpb24vc2hhZG93IERPTSBidWdcbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2RlbWlycm9yL2Rldi9pc3N1ZXMvNDE0IGZpeFxuZnVuY3Rpb24gc2FmYXJpU2hhZG93U2VsZWN0aW9uUmFuZ2Uodmlldykge1xuICAgIGxldCBmb3VuZDtcbiAgICBmdW5jdGlvbiByZWFkKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICBmb3VuZCA9IGV2ZW50LmdldFRhcmdldFJhbmdlcygpWzBdO1xuICAgIH1cbiAgICAvLyBCZWNhdXNlIFNhZmFyaSAoYXQgbGVhc3QgaW4gMjAxOC0yMDIyKSBkb2Vzbid0IHByb3ZpZGUgcmVndWxhclxuICAgIC8vIGFjY2VzcyB0byB0aGUgc2VsZWN0aW9uIGluc2lkZSBhIHNoYWRvd1Jvb3QsIHdlIGhhdmUgdG8gcGVyZm9ybSBhXG4gICAgLy8gcmlkaWN1bG91cyBoYWNrIHRvIGdldCBhdCBpdOKAlHVzaW5nIGBleGVjQ29tbWFuZGAgdG8gdHJpZ2dlciBhXG4gICAgLy8gYGJlZm9yZUlucHV0YCBldmVudCBzbyB0aGF0IHdlIGNhbiByZWFkIHRoZSB0YXJnZXQgcmFuZ2UgZnJvbSB0aGVcbiAgICAvLyBldmVudC5cbiAgICB2aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JlaW5wdXRcIiwgcmVhZCwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJpbmRlbnRcIik7XG4gICAgdmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJlZm9yZWlucHV0XCIsIHJlYWQsIHRydWUpO1xuICAgIGxldCBhbmNob3JOb2RlID0gZm91bmQuc3RhcnRDb250YWluZXIsIGFuY2hvck9mZnNldCA9IGZvdW5kLnN0YXJ0T2Zmc2V0O1xuICAgIGxldCBmb2N1c05vZGUgPSBmb3VuZC5lbmRDb250YWluZXIsIGZvY3VzT2Zmc2V0ID0gZm91bmQuZW5kT2Zmc2V0O1xuICAgIGxldCBjdXJyZW50QW5jaG9yID0gdmlldy5kb21BdFBvcyh2aWV3LnN0YXRlLnNlbGVjdGlvbi5hbmNob3IpO1xuICAgIC8vIFNpbmNlIHN1Y2ggYSByYW5nZSBkb2Vzbid0IGRpc3Rpbmd1aXNoIGJldHdlZW4gYW5jaG9yIGFuZCBoZWFkLFxuICAgIC8vIHVzZSBhIGhldXJpc3RpYyB0aGF0IGZsaXBzIGl0IGFyb3VuZCBpZiBpdHMgZW5kIG1hdGNoZXMgdGhlXG4gICAgLy8gY3VycmVudCBhbmNob3IuXG4gICAgaWYgKGlzRXF1aXZhbGVudFBvc2l0aW9uKGN1cnJlbnRBbmNob3Iubm9kZSwgY3VycmVudEFuY2hvci5vZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpKVxuICAgICAgICBbYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0LCBmb2N1c05vZGUsIGZvY3VzT2Zmc2V0XSA9IFtmb2N1c05vZGUsIGZvY3VzT2Zmc2V0LCBhbmNob3JOb2RlLCBhbmNob3JPZmZzZXRdO1xuICAgIHJldHVybiB7IGFuY2hvck5vZGUsIGFuY2hvck9mZnNldCwgZm9jdXNOb2RlLCBmb2N1c09mZnNldCB9O1xufVxuXG4vLyBOb3RlIHRoYXQgYWxsIHJlZmVyZW5jaW5nIGFuZCBwYXJzaW5nIGlzIGRvbmUgd2l0aCB0aGVcbi8vIHN0YXJ0LW9mLW9wZXJhdGlvbiBzZWxlY3Rpb24gYW5kIGRvY3VtZW50LCBzaW5jZSB0aGF0J3MgdGhlIG9uZVxuLy8gdGhhdCB0aGUgRE9NIHJlcHJlc2VudHMuIElmIGFueSBjaGFuZ2VzIGNhbWUgaW4gaW4gdGhlIG1lYW50aW1lLFxuLy8gdGhlIG1vZGlmaWNhdGlvbiBpcyBtYXBwZWQgb3ZlciB0aG9zZSBiZWZvcmUgaXQgaXMgYXBwbGllZCwgaW5cbi8vIHJlYWRET01DaGFuZ2UuXG5mdW5jdGlvbiBwYXJzZUJldHdlZW4odmlldywgZnJvbV8sIHRvXykge1xuICAgIGxldCB7IG5vZGU6IHBhcmVudCwgZnJvbU9mZnNldCwgdG9PZmZzZXQsIGZyb20sIHRvIH0gPSB2aWV3LmRvY1ZpZXcucGFyc2VSYW5nZShmcm9tXywgdG9fKTtcbiAgICBsZXQgZG9tU2VsID0gdmlldy5kb21TZWxlY3Rpb25SYW5nZSgpO1xuICAgIGxldCBmaW5kO1xuICAgIGxldCBhbmNob3IgPSBkb21TZWwuYW5jaG9yTm9kZTtcbiAgICBpZiAoYW5jaG9yICYmIHZpZXcuZG9tLmNvbnRhaW5zKGFuY2hvci5ub2RlVHlwZSA9PSAxID8gYW5jaG9yIDogYW5jaG9yLnBhcmVudE5vZGUpKSB7XG4gICAgICAgIGZpbmQgPSBbeyBub2RlOiBhbmNob3IsIG9mZnNldDogZG9tU2VsLmFuY2hvck9mZnNldCB9XTtcbiAgICAgICAgaWYgKCFzZWxlY3Rpb25Db2xsYXBzZWQoZG9tU2VsKSlcbiAgICAgICAgICAgIGZpbmQucHVzaCh7IG5vZGU6IGRvbVNlbC5mb2N1c05vZGUsIG9mZnNldDogZG9tU2VsLmZvY3VzT2Zmc2V0IH0pO1xuICAgIH1cbiAgICAvLyBXb3JrIGFyb3VuZCBpc3N1ZSBpbiBDaHJvbWUgd2hlcmUgYmFja3NwYWNpbmcgc29tZXRpbWVzIHJlcGxhY2VzXG4gICAgLy8gdGhlIGRlbGV0ZWQgY29udGVudCB3aXRoIGEgcmFuZG9tIEJSIG5vZGUgKGlzc3VlcyAjNzk5LCAjODMxKVxuICAgIGlmIChjaHJvbWUgJiYgdmlldy5pbnB1dC5sYXN0S2V5Q29kZSA9PT0gOCkge1xuICAgICAgICBmb3IgKGxldCBvZmYgPSB0b09mZnNldDsgb2ZmID4gZnJvbU9mZnNldDsgb2ZmLS0pIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gcGFyZW50LmNoaWxkTm9kZXNbb2ZmIC0gMV0sIGRlc2MgPSBub2RlLnBtVmlld0Rlc2M7XG4gICAgICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PSBcIkJSXCIgJiYgIWRlc2MpIHtcbiAgICAgICAgICAgICAgICB0b09mZnNldCA9IG9mZjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZGVzYyB8fCBkZXNjLnNpemUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHN0YXJ0RG9jID0gdmlldy5zdGF0ZS5kb2M7XG4gICAgbGV0IHBhcnNlciA9IHZpZXcuc29tZVByb3AoXCJkb21QYXJzZXJcIikgfHwgRE9NUGFyc2VyLmZyb21TY2hlbWEodmlldy5zdGF0ZS5zY2hlbWEpO1xuICAgIGxldCAkZnJvbSA9IHN0YXJ0RG9jLnJlc29sdmUoZnJvbSk7XG4gICAgbGV0IHNlbCA9IG51bGwsIGRvYyA9IHBhcnNlci5wYXJzZShwYXJlbnQsIHtcbiAgICAgICAgdG9wTm9kZTogJGZyb20ucGFyZW50LFxuICAgICAgICB0b3BNYXRjaDogJGZyb20ucGFyZW50LmNvbnRlbnRNYXRjaEF0KCRmcm9tLmluZGV4KCkpLFxuICAgICAgICB0b3BPcGVuOiB0cnVlLFxuICAgICAgICBmcm9tOiBmcm9tT2Zmc2V0LFxuICAgICAgICB0bzogdG9PZmZzZXQsXG4gICAgICAgIHByZXNlcnZlV2hpdGVzcGFjZTogJGZyb20ucGFyZW50LnR5cGUud2hpdGVzcGFjZSA9PSBcInByZVwiID8gXCJmdWxsXCIgOiB0cnVlLFxuICAgICAgICBmaW5kUG9zaXRpb25zOiBmaW5kLFxuICAgICAgICBydWxlRnJvbU5vZGUsXG4gICAgICAgIGNvbnRleHQ6ICRmcm9tXG4gICAgfSk7XG4gICAgaWYgKGZpbmQgJiYgZmluZFswXS5wb3MgIT0gbnVsbCkge1xuICAgICAgICBsZXQgYW5jaG9yID0gZmluZFswXS5wb3MsIGhlYWQgPSBmaW5kWzFdICYmIGZpbmRbMV0ucG9zO1xuICAgICAgICBpZiAoaGVhZCA9PSBudWxsKVxuICAgICAgICAgICAgaGVhZCA9IGFuY2hvcjtcbiAgICAgICAgc2VsID0geyBhbmNob3I6IGFuY2hvciArIGZyb20sIGhlYWQ6IGhlYWQgKyBmcm9tIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRvYywgc2VsLCBmcm9tLCB0byB9O1xufVxuZnVuY3Rpb24gcnVsZUZyb21Ob2RlKGRvbSkge1xuICAgIGxldCBkZXNjID0gZG9tLnBtVmlld0Rlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MucGFyc2VSdWxlKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvbS5ub2RlTmFtZSA9PSBcIkJSXCIgJiYgZG9tLnBhcmVudE5vZGUpIHtcbiAgICAgICAgLy8gU2FmYXJpIHJlcGxhY2VzIHRoZSBsaXN0IGl0ZW0gb3IgdGFibGUgY2VsbCB3aXRoIGEgQlJcbiAgICAgICAgLy8gZGlyZWN0bHkgaW4gdGhlIGxpc3Qgbm9kZSAoPyEpIGlmIHlvdSBkZWxldGUgdGhlIGxhc3RcbiAgICAgICAgLy8gY2hhcmFjdGVyIGluIGEgbGlzdCBpdGVtIG9yIHRhYmxlIGNlbGwgKCM3MDgsICM4NjIpXG4gICAgICAgIGlmIChzYWZhcmkgJiYgL14odWx8b2wpJC9pLnRlc3QoZG9tLnBhcmVudE5vZGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICBsZXQgc2tpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBza2lwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKSk7XG4gICAgICAgICAgICByZXR1cm4geyBza2lwIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZG9tLnBhcmVudE5vZGUubGFzdENoaWxkID09IGRvbSB8fCBzYWZhcmkgJiYgL14odHJ8dGFibGUpJC9pLnRlc3QoZG9tLnBhcmVudE5vZGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpZ25vcmU6IHRydWUgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChkb20ubm9kZU5hbWUgPT0gXCJJTUdcIiAmJiBkb20uZ2V0QXR0cmlidXRlKFwibWFyay1wbGFjZWhvbGRlclwiKSkge1xuICAgICAgICByZXR1cm4geyBpZ25vcmU6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBpc0lubGluZSA9IC9eKGF8YWJicnxhY3JvbnltfGJ8YmRbaW9dfGJpZ3xicnxidXR0b258Y2l0ZXxjb2RlfGRhdGEobGlzdCk/fGRlbHxkZm58ZW18aXxpbnN8a2JkfGxhYmVsfG1hcHxtYXJrfG1ldGVyfG91dHB1dHxxfHJ1Ynl8c3xzYW1wfHNtYWxsfHNwYW58c3Ryb25nfHN1W2JwXXx0aW1lfHV8dHR8dmFyKSQvaTtcbmZ1bmN0aW9uIHJlYWRET01DaGFuZ2UodmlldywgZnJvbSwgdG8sIHR5cGVPdmVyLCBhZGRlZE5vZGVzKSB7XG4gICAgaWYgKGZyb20gPCAwKSB7XG4gICAgICAgIGxldCBvcmlnaW4gPSB2aWV3LmlucHV0Lmxhc3RTZWxlY3Rpb25UaW1lID4gRGF0ZS5ub3coKSAtIDUwID8gdmlldy5pbnB1dC5sYXN0U2VsZWN0aW9uT3JpZ2luIDogbnVsbDtcbiAgICAgICAgbGV0IG5ld1NlbCA9IHNlbGVjdGlvbkZyb21ET00odmlldywgb3JpZ2luKTtcbiAgICAgICAgaWYgKG5ld1NlbCAmJiAhdmlldy5zdGF0ZS5zZWxlY3Rpb24uZXEobmV3U2VsKSkge1xuICAgICAgICAgICAgaWYgKGNocm9tZSAmJiBhbmRyb2lkICYmXG4gICAgICAgICAgICAgICAgdmlldy5pbnB1dC5sYXN0S2V5Q29kZSA9PT0gMTMgJiYgRGF0ZS5ub3coKSAtIDEwMCA8IHZpZXcuaW5wdXQubGFzdEtleUNvZGVUaW1lICYmXG4gICAgICAgICAgICAgICAgdmlldy5zb21lUHJvcChcImhhbmRsZUtleURvd25cIiwgZiA9PiBmKHZpZXcsIGtleUV2ZW50KDEzLCBcIkVudGVyXCIpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgbGV0IHRyID0gdmlldy5zdGF0ZS50ci5zZXRTZWxlY3Rpb24obmV3U2VsKTtcbiAgICAgICAgICAgIGlmIChvcmlnaW4gPT0gXCJwb2ludGVyXCIpXG4gICAgICAgICAgICAgICAgdHIuc2V0TWV0YShcInBvaW50ZXJcIiwgdHJ1ZSk7XG4gICAgICAgICAgICBlbHNlIGlmIChvcmlnaW4gPT0gXCJrZXlcIilcbiAgICAgICAgICAgICAgICB0ci5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgaWYgKHZpZXcuY29tcG9zaW5nKVxuICAgICAgICAgICAgICAgIHRyLnNldE1ldGEoXCJjb21wb3NpdGlvblwiLCB2aWV3LmlucHV0LmNvbXBvc2l0aW9uSUQpO1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgJGJlZm9yZSA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZnJvbSk7XG4gICAgbGV0IHNoYXJlZCA9ICRiZWZvcmUuc2hhcmVkRGVwdGgodG8pO1xuICAgIGZyb20gPSAkYmVmb3JlLmJlZm9yZShzaGFyZWQgKyAxKTtcbiAgICB0byA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUodG8pLmFmdGVyKHNoYXJlZCArIDEpO1xuICAgIGxldCBzZWwgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBsZXQgcGFyc2UgPSBwYXJzZUJldHdlZW4odmlldywgZnJvbSwgdG8pO1xuICAgIGxldCBkb2MgPSB2aWV3LnN0YXRlLmRvYywgY29tcGFyZSA9IGRvYy5zbGljZShwYXJzZS5mcm9tLCBwYXJzZS50byk7XG4gICAgbGV0IHByZWZlcnJlZFBvcywgcHJlZmVycmVkU2lkZTtcbiAgICAvLyBQcmVmZXIgYW5jaG9yaW5nIHRvIGVuZCB3aGVuIEJhY2tzcGFjZSBpcyBwcmVzc2VkXG4gICAgaWYgKHZpZXcuaW5wdXQubGFzdEtleUNvZGUgPT09IDggJiYgRGF0ZS5ub3coKSAtIDEwMCA8IHZpZXcuaW5wdXQubGFzdEtleUNvZGVUaW1lKSB7XG4gICAgICAgIHByZWZlcnJlZFBvcyA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLnRvO1xuICAgICAgICBwcmVmZXJyZWRTaWRlID0gXCJlbmRcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByZWZlcnJlZFBvcyA9IHZpZXcuc3RhdGUuc2VsZWN0aW9uLmZyb207XG4gICAgICAgIHByZWZlcnJlZFNpZGUgPSBcInN0YXJ0XCI7XG4gICAgfVxuICAgIHZpZXcuaW5wdXQubGFzdEtleUNvZGUgPSBudWxsO1xuICAgIGxldCBjaGFuZ2UgPSBmaW5kRGlmZihjb21wYXJlLmNvbnRlbnQsIHBhcnNlLmRvYy5jb250ZW50LCBwYXJzZS5mcm9tLCBwcmVmZXJyZWRQb3MsIHByZWZlcnJlZFNpZGUpO1xuICAgIGlmICgoaW9zICYmIHZpZXcuaW5wdXQubGFzdElPU0VudGVyID4gRGF0ZS5ub3coKSAtIDIyNSB8fCBhbmRyb2lkKSAmJlxuICAgICAgICBhZGRlZE5vZGVzLnNvbWUobiA9PiBuLm5vZGVUeXBlID09IDEgJiYgIWlzSW5saW5lLnRlc3Qobi5ub2RlTmFtZSkpICYmXG4gICAgICAgICghY2hhbmdlIHx8IGNoYW5nZS5lbmRBID49IGNoYW5nZS5lbmRCKSAmJlxuICAgICAgICB2aWV3LnNvbWVQcm9wKFwiaGFuZGxlS2V5RG93blwiLCBmID0+IGYodmlldywga2V5RXZlbnQoMTMsIFwiRW50ZXJcIikpKSkge1xuICAgICAgICB2aWV3LmlucHV0Lmxhc3RJT1NFbnRlciA9IDA7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFjaGFuZ2UpIHtcbiAgICAgICAgaWYgKHR5cGVPdmVyICYmIHNlbCBpbnN0YW5jZW9mIFRleHRTZWxlY3Rpb24gJiYgIXNlbC5lbXB0eSAmJiBzZWwuJGhlYWQuc2FtZVBhcmVudChzZWwuJGFuY2hvcikgJiZcbiAgICAgICAgICAgICF2aWV3LmNvbXBvc2luZyAmJiAhKHBhcnNlLnNlbCAmJiBwYXJzZS5zZWwuYW5jaG9yICE9IHBhcnNlLnNlbC5oZWFkKSkge1xuICAgICAgICAgICAgY2hhbmdlID0geyBzdGFydDogc2VsLmZyb20sIGVuZEE6IHNlbC50bywgZW5kQjogc2VsLnRvIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocGFyc2Uuc2VsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNlbCA9IHJlc29sdmVTZWxlY3Rpb24odmlldywgdmlldy5zdGF0ZS5kb2MsIHBhcnNlLnNlbCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbCAmJiAhc2VsLmVxKHZpZXcuc3RhdGUuc2VsZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdHIgPSB2aWV3LnN0YXRlLnRyLnNldFNlbGVjdGlvbihzZWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlldy5jb21wb3NpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0ci5zZXRNZXRhKFwiY29tcG9zaXRpb25cIiwgdmlldy5pbnB1dC5jb21wb3NpdGlvbklEKTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENocm9tZSBzb21ldGltZXMgbGVhdmVzIHRoZSBjdXJzb3IgYmVmb3JlIHRoZSBpbnNlcnRlZCB0ZXh0IHdoZW5cbiAgICAvLyBjb21wb3NpbmcgYWZ0ZXIgYSBjdXJzb3Igd3JhcHBlci4gVGhpcyBtb3ZlcyBpdCBmb3J3YXJkLlxuICAgIGlmIChjaHJvbWUgJiYgdmlldy5jdXJzb3JXcmFwcGVyICYmIHBhcnNlLnNlbCAmJiBwYXJzZS5zZWwuYW5jaG9yID09IHZpZXcuY3Vyc29yV3JhcHBlci5kZWNvLmZyb20gJiZcbiAgICAgICAgcGFyc2Uuc2VsLmhlYWQgPT0gcGFyc2Uuc2VsLmFuY2hvcikge1xuICAgICAgICBsZXQgc2l6ZSA9IGNoYW5nZS5lbmRCIC0gY2hhbmdlLnN0YXJ0O1xuICAgICAgICBwYXJzZS5zZWwgPSB7IGFuY2hvcjogcGFyc2Uuc2VsLmFuY2hvciArIHNpemUsIGhlYWQ6IHBhcnNlLnNlbC5hbmNob3IgKyBzaXplIH07XG4gICAgfVxuICAgIHZpZXcuaW5wdXQuZG9tQ2hhbmdlQ291bnQrKztcbiAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgb3ZlcndyaXRpbmcgYSBzZWxlY3Rpb24gYnkgdHlwaW5nIG1hdGNoZXNcbiAgICAvLyB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBzZWxlY3RlZCBjb250ZW50LCBjcmVhdGluZyBhIGNoYW5nZVxuICAgIC8vIHRoYXQncyBzbWFsbGVyIHRoYW4gd2hhdCB3YXMgYWN0dWFsbHkgb3ZlcndyaXR0ZW4uXG4gICAgaWYgKHZpZXcuc3RhdGUuc2VsZWN0aW9uLmZyb20gPCB2aWV3LnN0YXRlLnNlbGVjdGlvbi50byAmJlxuICAgICAgICBjaGFuZ2Uuc3RhcnQgPT0gY2hhbmdlLmVuZEIgJiZcbiAgICAgICAgdmlldy5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBUZXh0U2VsZWN0aW9uKSB7XG4gICAgICAgIGlmIChjaGFuZ2Uuc3RhcnQgPiB2aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tICYmIGNoYW5nZS5zdGFydCA8PSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tICsgMiAmJlxuICAgICAgICAgICAgdmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSA+PSBwYXJzZS5mcm9tKSB7XG4gICAgICAgICAgICBjaGFuZ2Uuc3RhcnQgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoYW5nZS5lbmRBIDwgdmlldy5zdGF0ZS5zZWxlY3Rpb24udG8gJiYgY2hhbmdlLmVuZEEgPj0gdmlldy5zdGF0ZS5zZWxlY3Rpb24udG8gLSAyICYmXG4gICAgICAgICAgICB2aWV3LnN0YXRlLnNlbGVjdGlvbi50byA8PSBwYXJzZS50bykge1xuICAgICAgICAgICAgY2hhbmdlLmVuZEIgKz0gKHZpZXcuc3RhdGUuc2VsZWN0aW9uLnRvIC0gY2hhbmdlLmVuZEEpO1xuICAgICAgICAgICAgY2hhbmdlLmVuZEEgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi50bztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJRTExIHdpbGwgaW5zZXJ0IGEgbm9uLWJyZWFraW5nIHNwYWNlIF9haGVhZF8gb2YgdGhlIHNwYWNlIGFmdGVyXG4gICAgLy8gdGhlIGN1cnNvciBzcGFjZSB3aGVuIGFkZGluZyBhIHNwYWNlIGJlZm9yZSBhbm90aGVyIHNwYWNlLiBXaGVuXG4gICAgLy8gdGhhdCBoYXBwZW5lZCwgYWRqdXN0IHRoZSBjaGFuZ2UgdG8gY292ZXIgdGhlIHNwYWNlIGluc3RlYWQuXG4gICAgaWYgKGllICYmIGllX3ZlcnNpb24gPD0gMTEgJiYgY2hhbmdlLmVuZEIgPT0gY2hhbmdlLnN0YXJ0ICsgMSAmJlxuICAgICAgICBjaGFuZ2UuZW5kQSA9PSBjaGFuZ2Uuc3RhcnQgJiYgY2hhbmdlLnN0YXJ0ID4gcGFyc2UuZnJvbSAmJlxuICAgICAgICBwYXJzZS5kb2MudGV4dEJldHdlZW4oY2hhbmdlLnN0YXJ0IC0gcGFyc2UuZnJvbSAtIDEsIGNoYW5nZS5zdGFydCAtIHBhcnNlLmZyb20gKyAxKSA9PSBcIiBcXHUwMGEwXCIpIHtcbiAgICAgICAgY2hhbmdlLnN0YXJ0LS07XG4gICAgICAgIGNoYW5nZS5lbmRBLS07XG4gICAgICAgIGNoYW5nZS5lbmRCLS07XG4gICAgfVxuICAgIGxldCAkZnJvbSA9IHBhcnNlLmRvYy5yZXNvbHZlTm9DYWNoZShjaGFuZ2Uuc3RhcnQgLSBwYXJzZS5mcm9tKTtcbiAgICBsZXQgJHRvID0gcGFyc2UuZG9jLnJlc29sdmVOb0NhY2hlKGNoYW5nZS5lbmRCIC0gcGFyc2UuZnJvbSk7XG4gICAgbGV0ICRmcm9tQSA9IGRvYy5yZXNvbHZlKGNoYW5nZS5zdGFydCk7XG4gICAgbGV0IGlubGluZUNoYW5nZSA9ICRmcm9tLnNhbWVQYXJlbnQoJHRvKSAmJiAkZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudCAmJiAkZnJvbUEuZW5kKCkgPj0gY2hhbmdlLmVuZEE7XG4gICAgbGV0IG5leHRTZWw7XG4gICAgLy8gSWYgdGhpcyBsb29rcyBsaWtlIHRoZSBlZmZlY3Qgb2YgcHJlc3NpbmcgRW50ZXIgKG9yIHdhcyByZWNvcmRlZFxuICAgIC8vIGFzIGJlaW5nIGFuIGlPUyBlbnRlciBwcmVzcyksIGp1c3QgZGlzcGF0Y2ggYW4gRW50ZXIga2V5IGluc3RlYWQuXG4gICAgaWYgKCgoaW9zICYmIHZpZXcuaW5wdXQubGFzdElPU0VudGVyID4gRGF0ZS5ub3coKSAtIDIyNSAmJlxuICAgICAgICAoIWlubGluZUNoYW5nZSB8fCBhZGRlZE5vZGVzLnNvbWUobiA9PiBuLm5vZGVOYW1lID09IFwiRElWXCIgfHwgbi5ub2RlTmFtZSA9PSBcIlBcIikpKSB8fFxuICAgICAgICAoIWlubGluZUNoYW5nZSAmJiAkZnJvbS5wb3MgPCBwYXJzZS5kb2MuY29udGVudC5zaXplICYmICEkZnJvbS5zYW1lUGFyZW50KCR0bykgJiZcbiAgICAgICAgICAgIChuZXh0U2VsID0gU2VsZWN0aW9uLmZpbmRGcm9tKHBhcnNlLmRvYy5yZXNvbHZlKCRmcm9tLnBvcyArIDEpLCAxLCB0cnVlKSkgJiZcbiAgICAgICAgICAgIG5leHRTZWwuaGVhZCA9PSAkdG8ucG9zKSkgJiZcbiAgICAgICAgdmlldy5zb21lUHJvcChcImhhbmRsZUtleURvd25cIiwgZiA9PiBmKHZpZXcsIGtleUV2ZW50KDEzLCBcIkVudGVyXCIpKSkpIHtcbiAgICAgICAgdmlldy5pbnB1dC5sYXN0SU9TRW50ZXIgPSAwO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNhbWUgZm9yIGJhY2tzcGFjZVxuICAgIGlmICh2aWV3LnN0YXRlLnNlbGVjdGlvbi5hbmNob3IgPiBjaGFuZ2Uuc3RhcnQgJiZcbiAgICAgICAgbG9va3NMaWtlSm9pbihkb2MsIGNoYW5nZS5zdGFydCwgY2hhbmdlLmVuZEEsICRmcm9tLCAkdG8pICYmXG4gICAgICAgIHZpZXcuc29tZVByb3AoXCJoYW5kbGVLZXlEb3duXCIsIGYgPT4gZih2aWV3LCBrZXlFdmVudCg4LCBcIkJhY2tzcGFjZVwiKSkpKSB7XG4gICAgICAgIGlmIChhbmRyb2lkICYmIGNocm9tZSlcbiAgICAgICAgICAgIHZpZXcuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCk7IC8vICM4MjBcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBDaHJvbWUgQW5kcm9pZCB3aWxsIG9jY2FzaW9uYWxseSwgZHVyaW5nIGNvbXBvc2l0aW9uLCBkZWxldGUgdGhlXG4gICAgLy8gZW50aXJlIGNvbXBvc2l0aW9uIGFuZCB0aGVuIGltbWVkaWF0ZWx5IGluc2VydCBpdCBhZ2Fpbi4gVGhpcyBpc1xuICAgIC8vIHVzZWQgdG8gZGV0ZWN0IHRoYXQgc2l0dWF0aW9uLlxuICAgIGlmIChjaHJvbWUgJiYgYW5kcm9pZCAmJiBjaGFuZ2UuZW5kQiA9PSBjaGFuZ2Uuc3RhcnQpXG4gICAgICAgIHZpZXcuaW5wdXQubGFzdEFuZHJvaWREZWxldGUgPSBEYXRlLm5vdygpO1xuICAgIC8vIFRoaXMgdHJpZXMgdG8gZGV0ZWN0IEFuZHJvaWQgdmlydHVhbCBrZXlib2FyZFxuICAgIC8vIGVudGVyLWFuZC1waWNrLXN1Z2dlc3Rpb24gYWN0aW9uLiBUaGF0IHNvbWV0aW1lcyAoc2VlIGlzc3VlXG4gICAgLy8gIzEwNTkpIGZpcnN0IGZpcmVzIGEgRE9NIG11dGF0aW9uLCBiZWZvcmUgbW92aW5nIHRoZSBzZWxlY3Rpb24gdG9cbiAgICAvLyB0aGUgbmV3bHkgY3JlYXRlZCBibG9jay4gQW5kIHRoZW4sIGJlY2F1c2UgUHJvc2VNaXJyb3IgY2xlYW5zIHVwXG4gICAgLy8gdGhlIERPTSBzZWxlY3Rpb24sIGl0IGdpdmVzIHVwIG1vdmluZyB0aGUgc2VsZWN0aW9uIGVudGlyZWx5LFxuICAgIC8vIGxlYXZpbmcgdGhlIGN1cnNvciBpbiB0aGUgd3JvbmcgcGxhY2UuIFdoZW4gdGhhdCBoYXBwZW5zLCB3ZSBkcm9wXG4gICAgLy8gdGhlIG5ldyBwYXJhZ3JhcGggZnJvbSB0aGUgaW5pdGlhbCBjaGFuZ2UsIGFuZCBmaXJlIGEgc2ltdWxhdGVkXG4gICAgLy8gZW50ZXIga2V5IGFmdGVyd2FyZHMuXG4gICAgaWYgKGFuZHJvaWQgJiYgIWlubGluZUNoYW5nZSAmJiAkZnJvbS5zdGFydCgpICE9ICR0by5zdGFydCgpICYmICR0by5wYXJlbnRPZmZzZXQgPT0gMCAmJiAkZnJvbS5kZXB0aCA9PSAkdG8uZGVwdGggJiZcbiAgICAgICAgcGFyc2Uuc2VsICYmIHBhcnNlLnNlbC5hbmNob3IgPT0gcGFyc2Uuc2VsLmhlYWQgJiYgcGFyc2Uuc2VsLmhlYWQgPT0gY2hhbmdlLmVuZEEpIHtcbiAgICAgICAgY2hhbmdlLmVuZEIgLT0gMjtcbiAgICAgICAgJHRvID0gcGFyc2UuZG9jLnJlc29sdmVOb0NhY2hlKGNoYW5nZS5lbmRCIC0gcGFyc2UuZnJvbSk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdmlldy5zb21lUHJvcChcImhhbmRsZUtleURvd25cIiwgZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYodmlldywga2V5RXZlbnQoMTMsIFwiRW50ZXJcIikpOyB9KTtcbiAgICAgICAgfSwgMjApO1xuICAgIH1cbiAgICBsZXQgY2hGcm9tID0gY2hhbmdlLnN0YXJ0LCBjaFRvID0gY2hhbmdlLmVuZEE7XG4gICAgbGV0IHRyLCBzdG9yZWRNYXJrcywgbWFya0NoYW5nZTtcbiAgICBpZiAoaW5saW5lQ2hhbmdlKSB7XG4gICAgICAgIGlmICgkZnJvbS5wb3MgPT0gJHRvLnBvcykgeyAvLyBEZWxldGlvblxuICAgICAgICAgICAgLy8gSUUxMSBzb21ldGltZXMgd2VpcmRseSBtb3ZlcyB0aGUgRE9NIHNlbGVjdGlvbiBhcm91bmQgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGJhY2tzcGFjaW5nIG91dCB0aGUgZmlyc3QgZWxlbWVudCBpbiBhIHRleHRibG9ja1xuICAgICAgICAgICAgaWYgKGllICYmIGllX3ZlcnNpb24gPD0gMTEgJiYgJGZyb20ucGFyZW50T2Zmc2V0ID09IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmRvbU9ic2VydmVyLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcygpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2VsZWN0aW9uVG9ET00odmlldyksIDIwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyID0gdmlldy5zdGF0ZS50ci5kZWxldGUoY2hGcm9tLCBjaFRvKTtcbiAgICAgICAgICAgIHN0b3JlZE1hcmtzID0gZG9jLnJlc29sdmUoY2hhbmdlLnN0YXJ0KS5tYXJrc0Fjcm9zcyhkb2MucmVzb2x2ZShjaGFuZ2UuZW5kQSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCAvLyBBZGRpbmcgb3IgcmVtb3ZpbmcgYSBtYXJrXG4gICAgICAgIGNoYW5nZS5lbmRBID09IGNoYW5nZS5lbmRCICYmXG4gICAgICAgICAgICAobWFya0NoYW5nZSA9IGlzTWFya0NoYW5nZSgkZnJvbS5wYXJlbnQuY29udGVudC5jdXQoJGZyb20ucGFyZW50T2Zmc2V0LCAkdG8ucGFyZW50T2Zmc2V0KSwgJGZyb21BLnBhcmVudC5jb250ZW50LmN1dCgkZnJvbUEucGFyZW50T2Zmc2V0LCBjaGFuZ2UuZW5kQSAtICRmcm9tQS5zdGFydCgpKSkpKSB7XG4gICAgICAgICAgICB0ciA9IHZpZXcuc3RhdGUudHI7XG4gICAgICAgICAgICBpZiAobWFya0NoYW5nZS50eXBlID09IFwiYWRkXCIpXG4gICAgICAgICAgICAgICAgdHIuYWRkTWFyayhjaEZyb20sIGNoVG8sIG1hcmtDaGFuZ2UubWFyayk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdHIucmVtb3ZlTWFyayhjaEZyb20sIGNoVG8sIG1hcmtDaGFuZ2UubWFyayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJGZyb20ucGFyZW50LmNoaWxkKCRmcm9tLmluZGV4KCkpLmlzVGV4dCAmJiAkZnJvbS5pbmRleCgpID09ICR0by5pbmRleCgpIC0gKCR0by50ZXh0T2Zmc2V0ID8gMCA6IDEpKSB7XG4gICAgICAgICAgICAvLyBCb3RoIHBvc2l0aW9ucyBpbiB0aGUgc2FtZSB0ZXh0IG5vZGUgLS0gc2ltcGx5IGluc2VydCB0ZXh0XG4gICAgICAgICAgICBsZXQgdGV4dCA9ICRmcm9tLnBhcmVudC50ZXh0QmV0d2VlbigkZnJvbS5wYXJlbnRPZmZzZXQsICR0by5wYXJlbnRPZmZzZXQpO1xuICAgICAgICAgICAgaWYgKHZpZXcuc29tZVByb3AoXCJoYW5kbGVUZXh0SW5wdXRcIiwgZiA9PiBmKHZpZXcsIGNoRnJvbSwgY2hUbywgdGV4dCkpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRyID0gdmlldy5zdGF0ZS50ci5pbnNlcnRUZXh0KHRleHQsIGNoRnJvbSwgY2hUbyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cilcbiAgICAgICAgdHIgPSB2aWV3LnN0YXRlLnRyLnJlcGxhY2UoY2hGcm9tLCBjaFRvLCBwYXJzZS5kb2Muc2xpY2UoY2hhbmdlLnN0YXJ0IC0gcGFyc2UuZnJvbSwgY2hhbmdlLmVuZEIgLSBwYXJzZS5mcm9tKSk7XG4gICAgaWYgKHBhcnNlLnNlbCkge1xuICAgICAgICBsZXQgc2VsID0gcmVzb2x2ZVNlbGVjdGlvbih2aWV3LCB0ci5kb2MsIHBhcnNlLnNlbCk7XG4gICAgICAgIC8vIENocm9tZSBBbmRyb2lkIHdpbGwgc29tZXRpbWVzLCBkdXJpbmcgY29tcG9zaXRpb24sIHJlcG9ydCB0aGVcbiAgICAgICAgLy8gc2VsZWN0aW9uIGluIHRoZSB3cm9uZyBwbGFjZS4gSWYgaXQgbG9va3MgbGlrZSB0aGF0IGlzXG4gICAgICAgIC8vIGhhcHBlbmluZywgZG9uJ3QgdXBkYXRlIHRoZSBzZWxlY3Rpb24uXG4gICAgICAgIC8vIEVkZ2UganVzdCBkb2Vzbid0IG1vdmUgdGhlIGN1cnNvciBmb3J3YXJkIHdoZW4geW91IHN0YXJ0IHR5cGluZ1xuICAgICAgICAvLyBpbiBhbiBlbXB0eSBibG9jayBvciBiZXR3ZWVuIGJyIG5vZGVzLlxuICAgICAgICBpZiAoc2VsICYmICEoY2hyb21lICYmIGFuZHJvaWQgJiYgdmlldy5jb21wb3NpbmcgJiYgc2VsLmVtcHR5ICYmXG4gICAgICAgICAgICAoY2hhbmdlLnN0YXJ0ICE9IGNoYW5nZS5lbmRCIHx8IHZpZXcuaW5wdXQubGFzdEFuZHJvaWREZWxldGUgPCBEYXRlLm5vdygpIC0gMTAwKSAmJlxuICAgICAgICAgICAgKHNlbC5oZWFkID09IGNoRnJvbSB8fCBzZWwuaGVhZCA9PSB0ci5tYXBwaW5nLm1hcChjaFRvKSAtIDEpIHx8XG4gICAgICAgICAgICBpZSAmJiBzZWwuZW1wdHkgJiYgc2VsLmhlYWQgPT0gY2hGcm9tKSlcbiAgICAgICAgICAgIHRyLnNldFNlbGVjdGlvbihzZWwpO1xuICAgIH1cbiAgICBpZiAoc3RvcmVkTWFya3MpXG4gICAgICAgIHRyLmVuc3VyZU1hcmtzKHN0b3JlZE1hcmtzKTtcbiAgICBpZiAodmlldy5jb21wb3NpbmcpXG4gICAgICAgIHRyLnNldE1ldGEoXCJjb21wb3NpdGlvblwiLCB2aWV3LmlucHV0LmNvbXBvc2l0aW9uSUQpO1xuICAgIHZpZXcuZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG59XG5mdW5jdGlvbiByZXNvbHZlU2VsZWN0aW9uKHZpZXcsIGRvYywgcGFyc2VkU2VsKSB7XG4gICAgaWYgKE1hdGgubWF4KHBhcnNlZFNlbC5hbmNob3IsIHBhcnNlZFNlbC5oZWFkKSA+IGRvYy5jb250ZW50LnNpemUpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiBzZWxlY3Rpb25CZXR3ZWVuKHZpZXcsIGRvYy5yZXNvbHZlKHBhcnNlZFNlbC5hbmNob3IpLCBkb2MucmVzb2x2ZShwYXJzZWRTZWwuaGVhZCkpO1xufVxuLy8gR2l2ZW4gdHdvIHNhbWUtbGVuZ3RoLCBub24tZW1wdHkgZnJhZ21lbnRzIG9mIGlubGluZSBjb250ZW50LFxuLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGZpcnN0IGNvdWxkIGJlIGNyZWF0ZWQgZnJvbSB0aGUgc2Vjb25kIGJ5XG4vLyByZW1vdmluZyBvciBhZGRpbmcgYSBzaW5nbGUgbWFyayB0eXBlLlxuZnVuY3Rpb24gaXNNYXJrQ2hhbmdlKGN1ciwgcHJldikge1xuICAgIGxldCBjdXJNYXJrcyA9IGN1ci5maXJzdENoaWxkLm1hcmtzLCBwcmV2TWFya3MgPSBwcmV2LmZpcnN0Q2hpbGQubWFya3M7XG4gICAgbGV0IGFkZGVkID0gY3VyTWFya3MsIHJlbW92ZWQgPSBwcmV2TWFya3MsIHR5cGUsIG1hcmssIHVwZGF0ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByZXZNYXJrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgYWRkZWQgPSBwcmV2TWFya3NbaV0ucmVtb3ZlRnJvbVNldChhZGRlZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjdXJNYXJrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgcmVtb3ZlZCA9IGN1ck1hcmtzW2ldLnJlbW92ZUZyb21TZXQocmVtb3ZlZCk7XG4gICAgaWYgKGFkZGVkLmxlbmd0aCA9PSAxICYmIHJlbW92ZWQubGVuZ3RoID09IDApIHtcbiAgICAgICAgbWFyayA9IGFkZGVkWzBdO1xuICAgICAgICB0eXBlID0gXCJhZGRcIjtcbiAgICAgICAgdXBkYXRlID0gKG5vZGUpID0+IG5vZGUubWFyayhtYXJrLmFkZFRvU2V0KG5vZGUubWFya3MpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWRkZWQubGVuZ3RoID09IDAgJiYgcmVtb3ZlZC5sZW5ndGggPT0gMSkge1xuICAgICAgICBtYXJrID0gcmVtb3ZlZFswXTtcbiAgICAgICAgdHlwZSA9IFwicmVtb3ZlXCI7XG4gICAgICAgIHVwZGF0ZSA9IChub2RlKSA9PiBub2RlLm1hcmsobWFyay5yZW1vdmVGcm9tU2V0KG5vZGUubWFya3MpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgdXBkYXRlZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5jaGlsZENvdW50OyBpKyspXG4gICAgICAgIHVwZGF0ZWQucHVzaCh1cGRhdGUocHJldi5jaGlsZChpKSkpO1xuICAgIGlmIChGcmFnbWVudC5mcm9tKHVwZGF0ZWQpLmVxKGN1cikpXG4gICAgICAgIHJldHVybiB7IG1hcmssIHR5cGUgfTtcbn1cbmZ1bmN0aW9uIGxvb2tzTGlrZUpvaW4ob2xkLCBzdGFydCwgZW5kLCAkbmV3U3RhcnQsICRuZXdFbmQpIHtcbiAgICBpZiAoISRuZXdTdGFydC5wYXJlbnQuaXNUZXh0YmxvY2sgfHxcbiAgICAgICAgLy8gVGhlIGNvbnRlbnQgbXVzdCBoYXZlIHNocnVua1xuICAgICAgICBlbmQgLSBzdGFydCA8PSAkbmV3RW5kLnBvcyAtICRuZXdTdGFydC5wb3MgfHxcbiAgICAgICAgLy8gbmV3RW5kIG11c3QgcG9pbnQgZGlyZWN0bHkgYXQgb3IgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgYmxvY2sgdGhhdCBuZXdTdGFydCBwb2ludHMgaW50b1xuICAgICAgICBza2lwQ2xvc2luZ0FuZE9wZW5pbmcoJG5ld1N0YXJ0LCB0cnVlLCBmYWxzZSkgPCAkbmV3RW5kLnBvcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCAkc3RhcnQgPSBvbGQucmVzb2x2ZShzdGFydCk7XG4gICAgLy8gU3RhcnQgbXVzdCBiZSBhdCB0aGUgZW5kIG9mIGEgYmxvY2tcbiAgICBpZiAoJHN0YXJ0LnBhcmVudE9mZnNldCA8ICRzdGFydC5wYXJlbnQuY29udGVudC5zaXplIHx8ICEkc3RhcnQucGFyZW50LmlzVGV4dGJsb2NrKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0ICRuZXh0ID0gb2xkLnJlc29sdmUoc2tpcENsb3NpbmdBbmRPcGVuaW5nKCRzdGFydCwgdHJ1ZSwgdHJ1ZSkpO1xuICAgIC8vIFRoZSBuZXh0IHRleHRibG9jayBtdXN0IHN0YXJ0IGJlZm9yZSBlbmQgYW5kIGVuZCBuZWFyIGl0XG4gICAgaWYgKCEkbmV4dC5wYXJlbnQuaXNUZXh0YmxvY2sgfHwgJG5leHQucG9zID4gZW5kIHx8XG4gICAgICAgIHNraXBDbG9zaW5nQW5kT3BlbmluZygkbmV4dCwgdHJ1ZSwgZmFsc2UpIDwgZW5kKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gVGhlIGZyYWdtZW50cyBhZnRlciB0aGUgam9pbiBwb2ludCBtdXN0IG1hdGNoXG4gICAgcmV0dXJuICRuZXdTdGFydC5wYXJlbnQuY29udGVudC5jdXQoJG5ld1N0YXJ0LnBhcmVudE9mZnNldCkuZXEoJG5leHQucGFyZW50LmNvbnRlbnQpO1xufVxuZnVuY3Rpb24gc2tpcENsb3NpbmdBbmRPcGVuaW5nKCRwb3MsIGZyb21FbmQsIG1heU9wZW4pIHtcbiAgICBsZXQgZGVwdGggPSAkcG9zLmRlcHRoLCBlbmQgPSBmcm9tRW5kID8gJHBvcy5lbmQoKSA6ICRwb3MucG9zO1xuICAgIHdoaWxlIChkZXB0aCA+IDAgJiYgKGZyb21FbmQgfHwgJHBvcy5pbmRleEFmdGVyKGRlcHRoKSA9PSAkcG9zLm5vZGUoZGVwdGgpLmNoaWxkQ291bnQpKSB7XG4gICAgICAgIGRlcHRoLS07XG4gICAgICAgIGVuZCsrO1xuICAgICAgICBmcm9tRW5kID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChtYXlPcGVuKSB7XG4gICAgICAgIGxldCBuZXh0ID0gJHBvcy5ub2RlKGRlcHRoKS5tYXliZUNoaWxkKCRwb3MuaW5kZXhBZnRlcihkZXB0aCkpO1xuICAgICAgICB3aGlsZSAobmV4dCAmJiAhbmV4dC5pc0xlYWYpIHtcbiAgICAgICAgICAgIG5leHQgPSBuZXh0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBlbmQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW5kO1xufVxuZnVuY3Rpb24gZmluZERpZmYoYSwgYiwgcG9zLCBwcmVmZXJyZWRQb3MsIHByZWZlcnJlZFNpZGUpIHtcbiAgICBsZXQgc3RhcnQgPSBhLmZpbmREaWZmU3RhcnQoYiwgcG9zKTtcbiAgICBpZiAoc3RhcnQgPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IHsgYTogZW5kQSwgYjogZW5kQiB9ID0gYS5maW5kRGlmZkVuZChiLCBwb3MgKyBhLnNpemUsIHBvcyArIGIuc2l6ZSk7XG4gICAgaWYgKHByZWZlcnJlZFNpZGUgPT0gXCJlbmRcIikge1xuICAgICAgICBsZXQgYWRqdXN0ID0gTWF0aC5tYXgoMCwgc3RhcnQgLSBNYXRoLm1pbihlbmRBLCBlbmRCKSk7XG4gICAgICAgIHByZWZlcnJlZFBvcyAtPSBlbmRBICsgYWRqdXN0IC0gc3RhcnQ7XG4gICAgfVxuICAgIGlmIChlbmRBIDwgc3RhcnQgJiYgYS5zaXplIDwgYi5zaXplKSB7XG4gICAgICAgIGxldCBtb3ZlID0gcHJlZmVycmVkUG9zIDw9IHN0YXJ0ICYmIHByZWZlcnJlZFBvcyA+PSBlbmRBID8gc3RhcnQgLSBwcmVmZXJyZWRQb3MgOiAwO1xuICAgICAgICBzdGFydCAtPSBtb3ZlO1xuICAgICAgICBlbmRCID0gc3RhcnQgKyAoZW5kQiAtIGVuZEEpO1xuICAgICAgICBlbmRBID0gc3RhcnQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKGVuZEIgPCBzdGFydCkge1xuICAgICAgICBsZXQgbW92ZSA9IHByZWZlcnJlZFBvcyA8PSBzdGFydCAmJiBwcmVmZXJyZWRQb3MgPj0gZW5kQiA/IHN0YXJ0IC0gcHJlZmVycmVkUG9zIDogMDtcbiAgICAgICAgc3RhcnQgLT0gbW92ZTtcbiAgICAgICAgZW5kQSA9IHN0YXJ0ICsgKGVuZEEgLSBlbmRCKTtcbiAgICAgICAgZW5kQiA9IHN0YXJ0O1xuICAgIH1cbiAgICByZXR1cm4geyBzdGFydCwgZW5kQSwgZW5kQiB9O1xufVxuXG4vKipcbkBpbnRlcm5hbFxuKi9cbmNvbnN0IF9fc2VyaWFsaXplRm9yQ2xpcGJvYXJkID0gc2VyaWFsaXplRm9yQ2xpcGJvYXJkO1xuLyoqXG5AaW50ZXJuYWxcbiovXG5jb25zdCBfX3BhcnNlRnJvbUNsaXBib2FyZCA9IHBhcnNlRnJvbUNsaXBib2FyZDtcbi8qKlxuQGludGVybmFsXG4qL1xuY29uc3QgX19lbmRDb21wb3NpdGlvbiA9IGVuZENvbXBvc2l0aW9uO1xuLyoqXG5BbiBlZGl0b3IgdmlldyBtYW5hZ2VzIHRoZSBET00gc3RydWN0dXJlIHRoYXQgcmVwcmVzZW50cyBhblxuZWRpdGFibGUgZG9jdW1lbnQuIEl0cyBzdGF0ZSBhbmQgYmVoYXZpb3IgYXJlIGRldGVybWluZWQgYnkgaXRzXG5bcHJvcHNdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3LkRpcmVjdEVkaXRvclByb3BzKS5cbiovXG5jbGFzcyBFZGl0b3JWaWV3IHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSB2aWV3LiBgcGxhY2VgIG1heSBiZSBhIERPTSBub2RlIHRoYXQgdGhlIGVkaXRvciBzaG91bGRcbiAgICBiZSBhcHBlbmRlZCB0bywgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcGxhY2UgaXQgaW50byB0aGUgZG9jdW1lbnQsXG4gICAgb3IgYW4gb2JqZWN0IHdob3NlIGBtb3VudGAgcHJvcGVydHkgaG9sZHMgdGhlIG5vZGUgdG8gdXNlIGFzIHRoZVxuICAgIGRvY3VtZW50IGNvbnRhaW5lci4gSWYgaXQgaXMgYG51bGxgLCB0aGUgZWRpdG9yIHdpbGwgbm90IGJlXG4gICAgYWRkZWQgdG8gdGhlIGRvY3VtZW50LlxuICAgICovXG4gICAgY29uc3RydWN0b3IocGxhY2UsIHByb3BzKSB7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgS2x1ZGdlIHVzZWQgdG8gd29yayBhcm91bmQgYSBDaHJvbWUgYnVnIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyYWNrV3JpdGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXJrQ3Vyc29yID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnNvcldyYXBwZXIgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgQGludGVybmFsXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFNlbGVjdGVkVmlld0Rlc2MgPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbnB1dCA9IG5ldyBJbnB1dFN0YXRlO1xuICAgICAgICB0aGlzLnByZXZEaXJlY3RQbHVnaW5zID0gW107XG4gICAgICAgIHRoaXMucGx1Z2luVmlld3MgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgIEhvbGRzIGB0cnVlYCB3aGVuIGEgaGFjayBub2RlIGlzIG5lZWRlZCBpbiBGaXJlZm94IHRvIHByZXZlbnQgdGhlXG4gICAgICAgIFtzcGFjZSBpcyBlYXRlbiBpc3N1ZV0oaHR0cHM6Ly9naXRodWIuY29tL1Byb3NlTWlycm9yL3Byb3NlbWlycm9yL2lzc3Vlcy82NTEpXG4gICAgICAgIEBpbnRlcm5hbFxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlcXVpcmVzR2Vja29IYWNrTm9kZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgV2hlbiBlZGl0b3IgY29udGVudCBpcyBiZWluZyBkcmFnZ2VkLCB0aGlzIG9iamVjdCBjb250YWluc1xuICAgICAgICBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZHJhZ2dlZCBzbGljZSBhbmQgd2hldGhlciBpdCBpcyBiZWluZ1xuICAgICAgICBjb3BpZWQgb3IgbW92ZWQuIEF0IGFueSBvdGhlciB0aW1lLCBpdCBpcyBudWxsLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcHJvcHMgPSBwcm9wcztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHByb3BzLnN0YXRlO1xuICAgICAgICB0aGlzLmRpcmVjdFBsdWdpbnMgPSBwcm9wcy5wbHVnaW5zIHx8IFtdO1xuICAgICAgICB0aGlzLmRpcmVjdFBsdWdpbnMuZm9yRWFjaChjaGVja1N0YXRlQ29tcG9uZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCA9IHRoaXMuZGlzcGF0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb20gPSAocGxhY2UgJiYgcGxhY2UubW91bnQpIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGlmIChwbGFjZSkge1xuICAgICAgICAgICAgaWYgKHBsYWNlLmFwcGVuZENoaWxkKVxuICAgICAgICAgICAgICAgIHBsYWNlLmFwcGVuZENoaWxkKHRoaXMuZG9tKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwbGFjZSA9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgcGxhY2UodGhpcy5kb20pO1xuICAgICAgICAgICAgZWxzZSBpZiAocGxhY2UubW91bnQpXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVkaXRhYmxlID0gZ2V0RWRpdGFibGUodGhpcyk7XG4gICAgICAgIHVwZGF0ZUN1cnNvcldyYXBwZXIodGhpcyk7XG4gICAgICAgIHRoaXMubm9kZVZpZXdzID0gYnVpbGROb2RlVmlld3ModGhpcyk7XG4gICAgICAgIHRoaXMuZG9jVmlldyA9IGRvY1ZpZXdEZXNjKHRoaXMuc3RhdGUuZG9jLCBjb21wdXRlRG9jRGVjbyh0aGlzKSwgdmlld0RlY29yYXRpb25zKHRoaXMpLCB0aGlzLmRvbSwgdGhpcyk7XG4gICAgICAgIHRoaXMuZG9tT2JzZXJ2ZXIgPSBuZXcgRE9NT2JzZXJ2ZXIodGhpcywgKGZyb20sIHRvLCB0eXBlT3ZlciwgYWRkZWQpID0+IHJlYWRET01DaGFuZ2UodGhpcywgZnJvbSwgdG8sIHR5cGVPdmVyLCBhZGRlZCkpO1xuICAgICAgICB0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCk7XG4gICAgICAgIGluaXRJbnB1dCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVQbHVnaW5WaWV3cygpO1xuICAgIH1cbiAgICAvKipcbiAgICBIb2xkcyBgdHJ1ZWAgd2hlbiBhXG4gICAgW2NvbXBvc2l0aW9uXShodHRwczovL3czYy5naXRodWIuaW8vdWlldmVudHMvI2V2ZW50cy1jb21wb3NpdGlvbmV2ZW50cylcbiAgICBpcyBhY3RpdmUuXG4gICAgKi9cbiAgICBnZXQgY29tcG9zaW5nKCkgeyByZXR1cm4gdGhpcy5pbnB1dC5jb21wb3Npbmc7IH1cbiAgICAvKipcbiAgICBUaGUgdmlldydzIGN1cnJlbnQgW3Byb3BzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JQcm9wcykuXG4gICAgKi9cbiAgICBnZXQgcHJvcHMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wcm9wcy5zdGF0ZSAhPSB0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgICBsZXQgcHJldiA9IHRoaXMuX3Byb3BzO1xuICAgICAgICAgICAgdGhpcy5fcHJvcHMgPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IG5hbWUgaW4gcHJldilcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9wc1tuYW1lXSA9IHByZXZbbmFtZV07XG4gICAgICAgICAgICB0aGlzLl9wcm9wcy5zdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BzO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHZpZXcncyBwcm9wcy4gV2lsbCBpbW1lZGlhdGVseSBjYXVzZSBhbiB1cGRhdGUgdG9cbiAgICB0aGUgRE9NLlxuICAgICovXG4gICAgdXBkYXRlKHByb3BzKSB7XG4gICAgICAgIGlmIChwcm9wcy5oYW5kbGVET01FdmVudHMgIT0gdGhpcy5fcHJvcHMuaGFuZGxlRE9NRXZlbnRzKVxuICAgICAgICAgICAgZW5zdXJlTGlzdGVuZXJzKHRoaXMpO1xuICAgICAgICBsZXQgcHJldlByb3BzID0gdGhpcy5fcHJvcHM7XG4gICAgICAgIHRoaXMuX3Byb3BzID0gcHJvcHM7XG4gICAgICAgIGlmIChwcm9wcy5wbHVnaW5zKSB7XG4gICAgICAgICAgICBwcm9wcy5wbHVnaW5zLmZvckVhY2goY2hlY2tTdGF0ZUNvbXBvbmVudCk7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdFBsdWdpbnMgPSBwcm9wcy5wbHVnaW5zO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGVJbm5lcihwcm9wcy5zdGF0ZSwgcHJldlByb3BzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSB2aWV3IGJ5IHVwZGF0aW5nIGV4aXN0aW5nIHByb3BzIG9iamVjdCB3aXRoIHRoZSBvYmplY3RcbiAgICBnaXZlbiBhcyBhcmd1bWVudC4gRXF1aXZhbGVudCB0byBgdmlldy51cGRhdGUoT2JqZWN0LmFzc2lnbih7fSxcbiAgICB2aWV3LnByb3BzLCBwcm9wcykpYC5cbiAgICAqL1xuICAgIHNldFByb3BzKHByb3BzKSB7XG4gICAgICAgIGxldCB1cGRhdGVkID0ge307XG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gdGhpcy5fcHJvcHMpXG4gICAgICAgICAgICB1cGRhdGVkW25hbWVdID0gdGhpcy5fcHJvcHNbbmFtZV07XG4gICAgICAgIHVwZGF0ZWQuc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHByb3BzKVxuICAgICAgICAgICAgdXBkYXRlZFtuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgICAgICB0aGlzLnVwZGF0ZSh1cGRhdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSBlZGl0b3IncyBgc3RhdGVgIHByb3AsIHdpdGhvdXQgdG91Y2hpbmcgYW55IG9mIHRoZVxuICAgIG90aGVyIHByb3BzLlxuICAgICovXG4gICAgdXBkYXRlU3RhdGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZUlubmVyKHN0YXRlLCB0aGlzLl9wcm9wcyk7XG4gICAgfVxuICAgIHVwZGF0ZVN0YXRlSW5uZXIoc3RhdGUsIHByZXZQcm9wcykge1xuICAgICAgICBsZXQgcHJldiA9IHRoaXMuc3RhdGUsIHJlZHJhdyA9IGZhbHNlLCB1cGRhdGVTZWwgPSBmYWxzZTtcbiAgICAgICAgLy8gV2hlbiBzdG9yZWQgbWFya3MgYXJlIGFkZGVkLCBzdG9wIGNvbXBvc2l0aW9uLCBzbyB0aGF0IHRoZXkgY2FuXG4gICAgICAgIC8vIGJlIGRpc3BsYXllZC5cbiAgICAgICAgaWYgKHN0YXRlLnN0b3JlZE1hcmtzICYmIHRoaXMuY29tcG9zaW5nKSB7XG4gICAgICAgICAgICBjbGVhckNvbXBvc2l0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdXBkYXRlU2VsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIGxldCBwbHVnaW5zQ2hhbmdlZCA9IHByZXYucGx1Z2lucyAhPSBzdGF0ZS5wbHVnaW5zIHx8IHRoaXMuX3Byb3BzLnBsdWdpbnMgIT0gcHJldlByb3BzLnBsdWdpbnM7XG4gICAgICAgIGlmIChwbHVnaW5zQ2hhbmdlZCB8fCB0aGlzLl9wcm9wcy5wbHVnaW5zICE9IHByZXZQcm9wcy5wbHVnaW5zIHx8IHRoaXMuX3Byb3BzLm5vZGVWaWV3cyAhPSBwcmV2UHJvcHMubm9kZVZpZXdzKSB7XG4gICAgICAgICAgICBsZXQgbm9kZVZpZXdzID0gYnVpbGROb2RlVmlld3ModGhpcyk7XG4gICAgICAgICAgICBpZiAoY2hhbmdlZE5vZGVWaWV3cyhub2RlVmlld3MsIHRoaXMubm9kZVZpZXdzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVZpZXdzID0gbm9kZVZpZXdzO1xuICAgICAgICAgICAgICAgIHJlZHJhdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsdWdpbnNDaGFuZ2VkIHx8IHByZXZQcm9wcy5oYW5kbGVET01FdmVudHMgIT0gdGhpcy5fcHJvcHMuaGFuZGxlRE9NRXZlbnRzKSB7XG4gICAgICAgICAgICBlbnN1cmVMaXN0ZW5lcnModGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lZGl0YWJsZSA9IGdldEVkaXRhYmxlKHRoaXMpO1xuICAgICAgICB1cGRhdGVDdXJzb3JXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsZXQgaW5uZXJEZWNvID0gdmlld0RlY29yYXRpb25zKHRoaXMpLCBvdXRlckRlY28gPSBjb21wdXRlRG9jRGVjbyh0aGlzKTtcbiAgICAgICAgbGV0IHNjcm9sbCA9IHByZXYucGx1Z2lucyAhPSBzdGF0ZS5wbHVnaW5zICYmICFwcmV2LmRvYy5lcShzdGF0ZS5kb2MpID8gXCJyZXNldFwiXG4gICAgICAgICAgICA6IHN0YXRlLnNjcm9sbFRvU2VsZWN0aW9uID4gcHJldi5zY3JvbGxUb1NlbGVjdGlvbiA/IFwidG8gc2VsZWN0aW9uXCIgOiBcInByZXNlcnZlXCI7XG4gICAgICAgIGxldCB1cGRhdGVEb2MgPSByZWRyYXcgfHwgIXRoaXMuZG9jVmlldy5tYXRjaGVzTm9kZShzdGF0ZS5kb2MsIG91dGVyRGVjbywgaW5uZXJEZWNvKTtcbiAgICAgICAgaWYgKHVwZGF0ZURvYyB8fCAhc3RhdGUuc2VsZWN0aW9uLmVxKHByZXYuc2VsZWN0aW9uKSlcbiAgICAgICAgICAgIHVwZGF0ZVNlbCA9IHRydWU7XG4gICAgICAgIGxldCBvbGRTY3JvbGxQb3MgPSBzY3JvbGwgPT0gXCJwcmVzZXJ2ZVwiICYmIHVwZGF0ZVNlbCAmJiB0aGlzLmRvbS5zdHlsZS5vdmVyZmxvd0FuY2hvciA9PSBudWxsICYmIHN0b3JlU2Nyb2xsUG9zKHRoaXMpO1xuICAgICAgICBpZiAodXBkYXRlU2VsKSB7XG4gICAgICAgICAgICB0aGlzLmRvbU9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGFuIGlzc3VlIGluIENocm9tZSwgSUUsIGFuZCBFZGdlIHdoZXJlIGNoYW5naW5nXG4gICAgICAgICAgICAvLyB0aGUgRE9NIGFyb3VuZCBhbiBhY3RpdmUgc2VsZWN0aW9uIHB1dHMgaXQgaW50byBhIGJyb2tlblxuICAgICAgICAgICAgLy8gc3RhdGUgd2hlcmUgdGhlIHRoaW5nIHRoZSB1c2VyIHNlZXMgZGlmZmVycyBmcm9tIHRoZVxuICAgICAgICAgICAgLy8gc2VsZWN0aW9uIHJlcG9ydGVkIGJ5IHRoZSBTZWxlY3Rpb24gb2JqZWN0ICgjNzEwLCAjOTczLFxuICAgICAgICAgICAgLy8gIzEwMTEsICMxMDEzLCAjMTAzNSkuXG4gICAgICAgICAgICBsZXQgZm9yY2VTZWxVcGRhdGUgPSB1cGRhdGVEb2MgJiYgKGllIHx8IGNocm9tZSkgJiYgIXRoaXMuY29tcG9zaW5nICYmXG4gICAgICAgICAgICAgICAgIXByZXYuc2VsZWN0aW9uLmVtcHR5ICYmICFzdGF0ZS5zZWxlY3Rpb24uZW1wdHkgJiYgc2VsZWN0aW9uQ29udGV4dENoYW5nZWQocHJldi5zZWxlY3Rpb24sIHN0YXRlLnNlbGVjdGlvbik7XG4gICAgICAgICAgICBpZiAodXBkYXRlRG9jKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG5vZGUgdGhhdCB0aGUgc2VsZWN0aW9uIHBvaW50cyBpbnRvIGlzIHdyaXR0ZW4gdG8sXG4gICAgICAgICAgICAgICAgLy8gQ2hyb21lIHNvbWV0aW1lcyBzdGFydHMgbWlzcmVwb3J0aW5nIHRoZSBzZWxlY3Rpb24sIHNvIHRoaXNcbiAgICAgICAgICAgICAgICAvLyB0cmFja3MgdGhhdCBhbmQgZm9yY2VzIGEgc2VsZWN0aW9uIHJlc2V0IHdoZW4gb3VyIHVwZGF0ZVxuICAgICAgICAgICAgICAgIC8vIGRpZCB3cml0ZSB0byB0aGUgbm9kZS5cbiAgICAgICAgICAgICAgICBsZXQgY2hyb21lS2x1ZGdlID0gY2hyb21lID8gKHRoaXMudHJhY2tXcml0ZXMgPSB0aGlzLmRvbVNlbGVjdGlvblJhbmdlKCkuZm9jdXNOb2RlKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHJlZHJhdyB8fCAhdGhpcy5kb2NWaWV3LnVwZGF0ZShzdGF0ZS5kb2MsIG91dGVyRGVjbywgaW5uZXJEZWNvLCB0aGlzKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvY1ZpZXcudXBkYXRlT3V0ZXJEZWNvKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2NWaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb2NWaWV3ID0gZG9jVmlld0Rlc2Moc3RhdGUuZG9jLCBvdXRlckRlY28sIGlubmVyRGVjbywgdGhpcy5kb20sIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hyb21lS2x1ZGdlICYmICF0aGlzLnRyYWNrV3JpdGVzKVxuICAgICAgICAgICAgICAgICAgICBmb3JjZVNlbFVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXb3JrIGFyb3VuZCBmb3IgYW4gaXNzdWUgd2hlcmUgYW4gdXBkYXRlIGFycml2aW5nIHJpZ2h0IGJldHdlZW5cbiAgICAgICAgICAgIC8vIGEgRE9NIHNlbGVjdGlvbiBjaGFuZ2UgYW5kIHRoZSBcInNlbGVjdGlvbmNoYW5nZVwiIGV2ZW50IGZvciBpdFxuICAgICAgICAgICAgLy8gY2FuIGNhdXNlIGEgc3B1cmlvdXMgRE9NIHNlbGVjdGlvbiB1cGRhdGUsIGRpc3J1cHRpbmcgbW91c2VcbiAgICAgICAgICAgIC8vIGRyYWcgc2VsZWN0aW9uLlxuICAgICAgICAgICAgaWYgKGZvcmNlU2VsVXBkYXRlIHx8XG4gICAgICAgICAgICAgICAgISh0aGlzLmlucHV0Lm1vdXNlRG93biAmJiB0aGlzLmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uZXEodGhpcy5kb21TZWxlY3Rpb25SYW5nZSgpKSAmJlxuICAgICAgICAgICAgICAgICAgICBhbmNob3JJblJpZ2h0UGxhY2UodGhpcykpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uVG9ET00odGhpcywgZm9yY2VTZWxVcGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3luY05vZGVTZWxlY3Rpb24odGhpcywgc3RhdGUuc2VsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kb21PYnNlcnZlci5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlUGx1Z2luVmlld3MocHJldik7XG4gICAgICAgIGlmIChzY3JvbGwgPT0gXCJyZXNldFwiKSB7XG4gICAgICAgICAgICB0aGlzLmRvbS5zY3JvbGxUb3AgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNjcm9sbCA9PSBcInRvIHNlbGVjdGlvblwiKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvU2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2xkU2Nyb2xsUG9zKSB7XG4gICAgICAgICAgICByZXNldFNjcm9sbFBvcyhvbGRTY3JvbGxQb3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2Nyb2xsVG9TZWxlY3Rpb24oKSB7XG4gICAgICAgIGxldCBzdGFydERPTSA9IHRoaXMuZG9tU2VsZWN0aW9uUmFuZ2UoKS5mb2N1c05vZGU7XG4gICAgICAgIGlmICh0aGlzLnNvbWVQcm9wKFwiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb25cIiwgZiA9PiBmKHRoaXMpKSkgO1xuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSB0aGlzLmRvY1ZpZXcuZG9tQWZ0ZXJQb3ModGhpcy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Lm5vZGVUeXBlID09IDEpXG4gICAgICAgICAgICAgICAgc2Nyb2xsUmVjdEludG9WaWV3KHRoaXMsIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgc3RhcnRET00pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2Nyb2xsUmVjdEludG9WaWV3KHRoaXMsIHRoaXMuY29vcmRzQXRQb3ModGhpcy5zdGF0ZS5zZWxlY3Rpb24uaGVhZCwgMSksIHN0YXJ0RE9NKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95UGx1Z2luVmlld3MoKSB7XG4gICAgICAgIGxldCB2aWV3O1xuICAgICAgICB3aGlsZSAodmlldyA9IHRoaXMucGx1Z2luVmlld3MucG9wKCkpXG4gICAgICAgICAgICBpZiAodmlldy5kZXN0cm95KVxuICAgICAgICAgICAgICAgIHZpZXcuZGVzdHJveSgpO1xuICAgIH1cbiAgICB1cGRhdGVQbHVnaW5WaWV3cyhwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKCFwcmV2U3RhdGUgfHwgcHJldlN0YXRlLnBsdWdpbnMgIT0gdGhpcy5zdGF0ZS5wbHVnaW5zIHx8IHRoaXMuZGlyZWN0UGx1Z2lucyAhPSB0aGlzLnByZXZEaXJlY3RQbHVnaW5zKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZEaXJlY3RQbHVnaW5zID0gdGhpcy5kaXJlY3RQbHVnaW5zO1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaXJlY3RQbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBsdWdpbiA9IHRoaXMuZGlyZWN0UGx1Z2luc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnNwZWMudmlldylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5WaWV3cy5wdXNoKHBsdWdpbi5zcGVjLnZpZXcodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0YXRlLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gdGhpcy5zdGF0ZS5wbHVnaW5zW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW4uc3BlYy52aWV3KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpblZpZXdzLnB1c2gocGx1Z2luLnNwZWMudmlldyh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGx1Z2luVmlld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2luVmlldyA9IHRoaXMucGx1Z2luVmlld3NbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpblZpZXcudXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5WaWV3LnVwZGF0ZSh0aGlzLCBwcmV2U3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNvbWVQcm9wKHByb3BOYW1lLCBmKSB7XG4gICAgICAgIGxldCBwcm9wID0gdGhpcy5fcHJvcHMgJiYgdGhpcy5fcHJvcHNbcHJvcE5hbWVdLCB2YWx1ZTtcbiAgICAgICAgaWYgKHByb3AgIT0gbnVsbCAmJiAodmFsdWUgPSBmID8gZihwcm9wKSA6IHByb3ApKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGlyZWN0UGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHByb3AgPSB0aGlzLmRpcmVjdFBsdWdpbnNbaV0ucHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICAgICAgaWYgKHByb3AgIT0gbnVsbCAmJiAodmFsdWUgPSBmID8gZihwcm9wKSA6IHByb3ApKVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGx1Z2lucyA9IHRoaXMuc3RhdGUucGx1Z2lucztcbiAgICAgICAgaWYgKHBsdWdpbnMpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHBsdWdpbnNbaV0ucHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wICE9IG51bGwgJiYgKHZhbHVlID0gZiA/IGYocHJvcCkgOiBwcm9wKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBRdWVyeSB3aGV0aGVyIHRoZSB2aWV3IGhhcyBmb2N1cy5cbiAgICAqL1xuICAgIGhhc0ZvY3VzKCkge1xuICAgICAgICAvLyBXb3JrIGFyb3VuZCBJRSBub3QgaGFuZGxpbmcgZm9jdXMgY29ycmVjdGx5IGlmIHJlc2l6ZSBoYW5kbGVzIGFyZSBzaG93bi5cbiAgICAgICAgLy8gSWYgdGhlIGN1cnNvciBpcyBpbnNpZGUgYW4gZWxlbWVudCB3aXRoIHJlc2l6ZSBoYW5kbGVzLCBhY3RpdmVFbGVtZW50XG4gICAgICAgIC8vIHdpbGwgYmUgdGhhdCBlbGVtZW50IGluc3RlYWQgb2YgdGhpcy5kb20uXG4gICAgICAgIGlmIChpZSkge1xuICAgICAgICAgICAgLy8gSWYgYWN0aXZlRWxlbWVudCBpcyB3aXRoaW4gdGhpcy5kb20sIGFuZCB0aGVyZSBhcmUgbm8gb3RoZXIgZWxlbWVudHNcbiAgICAgICAgICAgIC8vIHNldHRpbmcgYGNvbnRlbnRlZGl0YWJsZWAgdG8gZmFsc2UgaW4gYmV0d2VlbiwgdHJlYXQgaXQgYXMgZm9jdXNlZC5cbiAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy5yb290LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobm9kZSA9PSB0aGlzLmRvbSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghbm9kZSB8fCAhdGhpcy5kb20uY29udGFpbnMobm9kZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgd2hpbGUgKG5vZGUgJiYgdGhpcy5kb20gIT0gbm9kZSAmJiB0aGlzLmRvbS5jb250YWlucyhub2RlKSkge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLmNvbnRlbnRFZGl0YWJsZSA9PSAnZmFsc2UnKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuYWN0aXZlRWxlbWVudCA9PSB0aGlzLmRvbTtcbiAgICB9XG4gICAgLyoqXG4gICAgRm9jdXMgdGhlIGVkaXRvci5cbiAgICAqL1xuICAgIGZvY3VzKCkge1xuICAgICAgICB0aGlzLmRvbU9ic2VydmVyLnN0b3AoKTtcbiAgICAgICAgaWYgKHRoaXMuZWRpdGFibGUpXG4gICAgICAgICAgICBmb2N1c1ByZXZlbnRTY3JvbGwodGhpcy5kb20pO1xuICAgICAgICBzZWxlY3Rpb25Ub0RPTSh0aGlzKTtcbiAgICAgICAgdGhpcy5kb21PYnNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGRvY3VtZW50IHJvb3QgaW4gd2hpY2ggdGhlIGVkaXRvciBleGlzdHMuIFRoaXMgd2lsbFxuICAgIHVzdWFsbHkgYmUgdGhlIHRvcC1sZXZlbCBgZG9jdW1lbnRgLCBidXQgbWlnaHQgYmUgYSBbc2hhZG93XG4gICAgRE9NXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9XZWJfQ29tcG9uZW50cy9TaGFkb3dfRE9NKVxuICAgIHJvb3QgaWYgdGhlIGVkaXRvciBpcyBpbnNpZGUgb25lLlxuICAgICovXG4gICAgZ2V0IHJvb3QoKSB7XG4gICAgICAgIGxldCBjYWNoZWQgPSB0aGlzLl9yb290O1xuICAgICAgICBpZiAoY2FjaGVkID09IG51bGwpXG4gICAgICAgICAgICBmb3IgKGxldCBzZWFyY2ggPSB0aGlzLmRvbS5wYXJlbnROb2RlOyBzZWFyY2g7IHNlYXJjaCA9IHNlYXJjaC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaC5ub2RlVHlwZSA9PSA5IHx8IChzZWFyY2gubm9kZVR5cGUgPT0gMTEgJiYgc2VhcmNoLmhvc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VhcmNoLmdldFNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihzZWFyY2gpLmdldFNlbGVjdGlvbiA9ICgpID0+IHNlYXJjaC5vd25lckRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcm9vdCA9IHNlYXJjaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWNoZWQgfHwgZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEdpdmVuIGEgcGFpciBvZiB2aWV3cG9ydCBjb29yZGluYXRlcywgcmV0dXJuIHRoZSBkb2N1bWVudFxuICAgIHBvc2l0aW9uIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlbS4gTWF5IHJldHVybiBudWxsIGlmIHRoZSBnaXZlblxuICAgIGNvb3JkaW5hdGVzIGFyZW4ndCBpbnNpZGUgb2YgdGhlIGVkaXRvci4gV2hlbiBhbiBvYmplY3QgaXNcbiAgICByZXR1cm5lZCwgaXRzIGBwb3NgIHByb3BlcnR5IGlzIHRoZSBwb3NpdGlvbiBuZWFyZXN0IHRvIHRoZVxuICAgIGNvb3JkaW5hdGVzLCBhbmQgaXRzIGBpbnNpZGVgIHByb3BlcnR5IGhvbGRzIHRoZSBwb3NpdGlvbiBvZiB0aGVcbiAgICBpbm5lciBub2RlIHRoYXQgdGhlIHBvc2l0aW9uIGZhbGxzIGluc2lkZSBvZiwgb3IgLTEgaWYgaXQgaXMgYXRcbiAgICB0aGUgdG9wIGxldmVsLCBub3QgaW4gYW55IG5vZGUuXG4gICAgKi9cbiAgICBwb3NBdENvb3Jkcyhjb29yZHMpIHtcbiAgICAgICAgcmV0dXJuIHBvc0F0Q29vcmRzKHRoaXMsIGNvb3Jkcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybnMgdGhlIHZpZXdwb3J0IHJlY3RhbmdsZSBhdCBhIGdpdmVuIGRvY3VtZW50IHBvc2l0aW9uLlxuICAgIGBsZWZ0YCBhbmQgYHJpZ2h0YCB3aWxsIGJlIHRoZSBzYW1lIG51bWJlciwgYXMgdGhpcyByZXR1cm5zIGFcbiAgICBmbGF0IGN1cnNvci1pc2ggcmVjdGFuZ2xlLiBJZiB0aGUgcG9zaXRpb24gaXMgYmV0d2VlbiB0d28gdGhpbmdzXG4gICAgdGhhdCBhcmVuJ3QgZGlyZWN0bHkgYWRqYWNlbnQsIGBzaWRlYCBkZXRlcm1pbmVzIHdoaWNoIGVsZW1lbnRcbiAgICBpcyB1c2VkLiBXaGVuIDwgMCwgdGhlIGVsZW1lbnQgYmVmb3JlIHRoZSBwb3NpdGlvbiBpcyB1c2VkLFxuICAgIG90aGVyd2lzZSB0aGUgZWxlbWVudCBhZnRlci5cbiAgICAqL1xuICAgIGNvb3Jkc0F0UG9zKHBvcywgc2lkZSA9IDEpIHtcbiAgICAgICAgcmV0dXJuIGNvb3Jkc0F0UG9zKHRoaXMsIHBvcywgc2lkZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIERPTSBwb3NpdGlvbiB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBnaXZlbiBkb2N1bWVudFxuICAgIHBvc2l0aW9uLiBXaGVuIGBzaWRlYCBpcyBuZWdhdGl2ZSwgZmluZCB0aGUgcG9zaXRpb24gYXMgY2xvc2UgYXNcbiAgICBwb3NzaWJsZSB0byB0aGUgY29udGVudCBiZWZvcmUgdGhlIHBvc2l0aW9uLiBXaGVuIHBvc2l0aXZlLFxuICAgIHByZWZlciBwb3NpdGlvbnMgY2xvc2UgdG8gdGhlIGNvbnRlbnQgYWZ0ZXIgdGhlIHBvc2l0aW9uLiBXaGVuXG4gICAgemVybywgcHJlZmVyIGFzIHNoYWxsb3cgYSBwb3NpdGlvbiBhcyBwb3NzaWJsZS5cbiAgICBcbiAgICBOb3RlIHRoYXQgeW91IHNob3VsZCAqKm5vdCoqIG11dGF0ZSB0aGUgZWRpdG9yJ3MgaW50ZXJuYWwgRE9NLFxuICAgIG9ubHkgaW5zcGVjdCBpdCAoYW5kIGV2ZW4gdGhhdCBpcyB1c3VhbGx5IG5vdCBuZWNlc3NhcnkpLlxuICAgICovXG4gICAgZG9tQXRQb3MocG9zLCBzaWRlID0gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NWaWV3LmRvbUZyb21Qb3MocG9zLCBzaWRlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgRE9NIG5vZGUgdGhhdCByZXByZXNlbnRzIHRoZSBkb2N1bWVudCBub2RlIGFmdGVyIHRoZVxuICAgIGdpdmVuIHBvc2l0aW9uLiBNYXkgcmV0dXJuIGBudWxsYCB3aGVuIHRoZSBwb3NpdGlvbiBkb2Vzbid0IHBvaW50XG4gICAgaW4gZnJvbnQgb2YgYSBub2RlIG9yIGlmIHRoZSBub2RlIGlzIGluc2lkZSBhbiBvcGFxdWUgbm9kZSB2aWV3LlxuICAgIFxuICAgIFRoaXMgaXMgaW50ZW5kZWQgdG8gYmUgYWJsZSB0byBjYWxsIHRoaW5ncyBsaWtlXG4gICAgYGdldEJvdW5kaW5nQ2xpZW50UmVjdGAgb24gdGhhdCBET00gbm9kZS4gRG8gKipub3QqKiBtdXRhdGUgdGhlXG4gICAgZWRpdG9yIERPTSBkaXJlY3RseSwgb3IgYWRkIHN0eWxpbmcgdGhpcyB3YXksIHNpbmNlIHRoYXQgd2lsbCBiZVxuICAgIGltbWVkaWF0ZWx5IG92ZXJyaWRlbiBieSB0aGUgZWRpdG9yIGFzIGl0IHJlZHJhd3MgdGhlIG5vZGUuXG4gICAgKi9cbiAgICBub2RlRE9NKHBvcykge1xuICAgICAgICBsZXQgZGVzYyA9IHRoaXMuZG9jVmlldy5kZXNjQXQocG9zKTtcbiAgICAgICAgcmV0dXJuIGRlc2MgPyBkZXNjLm5vZGVET00gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBkb2N1bWVudCBwb3NpdGlvbiB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gRE9NXG4gICAgcG9zaXRpb24uIChXaGVuZXZlciBwb3NzaWJsZSwgaXQgaXMgcHJlZmVyYWJsZSB0byBpbnNwZWN0IHRoZVxuICAgIGRvY3VtZW50IHN0cnVjdHVyZSBkaXJlY3RseSwgcmF0aGVyIHRoYW4gcG9raW5nIGFyb3VuZCBpbiB0aGVcbiAgICBET00sIGJ1dCBzb21ldGltZXPigJRmb3IgZXhhbXBsZSB3aGVuIGludGVycHJldGluZyBhbiBldmVudFxuICAgIHRhcmdldOKAlHlvdSBkb24ndCBoYXZlIGEgY2hvaWNlLilcbiAgICBcbiAgICBUaGUgYGJpYXNgIHBhcmFtZXRlciBjYW4gYmUgdXNlZCB0byBpbmZsdWVuY2Ugd2hpY2ggc2lkZSBvZiBhIERPTVxuICAgIG5vZGUgdG8gdXNlIHdoZW4gdGhlIHBvc2l0aW9uIGlzIGluc2lkZSBhIGxlYWYgbm9kZS5cbiAgICAqL1xuICAgIHBvc0F0RE9NKG5vZGUsIG9mZnNldCwgYmlhcyA9IC0xKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmRvY1ZpZXcucG9zRnJvbURPTShub2RlLCBvZmZzZXQsIGJpYXMpO1xuICAgICAgICBpZiAocG9zID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkRPTSBwb3NpdGlvbiBub3QgaW5zaWRlIHRoZSBlZGl0b3JcIik7XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgb3V0IHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBpcyBhdCB0aGUgZW5kIG9mIGEgdGV4dGJsb2NrIHdoZW5cbiAgICBtb3ZpbmcgaW4gYSBnaXZlbiBkaXJlY3Rpb24uIFdoZW4sIGZvciBleGFtcGxlLCBnaXZlbiBgXCJsZWZ0XCJgLFxuICAgIGl0IHdpbGwgcmV0dXJuIHRydWUgaWYgbW92aW5nIGxlZnQgZnJvbSB0aGUgY3VycmVudCBjdXJzb3JcbiAgICBwb3NpdGlvbiB3b3VsZCBsZWF2ZSB0aGF0IHBvc2l0aW9uJ3MgcGFyZW50IHRleHRibG9jay4gV2lsbCBhcHBseVxuICAgIHRvIHRoZSB2aWV3J3MgY3VycmVudCBzdGF0ZSBieSBkZWZhdWx0LCBidXQgaXQgaXMgcG9zc2libGUgdG9cbiAgICBwYXNzIGEgZGlmZmVyZW50IHN0YXRlLlxuICAgICovXG4gICAgZW5kT2ZUZXh0YmxvY2soZGlyLCBzdGF0ZSkge1xuICAgICAgICByZXR1cm4gZW5kT2ZUZXh0YmxvY2sodGhpcywgc3RhdGUgfHwgdGhpcy5zdGF0ZSwgZGlyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUnVuIHRoZSBlZGl0b3IncyBwYXN0ZSBsb2dpYyB3aXRoIHRoZSBnaXZlbiBIVE1MIHN0cmluZy4gVGhlXG4gICAgYGV2ZW50YCwgaWYgZ2l2ZW4sIHdpbGwgYmUgcGFzc2VkIHRvIHRoZVxuICAgIFtgaGFuZGxlUGFzdGVgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JQcm9wcy5oYW5kbGVQYXN0ZSkgaG9vay5cbiAgICAqL1xuICAgIHBhc3RlSFRNTChodG1sLCBldmVudCkge1xuICAgICAgICByZXR1cm4gZG9QYXN0ZSh0aGlzLCBcIlwiLCBodG1sLCBmYWxzZSwgZXZlbnQgfHwgbmV3IENsaXBib2FyZEV2ZW50KFwicGFzdGVcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICBSdW4gdGhlIGVkaXRvcidzIHBhc3RlIGxvZ2ljIHdpdGggdGhlIGdpdmVuIHBsYWluLXRleHQgaW5wdXQuXG4gICAgKi9cbiAgICBwYXN0ZVRleHQodGV4dCwgZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGRvUGFzdGUodGhpcywgdGV4dCwgbnVsbCwgdHJ1ZSwgZXZlbnQgfHwgbmV3IENsaXBib2FyZEV2ZW50KFwicGFzdGVcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZW1vdmVzIHRoZSBlZGl0b3IgZnJvbSB0aGUgRE9NIGFuZCBkZXN0cm95cyBhbGwgW25vZGVcbiAgICB2aWV3c10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3ZpZXcuTm9kZVZpZXcpLlxuICAgICovXG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRvY1ZpZXcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGRlc3Ryb3lJbnB1dCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKTtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5kb2NWaWV3LnVwZGF0ZSh0aGlzLnN0YXRlLmRvYywgW10sIHZpZXdEZWNvcmF0aW9ucyh0aGlzKSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRvbS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb20ucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgdGhpcy5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb2NWaWV3LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kb2NWaWV3ID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhpcyBpcyB0cnVlIHdoZW4gdGhlIHZpZXcgaGFzIGJlZW5cbiAgICBbZGVzdHJveWVkXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LmRlc3Ryb3kpIChhbmQgdGh1cyBzaG91bGQgbm90IGJlXG4gICAgdXNlZCBhbnltb3JlKS5cbiAgICAqL1xuICAgIGdldCBpc0Rlc3Ryb3llZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jVmlldyA9PSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBVc2VkIGZvciB0ZXN0aW5nLlxuICAgICovXG4gICAgZGlzcGF0Y2hFdmVudChldmVudCkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hFdmVudCh0aGlzLCBldmVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgIERpc3BhdGNoIGEgdHJhbnNhY3Rpb24uIFdpbGwgY2FsbFxuICAgIFtgZGlzcGF0Y2hUcmFuc2FjdGlvbmBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3LkRpcmVjdEVkaXRvclByb3BzLmRpc3BhdGNoVHJhbnNhY3Rpb24pXG4gICAgd2hlbiBnaXZlbiwgYW5kIG90aGVyd2lzZSBkZWZhdWx0cyB0byBhcHBseWluZyB0aGUgdHJhbnNhY3Rpb24gdG9cbiAgICB0aGUgY3VycmVudCBzdGF0ZSBhbmQgY2FsbGluZ1xuICAgIFtgdXBkYXRlU3RhdGVgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3LnVwZGF0ZVN0YXRlKSB3aXRoIHRoZSByZXN1bHQuXG4gICAgVGhpcyBtZXRob2QgaXMgYm91bmQgdG8gdGhlIHZpZXcgaW5zdGFuY2UsIHNvIHRoYXQgaXQgY2FuIGJlXG4gICAgZWFzaWx5IHBhc3NlZCBhcm91bmQuXG4gICAgKi9cbiAgICBkaXNwYXRjaCh0cikge1xuICAgICAgICBsZXQgZGlzcGF0Y2hUcmFuc2FjdGlvbiA9IHRoaXMuX3Byb3BzLmRpc3BhdGNoVHJhbnNhY3Rpb247XG4gICAgICAgIGlmIChkaXNwYXRjaFRyYW5zYWN0aW9uKVxuICAgICAgICAgICAgZGlzcGF0Y2hUcmFuc2FjdGlvbi5jYWxsKHRoaXMsIHRyKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlLmFwcGx5KHRyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZG9tU2VsZWN0aW9uUmFuZ2UoKSB7XG4gICAgICAgIHJldHVybiBzYWZhcmkgJiYgdGhpcy5yb290Lm5vZGVUeXBlID09PSAxMSAmJiBkZWVwQWN0aXZlRWxlbWVudCh0aGlzLmRvbS5vd25lckRvY3VtZW50KSA9PSB0aGlzLmRvbVxuICAgICAgICAgICAgPyBzYWZhcmlTaGFkb3dTZWxlY3Rpb25SYW5nZSh0aGlzKSA6IHRoaXMuZG9tU2VsZWN0aW9uKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZG9tU2VsZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmdldFNlbGVjdGlvbigpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXB1dGVEb2NEZWNvKHZpZXcpIHtcbiAgICBsZXQgYXR0cnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGF0dHJzLmNsYXNzID0gXCJQcm9zZU1pcnJvclwiO1xuICAgIGF0dHJzLmNvbnRlbnRlZGl0YWJsZSA9IFN0cmluZyh2aWV3LmVkaXRhYmxlKTtcbiAgICB2aWV3LnNvbWVQcm9wKFwiYXR0cmlidXRlc1wiLCB2YWx1ZSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSh2aWV3LnN0YXRlKTtcbiAgICAgICAgaWYgKHZhbHVlKVxuICAgICAgICAgICAgZm9yIChsZXQgYXR0ciBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyID09IFwiY2xhc3NcIilcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMuY2xhc3MgKz0gXCIgXCIgKyB2YWx1ZVthdHRyXTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhdHRyID09IFwic3R5bGVcIilcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMuc3R5bGUgPSAoYXR0cnMuc3R5bGUgPyBhdHRycy5zdHlsZSArIFwiO1wiIDogXCJcIikgKyB2YWx1ZVthdHRyXTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghYXR0cnNbYXR0cl0gJiYgYXR0ciAhPSBcImNvbnRlbnRlZGl0YWJsZVwiICYmIGF0dHIgIT0gXCJub2RlTmFtZVwiKVxuICAgICAgICAgICAgICAgICAgICBhdHRyc1thdHRyXSA9IFN0cmluZyh2YWx1ZVthdHRyXSk7XG4gICAgICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFhdHRycy50cmFuc2xhdGUpXG4gICAgICAgIGF0dHJzLnRyYW5zbGF0ZSA9IFwibm9cIjtcbiAgICByZXR1cm4gW0RlY29yYXRpb24ubm9kZSgwLCB2aWV3LnN0YXRlLmRvYy5jb250ZW50LnNpemUsIGF0dHJzKV07XG59XG5mdW5jdGlvbiB1cGRhdGVDdXJzb3JXcmFwcGVyKHZpZXcpIHtcbiAgICBpZiAodmlldy5tYXJrQ3Vyc29yKSB7XG4gICAgICAgIGxldCBkb20gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBkb20uY2xhc3NOYW1lID0gXCJQcm9zZU1pcnJvci1zZXBhcmF0b3JcIjtcbiAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShcIm1hcmstcGxhY2Vob2xkZXJcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBkb20uc2V0QXR0cmlidXRlKFwiYWx0XCIsIFwiXCIpO1xuICAgICAgICB2aWV3LmN1cnNvcldyYXBwZXIgPSB7IGRvbSwgZGVjbzogRGVjb3JhdGlvbi53aWRnZXQodmlldy5zdGF0ZS5zZWxlY3Rpb24uaGVhZCwgZG9tLCB7IHJhdzogdHJ1ZSwgbWFya3M6IHZpZXcubWFya0N1cnNvciB9KSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5jdXJzb3JXcmFwcGVyID0gbnVsbDtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRFZGl0YWJsZSh2aWV3KSB7XG4gICAgcmV0dXJuICF2aWV3LnNvbWVQcm9wKFwiZWRpdGFibGVcIiwgdmFsdWUgPT4gdmFsdWUodmlldy5zdGF0ZSkgPT09IGZhbHNlKTtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvbkNvbnRleHRDaGFuZ2VkKHNlbDEsIHNlbDIpIHtcbiAgICBsZXQgZGVwdGggPSBNYXRoLm1pbihzZWwxLiRhbmNob3Iuc2hhcmVkRGVwdGgoc2VsMS5oZWFkKSwgc2VsMi4kYW5jaG9yLnNoYXJlZERlcHRoKHNlbDIuaGVhZCkpO1xuICAgIHJldHVybiBzZWwxLiRhbmNob3Iuc3RhcnQoZGVwdGgpICE9IHNlbDIuJGFuY2hvci5zdGFydChkZXB0aCk7XG59XG5mdW5jdGlvbiBidWlsZE5vZGVWaWV3cyh2aWV3KSB7XG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gYWRkKG9iaikge1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIG9iailcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgcHJvcCkpXG4gICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0gb2JqW3Byb3BdO1xuICAgIH1cbiAgICB2aWV3LnNvbWVQcm9wKFwibm9kZVZpZXdzXCIsIGFkZCk7XG4gICAgdmlldy5zb21lUHJvcChcIm1hcmtWaWV3c1wiLCBhZGQpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBjaGFuZ2VkTm9kZVZpZXdzKGEsIGIpIHtcbiAgICBsZXQgbkEgPSAwLCBuQiA9IDA7XG4gICAgZm9yIChsZXQgcHJvcCBpbiBhKSB7XG4gICAgICAgIGlmIChhW3Byb3BdICE9IGJbcHJvcF0pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbkErKztcbiAgICB9XG4gICAgZm9yIChsZXQgXyBpbiBiKVxuICAgICAgICBuQisrO1xuICAgIHJldHVybiBuQSAhPSBuQjtcbn1cbmZ1bmN0aW9uIGNoZWNrU3RhdGVDb21wb25lbnQocGx1Z2luKSB7XG4gICAgaWYgKHBsdWdpbi5zcGVjLnN0YXRlIHx8IHBsdWdpbi5zcGVjLmZpbHRlclRyYW5zYWN0aW9uIHx8IHBsdWdpbi5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlBsdWdpbnMgcGFzc2VkIGRpcmVjdGx5IHRvIHRoZSB2aWV3IG11c3Qgbm90IGhhdmUgYSBzdGF0ZSBjb21wb25lbnRcIik7XG59XG5cbmV4cG9ydCB7IERlY29yYXRpb24sIERlY29yYXRpb25TZXQsIEVkaXRvclZpZXcsIF9fZW5kQ29tcG9zaXRpb24sIF9fcGFyc2VGcm9tQ2xpcGJvYXJkLCBfX3NlcmlhbGl6ZUZvckNsaXBib2FyZCB9O1xuIiwiZXhwb3J0IHZhciBiYXNlID0ge1xuICA4OiBcIkJhY2tzcGFjZVwiLFxuICA5OiBcIlRhYlwiLFxuICAxMDogXCJFbnRlclwiLFxuICAxMjogXCJOdW1Mb2NrXCIsXG4gIDEzOiBcIkVudGVyXCIsXG4gIDE2OiBcIlNoaWZ0XCIsXG4gIDE3OiBcIkNvbnRyb2xcIixcbiAgMTg6IFwiQWx0XCIsXG4gIDIwOiBcIkNhcHNMb2NrXCIsXG4gIDI3OiBcIkVzY2FwZVwiLFxuICAzMjogXCIgXCIsXG4gIDMzOiBcIlBhZ2VVcFwiLFxuICAzNDogXCJQYWdlRG93blwiLFxuICAzNTogXCJFbmRcIixcbiAgMzY6IFwiSG9tZVwiLFxuICAzNzogXCJBcnJvd0xlZnRcIixcbiAgMzg6IFwiQXJyb3dVcFwiLFxuICAzOTogXCJBcnJvd1JpZ2h0XCIsXG4gIDQwOiBcIkFycm93RG93blwiLFxuICA0NDogXCJQcmludFNjcmVlblwiLFxuICA0NTogXCJJbnNlcnRcIixcbiAgNDY6IFwiRGVsZXRlXCIsXG4gIDU5OiBcIjtcIixcbiAgNjE6IFwiPVwiLFxuICA5MTogXCJNZXRhXCIsXG4gIDkyOiBcIk1ldGFcIixcbiAgMTA2OiBcIipcIixcbiAgMTA3OiBcIitcIixcbiAgMTA4OiBcIixcIixcbiAgMTA5OiBcIi1cIixcbiAgMTEwOiBcIi5cIixcbiAgMTExOiBcIi9cIixcbiAgMTQ0OiBcIk51bUxvY2tcIixcbiAgMTQ1OiBcIlNjcm9sbExvY2tcIixcbiAgMTYwOiBcIlNoaWZ0XCIsXG4gIDE2MTogXCJTaGlmdFwiLFxuICAxNjI6IFwiQ29udHJvbFwiLFxuICAxNjM6IFwiQ29udHJvbFwiLFxuICAxNjQ6IFwiQWx0XCIsXG4gIDE2NTogXCJBbHRcIixcbiAgMTczOiBcIi1cIixcbiAgMTg2OiBcIjtcIixcbiAgMTg3OiBcIj1cIixcbiAgMTg4OiBcIixcIixcbiAgMTg5OiBcIi1cIixcbiAgMTkwOiBcIi5cIixcbiAgMTkxOiBcIi9cIixcbiAgMTkyOiBcImBcIixcbiAgMjE5OiBcIltcIixcbiAgMjIwOiBcIlxcXFxcIixcbiAgMjIxOiBcIl1cIixcbiAgMjIyOiBcIidcIlxufVxuXG5leHBvcnQgdmFyIHNoaWZ0ID0ge1xuICA0ODogXCIpXCIsXG4gIDQ5OiBcIiFcIixcbiAgNTA6IFwiQFwiLFxuICA1MTogXCIjXCIsXG4gIDUyOiBcIiRcIixcbiAgNTM6IFwiJVwiLFxuICA1NDogXCJeXCIsXG4gIDU1OiBcIiZcIixcbiAgNTY6IFwiKlwiLFxuICA1NzogXCIoXCIsXG4gIDU5OiBcIjpcIixcbiAgNjE6IFwiK1wiLFxuICAxNzM6IFwiX1wiLFxuICAxODY6IFwiOlwiLFxuICAxODc6IFwiK1wiLFxuICAxODg6IFwiPFwiLFxuICAxODk6IFwiX1wiLFxuICAxOTA6IFwiPlwiLFxuICAxOTE6IFwiP1wiLFxuICAxOTI6IFwiflwiLFxuICAyMTk6IFwie1wiLFxuICAyMjA6IFwifFwiLFxuICAyMjE6IFwifVwiLFxuICAyMjI6IFwiXFxcIlwiXG59XG5cbnZhciBtYWMgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pXG52YXIgaWUgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgJiYgL01TSUUgXFxkfFRyaWRlbnRcXC8oPzpbNy05XXxcXGR7Mix9KVxcLi4qcnY6KFxcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpXG5cbi8vIEZpbGwgaW4gdGhlIGRpZ2l0IGtleXNcbmZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgYmFzZVs0OCArIGldID0gYmFzZVs5NiArIGldID0gU3RyaW5nKGkpXG5cbi8vIFRoZSBmdW5jdGlvbiBrZXlzXG5mb3IgKHZhciBpID0gMTsgaSA8PSAyNDsgaSsrKSBiYXNlW2kgKyAxMTFdID0gXCJGXCIgKyBpXG5cbi8vIEFuZCB0aGUgYWxwaGFiZXRpYyBrZXlzXG5mb3IgKHZhciBpID0gNjU7IGkgPD0gOTA7IGkrKykge1xuICBiYXNlW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpICsgMzIpXG4gIHNoaWZ0W2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZShpKVxufVxuXG4vLyBGb3IgZWFjaCBjb2RlIHRoYXQgZG9lc24ndCBoYXZlIGEgc2hpZnQtZXF1aXZhbGVudCwgY29weSB0aGUgYmFzZSBuYW1lXG5mb3IgKHZhciBjb2RlIGluIGJhc2UpIGlmICghc2hpZnQuaGFzT3duUHJvcGVydHkoY29kZSkpIHNoaWZ0W2NvZGVdID0gYmFzZVtjb2RlXVxuXG5leHBvcnQgZnVuY3Rpb24ga2V5TmFtZShldmVudCkge1xuICAvLyBPbiBtYWNPUywga2V5cyBoZWxkIHdpdGggU2hpZnQgYW5kIENtZCBkb24ndCByZWZsZWN0IHRoZSBlZmZlY3Qgb2YgU2hpZnQgaW4gYC5rZXlgLlxuICAvLyBPbiBJRSwgc2hpZnQgZWZmZWN0IGlzIG5ldmVyIGluY2x1ZGVkIGluIGAua2V5YC5cbiAgdmFyIGlnbm9yZUtleSA9IG1hYyAmJiBldmVudC5tZXRhS2V5ICYmIGV2ZW50LnNoaWZ0S2V5ICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5hbHRLZXkgfHxcbiAgICAgIGllICYmIGV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LmtleSAmJiBldmVudC5rZXkubGVuZ3RoID09IDEgfHxcbiAgICAgIGV2ZW50LmtleSA9PSBcIlVuaWRlbnRpZmllZFwiXG4gIHZhciBuYW1lID0gKCFpZ25vcmVLZXkgJiYgZXZlbnQua2V5KSB8fFxuICAgIChldmVudC5zaGlmdEtleSA/IHNoaWZ0IDogYmFzZSlbZXZlbnQua2V5Q29kZV0gfHxcbiAgICBldmVudC5rZXkgfHwgXCJVbmlkZW50aWZpZWRcIlxuICAvLyBFZGdlIHNvbWV0aW1lcyBwcm9kdWNlcyB3cm9uZyBuYW1lcyAoSXNzdWUgIzMpXG4gIGlmIChuYW1lID09IFwiRXNjXCIpIG5hbWUgPSBcIkVzY2FwZVwiXG4gIGlmIChuYW1lID09IFwiRGVsXCIpIG5hbWUgPSBcIkRlbGV0ZVwiXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vaXNzdWVzLzg4NjA1NzEvXG4gIGlmIChuYW1lID09IFwiTGVmdFwiKSBuYW1lID0gXCJBcnJvd0xlZnRcIlxuICBpZiAobmFtZSA9PSBcIlVwXCIpIG5hbWUgPSBcIkFycm93VXBcIlxuICBpZiAobmFtZSA9PSBcIlJpZ2h0XCIpIG5hbWUgPSBcIkFycm93UmlnaHRcIlxuICBpZiAobmFtZSA9PSBcIkRvd25cIikgbmFtZSA9IFwiQXJyb3dEb3duXCJcbiAgcmV0dXJuIG5hbWVcbn1cbiIsImltcG9ydCB7IGtleU5hbWUsIGJhc2UgfSBmcm9tICd3M2Mta2V5bmFtZSc7XG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdwcm9zZW1pcnJvci1zdGF0ZSc7XG5cbmNvbnN0IG1hYyA9IHR5cGVvZiBuYXZpZ2F0b3IgIT0gXCJ1bmRlZmluZWRcIiA/IC9NYWN8aVAoaG9uZXxbb2FdZCkvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSA6IGZhbHNlO1xuZnVuY3Rpb24gbm9ybWFsaXplS2V5TmFtZShuYW1lKSB7XG4gICAgbGV0IHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLyksIHJlc3VsdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChyZXN1bHQgPT0gXCJTcGFjZVwiKVxuICAgICAgICByZXN1bHQgPSBcIiBcIjtcbiAgICBsZXQgYWx0LCBjdHJsLCBzaGlmdCwgbWV0YTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBsZXQgbW9kID0gcGFydHNbaV07XG4gICAgICAgIGlmICgvXihjbWR8bWV0YXxtKSQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBtZXRhID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgYWx0ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoL14oY3xjdHJsfGNvbnRyb2wpJC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIGN0cmwgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXnMoaGlmdCk/JC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIHNoaWZ0ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoL15tb2QkL2kudGVzdChtb2QpKSB7XG4gICAgICAgICAgICBpZiAobWFjKVxuICAgICAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGN0cmwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiBcIiArIG1vZCk7XG4gICAgfVxuICAgIGlmIChhbHQpXG4gICAgICAgIHJlc3VsdCA9IFwiQWx0LVwiICsgcmVzdWx0O1xuICAgIGlmIChjdHJsKVxuICAgICAgICByZXN1bHQgPSBcIkN0cmwtXCIgKyByZXN1bHQ7XG4gICAgaWYgKG1ldGEpXG4gICAgICAgIHJlc3VsdCA9IFwiTWV0YS1cIiArIHJlc3VsdDtcbiAgICBpZiAoc2hpZnQpXG4gICAgICAgIHJlc3VsdCA9IFwiU2hpZnQtXCIgKyByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZShtYXApIHtcbiAgICBsZXQgY29weSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgcHJvcCBpbiBtYXApXG4gICAgICAgIGNvcHlbbm9ybWFsaXplS2V5TmFtZShwcm9wKV0gPSBtYXBbcHJvcF07XG4gICAgcmV0dXJuIGNvcHk7XG59XG5mdW5jdGlvbiBtb2RpZmllcnMobmFtZSwgZXZlbnQsIHNoaWZ0ID0gdHJ1ZSkge1xuICAgIGlmIChldmVudC5hbHRLZXkpXG4gICAgICAgIG5hbWUgPSBcIkFsdC1cIiArIG5hbWU7XG4gICAgaWYgKGV2ZW50LmN0cmxLZXkpXG4gICAgICAgIG5hbWUgPSBcIkN0cmwtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5tZXRhS2V5KVxuICAgICAgICBuYW1lID0gXCJNZXRhLVwiICsgbmFtZTtcbiAgICBpZiAoc2hpZnQgJiYgZXZlbnQuc2hpZnRLZXkpXG4gICAgICAgIG5hbWUgPSBcIlNoaWZ0LVwiICsgbmFtZTtcbiAgICByZXR1cm4gbmFtZTtcbn1cbi8qKlxuQ3JlYXRlIGEga2V5bWFwIHBsdWdpbiBmb3IgdGhlIGdpdmVuIHNldCBvZiBiaW5kaW5ncy5cblxuQmluZGluZ3Mgc2hvdWxkIG1hcCBrZXkgbmFtZXMgdG8gW2NvbW1hbmRdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNjb21tYW5kcyktc3R5bGVcbmZ1bmN0aW9ucywgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2l0aCBgKEVkaXRvclN0YXRlLCBkaXNwYXRjaCxcbkVkaXRvclZpZXcpYCBhcmd1bWVudHMsIGFuZCBzaG91bGQgcmV0dXJuIHRydWUgd2hlbiB0aGV5J3ZlIGhhbmRsZWRcbnRoZSBrZXkuIE5vdGUgdGhhdCB0aGUgdmlldyBhcmd1bWVudCBpc24ndCBwYXJ0IG9mIHRoZSBjb21tYW5kXG5wcm90b2NvbCwgYnV0IGNhbiBiZSB1c2VkIGFzIGFuIGVzY2FwZSBoYXRjaCBpZiBhIGJpbmRpbmcgbmVlZHMgdG9cbmRpcmVjdGx5IGludGVyYWN0IHdpdGggdGhlIFVJLlxuXG5LZXkgbmFtZXMgbWF5IGJlIHN0cmluZ3MgbGlrZSBgXCJTaGlmdC1DdHJsLUVudGVyXCJg4oCUYSBrZXlcbmlkZW50aWZpZXIgcHJlZml4ZWQgd2l0aCB6ZXJvIG9yIG1vcmUgbW9kaWZpZXJzLiBLZXkgaWRlbnRpZmllcnNcbmFyZSBiYXNlZCBvbiB0aGUgc3RyaW5ncyB0aGF0IGNhbiBhcHBlYXIgaW5cbltgS2V5RXZlbnQua2V5YF0oaHR0cHM6ZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50L2tleSkuXG5Vc2UgbG93ZXJjYXNlIGxldHRlcnMgdG8gcmVmZXIgdG8gbGV0dGVyIGtleXMgKG9yIHVwcGVyY2FzZSBsZXR0ZXJzXG5pZiB5b3Ugd2FudCBzaGlmdCB0byBiZSBoZWxkKS4gWW91IG1heSB1c2UgYFwiU3BhY2VcImAgYXMgYW4gYWxpYXNcbmZvciB0aGUgYFwiIFwiYCBuYW1lLlxuXG5Nb2RpZmllcnMgY2FuIGJlIGdpdmVuIGluIGFueSBvcmRlci4gYFNoaWZ0LWAgKG9yIGBzLWApLCBgQWx0LWAgKG9yXG5gYS1gKSwgYEN0cmwtYCAob3IgYGMtYCBvciBgQ29udHJvbC1gKSBhbmQgYENtZC1gIChvciBgbS1gIG9yXG5gTWV0YS1gKSBhcmUgcmVjb2duaXplZC4gRm9yIGNoYXJhY3RlcnMgdGhhdCBhcmUgY3JlYXRlZCBieSBob2xkaW5nXG5zaGlmdCwgdGhlIGBTaGlmdC1gIHByZWZpeCBpcyBpbXBsaWVkLCBhbmQgc2hvdWxkIG5vdCBiZSBhZGRlZFxuZXhwbGljaXRseS5cblxuWW91IGNhbiB1c2UgYE1vZC1gIGFzIGEgc2hvcnRoYW5kIGZvciBgQ21kLWAgb24gTWFjIGFuZCBgQ3RybC1gIG9uXG5vdGhlciBwbGF0Zm9ybXMuXG5cbllvdSBjYW4gYWRkIG11bHRpcGxlIGtleW1hcCBwbHVnaW5zIHRvIGFuIGVkaXRvci4gVGhlIG9yZGVyIGluXG53aGljaCB0aGV5IGFwcGVhciBkZXRlcm1pbmVzIHRoZWlyIHByZWNlZGVuY2UgKHRoZSBvbmVzIGVhcmx5IGluXG50aGUgYXJyYXkgZ2V0IHRvIGRpc3BhdGNoIGZpcnN0KS5cbiovXG5mdW5jdGlvbiBrZXltYXAoYmluZGluZ3MpIHtcbiAgICByZXR1cm4gbmV3IFBsdWdpbih7IHByb3BzOiB7IGhhbmRsZUtleURvd246IGtleWRvd25IYW5kbGVyKGJpbmRpbmdzKSB9IH0pO1xufVxuLyoqXG5HaXZlbiBhIHNldCBvZiBiaW5kaW5ncyAodXNpbmcgdGhlIHNhbWUgZm9ybWF0IGFzXG5bYGtleW1hcGBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNrZXltYXAua2V5bWFwKSksIHJldHVybiBhIFtrZXlkb3duXG5oYW5kbGVyXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JQcm9wcy5oYW5kbGVLZXlEb3duKSB0aGF0IGhhbmRsZXMgdGhlbS5cbiovXG5mdW5jdGlvbiBrZXlkb3duSGFuZGxlcihiaW5kaW5ncykge1xuICAgIGxldCBtYXAgPSBub3JtYWxpemUoYmluZGluZ3MpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodmlldywgZXZlbnQpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBrZXlOYW1lKGV2ZW50KSwgYmFzZU5hbWUsIGRpcmVjdCA9IG1hcFttb2RpZmllcnMobmFtZSwgZXZlbnQpXTtcbiAgICAgICAgaWYgKGRpcmVjdCAmJiBkaXJlY3Qodmlldy5zdGF0ZSwgdmlldy5kaXNwYXRjaCwgdmlldykpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgLy8gQSBjaGFyYWN0ZXIga2V5XG4gICAgICAgIGlmIChuYW1lLmxlbmd0aCA9PSAxICYmIG5hbWUgIT0gXCIgXCIpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIG5hbWUgd2FzIGFscmVhZHkgbW9kaWZpZWQgYnkgc2hpZnQsIHRyeSBsb29raW5nXG4gICAgICAgICAgICAgICAgLy8gaXQgdXAgd2l0aG91dCBpdHMgc2hpZnQgbW9kaWZpZXJcbiAgICAgICAgICAgICAgICBsZXQgbm9TaGlmdCA9IG1hcFttb2RpZmllcnMobmFtZSwgZXZlbnQsIGZhbHNlKV07XG4gICAgICAgICAgICAgICAgaWYgKG5vU2hpZnQgJiYgbm9TaGlmdCh2aWV3LnN0YXRlLCB2aWV3LmRpc3BhdGNoLCB2aWV3KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGV2ZW50LnNoaWZ0S2V5IHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5tZXRhS2V5IHx8IG5hbWUuY2hhckNvZGVBdCgwKSA+IDEyNykgJiZcbiAgICAgICAgICAgICAgICAoYmFzZU5hbWUgPSBiYXNlW2V2ZW50LmtleUNvZGVdKSAmJiBiYXNlTmFtZSAhPSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IGZhbGxpbmcgYmFjayB0byB0aGUga2V5Q29kZSB3aGVuIHRoZXJlJ3MgYSBtb2RpZmllclxuICAgICAgICAgICAgICAgIC8vIGFjdGl2ZSBvciB0aGUgY2hhcmFjdGVyIHByb2R1Y2VkIGlzbid0IEFTQ0lJLCBhbmQgb3VyIHRhYmxlXG4gICAgICAgICAgICAgICAgLy8gcHJvZHVjZXMgYSBkaWZmZXJlbnQgbmFtZSBmcm9tIHRoZSB0aGUga2V5Q29kZS4gU2VlICM2NjgsXG4gICAgICAgICAgICAgICAgLy8gIzEwNjBcbiAgICAgICAgICAgICAgICBsZXQgZnJvbUNvZGUgPSBtYXBbbW9kaWZpZXJzKGJhc2VOYW1lLCBldmVudCldO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tQ29kZSAmJiBmcm9tQ29kZSh2aWV3LnN0YXRlLCB2aWV3LmRpc3BhdGNoLCB2aWV3KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59XG5cbmV4cG9ydCB7IGtleWRvd25IYW5kbGVyLCBrZXltYXAgfTtcbiIsImltcG9ydCB7IGxpZnRUYXJnZXQsIHJlcGxhY2VTdGVwLCBSZXBsYWNlU3RlcCwgY2FuSm9pbiwgam9pblBvaW50LCBjYW5TcGxpdCwgUmVwbGFjZUFyb3VuZFN0ZXAsIGZpbmRXcmFwcGluZyB9IGZyb20gJ3Byb3NlbWlycm9yLXRyYW5zZm9ybSc7XG5pbXBvcnQgeyBTbGljZSwgRnJhZ21lbnQgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5pbXBvcnQgeyBOb2RlU2VsZWN0aW9uLCBTZWxlY3Rpb24sIFRleHRTZWxlY3Rpb24sIEFsbFNlbGVjdGlvbiB9IGZyb20gJ3Byb3NlbWlycm9yLXN0YXRlJztcblxuLyoqXG5EZWxldGUgdGhlIHNlbGVjdGlvbiwgaWYgdGhlcmUgaXMgb25lLlxuKi9cbmNvbnN0IGRlbGV0ZVNlbGVjdGlvbiA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBpZiAoc3RhdGUuc2VsZWN0aW9uLmVtcHR5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBhdEJsb2NrU3RhcnQoc3RhdGUsIHZpZXcpIHtcbiAgICBsZXQgeyAkY3Vyc29yIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgaWYgKCEkY3Vyc29yIHx8ICh2aWV3ID8gIXZpZXcuZW5kT2ZUZXh0YmxvY2soXCJiYWNrd2FyZFwiLCBzdGF0ZSlcbiAgICAgICAgOiAkY3Vyc29yLnBhcmVudE9mZnNldCA+IDApKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gJGN1cnNvcjtcbn1cbi8qKlxuSWYgdGhlIHNlbGVjdGlvbiBpcyBlbXB0eSBhbmQgYXQgdGhlIHN0YXJ0IG9mIGEgdGV4dGJsb2NrLCB0cnkgdG9cbnJlZHVjZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGF0IGJsb2NrIGFuZCB0aGUgb25lIGJlZm9yZSBpdOKAlGlmXG50aGVyZSdzIGEgYmxvY2sgZGlyZWN0bHkgYmVmb3JlIGl0IHRoYXQgY2FuIGJlIGpvaW5lZCwgam9pbiB0aGVtLlxuSWYgbm90LCB0cnkgdG8gbW92ZSB0aGUgc2VsZWN0ZWQgYmxvY2sgY2xvc2VyIHRvIHRoZSBuZXh0IG9uZSBpblxudGhlIGRvY3VtZW50IHN0cnVjdHVyZSBieSBsaWZ0aW5nIGl0IG91dCBvZiBpdHMgcGFyZW50IG9yIG1vdmluZyBpdFxuaW50byBhIHBhcmVudCBvZiB0aGUgcHJldmlvdXMgYmxvY2suIFdpbGwgdXNlIHRoZSB2aWV3IGZvciBhY2N1cmF0ZVxuKGJpZGktYXdhcmUpIHN0YXJ0LW9mLXRleHRibG9jayBkZXRlY3Rpb24gaWYgZ2l2ZW4uXG4qL1xuY29uc3Qgam9pbkJhY2t3YXJkID0gKHN0YXRlLCBkaXNwYXRjaCwgdmlldykgPT4ge1xuICAgIGxldCAkY3Vyc29yID0gYXRCbG9ja1N0YXJ0KHN0YXRlLCB2aWV3KTtcbiAgICBpZiAoISRjdXJzb3IpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgJGN1dCA9IGZpbmRDdXRCZWZvcmUoJGN1cnNvcik7XG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gbm9kZSBiZWZvcmUgdGhpcywgdHJ5IHRvIGxpZnRcbiAgICBpZiAoISRjdXQpIHtcbiAgICAgICAgbGV0IHJhbmdlID0gJGN1cnNvci5ibG9ja1JhbmdlKCksIHRhcmdldCA9IHJhbmdlICYmIGxpZnRUYXJnZXQocmFuZ2UpO1xuICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyLmxpZnQocmFuZ2UsIHRhcmdldCkuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgYmVmb3JlID0gJGN1dC5ub2RlQmVmb3JlO1xuICAgIC8vIEFwcGx5IHRoZSBqb2luaW5nIGFsZ29yaXRobVxuICAgIGlmICghYmVmb3JlLnR5cGUuc3BlYy5pc29sYXRpbmcgJiYgZGVsZXRlQmFycmllcihzdGF0ZSwgJGN1dCwgZGlzcGF0Y2gpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBJZiB0aGUgbm9kZSBiZWxvdyBoYXMgbm8gY29udGVudCBhbmQgdGhlIG5vZGUgYWJvdmUgaXNcbiAgICAvLyBzZWxlY3RhYmxlLCBkZWxldGUgdGhlIG5vZGUgYmVsb3cgYW5kIHNlbGVjdCB0aGUgb25lIGFib3ZlLlxuICAgIGlmICgkY3Vyc29yLnBhcmVudC5jb250ZW50LnNpemUgPT0gMCAmJlxuICAgICAgICAodGV4dGJsb2NrQXQoYmVmb3JlLCBcImVuZFwiKSB8fCBOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShiZWZvcmUpKSkge1xuICAgICAgICBsZXQgZGVsU3RlcCA9IHJlcGxhY2VTdGVwKHN0YXRlLmRvYywgJGN1cnNvci5iZWZvcmUoKSwgJGN1cnNvci5hZnRlcigpLCBTbGljZS5lbXB0eSk7XG4gICAgICAgIGlmIChkZWxTdGVwICYmIGRlbFN0ZXAuc2xpY2Uuc2l6ZSA8IGRlbFN0ZXAudG8gLSBkZWxTdGVwLmZyb20pIHtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLnN0ZXAoZGVsU3RlcCk7XG4gICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKHRleHRibG9ja0F0KGJlZm9yZSwgXCJlbmRcIikgPyBTZWxlY3Rpb24uZmluZEZyb20odHIuZG9jLnJlc29sdmUodHIubWFwcGluZy5tYXAoJGN1dC5wb3MsIC0xKSksIC0xKVxuICAgICAgICAgICAgICAgICAgICA6IE5vZGVTZWxlY3Rpb24uY3JlYXRlKHRyLmRvYywgJGN1dC5wb3MgLSBiZWZvcmUubm9kZVNpemUpKTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElmIHRoZSBub2RlIGJlZm9yZSBpcyBhbiBhdG9tLCBkZWxldGUgaXRcbiAgICBpZiAoYmVmb3JlLmlzQXRvbSAmJiAkY3V0LmRlcHRoID09ICRjdXJzb3IuZGVwdGggLSAxKSB7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyLmRlbGV0ZSgkY3V0LnBvcyAtIGJlZm9yZS5ub2RlU2l6ZSwgJGN1dC5wb3MpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbi8qKlxuQSBtb3JlIGxpbWl0ZWQgZm9ybSBvZiBbYGpvaW5CYWNrd2FyZGBdKCRjb21tYW5kcy5qb2luQmFja3dhcmQpXG50aGF0IG9ubHkgdHJpZXMgdG8gam9pbiB0aGUgY3VycmVudCB0ZXh0YmxvY2sgdG8gdGhlIG9uZSBiZWZvcmVcbml0LCBpZiB0aGUgY3Vyc29yIGlzIGF0IHRoZSBzdGFydCBvZiBhIHRleHRibG9jay5cbiovXG5jb25zdCBqb2luVGV4dGJsb2NrQmFja3dhcmQgPSAoc3RhdGUsIGRpc3BhdGNoLCB2aWV3KSA9PiB7XG4gICAgbGV0ICRjdXJzb3IgPSBhdEJsb2NrU3RhcnQoc3RhdGUsIHZpZXcpO1xuICAgIGlmICghJGN1cnNvcilcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCAkY3V0ID0gZmluZEN1dEJlZm9yZSgkY3Vyc29yKTtcbiAgICByZXR1cm4gJGN1dCA/IGpvaW5UZXh0YmxvY2tzQXJvdW5kKHN0YXRlLCAkY3V0LCBkaXNwYXRjaCkgOiBmYWxzZTtcbn07XG4vKipcbkEgbW9yZSBsaW1pdGVkIGZvcm0gb2YgW2Bqb2luRm9yd2FyZGBdKCRjb21tYW5kcy5qb2luRm9yd2FyZClcbnRoYXQgb25seSB0cmllcyB0byBqb2luIHRoZSBjdXJyZW50IHRleHRibG9jayB0byB0aGUgb25lIGFmdGVyXG5pdCwgaWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgZW5kIG9mIGEgdGV4dGJsb2NrLlxuKi9cbmNvbnN0IGpvaW5UZXh0YmxvY2tGb3J3YXJkID0gKHN0YXRlLCBkaXNwYXRjaCwgdmlldykgPT4ge1xuICAgIGxldCAkY3Vyc29yID0gYXRCbG9ja0VuZChzdGF0ZSwgdmlldyk7XG4gICAgaWYgKCEkY3Vyc29yKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0ICRjdXQgPSBmaW5kQ3V0QWZ0ZXIoJGN1cnNvcik7XG4gICAgcmV0dXJuICRjdXQgPyBqb2luVGV4dGJsb2Nrc0Fyb3VuZChzdGF0ZSwgJGN1dCwgZGlzcGF0Y2gpIDogZmFsc2U7XG59O1xuZnVuY3Rpb24gam9pblRleHRibG9ja3NBcm91bmQoc3RhdGUsICRjdXQsIGRpc3BhdGNoKSB7XG4gICAgbGV0IGJlZm9yZSA9ICRjdXQubm9kZUJlZm9yZSwgYmVmb3JlVGV4dCA9IGJlZm9yZSwgYmVmb3JlUG9zID0gJGN1dC5wb3MgLSAxO1xuICAgIGZvciAoOyAhYmVmb3JlVGV4dC5pc1RleHRibG9jazsgYmVmb3JlUG9zLS0pIHtcbiAgICAgICAgaWYgKGJlZm9yZVRleHQudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGNoaWxkID0gYmVmb3JlVGV4dC5sYXN0Q2hpbGQ7XG4gICAgICAgIGlmICghY2hpbGQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGJlZm9yZVRleHQgPSBjaGlsZDtcbiAgICB9XG4gICAgbGV0IGFmdGVyID0gJGN1dC5ub2RlQWZ0ZXIsIGFmdGVyVGV4dCA9IGFmdGVyLCBhZnRlclBvcyA9ICRjdXQucG9zICsgMTtcbiAgICBmb3IgKDsgIWFmdGVyVGV4dC5pc1RleHRibG9jazsgYWZ0ZXJQb3MrKykge1xuICAgICAgICBpZiAoYWZ0ZXJUZXh0LnR5cGUuc3BlYy5pc29sYXRpbmcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBjaGlsZCA9IGFmdGVyVGV4dC5maXJzdENoaWxkO1xuICAgICAgICBpZiAoIWNoaWxkKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBhZnRlclRleHQgPSBjaGlsZDtcbiAgICB9XG4gICAgbGV0IHN0ZXAgPSByZXBsYWNlU3RlcChzdGF0ZS5kb2MsIGJlZm9yZVBvcywgYWZ0ZXJQb3MsIFNsaWNlLmVtcHR5KTtcbiAgICBpZiAoIXN0ZXAgfHwgc3RlcC5mcm9tICE9IGJlZm9yZVBvcyB8fFxuICAgICAgICBzdGVwIGluc3RhbmNlb2YgUmVwbGFjZVN0ZXAgJiYgc3RlcC5zbGljZS5zaXplID49IGFmdGVyUG9zIC0gYmVmb3JlUG9zKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLnN0ZXAoc3RlcCk7XG4gICAgICAgIHRyLnNldFNlbGVjdGlvbihUZXh0U2VsZWN0aW9uLmNyZWF0ZSh0ci5kb2MsIGJlZm9yZVBvcykpO1xuICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiB0ZXh0YmxvY2tBdChub2RlLCBzaWRlLCBvbmx5ID0gZmFsc2UpIHtcbiAgICBmb3IgKGxldCBzY2FuID0gbm9kZTsgc2Nhbjsgc2NhbiA9IChzaWRlID09IFwic3RhcnRcIiA/IHNjYW4uZmlyc3RDaGlsZCA6IHNjYW4ubGFzdENoaWxkKSkge1xuICAgICAgICBpZiAoc2Nhbi5pc1RleHRibG9jaylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob25seSAmJiBzY2FuLmNoaWxkQ291bnQgIT0gMSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG5XaGVuIHRoZSBzZWxlY3Rpb24gaXMgZW1wdHkgYW5kIGF0IHRoZSBzdGFydCBvZiBhIHRleHRibG9jaywgc2VsZWN0XG50aGUgbm9kZSBiZWZvcmUgdGhhdCB0ZXh0YmxvY2ssIGlmIHBvc3NpYmxlLiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG5ib3VuZCB0byBrZXlzIGxpa2UgYmFja3NwYWNlLCBhZnRlclxuW2Bqb2luQmFja3dhcmRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jY29tbWFuZHMuam9pbkJhY2t3YXJkKSBvciBvdGhlciBkZWxldGluZ1xuY29tbWFuZHMsIGFzIGEgZmFsbC1iYWNrIGJlaGF2aW9yIHdoZW4gdGhlIHNjaGVtYSBkb2Vzbid0IGFsbG93XG5kZWxldGlvbiBhdCB0aGUgc2VsZWN0ZWQgcG9pbnQuXG4qL1xuY29uc3Qgc2VsZWN0Tm9kZUJhY2t3YXJkID0gKHN0YXRlLCBkaXNwYXRjaCwgdmlldykgPT4ge1xuICAgIGxldCB7ICRoZWFkLCBlbXB0eSB9ID0gc3RhdGUuc2VsZWN0aW9uLCAkY3V0ID0gJGhlYWQ7XG4gICAgaWYgKCFlbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICgkaGVhZC5wYXJlbnQuaXNUZXh0YmxvY2spIHtcbiAgICAgICAgaWYgKHZpZXcgPyAhdmlldy5lbmRPZlRleHRibG9jayhcImJhY2t3YXJkXCIsIHN0YXRlKSA6ICRoZWFkLnBhcmVudE9mZnNldCA+IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICRjdXQgPSBmaW5kQ3V0QmVmb3JlKCRoZWFkKTtcbiAgICB9XG4gICAgbGV0IG5vZGUgPSAkY3V0ICYmICRjdXQubm9kZUJlZm9yZTtcbiAgICBpZiAoIW5vZGUgfHwgIU5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKG5vZGUpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5zZXRTZWxlY3Rpb24oTm9kZVNlbGVjdGlvbi5jcmVhdGUoc3RhdGUuZG9jLCAkY3V0LnBvcyAtIG5vZGUubm9kZVNpemUpKS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5mdW5jdGlvbiBmaW5kQ3V0QmVmb3JlKCRwb3MpIHtcbiAgICBpZiAoISRwb3MucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcpXG4gICAgICAgIGZvciAobGV0IGkgPSAkcG9zLmRlcHRoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmICgkcG9zLmluZGV4KGkpID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm4gJHBvcy5kb2MucmVzb2x2ZSgkcG9zLmJlZm9yZShpICsgMSkpO1xuICAgICAgICAgICAgaWYgKCRwb3Mubm9kZShpKS50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBhdEJsb2NrRW5kKHN0YXRlLCB2aWV3KSB7XG4gICAgbGV0IHsgJGN1cnNvciB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmICghJGN1cnNvciB8fCAodmlldyA/ICF2aWV3LmVuZE9mVGV4dGJsb2NrKFwiZm9yd2FyZFwiLCBzdGF0ZSlcbiAgICAgICAgOiAkY3Vyc29yLnBhcmVudE9mZnNldCA8ICRjdXJzb3IucGFyZW50LmNvbnRlbnQuc2l6ZSkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIHJldHVybiAkY3Vyc29yO1xufVxuLyoqXG5JZiB0aGUgc2VsZWN0aW9uIGlzIGVtcHR5IGFuZCB0aGUgY3Vyc29yIGlzIGF0IHRoZSBlbmQgb2YgYVxudGV4dGJsb2NrLCB0cnkgdG8gcmVkdWNlIG9yIHJlbW92ZSB0aGUgYm91bmRhcnkgYmV0d2VlbiB0aGF0IGJsb2NrXG5hbmQgdGhlIG9uZSBhZnRlciBpdCwgZWl0aGVyIGJ5IGpvaW5pbmcgdGhlbSBvciBieSBtb3ZpbmcgdGhlIG90aGVyXG5ibG9jayBjbG9zZXIgdG8gdGhpcyBvbmUgaW4gdGhlIHRyZWUgc3RydWN0dXJlLiBXaWxsIHVzZSB0aGUgdmlld1xuZm9yIGFjY3VyYXRlIHN0YXJ0LW9mLXRleHRibG9jayBkZXRlY3Rpb24gaWYgZ2l2ZW4uXG4qL1xuY29uc3Qgam9pbkZvcndhcmQgPSAoc3RhdGUsIGRpc3BhdGNoLCB2aWV3KSA9PiB7XG4gICAgbGV0ICRjdXJzb3IgPSBhdEJsb2NrRW5kKHN0YXRlLCB2aWV3KTtcbiAgICBpZiAoISRjdXJzb3IpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgJGN1dCA9IGZpbmRDdXRBZnRlcigkY3Vyc29yKTtcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBub2RlIGFmdGVyIHRoaXMsIHRoZXJlJ3Mgbm90aGluZyB0byBkb1xuICAgIGlmICghJGN1dClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBhZnRlciA9ICRjdXQubm9kZUFmdGVyO1xuICAgIC8vIFRyeSB0aGUgam9pbmluZyBhbGdvcml0aG1cbiAgICBpZiAoZGVsZXRlQmFycmllcihzdGF0ZSwgJGN1dCwgZGlzcGF0Y2gpKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAvLyBJZiB0aGUgbm9kZSBhYm92ZSBoYXMgbm8gY29udGVudCBhbmQgdGhlIG5vZGUgYmVsb3cgaXNcbiAgICAvLyBzZWxlY3RhYmxlLCBkZWxldGUgdGhlIG5vZGUgYWJvdmUgYW5kIHNlbGVjdCB0aGUgb25lIGJlbG93LlxuICAgIGlmICgkY3Vyc29yLnBhcmVudC5jb250ZW50LnNpemUgPT0gMCAmJlxuICAgICAgICAodGV4dGJsb2NrQXQoYWZ0ZXIsIFwic3RhcnRcIikgfHwgTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoYWZ0ZXIpKSkge1xuICAgICAgICBsZXQgZGVsU3RlcCA9IHJlcGxhY2VTdGVwKHN0YXRlLmRvYywgJGN1cnNvci5iZWZvcmUoKSwgJGN1cnNvci5hZnRlcigpLCBTbGljZS5lbXB0eSk7XG4gICAgICAgIGlmIChkZWxTdGVwICYmIGRlbFN0ZXAuc2xpY2Uuc2l6ZSA8IGRlbFN0ZXAudG8gLSBkZWxTdGVwLmZyb20pIHtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLnN0ZXAoZGVsU3RlcCk7XG4gICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKHRleHRibG9ja0F0KGFmdGVyLCBcInN0YXJ0XCIpID8gU2VsZWN0aW9uLmZpbmRGcm9tKHRyLmRvYy5yZXNvbHZlKHRyLm1hcHBpbmcubWFwKCRjdXQucG9zKSksIDEpXG4gICAgICAgICAgICAgICAgICAgIDogTm9kZVNlbGVjdGlvbi5jcmVhdGUodHIuZG9jLCB0ci5tYXBwaW5nLm1hcCgkY3V0LnBvcykpKTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElmIHRoZSBuZXh0IG5vZGUgaXMgYW4gYXRvbSwgZGVsZXRlIGl0XG4gICAgaWYgKGFmdGVyLmlzQXRvbSAmJiAkY3V0LmRlcHRoID09ICRjdXJzb3IuZGVwdGggLSAxKSB7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyLmRlbGV0ZSgkY3V0LnBvcywgJGN1dC5wb3MgKyBhZnRlci5ub2RlU2l6ZSkuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuLyoqXG5XaGVuIHRoZSBzZWxlY3Rpb24gaXMgZW1wdHkgYW5kIGF0IHRoZSBlbmQgb2YgYSB0ZXh0YmxvY2ssIHNlbGVjdFxudGhlIG5vZGUgY29taW5nIGFmdGVyIHRoYXQgdGV4dGJsb2NrLCBpZiBwb3NzaWJsZS4gVGhpcyBpcyBpbnRlbmRlZFxudG8gYmUgYm91bmQgdG8ga2V5cyBsaWtlIGRlbGV0ZSwgYWZ0ZXJcbltgam9pbkZvcndhcmRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jY29tbWFuZHMuam9pbkZvcndhcmQpIGFuZCBzaW1pbGFyIGRlbGV0aW5nXG5jb21tYW5kcywgdG8gcHJvdmlkZSBhIGZhbGwtYmFjayBiZWhhdmlvciB3aGVuIHRoZSBzY2hlbWEgZG9lc24ndFxuYWxsb3cgZGVsZXRpb24gYXQgdGhlIHNlbGVjdGVkIHBvaW50LlxuKi9cbmNvbnN0IHNlbGVjdE5vZGVGb3J3YXJkID0gKHN0YXRlLCBkaXNwYXRjaCwgdmlldykgPT4ge1xuICAgIGxldCB7ICRoZWFkLCBlbXB0eSB9ID0gc3RhdGUuc2VsZWN0aW9uLCAkY3V0ID0gJGhlYWQ7XG4gICAgaWYgKCFlbXB0eSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICgkaGVhZC5wYXJlbnQuaXNUZXh0YmxvY2spIHtcbiAgICAgICAgaWYgKHZpZXcgPyAhdmlldy5lbmRPZlRleHRibG9jayhcImZvcndhcmRcIiwgc3RhdGUpIDogJGhlYWQucGFyZW50T2Zmc2V0IDwgJGhlYWQucGFyZW50LmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgJGN1dCA9IGZpbmRDdXRBZnRlcigkaGVhZCk7XG4gICAgfVxuICAgIGxldCBub2RlID0gJGN1dCAmJiAkY3V0Lm5vZGVBZnRlcjtcbiAgICBpZiAoIW5vZGUgfHwgIU5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKG5vZGUpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5zZXRTZWxlY3Rpb24oTm9kZVNlbGVjdGlvbi5jcmVhdGUoc3RhdGUuZG9jLCAkY3V0LnBvcykpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIGZpbmRDdXRBZnRlcigkcG9zKSB7XG4gICAgaWYgKCEkcG9zLnBhcmVudC50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICBmb3IgKGxldCBpID0gJHBvcy5kZXB0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gJHBvcy5ub2RlKGkpO1xuICAgICAgICAgICAgaWYgKCRwb3MuaW5kZXgoaSkgKyAxIDwgcGFyZW50LmNoaWxkQ291bnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuICRwb3MuZG9jLnJlc29sdmUoJHBvcy5hZnRlcihpICsgMSkpO1xuICAgICAgICAgICAgaWYgKHBhcmVudC50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbkpvaW4gdGhlIHNlbGVjdGVkIGJsb2NrIG9yLCBpZiB0aGVyZSBpcyBhIHRleHQgc2VsZWN0aW9uLCB0aGVcbmNsb3Nlc3QgYW5jZXN0b3IgYmxvY2sgb2YgdGhlIHNlbGVjdGlvbiB0aGF0IGNhbiBiZSBqb2luZWQsIHdpdGhcbnRoZSBzaWJsaW5nIGFib3ZlIGl0LlxuKi9cbmNvbnN0IGpvaW5VcCA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgc2VsID0gc3RhdGUuc2VsZWN0aW9uLCBub2RlU2VsID0gc2VsIGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbiwgcG9pbnQ7XG4gICAgaWYgKG5vZGVTZWwpIHtcbiAgICAgICAgaWYgKHNlbC5ub2RlLmlzVGV4dGJsb2NrIHx8ICFjYW5Kb2luKHN0YXRlLmRvYywgc2VsLmZyb20pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwb2ludCA9IHNlbC5mcm9tO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcG9pbnQgPSBqb2luUG9pbnQoc3RhdGUuZG9jLCBzZWwuZnJvbSwgLTEpO1xuICAgICAgICBpZiAocG9pbnQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLmpvaW4ocG9pbnQpO1xuICAgICAgICBpZiAobm9kZVNlbClcbiAgICAgICAgICAgIHRyLnNldFNlbGVjdGlvbihOb2RlU2VsZWN0aW9uLmNyZWF0ZSh0ci5kb2MsIHBvaW50IC0gc3RhdGUuZG9jLnJlc29sdmUocG9pbnQpLm5vZGVCZWZvcmUubm9kZVNpemUpKTtcbiAgICAgICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuSm9pbiB0aGUgc2VsZWN0ZWQgYmxvY2ssIG9yIHRoZSBjbG9zZXN0IGFuY2VzdG9yIG9mIHRoZSBzZWxlY3Rpb25cbnRoYXQgY2FuIGJlIGpvaW5lZCwgd2l0aCB0aGUgc2libGluZyBhZnRlciBpdC5cbiovXG5jb25zdCBqb2luRG93biA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgc2VsID0gc3RhdGUuc2VsZWN0aW9uLCBwb2ludDtcbiAgICBpZiAoc2VsIGluc3RhbmNlb2YgTm9kZVNlbGVjdGlvbikge1xuICAgICAgICBpZiAoc2VsLm5vZGUuaXNUZXh0YmxvY2sgfHwgIWNhbkpvaW4oc3RhdGUuZG9jLCBzZWwudG8pKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwb2ludCA9IHNlbC50bztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBvaW50ID0gam9pblBvaW50KHN0YXRlLmRvYywgc2VsLnRvLCAxKTtcbiAgICAgICAgaWYgKHBvaW50ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuam9pbihwb2ludCkuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5MaWZ0IHRoZSBzZWxlY3RlZCBibG9jaywgb3IgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgYmxvY2sgb2YgdGhlXG5zZWxlY3Rpb24gdGhhdCBjYW4gYmUgbGlmdGVkLCBvdXQgb2YgaXRzIHBhcmVudCBub2RlLlxuKi9cbmNvbnN0IGxpZnQgPSAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgbGV0IHsgJGZyb20sICR0byB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGxldCByYW5nZSA9ICRmcm9tLmJsb2NrUmFuZ2UoJHRvKSwgdGFyZ2V0ID0gcmFuZ2UgJiYgbGlmdFRhcmdldChyYW5nZSk7XG4gICAgaWYgKHRhcmdldCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5saWZ0KHJhbmdlLCB0YXJnZXQpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuSWYgdGhlIHNlbGVjdGlvbiBpcyBpbiBhIG5vZGUgd2hvc2UgdHlwZSBoYXMgYSB0cnV0aHlcbltgY29kZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlYy5jb2RlKSBwcm9wZXJ0eSBpbiBpdHMgc3BlYywgcmVwbGFjZSB0aGVcbnNlbGVjdGlvbiB3aXRoIGEgbmV3bGluZSBjaGFyYWN0ZXIuXG4qL1xuY29uc3QgbmV3bGluZUluQ29kZSA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgeyAkaGVhZCwgJGFuY2hvciB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmICghJGhlYWQucGFyZW50LnR5cGUuc3BlYy5jb2RlIHx8ICEkaGVhZC5zYW1lUGFyZW50KCRhbmNob3IpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5pbnNlcnRUZXh0KFwiXFxuXCIpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbmZ1bmN0aW9uIGRlZmF1bHRCbG9ja0F0KG1hdGNoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaC5lZGdlQ291bnQ7IGkrKykge1xuICAgICAgICBsZXQgeyB0eXBlIH0gPSBtYXRjaC5lZGdlKGkpO1xuICAgICAgICBpZiAodHlwZS5pc1RleHRibG9jayAmJiAhdHlwZS5oYXNSZXF1aXJlZEF0dHJzKCkpXG4gICAgICAgICAgICByZXR1cm4gdHlwZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbldoZW4gdGhlIHNlbGVjdGlvbiBpcyBpbiBhIG5vZGUgd2l0aCBhIHRydXRoeVxuW2Bjb2RlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmNvZGUpIHByb3BlcnR5IGluIGl0cyBzcGVjLCBjcmVhdGUgYVxuZGVmYXVsdCBibG9jayBhZnRlciB0aGUgY29kZSBibG9jaywgYW5kIG1vdmUgdGhlIGN1cnNvciB0aGVyZS5cbiovXG5jb25zdCBleGl0Q29kZSA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgeyAkaGVhZCwgJGFuY2hvciB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGlmICghJGhlYWQucGFyZW50LnR5cGUuc3BlYy5jb2RlIHx8ICEkaGVhZC5zYW1lUGFyZW50KCRhbmNob3IpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGFib3ZlID0gJGhlYWQubm9kZSgtMSksIGFmdGVyID0gJGhlYWQuaW5kZXhBZnRlcigtMSksIHR5cGUgPSBkZWZhdWx0QmxvY2tBdChhYm92ZS5jb250ZW50TWF0Y2hBdChhZnRlcikpO1xuICAgIGlmICghdHlwZSB8fCAhYWJvdmUuY2FuUmVwbGFjZVdpdGgoYWZ0ZXIsIGFmdGVyLCB0eXBlKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICBsZXQgcG9zID0gJGhlYWQuYWZ0ZXIoKSwgdHIgPSBzdGF0ZS50ci5yZXBsYWNlV2l0aChwb3MsIHBvcywgdHlwZS5jcmVhdGVBbmRGaWxsKCkpO1xuICAgICAgICB0ci5zZXRTZWxlY3Rpb24oU2VsZWN0aW9uLm5lYXIodHIuZG9jLnJlc29sdmUocG9zKSwgMSkpO1xuICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5JZiBhIGJsb2NrIG5vZGUgaXMgc2VsZWN0ZWQsIGNyZWF0ZSBhbiBlbXB0eSBwYXJhZ3JhcGggYmVmb3JlIChpZlxuaXQgaXMgaXRzIHBhcmVudCdzIGZpcnN0IGNoaWxkKSBvciBhZnRlciBpdC5cbiovXG5jb25zdCBjcmVhdGVQYXJhZ3JhcGhOZWFyID0gKHN0YXRlLCBkaXNwYXRjaCkgPT4ge1xuICAgIGxldCBzZWwgPSBzdGF0ZS5zZWxlY3Rpb24sIHsgJGZyb20sICR0byB9ID0gc2VsO1xuICAgIGlmIChzZWwgaW5zdGFuY2VvZiBBbGxTZWxlY3Rpb24gfHwgJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnQgfHwgJHRvLnBhcmVudC5pbmxpbmVDb250ZW50KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IHR5cGUgPSBkZWZhdWx0QmxvY2tBdCgkdG8ucGFyZW50LmNvbnRlbnRNYXRjaEF0KCR0by5pbmRleEFmdGVyKCkpKTtcbiAgICBpZiAoIXR5cGUgfHwgIXR5cGUuaXNUZXh0YmxvY2spXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgbGV0IHNpZGUgPSAoISRmcm9tLnBhcmVudE9mZnNldCAmJiAkdG8uaW5kZXgoKSA8ICR0by5wYXJlbnQuY2hpbGRDb3VudCA/ICRmcm9tIDogJHRvKS5wb3M7XG4gICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLmluc2VydChzaWRlLCB0eXBlLmNyZWF0ZUFuZEZpbGwoKSk7XG4gICAgICAgIHRyLnNldFNlbGVjdGlvbihUZXh0U2VsZWN0aW9uLmNyZWF0ZSh0ci5kb2MsIHNpZGUgKyAxKSk7XG4gICAgICAgIGRpc3BhdGNoKHRyLnNjcm9sbEludG9WaWV3KCkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbklmIHRoZSBjdXJzb3IgaXMgaW4gYW4gZW1wdHkgdGV4dGJsb2NrIHRoYXQgY2FuIGJlIGxpZnRlZCwgbGlmdCB0aGVcbmJsb2NrLlxuKi9cbmNvbnN0IGxpZnRFbXB0eUJsb2NrID0gKHN0YXRlLCBkaXNwYXRjaCkgPT4ge1xuICAgIGxldCB7ICRjdXJzb3IgfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICBpZiAoISRjdXJzb3IgfHwgJGN1cnNvci5wYXJlbnQuY29udGVudC5zaXplKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCRjdXJzb3IuZGVwdGggPiAxICYmICRjdXJzb3IuYWZ0ZXIoKSAhPSAkY3Vyc29yLmVuZCgtMSkpIHtcbiAgICAgICAgbGV0IGJlZm9yZSA9ICRjdXJzb3IuYmVmb3JlKCk7XG4gICAgICAgIGlmIChjYW5TcGxpdChzdGF0ZS5kb2MsIGJlZm9yZSkpIHtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5zcGxpdChiZWZvcmUpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJhbmdlID0gJGN1cnNvci5ibG9ja1JhbmdlKCksIHRhcmdldCA9IHJhbmdlICYmIGxpZnRUYXJnZXQocmFuZ2UpO1xuICAgIGlmICh0YXJnZXQgPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIubGlmdChyYW5nZSwgdGFyZ2V0KS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbkNyZWF0ZSBhIHZhcmlhbnQgb2YgW2BzcGxpdEJsb2NrYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1hbmRzLnNwbGl0QmxvY2spIHRoYXQgdXNlc1xuYSBjdXN0b20gZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIHRoZSBuZXdseSBzcGxpdCBvZmYgYmxvY2suXG4qL1xuZnVuY3Rpb24gc3BsaXRCbG9ja0FzKHNwbGl0Tm9kZSkge1xuICAgIHJldHVybiAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24gJiYgc3RhdGUuc2VsZWN0aW9uLm5vZGUuaXNCbG9jaykge1xuICAgICAgICAgICAgaWYgKCEkZnJvbS5wYXJlbnRPZmZzZXQgfHwgIWNhblNwbGl0KHN0YXRlLmRvYywgJGZyb20ucG9zKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZGlzcGF0Y2gpXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuc3BsaXQoJGZyb20ucG9zKS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGZyb20ucGFyZW50LmlzQmxvY2spXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgbGV0IGF0RW5kID0gJHRvLnBhcmVudE9mZnNldCA9PSAkdG8ucGFyZW50LmNvbnRlbnQuc2l6ZTtcbiAgICAgICAgICAgIGxldCB0ciA9IHN0YXRlLnRyO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIFRleHRTZWxlY3Rpb24gfHwgc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgQWxsU2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgIHRyLmRlbGV0ZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgbGV0IGRlZmx0ID0gJGZyb20uZGVwdGggPT0gMCA/IG51bGwgOiBkZWZhdWx0QmxvY2tBdCgkZnJvbS5ub2RlKC0xKS5jb250ZW50TWF0Y2hBdCgkZnJvbS5pbmRleEFmdGVyKC0xKSkpO1xuICAgICAgICAgICAgbGV0IHNwbGl0VHlwZSA9IHNwbGl0Tm9kZSAmJiBzcGxpdE5vZGUoJHRvLnBhcmVudCwgYXRFbmQpO1xuICAgICAgICAgICAgbGV0IHR5cGVzID0gc3BsaXRUeXBlID8gW3NwbGl0VHlwZV0gOiBhdEVuZCAmJiBkZWZsdCA/IFt7IHR5cGU6IGRlZmx0IH1dIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgbGV0IGNhbiA9IGNhblNwbGl0KHRyLmRvYywgdHIubWFwcGluZy5tYXAoJGZyb20ucG9zKSwgMSwgdHlwZXMpO1xuICAgICAgICAgICAgaWYgKCF0eXBlcyAmJiAhY2FuICYmIGNhblNwbGl0KHRyLmRvYywgdHIubWFwcGluZy5tYXAoJGZyb20ucG9zKSwgMSwgZGVmbHQgPyBbeyB0eXBlOiBkZWZsdCB9XSA6IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVmbHQpXG4gICAgICAgICAgICAgICAgICAgIHR5cGVzID0gW3sgdHlwZTogZGVmbHQgfV07XG4gICAgICAgICAgICAgICAgY2FuID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW4pIHtcbiAgICAgICAgICAgICAgICB0ci5zcGxpdCh0ci5tYXBwaW5nLm1hcCgkZnJvbS5wb3MpLCAxLCB0eXBlcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFhdEVuZCAmJiAhJGZyb20ucGFyZW50T2Zmc2V0ICYmICRmcm9tLnBhcmVudC50eXBlICE9IGRlZmx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdCA9IHRyLm1hcHBpbmcubWFwKCRmcm9tLmJlZm9yZSgpKSwgJGZpcnN0ID0gdHIuZG9jLnJlc29sdmUoZmlyc3QpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmbHQgJiYgJGZyb20ubm9kZSgtMSkuY2FuUmVwbGFjZVdpdGgoJGZpcnN0LmluZGV4KCksICRmaXJzdC5pbmRleCgpICsgMSwgZGVmbHQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHIuc2V0Tm9kZU1hcmt1cCh0ci5tYXBwaW5nLm1hcCgkZnJvbS5iZWZvcmUoKSksIGRlZmx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5TcGxpdCB0aGUgcGFyZW50IGJsb2NrIG9mIHRoZSBzZWxlY3Rpb24uIElmIHRoZSBzZWxlY3Rpb24gaXMgYSB0ZXh0XG5zZWxlY3Rpb24sIGFsc28gZGVsZXRlIGl0cyBjb250ZW50LlxuKi9cbmNvbnN0IHNwbGl0QmxvY2sgPSBzcGxpdEJsb2NrQXMoKTtcbi8qKlxuQWN0cyBsaWtlIFtgc3BsaXRCbG9ja2BdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNjb21tYW5kcy5zcGxpdEJsb2NrKSwgYnV0IHdpdGhvdXRcbnJlc2V0dGluZyB0aGUgc2V0IG9mIGFjdGl2ZSBtYXJrcyBhdCB0aGUgY3Vyc29yLlxuKi9cbmNvbnN0IHNwbGl0QmxvY2tLZWVwTWFya3MgPSAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgcmV0dXJuIHNwbGl0QmxvY2soc3RhdGUsIGRpc3BhdGNoICYmICh0ciA9PiB7XG4gICAgICAgIGxldCBtYXJrcyA9IHN0YXRlLnN0b3JlZE1hcmtzIHx8IChzdGF0ZS5zZWxlY3Rpb24uJHRvLnBhcmVudE9mZnNldCAmJiBzdGF0ZS5zZWxlY3Rpb24uJGZyb20ubWFya3MoKSk7XG4gICAgICAgIGlmIChtYXJrcylcbiAgICAgICAgICAgIHRyLmVuc3VyZU1hcmtzKG1hcmtzKTtcbiAgICAgICAgZGlzcGF0Y2godHIpO1xuICAgIH0pKTtcbn07XG4vKipcbk1vdmUgdGhlIHNlbGVjdGlvbiB0byB0aGUgbm9kZSB3cmFwcGluZyB0aGUgY3VycmVudCBzZWxlY3Rpb24sIGlmXG5hbnkuIChXaWxsIG5vdCBzZWxlY3QgdGhlIGRvY3VtZW50IG5vZGUuKVxuKi9cbmNvbnN0IHNlbGVjdFBhcmVudE5vZGUgPSAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgbGV0IHsgJGZyb20sIHRvIH0gPSBzdGF0ZS5zZWxlY3Rpb24sIHBvcztcbiAgICBsZXQgc2FtZSA9ICRmcm9tLnNoYXJlZERlcHRoKHRvKTtcbiAgICBpZiAoc2FtZSA9PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcG9zID0gJGZyb20uYmVmb3JlKHNhbWUpO1xuICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuc2V0U2VsZWN0aW9uKE5vZGVTZWxlY3Rpb24uY3JlYXRlKHN0YXRlLmRvYywgcG9zKSkpO1xuICAgIHJldHVybiB0cnVlO1xufTtcbi8qKlxuU2VsZWN0IHRoZSB3aG9sZSBkb2N1bWVudC5cbiovXG5jb25zdCBzZWxlY3RBbGwgPSAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBkaXNwYXRjaChzdGF0ZS50ci5zZXRTZWxlY3Rpb24obmV3IEFsbFNlbGVjdGlvbihzdGF0ZS5kb2MpKSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuZnVuY3Rpb24gam9pbk1heWJlQ2xlYXIoc3RhdGUsICRwb3MsIGRpc3BhdGNoKSB7XG4gICAgbGV0IGJlZm9yZSA9ICRwb3Mubm9kZUJlZm9yZSwgYWZ0ZXIgPSAkcG9zLm5vZGVBZnRlciwgaW5kZXggPSAkcG9zLmluZGV4KCk7XG4gICAgaWYgKCFiZWZvcmUgfHwgIWFmdGVyIHx8ICFiZWZvcmUudHlwZS5jb21wYXRpYmxlQ29udGVudChhZnRlci50eXBlKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghYmVmb3JlLmNvbnRlbnQuc2l6ZSAmJiAkcG9zLnBhcmVudC5jYW5SZXBsYWNlKGluZGV4IC0gMSwgaW5kZXgpKSB7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyLmRlbGV0ZSgkcG9zLnBvcyAtIGJlZm9yZS5ub2RlU2l6ZSwgJHBvcy5wb3MpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCEkcG9zLnBhcmVudC5jYW5SZXBsYWNlKGluZGV4LCBpbmRleCArIDEpIHx8ICEoYWZ0ZXIuaXNUZXh0YmxvY2sgfHwgY2FuSm9pbihzdGF0ZS5kb2MsICRwb3MucG9zKSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZGlzcGF0Y2gpXG4gICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyXG4gICAgICAgICAgICAuY2xlYXJJbmNvbXBhdGlibGUoJHBvcy5wb3MsIGJlZm9yZS50eXBlLCBiZWZvcmUuY29udGVudE1hdGNoQXQoYmVmb3JlLmNoaWxkQ291bnQpKVxuICAgICAgICAgICAgLmpvaW4oJHBvcy5wb3MpXG4gICAgICAgICAgICAuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBkZWxldGVCYXJyaWVyKHN0YXRlLCAkY3V0LCBkaXNwYXRjaCkge1xuICAgIGxldCBiZWZvcmUgPSAkY3V0Lm5vZGVCZWZvcmUsIGFmdGVyID0gJGN1dC5ub2RlQWZ0ZXIsIGNvbm4sIG1hdGNoO1xuICAgIGlmIChiZWZvcmUudHlwZS5zcGVjLmlzb2xhdGluZyB8fCBhZnRlci50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGpvaW5NYXliZUNsZWFyKHN0YXRlLCAkY3V0LCBkaXNwYXRjaCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIGxldCBjYW5EZWxBZnRlciA9ICRjdXQucGFyZW50LmNhblJlcGxhY2UoJGN1dC5pbmRleCgpLCAkY3V0LmluZGV4KCkgKyAxKTtcbiAgICBpZiAoY2FuRGVsQWZ0ZXIgJiZcbiAgICAgICAgKGNvbm4gPSAobWF0Y2ggPSBiZWZvcmUuY29udGVudE1hdGNoQXQoYmVmb3JlLmNoaWxkQ291bnQpKS5maW5kV3JhcHBpbmcoYWZ0ZXIudHlwZSkpICYmXG4gICAgICAgIG1hdGNoLm1hdGNoVHlwZShjb25uWzBdIHx8IGFmdGVyLnR5cGUpLnZhbGlkRW5kKSB7XG4gICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgbGV0IGVuZCA9ICRjdXQucG9zICsgYWZ0ZXIubm9kZVNpemUsIHdyYXAgPSBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjb25uLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgICAgIHdyYXAgPSBGcmFnbWVudC5mcm9tKGNvbm5baV0uY3JlYXRlKG51bGwsIHdyYXApKTtcbiAgICAgICAgICAgIHdyYXAgPSBGcmFnbWVudC5mcm9tKGJlZm9yZS5jb3B5KHdyYXApKTtcbiAgICAgICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLnN0ZXAobmV3IFJlcGxhY2VBcm91bmRTdGVwKCRjdXQucG9zIC0gMSwgZW5kLCAkY3V0LnBvcywgZW5kLCBuZXcgU2xpY2Uod3JhcCwgMSwgMCksIGNvbm4ubGVuZ3RoLCB0cnVlKSk7XG4gICAgICAgICAgICBsZXQgam9pbkF0ID0gZW5kICsgMiAqIGNvbm4ubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGNhbkpvaW4odHIuZG9jLCBqb2luQXQpKVxuICAgICAgICAgICAgICAgIHRyLmpvaW4oam9pbkF0KTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHRyLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBsZXQgc2VsQWZ0ZXIgPSBTZWxlY3Rpb24uZmluZEZyb20oJGN1dCwgMSk7XG4gICAgbGV0IHJhbmdlID0gc2VsQWZ0ZXIgJiYgc2VsQWZ0ZXIuJGZyb20uYmxvY2tSYW5nZShzZWxBZnRlci4kdG8pLCB0YXJnZXQgPSByYW5nZSAmJiBsaWZ0VGFyZ2V0KHJhbmdlKTtcbiAgICBpZiAodGFyZ2V0ICE9IG51bGwgJiYgdGFyZ2V0ID49ICRjdXQuZGVwdGgpIHtcbiAgICAgICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIubGlmdChyYW5nZSwgdGFyZ2V0KS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjYW5EZWxBZnRlciAmJiB0ZXh0YmxvY2tBdChhZnRlciwgXCJzdGFydFwiLCB0cnVlKSAmJiB0ZXh0YmxvY2tBdChiZWZvcmUsIFwiZW5kXCIpKSB7XG4gICAgICAgIGxldCBhdCA9IGJlZm9yZSwgd3JhcCA9IFtdO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICB3cmFwLnB1c2goYXQpO1xuICAgICAgICAgICAgaWYgKGF0LmlzVGV4dGJsb2NrKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgYXQgPSBhdC5sYXN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFmdGVyVGV4dCA9IGFmdGVyLCBhZnRlckRlcHRoID0gMTtcbiAgICAgICAgZm9yICg7ICFhZnRlclRleHQuaXNUZXh0YmxvY2s7IGFmdGVyVGV4dCA9IGFmdGVyVGV4dC5maXJzdENoaWxkKVxuICAgICAgICAgICAgYWZ0ZXJEZXB0aCsrO1xuICAgICAgICBpZiAoYXQuY2FuUmVwbGFjZShhdC5jaGlsZENvdW50LCBhdC5jaGlsZENvdW50LCBhZnRlclRleHQuY29udGVudCkpIHtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gd3JhcC5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gRnJhZ21lbnQuZnJvbSh3cmFwW2ldLmNvcHkoZW5kKSk7XG4gICAgICAgICAgICAgICAgbGV0IHRyID0gc3RhdGUudHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoJGN1dC5wb3MgLSB3cmFwLmxlbmd0aCwgJGN1dC5wb3MgKyBhZnRlci5ub2RlU2l6ZSwgJGN1dC5wb3MgKyBhZnRlckRlcHRoLCAkY3V0LnBvcyArIGFmdGVyLm5vZGVTaXplIC0gYWZ0ZXJEZXB0aCwgbmV3IFNsaWNlKGVuZCwgd3JhcC5sZW5ndGgsIDApLCAwLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBzZWxlY3RUZXh0YmxvY2tTaWRlKHNpZGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBkaXNwYXRjaCkge1xuICAgICAgICBsZXQgc2VsID0gc3RhdGUuc2VsZWN0aW9uLCAkcG9zID0gc2lkZSA8IDAgPyBzZWwuJGZyb20gOiBzZWwuJHRvO1xuICAgICAgICBsZXQgZGVwdGggPSAkcG9zLmRlcHRoO1xuICAgICAgICB3aGlsZSAoJHBvcy5ub2RlKGRlcHRoKS5pc0lubGluZSkge1xuICAgICAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJHBvcy5ub2RlKGRlcHRoKS5pc1RleHRibG9jaylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuc2V0U2VsZWN0aW9uKFRleHRTZWxlY3Rpb24uY3JlYXRlKHN0YXRlLmRvYywgc2lkZSA8IDAgPyAkcG9zLnN0YXJ0KGRlcHRoKSA6ICRwb3MuZW5kKGRlcHRoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgc3RhcnQgb2YgY3VycmVudCB0ZXh0IGJsb2NrLlxuKi9cbmNvbnN0IHNlbGVjdFRleHRibG9ja1N0YXJ0ID0gc2VsZWN0VGV4dGJsb2NrU2lkZSgtMSk7XG4vKipcbk1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIGVuZCBvZiBjdXJyZW50IHRleHQgYmxvY2suXG4qL1xuY29uc3Qgc2VsZWN0VGV4dGJsb2NrRW5kID0gc2VsZWN0VGV4dGJsb2NrU2lkZSgxKTtcbi8vIFBhcmFtZXRlcml6ZWQgY29tbWFuZHNcbi8qKlxuV3JhcCB0aGUgc2VsZWN0aW9uIGluIGEgbm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZSB3aXRoIHRoZSBnaXZlblxuYXR0cmlidXRlcy5cbiovXG5mdW5jdGlvbiB3cmFwSW4obm9kZVR5cGUsIGF0dHJzID0gbnVsbCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgbGV0IHJhbmdlID0gJGZyb20uYmxvY2tSYW5nZSgkdG8pLCB3cmFwcGluZyA9IHJhbmdlICYmIGZpbmRXcmFwcGluZyhyYW5nZSwgbm9kZVR5cGUsIGF0dHJzKTtcbiAgICAgICAgaWYgKCF3cmFwcGluZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIud3JhcChyYW5nZSwgd3JhcHBpbmcpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5SZXR1cm5zIGEgY29tbWFuZCB0aGF0IHRyaWVzIHRvIHNldCB0aGUgc2VsZWN0ZWQgdGV4dGJsb2NrcyB0byB0aGVcbmdpdmVuIG5vZGUgdHlwZSB3aXRoIHRoZSBnaXZlbiBhdHRyaWJ1dGVzLlxuKi9cbmZ1bmN0aW9uIHNldEJsb2NrVHlwZShub2RlVHlwZSwgYXR0cnMgPSBudWxsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgZGlzcGF0Y2gpIHtcbiAgICAgICAgbGV0IGFwcGxpY2FibGUgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aCAmJiAhYXBwbGljYWJsZTsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyAkZnJvbTogeyBwb3M6IGZyb20gfSwgJHRvOiB7IHBvczogdG8gfSB9ID0gc3RhdGUuc2VsZWN0aW9uLnJhbmdlc1tpXTtcbiAgICAgICAgICAgIHN0YXRlLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwbGljYWJsZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZS5pc1RleHRibG9jayB8fCBub2RlLmhhc01hcmt1cChub2RlVHlwZSwgYXR0cnMpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUudHlwZSA9PSBub2RlVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCAkcG9zID0gc3RhdGUuZG9jLnJlc29sdmUocG9zKSwgaW5kZXggPSAkcG9zLmluZGV4KCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxpY2FibGUgPSAkcG9zLnBhcmVudC5jYW5SZXBsYWNlV2l0aChpbmRleCwgaW5kZXggKyAxLCBub2RlVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhcHBsaWNhYmxlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgICAgIGxldCB0ciA9IHN0YXRlLnRyO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS5zZWxlY3Rpb24ucmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgJGZyb206IHsgcG9zOiBmcm9tIH0sICR0bzogeyBwb3M6IHRvIH0gfSA9IHN0YXRlLnNlbGVjdGlvbi5yYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgdHIuc2V0QmxvY2tUeXBlKGZyb20sIHRvLCBub2RlVHlwZSwgYXR0cnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIG1hcmtBcHBsaWVzKGRvYywgcmFuZ2VzLCB0eXBlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHsgJGZyb20sICR0byB9ID0gcmFuZ2VzW2ldO1xuICAgICAgICBsZXQgY2FuID0gJGZyb20uZGVwdGggPT0gMCA/IGRvYy5pbmxpbmVDb250ZW50ICYmIGRvYy50eXBlLmFsbG93c01hcmtUeXBlKHR5cGUpIDogZmFsc2U7XG4gICAgICAgIGRvYy5ub2Rlc0JldHdlZW4oJGZyb20ucG9zLCAkdG8ucG9zLCBub2RlID0+IHtcbiAgICAgICAgICAgIGlmIChjYW4pXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FuID0gbm9kZS5pbmxpbmVDb250ZW50ICYmIG5vZGUudHlwZS5hbGxvd3NNYXJrVHlwZSh0eXBlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjYW4pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG5DcmVhdGUgYSBjb21tYW5kIGZ1bmN0aW9uIHRoYXQgdG9nZ2xlcyB0aGUgZ2l2ZW4gbWFyayB3aXRoIHRoZVxuZ2l2ZW4gYXR0cmlidXRlcy4gV2lsbCByZXR1cm4gYGZhbHNlYCB3aGVuIHRoZSBjdXJyZW50IHNlbGVjdGlvblxuZG9lc24ndCBzdXBwb3J0IHRoYXQgbWFyay4gVGhpcyB3aWxsIHJlbW92ZSB0aGUgbWFyayBpZiBhbnkgbWFya3Ncbm9mIHRoYXQgdHlwZSBleGlzdCBpbiB0aGUgc2VsZWN0aW9uLCBvciBhZGQgaXQgb3RoZXJ3aXNlLiBJZiB0aGVcbnNlbGVjdGlvbiBpcyBlbXB0eSwgdGhpcyBhcHBsaWVzIHRvIHRoZSBbc3RvcmVkXG5tYXJrc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnN0b3JlZE1hcmtzKSBpbnN0ZWFkIG9mIGEgcmFuZ2Ugb2YgdGhlXG5kb2N1bWVudC5cbiovXG5mdW5jdGlvbiB0b2dnbGVNYXJrKG1hcmtUeXBlLCBhdHRycyA9IG51bGwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBkaXNwYXRjaCkge1xuICAgICAgICBsZXQgeyBlbXB0eSwgJGN1cnNvciwgcmFuZ2VzIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGlmICgoZW1wdHkgJiYgISRjdXJzb3IpIHx8ICFtYXJrQXBwbGllcyhzdGF0ZS5kb2MsIHJhbmdlcywgbWFya1R5cGUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgICAgIGlmICgkY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hcmtUeXBlLmlzSW5TZXQoc3RhdGUuc3RvcmVkTWFya3MgfHwgJGN1cnNvci5tYXJrcygpKSlcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIucmVtb3ZlU3RvcmVkTWFyayhtYXJrVHlwZSkpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuYWRkU3RvcmVkTWFyayhtYXJrVHlwZS5jcmVhdGUoYXR0cnMpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgaGFzID0gZmFsc2UsIHRyID0gc3RhdGUudHI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7ICFoYXMgJiYgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyAkZnJvbSwgJHRvIH0gPSByYW5nZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGhhcyA9IHN0YXRlLmRvYy5yYW5nZUhhc01hcmsoJGZyb20ucG9zLCAkdG8ucG9zLCBtYXJrVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHJhbmdlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHIucmVtb3ZlTWFyaygkZnJvbS5wb3MsICR0by5wb3MsIG1hcmtUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gJGZyb20ucG9zLCB0byA9ICR0by5wb3MsIHN0YXJ0ID0gJGZyb20ubm9kZUFmdGVyLCBlbmQgPSAkdG8ubm9kZUJlZm9yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGFjZVN0YXJ0ID0gc3RhcnQgJiYgc3RhcnQuaXNUZXh0ID8gL15cXHMqLy5leGVjKHN0YXJ0LnRleHQpWzBdLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2VFbmQgPSBlbmQgJiYgZW5kLmlzVGV4dCA/IC9cXHMqJC8uZXhlYyhlbmQudGV4dClbMF0ubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcm9tICsgc3BhY2VTdGFydCA8IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSArPSBzcGFjZVN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIC09IHNwYWNlRW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHIuYWRkTWFyayhmcm9tLCB0bywgbWFya1R5cGUuY3JlYXRlKGF0dHJzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbmZ1bmN0aW9uIHdyYXBEaXNwYXRjaEZvckpvaW4oZGlzcGF0Y2gsIGlzSm9pbmFibGUpIHtcbiAgICByZXR1cm4gKHRyKSA9PiB7XG4gICAgICAgIGlmICghdHIuaXNHZW5lcmljKVxuICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKHRyKTtcbiAgICAgICAgbGV0IHJhbmdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyLm1hcHBpbmcubWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG1hcCA9IHRyLm1hcHBpbmcubWFwc1tpXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmFuZ2VzLmxlbmd0aDsgaisrKVxuICAgICAgICAgICAgICAgIHJhbmdlc1tqXSA9IG1hcC5tYXAocmFuZ2VzW2pdKTtcbiAgICAgICAgICAgIG1hcC5mb3JFYWNoKChfcywgX2UsIGZyb20sIHRvKSA9PiByYW5nZXMucHVzaChmcm9tLCB0bykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggam9pbmFibGUgcG9pbnRzIGV4aXN0IGluc2lkZSB0aG9zZSByYW5nZXMsXG4gICAgICAgIC8vIGJ5IGNoZWNraW5nIGFsbCBub2RlIGJvdW5kYXJpZXMgaW4gdGhlaXIgcGFyZW50IG5vZGVzLlxuICAgICAgICBsZXQgam9pbmFibGUgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGxldCBmcm9tID0gcmFuZ2VzW2ldLCB0byA9IHJhbmdlc1tpICsgMV07XG4gICAgICAgICAgICBsZXQgJGZyb20gPSB0ci5kb2MucmVzb2x2ZShmcm9tKSwgZGVwdGggPSAkZnJvbS5zaGFyZWREZXB0aCh0byksIHBhcmVudCA9ICRmcm9tLm5vZGUoZGVwdGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAkZnJvbS5pbmRleEFmdGVyKGRlcHRoKSwgcG9zID0gJGZyb20uYWZ0ZXIoZGVwdGggKyAxKTsgcG9zIDw9IHRvOyArK2luZGV4KSB7XG4gICAgICAgICAgICAgICAgbGV0IGFmdGVyID0gcGFyZW50Lm1heWJlQ2hpbGQoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmICghYWZ0ZXIpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAmJiBqb2luYWJsZS5pbmRleE9mKHBvcykgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJlZm9yZSA9IHBhcmVudC5jaGlsZChpbmRleCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmVmb3JlLnR5cGUgPT0gYWZ0ZXIudHlwZSAmJiBpc0pvaW5hYmxlKGJlZm9yZSwgYWZ0ZXIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgam9pbmFibGUucHVzaChwb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwb3MgKz0gYWZ0ZXIubm9kZVNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSm9pbiB0aGUgam9pbmFibGUgcG9pbnRzXG4gICAgICAgIGpvaW5hYmxlLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IGpvaW5hYmxlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAoY2FuSm9pbih0ci5kb2MsIGpvaW5hYmxlW2ldKSlcbiAgICAgICAgICAgICAgICB0ci5qb2luKGpvaW5hYmxlW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNwYXRjaCh0cik7XG4gICAgfTtcbn1cbi8qKlxuV3JhcCBhIGNvbW1hbmQgc28gdGhhdCwgd2hlbiBpdCBwcm9kdWNlcyBhIHRyYW5zZm9ybSB0aGF0IGNhdXNlc1xudHdvIGpvaW5hYmxlIG5vZGVzIHRvIGVuZCB1cCBuZXh0IHRvIGVhY2ggb3RoZXIsIHRob3NlIGFyZSBqb2luZWQuXG5Ob2RlcyBhcmUgY29uc2lkZXJlZCBqb2luYWJsZSB3aGVuIHRoZXkgYXJlIG9mIHRoZSBzYW1lIHR5cGUgYW5kXG53aGVuIHRoZSBgaXNKb2luYWJsZWAgcHJlZGljYXRlIHJldHVybnMgdHJ1ZSBmb3IgdGhlbSBvciwgaWYgYW5cbmFycmF5IG9mIHN0cmluZ3Mgd2FzIHBhc3NlZCwgaWYgdGhlaXIgbm9kZSB0eXBlIG5hbWUgaXMgaW4gdGhhdFxuYXJyYXkuXG4qL1xuZnVuY3Rpb24gYXV0b0pvaW4oY29tbWFuZCwgaXNKb2luYWJsZSkge1xuICAgIGxldCBjYW5Kb2luID0gQXJyYXkuaXNBcnJheShpc0pvaW5hYmxlKSA/IChub2RlKSA9PiBpc0pvaW5hYmxlLmluZGV4T2Yobm9kZS50eXBlLm5hbWUpID4gLTFcbiAgICAgICAgOiBpc0pvaW5hYmxlO1xuICAgIHJldHVybiAoc3RhdGUsIGRpc3BhdGNoLCB2aWV3KSA9PiBjb21tYW5kKHN0YXRlLCBkaXNwYXRjaCAmJiB3cmFwRGlzcGF0Y2hGb3JKb2luKGRpc3BhdGNoLCBjYW5Kb2luKSwgdmlldyk7XG59XG4vKipcbkNvbWJpbmUgYSBudW1iZXIgb2YgY29tbWFuZCBmdW5jdGlvbnMgaW50byBhIHNpbmdsZSBmdW5jdGlvbiAod2hpY2hcbmNhbGxzIHRoZW0gb25lIGJ5IG9uZSB1bnRpbCBvbmUgcmV0dXJucyB0cnVlKS5cbiovXG5mdW5jdGlvbiBjaGFpbkNvbW1hbmRzKC4uLmNvbW1hbmRzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgZGlzcGF0Y2gsIHZpZXcpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21tYW5kcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChjb21tYW5kc1tpXShzdGF0ZSwgZGlzcGF0Y2gsIHZpZXcpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbn1cbmxldCBiYWNrc3BhY2UgPSBjaGFpbkNvbW1hbmRzKGRlbGV0ZVNlbGVjdGlvbiwgam9pbkJhY2t3YXJkLCBzZWxlY3ROb2RlQmFja3dhcmQpO1xubGV0IGRlbCA9IGNoYWluQ29tbWFuZHMoZGVsZXRlU2VsZWN0aW9uLCBqb2luRm9yd2FyZCwgc2VsZWN0Tm9kZUZvcndhcmQpO1xuLyoqXG5BIGJhc2ljIGtleW1hcCBjb250YWluaW5nIGJpbmRpbmdzIG5vdCBzcGVjaWZpYyB0byBhbnkgc2NoZW1hLlxuQmluZHMgdGhlIGZvbGxvd2luZyBrZXlzICh3aGVuIG11bHRpcGxlIGNvbW1hbmRzIGFyZSBsaXN0ZWQsIHRoZXlcbmFyZSBjaGFpbmVkIHdpdGggW2BjaGFpbkNvbW1hbmRzYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1hbmRzLmNoYWluQ29tbWFuZHMpKTpcblxuKiAqKkVudGVyKiogdG8gYG5ld2xpbmVJbkNvZGVgLCBgY3JlYXRlUGFyYWdyYXBoTmVhcmAsIGBsaWZ0RW1wdHlCbG9ja2AsIGBzcGxpdEJsb2NrYFxuKiAqKk1vZC1FbnRlcioqIHRvIGBleGl0Q29kZWBcbiogKipCYWNrc3BhY2UqKiBhbmQgKipNb2QtQmFja3NwYWNlKiogdG8gYGRlbGV0ZVNlbGVjdGlvbmAsIGBqb2luQmFja3dhcmRgLCBgc2VsZWN0Tm9kZUJhY2t3YXJkYFxuKiAqKkRlbGV0ZSoqIGFuZCAqKk1vZC1EZWxldGUqKiB0byBgZGVsZXRlU2VsZWN0aW9uYCwgYGpvaW5Gb3J3YXJkYCwgYHNlbGVjdE5vZGVGb3J3YXJkYFxuKiAqKk1vZC1EZWxldGUqKiB0byBgZGVsZXRlU2VsZWN0aW9uYCwgYGpvaW5Gb3J3YXJkYCwgYHNlbGVjdE5vZGVGb3J3YXJkYFxuKiAqKk1vZC1hKiogdG8gYHNlbGVjdEFsbGBcbiovXG5jb25zdCBwY0Jhc2VLZXltYXAgPSB7XG4gICAgXCJFbnRlclwiOiBjaGFpbkNvbW1hbmRzKG5ld2xpbmVJbkNvZGUsIGNyZWF0ZVBhcmFncmFwaE5lYXIsIGxpZnRFbXB0eUJsb2NrLCBzcGxpdEJsb2NrKSxcbiAgICBcIk1vZC1FbnRlclwiOiBleGl0Q29kZSxcbiAgICBcIkJhY2tzcGFjZVwiOiBiYWNrc3BhY2UsXG4gICAgXCJNb2QtQmFja3NwYWNlXCI6IGJhY2tzcGFjZSxcbiAgICBcIlNoaWZ0LUJhY2tzcGFjZVwiOiBiYWNrc3BhY2UsXG4gICAgXCJEZWxldGVcIjogZGVsLFxuICAgIFwiTW9kLURlbGV0ZVwiOiBkZWwsXG4gICAgXCJNb2QtYVwiOiBzZWxlY3RBbGxcbn07XG4vKipcbkEgY29weSBvZiBgcGNCYXNlS2V5bWFwYCB0aGF0IGFsc28gYmluZHMgKipDdHJsLWgqKiBsaWtlIEJhY2tzcGFjZSxcbioqQ3RybC1kKiogbGlrZSBEZWxldGUsICoqQWx0LUJhY2tzcGFjZSoqIGxpa2UgQ3RybC1CYWNrc3BhY2UsIGFuZFxuKipDdHJsLUFsdC1CYWNrc3BhY2UqKiwgKipBbHQtRGVsZXRlKiosIGFuZCAqKkFsdC1kKiogbGlrZVxuQ3RybC1EZWxldGUuXG4qL1xuY29uc3QgbWFjQmFzZUtleW1hcCA9IHtcbiAgICBcIkN0cmwtaFwiOiBwY0Jhc2VLZXltYXBbXCJCYWNrc3BhY2VcIl0sXG4gICAgXCJBbHQtQmFja3NwYWNlXCI6IHBjQmFzZUtleW1hcFtcIk1vZC1CYWNrc3BhY2VcIl0sXG4gICAgXCJDdHJsLWRcIjogcGNCYXNlS2V5bWFwW1wiRGVsZXRlXCJdLFxuICAgIFwiQ3RybC1BbHQtQmFja3NwYWNlXCI6IHBjQmFzZUtleW1hcFtcIk1vZC1EZWxldGVcIl0sXG4gICAgXCJBbHQtRGVsZXRlXCI6IHBjQmFzZUtleW1hcFtcIk1vZC1EZWxldGVcIl0sXG4gICAgXCJBbHQtZFwiOiBwY0Jhc2VLZXltYXBbXCJNb2QtRGVsZXRlXCJdLFxuICAgIFwiQ3RybC1hXCI6IHNlbGVjdFRleHRibG9ja1N0YXJ0LFxuICAgIFwiQ3RybC1lXCI6IHNlbGVjdFRleHRibG9ja0VuZFxufTtcbmZvciAobGV0IGtleSBpbiBwY0Jhc2VLZXltYXApXG4gICAgbWFjQmFzZUtleW1hcFtrZXldID0gcGNCYXNlS2V5bWFwW2tleV07XG5jb25zdCBtYWMgPSB0eXBlb2YgbmF2aWdhdG9yICE9IFwidW5kZWZpbmVkXCIgPyAvTWFjfGlQKGhvbmV8W29hXWQpLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSlcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgOiB0eXBlb2Ygb3MgIT0gXCJ1bmRlZmluZWRcIiAmJiBvcy5wbGF0Zm9ybSA/IG9zLnBsYXRmb3JtKCkgPT0gXCJkYXJ3aW5cIiA6IGZhbHNlO1xuLyoqXG5EZXBlbmRpbmcgb24gdGhlIGRldGVjdGVkIHBsYXRmb3JtLCB0aGlzIHdpbGwgaG9sZFxuW2BwY0Jhc2VrZXltYXBgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jY29tbWFuZHMucGNCYXNlS2V5bWFwKSBvclxuW2BtYWNCYXNlS2V5bWFwYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1hbmRzLm1hY0Jhc2VLZXltYXApLlxuKi9cbmNvbnN0IGJhc2VLZXltYXAgPSBtYWMgPyBtYWNCYXNlS2V5bWFwIDogcGNCYXNlS2V5bWFwO1xuXG5leHBvcnQgeyBhdXRvSm9pbiwgYmFzZUtleW1hcCwgY2hhaW5Db21tYW5kcywgY3JlYXRlUGFyYWdyYXBoTmVhciwgZGVsZXRlU2VsZWN0aW9uLCBleGl0Q29kZSwgam9pbkJhY2t3YXJkLCBqb2luRG93biwgam9pbkZvcndhcmQsIGpvaW5UZXh0YmxvY2tCYWNrd2FyZCwgam9pblRleHRibG9ja0ZvcndhcmQsIGpvaW5VcCwgbGlmdCwgbGlmdEVtcHR5QmxvY2ssIG1hY0Jhc2VLZXltYXAsIG5ld2xpbmVJbkNvZGUsIHBjQmFzZUtleW1hcCwgc2VsZWN0QWxsLCBzZWxlY3ROb2RlQmFja3dhcmQsIHNlbGVjdE5vZGVGb3J3YXJkLCBzZWxlY3RQYXJlbnROb2RlLCBzZWxlY3RUZXh0YmxvY2tFbmQsIHNlbGVjdFRleHRibG9ja1N0YXJ0LCBzZXRCbG9ja1R5cGUsIHNwbGl0QmxvY2ssIHNwbGl0QmxvY2tBcywgc3BsaXRCbG9ja0tlZXBNYXJrcywgdG9nZ2xlTWFyaywgd3JhcEluIH07XG4iLCJpbXBvcnQgeyBmaW5kV3JhcHBpbmcsIFJlcGxhY2VBcm91bmRTdGVwLCBjYW5TcGxpdCwgbGlmdFRhcmdldCwgY2FuSm9pbiB9IGZyb20gJ3Byb3NlbWlycm9yLXRyYW5zZm9ybSc7XG5pbXBvcnQgeyBOb2RlUmFuZ2UsIEZyYWdtZW50LCBTbGljZSB9IGZyb20gJ3Byb3NlbWlycm9yLW1vZGVsJztcbmltcG9ydCB7IFNlbGVjdGlvbiB9IGZyb20gJ3Byb3NlbWlycm9yLXN0YXRlJztcblxuY29uc3Qgb2xET00gPSBbXCJvbFwiLCAwXSwgdWxET00gPSBbXCJ1bFwiLCAwXSwgbGlET00gPSBbXCJsaVwiLCAwXTtcbi8qKlxuQW4gb3JkZXJlZCBsaXN0IFtub2RlIHNwZWNdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlYykuIEhhcyBhIHNpbmdsZVxuYXR0cmlidXRlLCBgb3JkZXJgLCB3aGljaCBkZXRlcm1pbmVzIHRoZSBudW1iZXIgYXQgd2hpY2ggdGhlIGxpc3RcbnN0YXJ0cyBjb3VudGluZywgYW5kIGRlZmF1bHRzIHRvIDEuIFJlcHJlc2VudGVkIGFzIGFuIGA8b2w+YFxuZWxlbWVudC5cbiovXG5jb25zdCBvcmRlcmVkTGlzdCA9IHtcbiAgICBhdHRyczogeyBvcmRlcjogeyBkZWZhdWx0OiAxIH0gfSxcbiAgICBwYXJzZURPTTogW3sgdGFnOiBcIm9sXCIsIGdldEF0dHJzKGRvbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG9yZGVyOiBkb20uaGFzQXR0cmlidXRlKFwic3RhcnRcIikgPyArZG9tLmdldEF0dHJpYnV0ZShcInN0YXJ0XCIpIDogMSB9O1xuICAgICAgICAgICAgfSB9XSxcbiAgICB0b0RPTShub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLmF0dHJzLm9yZGVyID09IDEgPyBvbERPTSA6IFtcIm9sXCIsIHsgc3RhcnQ6IG5vZGUuYXR0cnMub3JkZXIgfSwgMF07XG4gICAgfVxufTtcbi8qKlxuQSBidWxsZXQgbGlzdCBub2RlIHNwZWMsIHJlcHJlc2VudGVkIGluIHRoZSBET00gYXMgYDx1bD5gLlxuKi9cbmNvbnN0IGJ1bGxldExpc3QgPSB7XG4gICAgcGFyc2VET006IFt7IHRhZzogXCJ1bFwiIH1dLFxuICAgIHRvRE9NKCkgeyByZXR1cm4gdWxET007IH1cbn07XG4vKipcbkEgbGlzdCBpdGVtIChgPGxpPmApIHNwZWMuXG4qL1xuY29uc3QgbGlzdEl0ZW0gPSB7XG4gICAgcGFyc2VET006IFt7IHRhZzogXCJsaVwiIH1dLFxuICAgIHRvRE9NKCkgeyByZXR1cm4gbGlET007IH0sXG4gICAgZGVmaW5pbmc6IHRydWVcbn07XG5mdW5jdGlvbiBhZGQob2JqLCBwcm9wcykge1xuICAgIGxldCBjb3B5ID0ge307XG4gICAgZm9yIChsZXQgcHJvcCBpbiBvYmopXG4gICAgICAgIGNvcHlbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgZm9yIChsZXQgcHJvcCBpbiBwcm9wcylcbiAgICAgICAgY29weVtwcm9wXSA9IHByb3BzW3Byb3BdO1xuICAgIHJldHVybiBjb3B5O1xufVxuLyoqXG5Db252ZW5pZW5jZSBmdW5jdGlvbiBmb3IgYWRkaW5nIGxpc3QtcmVsYXRlZCBub2RlIHR5cGVzIHRvIGEgbWFwXG5zcGVjaWZ5aW5nIHRoZSBub2RlcyBmb3IgYSBzY2hlbWEuIEFkZHNcbltgb3JkZXJlZExpc3RgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc2NoZW1hLWxpc3Qub3JkZXJlZExpc3QpIGFzIGBcIm9yZGVyZWRfbGlzdFwiYCxcbltgYnVsbGV0TGlzdGBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzY2hlbWEtbGlzdC5idWxsZXRMaXN0KSBhcyBgXCJidWxsZXRfbGlzdFwiYCwgYW5kXG5bYGxpc3RJdGVtYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3NjaGVtYS1saXN0Lmxpc3RJdGVtKSBhcyBgXCJsaXN0X2l0ZW1cImAuXG5cbmBpdGVtQ29udGVudGAgZGV0ZXJtaW5lcyB0aGUgY29udGVudCBleHByZXNzaW9uIGZvciB0aGUgbGlzdCBpdGVtcy5cbklmIHlvdSB3YW50IHRoZSBjb21tYW5kcyBkZWZpbmVkIGluIHRoaXMgbW9kdWxlIHRvIGFwcGx5IHRvIHlvdXJcbmxpc3Qgc3RydWN0dXJlLCBpdCBzaG91bGQgaGF2ZSBhIHNoYXBlIGxpa2UgYFwicGFyYWdyYXBoIGJsb2NrKlwiYCBvclxuYFwicGFyYWdyYXBoIChvcmRlcmVkX2xpc3QgfCBidWxsZXRfbGlzdCkqXCJgLiBgbGlzdEdyb3VwYCBjYW4gYmVcbmdpdmVuIHRvIGFzc2lnbiBhIGdyb3VwIG5hbWUgdG8gdGhlIGxpc3Qgbm9kZSB0eXBlcywgZm9yIGV4YW1wbGVcbmBcImJsb2NrXCJgLlxuKi9cbmZ1bmN0aW9uIGFkZExpc3ROb2Rlcyhub2RlcywgaXRlbUNvbnRlbnQsIGxpc3RHcm91cCkge1xuICAgIHJldHVybiBub2Rlcy5hcHBlbmQoe1xuICAgICAgICBvcmRlcmVkX2xpc3Q6IGFkZChvcmRlcmVkTGlzdCwgeyBjb250ZW50OiBcImxpc3RfaXRlbStcIiwgZ3JvdXA6IGxpc3RHcm91cCB9KSxcbiAgICAgICAgYnVsbGV0X2xpc3Q6IGFkZChidWxsZXRMaXN0LCB7IGNvbnRlbnQ6IFwibGlzdF9pdGVtK1wiLCBncm91cDogbGlzdEdyb3VwIH0pLFxuICAgICAgICBsaXN0X2l0ZW06IGFkZChsaXN0SXRlbSwgeyBjb250ZW50OiBpdGVtQ29udGVudCB9KVxuICAgIH0pO1xufVxuLyoqXG5SZXR1cm5zIGEgY29tbWFuZCBmdW5jdGlvbiB0aGF0IHdyYXBzIHRoZSBzZWxlY3Rpb24gaW4gYSBsaXN0IHdpdGhcbnRoZSBnaXZlbiB0eXBlIGFuIGF0dHJpYnV0ZXMuIElmIGBkaXNwYXRjaGAgaXMgbnVsbCwgb25seSByZXR1cm4gYVxudmFsdWUgdG8gaW5kaWNhdGUgd2hldGhlciB0aGlzIGlzIHBvc3NpYmxlLCBidXQgZG9uJ3QgYWN0dWFsbHlcbnBlcmZvcm0gdGhlIGNoYW5nZS5cbiovXG5mdW5jdGlvbiB3cmFwSW5MaXN0KGxpc3RUeXBlLCBhdHRycyA9IG51bGwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBkaXNwYXRjaCkge1xuICAgICAgICBsZXQgeyAkZnJvbSwgJHRvIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGxldCByYW5nZSA9ICRmcm9tLmJsb2NrUmFuZ2UoJHRvKSwgZG9Kb2luID0gZmFsc2UsIG91dGVyUmFuZ2UgPSByYW5nZTtcbiAgICAgICAgaWYgKCFyYW5nZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgLy8gVGhpcyBpcyBhdCB0aGUgdG9wIG9mIGFuIGV4aXN0aW5nIGxpc3QgaXRlbVxuICAgICAgICBpZiAocmFuZ2UuZGVwdGggPj0gMiAmJiAkZnJvbS5ub2RlKHJhbmdlLmRlcHRoIC0gMSkudHlwZS5jb21wYXRpYmxlQ29udGVudChsaXN0VHlwZSkgJiYgcmFuZ2Uuc3RhcnRJbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBpZiB0aGlzIGlzIHRoZSB0b3Agb2YgdGhlIGxpc3RcbiAgICAgICAgICAgIGlmICgkZnJvbS5pbmRleChyYW5nZS5kZXB0aCAtIDEpID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0ICRpbnNlcnQgPSBzdGF0ZS5kb2MucmVzb2x2ZShyYW5nZS5zdGFydCAtIDIpO1xuICAgICAgICAgICAgb3V0ZXJSYW5nZSA9IG5ldyBOb2RlUmFuZ2UoJGluc2VydCwgJGluc2VydCwgcmFuZ2UuZGVwdGgpO1xuICAgICAgICAgICAgaWYgKHJhbmdlLmVuZEluZGV4IDwgcmFuZ2UucGFyZW50LmNoaWxkQ291bnQpXG4gICAgICAgICAgICAgICAgcmFuZ2UgPSBuZXcgTm9kZVJhbmdlKCRmcm9tLCBzdGF0ZS5kb2MucmVzb2x2ZSgkdG8uZW5kKHJhbmdlLmRlcHRoKSksIHJhbmdlLmRlcHRoKTtcbiAgICAgICAgICAgIGRvSm9pbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXAgPSBmaW5kV3JhcHBpbmcob3V0ZXJSYW5nZSwgbGlzdFR5cGUsIGF0dHJzLCByYW5nZSk7XG4gICAgICAgIGlmICghd3JhcClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICAgICAgZGlzcGF0Y2goZG9XcmFwSW5MaXN0KHN0YXRlLnRyLCByYW5nZSwgd3JhcCwgZG9Kb2luLCBsaXN0VHlwZSkuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5mdW5jdGlvbiBkb1dyYXBJbkxpc3QodHIsIHJhbmdlLCB3cmFwcGVycywgam9pbkJlZm9yZSwgbGlzdFR5cGUpIHtcbiAgICBsZXQgY29udGVudCA9IEZyYWdtZW50LmVtcHR5O1xuICAgIGZvciAobGV0IGkgPSB3cmFwcGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgY29udGVudCA9IEZyYWdtZW50LmZyb20od3JhcHBlcnNbaV0udHlwZS5jcmVhdGUod3JhcHBlcnNbaV0uYXR0cnMsIGNvbnRlbnQpKTtcbiAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChyYW5nZS5zdGFydCAtIChqb2luQmVmb3JlID8gMiA6IDApLCByYW5nZS5lbmQsIHJhbmdlLnN0YXJ0LCByYW5nZS5lbmQsIG5ldyBTbGljZShjb250ZW50LCAwLCAwKSwgd3JhcHBlcnMubGVuZ3RoLCB0cnVlKSk7XG4gICAgbGV0IGZvdW5kID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdyYXBwZXJzLmxlbmd0aDsgaSsrKVxuICAgICAgICBpZiAod3JhcHBlcnNbaV0udHlwZSA9PSBsaXN0VHlwZSlcbiAgICAgICAgICAgIGZvdW5kID0gaSArIDE7XG4gICAgbGV0IHNwbGl0RGVwdGggPSB3cmFwcGVycy5sZW5ndGggLSBmb3VuZDtcbiAgICBsZXQgc3BsaXRQb3MgPSByYW5nZS5zdGFydCArIHdyYXBwZXJzLmxlbmd0aCAtIChqb2luQmVmb3JlID8gMiA6IDApLCBwYXJlbnQgPSByYW5nZS5wYXJlbnQ7XG4gICAgZm9yIChsZXQgaSA9IHJhbmdlLnN0YXJ0SW5kZXgsIGUgPSByYW5nZS5lbmRJbmRleCwgZmlyc3QgPSB0cnVlOyBpIDwgZTsgaSsrLCBmaXJzdCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghZmlyc3QgJiYgY2FuU3BsaXQodHIuZG9jLCBzcGxpdFBvcywgc3BsaXREZXB0aCkpIHtcbiAgICAgICAgICAgIHRyLnNwbGl0KHNwbGl0UG9zLCBzcGxpdERlcHRoKTtcbiAgICAgICAgICAgIHNwbGl0UG9zICs9IDIgKiBzcGxpdERlcHRoO1xuICAgICAgICB9XG4gICAgICAgIHNwbGl0UG9zICs9IHBhcmVudC5jaGlsZChpKS5ub2RlU2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyO1xufVxuLyoqXG5CdWlsZCBhIGNvbW1hbmQgdGhhdCBzcGxpdHMgYSBub24tZW1wdHkgdGV4dGJsb2NrIGF0IHRoZSB0b3AgbGV2ZWxcbm9mIGEgbGlzdCBpdGVtIGJ5IGFsc28gc3BsaXR0aW5nIHRoYXQgbGlzdCBpdGVtLlxuKi9cbmZ1bmN0aW9uIHNwbGl0TGlzdEl0ZW0oaXRlbVR5cGUsIGl0ZW1BdHRycykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB7ICRmcm9tLCAkdG8sIG5vZGUgfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgaWYgKChub2RlICYmIG5vZGUuaXNCbG9jaykgfHwgJGZyb20uZGVwdGggPCAyIHx8ICEkZnJvbS5zYW1lUGFyZW50KCR0bykpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBncmFuZFBhcmVudCA9ICRmcm9tLm5vZGUoLTEpO1xuICAgICAgICBpZiAoZ3JhbmRQYXJlbnQudHlwZSAhPSBpdGVtVHlwZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCRmcm9tLnBhcmVudC5jb250ZW50LnNpemUgPT0gMCAmJiAkZnJvbS5ub2RlKC0xKS5jaGlsZENvdW50ID09ICRmcm9tLmluZGV4QWZ0ZXIoLTEpKSB7XG4gICAgICAgICAgICAvLyBJbiBhbiBlbXB0eSBibG9jay4gSWYgdGhpcyBpcyBhIG5lc3RlZCBsaXN0LCB0aGUgd3JhcHBpbmdcbiAgICAgICAgICAgIC8vIGxpc3QgaXRlbSBzaG91bGQgYmUgc3BsaXQuIE90aGVyd2lzZSwgYmFpbCBvdXQgYW5kIGxldCBuZXh0XG4gICAgICAgICAgICAvLyBjb21tYW5kIGhhbmRsZSBsaWZ0aW5nLlxuICAgICAgICAgICAgaWYgKCRmcm9tLmRlcHRoID09IDMgfHwgJGZyb20ubm9kZSgtMykudHlwZSAhPSBpdGVtVHlwZSB8fFxuICAgICAgICAgICAgICAgICRmcm9tLmluZGV4KC0yKSAhPSAkZnJvbS5ub2RlKC0yKS5jaGlsZENvdW50IC0gMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgICAgICAgICBsZXQgd3JhcCA9IEZyYWdtZW50LmVtcHR5O1xuICAgICAgICAgICAgICAgIGxldCBkZXB0aEJlZm9yZSA9ICRmcm9tLmluZGV4KC0xKSA/IDEgOiAkZnJvbS5pbmRleCgtMikgPyAyIDogMztcbiAgICAgICAgICAgICAgICAvLyBCdWlsZCBhIGZyYWdtZW50IGNvbnRhaW5pbmcgZW1wdHkgdmVyc2lvbnMgb2YgdGhlIHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgIC8vIGZyb20gdGhlIG91dGVyIGxpc3QgaXRlbSB0byB0aGUgcGFyZW50IG5vZGUgb2YgdGhlIGN1cnNvclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGQgPSAkZnJvbS5kZXB0aCAtIGRlcHRoQmVmb3JlOyBkID49ICRmcm9tLmRlcHRoIC0gMzsgZC0tKVxuICAgICAgICAgICAgICAgICAgICB3cmFwID0gRnJhZ21lbnQuZnJvbSgkZnJvbS5ub2RlKGQpLmNvcHkod3JhcCkpO1xuICAgICAgICAgICAgICAgIGxldCBkZXB0aEFmdGVyID0gJGZyb20uaW5kZXhBZnRlcigtMSkgPCAkZnJvbS5ub2RlKC0yKS5jaGlsZENvdW50ID8gMVxuICAgICAgICAgICAgICAgICAgICA6ICRmcm9tLmluZGV4QWZ0ZXIoLTIpIDwgJGZyb20ubm9kZSgtMykuY2hpbGRDb3VudCA/IDIgOiAzO1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhIHNlY29uZCBsaXN0IGl0ZW0gd2l0aCBhbiBlbXB0eSBkZWZhdWx0IHN0YXJ0IG5vZGVcbiAgICAgICAgICAgICAgICB3cmFwID0gd3JhcC5hcHBlbmQoRnJhZ21lbnQuZnJvbShpdGVtVHlwZS5jcmVhdGVBbmRGaWxsKCkpKTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSAkZnJvbS5iZWZvcmUoJGZyb20uZGVwdGggLSAoZGVwdGhCZWZvcmUgLSAxKSk7XG4gICAgICAgICAgICAgICAgbGV0IHRyID0gc3RhdGUudHIucmVwbGFjZShzdGFydCwgJGZyb20uYWZ0ZXIoLWRlcHRoQWZ0ZXIpLCBuZXcgU2xpY2Uod3JhcCwgNCAtIGRlcHRoQmVmb3JlLCAwKSk7XG4gICAgICAgICAgICAgICAgbGV0IHNlbCA9IC0xO1xuICAgICAgICAgICAgICAgIHRyLmRvYy5ub2Rlc0JldHdlZW4oc3RhcnQsIHRyLmRvYy5jb250ZW50LnNpemUsIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbCA+IC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZS5pc1RleHRibG9jayAmJiBub2RlLmNvbnRlbnQuc2l6ZSA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsID0gcG9zICsgMTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsID4gLTEpXG4gICAgICAgICAgICAgICAgICAgIHRyLnNldFNlbGVjdGlvbihTZWxlY3Rpb24ubmVhcih0ci5kb2MucmVzb2x2ZShzZWwpKSk7XG4gICAgICAgICAgICAgICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV4dFR5cGUgPSAkdG8ucG9zID09ICRmcm9tLmVuZCgpID8gZ3JhbmRQYXJlbnQuY29udGVudE1hdGNoQXQoMCkuZGVmYXVsdFR5cGUgOiBudWxsO1xuICAgICAgICBsZXQgdHIgPSBzdGF0ZS50ci5kZWxldGUoJGZyb20ucG9zLCAkdG8ucG9zKTtcbiAgICAgICAgbGV0IHR5cGVzID0gbmV4dFR5cGUgPyBbaXRlbUF0dHJzID8geyB0eXBlOiBpdGVtVHlwZSwgYXR0cnM6IGl0ZW1BdHRycyB9IDogbnVsbCwgeyB0eXBlOiBuZXh0VHlwZSB9XSA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCFjYW5TcGxpdCh0ci5kb2MsICRmcm9tLnBvcywgMiwgdHlwZXMpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZGlzcGF0Y2gpXG4gICAgICAgICAgICBkaXNwYXRjaCh0ci5zcGxpdCgkZnJvbS5wb3MsIDIsIHR5cGVzKS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cbi8qKlxuQ3JlYXRlIGEgY29tbWFuZCB0byBsaWZ0IHRoZSBsaXN0IGl0ZW0gYXJvdW5kIHRoZSBzZWxlY3Rpb24gdXAgaW50b1xuYSB3cmFwcGluZyBsaXN0LlxuKi9cbmZ1bmN0aW9uIGxpZnRMaXN0SXRlbShpdGVtVHlwZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgbGV0IHJhbmdlID0gJGZyb20uYmxvY2tSYW5nZSgkdG8sIG5vZGUgPT4gbm9kZS5jaGlsZENvdW50ID4gMCAmJiBub2RlLmZpcnN0Q2hpbGQudHlwZSA9PSBpdGVtVHlwZSk7XG4gICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghZGlzcGF0Y2gpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCRmcm9tLm5vZGUocmFuZ2UuZGVwdGggLSAxKS50eXBlID09IGl0ZW1UeXBlKSAvLyBJbnNpZGUgYSBwYXJlbnQgbGlzdFxuICAgICAgICAgICAgcmV0dXJuIGxpZnRUb091dGVyTGlzdChzdGF0ZSwgZGlzcGF0Y2gsIGl0ZW1UeXBlLCByYW5nZSk7XG4gICAgICAgIGVsc2UgLy8gT3V0ZXIgbGlzdCBub2RlXG4gICAgICAgICAgICByZXR1cm4gbGlmdE91dE9mTGlzdChzdGF0ZSwgZGlzcGF0Y2gsIHJhbmdlKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gbGlmdFRvT3V0ZXJMaXN0KHN0YXRlLCBkaXNwYXRjaCwgaXRlbVR5cGUsIHJhbmdlKSB7XG4gICAgbGV0IHRyID0gc3RhdGUudHIsIGVuZCA9IHJhbmdlLmVuZCwgZW5kT2ZMaXN0ID0gcmFuZ2UuJHRvLmVuZChyYW5nZS5kZXB0aCk7XG4gICAgaWYgKGVuZCA8IGVuZE9mTGlzdCkge1xuICAgICAgICAvLyBUaGVyZSBhcmUgc2libGluZ3MgYWZ0ZXIgdGhlIGxpZnRlZCBpdGVtcywgd2hpY2ggbXVzdCBiZWNvbWVcbiAgICAgICAgLy8gY2hpbGRyZW4gb2YgdGhlIGxhc3QgaXRlbVxuICAgICAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChlbmQgLSAxLCBlbmRPZkxpc3QsIGVuZCwgZW5kT2ZMaXN0LCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbShpdGVtVHlwZS5jcmVhdGUobnVsbCwgcmFuZ2UucGFyZW50LmNvcHkoKSkpLCAxLCAwKSwgMSwgdHJ1ZSkpO1xuICAgICAgICByYW5nZSA9IG5ldyBOb2RlUmFuZ2UodHIuZG9jLnJlc29sdmUocmFuZ2UuJGZyb20ucG9zKSwgdHIuZG9jLnJlc29sdmUoZW5kT2ZMaXN0KSwgcmFuZ2UuZGVwdGgpO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBsaWZ0VGFyZ2V0KHJhbmdlKTtcbiAgICBpZiAodGFyZ2V0ID09IG51bGwpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0ci5saWZ0KHJhbmdlLCB0YXJnZXQpO1xuICAgIGxldCBhZnRlciA9IHRyLm1hcHBpbmcubWFwKGVuZCwgLTEpIC0gMTtcbiAgICBpZiAoY2FuSm9pbih0ci5kb2MsIGFmdGVyKSlcbiAgICAgICAgdHIuam9pbihhZnRlcik7XG4gICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBsaWZ0T3V0T2ZMaXN0KHN0YXRlLCBkaXNwYXRjaCwgcmFuZ2UpIHtcbiAgICBsZXQgdHIgPSBzdGF0ZS50ciwgbGlzdCA9IHJhbmdlLnBhcmVudDtcbiAgICAvLyBNZXJnZSB0aGUgbGlzdCBpdGVtcyBpbnRvIGEgc2luZ2xlIGJpZyBpdGVtXG4gICAgZm9yIChsZXQgcG9zID0gcmFuZ2UuZW5kLCBpID0gcmFuZ2UuZW5kSW5kZXggLSAxLCBlID0gcmFuZ2Uuc3RhcnRJbmRleDsgaSA+IGU7IGktLSkge1xuICAgICAgICBwb3MgLT0gbGlzdC5jaGlsZChpKS5ub2RlU2l6ZTtcbiAgICAgICAgdHIuZGVsZXRlKHBvcyAtIDEsIHBvcyArIDEpO1xuICAgIH1cbiAgICBsZXQgJHN0YXJ0ID0gdHIuZG9jLnJlc29sdmUocmFuZ2Uuc3RhcnQpLCBpdGVtID0gJHN0YXJ0Lm5vZGVBZnRlcjtcbiAgICBpZiAodHIubWFwcGluZy5tYXAocmFuZ2UuZW5kKSAhPSByYW5nZS5zdGFydCArICRzdGFydC5ub2RlQWZ0ZXIubm9kZVNpemUpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgYXRTdGFydCA9IHJhbmdlLnN0YXJ0SW5kZXggPT0gMCwgYXRFbmQgPSByYW5nZS5lbmRJbmRleCA9PSBsaXN0LmNoaWxkQ291bnQ7XG4gICAgbGV0IHBhcmVudCA9ICRzdGFydC5ub2RlKC0xKSwgaW5kZXhCZWZvcmUgPSAkc3RhcnQuaW5kZXgoLTEpO1xuICAgIGlmICghcGFyZW50LmNhblJlcGxhY2UoaW5kZXhCZWZvcmUgKyAoYXRTdGFydCA/IDAgOiAxKSwgaW5kZXhCZWZvcmUgKyAxLCBpdGVtLmNvbnRlbnQuYXBwZW5kKGF0RW5kID8gRnJhZ21lbnQuZW1wdHkgOiBGcmFnbWVudC5mcm9tKGxpc3QpKSkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgc3RhcnQgPSAkc3RhcnQucG9zLCBlbmQgPSBzdGFydCArIGl0ZW0ubm9kZVNpemU7XG4gICAgLy8gU3RyaXAgb2ZmIHRoZSBzdXJyb3VuZGluZyBsaXN0LiBBdCB0aGUgc2lkZXMgd2hlcmUgd2UncmUgbm90IGF0XG4gICAgLy8gdGhlIGVuZCBvZiB0aGUgbGlzdCwgdGhlIGV4aXN0aW5nIGxpc3QgaXMgY2xvc2VkLiBBdCBzaWRlcyB3aGVyZVxuICAgIC8vIHRoaXMgaXMgdGhlIGVuZCwgaXQgaXMgb3ZlcndyaXR0ZW4gdG8gaXRzIGVuZC5cbiAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChzdGFydCAtIChhdFN0YXJ0ID8gMSA6IDApLCBlbmQgKyAoYXRFbmQgPyAxIDogMCksIHN0YXJ0ICsgMSwgZW5kIC0gMSwgbmV3IFNsaWNlKChhdFN0YXJ0ID8gRnJhZ21lbnQuZW1wdHkgOiBGcmFnbWVudC5mcm9tKGxpc3QuY29weShGcmFnbWVudC5lbXB0eSkpKVxuICAgICAgICAuYXBwZW5kKGF0RW5kID8gRnJhZ21lbnQuZW1wdHkgOiBGcmFnbWVudC5mcm9tKGxpc3QuY29weShGcmFnbWVudC5lbXB0eSkpKSwgYXRTdGFydCA/IDAgOiAxLCBhdEVuZCA/IDAgOiAxKSwgYXRTdGFydCA/IDAgOiAxKSk7XG4gICAgZGlzcGF0Y2godHIuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbkNyZWF0ZSBhIGNvbW1hbmQgdG8gc2luayB0aGUgbGlzdCBpdGVtIGFyb3VuZCB0aGUgc2VsZWN0aW9uIGRvd25cbmludG8gYW4gaW5uZXIgbGlzdC5cbiovXG5mdW5jdGlvbiBzaW5rTGlzdEl0ZW0oaXRlbVR5cGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBkaXNwYXRjaCkge1xuICAgICAgICBsZXQgeyAkZnJvbSwgJHRvIH0gPSBzdGF0ZS5zZWxlY3Rpb247XG4gICAgICAgIGxldCByYW5nZSA9ICRmcm9tLmJsb2NrUmFuZ2UoJHRvLCBub2RlID0+IG5vZGUuY2hpbGRDb3VudCA+IDAgJiYgbm9kZS5maXJzdENoaWxkLnR5cGUgPT0gaXRlbVR5cGUpO1xuICAgICAgICBpZiAoIXJhbmdlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnRJbmRleCA9IHJhbmdlLnN0YXJ0SW5kZXg7XG4gICAgICAgIGlmIChzdGFydEluZGV4ID09IDApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBwYXJlbnQgPSByYW5nZS5wYXJlbnQsIG5vZGVCZWZvcmUgPSBwYXJlbnQuY2hpbGQoc3RhcnRJbmRleCAtIDEpO1xuICAgICAgICBpZiAobm9kZUJlZm9yZS50eXBlICE9IGl0ZW1UeXBlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgICAgIGxldCBuZXN0ZWRCZWZvcmUgPSBub2RlQmVmb3JlLmxhc3RDaGlsZCAmJiBub2RlQmVmb3JlLmxhc3RDaGlsZC50eXBlID09IHBhcmVudC50eXBlO1xuICAgICAgICAgICAgbGV0IGlubmVyID0gRnJhZ21lbnQuZnJvbShuZXN0ZWRCZWZvcmUgPyBpdGVtVHlwZS5jcmVhdGUoKSA6IG51bGwpO1xuICAgICAgICAgICAgbGV0IHNsaWNlID0gbmV3IFNsaWNlKEZyYWdtZW50LmZyb20oaXRlbVR5cGUuY3JlYXRlKG51bGwsIEZyYWdtZW50LmZyb20ocGFyZW50LnR5cGUuY3JlYXRlKG51bGwsIGlubmVyKSkpKSwgbmVzdGVkQmVmb3JlID8gMyA6IDEsIDApO1xuICAgICAgICAgICAgbGV0IGJlZm9yZSA9IHJhbmdlLnN0YXJ0LCBhZnRlciA9IHJhbmdlLmVuZDtcbiAgICAgICAgICAgIGRpc3BhdGNoKHN0YXRlLnRyLnN0ZXAobmV3IFJlcGxhY2VBcm91bmRTdGVwKGJlZm9yZSAtIChuZXN0ZWRCZWZvcmUgPyAzIDogMSksIGFmdGVyLCBiZWZvcmUsIGFmdGVyLCBzbGljZSwgMSwgdHJ1ZSkpXG4gICAgICAgICAgICAgICAgLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5cbmV4cG9ydCB7IGFkZExpc3ROb2RlcywgYnVsbGV0TGlzdCwgbGlmdExpc3RJdGVtLCBsaXN0SXRlbSwgb3JkZXJlZExpc3QsIHNpbmtMaXN0SXRlbSwgc3BsaXRMaXN0SXRlbSwgd3JhcEluTGlzdCB9O1xuIiwiaW1wb3J0IHsgRWRpdG9yU3RhdGUsIFRyYW5zYWN0aW9uIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVN0YXRlKGNvbmZpZzoge1xuICB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb25cbiAgc3RhdGU6IEVkaXRvclN0YXRlXG59KTogRWRpdG9yU3RhdGUge1xuICBjb25zdCB7IHN0YXRlLCB0cmFuc2FjdGlvbiB9ID0gY29uZmlnXG4gIGxldCB7IHNlbGVjdGlvbiB9ID0gdHJhbnNhY3Rpb25cbiAgbGV0IHsgZG9jIH0gPSB0cmFuc2FjdGlvblxuICBsZXQgeyBzdG9yZWRNYXJrcyB9ID0gdHJhbnNhY3Rpb25cblxuICByZXR1cm4ge1xuICAgIC4uLnN0YXRlLFxuICAgIGFwcGx5OiBzdGF0ZS5hcHBseS5iaW5kKHN0YXRlKSxcbiAgICBhcHBseVRyYW5zYWN0aW9uOiBzdGF0ZS5hcHBseVRyYW5zYWN0aW9uLmJpbmQoc3RhdGUpLFxuICAgIGZpbHRlclRyYW5zYWN0aW9uOiBzdGF0ZS5maWx0ZXJUcmFuc2FjdGlvbixcbiAgICBwbHVnaW5zOiBzdGF0ZS5wbHVnaW5zLFxuICAgIHNjaGVtYTogc3RhdGUuc2NoZW1hLFxuICAgIHJlY29uZmlndXJlOiBzdGF0ZS5yZWNvbmZpZ3VyZS5iaW5kKHN0YXRlKSxcbiAgICB0b0pTT046IHN0YXRlLnRvSlNPTi5iaW5kKHN0YXRlKSxcbiAgICBnZXQgc3RvcmVkTWFya3MoKSB7XG4gICAgICByZXR1cm4gc3RvcmVkTWFya3NcbiAgICB9LFxuICAgIGdldCBzZWxlY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2VsZWN0aW9uXG4gICAgfSxcbiAgICBnZXQgZG9jKCkge1xuICAgICAgcmV0dXJuIGRvY1xuICAgIH0sXG4gICAgZ2V0IHRyKCkge1xuICAgICAgc2VsZWN0aW9uID0gdHJhbnNhY3Rpb24uc2VsZWN0aW9uXG4gICAgICBkb2MgPSB0cmFuc2FjdGlvbi5kb2NcbiAgICAgIHN0b3JlZE1hcmtzID0gdHJhbnNhY3Rpb24uc3RvcmVkTWFya3NcblxuICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uXG4gICAgfSxcbiAgfVxufVxuIiwiaW1wb3J0IHsgRWRpdG9yU3RhdGUsIFRyYW5zYWN0aW9uIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi9FZGl0b3IuanMnXG5pbXBvcnQgeyBjcmVhdGVDaGFpbmFibGVTdGF0ZSB9IGZyb20gJy4vaGVscGVycy9jcmVhdGVDaGFpbmFibGVTdGF0ZS5qcydcbmltcG9ydCB7XG4gIEFueUNvbW1hbmRzLCBDYW5Db21tYW5kcywgQ2hhaW5lZENvbW1hbmRzLCBDb21tYW5kUHJvcHMsIFNpbmdsZUNvbW1hbmRzLFxufSBmcm9tICcuL3R5cGVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29tbWFuZE1hbmFnZXIge1xuICBlZGl0b3I6IEVkaXRvclxuXG4gIHJhd0NvbW1hbmRzOiBBbnlDb21tYW5kc1xuXG4gIGN1c3RvbVN0YXRlPzogRWRpdG9yU3RhdGVcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogeyBlZGl0b3I6IEVkaXRvcjsgc3RhdGU/OiBFZGl0b3JTdGF0ZSB9KSB7XG4gICAgdGhpcy5lZGl0b3IgPSBwcm9wcy5lZGl0b3JcbiAgICB0aGlzLnJhd0NvbW1hbmRzID0gdGhpcy5lZGl0b3IuZXh0ZW5zaW9uTWFuYWdlci5jb21tYW5kc1xuICAgIHRoaXMuY3VzdG9tU3RhdGUgPSBwcm9wcy5zdGF0ZVxuICB9XG5cbiAgZ2V0IGhhc0N1c3RvbVN0YXRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuY3VzdG9tU3RhdGVcbiAgfVxuXG4gIGdldCBzdGF0ZSgpOiBFZGl0b3JTdGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuY3VzdG9tU3RhdGUgfHwgdGhpcy5lZGl0b3Iuc3RhdGVcbiAgfVxuXG4gIGdldCBjb21tYW5kcygpOiBTaW5nbGVDb21tYW5kcyB7XG4gICAgY29uc3QgeyByYXdDb21tYW5kcywgZWRpdG9yLCBzdGF0ZSB9ID0gdGhpc1xuICAgIGNvbnN0IHsgdmlldyB9ID0gZWRpdG9yXG4gICAgY29uc3QgeyB0ciB9ID0gc3RhdGVcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMuYnVpbGRQcm9wcyh0cilcblxuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhyYXdDb21tYW5kcykubWFwKChbbmFtZSwgY29tbWFuZF0pID0+IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBjb21tYW5kKC4uLmFyZ3MpKHByb3BzKVxuXG4gICAgICAgICAgaWYgKCF0ci5nZXRNZXRhKCdwcmV2ZW50RGlzcGF0Y2gnKSAmJiAhdGhpcy5oYXNDdXN0b21TdGF0ZSkge1xuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2tcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbbmFtZSwgbWV0aG9kXVxuICAgICAgfSksXG4gICAgKSBhcyB1bmtub3duIGFzIFNpbmdsZUNvbW1hbmRzXG4gIH1cblxuICBnZXQgY2hhaW4oKTogKCkgPT4gQ2hhaW5lZENvbW1hbmRzIHtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5jcmVhdGVDaGFpbigpXG4gIH1cblxuICBnZXQgY2FuKCk6ICgpID0+IENhbkNvbW1hbmRzIHtcbiAgICByZXR1cm4gKCkgPT4gdGhpcy5jcmVhdGVDYW4oKVxuICB9XG5cbiAgcHVibGljIGNyZWF0ZUNoYWluKHN0YXJ0VHI/OiBUcmFuc2FjdGlvbiwgc2hvdWxkRGlzcGF0Y2ggPSB0cnVlKTogQ2hhaW5lZENvbW1hbmRzIHtcbiAgICBjb25zdCB7IHJhd0NvbW1hbmRzLCBlZGl0b3IsIHN0YXRlIH0gPSB0aGlzXG4gICAgY29uc3QgeyB2aWV3IH0gPSBlZGl0b3JcbiAgICBjb25zdCBjYWxsYmFja3M6IGJvb2xlYW5bXSA9IFtdXG4gICAgY29uc3QgaGFzU3RhcnRUcmFuc2FjdGlvbiA9ICEhc3RhcnRUclxuICAgIGNvbnN0IHRyID0gc3RhcnRUciB8fCBzdGF0ZS50clxuXG4gICAgY29uc3QgcnVuID0gKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhaGFzU3RhcnRUcmFuc2FjdGlvblxuICAgICAgICAmJiBzaG91bGREaXNwYXRjaFxuICAgICAgICAmJiAhdHIuZ2V0TWV0YSgncHJldmVudERpc3BhdGNoJylcbiAgICAgICAgJiYgIXRoaXMuaGFzQ3VzdG9tU3RhdGVcbiAgICAgICkge1xuICAgICAgICB2aWV3LmRpc3BhdGNoKHRyKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FsbGJhY2tzLmV2ZXJ5KGNhbGxiYWNrID0+IGNhbGxiYWNrID09PSB0cnVlKVxuICAgIH1cblxuICAgIGNvbnN0IGNoYWluID0ge1xuICAgICAgLi4uT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QuZW50cmllcyhyYXdDb21tYW5kcykubWFwKChbbmFtZSwgY29tbWFuZF0pID0+IHtcbiAgICAgICAgICBjb25zdCBjaGFpbmVkQ29tbWFuZCA9ICguLi5hcmdzOiBuZXZlcltdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMuYnVpbGRQcm9wcyh0ciwgc2hvdWxkRGlzcGF0Y2gpXG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IGNvbW1hbmQoLi4uYXJncykocHJvcHMpXG5cbiAgICAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKVxuXG4gICAgICAgICAgICByZXR1cm4gY2hhaW5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gW25hbWUsIGNoYWluZWRDb21tYW5kXVxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgICBydW4sXG4gICAgfSBhcyB1bmtub3duIGFzIENoYWluZWRDb21tYW5kc1xuXG4gICAgcmV0dXJuIGNoYWluXG4gIH1cblxuICBwdWJsaWMgY3JlYXRlQ2FuKHN0YXJ0VHI/OiBUcmFuc2FjdGlvbik6IENhbkNvbW1hbmRzIHtcbiAgICBjb25zdCB7IHJhd0NvbW1hbmRzLCBzdGF0ZSB9ID0gdGhpc1xuICAgIGNvbnN0IGRpc3BhdGNoID0gZmFsc2VcbiAgICBjb25zdCB0ciA9IHN0YXJ0VHIgfHwgc3RhdGUudHJcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMuYnVpbGRQcm9wcyh0ciwgZGlzcGF0Y2gpXG4gICAgY29uc3QgZm9ybWF0dGVkQ29tbWFuZHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICBPYmplY3QuZW50cmllcyhyYXdDb21tYW5kcykubWFwKChbbmFtZSwgY29tbWFuZF0pID0+IHtcbiAgICAgICAgcmV0dXJuIFtuYW1lLCAoLi4uYXJnczogbmV2ZXJbXSkgPT4gY29tbWFuZCguLi5hcmdzKSh7IC4uLnByb3BzLCBkaXNwYXRjaDogdW5kZWZpbmVkIH0pXVxuICAgICAgfSksXG4gICAgKSBhcyB1bmtub3duIGFzIFNpbmdsZUNvbW1hbmRzXG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZm9ybWF0dGVkQ29tbWFuZHMsXG4gICAgICBjaGFpbjogKCkgPT4gdGhpcy5jcmVhdGVDaGFpbih0ciwgZGlzcGF0Y2gpLFxuICAgIH0gYXMgQ2FuQ29tbWFuZHNcbiAgfVxuXG4gIHB1YmxpYyBidWlsZFByb3BzKHRyOiBUcmFuc2FjdGlvbiwgc2hvdWxkRGlzcGF0Y2ggPSB0cnVlKTogQ29tbWFuZFByb3BzIHtcbiAgICBjb25zdCB7IHJhd0NvbW1hbmRzLCBlZGl0b3IsIHN0YXRlIH0gPSB0aGlzXG4gICAgY29uc3QgeyB2aWV3IH0gPSBlZGl0b3JcblxuICAgIGNvbnN0IHByb3BzOiBDb21tYW5kUHJvcHMgPSB7XG4gICAgICB0cixcbiAgICAgIGVkaXRvcixcbiAgICAgIHZpZXcsXG4gICAgICBzdGF0ZTogY3JlYXRlQ2hhaW5hYmxlU3RhdGUoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgdHJhbnNhY3Rpb246IHRyLFxuICAgICAgfSksXG4gICAgICBkaXNwYXRjaDogc2hvdWxkRGlzcGF0Y2ggPyAoKSA9PiB1bmRlZmluZWQgOiB1bmRlZmluZWQsXG4gICAgICBjaGFpbjogKCkgPT4gdGhpcy5jcmVhdGVDaGFpbih0ciwgc2hvdWxkRGlzcGF0Y2gpLFxuICAgICAgY2FuOiAoKSA9PiB0aGlzLmNyZWF0ZUNhbih0ciksXG4gICAgICBnZXQgY29tbWFuZHMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMocmF3Q29tbWFuZHMpLm1hcCgoW25hbWUsIGNvbW1hbmRdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW25hbWUsICguLi5hcmdzOiBuZXZlcltdKSA9PiBjb21tYW5kKC4uLmFyZ3MpKHByb3BzKV1cbiAgICAgICAgICB9KSxcbiAgICAgICAgKSBhcyB1bmtub3duIGFzIFNpbmdsZUNvbW1hbmRzXG4gICAgICB9LFxuICAgIH1cblxuICAgIHJldHVybiBwcm9wc1xuICB9XG59XG4iLCJ0eXBlIFN0cmluZ0tleU9mPFQ+ID0gRXh0cmFjdDxrZXlvZiBULCBzdHJpbmc+XG50eXBlIENhbGxiYWNrVHlwZTxcbiAgVCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIEV2ZW50TmFtZSBleHRlbmRzIFN0cmluZ0tleU9mPFQ+LFxuPiA9IFRbRXZlbnROYW1lXSBleHRlbmRzIGFueVtdID8gVFtFdmVudE5hbWVdIDogW1RbRXZlbnROYW1lXV1cbnR5cGUgQ2FsbGJhY2tGdW5jdGlvbjxcbiAgVCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIEV2ZW50TmFtZSBleHRlbmRzIFN0cmluZ0tleU9mPFQ+LFxuPiA9ICguLi5wcm9wczogQ2FsbGJhY2tUeXBlPFQsIEV2ZW50TmFtZT4pID0+IGFueVxuXG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG5cbiAgcHJpdmF0ZSBjYWxsYmFja3M6IHsgW2tleTogc3RyaW5nXTogRnVuY3Rpb25bXSB9ID0ge31cblxuICBwdWJsaWMgb248RXZlbnROYW1lIGV4dGVuZHMgU3RyaW5nS2V5T2Y8VD4+KGV2ZW50OiBFdmVudE5hbWUsIGZuOiBDYWxsYmFja0Z1bmN0aW9uPFQsIEV2ZW50TmFtZT4pOiB0aGlzIHtcbiAgICBpZiAoIXRoaXMuY2FsbGJhY2tzW2V2ZW50XSkge1xuICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdID0gW11cbiAgICB9XG5cbiAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0ucHVzaChmbilcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwcm90ZWN0ZWQgZW1pdDxFdmVudE5hbWUgZXh0ZW5kcyBTdHJpbmdLZXlPZjxUPj4oZXZlbnQ6IEV2ZW50TmFtZSwgLi4uYXJnczogQ2FsbGJhY2tUeXBlPFQsIEV2ZW50TmFtZT4pOiB0aGlzIHtcbiAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLmNhbGxiYWNrc1tldmVudF1cblxuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwdWJsaWMgb2ZmPEV2ZW50TmFtZSBleHRlbmRzIFN0cmluZ0tleU9mPFQ+PihldmVudDogRXZlbnROYW1lLCBmbj86IENhbGxiYWNrRnVuY3Rpb248VCwgRXZlbnROYW1lPik6IHRoaXMge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XVxuXG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IGNhbGxiYWNrcy5maWx0ZXIoY2FsbGJhY2sgPT4gY2FsbGJhY2sgIT09IGZuKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuY2FsbGJhY2tzW2V2ZW50XVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwcm90ZWN0ZWQgcmVtb3ZlQWxsTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIHRoaXMuY2FsbGJhY2tzID0ge31cbiAgfVxufVxuIiwiaW1wb3J0IHsgQW55RXh0ZW5zaW9uLCBNYXliZVRoaXNQYXJhbWV0ZXJUeXBlLCBSZW1vdmVUaGlzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRlbnNpb25GaWVsZDxUID0gYW55PihcbiAgZXh0ZW5zaW9uOiBBbnlFeHRlbnNpb24sXG4gIGZpZWxkOiBzdHJpbmcsXG4gIGNvbnRleHQ/OiBPbWl0PE1heWJlVGhpc1BhcmFtZXRlclR5cGU8VD4sICdwYXJlbnQnPixcbik6IFJlbW92ZVRoaXM8VD4ge1xuXG4gIGlmIChleHRlbnNpb24uY29uZmlnW2ZpZWxkXSA9PT0gdW5kZWZpbmVkICYmIGV4dGVuc2lvbi5wYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0RXh0ZW5zaW9uRmllbGQoZXh0ZW5zaW9uLnBhcmVudCwgZmllbGQsIGNvbnRleHQpXG4gIH1cblxuICBpZiAodHlwZW9mIGV4dGVuc2lvbi5jb25maWdbZmllbGRdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc3QgdmFsdWUgPSBleHRlbnNpb24uY29uZmlnW2ZpZWxkXS5iaW5kKHtcbiAgICAgIC4uLmNvbnRleHQsXG4gICAgICBwYXJlbnQ6IGV4dGVuc2lvbi5wYXJlbnRcbiAgICAgICAgPyBnZXRFeHRlbnNpb25GaWVsZChleHRlbnNpb24ucGFyZW50LCBmaWVsZCwgY29udGV4dClcbiAgICAgICAgOiBudWxsLFxuICAgIH0pXG5cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIHJldHVybiBleHRlbnNpb24uY29uZmlnW2ZpZWxkXVxufVxuIiwiaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnLi4vRXh0ZW5zaW9uLmpzJ1xuaW1wb3J0IHsgTWFyayB9IGZyb20gJy4uL01hcmsuanMnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vTm9kZS5qcydcbmltcG9ydCB7IEV4dGVuc2lvbnMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0RXh0ZW5zaW9ucyhleHRlbnNpb25zOiBFeHRlbnNpb25zKSB7XG4gIGNvbnN0IGJhc2VFeHRlbnNpb25zID0gZXh0ZW5zaW9ucy5maWx0ZXIoZXh0ZW5zaW9uID0+IGV4dGVuc2lvbi50eXBlID09PSAnZXh0ZW5zaW9uJykgYXMgRXh0ZW5zaW9uW11cbiAgY29uc3Qgbm9kZUV4dGVuc2lvbnMgPSBleHRlbnNpb25zLmZpbHRlcihleHRlbnNpb24gPT4gZXh0ZW5zaW9uLnR5cGUgPT09ICdub2RlJykgYXMgTm9kZVtdXG4gIGNvbnN0IG1hcmtFeHRlbnNpb25zID0gZXh0ZW5zaW9ucy5maWx0ZXIoZXh0ZW5zaW9uID0+IGV4dGVuc2lvbi50eXBlID09PSAnbWFyaycpIGFzIE1hcmtbXVxuXG4gIHJldHVybiB7XG4gICAgYmFzZUV4dGVuc2lvbnMsXG4gICAgbm9kZUV4dGVuc2lvbnMsXG4gICAgbWFya0V4dGVuc2lvbnMsXG4gIH1cbn1cbiIsImltcG9ydCB7IE1hcmtDb25maWcsIE5vZGVDb25maWcgfSBmcm9tICcuLi9pbmRleC5qcydcbmltcG9ydCB7XG4gIEFueUNvbmZpZyxcbiAgQXR0cmlidXRlLFxuICBBdHRyaWJ1dGVzLFxuICBFeHRlbnNpb25BdHRyaWJ1dGUsXG4gIEV4dGVuc2lvbnMsXG4gIEdsb2JhbEF0dHJpYnV0ZXMsXG59IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgZ2V0RXh0ZW5zaW9uRmllbGQgfSBmcm9tICcuL2dldEV4dGVuc2lvbkZpZWxkLmpzJ1xuaW1wb3J0IHsgc3BsaXRFeHRlbnNpb25zIH0gZnJvbSAnLi9zcGxpdEV4dGVuc2lvbnMuanMnXG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBhbGwgZXh0ZW5zaW9uIGF0dHJpYnV0ZXMgZGVmaW5lZCBpbiBgYWRkQXR0cmlidXRlYCBhbmQgYGFkZEdsb2JhbEF0dHJpYnV0ZWAuXG4gKiBAcGFyYW0gZXh0ZW5zaW9ucyBMaXN0IG9mIGV4dGVuc2lvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXNGcm9tRXh0ZW5zaW9ucyhleHRlbnNpb25zOiBFeHRlbnNpb25zKTogRXh0ZW5zaW9uQXR0cmlidXRlW10ge1xuICBjb25zdCBleHRlbnNpb25BdHRyaWJ1dGVzOiBFeHRlbnNpb25BdHRyaWJ1dGVbXSA9IFtdXG4gIGNvbnN0IHsgbm9kZUV4dGVuc2lvbnMsIG1hcmtFeHRlbnNpb25zIH0gPSBzcGxpdEV4dGVuc2lvbnMoZXh0ZW5zaW9ucylcbiAgY29uc3Qgbm9kZUFuZE1hcmtFeHRlbnNpb25zID0gWy4uLm5vZGVFeHRlbnNpb25zLCAuLi5tYXJrRXh0ZW5zaW9uc11cbiAgY29uc3QgZGVmYXVsdEF0dHJpYnV0ZTogUmVxdWlyZWQ8QXR0cmlidXRlPiA9IHtcbiAgICBkZWZhdWx0OiBudWxsLFxuICAgIHJlbmRlcmVkOiB0cnVlLFxuICAgIHJlbmRlckhUTUw6IG51bGwsXG4gICAgcGFyc2VIVE1MOiBudWxsLFxuICAgIGtlZXBPblNwbGl0OiB0cnVlLFxuICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICB9XG5cbiAgZXh0ZW5zaW9ucy5mb3JFYWNoKGV4dGVuc2lvbiA9PiB7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICBzdG9yYWdlOiBleHRlbnNpb24uc3RvcmFnZSxcbiAgICB9XG5cbiAgICBjb25zdCBhZGRHbG9iYWxBdHRyaWJ1dGVzID0gZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRHbG9iYWxBdHRyaWJ1dGVzJ10+KFxuICAgICAgZXh0ZW5zaW9uLFxuICAgICAgJ2FkZEdsb2JhbEF0dHJpYnV0ZXMnLFxuICAgICAgY29udGV4dCxcbiAgICApXG5cbiAgICBpZiAoIWFkZEdsb2JhbEF0dHJpYnV0ZXMpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSBgYXMgR2xvYmFsQXR0cmlidXRlc2BcbiAgICBjb25zdCBnbG9iYWxBdHRyaWJ1dGVzID0gYWRkR2xvYmFsQXR0cmlidXRlcygpIGFzIEdsb2JhbEF0dHJpYnV0ZXNcblxuICAgIGdsb2JhbEF0dHJpYnV0ZXMuZm9yRWFjaChnbG9iYWxBdHRyaWJ1dGUgPT4ge1xuICAgICAgZ2xvYmFsQXR0cmlidXRlLnR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgIE9iamVjdFxuICAgICAgICAgIC5lbnRyaWVzKGdsb2JhbEF0dHJpYnV0ZS5hdHRyaWJ1dGVzKVxuICAgICAgICAgIC5mb3JFYWNoKChbbmFtZSwgYXR0cmlidXRlXSkgPT4ge1xuICAgICAgICAgICAgZXh0ZW5zaW9uQXR0cmlidXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgYXR0cmlidXRlOiB7XG4gICAgICAgICAgICAgICAgLi4uZGVmYXVsdEF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAuLi5hdHRyaWJ1dGUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgbm9kZUFuZE1hcmtFeHRlbnNpb25zLmZvckVhY2goZXh0ZW5zaW9uID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICBvcHRpb25zOiBleHRlbnNpb24ub3B0aW9ucyxcbiAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgIH1cblxuICAgIGNvbnN0IGFkZEF0dHJpYnV0ZXMgPSBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydhZGRBdHRyaWJ1dGVzJ10gfCBNYXJrQ29uZmlnWydhZGRBdHRyaWJ1dGVzJ10+KFxuICAgICAgZXh0ZW5zaW9uLFxuICAgICAgJ2FkZEF0dHJpYnV0ZXMnLFxuICAgICAgY29udGV4dCxcbiAgICApXG5cbiAgICBpZiAoIWFkZEF0dHJpYnV0ZXMpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSBgYXMgQXR0cmlidXRlc2BcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gYWRkQXR0cmlidXRlcygpIGFzIEF0dHJpYnV0ZXNcblxuICAgIE9iamVjdFxuICAgICAgLmVudHJpZXMoYXR0cmlidXRlcylcbiAgICAgIC5mb3JFYWNoKChbbmFtZSwgYXR0cmlidXRlXSkgPT4ge1xuICAgICAgICBjb25zdCBtZXJnZWRBdHRyID0ge1xuICAgICAgICAgIC4uLmRlZmF1bHRBdHRyaWJ1dGUsXG4gICAgICAgICAgLi4uYXR0cmlidXRlLFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBtZXJnZWRBdHRyPy5kZWZhdWx0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbWVyZ2VkQXR0ci5kZWZhdWx0ID0gbWVyZ2VkQXR0ci5kZWZhdWx0KClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXJnZWRBdHRyPy5pc1JlcXVpcmVkICYmIG1lcmdlZEF0dHI/LmRlZmF1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGRlbGV0ZSBtZXJnZWRBdHRyLmRlZmF1bHRcbiAgICAgICAgfVxuXG4gICAgICAgIGV4dGVuc2lvbkF0dHJpYnV0ZXMucHVzaCh7XG4gICAgICAgICAgdHlwZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBhdHRyaWJ1dGU6IG1lcmdlZEF0dHIsXG4gICAgICAgIH0pXG4gICAgICB9KVxuICB9KVxuXG4gIHJldHVybiBleHRlbnNpb25BdHRyaWJ1dGVzXG59XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSwgU2NoZW1hIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVUeXBlKG5hbWVPclR5cGU6IHN0cmluZyB8IE5vZGVUeXBlLCBzY2hlbWE6IFNjaGVtYSk6IE5vZGVUeXBlIHtcbiAgaWYgKHR5cGVvZiBuYW1lT3JUeXBlID09PSAnc3RyaW5nJykge1xuICAgIGlmICghc2NoZW1hLm5vZGVzW25hbWVPclR5cGVdKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgYFRoZXJlIGlzIG5vIG5vZGUgdHlwZSBuYW1lZCAnJHtuYW1lT3JUeXBlfScuIE1heWJlIHlvdSBmb3Jnb3QgdG8gYWRkIHRoZSBleHRlbnNpb24/YCxcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gc2NoZW1hLm5vZGVzW25hbWVPclR5cGVdXG4gIH1cblxuICByZXR1cm4gbmFtZU9yVHlwZVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIG1lcmdlQXR0cmlidXRlcyguLi5vYmplY3RzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W10pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgcmV0dXJuIG9iamVjdHNcbiAgICAuZmlsdGVyKGl0ZW0gPT4gISFpdGVtKVxuICAgIC5yZWR1Y2UoKGl0ZW1zLCBpdGVtKSA9PiB7XG4gICAgICBjb25zdCBtZXJnZWRBdHRyaWJ1dGVzID0geyAuLi5pdGVtcyB9XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKGl0ZW0pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBtZXJnZWRBdHRyaWJ1dGVzW2tleV1cblxuICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgIG1lcmdlZEF0dHJpYnV0ZXNba2V5XSA9IHZhbHVlXG5cbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZUNsYXNzZXM6IHN0cmluZ1tdID0gdmFsdWUgPyB2YWx1ZS5zcGxpdCgnICcpIDogW11cbiAgICAgICAgICBjb25zdCBleGlzdGluZ0NsYXNzZXM6IHN0cmluZ1tdID0gbWVyZ2VkQXR0cmlidXRlc1trZXldID8gbWVyZ2VkQXR0cmlidXRlc1trZXldLnNwbGl0KCcgJykgOiBbXVxuXG4gICAgICAgICAgY29uc3QgaW5zZXJ0Q2xhc3NlcyA9IHZhbHVlQ2xhc3Nlcy5maWx0ZXIoXG4gICAgICAgICAgICB2YWx1ZUNsYXNzID0+ICFleGlzdGluZ0NsYXNzZXMuaW5jbHVkZXModmFsdWVDbGFzcyksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgbWVyZ2VkQXR0cmlidXRlc1trZXldID0gWy4uLmV4aXN0aW5nQ2xhc3NlcywgLi4uaW5zZXJ0Q2xhc3Nlc10uam9pbignICcpXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgbWVyZ2VkQXR0cmlidXRlc1trZXldID0gW21lcmdlZEF0dHJpYnV0ZXNba2V5XSwgdmFsdWVdLmpvaW4oJzsgJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZXJnZWRBdHRyaWJ1dGVzW2tleV0gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gbWVyZ2VkQXR0cmlidXRlc1xuICAgIH0sIHt9KVxufVxuIiwiaW1wb3J0IHsgTWFyaywgTm9kZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IEV4dGVuc2lvbkF0dHJpYnV0ZSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgbWVyZ2VBdHRyaWJ1dGVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzL21lcmdlQXR0cmlidXRlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlbmRlcmVkQXR0cmlidXRlcyhcbiAgbm9kZU9yTWFyazogTm9kZSB8IE1hcmssXG4gIGV4dGVuc2lvbkF0dHJpYnV0ZXM6IEV4dGVuc2lvbkF0dHJpYnV0ZVtdLFxuKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gIHJldHVybiBleHRlbnNpb25BdHRyaWJ1dGVzXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0uYXR0cmlidXRlLnJlbmRlcmVkKVxuICAgIC5tYXAoaXRlbSA9PiB7XG4gICAgICBpZiAoIWl0ZW0uYXR0cmlidXRlLnJlbmRlckhUTUwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBbaXRlbS5uYW1lXTogbm9kZU9yTWFyay5hdHRyc1tpdGVtLm5hbWVdLFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtLmF0dHJpYnV0ZS5yZW5kZXJIVE1MKG5vZGVPck1hcmsuYXR0cnMpIHx8IHt9XG4gICAgfSlcbiAgICAucmVkdWNlKChhdHRyaWJ1dGVzLCBhdHRyaWJ1dGUpID0+IG1lcmdlQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBhdHRyaWJ1dGUpLCB7fSlcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBGdW5jdGlvbiB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbidcbn1cbiIsImltcG9ydCB7IE1heWJlUmV0dXJuVHlwZSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbi5qcydcblxuLyoqXG4gKiBPcHRpb25hbGx5IGNhbGxzIGB2YWx1ZWAgYXMgYSBmdW5jdGlvbi5cbiAqIE90aGVyd2lzZSBpdCBpcyByZXR1cm5lZCBkaXJlY3RseS5cbiAqIEBwYXJhbSB2YWx1ZSBGdW5jdGlvbiBvciBhbnkgdmFsdWUuXG4gKiBAcGFyYW0gY29udGV4dCBPcHRpb25hbCBjb250ZXh0IHRvIGJpbmQgdG8gZnVuY3Rpb24uXG4gKiBAcGFyYW0gcHJvcHMgT3B0aW9uYWwgcHJvcHMgdG8gcGFzcyB0byBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGxPclJldHVybjxUPih2YWx1ZTogVCwgY29udGV4dDogYW55ID0gdW5kZWZpbmVkLCAuLi5wcm9wczogYW55W10pOiBNYXliZVJldHVyblR5cGU8VD4ge1xuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgcmV0dXJuIHZhbHVlLmJpbmQoY29udGV4dCkoLi4ucHJvcHMpXG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlKC4uLnByb3BzKVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIGFzIE1heWJlUmV0dXJuVHlwZTxUPlxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmplY3QodmFsdWUgPSB7fSk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PT0gMCAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZnJvbVN0cmluZyh2YWx1ZTogYW55KTogYW55IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGlmICh2YWx1ZS5tYXRjaCgvXlsrLV0/KD86XFxkKlxcLik/XFxkKyQvKSkge1xuICAgIHJldHVybiBOdW1iZXIodmFsdWUpXG4gIH1cblxuICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiB2YWx1ZVxufVxuIiwiaW1wb3J0IHsgUGFyc2VSdWxlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgRXh0ZW5zaW9uQXR0cmlidXRlIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBmcm9tU3RyaW5nIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2Zyb21TdHJpbmcuanMnXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtZXJnZXMgZXh0ZW5zaW9uIGF0dHJpYnV0ZXMgaW50byBwYXJzZXJ1bGUgYXR0cmlidXRlcyAoYGF0dHJzYCBvciBgZ2V0QXR0cnNgKS5cbiAqIENhbmNlbHMgd2hlbiBgZ2V0QXR0cnNgIHJldHVybmVkIGBmYWxzZWAuXG4gKiBAcGFyYW0gcGFyc2VSdWxlIFByb3NlTWlycm9yIFBhcnNlUnVsZVxuICogQHBhcmFtIGV4dGVuc2lvbkF0dHJpYnV0ZXMgTGlzdCBvZiBhdHRyaWJ1dGVzIHRvIGluamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0RXh0ZW5zaW9uQXR0cmlidXRlc1RvUGFyc2VSdWxlKFxuICBwYXJzZVJ1bGU6IFBhcnNlUnVsZSxcbiAgZXh0ZW5zaW9uQXR0cmlidXRlczogRXh0ZW5zaW9uQXR0cmlidXRlW10sXG4pOiBQYXJzZVJ1bGUge1xuICBpZiAocGFyc2VSdWxlLnN0eWxlKSB7XG4gICAgcmV0dXJuIHBhcnNlUnVsZVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5wYXJzZVJ1bGUsXG4gICAgZ2V0QXR0cnM6IG5vZGUgPT4ge1xuICAgICAgY29uc3Qgb2xkQXR0cmlidXRlcyA9IHBhcnNlUnVsZS5nZXRBdHRycyA/IHBhcnNlUnVsZS5nZXRBdHRycyhub2RlKSA6IHBhcnNlUnVsZS5hdHRyc1xuXG4gICAgICBpZiAob2xkQXR0cmlidXRlcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld0F0dHJpYnV0ZXMgPSBleHRlbnNpb25BdHRyaWJ1dGVzLnJlZHVjZSgoaXRlbXMsIGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBpdGVtLmF0dHJpYnV0ZS5wYXJzZUhUTUxcbiAgICAgICAgICA/IGl0ZW0uYXR0cmlidXRlLnBhcnNlSFRNTChub2RlIGFzIEhUTUxFbGVtZW50KVxuICAgICAgICAgIDogZnJvbVN0cmluZygobm9kZSBhcyBIVE1MRWxlbWVudCkuZ2V0QXR0cmlidXRlKGl0ZW0ubmFtZSkpXG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaXRlbXMsXG4gICAgICAgICAgW2l0ZW0ubmFtZV06IHZhbHVlLFxuICAgICAgICB9XG4gICAgICB9LCB7fSlcblxuICAgICAgcmV0dXJuIHsgLi4ub2xkQXR0cmlidXRlcywgLi4ubmV3QXR0cmlidXRlcyB9XG4gICAgfSxcbiAgfVxufVxuIiwiaW1wb3J0IHsgTWFya1NwZWMsIE5vZGVTcGVjLCBTY2hlbWEgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBFZGl0b3IsIE1hcmtDb25maWcsIE5vZGVDb25maWcgfSBmcm9tICcuLi9pbmRleC5qcydcbmltcG9ydCB7IEFueUNvbmZpZywgRXh0ZW5zaW9ucyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgY2FsbE9yUmV0dXJuIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2NhbGxPclJldHVybi5qcydcbmltcG9ydCB7IGlzRW1wdHlPYmplY3QgfSBmcm9tICcuLi91dGlsaXRpZXMvaXNFbXB0eU9iamVjdC5qcydcbmltcG9ydCB7IGdldEF0dHJpYnV0ZXNGcm9tRXh0ZW5zaW9ucyB9IGZyb20gJy4vZ2V0QXR0cmlidXRlc0Zyb21FeHRlbnNpb25zLmpzJ1xuaW1wb3J0IHsgZ2V0RXh0ZW5zaW9uRmllbGQgfSBmcm9tICcuL2dldEV4dGVuc2lvbkZpZWxkLmpzJ1xuaW1wb3J0IHsgZ2V0UmVuZGVyZWRBdHRyaWJ1dGVzIH0gZnJvbSAnLi9nZXRSZW5kZXJlZEF0dHJpYnV0ZXMuanMnXG5pbXBvcnQgeyBpbmplY3RFeHRlbnNpb25BdHRyaWJ1dGVzVG9QYXJzZVJ1bGUgfSBmcm9tICcuL2luamVjdEV4dGVuc2lvbkF0dHJpYnV0ZXNUb1BhcnNlUnVsZS5qcydcbmltcG9ydCB7IHNwbGl0RXh0ZW5zaW9ucyB9IGZyb20gJy4vc3BsaXRFeHRlbnNpb25zLmpzJ1xuXG5mdW5jdGlvbiBjbGVhblVwU2NoZW1hSXRlbTxUPihkYXRhOiBUKSB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIE9iamVjdC5lbnRyaWVzKGRhdGEpLmZpbHRlcigoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAoa2V5ID09PSAnYXR0cnMnICYmIGlzRW1wdHlPYmplY3QodmFsdWUgYXMge30gfCB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHVuZGVmaW5lZFxuICAgIH0pLFxuICApIGFzIFRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVtYUJ5UmVzb2x2ZWRFeHRlbnNpb25zKGV4dGVuc2lvbnM6IEV4dGVuc2lvbnMsIGVkaXRvcj86IEVkaXRvcik6IFNjaGVtYSB7XG4gIGNvbnN0IGFsbEF0dHJpYnV0ZXMgPSBnZXRBdHRyaWJ1dGVzRnJvbUV4dGVuc2lvbnMoZXh0ZW5zaW9ucylcbiAgY29uc3QgeyBub2RlRXh0ZW5zaW9ucywgbWFya0V4dGVuc2lvbnMgfSA9IHNwbGl0RXh0ZW5zaW9ucyhleHRlbnNpb25zKVxuICBjb25zdCB0b3BOb2RlID0gbm9kZUV4dGVuc2lvbnMuZmluZChleHRlbnNpb24gPT4gZ2V0RXh0ZW5zaW9uRmllbGQoZXh0ZW5zaW9uLCAndG9wTm9kZScpKT8ubmFtZVxuXG4gIGNvbnN0IG5vZGVzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIG5vZGVFeHRlbnNpb25zLm1hcChleHRlbnNpb24gPT4ge1xuICAgICAgY29uc3QgZXh0ZW5zaW9uQXR0cmlidXRlcyA9IGFsbEF0dHJpYnV0ZXMuZmlsdGVyKFxuICAgICAgICBhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLnR5cGUgPT09IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgKVxuICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgICAgICBzdG9yYWdlOiBleHRlbnNpb24uc3RvcmFnZSxcbiAgICAgICAgZWRpdG9yLFxuICAgICAgfVxuXG4gICAgICBjb25zdCBleHRyYU5vZGVGaWVsZHMgPSBleHRlbnNpb25zLnJlZHVjZSgoZmllbGRzLCBlKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4dGVuZE5vZGVTY2hlbWEgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ2V4dGVuZE5vZGVTY2hlbWEnXT4oXG4gICAgICAgICAgZSxcbiAgICAgICAgICAnZXh0ZW5kTm9kZVNjaGVtYScsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICAgIC4uLihleHRlbmROb2RlU2NoZW1hID8gZXh0ZW5kTm9kZVNjaGVtYShleHRlbnNpb24pIDoge30pLFxuICAgICAgICB9XG4gICAgICB9LCB7fSlcblxuICAgICAgY29uc3Qgc2NoZW1hOiBOb2RlU3BlYyA9IGNsZWFuVXBTY2hlbWFJdGVtKHtcbiAgICAgICAgLi4uZXh0cmFOb2RlRmllbGRzLFxuICAgICAgICBjb250ZW50OiBjYWxsT3JSZXR1cm4oXG4gICAgICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8Tm9kZUNvbmZpZ1snY29udGVudCddPihleHRlbnNpb24sICdjb250ZW50JywgY29udGV4dCksXG4gICAgICAgICksXG4gICAgICAgIG1hcmtzOiBjYWxsT3JSZXR1cm4oZ2V0RXh0ZW5zaW9uRmllbGQ8Tm9kZUNvbmZpZ1snbWFya3MnXT4oZXh0ZW5zaW9uLCAnbWFya3MnLCBjb250ZXh0KSksXG4gICAgICAgIGdyb3VwOiBjYWxsT3JSZXR1cm4oZ2V0RXh0ZW5zaW9uRmllbGQ8Tm9kZUNvbmZpZ1snZ3JvdXAnXT4oZXh0ZW5zaW9uLCAnZ3JvdXAnLCBjb250ZXh0KSksXG4gICAgICAgIGlubGluZTogY2FsbE9yUmV0dXJuKGdldEV4dGVuc2lvbkZpZWxkPE5vZGVDb25maWdbJ2lubGluZSddPihleHRlbnNpb24sICdpbmxpbmUnLCBjb250ZXh0KSksXG4gICAgICAgIGF0b206IGNhbGxPclJldHVybihnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydhdG9tJ10+KGV4dGVuc2lvbiwgJ2F0b20nLCBjb250ZXh0KSksXG4gICAgICAgIHNlbGVjdGFibGU6IGNhbGxPclJldHVybihcbiAgICAgICAgICBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydzZWxlY3RhYmxlJ10+KGV4dGVuc2lvbiwgJ3NlbGVjdGFibGUnLCBjb250ZXh0KSxcbiAgICAgICAgKSxcbiAgICAgICAgZHJhZ2dhYmxlOiBjYWxsT3JSZXR1cm4oXG4gICAgICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8Tm9kZUNvbmZpZ1snZHJhZ2dhYmxlJ10+KGV4dGVuc2lvbiwgJ2RyYWdnYWJsZScsIGNvbnRleHQpLFxuICAgICAgICApLFxuICAgICAgICBjb2RlOiBjYWxsT3JSZXR1cm4oZ2V0RXh0ZW5zaW9uRmllbGQ8Tm9kZUNvbmZpZ1snY29kZSddPihleHRlbnNpb24sICdjb2RlJywgY29udGV4dCkpLFxuICAgICAgICBkZWZpbmluZzogY2FsbE9yUmV0dXJuKFxuICAgICAgICAgIGdldEV4dGVuc2lvbkZpZWxkPE5vZGVDb25maWdbJ2RlZmluaW5nJ10+KGV4dGVuc2lvbiwgJ2RlZmluaW5nJywgY29udGV4dCksXG4gICAgICAgICksXG4gICAgICAgIGlzb2xhdGluZzogY2FsbE9yUmV0dXJuKFxuICAgICAgICAgIGdldEV4dGVuc2lvbkZpZWxkPE5vZGVDb25maWdbJ2lzb2xhdGluZyddPihleHRlbnNpb24sICdpc29sYXRpbmcnLCBjb250ZXh0KSxcbiAgICAgICAgKSxcbiAgICAgICAgYXR0cnM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICBleHRlbnNpb25BdHRyaWJ1dGVzLm1hcChleHRlbnNpb25BdHRyaWJ1dGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFtleHRlbnNpb25BdHRyaWJ1dGUubmFtZSwgeyBkZWZhdWx0OiBleHRlbnNpb25BdHRyaWJ1dGU/LmF0dHJpYnV0ZT8uZGVmYXVsdCB9XVxuICAgICAgICAgIH0pLFxuICAgICAgICApLFxuICAgICAgfSlcblxuICAgICAgY29uc3QgcGFyc2VIVE1MID0gY2FsbE9yUmV0dXJuKFxuICAgICAgICBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydwYXJzZUhUTUwnXT4oZXh0ZW5zaW9uLCAncGFyc2VIVE1MJywgY29udGV4dCksXG4gICAgICApXG5cbiAgICAgIGlmIChwYXJzZUhUTUwpIHtcbiAgICAgICAgc2NoZW1hLnBhcnNlRE9NID0gcGFyc2VIVE1MLm1hcChwYXJzZVJ1bGUgPT4gaW5qZWN0RXh0ZW5zaW9uQXR0cmlidXRlc1RvUGFyc2VSdWxlKHBhcnNlUnVsZSwgZXh0ZW5zaW9uQXR0cmlidXRlcykpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlbmRlckhUTUwgPSBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydyZW5kZXJIVE1MJ10+KFxuICAgICAgICBleHRlbnNpb24sXG4gICAgICAgICdyZW5kZXJIVE1MJyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgIClcblxuICAgICAgaWYgKHJlbmRlckhUTUwpIHtcbiAgICAgICAgc2NoZW1hLnRvRE9NID0gbm9kZSA9PiByZW5kZXJIVE1MKHtcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIEhUTUxBdHRyaWJ1dGVzOiBnZXRSZW5kZXJlZEF0dHJpYnV0ZXMobm9kZSwgZXh0ZW5zaW9uQXR0cmlidXRlcyksXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlbmRlclRleHQgPSBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydyZW5kZXJUZXh0J10+KFxuICAgICAgICBleHRlbnNpb24sXG4gICAgICAgICdyZW5kZXJUZXh0JyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgIClcblxuICAgICAgaWYgKHJlbmRlclRleHQpIHtcbiAgICAgICAgc2NoZW1hLnRvVGV4dCA9IHJlbmRlclRleHRcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtleHRlbnNpb24ubmFtZSwgc2NoZW1hXVxuICAgIH0pLFxuICApXG5cbiAgY29uc3QgbWFya3MgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgbWFya0V4dGVuc2lvbnMubWFwKGV4dGVuc2lvbiA9PiB7XG4gICAgICBjb25zdCBleHRlbnNpb25BdHRyaWJ1dGVzID0gYWxsQXR0cmlidXRlcy5maWx0ZXIoXG4gICAgICAgIGF0dHJpYnV0ZSA9PiBhdHRyaWJ1dGUudHlwZSA9PT0gZXh0ZW5zaW9uLm5hbWUsXG4gICAgICApXG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgICAgICBlZGl0b3IsXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV4dHJhTWFya0ZpZWxkcyA9IGV4dGVuc2lvbnMucmVkdWNlKChmaWVsZHMsIGUpID0+IHtcbiAgICAgICAgY29uc3QgZXh0ZW5kTWFya1NjaGVtYSA9IGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snZXh0ZW5kTWFya1NjaGVtYSddPihcbiAgICAgICAgICBlLFxuICAgICAgICAgICdleHRlbmRNYXJrU2NoZW1hJyxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5maWVsZHMsXG4gICAgICAgICAgLi4uKGV4dGVuZE1hcmtTY2hlbWEgPyBleHRlbmRNYXJrU2NoZW1hKGV4dGVuc2lvbikgOiB7fSksXG4gICAgICAgIH1cbiAgICAgIH0sIHt9KVxuXG4gICAgICBjb25zdCBzY2hlbWE6IE1hcmtTcGVjID0gY2xlYW5VcFNjaGVtYUl0ZW0oe1xuICAgICAgICAuLi5leHRyYU1hcmtGaWVsZHMsXG4gICAgICAgIGluY2x1c2l2ZTogY2FsbE9yUmV0dXJuKFxuICAgICAgICAgIGdldEV4dGVuc2lvbkZpZWxkPE1hcmtDb25maWdbJ2luY2x1c2l2ZSddPihleHRlbnNpb24sICdpbmNsdXNpdmUnLCBjb250ZXh0KSxcbiAgICAgICAgKSxcbiAgICAgICAgZXhjbHVkZXM6IGNhbGxPclJldHVybihcbiAgICAgICAgICBnZXRFeHRlbnNpb25GaWVsZDxNYXJrQ29uZmlnWydleGNsdWRlcyddPihleHRlbnNpb24sICdleGNsdWRlcycsIGNvbnRleHQpLFxuICAgICAgICApLFxuICAgICAgICBncm91cDogY2FsbE9yUmV0dXJuKGdldEV4dGVuc2lvbkZpZWxkPE1hcmtDb25maWdbJ2dyb3VwJ10+KGV4dGVuc2lvbiwgJ2dyb3VwJywgY29udGV4dCkpLFxuICAgICAgICBzcGFubmluZzogY2FsbE9yUmV0dXJuKFxuICAgICAgICAgIGdldEV4dGVuc2lvbkZpZWxkPE1hcmtDb25maWdbJ3NwYW5uaW5nJ10+KGV4dGVuc2lvbiwgJ3NwYW5uaW5nJywgY29udGV4dCksXG4gICAgICAgICksXG4gICAgICAgIGNvZGU6IGNhbGxPclJldHVybihnZXRFeHRlbnNpb25GaWVsZDxNYXJrQ29uZmlnWydjb2RlJ10+KGV4dGVuc2lvbiwgJ2NvZGUnLCBjb250ZXh0KSksXG4gICAgICAgIGF0dHJzOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgZXh0ZW5zaW9uQXR0cmlidXRlcy5tYXAoZXh0ZW5zaW9uQXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbZXh0ZW5zaW9uQXR0cmlidXRlLm5hbWUsIHsgZGVmYXVsdDogZXh0ZW5zaW9uQXR0cmlidXRlPy5hdHRyaWJ1dGU/LmRlZmF1bHQgfV1cbiAgICAgICAgICB9KSxcbiAgICAgICAgKSxcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHBhcnNlSFRNTCA9IGNhbGxPclJldHVybihcbiAgICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8TWFya0NvbmZpZ1sncGFyc2VIVE1MJ10+KGV4dGVuc2lvbiwgJ3BhcnNlSFRNTCcsIGNvbnRleHQpLFxuICAgICAgKVxuXG4gICAgICBpZiAocGFyc2VIVE1MKSB7XG4gICAgICAgIHNjaGVtYS5wYXJzZURPTSA9IHBhcnNlSFRNTC5tYXAocGFyc2VSdWxlID0+IGluamVjdEV4dGVuc2lvbkF0dHJpYnV0ZXNUb1BhcnNlUnVsZShwYXJzZVJ1bGUsIGV4dGVuc2lvbkF0dHJpYnV0ZXMpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZW5kZXJIVE1MID0gZ2V0RXh0ZW5zaW9uRmllbGQ8TWFya0NvbmZpZ1sncmVuZGVySFRNTCddPihcbiAgICAgICAgZXh0ZW5zaW9uLFxuICAgICAgICAncmVuZGVySFRNTCcsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICApXG5cbiAgICAgIGlmIChyZW5kZXJIVE1MKSB7XG4gICAgICAgIHNjaGVtYS50b0RPTSA9IG1hcmsgPT4gcmVuZGVySFRNTCh7XG4gICAgICAgICAgbWFyayxcbiAgICAgICAgICBIVE1MQXR0cmlidXRlczogZ2V0UmVuZGVyZWRBdHRyaWJ1dGVzKG1hcmssIGV4dGVuc2lvbkF0dHJpYnV0ZXMpLFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW2V4dGVuc2lvbi5uYW1lLCBzY2hlbWFdXG4gICAgfSksXG4gIClcblxuICByZXR1cm4gbmV3IFNjaGVtYSh7XG4gICAgdG9wTm9kZSxcbiAgICBub2RlcyxcbiAgICBtYXJrcyxcbiAgfSlcbn1cbiIsImltcG9ydCB7IE1hcmtUeXBlLCBOb2RlVHlwZSwgU2NoZW1hIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaGVtYVR5cGVCeU5hbWUobmFtZTogc3RyaW5nLCBzY2hlbWE6IFNjaGVtYSk6IE5vZGVUeXBlIHwgTWFya1R5cGUgfCBudWxsIHtcbiAgcmV0dXJuIHNjaGVtYS5ub2Rlc1tuYW1lXSB8fCBzY2hlbWEubWFya3NbbmFtZV0gfHwgbnVsbFxufVxuIiwiaW1wb3J0IHsgQW55RXh0ZW5zaW9uLCBFbmFibGVSdWxlcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlbnNpb25SdWxlc0VuYWJsZWQoZXh0ZW5zaW9uOiBBbnlFeHRlbnNpb24sIGVuYWJsZWQ6IEVuYWJsZVJ1bGVzKTogYm9vbGVhbiB7XG4gIGlmIChBcnJheS5pc0FycmF5KGVuYWJsZWQpKSB7XG4gICAgcmV0dXJuIGVuYWJsZWQuc29tZShlbmFibGVkRXh0ZW5zaW9uID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSB0eXBlb2YgZW5hYmxlZEV4dGVuc2lvbiA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBlbmFibGVkRXh0ZW5zaW9uXG4gICAgICAgIDogZW5hYmxlZEV4dGVuc2lvbi5uYW1lXG5cbiAgICAgIHJldHVybiBuYW1lID09PSBleHRlbnNpb24ubmFtZVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gZW5hYmxlZFxufVxuIiwiaW1wb3J0IHsgUmVzb2x2ZWRQb3MgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5leHBvcnQgY29uc3QgZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMgPSAoJGZyb206IFJlc29sdmVkUG9zLCBtYXhNYXRjaCA9IDUwMCkgPT4ge1xuICBsZXQgdGV4dEJlZm9yZSA9ICcnXG5cbiAgY29uc3Qgc2xpY2VFbmRQb3MgPSAkZnJvbS5wYXJlbnRPZmZzZXRcblxuICAkZnJvbS5wYXJlbnQubm9kZXNCZXR3ZWVuKFxuICAgIE1hdGgubWF4KDAsIHNsaWNlRW5kUG9zIC0gbWF4TWF0Y2gpLFxuICAgIHNsaWNlRW5kUG9zLFxuICAgIChub2RlLCBwb3MsIHBhcmVudCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNodW5rID0gbm9kZS50eXBlLnNwZWMudG9UZXh0Py4oe1xuICAgICAgICBub2RlLFxuICAgICAgICBwb3MsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgaW5kZXgsXG4gICAgICB9KVxuICAgICAgICB8fCBub2RlLnRleHRDb250ZW50XG4gICAgICAgIHx8ICclbGVhZiUnXG5cbiAgICAgIHRleHRCZWZvcmUgKz0gY2h1bmsuc2xpY2UoMCwgTWF0aC5tYXgoMCwgc2xpY2VFbmRQb3MgLSBwb3MpKVxuICAgIH0sXG4gIClcblxuICByZXR1cm4gdGV4dEJlZm9yZVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzUmVnRXhwKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZWdFeHAge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSdcbn1cbiIsImltcG9ydCB7IEVkaXRvclN0YXRlLCBQbHVnaW4sIFRleHRTZWxlY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4vQ29tbWFuZE1hbmFnZXIuanMnXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL0VkaXRvci5qcydcbmltcG9ydCB7IGNyZWF0ZUNoYWluYWJsZVN0YXRlIH0gZnJvbSAnLi9oZWxwZXJzL2NyZWF0ZUNoYWluYWJsZVN0YXRlLmpzJ1xuaW1wb3J0IHsgZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMgfSBmcm9tICcuL2hlbHBlcnMvZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMuanMnXG5pbXBvcnQge1xuICBDYW5Db21tYW5kcyxcbiAgQ2hhaW5lZENvbW1hbmRzLFxuICBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXksXG4gIFJhbmdlLFxuICBTaW5nbGVDb21tYW5kcyxcbn0gZnJvbSAnLi90eXBlcy5qcydcbmltcG9ydCB7IGlzUmVnRXhwIH0gZnJvbSAnLi91dGlsaXRpZXMvaXNSZWdFeHAuanMnXG5cbmV4cG9ydCB0eXBlIElucHV0UnVsZU1hdGNoID0ge1xuICBpbmRleDogbnVtYmVyXG4gIHRleHQ6IHN0cmluZ1xuICByZXBsYWNlV2l0aD86IHN0cmluZ1xuICBtYXRjaD86IFJlZ0V4cE1hdGNoQXJyYXlcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuZXhwb3J0IHR5cGUgSW5wdXRSdWxlRmluZGVyID0gUmVnRXhwIHwgKCh0ZXh0OiBzdHJpbmcpID0+IElucHV0UnVsZU1hdGNoIHwgbnVsbClcblxuZXhwb3J0IGNsYXNzIElucHV0UnVsZSB7XG4gIGZpbmQ6IElucHV0UnVsZUZpbmRlclxuXG4gIGhhbmRsZXI6IChwcm9wczoge1xuICAgIHN0YXRlOiBFZGl0b3JTdGF0ZVxuICAgIHJhbmdlOiBSYW5nZVxuICAgIG1hdGNoOiBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXlcbiAgICBjb21tYW5kczogU2luZ2xlQ29tbWFuZHNcbiAgICBjaGFpbjogKCkgPT4gQ2hhaW5lZENvbW1hbmRzXG4gICAgY2FuOiAoKSA9PiBDYW5Db21tYW5kc1xuICB9KSA9PiB2b2lkIHwgbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzoge1xuICAgIGZpbmQ6IElucHV0UnVsZUZpbmRlclxuICAgIGhhbmRsZXI6IChwcm9wczoge1xuICAgICAgc3RhdGU6IEVkaXRvclN0YXRlXG4gICAgICByYW5nZTogUmFuZ2VcbiAgICAgIG1hdGNoOiBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXlcbiAgICAgIGNvbW1hbmRzOiBTaW5nbGVDb21tYW5kc1xuICAgICAgY2hhaW46ICgpID0+IENoYWluZWRDb21tYW5kc1xuICAgICAgY2FuOiAoKSA9PiBDYW5Db21tYW5kc1xuICAgIH0pID0+IHZvaWQgfCBudWxsXG4gIH0pIHtcbiAgICB0aGlzLmZpbmQgPSBjb25maWcuZmluZFxuICAgIHRoaXMuaGFuZGxlciA9IGNvbmZpZy5oYW5kbGVyXG4gIH1cbn1cblxuY29uc3QgaW5wdXRSdWxlTWF0Y2hlckhhbmRsZXIgPSAoXG4gIHRleHQ6IHN0cmluZyxcbiAgZmluZDogSW5wdXRSdWxlRmluZGVyLFxuKTogRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9PiB7XG4gIGlmIChpc1JlZ0V4cChmaW5kKSkge1xuICAgIHJldHVybiBmaW5kLmV4ZWModGV4dClcbiAgfVxuXG4gIGNvbnN0IGlucHV0UnVsZU1hdGNoID0gZmluZCh0ZXh0KVxuXG4gIGlmICghaW5wdXRSdWxlTWF0Y2gpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgY29uc3QgcmVzdWx0OiBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXkgPSBbaW5wdXRSdWxlTWF0Y2gudGV4dF1cblxuICByZXN1bHQuaW5kZXggPSBpbnB1dFJ1bGVNYXRjaC5pbmRleFxuICByZXN1bHQuaW5wdXQgPSB0ZXh0XG4gIHJlc3VsdC5kYXRhID0gaW5wdXRSdWxlTWF0Y2guZGF0YVxuXG4gIGlmIChpbnB1dFJ1bGVNYXRjaC5yZXBsYWNlV2l0aCkge1xuICAgIGlmICghaW5wdXRSdWxlTWF0Y2gudGV4dC5pbmNsdWRlcyhpbnB1dFJ1bGVNYXRjaC5yZXBsYWNlV2l0aCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1t0aXB0YXAgd2Fybl06IFwiaW5wdXRSdWxlTWF0Y2gucmVwbGFjZVdpdGhcIiBtdXN0IGJlIHBhcnQgb2YgXCJpbnB1dFJ1bGVNYXRjaC50ZXh0XCIuJyxcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXN1bHQucHVzaChpbnB1dFJ1bGVNYXRjaC5yZXBsYWNlV2l0aClcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuZnVuY3Rpb24gcnVuKGNvbmZpZzoge1xuICBlZGl0b3I6IEVkaXRvclxuICBmcm9tOiBudW1iZXJcbiAgdG86IG51bWJlclxuICB0ZXh0OiBzdHJpbmdcbiAgcnVsZXM6IElucHV0UnVsZVtdXG4gIHBsdWdpbjogUGx1Z2luXG59KTogYm9vbGVhbiB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3IsIGZyb20sIHRvLCB0ZXh0LCBydWxlcywgcGx1Z2luLFxuICB9ID0gY29uZmlnXG4gIGNvbnN0IHsgdmlldyB9ID0gZWRpdG9yXG5cbiAgaWYgKHZpZXcuY29tcG9zaW5nKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCAkZnJvbSA9IHZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZnJvbSlcblxuICBpZiAoXG4gICAgLy8gY2hlY2sgZm9yIGNvZGUgbm9kZVxuICAgICRmcm9tLnBhcmVudC50eXBlLnNwZWMuY29kZVxuICAgIC8vIGNoZWNrIGZvciBjb2RlIG1hcmtcbiAgICB8fCAhISgkZnJvbS5ub2RlQmVmb3JlIHx8ICRmcm9tLm5vZGVBZnRlcik/Lm1hcmtzLmZpbmQobWFyayA9PiBtYXJrLnR5cGUuc3BlYy5jb2RlKVxuICApIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGxldCBtYXRjaGVkID0gZmFsc2VcblxuICBjb25zdCB0ZXh0QmVmb3JlID0gZ2V0VGV4dENvbnRlbnRGcm9tTm9kZXMoJGZyb20pICsgdGV4dFxuXG4gIHJ1bGVzLmZvckVhY2gocnVsZSA9PiB7XG4gICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gaW5wdXRSdWxlTWF0Y2hlckhhbmRsZXIodGV4dEJlZm9yZSwgcnVsZS5maW5kKVxuXG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgdHIgPSB2aWV3LnN0YXRlLnRyXG4gICAgY29uc3Qgc3RhdGUgPSBjcmVhdGVDaGFpbmFibGVTdGF0ZSh7XG4gICAgICBzdGF0ZTogdmlldy5zdGF0ZSxcbiAgICAgIHRyYW5zYWN0aW9uOiB0cixcbiAgICB9KVxuICAgIGNvbnN0IHJhbmdlID0ge1xuICAgICAgZnJvbTogZnJvbSAtIChtYXRjaFswXS5sZW5ndGggLSB0ZXh0Lmxlbmd0aCksXG4gICAgICB0byxcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbW1hbmRzLCBjaGFpbiwgY2FuIH0gPSBuZXcgQ29tbWFuZE1hbmFnZXIoe1xuICAgICAgZWRpdG9yLFxuICAgICAgc3RhdGUsXG4gICAgfSlcblxuICAgIGNvbnN0IGhhbmRsZXIgPSBydWxlLmhhbmRsZXIoe1xuICAgICAgc3RhdGUsXG4gICAgICByYW5nZSxcbiAgICAgIG1hdGNoLFxuICAgICAgY29tbWFuZHMsXG4gICAgICBjaGFpbixcbiAgICAgIGNhbixcbiAgICB9KVxuXG4gICAgLy8gc3RvcCBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlc1xuICAgIGlmIChoYW5kbGVyID09PSBudWxsIHx8ICF0ci5zdGVwcy5sZW5ndGgpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIHN0b3JlIHRyYW5zZm9ybSBhcyBtZXRhIGRhdGFcbiAgICAvLyBzbyB3ZSBjYW4gdW5kbyBpbnB1dCBydWxlcyB3aXRoaW4gdGhlIGB1bmRvSW5wdXRSdWxlc2AgY29tbWFuZFxuICAgIHRyLnNldE1ldGEocGx1Z2luLCB7XG4gICAgICB0cmFuc2Zvcm06IHRyLFxuICAgICAgZnJvbSxcbiAgICAgIHRvLFxuICAgICAgdGV4dCxcbiAgICB9KVxuXG4gICAgdmlldy5kaXNwYXRjaCh0cilcbiAgICBtYXRjaGVkID0gdHJ1ZVxuICB9KVxuXG4gIHJldHVybiBtYXRjaGVkXG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIGlucHV0IHJ1bGVzIHBsdWdpbi4gV2hlbiBlbmFibGVkLCBpdCB3aWxsIGNhdXNlIHRleHRcbiAqIGlucHV0IHRoYXQgbWF0Y2hlcyBhbnkgb2YgdGhlIGdpdmVuIHJ1bGVzIHRvIHRyaWdnZXIgdGhlIHJ1bGXigJlzXG4gKiBhY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnB1dFJ1bGVzUGx1Z2luKHByb3BzOiB7IGVkaXRvcjogRWRpdG9yOyBydWxlczogSW5wdXRSdWxlW10gfSk6IFBsdWdpbiB7XG4gIGNvbnN0IHsgZWRpdG9yLCBydWxlcyB9ID0gcHJvcHNcbiAgY29uc3QgcGx1Z2luID0gbmV3IFBsdWdpbih7XG4gICAgc3RhdGU6IHtcbiAgICAgIGluaXQoKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwbHkodHIsIHByZXYpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVkID0gdHIuZ2V0TWV0YShwbHVnaW4pXG5cbiAgICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICAgIHJldHVybiBzdG9yZWRcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ci5zZWxlY3Rpb25TZXQgfHwgdHIuZG9jQ2hhbmdlZCA/IG51bGwgOiBwcmV2XG4gICAgICB9LFxuICAgIH0sXG5cbiAgICBwcm9wczoge1xuICAgICAgaGFuZGxlVGV4dElucHV0KHZpZXcsIGZyb20sIHRvLCB0ZXh0KSB7XG4gICAgICAgIHJldHVybiBydW4oe1xuICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICBmcm9tLFxuICAgICAgICAgIHRvLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcnVsZXMsXG4gICAgICAgICAgcGx1Z2luLFxuICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgaGFuZGxlRE9NRXZlbnRzOiB7XG4gICAgICAgIGNvbXBvc2l0aW9uZW5kOiB2aWV3ID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgJGN1cnNvciB9ID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24gYXMgVGV4dFNlbGVjdGlvblxuXG4gICAgICAgICAgICBpZiAoJGN1cnNvcikge1xuICAgICAgICAgICAgICBydW4oe1xuICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICBmcm9tOiAkY3Vyc29yLnBvcyxcbiAgICAgICAgICAgICAgICB0bzogJGN1cnNvci5wb3MsXG4gICAgICAgICAgICAgICAgdGV4dDogJycsXG4gICAgICAgICAgICAgICAgcnVsZXMsXG4gICAgICAgICAgICAgICAgcGx1Z2luLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIC8vIGFkZCBzdXBwb3J0IGZvciBpbnB1dCBydWxlcyB0byB0cmlnZ2VyIG9uIGVudGVyXG4gICAgICAvLyB0aGlzIGlzIHVzZWZ1bCBmb3IgZXhhbXBsZSBmb3IgY29kZSBibG9ja3NcbiAgICAgIGhhbmRsZUtleURvd24odmlldywgZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleSAhPT0gJ0VudGVyJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyAkY3Vyc29yIH0gPSB2aWV3LnN0YXRlLnNlbGVjdGlvbiBhcyBUZXh0U2VsZWN0aW9uXG5cbiAgICAgICAgaWYgKCRjdXJzb3IpIHtcbiAgICAgICAgICByZXR1cm4gcnVuKHtcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIGZyb206ICRjdXJzb3IucG9zLFxuICAgICAgICAgICAgdG86ICRjdXJzb3IucG9zLFxuICAgICAgICAgICAgdGV4dDogJ1xcbicsXG4gICAgICAgICAgICBydWxlcyxcbiAgICAgICAgICAgIHBsdWdpbixcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9LFxuICAgIH0sXG5cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaXNJbnB1dFJ1bGVzOiB0cnVlLFxuICB9KSBhcyBQbHVnaW5cblxuICByZXR1cm4gcGx1Z2luXG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsdWU6IGFueSk6IHZhbHVlIGlzIG51bWJlciB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInXG59XG4iLCJpbXBvcnQgeyBFZGl0b3JTdGF0ZSwgUGx1Z2luIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuL0NvbW1hbmRNYW5hZ2VyLmpzJ1xuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi9FZGl0b3IuanMnXG5pbXBvcnQgeyBjcmVhdGVDaGFpbmFibGVTdGF0ZSB9IGZyb20gJy4vaGVscGVycy9jcmVhdGVDaGFpbmFibGVTdGF0ZS5qcydcbmltcG9ydCB7XG4gIENhbkNvbW1hbmRzLFxuICBDaGFpbmVkQ29tbWFuZHMsXG4gIEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheSxcbiAgUmFuZ2UsXG4gIFNpbmdsZUNvbW1hbmRzLFxufSBmcm9tICcuL3R5cGVzLmpzJ1xuaW1wb3J0IHsgaXNOdW1iZXIgfSBmcm9tICcuL3V0aWxpdGllcy9pc051bWJlci5qcydcbmltcG9ydCB7IGlzUmVnRXhwIH0gZnJvbSAnLi91dGlsaXRpZXMvaXNSZWdFeHAuanMnXG5cbmV4cG9ydCB0eXBlIFBhc3RlUnVsZU1hdGNoID0ge1xuICBpbmRleDogbnVtYmVyXG4gIHRleHQ6IHN0cmluZ1xuICByZXBsYWNlV2l0aD86IHN0cmluZ1xuICBtYXRjaD86IFJlZ0V4cE1hdGNoQXJyYXlcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuZXhwb3J0IHR5cGUgUGFzdGVSdWxlRmluZGVyID0gUmVnRXhwIHwgKCh0ZXh0OiBzdHJpbmcsIGV2ZW50PzogQ2xpcGJvYXJkRXZlbnQpID0+IFBhc3RlUnVsZU1hdGNoW10gfCBudWxsIHwgdW5kZWZpbmVkKVxuXG5leHBvcnQgY2xhc3MgUGFzdGVSdWxlIHtcbiAgZmluZDogUGFzdGVSdWxlRmluZGVyXG5cbiAgaGFuZGxlcjogKHByb3BzOiB7XG4gICAgc3RhdGU6IEVkaXRvclN0YXRlXG4gICAgcmFuZ2U6IFJhbmdlXG4gICAgbWF0Y2g6IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheVxuICAgIGNvbW1hbmRzOiBTaW5nbGVDb21tYW5kc1xuICAgIGNoYWluOiAoKSA9PiBDaGFpbmVkQ29tbWFuZHNcbiAgICBjYW46ICgpID0+IENhbkNvbW1hbmRzXG4gICAgcGFzdGVFdmVudDogQ2xpcGJvYXJkRXZlbnRcbiAgICBkcm9wRXZlbnQ6IERyYWdFdmVudFxuICB9KSA9PiB2b2lkIHwgbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzoge1xuICAgIGZpbmQ6IFBhc3RlUnVsZUZpbmRlclxuICAgIGhhbmRsZXI6IChwcm9wczoge1xuICAgICAgY2FuOiAoKSA9PiBDYW5Db21tYW5kc1xuICAgICAgY2hhaW46ICgpID0+IENoYWluZWRDb21tYW5kc1xuICAgICAgY29tbWFuZHM6IFNpbmdsZUNvbW1hbmRzXG4gICAgICBkcm9wRXZlbnQ6IERyYWdFdmVudFxuICAgICAgbWF0Y2g6IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheVxuICAgICAgcGFzdGVFdmVudDogQ2xpcGJvYXJkRXZlbnRcbiAgICAgIHJhbmdlOiBSYW5nZVxuICAgICAgc3RhdGU6IEVkaXRvclN0YXRlXG4gICAgfSkgPT4gdm9pZCB8IG51bGxcbiAgfSkge1xuICAgIHRoaXMuZmluZCA9IGNvbmZpZy5maW5kXG4gICAgdGhpcy5oYW5kbGVyID0gY29uZmlnLmhhbmRsZXJcbiAgfVxufVxuXG5jb25zdCBwYXN0ZVJ1bGVNYXRjaGVySGFuZGxlciA9IChcbiAgdGV4dDogc3RyaW5nLFxuICBmaW5kOiBQYXN0ZVJ1bGVGaW5kZXIsXG4gIGV2ZW50PzogQ2xpcGJvYXJkRXZlbnQsXG4pOiBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXlbXSA9PiB7XG4gIGlmIChpc1JlZ0V4cChmaW5kKSkge1xuICAgIHJldHVybiBbLi4udGV4dC5tYXRjaEFsbChmaW5kKV1cbiAgfVxuXG4gIGNvbnN0IG1hdGNoZXMgPSBmaW5kKHRleHQsIGV2ZW50KVxuXG4gIGlmICghbWF0Y2hlcykge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgcmV0dXJuIG1hdGNoZXMubWFwKHBhc3RlUnVsZU1hdGNoID0+IHtcbiAgICBjb25zdCByZXN1bHQ6IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheSA9IFtwYXN0ZVJ1bGVNYXRjaC50ZXh0XVxuXG4gICAgcmVzdWx0LmluZGV4ID0gcGFzdGVSdWxlTWF0Y2guaW5kZXhcbiAgICByZXN1bHQuaW5wdXQgPSB0ZXh0XG4gICAgcmVzdWx0LmRhdGEgPSBwYXN0ZVJ1bGVNYXRjaC5kYXRhXG5cbiAgICBpZiAocGFzdGVSdWxlTWF0Y2gucmVwbGFjZVdpdGgpIHtcbiAgICAgIGlmICghcGFzdGVSdWxlTWF0Y2gudGV4dC5pbmNsdWRlcyhwYXN0ZVJ1bGVNYXRjaC5yZXBsYWNlV2l0aCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdbdGlwdGFwIHdhcm5dOiBcInBhc3RlUnVsZU1hdGNoLnJlcGxhY2VXaXRoXCIgbXVzdCBiZSBwYXJ0IG9mIFwicGFzdGVSdWxlTWF0Y2gudGV4dFwiLicsXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmVzdWx0LnB1c2gocGFzdGVSdWxlTWF0Y2gucmVwbGFjZVdpdGgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9KVxufVxuXG5mdW5jdGlvbiBydW4oY29uZmlnOiB7XG4gIGVkaXRvcjogRWRpdG9yXG4gIHN0YXRlOiBFZGl0b3JTdGF0ZVxuICBmcm9tOiBudW1iZXJcbiAgdG86IG51bWJlclxuICBydWxlOiBQYXN0ZVJ1bGVcbiAgcGFzdGVFdmVudDogQ2xpcGJvYXJkRXZlbnRcbiAgZHJvcEV2ZW50OiBEcmFnRXZlbnRcbn0pOiBib29sZWFuIHtcbiAgY29uc3Qge1xuICAgIGVkaXRvciwgc3RhdGUsIGZyb20sIHRvLCBydWxlLCBwYXN0ZUV2ZW50LCBkcm9wRXZlbnQsXG4gIH0gPSBjb25maWdcblxuICBjb25zdCB7IGNvbW1hbmRzLCBjaGFpbiwgY2FuIH0gPSBuZXcgQ29tbWFuZE1hbmFnZXIoe1xuICAgIGVkaXRvcixcbiAgICBzdGF0ZSxcbiAgfSlcblxuICBjb25zdCBoYW5kbGVyczogKHZvaWQgfCBudWxsKVtdID0gW11cblxuICBzdGF0ZS5kb2Mubm9kZXNCZXR3ZWVuKGZyb20sIHRvLCAobm9kZSwgcG9zKSA9PiB7XG4gICAgaWYgKCFub2RlLmlzVGV4dGJsb2NrIHx8IG5vZGUudHlwZS5zcGVjLmNvZGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlc29sdmVkRnJvbSA9IE1hdGgubWF4KGZyb20sIHBvcylcbiAgICBjb25zdCByZXNvbHZlZFRvID0gTWF0aC5taW4odG8sIHBvcyArIG5vZGUuY29udGVudC5zaXplKVxuICAgIGNvbnN0IHRleHRUb01hdGNoID0gbm9kZS50ZXh0QmV0d2VlbihyZXNvbHZlZEZyb20gLSBwb3MsIHJlc29sdmVkVG8gLSBwb3MsIHVuZGVmaW5lZCwgJ1xcdWZmZmMnKVxuXG4gICAgY29uc3QgbWF0Y2hlcyA9IHBhc3RlUnVsZU1hdGNoZXJIYW5kbGVyKHRleHRUb01hdGNoLCBydWxlLmZpbmQsIHBhc3RlRXZlbnQpXG5cbiAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xuICAgICAgaWYgKG1hdGNoLmluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXJ0ID0gcmVzb2x2ZWRGcm9tICsgbWF0Y2guaW5kZXggKyAxXG4gICAgICBjb25zdCBlbmQgPSBzdGFydCArIG1hdGNoWzBdLmxlbmd0aFxuICAgICAgY29uc3QgcmFuZ2UgPSB7XG4gICAgICAgIGZyb206IHN0YXRlLnRyLm1hcHBpbmcubWFwKHN0YXJ0KSxcbiAgICAgICAgdG86IHN0YXRlLnRyLm1hcHBpbmcubWFwKGVuZCksXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGhhbmRsZXIgPSBydWxlLmhhbmRsZXIoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmFuZ2UsXG4gICAgICAgIG1hdGNoLFxuICAgICAgICBjb21tYW5kcyxcbiAgICAgICAgY2hhaW4sXG4gICAgICAgIGNhbixcbiAgICAgICAgcGFzdGVFdmVudCxcbiAgICAgICAgZHJvcEV2ZW50LFxuICAgICAgfSlcblxuICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3Qgc3VjY2VzcyA9IGhhbmRsZXJzLmV2ZXJ5KGhhbmRsZXIgPT4gaGFuZGxlciAhPT0gbnVsbClcblxuICByZXR1cm4gc3VjY2Vzc1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBwYXN0ZSBydWxlcyBwbHVnaW4uIFdoZW4gZW5hYmxlZCwgaXQgd2lsbCBjYXVzZSBwYXN0ZWRcbiAqIHRleHQgdGhhdCBtYXRjaGVzIGFueSBvZiB0aGUgZ2l2ZW4gcnVsZXMgdG8gdHJpZ2dlciB0aGUgcnVsZeKAmXNcbiAqIGFjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhc3RlUnVsZXNQbHVnaW4ocHJvcHM6IHsgZWRpdG9yOiBFZGl0b3I7IHJ1bGVzOiBQYXN0ZVJ1bGVbXSB9KTogUGx1Z2luW10ge1xuICBjb25zdCB7IGVkaXRvciwgcnVsZXMgfSA9IHByb3BzXG4gIGxldCBkcmFnU291cmNlRWxlbWVudDogRWxlbWVudCB8IG51bGwgPSBudWxsXG4gIGxldCBpc1Bhc3RlZEZyb21Qcm9zZU1pcnJvciA9IGZhbHNlXG4gIGxldCBpc0Ryb3BwZWRGcm9tUHJvc2VNaXJyb3IgPSBmYWxzZVxuICBsZXQgcGFzdGVFdmVudCA9IG5ldyBDbGlwYm9hcmRFdmVudCgncGFzdGUnKVxuICBsZXQgZHJvcEV2ZW50ID0gbmV3IERyYWdFdmVudCgnZHJvcCcpXG5cbiAgY29uc3QgcGx1Z2lucyA9IHJ1bGVzLm1hcChydWxlID0+IHtcbiAgICByZXR1cm4gbmV3IFBsdWdpbih7XG4gICAgICAvLyB3ZSByZWdpc3RlciBhIGdsb2JhbCBkcmFnIGhhbmRsZXIgdG8gdHJhY2sgdGhlIGN1cnJlbnQgZHJhZyBzb3VyY2UgZWxlbWVudFxuICAgICAgdmlldyh2aWV3KSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZURyYWdzdGFydCA9IChldmVudDogRHJhZ0V2ZW50KSA9PiB7XG4gICAgICAgICAgZHJhZ1NvdXJjZUVsZW1lbnQgPSB2aWV3LmRvbS5wYXJlbnRFbGVtZW50Py5jb250YWlucyhldmVudC50YXJnZXQgYXMgRWxlbWVudClcbiAgICAgICAgICAgID8gdmlldy5kb20ucGFyZW50RWxlbWVudFxuICAgICAgICAgICAgOiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ3N0YXJ0KVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBoYW5kbGVEcmFnc3RhcnQpXG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgaGFuZGxlRE9NRXZlbnRzOiB7XG4gICAgICAgICAgZHJvcDogKHZpZXcsIGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgaXNEcm9wcGVkRnJvbVByb3NlTWlycm9yID0gZHJhZ1NvdXJjZUVsZW1lbnQgPT09IHZpZXcuZG9tLnBhcmVudEVsZW1lbnRcbiAgICAgICAgICAgIGRyb3BFdmVudCA9IGV2ZW50IGFzIERyYWdFdmVudFxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgcGFzdGU6IChfdmlldywgZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBodG1sID0gKGV2ZW50IGFzIENsaXBib2FyZEV2ZW50KS5jbGlwYm9hcmREYXRhPy5nZXREYXRhKCd0ZXh0L2h0bWwnKVxuXG4gICAgICAgICAgICBwYXN0ZUV2ZW50ID0gZXZlbnQgYXMgQ2xpcGJvYXJkRXZlbnRcblxuICAgICAgICAgICAgaXNQYXN0ZWRGcm9tUHJvc2VNaXJyb3IgPSAhIWh0bWw/LmluY2x1ZGVzKCdkYXRhLXBtLXNsaWNlJylcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIGFwcGVuZFRyYW5zYWN0aW9uOiAodHJhbnNhY3Rpb25zLCBvbGRTdGF0ZSwgc3RhdGUpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbnNbMF1cbiAgICAgICAgY29uc3QgaXNQYXN0ZSA9IHRyYW5zYWN0aW9uLmdldE1ldGEoJ3VpRXZlbnQnKSA9PT0gJ3Bhc3RlJyAmJiAhaXNQYXN0ZWRGcm9tUHJvc2VNaXJyb3JcbiAgICAgICAgY29uc3QgaXNEcm9wID0gdHJhbnNhY3Rpb24uZ2V0TWV0YSgndWlFdmVudCcpID09PSAnZHJvcCcgJiYgIWlzRHJvcHBlZEZyb21Qcm9zZU1pcnJvclxuXG4gICAgICAgIGlmICghaXNQYXN0ZSAmJiAhaXNEcm9wKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBzdG9wIGlmIHRoZXJlIGlzIG5vIGNoYW5nZWQgcmFuZ2VcbiAgICAgICAgY29uc3QgZnJvbSA9IG9sZFN0YXRlLmRvYy5jb250ZW50LmZpbmREaWZmU3RhcnQoc3RhdGUuZG9jLmNvbnRlbnQpXG4gICAgICAgIGNvbnN0IHRvID0gb2xkU3RhdGUuZG9jLmNvbnRlbnQuZmluZERpZmZFbmQoc3RhdGUuZG9jLmNvbnRlbnQpXG5cbiAgICAgICAgaWYgKCFpc051bWJlcihmcm9tKSB8fCAhdG8gfHwgZnJvbSA9PT0gdG8uYikge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gYnVpbGQgYSBjaGFpbmFibGUgc3RhdGVcbiAgICAgICAgLy8gc28gd2UgY2FuIHVzZSBhIHNpbmdsZSB0cmFuc2FjdGlvbiBmb3IgYWxsIHBhc3RlIHJ1bGVzXG4gICAgICAgIGNvbnN0IHRyID0gc3RhdGUudHJcbiAgICAgICAgY29uc3QgY2hhaW5hYmxlU3RhdGUgPSBjcmVhdGVDaGFpbmFibGVTdGF0ZSh7XG4gICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgdHJhbnNhY3Rpb246IHRyLFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSBydW4oe1xuICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICBzdGF0ZTogY2hhaW5hYmxlU3RhdGUsXG4gICAgICAgICAgZnJvbTogTWF0aC5tYXgoZnJvbSAtIDEsIDApLFxuICAgICAgICAgIHRvOiB0by5iIC0gMSxcbiAgICAgICAgICBydWxlLFxuICAgICAgICAgIHBhc3RlRXZlbnQsXG4gICAgICAgICAgZHJvcEV2ZW50LFxuICAgICAgICB9KVxuXG4gICAgICAgIC8vIHN0b3AgaWYgdGhlcmUgYXJlIG5vIGNoYW5nZXNcbiAgICAgICAgaWYgKCFoYW5kbGVyIHx8ICF0ci5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGRyb3BFdmVudCA9IG5ldyBEcmFnRXZlbnQoJ2Ryb3AnKVxuICAgICAgICBwYXN0ZUV2ZW50ID0gbmV3IENsaXBib2FyZEV2ZW50KCdwYXN0ZScpXG5cbiAgICAgICAgcmV0dXJuIHRyXG4gICAgICB9LFxuICAgIH0pXG4gIH0pXG5cbiAgcmV0dXJuIHBsdWdpbnNcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBmaW5kRHVwbGljYXRlcyhpdGVtczogYW55W10pOiBhbnlbXSB7XG4gIGNvbnN0IGZpbHRlcmVkID0gaXRlbXMuZmlsdGVyKChlbCwgaW5kZXgpID0+IGl0ZW1zLmluZGV4T2YoZWwpICE9PSBpbmRleClcblxuICByZXR1cm4gWy4uLm5ldyBTZXQoZmlsdGVyZWQpXVxufVxuIiwiaW1wb3J0IHsga2V5bWFwIH0gZnJvbSAnQHRpcHRhcC9wbS9rZXltYXAnXG5pbXBvcnQgeyBOb2RlIGFzIFByb3NlbWlycm9yTm9kZSwgU2NoZW1hIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5pbXBvcnQgeyBEZWNvcmF0aW9uLCBFZGl0b3JWaWV3IH0gZnJvbSAnQHRpcHRhcC9wbS92aWV3J1xuXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL0VkaXRvci5qcydcbmltcG9ydCB7IGdldEF0dHJpYnV0ZXNGcm9tRXh0ZW5zaW9ucyB9IGZyb20gJy4vaGVscGVycy9nZXRBdHRyaWJ1dGVzRnJvbUV4dGVuc2lvbnMuanMnXG5pbXBvcnQgeyBnZXRFeHRlbnNpb25GaWVsZCB9IGZyb20gJy4vaGVscGVycy9nZXRFeHRlbnNpb25GaWVsZC5qcydcbmltcG9ydCB7IGdldE5vZGVUeXBlIH0gZnJvbSAnLi9oZWxwZXJzL2dldE5vZGVUeXBlLmpzJ1xuaW1wb3J0IHsgZ2V0UmVuZGVyZWRBdHRyaWJ1dGVzIH0gZnJvbSAnLi9oZWxwZXJzL2dldFJlbmRlcmVkQXR0cmlidXRlcy5qcydcbmltcG9ydCB7IGdldFNjaGVtYUJ5UmVzb2x2ZWRFeHRlbnNpb25zIH0gZnJvbSAnLi9oZWxwZXJzL2dldFNjaGVtYUJ5UmVzb2x2ZWRFeHRlbnNpb25zLmpzJ1xuaW1wb3J0IHsgZ2V0U2NoZW1hVHlwZUJ5TmFtZSB9IGZyb20gJy4vaGVscGVycy9nZXRTY2hlbWFUeXBlQnlOYW1lLmpzJ1xuaW1wb3J0IHsgaXNFeHRlbnNpb25SdWxlc0VuYWJsZWQgfSBmcm9tICcuL2hlbHBlcnMvaXNFeHRlbnNpb25SdWxlc0VuYWJsZWQuanMnXG5pbXBvcnQgeyBzcGxpdEV4dGVuc2lvbnMgfSBmcm9tICcuL2hlbHBlcnMvc3BsaXRFeHRlbnNpb25zLmpzJ1xuaW1wb3J0IHsgTWFyaywgTm9kZUNvbmZpZyB9IGZyb20gJy4vaW5kZXguanMnXG5pbXBvcnQgeyBpbnB1dFJ1bGVzUGx1Z2luIH0gZnJvbSAnLi9JbnB1dFJ1bGUuanMnXG5pbXBvcnQgeyBwYXN0ZVJ1bGVzUGx1Z2luIH0gZnJvbSAnLi9QYXN0ZVJ1bGUuanMnXG5pbXBvcnQgeyBBbnlDb25maWcsIEV4dGVuc2lvbnMsIFJhd0NvbW1hbmRzIH0gZnJvbSAnLi90eXBlcy5qcydcbmltcG9ydCB7IGNhbGxPclJldHVybiB9IGZyb20gJy4vdXRpbGl0aWVzL2NhbGxPclJldHVybi5qcydcbmltcG9ydCB7IGZpbmREdXBsaWNhdGVzIH0gZnJvbSAnLi91dGlsaXRpZXMvZmluZER1cGxpY2F0ZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBFeHRlbnNpb25NYW5hZ2VyIHtcbiAgZWRpdG9yOiBFZGl0b3JcblxuICBzY2hlbWE6IFNjaGVtYVxuXG4gIGV4dGVuc2lvbnM6IEV4dGVuc2lvbnNcblxuICBzcGxpdHRhYmxlTWFya3M6IHN0cmluZ1tdID0gW11cblxuICBjb25zdHJ1Y3RvcihleHRlbnNpb25zOiBFeHRlbnNpb25zLCBlZGl0b3I6IEVkaXRvcikge1xuICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yXG4gICAgdGhpcy5leHRlbnNpb25zID0gRXh0ZW5zaW9uTWFuYWdlci5yZXNvbHZlKGV4dGVuc2lvbnMpXG4gICAgdGhpcy5zY2hlbWEgPSBnZXRTY2hlbWFCeVJlc29sdmVkRXh0ZW5zaW9ucyh0aGlzLmV4dGVuc2lvbnMsIGVkaXRvcilcblxuICAgIHRoaXMuZXh0ZW5zaW9ucy5mb3JFYWNoKGV4dGVuc2lvbiA9PiB7XG4gICAgICAvLyBzdG9yZSBleHRlbnNpb24gc3RvcmFnZSBpbiBlZGl0b3JcbiAgICAgIHRoaXMuZWRpdG9yLmV4dGVuc2lvblN0b3JhZ2VbZXh0ZW5zaW9uLm5hbWVdID0gZXh0ZW5zaW9uLnN0b3JhZ2VcblxuICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgICAgICBzdG9yYWdlOiBleHRlbnNpb24uc3RvcmFnZSxcbiAgICAgICAgZWRpdG9yOiB0aGlzLmVkaXRvcixcbiAgICAgICAgdHlwZTogZ2V0U2NoZW1hVHlwZUJ5TmFtZShleHRlbnNpb24ubmFtZSwgdGhpcy5zY2hlbWEpLFxuICAgICAgfVxuXG4gICAgICBpZiAoZXh0ZW5zaW9uLnR5cGUgPT09ICdtYXJrJykge1xuICAgICAgICBjb25zdCBrZWVwT25TcGxpdCA9IGNhbGxPclJldHVybihnZXRFeHRlbnNpb25GaWVsZChleHRlbnNpb24sICdrZWVwT25TcGxpdCcsIGNvbnRleHQpKSA/PyB0cnVlXG5cbiAgICAgICAgaWYgKGtlZXBPblNwbGl0KSB7XG4gICAgICAgICAgdGhpcy5zcGxpdHRhYmxlTWFya3MucHVzaChleHRlbnNpb24ubmFtZSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvbkJlZm9yZUNyZWF0ZSA9IGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snb25CZWZvcmVDcmVhdGUnXT4oXG4gICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgJ29uQmVmb3JlQ3JlYXRlJyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgIClcblxuICAgICAgaWYgKG9uQmVmb3JlQ3JlYXRlKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCdiZWZvcmVDcmVhdGUnLCBvbkJlZm9yZUNyZWF0ZSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb25DcmVhdGUgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uQ3JlYXRlJ10+KGV4dGVuc2lvbiwgJ29uQ3JlYXRlJywgY29udGV4dClcblxuICAgICAgaWYgKG9uQ3JlYXRlKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCdjcmVhdGUnLCBvbkNyZWF0ZSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb25VcGRhdGUgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uVXBkYXRlJ10+KGV4dGVuc2lvbiwgJ29uVXBkYXRlJywgY29udGV4dClcblxuICAgICAgaWYgKG9uVXBkYXRlKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCd1cGRhdGUnLCBvblVwZGF0ZSlcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb25TZWxlY3Rpb25VcGRhdGUgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uU2VsZWN0aW9uVXBkYXRlJ10+KFxuICAgICAgICBleHRlbnNpb24sXG4gICAgICAgICdvblNlbGVjdGlvblVwZGF0ZScsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICApXG5cbiAgICAgIGlmIChvblNlbGVjdGlvblVwZGF0ZSkge1xuICAgICAgICB0aGlzLmVkaXRvci5vbignc2VsZWN0aW9uVXBkYXRlJywgb25TZWxlY3Rpb25VcGRhdGUpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG9uVHJhbnNhY3Rpb24gPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uVHJhbnNhY3Rpb24nXT4oXG4gICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgJ29uVHJhbnNhY3Rpb24nLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgKVxuXG4gICAgICBpZiAob25UcmFuc2FjdGlvbikge1xuICAgICAgICB0aGlzLmVkaXRvci5vbigndHJhbnNhY3Rpb24nLCBvblRyYW5zYWN0aW9uKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvbkZvY3VzID0gZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydvbkZvY3VzJ10+KGV4dGVuc2lvbiwgJ29uRm9jdXMnLCBjb250ZXh0KVxuXG4gICAgICBpZiAob25Gb2N1cykge1xuICAgICAgICB0aGlzLmVkaXRvci5vbignZm9jdXMnLCBvbkZvY3VzKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvbkJsdXIgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uQmx1ciddPihleHRlbnNpb24sICdvbkJsdXInLCBjb250ZXh0KVxuXG4gICAgICBpZiAob25CbHVyKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCdibHVyJywgb25CbHVyKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBvbkRlc3Ryb3kgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ29uRGVzdHJveSddPihleHRlbnNpb24sICdvbkRlc3Ryb3knLCBjb250ZXh0KVxuXG4gICAgICBpZiAob25EZXN0cm95KSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLm9uKCdkZXN0cm95Jywgb25EZXN0cm95KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgcmVzb2x2ZShleHRlbnNpb25zOiBFeHRlbnNpb25zKTogRXh0ZW5zaW9ucyB7XG4gICAgY29uc3QgcmVzb2x2ZWRFeHRlbnNpb25zID0gRXh0ZW5zaW9uTWFuYWdlci5zb3J0KEV4dGVuc2lvbk1hbmFnZXIuZmxhdHRlbihleHRlbnNpb25zKSlcbiAgICBjb25zdCBkdXBsaWNhdGVkTmFtZXMgPSBmaW5kRHVwbGljYXRlcyhyZXNvbHZlZEV4dGVuc2lvbnMubWFwKGV4dGVuc2lvbiA9PiBleHRlbnNpb24ubmFtZSkpXG5cbiAgICBpZiAoZHVwbGljYXRlZE5hbWVzLmxlbmd0aCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW3RpcHRhcCB3YXJuXTogRHVwbGljYXRlIGV4dGVuc2lvbiBuYW1lcyBmb3VuZDogWyR7ZHVwbGljYXRlZE5hbWVzXG4gICAgICAgICAgLm1hcChpdGVtID0+IGAnJHtpdGVtfSdgKVxuICAgICAgICAgIC5qb2luKCcsICcpfV0uIFRoaXMgY2FuIGxlYWQgdG8gaXNzdWVzLmAsXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc29sdmVkRXh0ZW5zaW9uc1xuICB9XG5cbiAgc3RhdGljIGZsYXR0ZW4oZXh0ZW5zaW9uczogRXh0ZW5zaW9ucyk6IEV4dGVuc2lvbnMge1xuICAgIHJldHVybiAoXG4gICAgICBleHRlbnNpb25zXG4gICAgICAgIC5tYXAoZXh0ZW5zaW9uID0+IHtcbiAgICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgICAgICBvcHRpb25zOiBleHRlbnNpb24ub3B0aW9ucyxcbiAgICAgICAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGFkZEV4dGVuc2lvbnMgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ2FkZEV4dGVuc2lvbnMnXT4oXG4gICAgICAgICAgICBleHRlbnNpb24sXG4gICAgICAgICAgICAnYWRkRXh0ZW5zaW9ucycsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIClcblxuICAgICAgICAgIGlmIChhZGRFeHRlbnNpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gW2V4dGVuc2lvbiwgLi4udGhpcy5mbGF0dGVuKGFkZEV4dGVuc2lvbnMoKSldXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGV4dGVuc2lvblxuICAgICAgICB9KVxuICAgICAgICAvLyBgSW5maW5pdHlgIHdpbGwgYnJlYWsgVHlwZVNjcmlwdCBzbyB3ZSBzZXQgYSBudW1iZXIgdGhhdCBpcyBwcm9iYWJseSBoaWdoIGVub3VnaFxuICAgICAgICAuZmxhdCgxMClcbiAgICApXG4gIH1cblxuICBzdGF0aWMgc29ydChleHRlbnNpb25zOiBFeHRlbnNpb25zKTogRXh0ZW5zaW9ucyB7XG4gICAgY29uc3QgZGVmYXVsdFByaW9yaXR5ID0gMTAwXG5cbiAgICByZXR1cm4gZXh0ZW5zaW9ucy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBwcmlvcml0eUEgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ3ByaW9yaXR5J10+KGEsICdwcmlvcml0eScpIHx8IGRlZmF1bHRQcmlvcml0eVxuICAgICAgY29uc3QgcHJpb3JpdHlCID0gZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydwcmlvcml0eSddPihiLCAncHJpb3JpdHknKSB8fCBkZWZhdWx0UHJpb3JpdHlcblxuICAgICAgaWYgKHByaW9yaXR5QSA+IHByaW9yaXR5Qikge1xuICAgICAgICByZXR1cm4gLTFcbiAgICAgIH1cblxuICAgICAgaWYgKHByaW9yaXR5QSA8IHByaW9yaXR5Qikge1xuICAgICAgICByZXR1cm4gMVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gMFxuICAgIH0pXG4gIH1cblxuICBnZXQgY29tbWFuZHMoKTogUmF3Q29tbWFuZHMge1xuICAgIHJldHVybiB0aGlzLmV4dGVuc2lvbnMucmVkdWNlKChjb21tYW5kcywgZXh0ZW5zaW9uKSA9PiB7XG4gICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgICAgICBlZGl0b3I6IHRoaXMuZWRpdG9yLFxuICAgICAgICB0eXBlOiBnZXRTY2hlbWFUeXBlQnlOYW1lKGV4dGVuc2lvbi5uYW1lLCB0aGlzLnNjaGVtYSksXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFkZENvbW1hbmRzID0gZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRDb21tYW5kcyddPihcbiAgICAgICAgZXh0ZW5zaW9uLFxuICAgICAgICAnYWRkQ29tbWFuZHMnLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgKVxuXG4gICAgICBpZiAoIWFkZENvbW1hbmRzKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kc1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb21tYW5kcyxcbiAgICAgICAgLi4uYWRkQ29tbWFuZHMoKSxcbiAgICAgIH1cbiAgICB9LCB7fSBhcyBSYXdDb21tYW5kcylcbiAgfVxuXG4gIGdldCBwbHVnaW5zKCk6IFBsdWdpbltdIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpc1xuXG4gICAgLy8gV2l0aCBQcm9zZU1pcnJvciwgZmlyc3QgcGx1Z2lucyB3aXRoaW4gYW4gYXJyYXkgYXJlIGV4ZWN1dGVkIGZpcnN0LlxuICAgIC8vIEluIFRpcHRhcCwgd2UgcHJvdmlkZSB0aGUgYWJpbGl0eSB0byBvdmVycmlkZSBwbHVnaW5zLFxuICAgIC8vIHNvIGl0IGZlZWxzIG1vcmUgbmF0dXJhbCB0byBydW4gcGx1Z2lucyBhdCB0aGUgZW5kIG9mIGFuIGFycmF5IGZpcnN0LlxuICAgIC8vIFRoYXTigJlzIHdoeSB3ZSBoYXZlIHRvIHJldmVyc2UgdGhlIGBleHRlbnNpb25zYCBhcnJheSBhbmQgc29ydCBhZ2FpblxuICAgIC8vIGJhc2VkIG9uIHRoZSBgcHJpb3JpdHlgIG9wdGlvbi5cbiAgICBjb25zdCBleHRlbnNpb25zID0gRXh0ZW5zaW9uTWFuYWdlci5zb3J0KFsuLi50aGlzLmV4dGVuc2lvbnNdLnJldmVyc2UoKSlcblxuICAgIGNvbnN0IGlucHV0UnVsZXM6IGFueVtdID0gW11cbiAgICBjb25zdCBwYXN0ZVJ1bGVzOiBhbnlbXSA9IFtdXG5cbiAgICBjb25zdCBhbGxQbHVnaW5zID0gZXh0ZW5zaW9uc1xuICAgICAgLm1hcChleHRlbnNpb24gPT4ge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgICAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICB0eXBlOiBnZXRTY2hlbWFUeXBlQnlOYW1lKGV4dGVuc2lvbi5uYW1lLCB0aGlzLnNjaGVtYSksXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbHVnaW5zOiBQbHVnaW5bXSA9IFtdXG5cbiAgICAgICAgY29uc3QgYWRkS2V5Ym9hcmRTaG9ydGN1dHMgPSBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ2FkZEtleWJvYXJkU2hvcnRjdXRzJ10+KFxuICAgICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgICAnYWRkS2V5Ym9hcmRTaG9ydGN1dHMnLFxuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgIClcblxuICAgICAgICBsZXQgZGVmYXVsdEJpbmRpbmdzOiBSZWNvcmQ8c3RyaW5nLCAoKSA9PiBib29sZWFuPiA9IHt9XG5cbiAgICAgICAgLy8gYmluZCBleGl0IGhhbmRsaW5nXG4gICAgICAgIGlmIChleHRlbnNpb24udHlwZSA9PT0gJ21hcmsnICYmIGV4dGVuc2lvbi5jb25maWcuZXhpdGFibGUpIHtcbiAgICAgICAgICBkZWZhdWx0QmluZGluZ3MuQXJyb3dSaWdodCA9ICgpID0+IE1hcmsuaGFuZGxlRXhpdCh7IGVkaXRvciwgbWFyazogZXh0ZW5zaW9uIGFzIE1hcmsgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZGRLZXlib2FyZFNob3J0Y3V0cykge1xuICAgICAgICAgIGNvbnN0IGJpbmRpbmdzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSkubWFwKChbc2hvcnRjdXQsIG1ldGhvZF0pID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIFtzaG9ydGN1dCwgKCkgPT4gbWV0aG9kKHsgZWRpdG9yIH0pXVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKVxuXG4gICAgICAgICAgZGVmYXVsdEJpbmRpbmdzID0geyAuLi5kZWZhdWx0QmluZGluZ3MsIC4uLmJpbmRpbmdzIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleU1hcFBsdWdpbiA9IGtleW1hcChkZWZhdWx0QmluZGluZ3MpXG5cbiAgICAgICAgcGx1Z2lucy5wdXNoKGtleU1hcFBsdWdpbilcblxuICAgICAgICBjb25zdCBhZGRJbnB1dFJ1bGVzID0gZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRJbnB1dFJ1bGVzJ10+KFxuICAgICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgICAnYWRkSW5wdXRSdWxlcycsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChpc0V4dGVuc2lvblJ1bGVzRW5hYmxlZChleHRlbnNpb24sIGVkaXRvci5vcHRpb25zLmVuYWJsZUlucHV0UnVsZXMpICYmIGFkZElucHV0UnVsZXMpIHtcbiAgICAgICAgICBpbnB1dFJ1bGVzLnB1c2goLi4uYWRkSW5wdXRSdWxlcygpKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWRkUGFzdGVSdWxlcyA9IGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkUGFzdGVSdWxlcyddPihcbiAgICAgICAgICBleHRlbnNpb24sXG4gICAgICAgICAgJ2FkZFBhc3RlUnVsZXMnLFxuICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgIClcblxuICAgICAgICBpZiAoaXNFeHRlbnNpb25SdWxlc0VuYWJsZWQoZXh0ZW5zaW9uLCBlZGl0b3Iub3B0aW9ucy5lbmFibGVQYXN0ZVJ1bGVzKSAmJiBhZGRQYXN0ZVJ1bGVzKSB7XG4gICAgICAgICAgcGFzdGVSdWxlcy5wdXNoKC4uLmFkZFBhc3RlUnVsZXMoKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZFByb3NlTWlycm9yUGx1Z2lucyA9IGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkUHJvc2VNaXJyb3JQbHVnaW5zJ10+KFxuICAgICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgICAnYWRkUHJvc2VNaXJyb3JQbHVnaW5zJyxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKGFkZFByb3NlTWlycm9yUGx1Z2lucykge1xuICAgICAgICAgIGNvbnN0IHByb3NlTWlycm9yUGx1Z2lucyA9IGFkZFByb3NlTWlycm9yUGx1Z2lucygpXG5cbiAgICAgICAgICBwbHVnaW5zLnB1c2goLi4ucHJvc2VNaXJyb3JQbHVnaW5zKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBsdWdpbnNcbiAgICAgIH0pXG4gICAgICAuZmxhdCgpXG5cbiAgICByZXR1cm4gW1xuICAgICAgaW5wdXRSdWxlc1BsdWdpbih7XG4gICAgICAgIGVkaXRvcixcbiAgICAgICAgcnVsZXM6IGlucHV0UnVsZXMsXG4gICAgICB9KSxcbiAgICAgIC4uLnBhc3RlUnVsZXNQbHVnaW4oe1xuICAgICAgICBlZGl0b3IsXG4gICAgICAgIHJ1bGVzOiBwYXN0ZVJ1bGVzLFxuICAgICAgfSksXG4gICAgICAuLi5hbGxQbHVnaW5zLFxuICAgIF1cbiAgfVxuXG4gIGdldCBhdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiBnZXRBdHRyaWJ1dGVzRnJvbUV4dGVuc2lvbnModGhpcy5leHRlbnNpb25zKVxuICB9XG5cbiAgZ2V0IG5vZGVWaWV3cygpIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpc1xuICAgIGNvbnN0IHsgbm9kZUV4dGVuc2lvbnMgfSA9IHNwbGl0RXh0ZW5zaW9ucyh0aGlzLmV4dGVuc2lvbnMpXG5cbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgbm9kZUV4dGVuc2lvbnNcbiAgICAgICAgLmZpbHRlcihleHRlbnNpb24gPT4gISFnZXRFeHRlbnNpb25GaWVsZChleHRlbnNpb24sICdhZGROb2RlVmlldycpKVxuICAgICAgICAubWFwKGV4dGVuc2lvbiA9PiB7XG4gICAgICAgICAgY29uc3QgZXh0ZW5zaW9uQXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcy5maWx0ZXIoXG4gICAgICAgICAgICBhdHRyaWJ1dGUgPT4gYXR0cmlidXRlLnR5cGUgPT09IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgICAgICBvcHRpb25zOiBleHRlbnNpb24ub3B0aW9ucyxcbiAgICAgICAgICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgdHlwZTogZ2V0Tm9kZVR5cGUoZXh0ZW5zaW9uLm5hbWUsIHRoaXMuc2NoZW1hKSxcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgYWRkTm9kZVZpZXcgPSBnZXRFeHRlbnNpb25GaWVsZDxOb2RlQ29uZmlnWydhZGROb2RlVmlldyddPihcbiAgICAgICAgICAgIGV4dGVuc2lvbixcbiAgICAgICAgICAgICdhZGROb2RlVmlldycsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIClcblxuICAgICAgICAgIGlmICghYWRkTm9kZVZpZXcpIHtcbiAgICAgICAgICAgIHJldHVybiBbXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG5vZGV2aWV3ID0gKFxuICAgICAgICAgICAgbm9kZTogUHJvc2VtaXJyb3JOb2RlLFxuICAgICAgICAgICAgdmlldzogRWRpdG9yVmlldyxcbiAgICAgICAgICAgIGdldFBvczogKCgpID0+IG51bWJlcikgfCBib29sZWFuLFxuICAgICAgICAgICAgZGVjb3JhdGlvbnM6IERlY29yYXRpb25bXSxcbiAgICAgICAgICApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IEhUTUxBdHRyaWJ1dGVzID0gZ2V0UmVuZGVyZWRBdHRyaWJ1dGVzKG5vZGUsIGV4dGVuc2lvbkF0dHJpYnV0ZXMpXG5cbiAgICAgICAgICAgIHJldHVybiBhZGROb2RlVmlldygpKHtcbiAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICBnZXRQb3MsXG4gICAgICAgICAgICAgIGRlY29yYXRpb25zLFxuICAgICAgICAgICAgICBIVE1MQXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgZXh0ZW5zaW9uLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gW2V4dGVuc2lvbi5uYW1lLCBub2Rldmlld11cbiAgICAgICAgfSksXG4gICAgKVxuICB9XG59XG4iLCIvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tZXNxdWVlYi9pcy13aGF0L2Jsb2IvODhkNmU0Y2E5MmZiMmJhYWI2MDAzYzU0ZTAyZWVkZjRlNzI5ZTVhYi9zcmMvaW5kZXgudHNcblxuZnVuY3Rpb24gZ2V0VHlwZSh2YWx1ZTogYW55KTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkuc2xpY2UoOCwgLTEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgaWYgKGdldFR5cGUodmFsdWUpICE9PSAnT2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gT2JqZWN0LnByb3RvdHlwZVxufVxuIiwiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCB9IGZyb20gJy4vaXNQbGFpbk9iamVjdC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcCh0YXJnZXQ6IFJlY29yZDxzdHJpbmcsIGFueT4sIHNvdXJjZTogUmVjb3JkPHN0cmluZywgYW55Pik6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBjb25zdCBvdXRwdXQgPSB7IC4uLnRhcmdldCB9XG5cbiAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiBpc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KHNvdXJjZVtrZXldKSkge1xuICAgICAgICBpZiAoIShrZXkgaW4gdGFyZ2V0KSkge1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ob3V0cHV0LCB7IFtrZXldOiBzb3VyY2Vba2V5XSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dHB1dFtrZXldID0gbWVyZ2VEZWVwKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihvdXRwdXQsIHsgW2tleV06IHNvdXJjZVtrZXldIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiBvdXRwdXRcbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgVHJhbnNhY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL0VkaXRvci5qcydcbmltcG9ydCB7IGdldEV4dGVuc2lvbkZpZWxkIH0gZnJvbSAnLi9oZWxwZXJzL2dldEV4dGVuc2lvbkZpZWxkLmpzJ1xuaW1wb3J0IHsgRXh0ZW5zaW9uQ29uZmlnIH0gZnJvbSAnLi9pbmRleC5qcydcbmltcG9ydCB7IElucHV0UnVsZSB9IGZyb20gJy4vSW5wdXRSdWxlLmpzJ1xuaW1wb3J0IHsgTWFyayB9IGZyb20gJy4vTWFyay5qcydcbmltcG9ydCB7IE5vZGUgfSBmcm9tICcuL05vZGUuanMnXG5pbXBvcnQgeyBQYXN0ZVJ1bGUgfSBmcm9tICcuL1Bhc3RlUnVsZS5qcydcbmltcG9ydCB7XG4gIEFueUNvbmZpZyxcbiAgRXh0ZW5zaW9ucyxcbiAgR2xvYmFsQXR0cmlidXRlcyxcbiAgS2V5Ym9hcmRTaG9ydGN1dENvbW1hbmQsXG4gIFBhcmVudENvbmZpZyxcbiAgUmF3Q29tbWFuZHMsXG59IGZyb20gJy4vdHlwZXMuanMnXG5pbXBvcnQgeyBjYWxsT3JSZXR1cm4gfSBmcm9tICcuL3V0aWxpdGllcy9jYWxsT3JSZXR1cm4uanMnXG5pbXBvcnQgeyBtZXJnZURlZXAgfSBmcm9tICcuL3V0aWxpdGllcy9tZXJnZURlZXAuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zID0gYW55LCBTdG9yYWdlID0gYW55PiB7XG4gICAgW2tleTogc3RyaW5nXTogYW55XG5cbiAgICAvKipcbiAgICAgKiBOYW1lXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBQcmlvcml0eVxuICAgICAqL1xuICAgIHByaW9yaXR5PzogbnVtYmVyXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IG9wdGlvbnNcbiAgICAgKi9cbiAgICBkZWZhdWx0T3B0aW9ucz86IE9wdGlvbnNcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgT3B0aW9uc1xuICAgICAqL1xuICAgIGFkZE9wdGlvbnM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBwYXJlbnQ6IEV4Y2x1ZGU8UGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZE9wdGlvbnMnXSwgdW5kZWZpbmVkPlxuICAgIH0pID0+IE9wdGlvbnNcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgU3RvcmFnZVxuICAgICAqL1xuICAgIGFkZFN0b3JhZ2U/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBwYXJlbnQ6IEV4Y2x1ZGU8UGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZFN0b3JhZ2UnXSwgdW5kZWZpbmVkPlxuICAgIH0pID0+IFN0b3JhZ2VcblxuICAgIC8qKlxuICAgICAqIEdsb2JhbCBhdHRyaWJ1dGVzXG4gICAgICovXG4gICAgYWRkR2xvYmFsQXR0cmlidXRlcz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZEdsb2JhbEF0dHJpYnV0ZXMnXVxuICAgIH0pID0+IEdsb2JhbEF0dHJpYnV0ZXMgfCB7fVxuXG4gICAgLyoqXG4gICAgICogUmF3XG4gICAgICovXG4gICAgYWRkQ29tbWFuZHM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkQ29tbWFuZHMnXVxuICAgIH0pID0+IFBhcnRpYWw8UmF3Q29tbWFuZHM+XG5cbiAgICAvKipcbiAgICAgKiBLZXlib2FyZCBzaG9ydGN1dHNcbiAgICAgKi9cbiAgICBhZGRLZXlib2FyZFNob3J0Y3V0cz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRLZXlib2FyZFNob3J0Y3V0cyddXG4gICAgfSkgPT4ge1xuICAgICAgW2tleTogc3RyaW5nXTogS2V5Ym9hcmRTaG9ydGN1dENvbW1hbmRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnB1dCBydWxlc1xuICAgICAqL1xuICAgIGFkZElucHV0UnVsZXM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkSW5wdXRSdWxlcyddXG4gICAgfSkgPT4gSW5wdXRSdWxlW11cblxuICAgIC8qKlxuICAgICAqIFBhc3RlIHJ1bGVzXG4gICAgICovXG4gICAgYWRkUGFzdGVSdWxlcz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRQYXN0ZVJ1bGVzJ11cbiAgICB9KSA9PiBQYXN0ZVJ1bGVbXVxuXG4gICAgLyoqXG4gICAgICogUHJvc2VNaXJyb3IgcGx1Z2luc1xuICAgICAqL1xuICAgIGFkZFByb3NlTWlycm9yUGx1Z2lucz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRQcm9zZU1pcnJvclBsdWdpbnMnXVxuICAgIH0pID0+IFBsdWdpbltdXG5cbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb25zXG4gICAgICovXG4gICAgYWRkRXh0ZW5zaW9ucz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZEV4dGVuc2lvbnMnXVxuICAgIH0pID0+IEV4dGVuc2lvbnNcblxuICAgIC8qKlxuICAgICAqIEV4dGVuZCBOb2RlIFNjaGVtYVxuICAgICAqL1xuICAgIGV4dGVuZE5vZGVTY2hlbWE/OlxuICAgICAgfCAoKFxuICAgICAgICAgIHRoaXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXh0ZW5kTm9kZVNjaGVtYSddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHRlbnNpb246IE5vZGUsXG4gICAgICAgICkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIE1hcmsgU2NoZW1hXG4gICAgICovXG4gICAgZXh0ZW5kTWFya1NjaGVtYT86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydleHRlbmRNYXJrU2NoZW1hJ11cbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4dGVuc2lvbjogTWFyayxcbiAgICAgICAgKSA9PiBSZWNvcmQ8c3RyaW5nLCBhbnk+KVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzIG5vdCByZWFkeSB5ZXQuXG4gICAgICovXG4gICAgb25CZWZvcmVDcmVhdGU/OlxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25CZWZvcmVDcmVhdGUnXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzIHJlYWR5LlxuICAgICAqL1xuICAgIG9uQ3JlYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uQ3JlYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgb25VcGRhdGU/OlxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25VcGRhdGUnXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2VsZWN0aW9uIGhhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIG9uU2VsZWN0aW9uVXBkYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uU2VsZWN0aW9uVXBkYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBzdGF0ZSBoYXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBvblRyYW5zYWN0aW9uPzpcbiAgICAgIHwgKChcbiAgICAgICAgICB0aGlzOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvblRyYW5zYWN0aW9uJ11cbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb25cbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3IgaXMgZm9jdXNlZC5cbiAgICAgKi9cbiAgICBvbkZvY3VzPzpcbiAgICAgIHwgKChcbiAgICAgICAgICB0aGlzOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvbkZvY3VzJ11cbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBldmVudDogRm9jdXNFdmVudFxuICAgICAgICAgIH0sXG4gICAgICAgICkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBpc27igJl0IGZvY3VzZWQgYW55bW9yZS5cbiAgICAgKi9cbiAgICBvbkJsdXI/OlxuICAgICAgfCAoKFxuICAgICAgICAgIHRoaXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPEV4dGVuc2lvbkNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uQmx1ciddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgZXZlbnQ6IEZvY3VzRXZlbnRcbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3IgaXMgZGVzdHJveWVkLlxuICAgICAqL1xuICAgIG9uRGVzdHJveT86XG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxFeHRlbnNpb25Db25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvbkRlc3Ryb3knXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEV4dGVuc2lvbjxPcHRpb25zID0gYW55LCBTdG9yYWdlID0gYW55PiB7XG4gIHR5cGUgPSAnZXh0ZW5zaW9uJ1xuXG4gIG5hbWUgPSAnZXh0ZW5zaW9uJ1xuXG4gIHBhcmVudDogRXh0ZW5zaW9uIHwgbnVsbCA9IG51bGxcblxuICBjaGlsZDogRXh0ZW5zaW9uIHwgbnVsbCA9IG51bGxcblxuICBvcHRpb25zOiBPcHRpb25zXG5cbiAgc3RvcmFnZTogU3RvcmFnZVxuXG4gIGNvbmZpZzogRXh0ZW5zaW9uQ29uZmlnID0ge1xuICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICBkZWZhdWx0T3B0aW9uczoge30sXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8RXh0ZW5zaW9uQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAuLi50aGlzLmNvbmZpZyxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbmZpZy5uYW1lXG5cbiAgICBpZiAoY29uZmlnLmRlZmF1bHRPcHRpb25zKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBbdGlwdGFwIHdhcm5dOiBCUkVBS0lORyBDSEFOR0U6IFwiZGVmYXVsdE9wdGlvbnNcIiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFwiYWRkT3B0aW9uc1wiIGluc3RlYWQuIEZvdW5kIGluIGV4dGVuc2lvbjogXCIke3RoaXMubmFtZX1cIi5gLFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSBgYWRkT3B0aW9uc2AgZmFsbGJhY2tcbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmNvbmZpZy5kZWZhdWx0T3B0aW9uc1xuXG4gICAgaWYgKHRoaXMuY29uZmlnLmFkZE9wdGlvbnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IGNhbGxPclJldHVybihcbiAgICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRPcHRpb25zJ10+KHRoaXMsICdhZGRPcHRpb25zJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfSksXG4gICAgICApXG4gICAgfVxuXG4gICAgdGhpcy5zdG9yYWdlID0gY2FsbE9yUmV0dXJuKFxuICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRTdG9yYWdlJ10+KHRoaXMsICdhZGRTdG9yYWdlJywge1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIH0pLFxuICAgICkgfHwge31cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGU8TyA9IGFueSwgUyA9IGFueT4oY29uZmlnOiBQYXJ0aWFsPEV4dGVuc2lvbkNvbmZpZzxPLCBTPj4gPSB7fSkge1xuICAgIHJldHVybiBuZXcgRXh0ZW5zaW9uPE8sIFM+KGNvbmZpZylcbiAgfVxuXG4gIGNvbmZpZ3VyZShvcHRpb25zOiBQYXJ0aWFsPE9wdGlvbnM+ID0ge30pIHtcbiAgICAvLyByZXR1cm4gYSBuZXcgaW5zdGFuY2Ugc28gd2UgY2FuIHVzZSB0aGUgc2FtZSBleHRlbnNpb25cbiAgICAvLyB3aXRoIGRpZmZlcmVudCBjYWxscyBvZiBgY29uZmlndXJlYFxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuZXh0ZW5kKClcblxuICAgIGV4dGVuc2lvbi5vcHRpb25zID0gbWVyZ2VEZWVwKHRoaXMub3B0aW9ucyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zKSBhcyBPcHRpb25zXG5cbiAgICBleHRlbnNpb24uc3RvcmFnZSA9IGNhbGxPclJldHVybihcbiAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkU3RvcmFnZSddPihleHRlbnNpb24sICdhZGRTdG9yYWdlJywge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICB9KSxcbiAgICApXG5cbiAgICByZXR1cm4gZXh0ZW5zaW9uXG4gIH1cblxuICBleHRlbmQ8RXh0ZW5kZWRPcHRpb25zID0gT3B0aW9ucywgRXh0ZW5kZWRTdG9yYWdlID0gU3RvcmFnZT4oXG4gICAgZXh0ZW5kZWRDb25maWc6IFBhcnRpYWw8RXh0ZW5zaW9uQ29uZmlnPEV4dGVuZGVkT3B0aW9ucywgRXh0ZW5kZWRTdG9yYWdlPj4gPSB7fSxcbiAgKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gbmV3IEV4dGVuc2lvbjxFeHRlbmRlZE9wdGlvbnMsIEV4dGVuZGVkU3RvcmFnZT4oZXh0ZW5kZWRDb25maWcpXG5cbiAgICBleHRlbnNpb24ucGFyZW50ID0gdGhpc1xuXG4gICAgdGhpcy5jaGlsZCA9IGV4dGVuc2lvblxuXG4gICAgZXh0ZW5zaW9uLm5hbWUgPSBleHRlbmRlZENvbmZpZy5uYW1lID8gZXh0ZW5kZWRDb25maWcubmFtZSA6IGV4dGVuc2lvbi5wYXJlbnQubmFtZVxuXG4gICAgaWYgKGV4dGVuZGVkQ29uZmlnLmRlZmF1bHRPcHRpb25zKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBbdGlwdGFwIHdhcm5dOiBCUkVBS0lORyBDSEFOR0U6IFwiZGVmYXVsdE9wdGlvbnNcIiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFwiYWRkT3B0aW9uc1wiIGluc3RlYWQuIEZvdW5kIGluIGV4dGVuc2lvbjogXCIke2V4dGVuc2lvbi5uYW1lfVwiLmAsXG4gICAgICApXG4gICAgfVxuXG4gICAgZXh0ZW5zaW9uLm9wdGlvbnMgPSBjYWxsT3JSZXR1cm4oXG4gICAgICBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ2FkZE9wdGlvbnMnXT4oZXh0ZW5zaW9uLCAnYWRkT3B0aW9ucycsIHtcbiAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICB9KSxcbiAgICApXG5cbiAgICBleHRlbnNpb24uc3RvcmFnZSA9IGNhbGxPclJldHVybihcbiAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkU3RvcmFnZSddPihleHRlbnNpb24sICdhZGRTdG9yYWdlJywge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICB9KSxcbiAgICApXG5cbiAgICByZXR1cm4gZXh0ZW5zaW9uXG4gIH1cbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgUmFuZ2UsIFRleHRTZXJpYWxpemVyIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0QmV0d2VlbihcbiAgc3RhcnROb2RlOiBQcm9zZU1pcnJvck5vZGUsXG4gIHJhbmdlOiBSYW5nZSxcbiAgb3B0aW9ucz86IHtcbiAgICBibG9ja1NlcGFyYXRvcj86IHN0cmluZ1xuICAgIHRleHRTZXJpYWxpemVycz86IFJlY29yZDxzdHJpbmcsIFRleHRTZXJpYWxpemVyPlxuICB9LFxuKTogc3RyaW5nIHtcbiAgY29uc3QgeyBmcm9tLCB0byB9ID0gcmFuZ2VcbiAgY29uc3QgeyBibG9ja1NlcGFyYXRvciA9ICdcXG5cXG4nLCB0ZXh0U2VyaWFsaXplcnMgPSB7fSB9ID0gb3B0aW9ucyB8fCB7fVxuICBsZXQgdGV4dCA9ICcnXG4gIGxldCBzZXBhcmF0ZWQgPSB0cnVlXG5cbiAgc3RhcnROb2RlLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgKG5vZGUsIHBvcywgcGFyZW50LCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHRleHRTZXJpYWxpemVyID0gdGV4dFNlcmlhbGl6ZXJzPy5bbm9kZS50eXBlLm5hbWVdXG5cbiAgICBpZiAodGV4dFNlcmlhbGl6ZXIpIHtcbiAgICAgIGlmIChub2RlLmlzQmxvY2sgJiYgIXNlcGFyYXRlZCkge1xuICAgICAgICB0ZXh0ICs9IGJsb2NrU2VwYXJhdG9yXG4gICAgICAgIHNlcGFyYXRlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICB0ZXh0ICs9IHRleHRTZXJpYWxpemVyKHtcbiAgICAgICAgICBub2RlLFxuICAgICAgICAgIHBvcyxcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgcmFuZ2UsXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlLmlzVGV4dCkge1xuICAgICAgdGV4dCArPSBub2RlPy50ZXh0Py5zbGljZShNYXRoLm1heChmcm9tLCBwb3MpIC0gcG9zLCB0byAtIHBvcykgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgc2VwYXJhdGVkID0gZmFsc2VcbiAgICB9IGVsc2UgaWYgKG5vZGUuaXNCbG9jayAmJiAhc2VwYXJhdGVkKSB7XG4gICAgICB0ZXh0ICs9IGJsb2NrU2VwYXJhdG9yXG4gICAgICBzZXBhcmF0ZWQgPSB0cnVlXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiB0ZXh0XG59XG4iLCJpbXBvcnQgeyBTY2hlbWEgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBUZXh0U2VyaWFsaXplciB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYShzY2hlbWE6IFNjaGVtYSk6IFJlY29yZDxzdHJpbmcsIFRleHRTZXJpYWxpemVyPiB7XG4gIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgT2JqZWN0LmVudHJpZXMoc2NoZW1hLm5vZGVzKVxuICAgICAgLmZpbHRlcigoWywgbm9kZV0pID0+IG5vZGUuc3BlYy50b1RleHQpXG4gICAgICAubWFwKChbbmFtZSwgbm9kZV0pID0+IFtuYW1lLCBub2RlLnNwZWMudG9UZXh0XSksXG4gIClcbn1cbiIsImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luS2V5IH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnLi4vRXh0ZW5zaW9uLmpzJ1xuaW1wb3J0IHsgZ2V0VGV4dEJldHdlZW4gfSBmcm9tICcuLi9oZWxwZXJzL2dldFRleHRCZXR3ZWVuLmpzJ1xuaW1wb3J0IHsgZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYS5qcydcblxuZXhwb3J0IGNvbnN0IENsaXBib2FyZFRleHRTZXJpYWxpemVyID0gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6ICdjbGlwYm9hcmRUZXh0U2VyaWFsaXplcicsXG5cbiAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgUGx1Z2luKHtcbiAgICAgICAga2V5OiBuZXcgUGx1Z2luS2V5KCdjbGlwYm9hcmRUZXh0U2VyaWFsaXplcicpLFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGNsaXBib2FyZFRleHRTZXJpYWxpemVyOiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpc1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSwgc2NoZW1hIH0gPSBlZGl0b3JcbiAgICAgICAgICAgIGNvbnN0IHsgZG9jLCBzZWxlY3Rpb24gfSA9IHN0YXRlXG4gICAgICAgICAgICBjb25zdCB7IHJhbmdlcyB9ID0gc2VsZWN0aW9uXG4gICAgICAgICAgICBjb25zdCBmcm9tID0gTWF0aC5taW4oLi4ucmFuZ2VzLm1hcChyYW5nZSA9PiByYW5nZS4kZnJvbS5wb3MpKVxuICAgICAgICAgICAgY29uc3QgdG8gPSBNYXRoLm1heCguLi5yYW5nZXMubWFwKHJhbmdlID0+IHJhbmdlLiR0by5wb3MpKVxuICAgICAgICAgICAgY29uc3QgdGV4dFNlcmlhbGl6ZXJzID0gZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYShzY2hlbWEpXG4gICAgICAgICAgICBjb25zdCByYW5nZSA9IHsgZnJvbSwgdG8gfVxuXG4gICAgICAgICAgICByZXR1cm4gZ2V0VGV4dEJldHdlZW4oZG9jLCByYW5nZSwge1xuICAgICAgICAgICAgICB0ZXh0U2VyaWFsaXplcnMsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGJsdXI6IHtcbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlcyBmb2N1cyBmcm9tIHRoZSBlZGl0b3IuXG4gICAgICAgKi9cbiAgICAgIGJsdXI6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBibHVyOiBSYXdDb21tYW5kc1snYmx1ciddID0gKCkgPT4gKHsgZWRpdG9yLCB2aWV3IH0pID0+IHtcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBpZiAoIWVkaXRvci5pc0Rlc3Ryb3llZCkge1xuICAgICAgKHZpZXcuZG9tIGFzIEhUTUxFbGVtZW50KS5ibHVyKClcblxuICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIHJlbW92ZSB0aGUgY2FyZXQgb24gYmx1ciBidXQgc2FmYXJpIGRvZXMgbm90LlxuICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdWViZXJkb3Npcy90aXB0YXAvaXNzdWVzLzI0MDVcbiAgICAgIHdpbmRvdz8uZ2V0U2VsZWN0aW9uKCk/LnJlbW92ZUFsbFJhbmdlcygpXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgY2xlYXJDb250ZW50OiB7XG4gICAgICAvKipcbiAgICAgICAqIENsZWFyIHRoZSB3aG9sZSBkb2N1bWVudC5cbiAgICAgICAqL1xuICAgICAgY2xlYXJDb250ZW50OiAoZW1pdFVwZGF0ZT86IGJvb2xlYW4pID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjbGVhckNvbnRlbnQ6IFJhd0NvbW1hbmRzWydjbGVhckNvbnRlbnQnXSA9IChlbWl0VXBkYXRlID0gZmFsc2UpID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgcmV0dXJuIGNvbW1hbmRzLnNldENvbnRlbnQoJycsIGVtaXRVcGRhdGUpXG59XG4iLCJpbXBvcnQgeyBsaWZ0VGFyZ2V0IH0gZnJvbSAnQHRpcHRhcC9wbS90cmFuc2Zvcm0nXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBjbGVhck5vZGVzOiB7XG4gICAgICAvKipcbiAgICAgICAqIE5vcm1hbGl6ZSBub2RlcyB0byBhIHNpbXBsZSBwYXJhZ3JhcGguXG4gICAgICAgKi9cbiAgICAgIGNsZWFyTm9kZXM6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjbGVhck5vZGVzOiBSYXdDb21tYW5kc1snY2xlYXJOb2RlcyddID0gKCkgPT4gKHsgc3RhdGUsIHRyLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSB0clxuICBjb25zdCB7IHJhbmdlcyB9ID0gc2VsZWN0aW9uXG5cbiAgaWYgKCFkaXNwYXRjaCkge1xuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICByYW5nZXMuZm9yRWFjaCgoeyAkZnJvbSwgJHRvIH0pID0+IHtcbiAgICBzdGF0ZS5kb2Mubm9kZXNCZXR3ZWVuKCRmcm9tLnBvcywgJHRvLnBvcywgKG5vZGUsIHBvcykgPT4ge1xuICAgICAgaWYgKG5vZGUudHlwZS5pc1RleHQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgZG9jLCBtYXBwaW5nIH0gPSB0clxuICAgICAgY29uc3QgJG1hcHBlZEZyb20gPSBkb2MucmVzb2x2ZShtYXBwaW5nLm1hcChwb3MpKVxuICAgICAgY29uc3QgJG1hcHBlZFRvID0gZG9jLnJlc29sdmUobWFwcGluZy5tYXAocG9zICsgbm9kZS5ub2RlU2l6ZSkpXG4gICAgICBjb25zdCBub2RlUmFuZ2UgPSAkbWFwcGVkRnJvbS5ibG9ja1JhbmdlKCRtYXBwZWRUbylcblxuICAgICAgaWYgKCFub2RlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRhcmdldExpZnREZXB0aCA9IGxpZnRUYXJnZXQobm9kZVJhbmdlKVxuXG4gICAgICBpZiAobm9kZS50eXBlLmlzVGV4dGJsb2NrKSB7XG4gICAgICAgIGNvbnN0IHsgZGVmYXVsdFR5cGUgfSA9ICRtYXBwZWRGcm9tLnBhcmVudC5jb250ZW50TWF0Y2hBdCgkbWFwcGVkRnJvbS5pbmRleCgpKVxuXG4gICAgICAgIHRyLnNldE5vZGVNYXJrdXAobm9kZVJhbmdlLnN0YXJ0LCBkZWZhdWx0VHlwZSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldExpZnREZXB0aCB8fCB0YXJnZXRMaWZ0RGVwdGggPT09IDApIHtcbiAgICAgICAgdHIubGlmdChub2RlUmFuZ2UsIHRhcmdldExpZnREZXB0aClcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBDb21tYW5kLCBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgY29tbWFuZDoge1xuICAgICAgLyoqXG4gICAgICAgKiBEZWZpbmUgYSBjb21tYW5kIGlubGluZS5cbiAgICAgICAqL1xuICAgICAgY29tbWFuZDogKGZuOiAocHJvcHM6IFBhcmFtZXRlcnM8Q29tbWFuZD5bMF0pID0+IGJvb2xlYW4pID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjb21tYW5kOiBSYXdDb21tYW5kc1snY29tbWFuZCddID0gZm4gPT4gcHJvcHMgPT4ge1xuICByZXR1cm4gZm4ocHJvcHMpXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVQYXJhZ3JhcGhOZWFyIGFzIG9yaWdpbmFsQ3JlYXRlUGFyYWdyYXBoTmVhciB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBjcmVhdGVQYXJhZ3JhcGhOZWFyOiB7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZSBhIHBhcmFncmFwaCBuZWFyYnkuXG4gICAgICAgKi9cbiAgICAgIGNyZWF0ZVBhcmFncmFwaE5lYXI6ICgpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBhcmFncmFwaE5lYXI6IFJhd0NvbW1hbmRzWydjcmVhdGVQYXJhZ3JhcGhOZWFyJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxDcmVhdGVQYXJhZ3JhcGhOZWFyKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IFRleHRTZWxlY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgY3V0OiB7XG4gICAgICAvKipcbiAgICAgICAqIEN1dHMgY29udGVudCBmcm9tIGEgcmFuZ2UgYW5kIGluc2VydHMgaXQgYXQgYSBnaXZlbiBwb3NpdGlvbi5cbiAgICAgICAqL1xuICAgICAgY3V0OiAoeyBmcm9tLCB0byB9OiB7IGZyb206IG51bWJlciwgdG86IG51bWJlciB9LCB0YXJnZXRQb3M6IG51bWJlcikgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGN1dDogUmF3Q29tbWFuZHNbJ2N1dCddID0gKG9yaWdpblJhbmdlLCB0YXJnZXRQb3MpID0+ICh7IGVkaXRvciwgdHIgfSkgPT4ge1xuICBjb25zdCB7IHN0YXRlIH0gPSBlZGl0b3JcblxuICBjb25zdCBjb250ZW50U2xpY2UgPSBzdGF0ZS5kb2Muc2xpY2Uob3JpZ2luUmFuZ2UuZnJvbSwgb3JpZ2luUmFuZ2UudG8pXG5cbiAgdHIuZGVsZXRlUmFuZ2Uob3JpZ2luUmFuZ2UuZnJvbSwgb3JpZ2luUmFuZ2UudG8pXG4gIGNvbnN0IG5ld1BvcyA9IHRyLm1hcHBpbmcubWFwKHRhcmdldFBvcylcblxuICB0ci5pbnNlcnQobmV3UG9zLCBjb250ZW50U2xpY2UuY29udGVudClcblxuICB0ci5zZXRTZWxlY3Rpb24obmV3IFRleHRTZWxlY3Rpb24odHIuZG9jLnJlc29sdmUobmV3UG9zIC0gMSkpKVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgZGVsZXRlQ3VycmVudE5vZGU6IHtcbiAgICAgIC8qKlxuICAgICAgICogRGVsZXRlIHRoZSBub2RlIHRoYXQgY3VycmVudGx5IGhhcyB0aGUgc2VsZWN0aW9uIGFuY2hvci5cbiAgICAgICAqL1xuICAgICAgZGVsZXRlQ3VycmVudE5vZGU6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDdXJyZW50Tm9kZTogUmF3Q29tbWFuZHNbJ2RlbGV0ZUN1cnJlbnROb2RlJ10gPSAoKSA9PiAoeyB0ciwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gdHJcbiAgY29uc3QgY3VycmVudE5vZGUgPSBzZWxlY3Rpb24uJGFuY2hvci5ub2RlKClcblxuICAvLyBpZiB0aGVyZSBpcyBjb250ZW50IGluc2lkZSB0aGUgY3VycmVudCBub2RlLCBicmVhayBvdXQgb2YgdGhpcyBjb21tYW5kXG4gIGlmIChjdXJyZW50Tm9kZS5jb250ZW50LnNpemUgPiAwKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCAkcG9zID0gdHIuc2VsZWN0aW9uLiRhbmNob3JcblxuICBmb3IgKGxldCBkZXB0aCA9ICRwb3MuZGVwdGg7IGRlcHRoID4gMDsgZGVwdGggLT0gMSkge1xuICAgIGNvbnN0IG5vZGUgPSAkcG9zLm5vZGUoZGVwdGgpXG5cbiAgICBpZiAobm9kZS50eXBlID09PSBjdXJyZW50Tm9kZS50eXBlKSB7XG4gICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgY29uc3QgZnJvbSA9ICRwb3MuYmVmb3JlKGRlcHRoKVxuICAgICAgICBjb25zdCB0byA9ICRwb3MuYWZ0ZXIoZGVwdGgpXG5cbiAgICAgICAgdHIuZGVsZXRlKGZyb20sIHRvKS5zY3JvbGxJbnRvVmlldygpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IGdldE5vZGVUeXBlIH0gZnJvbSAnLi4vaGVscGVycy9nZXROb2RlVHlwZS5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBkZWxldGVOb2RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZSBhIG5vZGUuXG4gICAgICAgKi9cbiAgICAgIGRlbGV0ZU5vZGU6ICh0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZU5vZGU6IFJhd0NvbW1hbmRzWydkZWxldGVOb2RlJ10gPSB0eXBlT3JOYW1lID0+ICh7IHRyLCBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB0eXBlID0gZ2V0Tm9kZVR5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuICBjb25zdCAkcG9zID0gdHIuc2VsZWN0aW9uLiRhbmNob3JcblxuICBmb3IgKGxldCBkZXB0aCA9ICRwb3MuZGVwdGg7IGRlcHRoID4gMDsgZGVwdGggLT0gMSkge1xuICAgIGNvbnN0IG5vZGUgPSAkcG9zLm5vZGUoZGVwdGgpXG5cbiAgICBpZiAobm9kZS50eXBlID09PSB0eXBlKSB7XG4gICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgY29uc3QgZnJvbSA9ICRwb3MuYmVmb3JlKGRlcHRoKVxuICAgICAgICBjb25zdCB0byA9ICRwb3MuYWZ0ZXIoZGVwdGgpXG5cbiAgICAgICAgdHIuZGVsZXRlKGZyb20sIHRvKS5zY3JvbGxJbnRvVmlldygpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQgeyBSYW5nZSwgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGRlbGV0ZVJhbmdlOiB7XG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZSBhIGdpdmVuIHJhbmdlLlxuICAgICAgICovXG4gICAgICBkZWxldGVSYW5nZTogKHJhbmdlOiBSYW5nZSkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZVJhbmdlOiBSYXdDb21tYW5kc1snZGVsZXRlUmFuZ2UnXSA9IHJhbmdlID0+ICh7IHRyLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGNvbnN0IHsgZnJvbSwgdG8gfSA9IHJhbmdlXG5cbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgdHIuZGVsZXRlKGZyb20sIHRvKVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsImltcG9ydCB7IGRlbGV0ZVNlbGVjdGlvbiBhcyBvcmlnaW5hbERlbGV0ZVNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBkZWxldGVTZWxlY3Rpb246IHtcbiAgICAgIC8qKlxuICAgICAgICogRGVsZXRlIHRoZSBzZWxlY3Rpb24sIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAgICAqL1xuICAgICAgZGVsZXRlU2VsZWN0aW9uOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBkZWxldGVTZWxlY3Rpb246IFJhd0NvbW1hbmRzWydkZWxldGVTZWxlY3Rpb24nXSA9ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIHJldHVybiBvcmlnaW5hbERlbGV0ZVNlbGVjdGlvbihzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgZW50ZXI6IHtcbiAgICAgIC8qKlxuICAgICAgICogVHJpZ2dlciBlbnRlci5cbiAgICAgICAqL1xuICAgICAgZW50ZXI6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBlbnRlcjogUmF3Q29tbWFuZHNbJ2VudGVyJ10gPSAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gIHJldHVybiBjb21tYW5kcy5rZXlib2FyZFNob3J0Y3V0KCdFbnRlcicpXG59XG4iLCJpbXBvcnQgeyBleGl0Q29kZSBhcyBvcmlnaW5hbEV4aXRDb2RlIH0gZnJvbSAnQHRpcHRhcC9wbS9jb21tYW5kcydcblxuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGV4aXRDb2RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIEV4aXQgZnJvbSBhIGNvZGUgYmxvY2suXG4gICAgICAgKi9cbiAgICAgIGV4aXRDb2RlOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBleGl0Q29kZTogUmF3Q29tbWFuZHNbJ2V4aXRDb2RlJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxFeGl0Q29kZShzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCJpbXBvcnQgeyBpc1JlZ0V4cCB9IGZyb20gJy4vaXNSZWdFeHAuanMnXG5cbi8qKlxuICogQ2hlY2sgaWYgb2JqZWN0MSBpbmNsdWRlcyBvYmplY3QyXG4gKiBAcGFyYW0gb2JqZWN0MSBPYmplY3RcbiAqIEBwYXJhbSBvYmplY3QyIE9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gb2JqZWN0SW5jbHVkZXMoXG4gIG9iamVjdDE6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIG9iamVjdDI6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIG9wdGlvbnM6IHsgc3RyaWN0OiBib29sZWFuIH0gPSB7IHN0cmljdDogdHJ1ZSB9LFxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QyKVxuXG4gIGlmICgha2V5cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGtleXMuZXZlcnkoa2V5ID0+IHtcbiAgICBpZiAob3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QyW2tleV0gPT09IG9iamVjdDFba2V5XVxuICAgIH1cblxuICAgIGlmIChpc1JlZ0V4cChvYmplY3QyW2tleV0pKSB7XG4gICAgICByZXR1cm4gb2JqZWN0MltrZXldLnRlc3Qob2JqZWN0MVtrZXldKVxuICAgIH1cblxuICAgIHJldHVybiBvYmplY3QyW2tleV0gPT09IG9iamVjdDFba2V5XVxuICB9KVxufVxuIiwiaW1wb3J0IHsgTWFyayBhcyBQcm9zZU1pcnJvck1hcmssIE1hcmtUeXBlLCBSZXNvbHZlZFBvcyB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IFJhbmdlIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBvYmplY3RJbmNsdWRlcyB9IGZyb20gJy4uL3V0aWxpdGllcy9vYmplY3RJbmNsdWRlcy5qcydcblxuZnVuY3Rpb24gZmluZE1hcmtJblNldChcbiAgbWFya3M6IFByb3NlTWlycm9yTWFya1tdLFxuICB0eXBlOiBNYXJrVHlwZSxcbiAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuKTogUHJvc2VNaXJyb3JNYXJrIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIG1hcmtzLmZpbmQoaXRlbSA9PiB7XG4gICAgcmV0dXJuIGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBvYmplY3RJbmNsdWRlcyhpdGVtLmF0dHJzLCBhdHRyaWJ1dGVzKVxuICB9KVxufVxuXG5mdW5jdGlvbiBpc01hcmtJblNldChcbiAgbWFya3M6IFByb3NlTWlycm9yTWFya1tdLFxuICB0eXBlOiBNYXJrVHlwZSxcbiAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiAhIWZpbmRNYXJrSW5TZXQobWFya3MsIHR5cGUsIGF0dHJpYnV0ZXMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrUmFuZ2UoXG4gICRwb3M6IFJlc29sdmVkUG9zLFxuICB0eXBlOiBNYXJrVHlwZSxcbiAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuKTogUmFuZ2UgfCB2b2lkIHtcbiAgaWYgKCEkcG9zIHx8ICF0eXBlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgc3RhcnQgPSAkcG9zLnBhcmVudC5jaGlsZEFmdGVyKCRwb3MucGFyZW50T2Zmc2V0KVxuXG4gIGlmICgkcG9zLnBhcmVudE9mZnNldCA9PT0gc3RhcnQub2Zmc2V0ICYmIHN0YXJ0Lm9mZnNldCAhPT0gMCkge1xuICAgIHN0YXJ0ID0gJHBvcy5wYXJlbnQuY2hpbGRCZWZvcmUoJHBvcy5wYXJlbnRPZmZzZXQpXG4gIH1cblxuICBpZiAoIXN0YXJ0Lm5vZGUpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IG1hcmsgPSBmaW5kTWFya0luU2V0KFsuLi5zdGFydC5ub2RlLm1hcmtzXSwgdHlwZSwgYXR0cmlidXRlcylcblxuICBpZiAoIW1hcmspIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGxldCBzdGFydEluZGV4ID0gc3RhcnQuaW5kZXhcbiAgbGV0IHN0YXJ0UG9zID0gJHBvcy5zdGFydCgpICsgc3RhcnQub2Zmc2V0XG4gIGxldCBlbmRJbmRleCA9IHN0YXJ0SW5kZXggKyAxXG4gIGxldCBlbmRQb3MgPSBzdGFydFBvcyArIHN0YXJ0Lm5vZGUubm9kZVNpemVcblxuICBmaW5kTWFya0luU2V0KFsuLi5zdGFydC5ub2RlLm1hcmtzXSwgdHlwZSwgYXR0cmlidXRlcylcblxuICB3aGlsZSAoc3RhcnRJbmRleCA+IDAgJiYgbWFyay5pc0luU2V0KCRwb3MucGFyZW50LmNoaWxkKHN0YXJ0SW5kZXggLSAxKS5tYXJrcykpIHtcbiAgICBzdGFydEluZGV4IC09IDFcbiAgICBzdGFydFBvcyAtPSAkcG9zLnBhcmVudC5jaGlsZChzdGFydEluZGV4KS5ub2RlU2l6ZVxuICB9XG5cbiAgd2hpbGUgKFxuICAgIGVuZEluZGV4IDwgJHBvcy5wYXJlbnQuY2hpbGRDb3VudFxuICAgICYmIGlzTWFya0luU2V0KFsuLi4kcG9zLnBhcmVudC5jaGlsZChlbmRJbmRleCkubWFya3NdLCB0eXBlLCBhdHRyaWJ1dGVzKVxuICApIHtcbiAgICBlbmRQb3MgKz0gJHBvcy5wYXJlbnQuY2hpbGQoZW5kSW5kZXgpLm5vZGVTaXplXG4gICAgZW5kSW5kZXggKz0gMVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmcm9tOiBzdGFydFBvcyxcbiAgICB0bzogZW5kUG9zLFxuICB9XG59XG4iLCJpbXBvcnQgeyBNYXJrVHlwZSwgU2NoZW1hIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmtUeXBlKG5hbWVPclR5cGU6IHN0cmluZyB8IE1hcmtUeXBlLCBzY2hlbWE6IFNjaGVtYSk6IE1hcmtUeXBlIHtcbiAgaWYgKHR5cGVvZiBuYW1lT3JUeXBlID09PSAnc3RyaW5nJykge1xuICAgIGlmICghc2NoZW1hLm1hcmtzW25hbWVPclR5cGVdKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgYFRoZXJlIGlzIG5vIG1hcmsgdHlwZSBuYW1lZCAnJHtuYW1lT3JUeXBlfScuIE1heWJlIHlvdSBmb3Jnb3QgdG8gYWRkIHRoZSBleHRlbnNpb24/YCxcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gc2NoZW1hLm1hcmtzW25hbWVPclR5cGVdXG4gIH1cblxuICByZXR1cm4gbmFtZU9yVHlwZVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuaW1wb3J0IHsgVGV4dFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IGdldE1hcmtSYW5nZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0TWFya1JhbmdlLmpzJ1xuaW1wb3J0IHsgZ2V0TWFya1R5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE1hcmtUeXBlLmpzJ1xuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGV4dGVuZE1hcmtSYW5nZToge1xuICAgICAgLyoqXG4gICAgICAgKiBFeHRlbmRzIHRoZSB0ZXh0IHNlbGVjdGlvbiB0byB0aGUgY3VycmVudCBtYXJrLlxuICAgICAgICovXG4gICAgICBleHRlbmRNYXJrUmFuZ2U6IChcbiAgICAgICAgdHlwZU9yTmFtZTogc3RyaW5nIHwgTWFya1R5cGUsXG4gICAgICAgIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBleHRlbmRNYXJrUmFuZ2U6IFJhd0NvbW1hbmRzWydleHRlbmRNYXJrUmFuZ2UnXSA9ICh0eXBlT3JOYW1lLCBhdHRyaWJ1dGVzID0ge30pID0+ICh7IHRyLCBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB0eXBlID0gZ2V0TWFya1R5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuICBjb25zdCB7IGRvYywgc2VsZWN0aW9uIH0gPSB0clxuICBjb25zdCB7ICRmcm9tLCBmcm9tLCB0byB9ID0gc2VsZWN0aW9uXG5cbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgY29uc3QgcmFuZ2UgPSBnZXRNYXJrUmFuZ2UoJGZyb20sIHR5cGUsIGF0dHJpYnV0ZXMpXG5cbiAgICBpZiAocmFuZ2UgJiYgcmFuZ2UuZnJvbSA8PSBmcm9tICYmIHJhbmdlLnRvID49IHRvKSB7XG4gICAgICBjb25zdCBuZXdTZWxlY3Rpb24gPSBUZXh0U2VsZWN0aW9uLmNyZWF0ZShkb2MsIHJhbmdlLmZyb20sIHJhbmdlLnRvKVxuXG4gICAgICB0ci5zZXRTZWxlY3Rpb24obmV3U2VsZWN0aW9uKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBDb21tYW5kLCBDb21tYW5kUHJvcHMsIFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBmaXJzdDoge1xuICAgICAgLyoqXG4gICAgICAgKiBSdW5zIG9uZSBjb21tYW5kIGFmdGVyIHRoZSBvdGhlciBhbmQgc3RvcHMgYXQgdGhlIGZpcnN0IHdoaWNoIHJldHVybnMgdHJ1ZS5cbiAgICAgICAqL1xuICAgICAgZmlyc3Q6IChjb21tYW5kczogQ29tbWFuZFtdIHwgKChwcm9wczogQ29tbWFuZFByb3BzKSA9PiBDb21tYW5kW10pKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZmlyc3Q6IFJhd0NvbW1hbmRzWydmaXJzdCddID0gY29tbWFuZHMgPT4gcHJvcHMgPT4ge1xuICBjb25zdCBpdGVtcyA9IHR5cGVvZiBjb21tYW5kcyA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gY29tbWFuZHMocHJvcHMpXG4gICAgOiBjb21tYW5kc1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBpZiAoaXRlbXNbaV0ocHJvcHMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuIiwiaW1wb3J0IHsgVGV4dFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RleHRTZWxlY3Rpb24odmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBUZXh0U2VsZWN0aW9uIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvblxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIG1pbk1heCh2YWx1ZSA9IDAsIG1pbiA9IDAsIG1heCA9IDApOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heClcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IFNlbGVjdGlvbiwgVGV4dFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IEZvY3VzUG9zaXRpb24gfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IG1pbk1heCB9IGZyb20gJy4uL3V0aWxpdGllcy9taW5NYXguanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlRm9jdXNQb3NpdGlvbihcbiAgZG9jOiBQcm9zZU1pcnJvck5vZGUsXG4gIHBvc2l0aW9uOiBGb2N1c1Bvc2l0aW9uID0gbnVsbCxcbik6IFNlbGVjdGlvbiB8IG51bGwge1xuICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGNvbnN0IHNlbGVjdGlvbkF0U3RhcnQgPSBTZWxlY3Rpb24uYXRTdGFydChkb2MpXG4gIGNvbnN0IHNlbGVjdGlvbkF0RW5kID0gU2VsZWN0aW9uLmF0RW5kKGRvYylcblxuICBpZiAocG9zaXRpb24gPT09ICdzdGFydCcgfHwgcG9zaXRpb24gPT09IHRydWUpIHtcbiAgICByZXR1cm4gc2VsZWN0aW9uQXRTdGFydFxuICB9XG5cbiAgaWYgKHBvc2l0aW9uID09PSAnZW5kJykge1xuICAgIHJldHVybiBzZWxlY3Rpb25BdEVuZFxuICB9XG5cbiAgY29uc3QgbWluUG9zID0gc2VsZWN0aW9uQXRTdGFydC5mcm9tXG4gIGNvbnN0IG1heFBvcyA9IHNlbGVjdGlvbkF0RW5kLnRvXG5cbiAgaWYgKHBvc2l0aW9uID09PSAnYWxsJykge1xuICAgIHJldHVybiBUZXh0U2VsZWN0aW9uLmNyZWF0ZShcbiAgICAgIGRvYyxcbiAgICAgIG1pbk1heCgwLCBtaW5Qb3MsIG1heFBvcyksXG4gICAgICBtaW5NYXgoZG9jLmNvbnRlbnQuc2l6ZSwgbWluUG9zLCBtYXhQb3MpLFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBUZXh0U2VsZWN0aW9uLmNyZWF0ZShcbiAgICBkb2MsXG4gICAgbWluTWF4KHBvc2l0aW9uLCBtaW5Qb3MsIG1heFBvcyksXG4gICAgbWluTWF4KHBvc2l0aW9uLCBtaW5Qb3MsIG1heFBvcyksXG4gIClcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBpc2lPUygpOiBib29sZWFuIHtcbiAgcmV0dXJuIFtcbiAgICAnaVBhZCBTaW11bGF0b3InLFxuICAgICdpUGhvbmUgU2ltdWxhdG9yJyxcbiAgICAnaVBvZCBTaW11bGF0b3InLFxuICAgICdpUGFkJyxcbiAgICAnaVBob25lJyxcbiAgICAnaVBvZCcsXG4gIF0uaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKVxuICAvLyBpUGFkIG9uIGlPUyAxMyBkZXRlY3Rpb25cbiAgfHwgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ01hYycpICYmICdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudClcbn1cbiIsImltcG9ydCB7IGlzVGV4dFNlbGVjdGlvbiB9IGZyb20gJy4uL2hlbHBlcnMvaXNUZXh0U2VsZWN0aW9uLmpzJ1xuaW1wb3J0IHsgcmVzb2x2ZUZvY3VzUG9zaXRpb24gfSBmcm9tICcuLi9oZWxwZXJzL3Jlc29sdmVGb2N1c1Bvc2l0aW9uLmpzJ1xuaW1wb3J0IHsgRm9jdXNQb3NpdGlvbiwgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IGlzaU9TIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2lzaU9TLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgZm9jdXM6IHtcbiAgICAgIC8qKlxuICAgICAgICogRm9jdXMgdGhlIGVkaXRvciBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgICAgKi9cbiAgICAgIGZvY3VzOiAoXG4gICAgICAgIHBvc2l0aW9uPzogRm9jdXNQb3NpdGlvbixcbiAgICAgICAgb3B0aW9ucz86IHtcbiAgICAgICAgICBzY3JvbGxJbnRvVmlldz86IGJvb2xlYW4sXG4gICAgICAgIH0sXG4gICAgICApID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBmb2N1czogUmF3Q29tbWFuZHNbJ2ZvY3VzJ10gPSAocG9zaXRpb24gPSBudWxsLCBvcHRpb25zID0ge30pID0+ICh7XG4gIGVkaXRvcixcbiAgdmlldyxcbiAgdHIsXG4gIGRpc3BhdGNoLFxufSkgPT4ge1xuICBvcHRpb25zID0ge1xuICAgIHNjcm9sbEludG9WaWV3OiB0cnVlLFxuICAgIC4uLm9wdGlvbnMsXG4gIH1cblxuICBjb25zdCBkZWxheWVkRm9jdXMgPSAoKSA9PiB7XG4gICAgLy8gZm9jdXMgd2l0aGluIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIGJyZWFrcyBmb2N1cyBvbiBpT1NcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGwgdGhpc1xuICAgIGlmIChpc2lPUygpKSB7XG4gICAgICAodmlldy5kb20gYXMgSFRNTEVsZW1lbnQpLmZvY3VzKClcbiAgICB9XG5cbiAgICAvLyBGb3IgUmVhY3Qgd2UgaGF2ZSB0byBmb2N1cyBhc3luY2hyb25vdXNseS4gT3RoZXJ3aXNlIHdpbGQgdGhpbmdzIGhhcHBlbi5cbiAgICAvLyBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS91ZWJlcmRvc2lzL3RpcHRhcC9pc3N1ZXMvMTUyMFxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZiAoIWVkaXRvci5pc0Rlc3Ryb3llZCkge1xuICAgICAgICB2aWV3LmZvY3VzKClcblxuICAgICAgICBpZiAob3B0aW9ucz8uc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgICBlZGl0b3IuY29tbWFuZHMuc2Nyb2xsSW50b1ZpZXcoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGlmICgodmlldy5oYXNGb2N1cygpICYmIHBvc2l0aW9uID09PSBudWxsKSB8fCBwb3NpdGlvbiA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgLy8gd2UgZG9u4oCZdCB0cnkgdG8gcmVzb2x2ZSBhIE5vZGVTZWxlY3Rpb24gb3IgQ2VsbFNlbGVjdGlvblxuICBpZiAoZGlzcGF0Y2ggJiYgcG9zaXRpb24gPT09IG51bGwgJiYgIWlzVGV4dFNlbGVjdGlvbihlZGl0b3Iuc3RhdGUuc2VsZWN0aW9uKSkge1xuICAgIGRlbGF5ZWRGb2N1cygpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIHBhc3MgdGhyb3VnaCB0ci5kb2MgaW5zdGVhZCBvZiBlZGl0b3Iuc3RhdGUuZG9jXG4gIC8vIHNpbmNlIHRyYW5zYWN0aW9ucyBjb3VsZCBjaGFuZ2UgdGhlIGVkaXRvcnMgc3RhdGUgYmVmb3JlIHRoaXMgY29tbWFuZCBoYXMgYmVlbiBydW5cbiAgY29uc3Qgc2VsZWN0aW9uID0gcmVzb2x2ZUZvY3VzUG9zaXRpb24odHIuZG9jLCBwb3NpdGlvbikgfHwgZWRpdG9yLnN0YXRlLnNlbGVjdGlvblxuICBjb25zdCBpc1NhbWVTZWxlY3Rpb24gPSBlZGl0b3Iuc3RhdGUuc2VsZWN0aW9uLmVxKHNlbGVjdGlvbilcblxuICBpZiAoZGlzcGF0Y2gpIHtcbiAgICBpZiAoIWlzU2FtZVNlbGVjdGlvbikge1xuICAgICAgdHIuc2V0U2VsZWN0aW9uKHNlbGVjdGlvbilcbiAgICB9XG5cbiAgICAvLyBgdHIuc2V0U2VsZWN0aW9uYCByZXNldHMgdGhlIHN0b3JlZCBtYXJrc1xuICAgIC8vIHNvIHdl4oCZbGwgcmVzdG9yZSB0aGVtIGlmIHRoZSBzZWxlY3Rpb24gaXMgdGhlIHNhbWUgYXMgYmVmb3JlXG4gICAgaWYgKGlzU2FtZVNlbGVjdGlvbiAmJiB0ci5zdG9yZWRNYXJrcykge1xuICAgICAgdHIuc2V0U3RvcmVkTWFya3ModHIuc3RvcmVkTWFya3MpXG4gICAgfVxuXG4gICAgZGVsYXllZEZvY3VzKClcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBDb21tYW5kUHJvcHMsIFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBmb3JFYWNoOiB7XG4gICAgICAvKipcbiAgICAgICAqIExvb3AgdGhyb3VnaCBhbiBhcnJheSBvZiBpdGVtcy5cbiAgICAgICAqL1xuICAgICAgZm9yRWFjaDogPFQ+KFxuICAgICAgICBpdGVtczogVFtdLFxuICAgICAgICBmbjogKFxuICAgICAgICAgIGl0ZW06IFQsXG4gICAgICAgICAgcHJvcHM6IENvbW1hbmRQcm9wcyAmIHtcbiAgICAgICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgICAgfSxcbiAgICAgICAgKSA9PiBib29sZWFuLFxuICAgICAgKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZm9yRWFjaDogUmF3Q29tbWFuZHNbJ2ZvckVhY2gnXSA9IChpdGVtcywgZm4pID0+IHByb3BzID0+IHtcbiAgcmV0dXJuIGl0ZW1zLmV2ZXJ5KChpdGVtLCBpbmRleCkgPT4gZm4oaXRlbSwgeyAuLi5wcm9wcywgaW5kZXggfSkpXG59XG4iLCJpbXBvcnQgeyBQYXJzZU9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBDb250ZW50LCBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgaW5zZXJ0Q29udGVudDoge1xuICAgICAgLyoqXG4gICAgICAgKiBJbnNlcnQgYSBub2RlIG9yIHN0cmluZyBvZiBIVE1MIGF0IHRoZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAgICovXG4gICAgICBpbnNlcnRDb250ZW50OiAoXG4gICAgICAgIHZhbHVlOiBDb250ZW50LFxuICAgICAgICBvcHRpb25zPzoge1xuICAgICAgICAgIHBhcnNlT3B0aW9ucz86IFBhcnNlT3B0aW9uc1xuICAgICAgICAgIHVwZGF0ZVNlbGVjdGlvbj86IGJvb2xlYW5cbiAgICAgICAgfSxcbiAgICAgICkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5zZXJ0Q29udGVudDogUmF3Q29tbWFuZHNbJ2luc2VydENvbnRlbnQnXSA9ICh2YWx1ZSwgb3B0aW9ucykgPT4gKHsgdHIsIGNvbW1hbmRzIH0pID0+IHtcbiAgcmV0dXJuIGNvbW1hbmRzLmluc2VydENvbnRlbnRBdChcbiAgICB7IGZyb206IHRyLnNlbGVjdGlvbi5mcm9tLCB0bzogdHIuc2VsZWN0aW9uLnRvIH0sXG4gICAgdmFsdWUsXG4gICAgb3B0aW9ucyxcbiAgKVxufVxuIiwiY29uc3QgcmVtb3ZlV2hpdGVzcGFjZXMgPSAobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcbiAgY29uc3QgY2hpbGRyZW4gPSBub2RlLmNoaWxkTm9kZXNcblxuICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpIC09IDEpIHtcbiAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldXG5cbiAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IDMgJiYgY2hpbGQubm9kZVZhbHVlICYmICEvXFxTLy50ZXN0KGNoaWxkLm5vZGVWYWx1ZSkpIHtcbiAgICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpXG4gICAgfSBlbHNlIGlmIChjaGlsZC5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgcmVtb3ZlV2hpdGVzcGFjZXMoY2hpbGQgYXMgSFRNTEVsZW1lbnQpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRGcm9tU3RyaW5nKHZhbHVlOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gIC8vIGFkZCBhIHdyYXBwZXIgdG8gcHJlc2VydmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZVxuICBjb25zdCB3cmFwcGVkVmFsdWUgPSBgPGJvZHk+JHt2YWx1ZX08L2JvZHk+YFxuXG4gIGNvbnN0IGh0bWwgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh3cmFwcGVkVmFsdWUsICd0ZXh0L2h0bWwnKS5ib2R5XG5cbiAgcmVtb3ZlV2hpdGVzcGFjZXMoaHRtbClcblxuICByZXR1cm4gcmVtb3ZlV2hpdGVzcGFjZXMoaHRtbClcbn1cbiIsImltcG9ydCB7XG4gIERPTVBhcnNlcixcbiAgRnJhZ21lbnQsXG4gIE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlLFxuICBQYXJzZU9wdGlvbnMsXG4gIFNjaGVtYSxcbn0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgQ29udGVudCB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgZWxlbWVudEZyb21TdHJpbmcgfSBmcm9tICcuLi91dGlsaXRpZXMvZWxlbWVudEZyb21TdHJpbmcuanMnXG5cbmV4cG9ydCB0eXBlIENyZWF0ZU5vZGVGcm9tQ29udGVudE9wdGlvbnMgPSB7XG4gIHNsaWNlPzogYm9vbGVhblxuICBwYXJzZU9wdGlvbnM/OiBQYXJzZU9wdGlvbnNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vZGVGcm9tQ29udGVudChcbiAgY29udGVudDogQ29udGVudCxcbiAgc2NoZW1hOiBTY2hlbWEsXG4gIG9wdGlvbnM/OiBDcmVhdGVOb2RlRnJvbUNvbnRlbnRPcHRpb25zLFxuKTogUHJvc2VNaXJyb3JOb2RlIHwgRnJhZ21lbnQge1xuICBvcHRpb25zID0ge1xuICAgIHNsaWNlOiB0cnVlLFxuICAgIHBhcnNlT3B0aW9uczoge30sXG4gICAgLi4ub3B0aW9ucyxcbiAgfVxuXG4gIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ29iamVjdCcgJiYgY29udGVudCAhPT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZW50KSAmJiBjb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIEZyYWdtZW50LmZyb21BcnJheShjb250ZW50Lm1hcChpdGVtID0+IHNjaGVtYS5ub2RlRnJvbUpTT04oaXRlbSkpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2NoZW1hLm5vZGVGcm9tSlNPTihjb250ZW50KVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1t0aXB0YXAgd2Fybl06IEludmFsaWQgY29udGVudC4nLCAnUGFzc2VkIHZhbHVlOicsIGNvbnRlbnQsICdFcnJvcjonLCBlcnJvcilcblxuICAgICAgcmV0dXJuIGNyZWF0ZU5vZGVGcm9tQ29udGVudCgnJywgc2NoZW1hLCBvcHRpb25zKVxuICAgIH1cbiAgfVxuXG4gIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBwYXJzZXIgPSBET01QYXJzZXIuZnJvbVNjaGVtYShzY2hlbWEpXG5cbiAgICByZXR1cm4gb3B0aW9ucy5zbGljZVxuICAgICAgPyBwYXJzZXIucGFyc2VTbGljZShlbGVtZW50RnJvbVN0cmluZyhjb250ZW50KSwgb3B0aW9ucy5wYXJzZU9wdGlvbnMpLmNvbnRlbnRcbiAgICAgIDogcGFyc2VyLnBhcnNlKGVsZW1lbnRGcm9tU3RyaW5nKGNvbnRlbnQpLCBvcHRpb25zLnBhcnNlT3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVOb2RlRnJvbUNvbnRlbnQoJycsIHNjaGVtYSwgb3B0aW9ucylcbn1cbiIsImltcG9ydCB7IFNlbGVjdGlvbiwgVHJhbnNhY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuaW1wb3J0IHsgUmVwbGFjZUFyb3VuZFN0ZXAsIFJlcGxhY2VTdGVwIH0gZnJvbSAnQHRpcHRhcC9wbS90cmFuc2Zvcm0nXG5cbi8vIHNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL1Byb3NlTWlycm9yL3Byb3NlbWlycm9yLXN0YXRlL2Jsb2IvbWFzdGVyL3NyYy9zZWxlY3Rpb24uanMjTDQ2NlxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdGlvblRvSW5zZXJ0aW9uRW5kKHRyOiBUcmFuc2FjdGlvbiwgc3RhcnRMZW46IG51bWJlciwgYmlhczogbnVtYmVyKSB7XG4gIGNvbnN0IGxhc3QgPSB0ci5zdGVwcy5sZW5ndGggLSAxXG5cbiAgaWYgKGxhc3QgPCBzdGFydExlbikge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3Qgc3RlcCA9IHRyLnN0ZXBzW2xhc3RdXG5cbiAgaWYgKCEoc3RlcCBpbnN0YW5jZW9mIFJlcGxhY2VTdGVwIHx8IHN0ZXAgaW5zdGFuY2VvZiBSZXBsYWNlQXJvdW5kU3RlcCkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IG1hcCA9IHRyLm1hcHBpbmcubWFwc1tsYXN0XVxuICBsZXQgZW5kID0gMFxuXG4gIG1hcC5mb3JFYWNoKChfZnJvbSwgX3RvLCBfbmV3RnJvbSwgbmV3VG8pID0+IHtcbiAgICBpZiAoZW5kID09PSAwKSB7XG4gICAgICBlbmQgPSBuZXdUb1xuICAgIH1cbiAgfSlcblxuICB0ci5zZXRTZWxlY3Rpb24oU2VsZWN0aW9uLm5lYXIodHIuZG9jLnJlc29sdmUoZW5kKSwgYmlhcykpXG59XG4iLCJpbXBvcnQgeyBGcmFnbWVudCwgTm9kZSBhcyBQcm9zZU1pcnJvck5vZGUsIFBhcnNlT3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IGNyZWF0ZU5vZGVGcm9tQ29udGVudCB9IGZyb20gJy4uL2hlbHBlcnMvY3JlYXRlTm9kZUZyb21Db250ZW50LmpzJ1xuaW1wb3J0IHsgc2VsZWN0aW9uVG9JbnNlcnRpb25FbmQgfSBmcm9tICcuLi9oZWxwZXJzL3NlbGVjdGlvblRvSW5zZXJ0aW9uRW5kLmpzJ1xuaW1wb3J0IHsgQ29udGVudCwgUmFuZ2UsIFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBpbnNlcnRDb250ZW50QXQ6IHtcbiAgICAgIC8qKlxuICAgICAgICogSW5zZXJ0IGEgbm9kZSBvciBzdHJpbmcgb2YgSFRNTCBhdCBhIHNwZWNpZmljIHBvc2l0aW9uLlxuICAgICAgICovXG4gICAgICBpbnNlcnRDb250ZW50QXQ6IChcbiAgICAgICAgcG9zaXRpb246IG51bWJlciB8IFJhbmdlLFxuICAgICAgICB2YWx1ZTogQ29udGVudCxcbiAgICAgICAgb3B0aW9ucz86IHtcbiAgICAgICAgICBwYXJzZU9wdGlvbnM/OiBQYXJzZU9wdGlvbnNcbiAgICAgICAgICB1cGRhdGVTZWxlY3Rpb24/OiBib29sZWFuXG4gICAgICAgIH0sXG4gICAgICApID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgaXNGcmFnbWVudCA9IChub2RlT3JGcmFnbWVudDogUHJvc2VNaXJyb3JOb2RlIHwgRnJhZ21lbnQpOiBub2RlT3JGcmFnbWVudCBpcyBGcmFnbWVudCA9PiB7XG4gIHJldHVybiBub2RlT3JGcmFnbWVudC50b1N0cmluZygpLnN0YXJ0c1dpdGgoJzwnKVxufVxuXG5leHBvcnQgY29uc3QgaW5zZXJ0Q29udGVudEF0OiBSYXdDb21tYW5kc1snaW5zZXJ0Q29udGVudEF0J10gPSAocG9zaXRpb24sIHZhbHVlLCBvcHRpb25zKSA9PiAoeyB0ciwgZGlzcGF0Y2gsIGVkaXRvciB9KSA9PiB7XG4gIGlmIChkaXNwYXRjaCkge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICBwYXJzZU9wdGlvbnM6IHt9LFxuICAgICAgdXBkYXRlU2VsZWN0aW9uOiB0cnVlLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gY3JlYXRlTm9kZUZyb21Db250ZW50KHZhbHVlLCBlZGl0b3Iuc2NoZW1hLCB7XG4gICAgICBwYXJzZU9wdGlvbnM6IHtcbiAgICAgICAgcHJlc2VydmVXaGl0ZXNwYWNlOiAnZnVsbCcsXG4gICAgICAgIC4uLm9wdGlvbnMucGFyc2VPcHRpb25zLFxuICAgICAgfSxcbiAgICB9KVxuXG4gICAgLy8gZG9u4oCZdCBkaXNwYXRjaCBhbiBlbXB0eSBmcmFnbWVudCBiZWNhdXNlIHRoaXMgY2FuIGxlYWQgdG8gc3RyYW5nZSBlcnJvcnNcbiAgICBpZiAoY29udGVudC50b1N0cmluZygpID09PSAnPD4nKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGxldCB7IGZyb20sIHRvIH0gPSB0eXBlb2YgcG9zaXRpb24gPT09ICdudW1iZXInID8geyBmcm9tOiBwb3NpdGlvbiwgdG86IHBvc2l0aW9uIH0gOiB7IGZyb206IHBvc2l0aW9uLmZyb20sIHRvOiBwb3NpdGlvbi50byB9XG5cbiAgICBsZXQgaXNPbmx5VGV4dENvbnRlbnQgPSB0cnVlXG4gICAgbGV0IGlzT25seUJsb2NrQ29udGVudCA9IHRydWVcbiAgICBjb25zdCBub2RlcyA9IGlzRnJhZ21lbnQoY29udGVudCkgPyBjb250ZW50IDogW2NvbnRlbnRdXG5cbiAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgLy8gY2hlY2sgaWYgYWRkZWQgbm9kZSBpcyB2YWxpZFxuICAgICAgbm9kZS5jaGVjaygpXG5cbiAgICAgIGlzT25seVRleHRDb250ZW50ID0gaXNPbmx5VGV4dENvbnRlbnQgPyBub2RlLmlzVGV4dCAmJiBub2RlLm1hcmtzLmxlbmd0aCA9PT0gMCA6IGZhbHNlXG5cbiAgICAgIGlzT25seUJsb2NrQ29udGVudCA9IGlzT25seUJsb2NrQ29udGVudCA/IG5vZGUuaXNCbG9jayA6IGZhbHNlXG4gICAgfSlcblxuICAgIC8vIGNoZWNrIGlmIHdlIGNhbiByZXBsYWNlIHRoZSB3cmFwcGluZyBub2RlIGJ5XG4gICAgLy8gdGhlIG5ld2x5IGluc2VydGVkIGNvbnRlbnRcbiAgICAvLyBleGFtcGxlOlxuICAgIC8vIHJlcGxhY2UgYW4gZW1wdHkgcGFyYWdyYXBoIGJ5IGFuIGluc2VydGVkIGltYWdlXG4gICAgLy8gaW5zdGVhZCBvZiBpbnNlcnRpbmcgdGhlIGltYWdlIGJlbG93IHRoZSBwYXJhZ3JhcGhcbiAgICBpZiAoZnJvbSA9PT0gdG8gJiYgaXNPbmx5QmxvY2tDb250ZW50KSB7XG4gICAgICBjb25zdCB7IHBhcmVudCB9ID0gdHIuZG9jLnJlc29sdmUoZnJvbSlcbiAgICAgIGNvbnN0IGlzRW1wdHlUZXh0QmxvY2sgPSBwYXJlbnQuaXNUZXh0YmxvY2sgJiYgIXBhcmVudC50eXBlLnNwZWMuY29kZSAmJiAhcGFyZW50LmNoaWxkQ291bnRcblxuICAgICAgaWYgKGlzRW1wdHlUZXh0QmxvY2spIHtcbiAgICAgICAgZnJvbSAtPSAxXG4gICAgICAgIHRvICs9IDFcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBpZiB0aGVyZSBpcyBvbmx5IHBsYWluIHRleHQgd2UgaGF2ZSB0byB1c2UgYGluc2VydFRleHRgXG4gICAgLy8gYmVjYXVzZSB0aGlzIHdpbGwga2VlcCB0aGUgY3VycmVudCBtYXJrc1xuICAgIGlmIChpc09ubHlUZXh0Q29udGVudCkge1xuICAgICAgLy8gaWYgdmFsdWUgaXMgc3RyaW5nLCB3ZSBjYW4gdXNlIGl0IGRpcmVjdGx5XG4gICAgICAvLyBvdGhlcndpc2UgaWYgaXQgaXMgYW4gYXJyYXksIHdlIGhhdmUgdG8gam9pbiBpdFxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHRyLmluc2VydFRleHQodmFsdWUubWFwKHYgPT4gdi50ZXh0IHx8ICcnKS5qb2luKCcnKSwgZnJvbSwgdG8pXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgISF2YWx1ZSAmJiAhIXZhbHVlLnRleHQpIHtcbiAgICAgICAgdHIuaW5zZXJ0VGV4dCh2YWx1ZS50ZXh0LCBmcm9tLCB0bylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyLmluc2VydFRleHQodmFsdWUgYXMgc3RyaW5nLCBmcm9tLCB0bylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdHIucmVwbGFjZVdpdGgoZnJvbSwgdG8sIGNvbnRlbnQpXG4gICAgfVxuXG4gICAgLy8gc2V0IGN1cnNvciBhdCBlbmQgb2YgaW5zZXJ0ZWQgY29udGVudFxuICAgIGlmIChvcHRpb25zLnVwZGF0ZVNlbGVjdGlvbikge1xuICAgICAgc2VsZWN0aW9uVG9JbnNlcnRpb25FbmQodHIsIHRyLnN0ZXBzLmxlbmd0aCAtIDEsIC0xKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQge1xuICBqb2luQmFja3dhcmQgYXMgb3JpZ2luYWxKb2luQmFja3dhcmQsXG4gIGpvaW5Eb3duIGFzIG9yaWdpbmFsSm9pbkRvd24sXG4gIGpvaW5Gb3J3YXJkIGFzIG9yaWdpbmFsSm9pbkZvcndhcmQsXG4gIGpvaW5VcCBhcyBvcmlnaW5hbEpvaW5VcCxcbn0gZnJvbSAnQHRpcHRhcC9wbS9jb21tYW5kcydcblxuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGpvaW5VcDoge1xuICAgICAgLyoqXG4gICAgICAgKiBKb2luIHR3byBub2RlcyBVcC5cbiAgICAgICAqL1xuICAgICAgam9pblVwOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICAgIGpvaW5Eb3duOiB7XG4gICAgICAvKipcbiAgICAgICAqIEpvaW4gdHdvIG5vZGVzIERvd24uXG4gICAgICAgKi9cbiAgICAgIGpvaW5Eb3duOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICAgIGpvaW5CYWNrd2FyZDoge1xuICAgICAgLyoqXG4gICAgICAgKiBKb2luIHR3byBub2RlcyBCYWNrd2FyZHMuXG4gICAgICAgKi9cbiAgICAgIGpvaW5CYWNrd2FyZDogKCkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgICBqb2luRm9yd2FyZDoge1xuICAgICAgLyoqXG4gICAgICAgKiBKb2luIHR3byBub2RlcyBGb3J3YXJkcy5cbiAgICAgICAqL1xuICAgICAgam9pbkZvcndhcmQ6ICgpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGpvaW5VcDogUmF3Q29tbWFuZHNbJ2pvaW5VcCddID0gKCkgPT4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgcmV0dXJuIG9yaWdpbmFsSm9pblVwKHN0YXRlLCBkaXNwYXRjaClcbn1cblxuZXhwb3J0IGNvbnN0IGpvaW5Eb3duOiBSYXdDb21tYW5kc1snam9pbkRvd24nXSA9ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIHJldHVybiBvcmlnaW5hbEpvaW5Eb3duKHN0YXRlLCBkaXNwYXRjaClcbn1cblxuZXhwb3J0IGNvbnN0IGpvaW5CYWNrd2FyZDogUmF3Q29tbWFuZHNbJ2pvaW5CYWNrd2FyZCddID0gKCkgPT4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgcmV0dXJuIG9yaWdpbmFsSm9pbkJhY2t3YXJkKHN0YXRlLCBkaXNwYXRjaClcbn1cblxuZXhwb3J0IGNvbnN0IGpvaW5Gb3J3YXJkOiBSYXdDb21tYW5kc1snam9pbkZvcndhcmQnXSA9ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIHJldHVybiBvcmlnaW5hbEpvaW5Gb3J3YXJkKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IGpvaW5Qb2ludCB9IGZyb20gJ0B0aXB0YXAvcG0vdHJhbnNmb3JtJ1xuXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgam9pbkl0ZW1CYWNrd2FyZDoge1xuICAgICAgLyoqXG4gICAgICAgKiBKb2luIHR3byBub2RlcyBGb3J3YXJkcy5cbiAgICAgICAqL1xuICAgICAgam9pbkl0ZW1CYWNrd2FyZDogKCkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgam9pbkl0ZW1CYWNrd2FyZDogUmF3Q29tbWFuZHNbJ2pvaW5JdGVtQmFja3dhcmQnXSA9ICgpID0+ICh7XG4gIHRyLCBzdGF0ZSwgZGlzcGF0Y2gsXG59KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcG9pbnQgPSBqb2luUG9pbnQoc3RhdGUuZG9jLCBzdGF0ZS5zZWxlY3Rpb24uJGZyb20ucG9zLCAtMSlcblxuICAgIGlmIChwb2ludCA9PT0gbnVsbCB8fCBwb2ludCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICB0ci5qb2luKHBvaW50LCAyKVxuXG4gICAgaWYgKGRpc3BhdGNoKSB7XG4gICAgICBkaXNwYXRjaCh0cilcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIiwiaW1wb3J0IHsgam9pblBvaW50IH0gZnJvbSAnQHRpcHRhcC9wbS90cmFuc2Zvcm0nXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBqb2luSXRlbUZvcndhcmQ6IHtcbiAgICAgIC8qKlxuICAgICAgICogSm9pbiB0d28gbm9kZXMgRm9yd2FyZHMuXG4gICAgICAgKi9cbiAgICAgIGpvaW5JdGVtRm9yd2FyZDogKCkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgam9pbkl0ZW1Gb3J3YXJkOiBSYXdDb21tYW5kc1snam9pbkl0ZW1Gb3J3YXJkJ10gPSAoKSA9PiAoe1xuICBzdGF0ZSxcbiAgZGlzcGF0Y2gsXG4gIHRyLFxufSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBvaW50ID0gam9pblBvaW50KHN0YXRlLmRvYywgc3RhdGUuc2VsZWN0aW9uLiRmcm9tLnBvcywgKzEpXG5cbiAgICBpZiAocG9pbnQgPT09IG51bGwgfHwgcG9pbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgdHIuam9pbihwb2ludCwgMilcblxuICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgZGlzcGF0Y2godHIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaXNNYWNPUygpOiBib29sZWFuIHtcbiAgcmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICAgPyAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSlcbiAgICA6IGZhbHNlXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgaXNpT1MgfSBmcm9tICcuLi91dGlsaXRpZXMvaXNpT1MuanMnXG5pbXBvcnQgeyBpc01hY09TIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2lzTWFjT1MuanMnXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUtleU5hbWUobmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnRzID0gbmFtZS5zcGxpdCgvLSg/ISQpLylcbiAgbGV0IHJlc3VsdCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXG5cbiAgaWYgKHJlc3VsdCA9PT0gJ1NwYWNlJykge1xuICAgIHJlc3VsdCA9ICcgJ1xuICB9XG5cbiAgbGV0IGFsdFxuICBsZXQgY3RybFxuICBsZXQgc2hpZnRcbiAgbGV0IG1ldGFcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkgKz0gMSkge1xuICAgIGNvbnN0IG1vZCA9IHBhcnRzW2ldXG5cbiAgICBpZiAoL14oY21kfG1ldGF8bSkkL2kudGVzdChtb2QpKSB7XG4gICAgICBtZXRhID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoL15hKGx0KT8kL2kudGVzdChtb2QpKSB7XG4gICAgICBhbHQgPSB0cnVlXG4gICAgfSBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKSB7XG4gICAgICBjdHJsID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoL15zKGhpZnQpPyQvaS50ZXN0KG1vZCkpIHtcbiAgICAgIHNoaWZ0ID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoL15tb2QkL2kudGVzdChtb2QpKSB7XG4gICAgICBpZiAoaXNpT1MoKSB8fCBpc01hY09TKCkpIHtcbiAgICAgICAgbWV0YSA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0cmwgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6ICR7bW9kfWApXG4gICAgfVxuICB9XG5cbiAgaWYgKGFsdCkge1xuICAgIHJlc3VsdCA9IGBBbHQtJHtyZXN1bHR9YFxuICB9XG5cbiAgaWYgKGN0cmwpIHtcbiAgICByZXN1bHQgPSBgQ3RybC0ke3Jlc3VsdH1gXG4gIH1cblxuICBpZiAobWV0YSkge1xuICAgIHJlc3VsdCA9IGBNZXRhLSR7cmVzdWx0fWBcbiAgfVxuXG4gIGlmIChzaGlmdCkge1xuICAgIHJlc3VsdCA9IGBTaGlmdC0ke3Jlc3VsdH1gXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBrZXlib2FyZFNob3J0Y3V0OiB7XG4gICAgICAvKipcbiAgICAgICAqIFRyaWdnZXIgYSBrZXlib2FyZCBzaG9ydGN1dC5cbiAgICAgICAqL1xuICAgICAga2V5Ym9hcmRTaG9ydGN1dDogKG5hbWU6IHN0cmluZykgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGtleWJvYXJkU2hvcnRjdXQ6IFJhd0NvbW1hbmRzWydrZXlib2FyZFNob3J0Y3V0J10gPSBuYW1lID0+ICh7XG4gIGVkaXRvcixcbiAgdmlldyxcbiAgdHIsXG4gIGRpc3BhdGNoLFxufSkgPT4ge1xuICBjb25zdCBrZXlzID0gbm9ybWFsaXplS2V5TmFtZShuYW1lKS5zcGxpdCgvLSg/ISQpLylcbiAgY29uc3Qga2V5ID0ga2V5cy5maW5kKGl0ZW0gPT4gIVsnQWx0JywgJ0N0cmwnLCAnTWV0YScsICdTaGlmdCddLmluY2x1ZGVzKGl0ZW0pKVxuICBjb25zdCBldmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywge1xuICAgIGtleToga2V5ID09PSAnU3BhY2UnXG4gICAgICA/ICcgJ1xuICAgICAgOiBrZXksXG4gICAgYWx0S2V5OiBrZXlzLmluY2x1ZGVzKCdBbHQnKSxcbiAgICBjdHJsS2V5OiBrZXlzLmluY2x1ZGVzKCdDdHJsJyksXG4gICAgbWV0YUtleToga2V5cy5pbmNsdWRlcygnTWV0YScpLFxuICAgIHNoaWZ0S2V5OiBrZXlzLmluY2x1ZGVzKCdTaGlmdCcpLFxuICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgfSlcblxuICBjb25zdCBjYXB0dXJlZFRyYW5zYWN0aW9uID0gZWRpdG9yLmNhcHR1cmVUcmFuc2FjdGlvbigoKSA9PiB7XG4gICAgdmlldy5zb21lUHJvcCgnaGFuZGxlS2V5RG93bicsIGYgPT4gZih2aWV3LCBldmVudCkpXG4gIH0pXG5cbiAgY2FwdHVyZWRUcmFuc2FjdGlvbj8uc3RlcHMuZm9yRWFjaChzdGVwID0+IHtcbiAgICBjb25zdCBuZXdTdGVwID0gc3RlcC5tYXAodHIubWFwcGluZylcblxuICAgIGlmIChuZXdTdGVwICYmIGRpc3BhdGNoKSB7XG4gICAgICB0ci5tYXliZVN0ZXAobmV3U3RlcClcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IEVkaXRvclN0YXRlIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgTm9kZVJhbmdlIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBvYmplY3RJbmNsdWRlcyB9IGZyb20gJy4uL3V0aWxpdGllcy9vYmplY3RJbmNsdWRlcy5qcydcbmltcG9ydCB7IGdldE5vZGVUeXBlIH0gZnJvbSAnLi9nZXROb2RlVHlwZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUFjdGl2ZShcbiAgc3RhdGU6IEVkaXRvclN0YXRlLFxuICB0eXBlT3JOYW1lOiBOb2RlVHlwZSB8IHN0cmluZyB8IG51bGwsXG4gIGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSxcbik6IGJvb2xlYW4ge1xuICBjb25zdCB7IGZyb20sIHRvLCBlbXB0eSB9ID0gc3RhdGUuc2VsZWN0aW9uXG4gIGNvbnN0IHR5cGUgPSB0eXBlT3JOYW1lID8gZ2V0Tm9kZVR5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKSA6IG51bGxcblxuICBjb25zdCBub2RlUmFuZ2VzOiBOb2RlUmFuZ2VbXSA9IFtdXG5cbiAgc3RhdGUuZG9jLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgKG5vZGUsIHBvcykgPT4ge1xuICAgIGlmIChub2RlLmlzVGV4dCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgcmVsYXRpdmVGcm9tID0gTWF0aC5tYXgoZnJvbSwgcG9zKVxuICAgIGNvbnN0IHJlbGF0aXZlVG8gPSBNYXRoLm1pbih0bywgcG9zICsgbm9kZS5ub2RlU2l6ZSlcblxuICAgIG5vZGVSYW5nZXMucHVzaCh7XG4gICAgICBub2RlLFxuICAgICAgZnJvbTogcmVsYXRpdmVGcm9tLFxuICAgICAgdG86IHJlbGF0aXZlVG8sXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBzZWxlY3Rpb25SYW5nZSA9IHRvIC0gZnJvbVxuICBjb25zdCBtYXRjaGVkTm9kZVJhbmdlcyA9IG5vZGVSYW5nZXNcbiAgICAuZmlsdGVyKG5vZGVSYW5nZSA9PiB7XG4gICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHR5cGUubmFtZSA9PT0gbm9kZVJhbmdlLm5vZGUudHlwZS5uYW1lXG4gICAgfSlcbiAgICAuZmlsdGVyKG5vZGVSYW5nZSA9PiBvYmplY3RJbmNsdWRlcyhub2RlUmFuZ2Uubm9kZS5hdHRycywgYXR0cmlidXRlcywgeyBzdHJpY3Q6IGZhbHNlIH0pKVxuXG4gIGlmIChlbXB0eSkge1xuICAgIHJldHVybiAhIW1hdGNoZWROb2RlUmFuZ2VzLmxlbmd0aFxuICB9XG5cbiAgY29uc3QgcmFuZ2UgPSBtYXRjaGVkTm9kZVJhbmdlcy5yZWR1Y2UoKHN1bSwgbm9kZVJhbmdlKSA9PiBzdW0gKyBub2RlUmFuZ2UudG8gLSBub2RlUmFuZ2UuZnJvbSwgMClcblxuICByZXR1cm4gcmFuZ2UgPj0gc2VsZWN0aW9uUmFuZ2Vcbn1cbiIsImltcG9ydCB7IGxpZnQgYXMgb3JpZ2luYWxMaWZ0IH0gZnJvbSAnQHRpcHRhcC9wbS9jb21tYW5kcydcbmltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgZ2V0Tm9kZVR5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE5vZGVUeXBlLmpzJ1xuaW1wb3J0IHsgaXNOb2RlQWN0aXZlIH0gZnJvbSAnLi4vaGVscGVycy9pc05vZGVBY3RpdmUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgbGlmdDoge1xuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmVzIGFuIGV4aXN0aW5nIHdyYXAuXG4gICAgICAgKi9cbiAgICAgIGxpZnQ6ICh0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSwgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxpZnQ6IFJhd0NvbW1hbmRzWydsaWZ0J10gPSAodHlwZU9yTmFtZSwgYXR0cmlidXRlcyA9IHt9KSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB0eXBlID0gZ2V0Tm9kZVR5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuICBjb25zdCBpc0FjdGl2ZSA9IGlzTm9kZUFjdGl2ZShzdGF0ZSwgdHlwZSwgYXR0cmlidXRlcylcblxuICBpZiAoIWlzQWN0aXZlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gb3JpZ2luYWxMaWZ0KHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IGxpZnRFbXB0eUJsb2NrIGFzIG9yaWdpbmFsTGlmdEVtcHR5QmxvY2sgfSBmcm9tICdAdGlwdGFwL3BtL2NvbW1hbmRzJ1xuXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgbGlmdEVtcHR5QmxvY2s6IHtcbiAgICAgIC8qKlxuICAgICAgICogTGlmdCBibG9jayBpZiBlbXB0eS5cbiAgICAgICAqL1xuICAgICAgbGlmdEVtcHR5QmxvY2s6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsaWZ0RW1wdHlCbG9jazogUmF3Q29tbWFuZHNbJ2xpZnRFbXB0eUJsb2NrJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxMaWZ0RW1wdHlCbG9jayhzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQgeyBsaWZ0TGlzdEl0ZW0gYXMgb3JpZ2luYWxMaWZ0TGlzdEl0ZW0gfSBmcm9tICdAdGlwdGFwL3BtL3NjaGVtYS1saXN0J1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgbGlmdExpc3RJdGVtOiB7XG4gICAgICAvKipcbiAgICAgICAqIExpZnQgdGhlIGxpc3QgaXRlbSBpbnRvIGEgd3JhcHBpbmcgbGlzdC5cbiAgICAgICAqL1xuICAgICAgbGlmdExpc3RJdGVtOiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxpZnRMaXN0SXRlbTogUmF3Q29tbWFuZHNbJ2xpZnRMaXN0SXRlbSddID0gdHlwZU9yTmFtZSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB0eXBlID0gZ2V0Tm9kZVR5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuXG4gIHJldHVybiBvcmlnaW5hbExpZnRMaXN0SXRlbSh0eXBlKShzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCJpbXBvcnQgeyBuZXdsaW5lSW5Db2RlIGFzIG9yaWdpbmFsTmV3bGluZUluQ29kZSB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBuZXdsaW5lSW5Db2RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIEFkZCBhIG5ld2xpbmUgY2hhcmFjdGVyIGluIGNvZGUuXG4gICAgICAgKi9cbiAgICAgIG5ld2xpbmVJbkNvZGU6ICgpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG5ld2xpbmVJbkNvZGU6IFJhd0NvbW1hbmRzWyduZXdsaW5lSW5Db2RlJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxOZXdsaW5lSW5Db2RlKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IFNjaGVtYSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFUeXBlTmFtZUJ5TmFtZShuYW1lOiBzdHJpbmcsIHNjaGVtYTogU2NoZW1hKTogJ25vZGUnIHwgJ21hcmsnIHwgbnVsbCB7XG4gIGlmIChzY2hlbWEubm9kZXNbbmFtZV0pIHtcbiAgICByZXR1cm4gJ25vZGUnXG4gIH1cblxuICBpZiAoc2NoZW1hLm1hcmtzW25hbWVdKSB7XG4gICAgcmV0dXJuICdtYXJrJ1xuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cbiIsIi8qKlxuICogUmVtb3ZlIGEgcHJvcGVydHkgb3IgYW4gYXJyYXkgb2YgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdFxuICogQHBhcmFtIG9iaiBPYmplY3RcbiAqIEBwYXJhbSBrZXkgS2V5IHRvIHJlbW92ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvcHMob2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBwcm9wT3JQcm9wczogc3RyaW5nIHwgc3RyaW5nW10pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgY29uc3QgcHJvcHMgPSB0eXBlb2YgcHJvcE9yUHJvcHMgPT09ICdzdHJpbmcnXG4gICAgPyBbcHJvcE9yUHJvcHNdXG4gICAgOiBwcm9wT3JQcm9wc1xuXG4gIHJldHVybiBPYmplY3RcbiAgICAua2V5cyhvYmopXG4gICAgLnJlZHVjZSgobmV3T2JqOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBwcm9wKSA9PiB7XG4gICAgICBpZiAoIXByb3BzLmluY2x1ZGVzKHByb3ApKSB7XG4gICAgICAgIG5ld09ialtwcm9wXSA9IG9ialtwcm9wXVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3T2JqXG4gICAgfSwge30pXG59XG4iLCJpbXBvcnQgeyBNYXJrVHlwZSwgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXRNYXJrVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0TWFya1R5cGUuanMnXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBnZXRTY2hlbWFUeXBlTmFtZUJ5TmFtZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0U2NoZW1hVHlwZU5hbWVCeU5hbWUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgZGVsZXRlUHJvcHMgfSBmcm9tICcuLi91dGlsaXRpZXMvZGVsZXRlUHJvcHMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICByZXNldEF0dHJpYnV0ZXM6IHtcbiAgICAgIC8qKlxuICAgICAgICogUmVzZXRzIHNvbWUgbm9kZSBhdHRyaWJ1dGVzIHRvIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICovXG4gICAgICByZXNldEF0dHJpYnV0ZXM6IChcbiAgICAgICAgdHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUgfCBNYXJrVHlwZSxcbiAgICAgICAgYXR0cmlidXRlczogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgICApID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlc2V0QXR0cmlidXRlczogUmF3Q29tbWFuZHNbJ3Jlc2V0QXR0cmlidXRlcyddID0gKHR5cGVPck5hbWUsIGF0dHJpYnV0ZXMpID0+ICh7IHRyLCBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBsZXQgbm9kZVR5cGU6IE5vZGVUeXBlIHwgbnVsbCA9IG51bGxcbiAgbGV0IG1hcmtUeXBlOiBNYXJrVHlwZSB8IG51bGwgPSBudWxsXG5cbiAgY29uc3Qgc2NoZW1hVHlwZSA9IGdldFNjaGVtYVR5cGVOYW1lQnlOYW1lKFxuICAgIHR5cGVvZiB0eXBlT3JOYW1lID09PSAnc3RyaW5nJyA/IHR5cGVPck5hbWUgOiB0eXBlT3JOYW1lLm5hbWUsXG4gICAgc3RhdGUuc2NoZW1hLFxuICApXG5cbiAgaWYgKCFzY2hlbWFUeXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ25vZGUnKSB7XG4gICAgbm9kZVR5cGUgPSBnZXROb2RlVHlwZSh0eXBlT3JOYW1lIGFzIE5vZGVUeXBlLCBzdGF0ZS5zY2hlbWEpXG4gIH1cblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ21hcmsnKSB7XG4gICAgbWFya1R5cGUgPSBnZXRNYXJrVHlwZSh0eXBlT3JOYW1lIGFzIE1hcmtUeXBlLCBzdGF0ZS5zY2hlbWEpXG4gIH1cblxuICBpZiAoZGlzcGF0Y2gpIHtcbiAgICB0ci5zZWxlY3Rpb24ucmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgc3RhdGUuZG9jLm5vZGVzQmV0d2VlbihyYW5nZS4kZnJvbS5wb3MsIHJhbmdlLiR0by5wb3MsIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgaWYgKG5vZGVUeXBlICYmIG5vZGVUeXBlID09PSBub2RlLnR5cGUpIHtcbiAgICAgICAgICB0ci5zZXROb2RlTWFya3VwKHBvcywgdW5kZWZpbmVkLCBkZWxldGVQcm9wcyhub2RlLmF0dHJzLCBhdHRyaWJ1dGVzKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtYXJrVHlwZSAmJiBub2RlLm1hcmtzLmxlbmd0aCkge1xuICAgICAgICAgIG5vZGUubWFya3MuZm9yRWFjaChtYXJrID0+IHtcbiAgICAgICAgICAgIGlmIChtYXJrVHlwZSA9PT0gbWFyay50eXBlKSB7XG4gICAgICAgICAgICAgIHRyLmFkZE1hcmsoXG4gICAgICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgICAgIHBvcyArIG5vZGUubm9kZVNpemUsXG4gICAgICAgICAgICAgICAgbWFya1R5cGUuY3JlYXRlKGRlbGV0ZVByb3BzKG1hcmsuYXR0cnMsIGF0dHJpYnV0ZXMpKSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2Nyb2xsSW50b1ZpZXc6IHtcbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIHRoZSBzZWxlY3Rpb24gaW50byB2aWV3LlxuICAgICAgICovXG4gICAgICBzY3JvbGxJbnRvVmlldzogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNjcm9sbEludG9WaWV3OiBSYXdDb21tYW5kc1snc2Nyb2xsSW50b1ZpZXcnXSA9ICgpID0+ICh7IHRyLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGlmIChkaXNwYXRjaCkge1xuICAgIHRyLnNjcm9sbEludG9WaWV3KClcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2VsZWN0QWxsOiB7XG4gICAgICAvKipcbiAgICAgICAqIFNlbGVjdCB0aGUgd2hvbGUgZG9jdW1lbnQuXG4gICAgICAgKi9cbiAgICAgIHNlbGVjdEFsbDogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdEFsbDogUmF3Q29tbWFuZHNbJ3NlbGVjdEFsbCddID0gKCkgPT4gKHsgdHIsIGNvbW1hbmRzIH0pID0+IHtcbiAgcmV0dXJuIGNvbW1hbmRzLnNldFRleHRTZWxlY3Rpb24oe1xuICAgIGZyb206IDAsXG4gICAgdG86IHRyLmRvYy5jb250ZW50LnNpemUsXG4gIH0pXG59XG4iLCJpbXBvcnQgeyBzZWxlY3ROb2RlQmFja3dhcmQgYXMgb3JpZ2luYWxTZWxlY3ROb2RlQmFja3dhcmQgfSBmcm9tICdAdGlwdGFwL3BtL2NvbW1hbmRzJ1xuXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2VsZWN0Tm9kZUJhY2t3YXJkOiB7XG4gICAgICAvKipcbiAgICAgICAqIFNlbGVjdCBhIG5vZGUgYmFja3dhcmQuXG4gICAgICAgKi9cbiAgICAgIHNlbGVjdE5vZGVCYWNrd2FyZDogKCkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0Tm9kZUJhY2t3YXJkOiBSYXdDb21tYW5kc1snc2VsZWN0Tm9kZUJhY2t3YXJkJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxTZWxlY3ROb2RlQmFja3dhcmQoc3RhdGUsIGRpc3BhdGNoKVxufVxuIiwiaW1wb3J0IHsgc2VsZWN0Tm9kZUZvcndhcmQgYXMgb3JpZ2luYWxTZWxlY3ROb2RlRm9yd2FyZCB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzZWxlY3ROb2RlRm9yd2FyZDoge1xuICAgICAgLyoqXG4gICAgICAgKiBTZWxlY3QgYSBub2RlIGZvcndhcmQuXG4gICAgICAgKi9cbiAgICAgIHNlbGVjdE5vZGVGb3J3YXJkOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3ROb2RlRm9yd2FyZDogUmF3Q29tbWFuZHNbJ3NlbGVjdE5vZGVGb3J3YXJkJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxTZWxlY3ROb2RlRm9yd2FyZChzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCJpbXBvcnQgeyBzZWxlY3RQYXJlbnROb2RlIGFzIG9yaWdpbmFsU2VsZWN0UGFyZW50Tm9kZSB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzZWxlY3RQYXJlbnROb2RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIFNlbGVjdCB0aGUgcGFyZW50IG5vZGUuXG4gICAgICAgKi9cbiAgICAgIHNlbGVjdFBhcmVudE5vZGU6ICgpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdFBhcmVudE5vZGU6IFJhd0NvbW1hbmRzWydzZWxlY3RQYXJlbnROb2RlJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICByZXR1cm4gb3JpZ2luYWxTZWxlY3RQYXJlbnROb2RlKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsIi8vIEB0cy1pZ25vcmVcbi8vIFRPRE86IGFkZCB0eXBlcyB0byBAdHlwZXMvcHJvc2VtaXJyb3ItY29tbWFuZHNcbmltcG9ydCB7IHNlbGVjdFRleHRibG9ja0VuZCBhcyBvcmlnaW5hbFNlbGVjdFRleHRibG9ja0VuZCB9IGZyb20gJ0B0aXB0YXAvcG0vY29tbWFuZHMnXG5cbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzZWxlY3RUZXh0YmxvY2tFbmQ6IHtcbiAgICAgIC8qKlxuICAgICAgICogTW92ZXMgdGhlIGN1cnNvciB0byB0aGUgZW5kIG9mIGN1cnJlbnQgdGV4dCBibG9jay5cbiAgICAgICAqL1xuICAgICAgc2VsZWN0VGV4dGJsb2NrRW5kOiAoKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RUZXh0YmxvY2tFbmQ6IFJhd0NvbW1hbmRzWydzZWxlY3RUZXh0YmxvY2tFbmQnXSA9ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIHJldHVybiBvcmlnaW5hbFNlbGVjdFRleHRibG9ja0VuZChzdGF0ZSwgZGlzcGF0Y2gpXG59XG4iLCIvLyBAdHMtaWdub3JlXG4vLyBUT0RPOiBhZGQgdHlwZXMgdG8gQHR5cGVzL3Byb3NlbWlycm9yLWNvbW1hbmRzXG5pbXBvcnQgeyBzZWxlY3RUZXh0YmxvY2tTdGFydCBhcyBvcmlnaW5hbFNlbGVjdFRleHRibG9ja1N0YXJ0IH0gZnJvbSAnQHRpcHRhcC9wbS9jb21tYW5kcydcblxuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHNlbGVjdFRleHRibG9ja1N0YXJ0OiB7XG4gICAgICAvKipcbiAgICAgICAqIE1vdmVzIHRoZSBjdXJzb3IgdG8gdGhlIHN0YXJ0IG9mIGN1cnJlbnQgdGV4dCBibG9jay5cbiAgICAgICAqL1xuICAgICAgc2VsZWN0VGV4dGJsb2NrU3RhcnQ6ICgpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdFRleHRibG9ja1N0YXJ0OiBSYXdDb21tYW5kc1snc2VsZWN0VGV4dGJsb2NrU3RhcnQnXSA9ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIHJldHVybiBvcmlnaW5hbFNlbGVjdFRleHRibG9ja1N0YXJ0KHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlLCBQYXJzZU9wdGlvbnMsIFNjaGVtYSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IENvbnRlbnQgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IGNyZWF0ZU5vZGVGcm9tQ29udGVudCB9IGZyb20gJy4vY3JlYXRlTm9kZUZyb21Db250ZW50LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnQoXG4gIGNvbnRlbnQ6IENvbnRlbnQsXG4gIHNjaGVtYTogU2NoZW1hLFxuICBwYXJzZU9wdGlvbnM6IFBhcnNlT3B0aW9ucyA9IHt9LFxuKTogUHJvc2VNaXJyb3JOb2RlIHtcbiAgcmV0dXJuIGNyZWF0ZU5vZGVGcm9tQ29udGVudChjb250ZW50LCBzY2hlbWEsIHsgc2xpY2U6IGZhbHNlLCBwYXJzZU9wdGlvbnMgfSkgYXMgUHJvc2VNaXJyb3JOb2RlXG59XG4iLCJpbXBvcnQgeyBQYXJzZU9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBjcmVhdGVEb2N1bWVudCB9IGZyb20gJy4uL2hlbHBlcnMvY3JlYXRlRG9jdW1lbnQuanMnXG5pbXBvcnQgeyBDb250ZW50LCBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2V0Q29udGVudDoge1xuICAgICAgLyoqXG4gICAgICAgKiBSZXBsYWNlIHRoZSB3aG9sZSBkb2N1bWVudCB3aXRoIG5ldyBjb250ZW50LlxuICAgICAgICovXG4gICAgICBzZXRDb250ZW50OiAoXG4gICAgICAgIGNvbnRlbnQ6IENvbnRlbnQsXG4gICAgICAgIGVtaXRVcGRhdGU/OiBib29sZWFuLFxuICAgICAgICBwYXJzZU9wdGlvbnM/OiBQYXJzZU9wdGlvbnMsXG4gICAgICApID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNldENvbnRlbnQ6IFJhd0NvbW1hbmRzWydzZXRDb250ZW50J10gPSAoY29udGVudCwgZW1pdFVwZGF0ZSA9IGZhbHNlLCBwYXJzZU9wdGlvbnMgPSB7fSkgPT4gKHsgdHIsIGVkaXRvciwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCB7IGRvYyB9ID0gdHJcbiAgY29uc3QgZG9jdW1lbnQgPSBjcmVhdGVEb2N1bWVudChjb250ZW50LCBlZGl0b3Iuc2NoZW1hLCBwYXJzZU9wdGlvbnMpXG5cbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgdHIucmVwbGFjZVdpdGgoMCwgZG9jLmNvbnRlbnQuc2l6ZSwgZG9jdW1lbnQpLnNldE1ldGEoJ3ByZXZlbnRVcGRhdGUnLCAhZW1pdFVwZGF0ZSlcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBNYXJrLCBNYXJrVHlwZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQgeyBFZGl0b3JTdGF0ZSB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IGdldE1hcmtUeXBlIH0gZnJvbSAnLi9nZXRNYXJrVHlwZS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmtBdHRyaWJ1dGVzKFxuICBzdGF0ZTogRWRpdG9yU3RhdGUsXG4gIHR5cGVPck5hbWU6IHN0cmluZyB8IE1hcmtUeXBlLFxuKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gIGNvbnN0IHR5cGUgPSBnZXRNYXJrVHlwZSh0eXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG4gIGNvbnN0IHsgZnJvbSwgdG8sIGVtcHR5IH0gPSBzdGF0ZS5zZWxlY3Rpb25cbiAgY29uc3QgbWFya3M6IE1hcmtbXSA9IFtdXG5cbiAgaWYgKGVtcHR5KSB7XG4gICAgaWYgKHN0YXRlLnN0b3JlZE1hcmtzKSB7XG4gICAgICBtYXJrcy5wdXNoKC4uLnN0YXRlLnN0b3JlZE1hcmtzKVxuICAgIH1cblxuICAgIG1hcmtzLnB1c2goLi4uc3RhdGUuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpXG4gIH0gZWxzZSB7XG4gICAgc3RhdGUuZG9jLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgbm9kZSA9PiB7XG4gICAgICBtYXJrcy5wdXNoKC4uLm5vZGUubWFya3MpXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IG1hcmsgPSBtYXJrcy5maW5kKG1hcmtJdGVtID0+IG1hcmtJdGVtLnR5cGUubmFtZSA9PT0gdHlwZS5uYW1lKVxuXG4gIGlmICghbWFyaykge1xuICAgIHJldHVybiB7fVxuICB9XG5cbiAgcmV0dXJuIHsgLi4ubWFyay5hdHRycyB9XG59XG4iLCJpbXBvcnQgeyBDb250ZW50TWF0Y2gsIE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRCbG9ja0F0KG1hdGNoOiBDb250ZW50TWF0Y2gpOiBOb2RlVHlwZSB8IG51bGwge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoLmVkZ2VDb3VudDsgaSArPSAxKSB7XG4gICAgY29uc3QgeyB0eXBlIH0gPSBtYXRjaC5lZGdlKGkpXG5cbiAgICBpZiAodHlwZS5pc1RleHRibG9jayAmJiAhdHlwZS5oYXNSZXF1aXJlZEF0dHJzKCkpIHtcbiAgICAgIHJldHVybiB0eXBlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlLCBSZXNvbHZlZFBvcyB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3MoXG4gICRwb3M6IFJlc29sdmVkUG9zLFxuICBwcmVkaWNhdGU6IFByZWRpY2F0ZSxcbik6XG4gIHwge1xuICAgICAgcG9zOiBudW1iZXJcbiAgICAgIHN0YXJ0OiBudW1iZXJcbiAgICAgIGRlcHRoOiBudW1iZXJcbiAgICAgIG5vZGU6IFByb3NlTWlycm9yTm9kZVxuICAgIH1cbiAgfCB1bmRlZmluZWQge1xuICBmb3IgKGxldCBpID0gJHBvcy5kZXB0aDsgaSA+IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IG5vZGUgPSAkcG9zLm5vZGUoaSlcblxuICAgIGlmIChwcmVkaWNhdGUobm9kZSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvczogaSA+IDAgPyAkcG9zLmJlZm9yZShpKSA6IDAsXG4gICAgICAgIHN0YXJ0OiAkcG9zLnN0YXJ0KGkpLFxuICAgICAgICBkZXB0aDogaSxcbiAgICAgICAgbm9kZSxcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3MgfSBmcm9tICcuL2ZpbmRQYXJlbnROb2RlQ2xvc2VzdFRvUG9zLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudE5vZGUocHJlZGljYXRlOiBQcmVkaWNhdGUpIHtcbiAgcmV0dXJuIChzZWxlY3Rpb246IFNlbGVjdGlvbikgPT4gZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3Moc2VsZWN0aW9uLiRmcm9tLCBwcmVkaWNhdGUpXG59XG4iLCJpbXBvcnQgeyBET01TZXJpYWxpemVyLCBGcmFnbWVudCwgU2NoZW1hIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhUTUxGcm9tRnJhZ21lbnQoZnJhZ21lbnQ6IEZyYWdtZW50LCBzY2hlbWE6IFNjaGVtYSk6IHN0cmluZyB7XG4gIGNvbnN0IGRvY3VtZW50RnJhZ21lbnQgPSBET01TZXJpYWxpemVyLmZyb21TY2hlbWEoc2NoZW1hKS5zZXJpYWxpemVGcmFnbWVudChmcmFnbWVudClcblxuICBjb25zdCB0ZW1wb3JhcnlEb2N1bWVudCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpXG4gIGNvbnN0IGNvbnRhaW5lciA9IHRlbXBvcmFyeURvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRvY3VtZW50RnJhZ21lbnQpXG5cbiAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUxcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgVGV4dFNlcmlhbGl6ZXIgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IGdldFRleHRCZXR3ZWVuIH0gZnJvbSAnLi9nZXRUZXh0QmV0d2Vlbi5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRleHQoXG4gIG5vZGU6IFByb3NlTWlycm9yTm9kZSxcbiAgb3B0aW9ucz86IHtcbiAgICBibG9ja1NlcGFyYXRvcj86IHN0cmluZ1xuICAgIHRleHRTZXJpYWxpemVycz86IFJlY29yZDxzdHJpbmcsIFRleHRTZXJpYWxpemVyPlxuICB9LFxuKSB7XG4gIGNvbnN0IHJhbmdlID0ge1xuICAgIGZyb206IDAsXG4gICAgdG86IG5vZGUuY29udGVudC5zaXplLFxuICB9XG5cbiAgcmV0dXJuIGdldFRleHRCZXR3ZWVuKG5vZGUsIHJhbmdlLCBvcHRpb25zKVxufVxuIiwiaW1wb3J0IHsgTm9kZSwgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuaW1wb3J0IHsgRWRpdG9yU3RhdGUgfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4vZ2V0Tm9kZVR5cGUuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlQXR0cmlidXRlcyhcbiAgc3RhdGU6IEVkaXRvclN0YXRlLFxuICB0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSxcbik6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBjb25zdCB0eXBlID0gZ2V0Tm9kZVR5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuICBjb25zdCB7IGZyb20sIHRvIH0gPSBzdGF0ZS5zZWxlY3Rpb25cbiAgY29uc3Qgbm9kZXM6IE5vZGVbXSA9IFtdXG5cbiAgc3RhdGUuZG9jLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgbm9kZSA9PiB7XG4gICAgbm9kZXMucHVzaChub2RlKVxuICB9KVxuXG4gIGNvbnN0IG5vZGUgPSBub2Rlcy5yZXZlcnNlKCkuZmluZChub2RlSXRlbSA9PiBub2RlSXRlbS50eXBlLm5hbWUgPT09IHR5cGUubmFtZSlcblxuICBpZiAoIW5vZGUpIHtcbiAgICByZXR1cm4ge31cbiAgfVxuXG4gIHJldHVybiB7IC4uLm5vZGUuYXR0cnMgfVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUsIE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IEVkaXRvclN0YXRlIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgZ2V0TWFya0F0dHJpYnV0ZXMgfSBmcm9tICcuL2dldE1hcmtBdHRyaWJ1dGVzLmpzJ1xuaW1wb3J0IHsgZ2V0Tm9kZUF0dHJpYnV0ZXMgfSBmcm9tICcuL2dldE5vZGVBdHRyaWJ1dGVzLmpzJ1xuaW1wb3J0IHsgZ2V0U2NoZW1hVHlwZU5hbWVCeU5hbWUgfSBmcm9tICcuL2dldFNjaGVtYVR5cGVOYW1lQnlOYW1lLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXR0cmlidXRlcyhcbiAgc3RhdGU6IEVkaXRvclN0YXRlLFxuICB0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSB8IE1hcmtUeXBlLFxuKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gIGNvbnN0IHNjaGVtYVR5cGUgPSBnZXRTY2hlbWFUeXBlTmFtZUJ5TmFtZShcbiAgICB0eXBlb2YgdHlwZU9yTmFtZSA9PT0gJ3N0cmluZycgPyB0eXBlT3JOYW1lIDogdHlwZU9yTmFtZS5uYW1lLFxuICAgIHN0YXRlLnNjaGVtYSxcbiAgKVxuXG4gIGlmIChzY2hlbWFUeXBlID09PSAnbm9kZScpIHtcbiAgICByZXR1cm4gZ2V0Tm9kZUF0dHJpYnV0ZXMoc3RhdGUsIHR5cGVPck5hbWUgYXMgTm9kZVR5cGUpXG4gIH1cblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ21hcmsnKSB7XG4gICAgcmV0dXJuIGdldE1hcmtBdHRyaWJ1dGVzKHN0YXRlLCB0eXBlT3JOYW1lIGFzIE1hcmtUeXBlKVxuICB9XG5cbiAgcmV0dXJuIHt9XG59XG4iLCJpbXBvcnQgeyBOb2RlIGFzIFByb3NlTWlycm9yTm9kZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IE1hcmtSYW5nZSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgZ2V0TWFya1JhbmdlIH0gZnJvbSAnLi9nZXRNYXJrUmFuZ2UuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrc0JldHdlZW4oZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCBkb2M6IFByb3NlTWlycm9yTm9kZSk6IE1hcmtSYW5nZVtdIHtcbiAgY29uc3QgbWFya3M6IE1hcmtSYW5nZVtdID0gW11cblxuICAvLyBnZXQgYWxsIGluY2x1c2l2ZSBtYXJrcyBvbiBlbXB0eSBzZWxlY3Rpb25cbiAgaWYgKGZyb20gPT09IHRvKSB7XG4gICAgZG9jXG4gICAgICAucmVzb2x2ZShmcm9tKVxuICAgICAgLm1hcmtzKClcbiAgICAgIC5mb3JFYWNoKG1hcmsgPT4ge1xuICAgICAgICBjb25zdCAkcG9zID0gZG9jLnJlc29sdmUoZnJvbSAtIDEpXG4gICAgICAgIGNvbnN0IHJhbmdlID0gZ2V0TWFya1JhbmdlKCRwb3MsIG1hcmsudHlwZSlcblxuICAgICAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBtYXJrcy5wdXNoKHtcbiAgICAgICAgICBtYXJrLFxuICAgICAgICAgIC4uLnJhbmdlLFxuICAgICAgICB9KVxuICAgICAgfSlcbiAgfSBlbHNlIHtcbiAgICBkb2Mubm9kZXNCZXR3ZWVuKGZyb20sIHRvLCAobm9kZSwgcG9zKSA9PiB7XG4gICAgICBpZiAoIW5vZGUgfHwgbm9kZS5ub2RlU2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBtYXJrcy5wdXNoKFxuICAgICAgICAuLi5ub2RlLm1hcmtzLm1hcChtYXJrID0+ICh7XG4gICAgICAgICAgZnJvbTogcG9zLFxuICAgICAgICAgIHRvOiBwb3MgKyBub2RlLm5vZGVTaXplLFxuICAgICAgICAgIG1hcmssXG4gICAgICAgIH0pKSxcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIG1hcmtzXG59XG4iLCJpbXBvcnQgeyBFeHRlbnNpb25BdHRyaWJ1dGUgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNwbGl0dGVkQXR0cmlidXRlcyhcbiAgZXh0ZW5zaW9uQXR0cmlidXRlczogRXh0ZW5zaW9uQXR0cmlidXRlW10sXG4gIHR5cGVOYW1lOiBzdHJpbmcsXG4gIGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3RcbiAgICAuZW50cmllcyhhdHRyaWJ1dGVzKVxuICAgIC5maWx0ZXIoKFtuYW1lXSkgPT4ge1xuICAgICAgY29uc3QgZXh0ZW5zaW9uQXR0cmlidXRlID0gZXh0ZW5zaW9uQXR0cmlidXRlcy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS50eXBlID09PSB0eXBlTmFtZSAmJiBpdGVtLm5hbWUgPT09IG5hbWVcbiAgICAgIH0pXG5cbiAgICAgIGlmICghZXh0ZW5zaW9uQXR0cmlidXRlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXh0ZW5zaW9uQXR0cmlidXRlLmF0dHJpYnV0ZS5rZWVwT25TcGxpdFxuICAgIH0pKVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuaW1wb3J0IHsgRWRpdG9yU3RhdGUgfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBNYXJrUmFuZ2UgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IG9iamVjdEluY2x1ZGVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzL29iamVjdEluY2x1ZGVzLmpzJ1xuaW1wb3J0IHsgZ2V0TWFya1R5cGUgfSBmcm9tICcuL2dldE1hcmtUeXBlLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gaXNNYXJrQWN0aXZlKFxuICBzdGF0ZTogRWRpdG9yU3RhdGUsXG4gIHR5cGVPck5hbWU6IE1hcmtUeXBlIHwgc3RyaW5nIHwgbnVsbCxcbiAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgZW1wdHksIHJhbmdlcyB9ID0gc3RhdGUuc2VsZWN0aW9uXG4gIGNvbnN0IHR5cGUgPSB0eXBlT3JOYW1lID8gZ2V0TWFya1R5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKSA6IG51bGxcblxuICBpZiAoZW1wdHkpIHtcbiAgICByZXR1cm4gISEoc3RhdGUuc3RvcmVkTWFya3MgfHwgc3RhdGUuc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCkpXG4gICAgICAuZmlsdGVyKG1hcmsgPT4ge1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHR5cGUubmFtZSA9PT0gbWFyay50eXBlLm5hbWVcbiAgICAgIH0pXG4gICAgICAuZmluZChtYXJrID0+IG9iamVjdEluY2x1ZGVzKG1hcmsuYXR0cnMsIGF0dHJpYnV0ZXMsIHsgc3RyaWN0OiBmYWxzZSB9KSlcbiAgfVxuXG4gIGxldCBzZWxlY3Rpb25SYW5nZSA9IDBcbiAgY29uc3QgbWFya1JhbmdlczogTWFya1JhbmdlW10gPSBbXVxuXG4gIHJhbmdlcy5mb3JFYWNoKCh7ICRmcm9tLCAkdG8gfSkgPT4ge1xuICAgIGNvbnN0IGZyb20gPSAkZnJvbS5wb3NcbiAgICBjb25zdCB0byA9ICR0by5wb3NcblxuICAgIHN0YXRlLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgIGlmICghbm9kZS5pc1RleHQgJiYgIW5vZGUubWFya3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCByZWxhdGl2ZUZyb20gPSBNYXRoLm1heChmcm9tLCBwb3MpXG4gICAgICBjb25zdCByZWxhdGl2ZVRvID0gTWF0aC5taW4odG8sIHBvcyArIG5vZGUubm9kZVNpemUpXG4gICAgICBjb25zdCByYW5nZSA9IHJlbGF0aXZlVG8gLSByZWxhdGl2ZUZyb21cblxuICAgICAgc2VsZWN0aW9uUmFuZ2UgKz0gcmFuZ2VcblxuICAgICAgbWFya1Jhbmdlcy5wdXNoKFxuICAgICAgICAuLi5ub2RlLm1hcmtzLm1hcChtYXJrID0+ICh7XG4gICAgICAgICAgbWFyayxcbiAgICAgICAgICBmcm9tOiByZWxhdGl2ZUZyb20sXG4gICAgICAgICAgdG86IHJlbGF0aXZlVG8sXG4gICAgICAgIH0pKSxcbiAgICAgIClcbiAgICB9KVxuICB9KVxuXG4gIGlmIChzZWxlY3Rpb25SYW5nZSA9PT0gMCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gY2FsY3VsYXRlIHJhbmdlIG9mIG1hdGNoZWQgbWFya1xuICBjb25zdCBtYXRjaGVkUmFuZ2UgPSBtYXJrUmFuZ2VzXG4gICAgLmZpbHRlcihtYXJrUmFuZ2UgPT4ge1xuICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0eXBlLm5hbWUgPT09IG1hcmtSYW5nZS5tYXJrLnR5cGUubmFtZVxuICAgIH0pXG4gICAgLmZpbHRlcihtYXJrUmFuZ2UgPT4gb2JqZWN0SW5jbHVkZXMobWFya1JhbmdlLm1hcmsuYXR0cnMsIGF0dHJpYnV0ZXMsIHsgc3RyaWN0OiBmYWxzZSB9KSlcbiAgICAucmVkdWNlKChzdW0sIG1hcmtSYW5nZSkgPT4gc3VtICsgbWFya1JhbmdlLnRvIC0gbWFya1JhbmdlLmZyb20sIDApXG5cbiAgLy8gY2FsY3VsYXRlIHJhbmdlIG9mIG1hcmtzIHRoYXQgZXhjbHVkZXMgdGhlIHNlYXJjaGVkIG1hcmtcbiAgLy8gZm9yIGV4YW1wbGUgYGNvZGVgIGRvZXNu4oCZdCBhbGxvdyBhbnkgb3RoZXIgbWFya3NcbiAgY29uc3QgZXhjbHVkZWRSYW5nZSA9IG1hcmtSYW5nZXNcbiAgICAuZmlsdGVyKG1hcmtSYW5nZSA9PiB7XG4gICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG1hcmtSYW5nZS5tYXJrLnR5cGUgIT09IHR5cGUgJiYgbWFya1JhbmdlLm1hcmsudHlwZS5leGNsdWRlcyh0eXBlKVxuICAgIH0pXG4gICAgLnJlZHVjZSgoc3VtLCBtYXJrUmFuZ2UpID0+IHN1bSArIG1hcmtSYW5nZS50byAtIG1hcmtSYW5nZS5mcm9tLCAwKVxuXG4gIC8vIHdlIG9ubHkgaW5jbHVkZSB0aGUgcmVzdWx0IG9mIGBleGNsdWRlZFJhbmdlYFxuICAvLyBpZiB0aGVyZSBpcyBhIG1hdGNoIGF0IGFsbFxuICBjb25zdCByYW5nZSA9IG1hdGNoZWRSYW5nZSA+IDAgPyBtYXRjaGVkUmFuZ2UgKyBleGNsdWRlZFJhbmdlIDogbWF0Y2hlZFJhbmdlXG5cbiAgcmV0dXJuIHJhbmdlID49IHNlbGVjdGlvblJhbmdlXG59XG4iLCJpbXBvcnQgeyBFZGl0b3JTdGF0ZSB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IGdldFNjaGVtYVR5cGVOYW1lQnlOYW1lIH0gZnJvbSAnLi9nZXRTY2hlbWFUeXBlTmFtZUJ5TmFtZS5qcydcbmltcG9ydCB7IGlzTWFya0FjdGl2ZSB9IGZyb20gJy4vaXNNYXJrQWN0aXZlLmpzJ1xuaW1wb3J0IHsgaXNOb2RlQWN0aXZlIH0gZnJvbSAnLi9pc05vZGVBY3RpdmUuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FjdGl2ZShcbiAgc3RhdGU6IEVkaXRvclN0YXRlLFxuICBuYW1lOiBzdHJpbmcgfCBudWxsLFxuICBhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30sXG4pOiBib29sZWFuIHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIGlzTm9kZUFjdGl2ZShzdGF0ZSwgbnVsbCwgYXR0cmlidXRlcykgfHwgaXNNYXJrQWN0aXZlKHN0YXRlLCBudWxsLCBhdHRyaWJ1dGVzKVxuICB9XG5cbiAgY29uc3Qgc2NoZW1hVHlwZSA9IGdldFNjaGVtYVR5cGVOYW1lQnlOYW1lKG5hbWUsIHN0YXRlLnNjaGVtYSlcblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ25vZGUnKSB7XG4gICAgcmV0dXJuIGlzTm9kZUFjdGl2ZShzdGF0ZSwgbmFtZSwgYXR0cmlidXRlcylcbiAgfVxuXG4gIGlmIChzY2hlbWFUeXBlID09PSAnbWFyaycpIHtcbiAgICByZXR1cm4gaXNNYXJrQWN0aXZlKHN0YXRlLCBuYW1lLCBhdHRyaWJ1dGVzKVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQgeyBnZXRFeHRlbnNpb25GaWVsZCB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0RXh0ZW5zaW9uRmllbGQuanMnXG5pbXBvcnQgeyBOb2RlQ29uZmlnIH0gZnJvbSAnLi4vaW5kZXguanMnXG5pbXBvcnQgeyBFeHRlbnNpb25zIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBjYWxsT3JSZXR1cm4gfSBmcm9tICcuLi91dGlsaXRpZXMvY2FsbE9yUmV0dXJuLmpzJ1xuaW1wb3J0IHsgc3BsaXRFeHRlbnNpb25zIH0gZnJvbSAnLi9zcGxpdEV4dGVuc2lvbnMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpc3QobmFtZTogc3RyaW5nLCBleHRlbnNpb25zOiBFeHRlbnNpb25zKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgbm9kZUV4dGVuc2lvbnMgfSA9IHNwbGl0RXh0ZW5zaW9ucyhleHRlbnNpb25zKVxuICBjb25zdCBleHRlbnNpb24gPSBub2RlRXh0ZW5zaW9ucy5maW5kKGl0ZW0gPT4gaXRlbS5uYW1lID09PSBuYW1lKVxuXG4gIGlmICghZXh0ZW5zaW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBjb25zdCBjb250ZXh0ID0ge1xuICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgIHN0b3JhZ2U6IGV4dGVuc2lvbi5zdG9yYWdlLFxuICB9XG4gIGNvbnN0IGdyb3VwID0gY2FsbE9yUmV0dXJuKGdldEV4dGVuc2lvbkZpZWxkPE5vZGVDb25maWdbJ2dyb3VwJ10+KGV4dGVuc2lvbiwgJ2dyb3VwJywgY29udGV4dCkpXG5cbiAgaWYgKHR5cGVvZiBncm91cCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiBncm91cC5zcGxpdCgnICcpLmluY2x1ZGVzKCdsaXN0Jylcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUVtcHR5KG5vZGU6IFByb3NlTWlycm9yTm9kZSk6IGJvb2xlYW4ge1xuICBjb25zdCBkZWZhdWx0Q29udGVudCA9IG5vZGUudHlwZS5jcmVhdGVBbmRGaWxsKCk/LnRvSlNPTigpXG4gIGNvbnN0IGNvbnRlbnQgPSBub2RlLnRvSlNPTigpXG5cbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRDb250ZW50KSA9PT0gSlNPTi5zdHJpbmdpZnkoY29udGVudClcbn1cbiIsImltcG9ydCB7IE1hcmtUeXBlLCBSZXNvbHZlZFBvcyB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQgeyBFZGl0b3JTdGF0ZSwgVHJhbnNhY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBnZXRNYXJrQXR0cmlidXRlcyB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0TWFya0F0dHJpYnV0ZXMuanMnXG5pbXBvcnQgeyBnZXRNYXJrVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0TWFya1R5cGUuanMnXG5pbXBvcnQgeyBpc1RleHRTZWxlY3Rpb24gfSBmcm9tICcuLi9oZWxwZXJzL2luZGV4LmpzJ1xuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHNldE1hcms6IHtcbiAgICAgIC8qKlxuICAgICAgICogQWRkIGEgbWFyayB3aXRoIG5ldyBhdHRyaWJ1dGVzLlxuICAgICAgICovXG4gICAgICBzZXRNYXJrOiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTWFya1R5cGUsIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNhblNldE1hcmsoc3RhdGU6IEVkaXRvclN0YXRlLCB0cjogVHJhbnNhY3Rpb24sIG5ld01hcmtUeXBlOiBNYXJrVHlwZSkge1xuICBjb25zdCB7IHNlbGVjdGlvbiB9ID0gdHJcbiAgbGV0IGN1cnNvcjogUmVzb2x2ZWRQb3MgfCBudWxsID0gbnVsbFxuXG4gIGlmIChpc1RleHRTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgIGN1cnNvciA9IHNlbGVjdGlvbi4kY3Vyc29yXG4gIH1cblxuICBpZiAoY3Vyc29yKSB7XG4gICAgY29uc3QgY3VycmVudE1hcmtzID0gc3RhdGUuc3RvcmVkTWFya3MgPz8gY3Vyc29yLm1hcmtzKClcblxuICAgIC8vIFRoZXJlIGNhbiBiZSBubyBjdXJyZW50IG1hcmtzIHRoYXQgZXhjbHVkZSB0aGUgbmV3IG1hcmtcbiAgICByZXR1cm4gKFxuICAgICAgISFuZXdNYXJrVHlwZS5pc0luU2V0KGN1cnJlbnRNYXJrcylcbiAgICAgIHx8ICFjdXJyZW50TWFya3Muc29tZShtYXJrID0+IG1hcmsudHlwZS5leGNsdWRlcyhuZXdNYXJrVHlwZSkpXG4gICAgKVxuICB9XG5cbiAgY29uc3QgeyByYW5nZXMgfSA9IHNlbGVjdGlvblxuXG4gIHJldHVybiByYW5nZXMuc29tZSgoeyAkZnJvbSwgJHRvIH0pID0+IHtcbiAgICBsZXQgc29tZU5vZGVTdXBwb3J0c01hcmsgPSAkZnJvbS5kZXB0aCA9PT0gMFxuICAgICAgPyBzdGF0ZS5kb2MuaW5saW5lQ29udGVudCAmJiBzdGF0ZS5kb2MudHlwZS5hbGxvd3NNYXJrVHlwZShuZXdNYXJrVHlwZSlcbiAgICAgIDogZmFsc2VcblxuICAgIHN0YXRlLmRvYy5ub2Rlc0JldHdlZW4oJGZyb20ucG9zLCAkdG8ucG9zLCAobm9kZSwgX3BvcywgcGFyZW50KSA9PiB7XG4gICAgICAvLyBJZiB3ZSBhbHJlYWR5IGZvdW5kIGEgbWFyayB0aGF0IHdlIGNhbiBlbmFibGUsIHJldHVybiBmYWxzZSB0byBieXBhc3MgdGhlIHJlbWFpbmluZyBzZWFyY2hcbiAgICAgIGlmIChzb21lTm9kZVN1cHBvcnRzTWFyaykge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUuaXNJbmxpbmUpIHtcbiAgICAgICAgY29uc3QgcGFyZW50QWxsb3dzTWFya1R5cGUgPSAhcGFyZW50IHx8IHBhcmVudC50eXBlLmFsbG93c01hcmtUeXBlKG5ld01hcmtUeXBlKVxuICAgICAgICBjb25zdCBjdXJyZW50TWFya3NBbGxvd01hcmtUeXBlID0gISFuZXdNYXJrVHlwZS5pc0luU2V0KG5vZGUubWFya3MpXG4gICAgICAgICAgfHwgIW5vZGUubWFya3Muc29tZShvdGhlck1hcmsgPT4gb3RoZXJNYXJrLnR5cGUuZXhjbHVkZXMobmV3TWFya1R5cGUpKVxuXG4gICAgICAgIHNvbWVOb2RlU3VwcG9ydHNNYXJrID0gcGFyZW50QWxsb3dzTWFya1R5cGUgJiYgY3VycmVudE1hcmtzQWxsb3dNYXJrVHlwZVxuICAgICAgfVxuICAgICAgcmV0dXJuICFzb21lTm9kZVN1cHBvcnRzTWFya1xuICAgIH0pXG5cbiAgICByZXR1cm4gc29tZU5vZGVTdXBwb3J0c01hcmtcbiAgfSlcbn1cbmV4cG9ydCBjb25zdCBzZXRNYXJrOiBSYXdDb21tYW5kc1snc2V0TWFyayddID0gKHR5cGVPck5hbWUsIGF0dHJpYnV0ZXMgPSB7fSkgPT4gKHsgdHIsIHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSB0clxuICBjb25zdCB7IGVtcHR5LCByYW5nZXMgfSA9IHNlbGVjdGlvblxuICBjb25zdCB0eXBlID0gZ2V0TWFya1R5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuXG4gIGlmIChkaXNwYXRjaCkge1xuICAgIGlmIChlbXB0eSkge1xuICAgICAgY29uc3Qgb2xkQXR0cmlidXRlcyA9IGdldE1hcmtBdHRyaWJ1dGVzKHN0YXRlLCB0eXBlKVxuXG4gICAgICB0ci5hZGRTdG9yZWRNYXJrKFxuICAgICAgICB0eXBlLmNyZWF0ZSh7XG4gICAgICAgICAgLi4ub2xkQXR0cmlidXRlcyxcbiAgICAgICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgICAgICB9KSxcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgICBjb25zdCBmcm9tID0gcmFuZ2UuJGZyb20ucG9zXG4gICAgICAgIGNvbnN0IHRvID0gcmFuZ2UuJHRvLnBvc1xuXG4gICAgICAgIHN0YXRlLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgICBjb25zdCB0cmltbWVkRnJvbSA9IE1hdGgubWF4KHBvcywgZnJvbSlcbiAgICAgICAgICBjb25zdCB0cmltbWVkVG8gPSBNYXRoLm1pbihwb3MgKyBub2RlLm5vZGVTaXplLCB0bylcbiAgICAgICAgICBjb25zdCBzb21lSGFzTWFyayA9IG5vZGUubWFya3MuZmluZChtYXJrID0+IG1hcmsudHlwZSA9PT0gdHlwZSlcblxuICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBtYXJrIG9mIHRoaXMgdHlwZVxuICAgICAgICAgIC8vIHdlIGtub3cgdGhhdCB3ZSBoYXZlIHRvIG1lcmdlIGl0cyBhdHRyaWJ1dGVzXG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIHdlIGFkZCBhIGZyZXNoIG5ldyBtYXJrXG4gICAgICAgICAgaWYgKHNvbWVIYXNNYXJrKSB7XG4gICAgICAgICAgICBub2RlLm1hcmtzLmZvckVhY2gobWFyayA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlID09PSBtYXJrLnR5cGUpIHtcbiAgICAgICAgICAgICAgICB0ci5hZGRNYXJrKFxuICAgICAgICAgICAgICAgICAgdHJpbW1lZEZyb20sXG4gICAgICAgICAgICAgICAgICB0cmltbWVkVG8sXG4gICAgICAgICAgICAgICAgICB0eXBlLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIC4uLm1hcmsuYXR0cnMsXG4gICAgICAgICAgICAgICAgICAgIC4uLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyLmFkZE1hcmsodHJpbW1lZEZyb20sIHRyaW1tZWRUbywgdHlwZS5jcmVhdGUoYXR0cmlidXRlcykpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2FuU2V0TWFyayhzdGF0ZSwgdHIsIHR5cGUpXG59XG4iLCJpbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2V0TWV0YToge1xuICAgICAgLyoqXG4gICAgICAgKiBTdG9yZSBhIG1ldGFkYXRhIHByb3BlcnR5IGluIHRoZSBjdXJyZW50IHRyYW5zYWN0aW9uLlxuICAgICAgICovXG4gICAgICBzZXRNZXRhOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXRNZXRhOiBSYXdDb21tYW5kc1snc2V0TWV0YSddID0gKGtleSwgdmFsdWUpID0+ICh7IHRyIH0pID0+IHtcbiAgdHIuc2V0TWV0YShrZXksIHZhbHVlKVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyBzZXRCbG9ja1R5cGUgfSBmcm9tICdAdGlwdGFwL3BtL2NvbW1hbmRzJ1xuaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc2V0Tm9kZToge1xuICAgICAgLyoqXG4gICAgICAgKiBSZXBsYWNlIGEgZ2l2ZW4gcmFuZ2Ugd2l0aCBhIG5vZGUuXG4gICAgICAgKi9cbiAgICAgIHNldE5vZGU6ICh0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSwgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNldE5vZGU6IFJhd0NvbW1hbmRzWydzZXROb2RlJ10gPSAodHlwZU9yTmFtZSwgYXR0cmlidXRlcyA9IHt9KSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2gsIGNoYWluIH0pID0+IHtcbiAgY29uc3QgdHlwZSA9IGdldE5vZGVUeXBlKHR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcblxuICAvLyBUT0RPOiB1c2UgYSBmYWxsYmFjayBsaWtlIGluc2VydENvbnRlbnQ/XG4gIGlmICghdHlwZS5pc1RleHRibG9jaykge1xuICAgIGNvbnNvbGUud2FybignW3RpcHRhcCB3YXJuXTogQ3VycmVudGx5IFwic2V0Tm9kZSgpXCIgb25seSBzdXBwb3J0cyB0ZXh0IGJsb2NrIG5vZGVzLicpXG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgY2hhaW4oKVxuICAgIC8vIHRyeSB0byBjb252ZXJ0IG5vZGUgdG8gZGVmYXVsdCBub2RlIGlmIG5lZWRlZFxuICAgICAgLmNvbW1hbmQoKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICBjb25zdCBjYW5TZXRCbG9jayA9IHNldEJsb2NrVHlwZSh0eXBlLCBhdHRyaWJ1dGVzKShzdGF0ZSlcblxuICAgICAgICBpZiAoY2FuU2V0QmxvY2spIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLmNsZWFyTm9kZXMoKVxuICAgICAgfSlcbiAgICAgIC5jb21tYW5kKCh7IHN0YXRlOiB1cGRhdGVkU3RhdGUgfSkgPT4ge1xuICAgICAgICByZXR1cm4gc2V0QmxvY2tUeXBlKHR5cGUsIGF0dHJpYnV0ZXMpKHVwZGF0ZWRTdGF0ZSwgZGlzcGF0Y2gpXG4gICAgICB9KVxuICAgICAgLnJ1bigpXG4gIClcbn1cbiIsImltcG9ydCB7IE5vZGVTZWxlY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgbWluTWF4IH0gZnJvbSAnLi4vdXRpbGl0aWVzL21pbk1heC5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHNldE5vZGVTZWxlY3Rpb246IHtcbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlcyBhIE5vZGVTZWxlY3Rpb24uXG4gICAgICAgKi9cbiAgICAgIHNldE5vZGVTZWxlY3Rpb246IChwb3NpdGlvbjogbnVtYmVyKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXROb2RlU2VsZWN0aW9uOiBSYXdDb21tYW5kc1snc2V0Tm9kZVNlbGVjdGlvbiddID0gcG9zaXRpb24gPT4gKHsgdHIsIGRpc3BhdGNoIH0pID0+IHtcbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgY29uc3QgeyBkb2MgfSA9IHRyXG4gICAgY29uc3QgZnJvbSA9IG1pbk1heChwb3NpdGlvbiwgMCwgZG9jLmNvbnRlbnQuc2l6ZSlcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBOb2RlU2VsZWN0aW9uLmNyZWF0ZShkb2MsIGZyb20pXG5cbiAgICB0ci5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsImltcG9ydCB7IFRleHRTZWxlY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBSYW5nZSwgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IG1pbk1heCB9IGZyb20gJy4uL3V0aWxpdGllcy9taW5NYXguanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzZXRUZXh0U2VsZWN0aW9uOiB7XG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZXMgYSBUZXh0U2VsZWN0aW9uLlxuICAgICAgICovXG4gICAgICBzZXRUZXh0U2VsZWN0aW9uOiAocG9zaXRpb246IG51bWJlciB8IFJhbmdlKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXRUZXh0U2VsZWN0aW9uOiBSYXdDb21tYW5kc1snc2V0VGV4dFNlbGVjdGlvbiddID0gcG9zaXRpb24gPT4gKHsgdHIsIGRpc3BhdGNoIH0pID0+IHtcbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgY29uc3QgeyBkb2MgfSA9IHRyXG4gICAgY29uc3QgeyBmcm9tLCB0byB9ID0gdHlwZW9mIHBvc2l0aW9uID09PSAnbnVtYmVyJyA/IHsgZnJvbTogcG9zaXRpb24sIHRvOiBwb3NpdGlvbiB9IDogcG9zaXRpb25cbiAgICBjb25zdCBtaW5Qb3MgPSBUZXh0U2VsZWN0aW9uLmF0U3RhcnQoZG9jKS5mcm9tXG4gICAgY29uc3QgbWF4UG9zID0gVGV4dFNlbGVjdGlvbi5hdEVuZChkb2MpLnRvXG4gICAgY29uc3QgcmVzb2x2ZWRGcm9tID0gbWluTWF4KGZyb20sIG1pblBvcywgbWF4UG9zKVxuICAgIGNvbnN0IHJlc29sdmVkRW5kID0gbWluTWF4KHRvLCBtaW5Qb3MsIG1heFBvcylcbiAgICBjb25zdCBzZWxlY3Rpb24gPSBUZXh0U2VsZWN0aW9uLmNyZWF0ZShkb2MsIHJlc29sdmVkRnJvbSwgcmVzb2x2ZWRFbmQpXG5cbiAgICB0ci5zZXRTZWxlY3Rpb24oc2VsZWN0aW9uKVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IHNpbmtMaXN0SXRlbSBhcyBvcmlnaW5hbFNpbmtMaXN0SXRlbSB9IGZyb20gJ0B0aXB0YXAvcG0vc2NoZW1hLWxpc3QnXG5cbmltcG9ydCB7IGdldE5vZGVUeXBlIH0gZnJvbSAnLi4vaGVscGVycy9nZXROb2RlVHlwZS5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzaW5rTGlzdEl0ZW06IHtcbiAgICAgIC8qKlxuICAgICAgICogU2luayB0aGUgbGlzdCBpdGVtIGRvd24gaW50byBhbiBpbm5lciBsaXN0LlxuICAgICAgICovXG4gICAgICBzaW5rTGlzdEl0ZW06ICh0eXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2lua0xpc3RJdGVtOiBSYXdDb21tYW5kc1snc2lua0xpc3RJdGVtJ10gPSB0eXBlT3JOYW1lID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGNvbnN0IHR5cGUgPSBnZXROb2RlVHlwZSh0eXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG5cbiAgcmV0dXJuIG9yaWdpbmFsU2lua0xpc3RJdGVtKHR5cGUpKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IEVkaXRvclN0YXRlLCBOb2RlU2VsZWN0aW9uLCBUZXh0U2VsZWN0aW9uIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcbmltcG9ydCB7IGNhblNwbGl0IH0gZnJvbSAnQHRpcHRhcC9wbS90cmFuc2Zvcm0nXG5cbmltcG9ydCB7IGRlZmF1bHRCbG9ja0F0IH0gZnJvbSAnLi4vaGVscGVycy9kZWZhdWx0QmxvY2tBdC5qcydcbmltcG9ydCB7IGdldFNwbGl0dGVkQXR0cmlidXRlcyB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0U3BsaXR0ZWRBdHRyaWJ1dGVzLmpzJ1xuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZnVuY3Rpb24gZW5zdXJlTWFya3Moc3RhdGU6IEVkaXRvclN0YXRlLCBzcGxpdHRhYmxlTWFya3M/OiBzdHJpbmdbXSkge1xuICBjb25zdCBtYXJrcyA9IHN0YXRlLnN0b3JlZE1hcmtzIHx8IChzdGF0ZS5zZWxlY3Rpb24uJHRvLnBhcmVudE9mZnNldCAmJiBzdGF0ZS5zZWxlY3Rpb24uJGZyb20ubWFya3MoKSlcblxuICBpZiAobWFya3MpIHtcbiAgICBjb25zdCBmaWx0ZXJlZE1hcmtzID0gbWFya3MuZmlsdGVyKG1hcmsgPT4gc3BsaXR0YWJsZU1hcmtzPy5pbmNsdWRlcyhtYXJrLnR5cGUubmFtZSkpXG5cbiAgICBzdGF0ZS50ci5lbnN1cmVNYXJrcyhmaWx0ZXJlZE1hcmtzKVxuICB9XG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzcGxpdEJsb2NrOiB7XG4gICAgICAvKipcbiAgICAgICAqIEZvcmtzIGEgbmV3IG5vZGUgZnJvbSBhbiBleGlzdGluZyBub2RlLlxuICAgICAgICovXG4gICAgICBzcGxpdEJsb2NrOiAob3B0aW9ucz86IHsga2VlcE1hcmtzPzogYm9vbGVhbiB9KSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzcGxpdEJsb2NrOiBSYXdDb21tYW5kc1snc3BsaXRCbG9jayddID0gKHsga2VlcE1hcmtzID0gdHJ1ZSB9ID0ge30pID0+ICh7XG4gIHRyLCBzdGF0ZSwgZGlzcGF0Y2gsIGVkaXRvcixcbn0pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24sIGRvYyB9ID0gdHJcbiAgY29uc3QgeyAkZnJvbSwgJHRvIH0gPSBzZWxlY3Rpb25cbiAgY29uc3QgZXh0ZW5zaW9uQXR0cmlidXRlcyA9IGVkaXRvci5leHRlbnNpb25NYW5hZ2VyLmF0dHJpYnV0ZXNcbiAgY29uc3QgbmV3QXR0cmlidXRlcyA9IGdldFNwbGl0dGVkQXR0cmlidXRlcyhcbiAgICBleHRlbnNpb25BdHRyaWJ1dGVzLFxuICAgICRmcm9tLm5vZGUoKS50eXBlLm5hbWUsXG4gICAgJGZyb20ubm9kZSgpLmF0dHJzLFxuICApXG5cbiAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24gJiYgc2VsZWN0aW9uLm5vZGUuaXNCbG9jaykge1xuICAgIGlmICghJGZyb20ucGFyZW50T2Zmc2V0IHx8ICFjYW5TcGxpdChkb2MsICRmcm9tLnBvcykpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgaWYgKGtlZXBNYXJrcykge1xuICAgICAgICBlbnN1cmVNYXJrcyhzdGF0ZSwgZWRpdG9yLmV4dGVuc2lvbk1hbmFnZXIuc3BsaXR0YWJsZU1hcmtzKVxuICAgICAgfVxuXG4gICAgICB0ci5zcGxpdCgkZnJvbS5wb3MpLnNjcm9sbEludG9WaWV3KClcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgaWYgKCEkZnJvbS5wYXJlbnQuaXNCbG9jaykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGRpc3BhdGNoKSB7XG4gICAgY29uc3QgYXRFbmQgPSAkdG8ucGFyZW50T2Zmc2V0ID09PSAkdG8ucGFyZW50LmNvbnRlbnQuc2l6ZVxuXG4gICAgaWYgKHNlbGVjdGlvbiBpbnN0YW5jZW9mIFRleHRTZWxlY3Rpb24pIHtcbiAgICAgIHRyLmRlbGV0ZVNlbGVjdGlvbigpXG4gICAgfVxuXG4gICAgY29uc3QgZGVmbHQgPSAkZnJvbS5kZXB0aCA9PT0gMFxuICAgICAgPyB1bmRlZmluZWRcbiAgICAgIDogZGVmYXVsdEJsb2NrQXQoJGZyb20ubm9kZSgtMSkuY29udGVudE1hdGNoQXQoJGZyb20uaW5kZXhBZnRlcigtMSkpKVxuXG4gICAgbGV0IHR5cGVzID0gYXRFbmQgJiYgZGVmbHRcbiAgICAgID8gW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogZGVmbHQsXG4gICAgICAgICAgYXR0cnM6IG5ld0F0dHJpYnV0ZXMsXG4gICAgICAgIH0sXG4gICAgICBdXG4gICAgICA6IHVuZGVmaW5lZFxuXG4gICAgbGV0IGNhbiA9IGNhblNwbGl0KHRyLmRvYywgdHIubWFwcGluZy5tYXAoJGZyb20ucG9zKSwgMSwgdHlwZXMpXG5cbiAgICBpZiAoXG4gICAgICAhdHlwZXNcbiAgICAgICAgJiYgIWNhblxuICAgICAgICAmJiBjYW5TcGxpdCh0ci5kb2MsIHRyLm1hcHBpbmcubWFwKCRmcm9tLnBvcyksIDEsIGRlZmx0ID8gW3sgdHlwZTogZGVmbHQgfV0gOiB1bmRlZmluZWQpXG4gICAgKSB7XG4gICAgICBjYW4gPSB0cnVlXG4gICAgICB0eXBlcyA9IGRlZmx0XG4gICAgICAgID8gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IGRlZmx0LFxuICAgICAgICAgICAgYXR0cnM6IG5ld0F0dHJpYnV0ZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgXVxuICAgICAgICA6IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmIChjYW4pIHtcbiAgICAgIHRyLnNwbGl0KHRyLm1hcHBpbmcubWFwKCRmcm9tLnBvcyksIDEsIHR5cGVzKVxuXG4gICAgICBpZiAoZGVmbHQgJiYgIWF0RW5kICYmICEkZnJvbS5wYXJlbnRPZmZzZXQgJiYgJGZyb20ucGFyZW50LnR5cGUgIT09IGRlZmx0KSB7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gdHIubWFwcGluZy5tYXAoJGZyb20uYmVmb3JlKCkpXG4gICAgICAgIGNvbnN0ICRmaXJzdCA9IHRyLmRvYy5yZXNvbHZlKGZpcnN0KVxuXG4gICAgICAgIGlmICgkZnJvbS5ub2RlKC0xKS5jYW5SZXBsYWNlV2l0aCgkZmlyc3QuaW5kZXgoKSwgJGZpcnN0LmluZGV4KCkgKyAxLCBkZWZsdCkpIHtcbiAgICAgICAgICB0ci5zZXROb2RlTWFya3VwKHRyLm1hcHBpbmcubWFwKCRmcm9tLmJlZm9yZSgpKSwgZGVmbHQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoa2VlcE1hcmtzKSB7XG4gICAgICBlbnN1cmVNYXJrcyhzdGF0ZSwgZWRpdG9yLmV4dGVuc2lvbk1hbmFnZXIuc3BsaXR0YWJsZU1hcmtzKVxuICAgIH1cblxuICAgIHRyLnNjcm9sbEludG9WaWV3KClcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQge1xuICBGcmFnbWVudCwgTm9kZSBhcyBQcm9zZU1pcnJvck5vZGUsIE5vZGVUeXBlLCBTbGljZSxcbn0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IFRleHRTZWxlY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuaW1wb3J0IHsgY2FuU3BsaXQgfSBmcm9tICdAdGlwdGFwL3BtL3RyYW5zZm9ybSdcblxuaW1wb3J0IHsgZ2V0Tm9kZVR5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE5vZGVUeXBlLmpzJ1xuaW1wb3J0IHsgZ2V0U3BsaXR0ZWRBdHRyaWJ1dGVzIH0gZnJvbSAnLi4vaGVscGVycy9nZXRTcGxpdHRlZEF0dHJpYnV0ZXMuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgc3BsaXRMaXN0SXRlbToge1xuICAgICAgLyoqXG4gICAgICAgKiBTcGxpdHMgb25lIGxpc3QgaXRlbSBpbnRvIHR3byBsaXN0IGl0ZW1zLlxuICAgICAgICovXG4gICAgICBzcGxpdExpc3RJdGVtOiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUpID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHNwbGl0TGlzdEl0ZW06IFJhd0NvbW1hbmRzWydzcGxpdExpc3RJdGVtJ10gPSB0eXBlT3JOYW1lID0+ICh7XG4gIHRyLCBzdGF0ZSwgZGlzcGF0Y2gsIGVkaXRvcixcbn0pID0+IHtcbiAgY29uc3QgdHlwZSA9IGdldE5vZGVUeXBlKHR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcbiAgY29uc3QgeyAkZnJvbSwgJHRvIH0gPSBzdGF0ZS5zZWxlY3Rpb25cblxuICAvLyBAdHMtaWdub3JlXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIGNvbnN0IG5vZGU6IFByb3NlTWlycm9yTm9kZSA9IHN0YXRlLnNlbGVjdGlvbi5ub2RlXG5cbiAgaWYgKChub2RlICYmIG5vZGUuaXNCbG9jaykgfHwgJGZyb20uZGVwdGggPCAyIHx8ICEkZnJvbS5zYW1lUGFyZW50KCR0bykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IGdyYW5kUGFyZW50ID0gJGZyb20ubm9kZSgtMSlcblxuICBpZiAoZ3JhbmRQYXJlbnQudHlwZSAhPT0gdHlwZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgZXh0ZW5zaW9uQXR0cmlidXRlcyA9IGVkaXRvci5leHRlbnNpb25NYW5hZ2VyLmF0dHJpYnV0ZXNcblxuICBpZiAoJGZyb20ucGFyZW50LmNvbnRlbnQuc2l6ZSA9PT0gMCAmJiAkZnJvbS5ub2RlKC0xKS5jaGlsZENvdW50ID09PSAkZnJvbS5pbmRleEFmdGVyKC0xKSkge1xuICAgIC8vIEluIGFuIGVtcHR5IGJsb2NrLiBJZiB0aGlzIGlzIGEgbmVzdGVkIGxpc3QsIHRoZSB3cmFwcGluZ1xuICAgIC8vIGxpc3QgaXRlbSBzaG91bGQgYmUgc3BsaXQuIE90aGVyd2lzZSwgYmFpbCBvdXQgYW5kIGxldCBuZXh0XG4gICAgLy8gY29tbWFuZCBoYW5kbGUgbGlmdGluZy5cbiAgICBpZiAoXG4gICAgICAkZnJvbS5kZXB0aCA9PT0gMlxuICAgICAgICB8fCAkZnJvbS5ub2RlKC0zKS50eXBlICE9PSB0eXBlXG4gICAgICAgIHx8ICRmcm9tLmluZGV4KC0yKSAhPT0gJGZyb20ubm9kZSgtMikuY2hpbGRDb3VudCAtIDFcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgbGV0IHdyYXAgPSBGcmFnbWVudC5lbXB0eVxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGNvbnN0IGRlcHRoQmVmb3JlID0gJGZyb20uaW5kZXgoLTEpID8gMSA6ICRmcm9tLmluZGV4KC0yKSA/IDIgOiAzXG5cbiAgICAgIC8vIEJ1aWxkIGEgZnJhZ21lbnQgY29udGFpbmluZyBlbXB0eSB2ZXJzaW9ucyBvZiB0aGUgc3RydWN0dXJlXG4gICAgICAvLyBmcm9tIHRoZSBvdXRlciBsaXN0IGl0ZW0gdG8gdGhlIHBhcmVudCBub2RlIG9mIHRoZSBjdXJzb3JcbiAgICAgIGZvciAobGV0IGQgPSAkZnJvbS5kZXB0aCAtIGRlcHRoQmVmb3JlOyBkID49ICRmcm9tLmRlcHRoIC0gMzsgZCAtPSAxKSB7XG4gICAgICAgIHdyYXAgPSBGcmFnbWVudC5mcm9tKCRmcm9tLm5vZGUoZCkuY29weSh3cmFwKSlcbiAgICAgIH1cblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGNvbnN0IGRlcHRoQWZ0ZXIgPSAkZnJvbS5pbmRleEFmdGVyKC0xKSA8ICRmcm9tLm5vZGUoLTIpLmNoaWxkQ291bnQgPyAxIDogJGZyb20uaW5kZXhBZnRlcigtMikgPCAkZnJvbS5ub2RlKC0zKS5jaGlsZENvdW50ID8gMiA6IDNcblxuICAgICAgLy8gQWRkIGEgc2Vjb25kIGxpc3QgaXRlbSB3aXRoIGFuIGVtcHR5IGRlZmF1bHQgc3RhcnQgbm9kZVxuICAgICAgY29uc3QgbmV3TmV4dFR5cGVBdHRyaWJ1dGVzID0gZ2V0U3BsaXR0ZWRBdHRyaWJ1dGVzKFxuICAgICAgICBleHRlbnNpb25BdHRyaWJ1dGVzLFxuICAgICAgICAkZnJvbS5ub2RlKCkudHlwZS5uYW1lLFxuICAgICAgICAkZnJvbS5ub2RlKCkuYXR0cnMsXG4gICAgICApXG4gICAgICBjb25zdCBuZXh0VHlwZSA9IHR5cGUuY29udGVudE1hdGNoLmRlZmF1bHRUeXBlPy5jcmVhdGVBbmRGaWxsKG5ld05leHRUeXBlQXR0cmlidXRlcykgfHwgdW5kZWZpbmVkXG5cbiAgICAgIHdyYXAgPSB3cmFwLmFwcGVuZChGcmFnbWVudC5mcm9tKHR5cGUuY3JlYXRlQW5kRmlsbChudWxsLCBuZXh0VHlwZSkgfHwgdW5kZWZpbmVkKSlcblxuICAgICAgY29uc3Qgc3RhcnQgPSAkZnJvbS5iZWZvcmUoJGZyb20uZGVwdGggLSAoZGVwdGhCZWZvcmUgLSAxKSlcblxuICAgICAgdHIucmVwbGFjZShzdGFydCwgJGZyb20uYWZ0ZXIoLWRlcHRoQWZ0ZXIpLCBuZXcgU2xpY2Uod3JhcCwgNCAtIGRlcHRoQmVmb3JlLCAwKSlcblxuICAgICAgbGV0IHNlbCA9IC0xXG5cbiAgICAgIHRyLmRvYy5ub2Rlc0JldHdlZW4oc3RhcnQsIHRyLmRvYy5jb250ZW50LnNpemUsIChuLCBwb3MpID0+IHtcbiAgICAgICAgaWYgKHNlbCA+IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAobi5pc1RleHRibG9jayAmJiBuLmNvbnRlbnQuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgIHNlbCA9IHBvcyArIDFcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKHNlbCA+IC0xKSB7XG4gICAgICAgIHRyLnNldFNlbGVjdGlvbihUZXh0U2VsZWN0aW9uLm5lYXIodHIuZG9jLnJlc29sdmUoc2VsKSkpXG4gICAgICB9XG5cbiAgICAgIHRyLnNjcm9sbEludG9WaWV3KClcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3QgbmV4dFR5cGUgPSAkdG8ucG9zID09PSAkZnJvbS5lbmQoKSA/IGdyYW5kUGFyZW50LmNvbnRlbnRNYXRjaEF0KDApLmRlZmF1bHRUeXBlIDogbnVsbFxuXG4gIGNvbnN0IG5ld1R5cGVBdHRyaWJ1dGVzID0gZ2V0U3BsaXR0ZWRBdHRyaWJ1dGVzKFxuICAgIGV4dGVuc2lvbkF0dHJpYnV0ZXMsXG4gICAgZ3JhbmRQYXJlbnQudHlwZS5uYW1lLFxuICAgIGdyYW5kUGFyZW50LmF0dHJzLFxuICApXG4gIGNvbnN0IG5ld05leHRUeXBlQXR0cmlidXRlcyA9IGdldFNwbGl0dGVkQXR0cmlidXRlcyhcbiAgICBleHRlbnNpb25BdHRyaWJ1dGVzLFxuICAgICRmcm9tLm5vZGUoKS50eXBlLm5hbWUsXG4gICAgJGZyb20ubm9kZSgpLmF0dHJzLFxuICApXG5cbiAgdHIuZGVsZXRlKCRmcm9tLnBvcywgJHRvLnBvcylcblxuICBjb25zdCB0eXBlcyA9IG5leHRUeXBlXG4gICAgPyBbXG4gICAgICB7IHR5cGUsIGF0dHJzOiBuZXdUeXBlQXR0cmlidXRlcyB9LFxuICAgICAgeyB0eXBlOiBuZXh0VHlwZSwgYXR0cnM6IG5ld05leHRUeXBlQXR0cmlidXRlcyB9LFxuICAgIF1cbiAgICA6IFt7IHR5cGUsIGF0dHJzOiBuZXdUeXBlQXR0cmlidXRlcyB9XVxuXG4gIGlmICghY2FuU3BsaXQodHIuZG9jLCAkZnJvbS5wb3MsIDIpKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoZGlzcGF0Y2gpIHtcbiAgICBjb25zdCB7IHNlbGVjdGlvbiwgc3RvcmVkTWFya3MgfSA9IHN0YXRlXG4gICAgY29uc3QgeyBzcGxpdHRhYmxlTWFya3MgfSA9IGVkaXRvci5leHRlbnNpb25NYW5hZ2VyXG4gICAgY29uc3QgbWFya3MgPSBzdG9yZWRNYXJrcyB8fCAoc2VsZWN0aW9uLiR0by5wYXJlbnRPZmZzZXQgJiYgc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCkpXG5cbiAgICB0ci5zcGxpdCgkZnJvbS5wb3MsIDIsIHR5cGVzKS5zY3JvbGxJbnRvVmlldygpXG5cbiAgICBpZiAoIW1hcmtzIHx8ICFkaXNwYXRjaCkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZE1hcmtzID0gbWFya3MuZmlsdGVyKG1hcmsgPT4gc3BsaXR0YWJsZU1hcmtzLmluY2x1ZGVzKG1hcmsudHlwZS5uYW1lKSlcblxuICAgIHRyLmVuc3VyZU1hcmtzKGZpbHRlcmVkTWFya3MpXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuaW1wb3J0IHsgY2FuSm9pbiB9IGZyb20gJ0B0aXB0YXAvcG0vdHJhbnNmb3JtJ1xuXG5pbXBvcnQgeyBmaW5kUGFyZW50Tm9kZSB9IGZyb20gJy4uL2hlbHBlcnMvZmluZFBhcmVudE5vZGUuanMnXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBpc0xpc3QgfSBmcm9tICcuLi9oZWxwZXJzL2lzTGlzdC5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmNvbnN0IGpvaW5MaXN0QmFja3dhcmRzID0gKHRyOiBUcmFuc2FjdGlvbiwgbGlzdFR5cGU6IE5vZGVUeXBlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGxpc3QgPSBmaW5kUGFyZW50Tm9kZShub2RlID0+IG5vZGUudHlwZSA9PT0gbGlzdFR5cGUpKHRyLnNlbGVjdGlvbilcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3QgYmVmb3JlID0gdHIuZG9jLnJlc29sdmUoTWF0aC5tYXgoMCwgbGlzdC5wb3MgLSAxKSkuYmVmb3JlKGxpc3QuZGVwdGgpXG5cbiAgaWYgKGJlZm9yZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0IG5vZGVCZWZvcmUgPSB0ci5kb2Mubm9kZUF0KGJlZm9yZSlcbiAgY29uc3QgY2FuSm9pbkJhY2t3YXJkcyA9IGxpc3Qubm9kZS50eXBlID09PSBub2RlQmVmb3JlPy50eXBlICYmIGNhbkpvaW4odHIuZG9jLCBsaXN0LnBvcylcblxuICBpZiAoIWNhbkpvaW5CYWNrd2FyZHMpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgdHIuam9pbihsaXN0LnBvcylcblxuICByZXR1cm4gdHJ1ZVxufVxuXG5jb25zdCBqb2luTGlzdEZvcndhcmRzID0gKHRyOiBUcmFuc2FjdGlvbiwgbGlzdFR5cGU6IE5vZGVUeXBlKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGxpc3QgPSBmaW5kUGFyZW50Tm9kZShub2RlID0+IG5vZGUudHlwZSA9PT0gbGlzdFR5cGUpKHRyLnNlbGVjdGlvbilcblxuICBpZiAoIWxpc3QpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3QgYWZ0ZXIgPSB0ci5kb2MucmVzb2x2ZShsaXN0LnN0YXJ0KS5hZnRlcihsaXN0LmRlcHRoKVxuXG4gIGlmIChhZnRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGNvbnN0IG5vZGVBZnRlciA9IHRyLmRvYy5ub2RlQXQoYWZ0ZXIpXG4gIGNvbnN0IGNhbkpvaW5Gb3J3YXJkcyA9IGxpc3Qubm9kZS50eXBlID09PSBub2RlQWZ0ZXI/LnR5cGUgJiYgY2FuSm9pbih0ci5kb2MsIGFmdGVyKVxuXG4gIGlmICghY2FuSm9pbkZvcndhcmRzKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHRyLmpvaW4oYWZ0ZXIpXG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHRvZ2dsZUxpc3Q6IHtcbiAgICAgIC8qKlxuICAgICAgICogVG9nZ2xlIGJldHdlZW4gZGlmZmVyZW50IGxpc3QgdHlwZXMuXG4gICAgICAgKi9cbiAgICAgIHRvZ2dsZUxpc3Q6IChsaXN0VHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUsIGl0ZW1UeXBlT3JOYW1lOiBzdHJpbmcgfCBOb2RlVHlwZSwga2VlcE1hcmtzPzogYm9vbGVhbiwgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IFJldHVyblR5cGU7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0b2dnbGVMaXN0OiBSYXdDb21tYW5kc1sndG9nZ2xlTGlzdCddID0gKGxpc3RUeXBlT3JOYW1lLCBpdGVtVHlwZU9yTmFtZSwga2VlcE1hcmtzLCBhdHRyaWJ1dGVzID0ge30pID0+ICh7XG4gIGVkaXRvciwgdHIsIHN0YXRlLCBkaXNwYXRjaCwgY2hhaW4sIGNvbW1hbmRzLCBjYW4sXG59KSA9PiB7XG4gIGNvbnN0IHsgZXh0ZW5zaW9ucywgc3BsaXR0YWJsZU1hcmtzIH0gPSBlZGl0b3IuZXh0ZW5zaW9uTWFuYWdlclxuICBjb25zdCBsaXN0VHlwZSA9IGdldE5vZGVUeXBlKGxpc3RUeXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG4gIGNvbnN0IGl0ZW1UeXBlID0gZ2V0Tm9kZVR5cGUoaXRlbVR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcbiAgY29uc3QgeyBzZWxlY3Rpb24sIHN0b3JlZE1hcmtzIH0gPSBzdGF0ZVxuICBjb25zdCB7ICRmcm9tLCAkdG8gfSA9IHNlbGVjdGlvblxuICBjb25zdCByYW5nZSA9ICRmcm9tLmJsb2NrUmFuZ2UoJHRvKVxuXG4gIGNvbnN0IG1hcmtzID0gc3RvcmVkTWFya3MgfHwgKHNlbGVjdGlvbi4kdG8ucGFyZW50T2Zmc2V0ICYmIHNlbGVjdGlvbi4kZnJvbS5tYXJrcygpKVxuXG4gIGlmICghcmFuZ2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGNvbnN0IHBhcmVudExpc3QgPSBmaW5kUGFyZW50Tm9kZShub2RlID0+IGlzTGlzdChub2RlLnR5cGUubmFtZSwgZXh0ZW5zaW9ucykpKHNlbGVjdGlvbilcblxuICBpZiAocmFuZ2UuZGVwdGggPj0gMSAmJiBwYXJlbnRMaXN0ICYmIHJhbmdlLmRlcHRoIC0gcGFyZW50TGlzdC5kZXB0aCA8PSAxKSB7XG4gICAgLy8gcmVtb3ZlIGxpc3RcbiAgICBpZiAocGFyZW50TGlzdC5ub2RlLnR5cGUgPT09IGxpc3RUeXBlKSB7XG4gICAgICByZXR1cm4gY29tbWFuZHMubGlmdExpc3RJdGVtKGl0ZW1UeXBlKVxuICAgIH1cblxuICAgIC8vIGNoYW5nZSBsaXN0IHR5cGVcbiAgICBpZiAoXG4gICAgICBpc0xpc3QocGFyZW50TGlzdC5ub2RlLnR5cGUubmFtZSwgZXh0ZW5zaW9ucylcbiAgICAgICAgJiYgbGlzdFR5cGUudmFsaWRDb250ZW50KHBhcmVudExpc3Qubm9kZS5jb250ZW50KVxuICAgICAgICAmJiBkaXNwYXRjaFxuICAgICkge1xuICAgICAgcmV0dXJuIGNoYWluKClcbiAgICAgICAgLmNvbW1hbmQoKCkgPT4ge1xuICAgICAgICAgIHRyLnNldE5vZGVNYXJrdXAocGFyZW50TGlzdC5wb3MsIGxpc3RUeXBlKVxuXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgLmNvbW1hbmQoKCkgPT4gam9pbkxpc3RCYWNrd2FyZHModHIsIGxpc3RUeXBlKSlcbiAgICAgICAgLmNvbW1hbmQoKCkgPT4gam9pbkxpc3RGb3J3YXJkcyh0ciwgbGlzdFR5cGUpKVxuICAgICAgICAucnVuKClcbiAgICB9XG4gIH1cbiAgaWYgKCFrZWVwTWFya3MgfHwgIW1hcmtzIHx8ICFkaXNwYXRjaCkge1xuXG4gICAgcmV0dXJuIGNoYWluKClcbiAgICAgIC8vIHRyeSB0byBjb252ZXJ0IG5vZGUgdG8gZGVmYXVsdCBub2RlIGlmIG5lZWRlZFxuICAgICAgLmNvbW1hbmQoKCkgPT4ge1xuICAgICAgICBjb25zdCBjYW5XcmFwSW5MaXN0ID0gY2FuKCkud3JhcEluTGlzdChsaXN0VHlwZSwgYXR0cmlidXRlcylcblxuICAgICAgICBpZiAoY2FuV3JhcEluTGlzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29tbWFuZHMuY2xlYXJOb2RlcygpXG4gICAgICB9KVxuICAgICAgLndyYXBJbkxpc3QobGlzdFR5cGUsIGF0dHJpYnV0ZXMpXG4gICAgICAuY29tbWFuZCgoKSA9PiBqb2luTGlzdEJhY2t3YXJkcyh0ciwgbGlzdFR5cGUpKVxuICAgICAgLmNvbW1hbmQoKCkgPT4gam9pbkxpc3RGb3J3YXJkcyh0ciwgbGlzdFR5cGUpKVxuICAgICAgLnJ1bigpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIGNoYWluKClcbiAgICAvLyB0cnkgdG8gY29udmVydCBub2RlIHRvIGRlZmF1bHQgbm9kZSBpZiBuZWVkZWRcbiAgICAgIC5jb21tYW5kKCgpID0+IHtcbiAgICAgICAgY29uc3QgY2FuV3JhcEluTGlzdCA9IGNhbigpLndyYXBJbkxpc3QobGlzdFR5cGUsIGF0dHJpYnV0ZXMpXG5cbiAgICAgICAgY29uc3QgZmlsdGVyZWRNYXJrcyA9IG1hcmtzLmZpbHRlcihtYXJrID0+IHNwbGl0dGFibGVNYXJrcy5pbmNsdWRlcyhtYXJrLnR5cGUubmFtZSkpXG5cbiAgICAgICAgdHIuZW5zdXJlTWFya3MoZmlsdGVyZWRNYXJrcylcblxuICAgICAgICBpZiAoY2FuV3JhcEluTGlzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29tbWFuZHMuY2xlYXJOb2RlcygpXG4gICAgICB9KVxuICAgICAgLndyYXBJbkxpc3QobGlzdFR5cGUsIGF0dHJpYnV0ZXMpXG4gICAgICAuY29tbWFuZCgoKSA9PiBqb2luTGlzdEJhY2t3YXJkcyh0ciwgbGlzdFR5cGUpKVxuICAgICAgLmNvbW1hbmQoKCkgPT4gam9pbkxpc3RGb3J3YXJkcyh0ciwgbGlzdFR5cGUpKVxuICAgICAgLnJ1bigpXG4gIClcbn1cbiIsImltcG9ydCB7IE1hcmtUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgZ2V0TWFya1R5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE1hcmtUeXBlLmpzJ1xuaW1wb3J0IHsgaXNNYXJrQWN0aXZlIH0gZnJvbSAnLi4vaGVscGVycy9pc01hcmtBY3RpdmUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgdG9nZ2xlTWFyazoge1xuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgYSBtYXJrIG9uIGFuZCBvZmYuXG4gICAgICAgKi9cbiAgICAgIHRvZ2dsZU1hcms6IChcbiAgICAgICAgdHlwZU9yTmFtZTogc3RyaW5nIHwgTWFya1R5cGUsXG4gICAgICAgIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgICAgICBvcHRpb25zPzoge1xuICAgICAgICAgIC8qKlxuICAgICAgICAgICAqIFJlbW92ZXMgdGhlIG1hcmsgZXZlbiBhY3Jvc3MgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLiBEZWZhdWx0cyB0byBgZmFsc2VgLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIGV4dGVuZEVtcHR5TWFya1JhbmdlPzogYm9vbGVhblxuICAgICAgICB9LFxuICAgICAgKSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0b2dnbGVNYXJrOiBSYXdDb21tYW5kc1sndG9nZ2xlTWFyayddID0gKHR5cGVPck5hbWUsIGF0dHJpYnV0ZXMgPSB7fSwgb3B0aW9ucyA9IHt9KSA9PiAoeyBzdGF0ZSwgY29tbWFuZHMgfSkgPT4ge1xuICBjb25zdCB7IGV4dGVuZEVtcHR5TWFya1JhbmdlID0gZmFsc2UgfSA9IG9wdGlvbnNcbiAgY29uc3QgdHlwZSA9IGdldE1hcmtUeXBlKHR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcbiAgY29uc3QgaXNBY3RpdmUgPSBpc01hcmtBY3RpdmUoc3RhdGUsIHR5cGUsIGF0dHJpYnV0ZXMpXG5cbiAgaWYgKGlzQWN0aXZlKSB7XG4gICAgcmV0dXJuIGNvbW1hbmRzLnVuc2V0TWFyayh0eXBlLCB7IGV4dGVuZEVtcHR5TWFya1JhbmdlIH0pXG4gIH1cblxuICByZXR1cm4gY29tbWFuZHMuc2V0TWFyayh0eXBlLCBhdHRyaWJ1dGVzKVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBpc05vZGVBY3RpdmUgfSBmcm9tICcuLi9oZWxwZXJzL2lzTm9kZUFjdGl2ZS5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICB0b2dnbGVOb2RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBhIG5vZGUgd2l0aCBhbm90aGVyIG5vZGUuXG4gICAgICAgKi9cbiAgICAgIHRvZ2dsZU5vZGU6IChcbiAgICAgICAgdHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUsXG4gICAgICAgIHRvZ2dsZVR5cGVPck5hbWU6IHN0cmluZyB8IE5vZGVUeXBlLFxuICAgICAgICBhdHRyaWJ1dGVzPzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgICkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdG9nZ2xlTm9kZTogUmF3Q29tbWFuZHNbJ3RvZ2dsZU5vZGUnXSA9ICh0eXBlT3JOYW1lLCB0b2dnbGVUeXBlT3JOYW1lLCBhdHRyaWJ1dGVzID0ge30pID0+ICh7IHN0YXRlLCBjb21tYW5kcyB9KSA9PiB7XG4gIGNvbnN0IHR5cGUgPSBnZXROb2RlVHlwZSh0eXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG4gIGNvbnN0IHRvZ2dsZVR5cGUgPSBnZXROb2RlVHlwZSh0b2dnbGVUeXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG4gIGNvbnN0IGlzQWN0aXZlID0gaXNOb2RlQWN0aXZlKHN0YXRlLCB0eXBlLCBhdHRyaWJ1dGVzKVxuXG4gIGlmIChpc0FjdGl2ZSkge1xuICAgIHJldHVybiBjb21tYW5kcy5zZXROb2RlKHRvZ2dsZVR5cGUpXG4gIH1cblxuICByZXR1cm4gY29tbWFuZHMuc2V0Tm9kZSh0eXBlLCBhdHRyaWJ1dGVzKVxufVxuIiwiaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBpc05vZGVBY3RpdmUgfSBmcm9tICcuLi9oZWxwZXJzL2lzTm9kZUFjdGl2ZS5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICB0b2dnbGVXcmFwOiB7XG4gICAgICAvKipcbiAgICAgICAqIFdyYXBzIG5vZGVzIGluIGFub3RoZXIgbm9kZSwgb3IgcmVtb3ZlcyBhbiBleGlzdGluZyB3cmFwLlxuICAgICAgICovXG4gICAgICB0b2dnbGVXcmFwOiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUsIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB0b2dnbGVXcmFwOiBSYXdDb21tYW5kc1sndG9nZ2xlV3JhcCddID0gKHR5cGVPck5hbWUsIGF0dHJpYnV0ZXMgPSB7fSkgPT4gKHsgc3RhdGUsIGNvbW1hbmRzIH0pID0+IHtcbiAgY29uc3QgdHlwZSA9IGdldE5vZGVUeXBlKHR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcbiAgY29uc3QgaXNBY3RpdmUgPSBpc05vZGVBY3RpdmUoc3RhdGUsIHR5cGUsIGF0dHJpYnV0ZXMpXG5cbiAgaWYgKGlzQWN0aXZlKSB7XG4gICAgcmV0dXJuIGNvbW1hbmRzLmxpZnQodHlwZSlcbiAgfVxuXG4gIHJldHVybiBjb21tYW5kcy53cmFwSW4odHlwZSwgYXR0cmlidXRlcylcbn1cbiIsImltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICB1bmRvSW5wdXRSdWxlOiB7XG4gICAgICAvKipcbiAgICAgICAqIFVuZG8gYW4gaW5wdXQgcnVsZS5cbiAgICAgICAqL1xuICAgICAgdW5kb0lucHV0UnVsZTogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHVuZG9JbnB1dFJ1bGU6IFJhd0NvbW1hbmRzWyd1bmRvSW5wdXRSdWxlJ10gPSAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBjb25zdCBwbHVnaW5zID0gc3RhdGUucGx1Z2luc1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHBsdWdpbiA9IHBsdWdpbnNbaV1cbiAgICBsZXQgdW5kb2FibGVcblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICBpZiAocGx1Z2luLnNwZWMuaXNJbnB1dFJ1bGVzICYmICh1bmRvYWJsZSA9IHBsdWdpbi5nZXRTdGF0ZShzdGF0ZSkpKSB7XG4gICAgICBpZiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgY29uc3QgdHIgPSBzdGF0ZS50clxuICAgICAgICBjb25zdCB0b1VuZG8gPSB1bmRvYWJsZS50cmFuc2Zvcm1cblxuICAgICAgICBmb3IgKGxldCBqID0gdG9VbmRvLnN0ZXBzLmxlbmd0aCAtIDE7IGogPj0gMDsgaiAtPSAxKSB7XG4gICAgICAgICAgdHIuc3RlcCh0b1VuZG8uc3RlcHNbal0uaW52ZXJ0KHRvVW5kby5kb2NzW2pdKSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bmRvYWJsZS50ZXh0KSB7XG4gICAgICAgICAgY29uc3QgbWFya3MgPSB0ci5kb2MucmVzb2x2ZSh1bmRvYWJsZS5mcm9tKS5tYXJrcygpXG5cbiAgICAgICAgICB0ci5yZXBsYWNlV2l0aCh1bmRvYWJsZS5mcm9tLCB1bmRvYWJsZS50bywgc3RhdGUuc2NoZW1hLnRleHQodW5kb2FibGUudGV4dCwgbWFya3MpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyLmRlbGV0ZSh1bmRvYWJsZS5mcm9tLCB1bmRvYWJsZS50bylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuIiwiaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHVuc2V0QWxsTWFya3M6IHtcbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIGFsbCBtYXJrcyBpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICAgKi9cbiAgICAgIHVuc2V0QWxsTWFya3M6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1bnNldEFsbE1hcmtzOiBSYXdDb21tYW5kc1sndW5zZXRBbGxNYXJrcyddID0gKCkgPT4gKHsgdHIsIGRpc3BhdGNoIH0pID0+IHtcbiAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IHRyXG4gIGNvbnN0IHsgZW1wdHksIHJhbmdlcyB9ID0gc2VsZWN0aW9uXG5cbiAgaWYgKGVtcHR5KSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChkaXNwYXRjaCkge1xuICAgIHJhbmdlcy5mb3JFYWNoKHJhbmdlID0+IHtcbiAgICAgIHRyLnJlbW92ZU1hcmsocmFuZ2UuJGZyb20ucG9zLCByYW5nZS4kdG8ucG9zKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXRNYXJrUmFuZ2UgfSBmcm9tICcuLi9oZWxwZXJzL2dldE1hcmtSYW5nZS5qcydcbmltcG9ydCB7IGdldE1hcmtUeXBlIH0gZnJvbSAnLi4vaGVscGVycy9nZXRNYXJrVHlwZS5qcydcbmltcG9ydCB7IFJhd0NvbW1hbmRzIH0gZnJvbSAnLi4vdHlwZXMuanMnXG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICB1bnNldE1hcms6IHtcbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIGFsbCBtYXJrcyBpbiB0aGUgY3VycmVudCBzZWxlY3Rpb24uXG4gICAgICAgKi9cbiAgICAgIHVuc2V0TWFyazogKFxuICAgICAgICB0eXBlT3JOYW1lOiBzdHJpbmcgfCBNYXJrVHlwZSxcbiAgICAgICAgb3B0aW9ucz86IHtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBSZW1vdmVzIHRoZSBtYXJrIGV2ZW4gYWNyb3NzIHRoZSBjdXJyZW50IHNlbGVjdGlvbi4gRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBleHRlbmRFbXB0eU1hcmtSYW5nZT86IGJvb2xlYW5cbiAgICAgICAgfSxcbiAgICAgICkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdW5zZXRNYXJrOiBSYXdDb21tYW5kc1sndW5zZXRNYXJrJ10gPSAodHlwZU9yTmFtZSwgb3B0aW9ucyA9IHt9KSA9PiAoeyB0ciwgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgY29uc3QgeyBleHRlbmRFbXB0eU1hcmtSYW5nZSA9IGZhbHNlIH0gPSBvcHRpb25zXG4gIGNvbnN0IHsgc2VsZWN0aW9uIH0gPSB0clxuICBjb25zdCB0eXBlID0gZ2V0TWFya1R5cGUodHlwZU9yTmFtZSwgc3RhdGUuc2NoZW1hKVxuICBjb25zdCB7ICRmcm9tLCBlbXB0eSwgcmFuZ2VzIH0gPSBzZWxlY3Rpb25cblxuICBpZiAoIWRpc3BhdGNoKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChlbXB0eSAmJiBleHRlbmRFbXB0eU1hcmtSYW5nZSkge1xuICAgIGxldCB7IGZyb20sIHRvIH0gPSBzZWxlY3Rpb25cbiAgICBjb25zdCBhdHRycyA9ICRmcm9tLm1hcmtzKCkuZmluZChtYXJrID0+IG1hcmsudHlwZSA9PT0gdHlwZSk/LmF0dHJzXG4gICAgY29uc3QgcmFuZ2UgPSBnZXRNYXJrUmFuZ2UoJGZyb20sIHR5cGUsIGF0dHJzKVxuXG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICBmcm9tID0gcmFuZ2UuZnJvbVxuICAgICAgdG8gPSByYW5nZS50b1xuICAgIH1cblxuICAgIHRyLnJlbW92ZU1hcmsoZnJvbSwgdG8sIHR5cGUpXG4gIH0gZWxzZSB7XG4gICAgcmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgdHIucmVtb3ZlTWFyayhyYW5nZS4kZnJvbS5wb3MsIHJhbmdlLiR0by5wb3MsIHR5cGUpXG4gICAgfSlcbiAgfVxuXG4gIHRyLnJlbW92ZVN0b3JlZE1hcmsodHlwZSlcblxuICByZXR1cm4gdHJ1ZVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUsIE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgZ2V0TWFya1R5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE1hcmtUeXBlLmpzJ1xuaW1wb3J0IHsgZ2V0Tm9kZVR5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE5vZGVUeXBlLmpzJ1xuaW1wb3J0IHsgZ2V0U2NoZW1hVHlwZU5hbWVCeU5hbWUgfSBmcm9tICcuLi9oZWxwZXJzL2dldFNjaGVtYVR5cGVOYW1lQnlOYW1lLmpzJ1xuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHVwZGF0ZUF0dHJpYnV0ZXM6IHtcbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlIGF0dHJpYnV0ZXMgb2YgYSBub2RlIG9yIG1hcmsuXG4gICAgICAgKi9cbiAgICAgIHVwZGF0ZUF0dHJpYnV0ZXM6IChcbiAgICAgICAgdHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUgfCBNYXJrVHlwZSxcbiAgICAgICAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgICkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlQXR0cmlidXRlczogUmF3Q29tbWFuZHNbJ3VwZGF0ZUF0dHJpYnV0ZXMnXSA9ICh0eXBlT3JOYW1lLCBhdHRyaWJ1dGVzID0ge30pID0+ICh7IHRyLCBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICBsZXQgbm9kZVR5cGU6IE5vZGVUeXBlIHwgbnVsbCA9IG51bGxcbiAgbGV0IG1hcmtUeXBlOiBNYXJrVHlwZSB8IG51bGwgPSBudWxsXG5cbiAgY29uc3Qgc2NoZW1hVHlwZSA9IGdldFNjaGVtYVR5cGVOYW1lQnlOYW1lKFxuICAgIHR5cGVvZiB0eXBlT3JOYW1lID09PSAnc3RyaW5nJyA/IHR5cGVPck5hbWUgOiB0eXBlT3JOYW1lLm5hbWUsXG4gICAgc3RhdGUuc2NoZW1hLFxuICApXG5cbiAgaWYgKCFzY2hlbWFUeXBlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ25vZGUnKSB7XG4gICAgbm9kZVR5cGUgPSBnZXROb2RlVHlwZSh0eXBlT3JOYW1lIGFzIE5vZGVUeXBlLCBzdGF0ZS5zY2hlbWEpXG4gIH1cblxuICBpZiAoc2NoZW1hVHlwZSA9PT0gJ21hcmsnKSB7XG4gICAgbWFya1R5cGUgPSBnZXRNYXJrVHlwZSh0eXBlT3JOYW1lIGFzIE1hcmtUeXBlLCBzdGF0ZS5zY2hlbWEpXG4gIH1cblxuICBpZiAoZGlzcGF0Y2gpIHtcbiAgICB0ci5zZWxlY3Rpb24ucmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgY29uc3QgZnJvbSA9IHJhbmdlLiRmcm9tLnBvc1xuICAgICAgY29uc3QgdG8gPSByYW5nZS4kdG8ucG9zXG5cbiAgICAgIHN0YXRlLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgaWYgKG5vZGVUeXBlICYmIG5vZGVUeXBlID09PSBub2RlLnR5cGUpIHtcbiAgICAgICAgICB0ci5zZXROb2RlTWFya3VwKHBvcywgdW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAuLi5ub2RlLmF0dHJzLFxuICAgICAgICAgICAgLi4uYXR0cmlidXRlcyxcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcmtUeXBlICYmIG5vZGUubWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgbm9kZS5tYXJrcy5mb3JFYWNoKG1hcmsgPT4ge1xuICAgICAgICAgICAgaWYgKG1hcmtUeXBlID09PSBtYXJrLnR5cGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdHJpbW1lZEZyb20gPSBNYXRoLm1heChwb3MsIGZyb20pXG4gICAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRUbyA9IE1hdGgubWluKHBvcyArIG5vZGUubm9kZVNpemUsIHRvKVxuXG4gICAgICAgICAgICAgIHRyLmFkZE1hcmsoXG4gICAgICAgICAgICAgICAgdHJpbW1lZEZyb20sXG4gICAgICAgICAgICAgICAgdHJpbW1lZFRvLFxuICAgICAgICAgICAgICAgIG1hcmtUeXBlLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAuLi5tYXJrLmF0dHJzLFxuICAgICAgICAgICAgICAgICAgLi4uYXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG4iLCJpbXBvcnQgeyB3cmFwSW4gYXMgb3JpZ2luYWxXcmFwSW4gfSBmcm9tICdAdGlwdGFwL3BtL2NvbW1hbmRzJ1xuaW1wb3J0IHsgTm9kZVR5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXROb2RlVHlwZSB9IGZyb20gJy4uL2hlbHBlcnMvZ2V0Tm9kZVR5cGUuanMnXG5pbXBvcnQgeyBSYXdDb21tYW5kcyB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgd3JhcEluOiB7XG4gICAgICAvKipcbiAgICAgICAqIFdyYXBzIG5vZGVzIGluIGFub3RoZXIgbm9kZS5cbiAgICAgICAqL1xuICAgICAgd3JhcEluOiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUsIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3cmFwSW46IFJhd0NvbW1hbmRzWyd3cmFwSW4nXSA9ICh0eXBlT3JOYW1lLCBhdHRyaWJ1dGVzID0ge30pID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gIGNvbnN0IHR5cGUgPSBnZXROb2RlVHlwZSh0eXBlT3JOYW1lLCBzdGF0ZS5zY2hlbWEpXG5cbiAgcmV0dXJuIG9yaWdpbmFsV3JhcEluKHR5cGUsIGF0dHJpYnV0ZXMpKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IHdyYXBJbkxpc3QgYXMgb3JpZ2luYWxXcmFwSW5MaXN0IH0gZnJvbSAnQHRpcHRhcC9wbS9zY2hlbWEtbGlzdCdcblxuaW1wb3J0IHsgZ2V0Tm9kZVR5cGUgfSBmcm9tICcuLi9oZWxwZXJzL2dldE5vZGVUeXBlLmpzJ1xuaW1wb3J0IHsgUmF3Q29tbWFuZHMgfSBmcm9tICcuLi90eXBlcy5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHdyYXBJbkxpc3Q6IHtcbiAgICAgIC8qKlxuICAgICAgICogV3JhcCBhIG5vZGUgaW4gYSBsaXN0LlxuICAgICAgICovXG4gICAgICB3cmFwSW5MaXN0OiAodHlwZU9yTmFtZTogc3RyaW5nIHwgTm9kZVR5cGUsIGF0dHJpYnV0ZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBSZXR1cm5UeXBlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3cmFwSW5MaXN0OiBSYXdDb21tYW5kc1snd3JhcEluTGlzdCddID0gKHR5cGVPck5hbWUsIGF0dHJpYnV0ZXMgPSB7fSkgPT4gKHsgc3RhdGUsIGRpc3BhdGNoIH0pID0+IHtcbiAgY29uc3QgdHlwZSA9IGdldE5vZGVUeXBlKHR5cGVPck5hbWUsIHN0YXRlLnNjaGVtYSlcblxuICByZXR1cm4gb3JpZ2luYWxXcmFwSW5MaXN0KHR5cGUsIGF0dHJpYnV0ZXMpKHN0YXRlLCBkaXNwYXRjaClcbn1cbiIsImltcG9ydCAqIGFzIGNvbW1hbmRzIGZyb20gJy4uL2NvbW1hbmRzL2luZGV4LmpzJ1xuaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnLi4vRXh0ZW5zaW9uLmpzJ1xuXG5leHBvcnQgKiBmcm9tICcuLi9jb21tYW5kcy9pbmRleC5qcydcblxuZXhwb3J0IGNvbnN0IENvbW1hbmRzID0gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6ICdjb21tYW5kcycsXG5cbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmNvbW1hbmRzLFxuICAgIH1cbiAgfSxcbn0pXG4iLCJpbXBvcnQgeyBQbHVnaW4sIFBsdWdpbktleSB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IEV4dGVuc2lvbiB9IGZyb20gJy4uL0V4dGVuc2lvbi5qcydcblxuZXhwb3J0IGNvbnN0IEVkaXRhYmxlID0gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6ICdlZGl0YWJsZScsXG5cbiAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zKCkge1xuICAgIHJldHVybiBbXG4gICAgICBuZXcgUGx1Z2luKHtcbiAgICAgICAga2V5OiBuZXcgUGx1Z2luS2V5KCdlZGl0YWJsZScpLFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGVkaXRhYmxlOiAoKSA9PiB0aGlzLmVkaXRvci5vcHRpb25zLmVkaXRhYmxlLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXVxuICB9LFxufSlcbiIsImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luS2V5IH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnLi4vRXh0ZW5zaW9uLmpzJ1xuXG5leHBvcnQgY29uc3QgRm9jdXNFdmVudHMgPSBFeHRlbnNpb24uY3JlYXRlKHtcbiAgbmFtZTogJ2ZvY3VzRXZlbnRzJyxcblxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXNcblxuICAgIHJldHVybiBbXG4gICAgICBuZXcgUGx1Z2luKHtcbiAgICAgICAga2V5OiBuZXcgUGx1Z2luS2V5KCdmb2N1c0V2ZW50cycpLFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGhhbmRsZURPTUV2ZW50czoge1xuICAgICAgICAgICAgZm9jdXM6ICh2aWV3LCBldmVudDogRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgZWRpdG9yLmlzRm9jdXNlZCA9IHRydWVcblxuICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbiA9IGVkaXRvci5zdGF0ZS50clxuICAgICAgICAgICAgICAgIC5zZXRNZXRhKCdmb2N1cycsIHsgZXZlbnQgfSlcbiAgICAgICAgICAgICAgICAuc2V0TWV0YSgnYWRkVG9IaXN0b3J5JywgZmFsc2UpXG5cbiAgICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cmFuc2FjdGlvbilcblxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBibHVyOiAodmlldywgZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGVkaXRvci5pc0ZvY3VzZWQgPSBmYWxzZVxuXG4gICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gZWRpdG9yLnN0YXRlLnRyXG4gICAgICAgICAgICAgICAgLnNldE1ldGEoJ2JsdXInLCB7IGV2ZW50IH0pXG4gICAgICAgICAgICAgICAgLnNldE1ldGEoJ2FkZFRvSGlzdG9yeScsIGZhbHNlKVxuXG4gICAgICAgICAgICAgIHZpZXcuZGlzcGF0Y2godHJhbnNhY3Rpb24pXG5cbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHsgUGx1Z2luLCBQbHVnaW5LZXksIFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vQ29tbWFuZE1hbmFnZXIuanMnXG5pbXBvcnQgeyBFeHRlbnNpb24gfSBmcm9tICcuLi9FeHRlbnNpb24uanMnXG5pbXBvcnQgeyBjcmVhdGVDaGFpbmFibGVTdGF0ZSB9IGZyb20gJy4uL2hlbHBlcnMvY3JlYXRlQ2hhaW5hYmxlU3RhdGUuanMnXG5pbXBvcnQgeyBpc2lPUyB9IGZyb20gJy4uL3V0aWxpdGllcy9pc2lPUy5qcydcbmltcG9ydCB7IGlzTWFjT1MgfSBmcm9tICcuLi91dGlsaXRpZXMvaXNNYWNPUy5qcydcblxuZXhwb3J0IGNvbnN0IEtleW1hcCA9IEV4dGVuc2lvbi5jcmVhdGUoe1xuICBuYW1lOiAna2V5bWFwJyxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICBjb25zdCBoYW5kbGVCYWNrc3BhY2UgPSAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5maXJzdCgoeyBjb21tYW5kcyB9KSA9PiBbXG4gICAgICAoKSA9PiBjb21tYW5kcy51bmRvSW5wdXRSdWxlKCksXG5cbiAgICAgIC8vIG1heWJlIGNvbnZlcnQgZmlyc3QgdGV4dCBibG9jayBub2RlIHRvIGRlZmF1bHQgbm9kZVxuICAgICAgKCkgPT4gY29tbWFuZHMuY29tbWFuZCgoeyB0ciB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uLCBkb2MgfSA9IHRyXG4gICAgICAgIGNvbnN0IHsgZW1wdHksICRhbmNob3IgfSA9IHNlbGVjdGlvblxuICAgICAgICBjb25zdCB7IHBvcywgcGFyZW50IH0gPSAkYW5jaG9yXG4gICAgICAgIGNvbnN0ICRwYXJlbnRQb3MgPSAkYW5jaG9yLnBhcmVudC5pc1RleHRibG9jayA/IHRyLmRvYy5yZXNvbHZlKHBvcyAtIDEpIDogJGFuY2hvclxuICAgICAgICBjb25zdCBwYXJlbnRJc0lzb2xhdGluZyA9ICRwYXJlbnRQb3MucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmdcblxuICAgICAgICBjb25zdCBwYXJlbnRQb3MgPSAkYW5jaG9yLnBvcyAtICRhbmNob3IucGFyZW50T2Zmc2V0XG5cbiAgICAgICAgY29uc3QgaXNBdFN0YXJ0ID0gKHBhcmVudElzSXNvbGF0aW5nICYmICRwYXJlbnRQb3MucGFyZW50LmNoaWxkQ291bnQgPT09IDEpXG4gICAgICAgICAgPyBwYXJlbnRQb3MgPT09ICRhbmNob3IucG9zXG4gICAgICAgICAgOiBTZWxlY3Rpb24uYXRTdGFydChkb2MpLmZyb20gPT09IHBvc1xuXG4gICAgICAgIGlmICghZW1wdHkgfHwgIWlzQXRTdGFydCB8fCAhcGFyZW50LnR5cGUuaXNUZXh0YmxvY2sgfHwgcGFyZW50LnRleHRDb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLmNsZWFyTm9kZXMoKVxuICAgICAgfSksXG5cbiAgICAgICgpID0+IGNvbW1hbmRzLmRlbGV0ZVNlbGVjdGlvbigpLFxuICAgICAgKCkgPT4gY29tbWFuZHMuam9pbkJhY2t3YXJkKCksXG4gICAgICAoKSA9PiBjb21tYW5kcy5zZWxlY3ROb2RlQmFja3dhcmQoKSxcbiAgICBdKVxuXG4gICAgY29uc3QgaGFuZGxlRGVsZXRlID0gKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuZmlyc3QoKHsgY29tbWFuZHMgfSkgPT4gW1xuICAgICAgKCkgPT4gY29tbWFuZHMuZGVsZXRlU2VsZWN0aW9uKCksXG4gICAgICAoKSA9PiBjb21tYW5kcy5kZWxldGVDdXJyZW50Tm9kZSgpLFxuICAgICAgKCkgPT4gY29tbWFuZHMuam9pbkZvcndhcmQoKSxcbiAgICAgICgpID0+IGNvbW1hbmRzLnNlbGVjdE5vZGVGb3J3YXJkKCksXG4gICAgXSlcblxuICAgIGNvbnN0IGhhbmRsZUVudGVyID0gKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuZmlyc3QoKHsgY29tbWFuZHMgfSkgPT4gW1xuICAgICAgKCkgPT4gY29tbWFuZHMubmV3bGluZUluQ29kZSgpLFxuICAgICAgKCkgPT4gY29tbWFuZHMuY3JlYXRlUGFyYWdyYXBoTmVhcigpLFxuICAgICAgKCkgPT4gY29tbWFuZHMubGlmdEVtcHR5QmxvY2soKSxcbiAgICAgICgpID0+IGNvbW1hbmRzLnNwbGl0QmxvY2soKSxcbiAgICBdKVxuXG4gICAgY29uc3QgYmFzZUtleW1hcCA9IHtcbiAgICAgIEVudGVyOiBoYW5kbGVFbnRlcixcbiAgICAgICdNb2QtRW50ZXInOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5leGl0Q29kZSgpLFxuICAgICAgQmFja3NwYWNlOiBoYW5kbGVCYWNrc3BhY2UsXG4gICAgICAnTW9kLUJhY2tzcGFjZSc6IGhhbmRsZUJhY2tzcGFjZSxcbiAgICAgICdTaGlmdC1CYWNrc3BhY2UnOiBoYW5kbGVCYWNrc3BhY2UsXG4gICAgICBEZWxldGU6IGhhbmRsZURlbGV0ZSxcbiAgICAgICdNb2QtRGVsZXRlJzogaGFuZGxlRGVsZXRlLFxuICAgICAgJ01vZC1hJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuc2VsZWN0QWxsKCksXG4gICAgfVxuXG4gICAgY29uc3QgcGNLZXltYXAgPSB7XG4gICAgICAuLi5iYXNlS2V5bWFwLFxuICAgIH1cblxuICAgIGNvbnN0IG1hY0tleW1hcCA9IHtcbiAgICAgIC4uLmJhc2VLZXltYXAsXG4gICAgICAnQ3RybC1oJzogaGFuZGxlQmFja3NwYWNlLFxuICAgICAgJ0FsdC1CYWNrc3BhY2UnOiBoYW5kbGVCYWNrc3BhY2UsXG4gICAgICAnQ3RybC1kJzogaGFuZGxlRGVsZXRlLFxuICAgICAgJ0N0cmwtQWx0LUJhY2tzcGFjZSc6IGhhbmRsZURlbGV0ZSxcbiAgICAgICdBbHQtRGVsZXRlJzogaGFuZGxlRGVsZXRlLFxuICAgICAgJ0FsdC1kJzogaGFuZGxlRGVsZXRlLFxuICAgICAgJ0N0cmwtYSc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnNlbGVjdFRleHRibG9ja1N0YXJ0KCksXG4gICAgICAnQ3RybC1lJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuc2VsZWN0VGV4dGJsb2NrRW5kKCksXG4gICAgfVxuXG4gICAgaWYgKGlzaU9TKCkgfHwgaXNNYWNPUygpKSB7XG4gICAgICByZXR1cm4gbWFjS2V5bWFwXG4gICAgfVxuXG4gICAgcmV0dXJuIHBjS2V5bWFwXG4gIH0sXG5cbiAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zKCkge1xuICAgIHJldHVybiBbXG4gICAgICAvLyBXaXRoIHRoaXMgcGx1Z2luIHdlIGNoZWNrIGlmIHRoZSB3aG9sZSBkb2N1bWVudCB3YXMgc2VsZWN0ZWQgYW5kIGRlbGV0ZWQuXG4gICAgICAvLyBJbiB0aGlzIGNhc2Ugd2Ugd2lsbCBhZGRpdGlvbmFsbHkgY2FsbCBgY2xlYXJOb2RlcygpYCB0byBjb252ZXJ0IGUuZy4gYSBoZWFkaW5nXG4gICAgICAvLyB0byBhIHBhcmFncmFwaCBpZiBuZWNlc3NhcnkuXG4gICAgICAvLyBUaGlzIGlzIGFuIGFsdGVybmF0aXZlIHRvIFByb3NlTWlycm9yJ3MgYEFsbFNlbGVjdGlvbmAsIHdoaWNoIGRvZXNu4oCZdCB3b3JrIHdlbGxcbiAgICAgIC8vIHdpdGggbWFueSBvdGhlciBjb21tYW5kcy5cbiAgICAgIG5ldyBQbHVnaW4oe1xuICAgICAgICBrZXk6IG5ldyBQbHVnaW5LZXkoJ2NsZWFyRG9jdW1lbnQnKSxcbiAgICAgICAgYXBwZW5kVHJhbnNhY3Rpb246ICh0cmFuc2FjdGlvbnMsIG9sZFN0YXRlLCBuZXdTdGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRvY0NoYW5nZXMgPSB0cmFuc2FjdGlvbnMuc29tZSh0cmFuc2FjdGlvbiA9PiB0cmFuc2FjdGlvbi5kb2NDaGFuZ2VkKVxuICAgICAgICAgICAgJiYgIW9sZFN0YXRlLmRvYy5lcShuZXdTdGF0ZS5kb2MpXG5cbiAgICAgICAgICBpZiAoIWRvY0NoYW5nZXMpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHsgZW1wdHksIGZyb20sIHRvIH0gPSBvbGRTdGF0ZS5zZWxlY3Rpb25cbiAgICAgICAgICBjb25zdCBhbGxGcm9tID0gU2VsZWN0aW9uLmF0U3RhcnQob2xkU3RhdGUuZG9jKS5mcm9tXG4gICAgICAgICAgY29uc3QgYWxsRW5kID0gU2VsZWN0aW9uLmF0RW5kKG9sZFN0YXRlLmRvYykudG9cbiAgICAgICAgICBjb25zdCBhbGxXYXNTZWxlY3RlZCA9IGZyb20gPT09IGFsbEZyb20gJiYgdG8gPT09IGFsbEVuZFxuXG4gICAgICAgICAgaWYgKGVtcHR5IHx8ICFhbGxXYXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgaXNFbXB0eSA9IG5ld1N0YXRlLmRvYy50ZXh0QmV0d2VlbigwLCBuZXdTdGF0ZS5kb2MuY29udGVudC5zaXplLCAnICcsICcgJykubGVuZ3RoID09PSAwXG5cbiAgICAgICAgICBpZiAoIWlzRW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHRyID0gbmV3U3RhdGUudHJcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IGNyZWF0ZUNoYWluYWJsZVN0YXRlKHtcbiAgICAgICAgICAgIHN0YXRlOiBuZXdTdGF0ZSxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0cixcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IHsgY29tbWFuZHMgfSA9IG5ldyBDb21tYW5kTWFuYWdlcih7XG4gICAgICAgICAgICBlZGl0b3I6IHRoaXMuZWRpdG9yLFxuICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGNvbW1hbmRzLmNsZWFyTm9kZXMoKVxuXG4gICAgICAgICAgaWYgKCF0ci5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0clxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXVxuICB9LFxufSlcbiIsImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luS2V5IH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnLi4vRXh0ZW5zaW9uLmpzJ1xuXG5leHBvcnQgY29uc3QgVGFiaW5kZXggPSBFeHRlbnNpb24uY3JlYXRlKHtcbiAgbmFtZTogJ3RhYmluZGV4JyxcblxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG5ldyBQbHVnaW4oe1xuICAgICAgICBrZXk6IG5ldyBQbHVnaW5LZXkoJ3RhYmluZGV4JyksXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgYXR0cmlidXRlczogdGhpcy5lZGl0b3IuaXNFZGl0YWJsZSA/IHsgdGFiaW5kZXg6ICcwJyB9IDoge30sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIiwiZXhwb3J0IGNvbnN0IHN0eWxlID0gYC5Qcm9zZU1pcnJvciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLlByb3NlTWlycm9yIHtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIHdoaXRlLXNwYWNlOiBicmVhay1zcGFjZXM7XG4gIC13ZWJraXQtZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbiAgZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbiAgZm9udC1mZWF0dXJlLXNldHRpbmdzOiBcImxpZ2FcIiAwOyAvKiB0aGUgYWJvdmUgZG9lc24ndCBzZWVtIHRvIHdvcmsgaW4gRWRnZSAqL1xufVxuXG4uUHJvc2VNaXJyb3IgW2NvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCJdIHtcbiAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbn1cblxuLlByb3NlTWlycm9yIFtjb250ZW50ZWRpdGFibGU9XCJmYWxzZVwiXSBbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLlByb3NlTWlycm9yIHByZSB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuaW1nLlByb3NlTWlycm9yLXNlcGFyYXRvciB7XG4gIGRpc3BsYXk6IGlubGluZSAhaW1wb3J0YW50O1xuICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XG4gIHdpZHRoOiAxcHggIWltcG9ydGFudDtcbiAgaGVpZ2h0OiAxcHggIWltcG9ydGFudDtcbn1cblxuLlByb3NlTWlycm9yLWdhcGN1cnNvciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIG1hcmdpbjogMDtcbn1cblxuLlByb3NlTWlycm9yLWdhcGN1cnNvcjphZnRlciB7XG4gIGNvbnRlbnQ6IFwiXCI7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTJweDtcbiAgd2lkdGg6IDIwcHg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCBibGFjaztcbiAgYW5pbWF0aW9uOiBQcm9zZU1pcnJvci1jdXJzb3ItYmxpbmsgMS4xcyBzdGVwcygyLCBzdGFydCkgaW5maW5pdGU7XG59XG5cbkBrZXlmcmFtZXMgUHJvc2VNaXJyb3ItY3Vyc29yLWJsaW5rIHtcbiAgdG8ge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgfVxufVxuXG4uUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiAqOjpzZWxlY3Rpb24ge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbn1cblxuLlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24gKjo6LW1vei1zZWxlY3Rpb24ge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbn1cblxuLlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24gKiB7XG4gIGNhcmV0LWNvbG9yOiB0cmFuc3BhcmVudDtcbn1cblxuLlByb3NlTWlycm9yLWZvY3VzZWQgLlByb3NlTWlycm9yLWdhcGN1cnNvciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4udGlwcHktYm94W2RhdGEtYW5pbWF0aW9uPWZhZGVdW2RhdGEtc3RhdGU9aGlkZGVuXSB7XG4gIG9wYWNpdHk6IDBcbn1gXG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlU3R5bGVUYWcoc3R5bGU6IHN0cmluZywgbm9uY2U/OiBzdHJpbmcsIHN1ZmZpeD86IHN0cmluZyk6IEhUTUxTdHlsZUVsZW1lbnQge1xuICBjb25zdCB0aXB0YXBTdHlsZVRhZyA9ICg8SFRNTFN0eWxlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzdHlsZVtkYXRhLXRpcHRhcC1zdHlsZSR7c3VmZml4ID8gYC0ke3N1ZmZpeH1gIDogJyd9XWApKVxuXG4gIGlmICh0aXB0YXBTdHlsZVRhZyAhPT0gbnVsbCkge1xuICAgIHJldHVybiB0aXB0YXBTdHlsZVRhZ1xuICB9XG5cbiAgY29uc3Qgc3R5bGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKVxuXG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlTm9kZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbm9uY2UpXG4gIH1cblxuICBzdHlsZU5vZGUuc2V0QXR0cmlidXRlKGBkYXRhLXRpcHRhcC1zdHlsZSR7c3VmZml4ID8gYC0ke3N1ZmZpeH1gIDogJyd9YCwgJycpXG4gIHN0eWxlTm9kZS5pbm5lckhUTUwgPSBzdHlsZVxuICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlTm9kZSlcblxuICByZXR1cm4gc3R5bGVOb2RlXG59XG4iLCJpbXBvcnQgeyBNYXJrVHlwZSwgTm9kZVR5cGUsIFNjaGVtYSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQge1xuICBFZGl0b3JTdGF0ZSwgUGx1Z2luLCBQbHVnaW5LZXksIFRyYW5zYWN0aW9uLFxufSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuaW1wb3J0IHsgRWRpdG9yVmlldyB9IGZyb20gJ0B0aXB0YXAvcG0vdmlldydcblxuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuL0NvbW1hbmRNYW5hZ2VyLmpzJ1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnLi9FdmVudEVtaXR0ZXIuanMnXG5pbXBvcnQgeyBFeHRlbnNpb25NYW5hZ2VyIH0gZnJvbSAnLi9FeHRlbnNpb25NYW5hZ2VyLmpzJ1xuaW1wb3J0ICogYXMgZXh0ZW5zaW9ucyBmcm9tICcuL2V4dGVuc2lvbnMvaW5kZXguanMnXG5pbXBvcnQgeyBjcmVhdGVEb2N1bWVudCB9IGZyb20gJy4vaGVscGVycy9jcmVhdGVEb2N1bWVudC5qcydcbmltcG9ydCB7IGdldEF0dHJpYnV0ZXMgfSBmcm9tICcuL2hlbHBlcnMvZ2V0QXR0cmlidXRlcy5qcydcbmltcG9ydCB7IGdldEhUTUxGcm9tRnJhZ21lbnQgfSBmcm9tICcuL2hlbHBlcnMvZ2V0SFRNTEZyb21GcmFnbWVudC5qcydcbmltcG9ydCB7IGdldFRleHQgfSBmcm9tICcuL2hlbHBlcnMvZ2V0VGV4dC5qcydcbmltcG9ydCB7IGdldFRleHRTZXJpYWxpemVyc0Zyb21TY2hlbWEgfSBmcm9tICcuL2hlbHBlcnMvZ2V0VGV4dFNlcmlhbGl6ZXJzRnJvbVNjaGVtYS5qcydcbmltcG9ydCB7IGlzQWN0aXZlIH0gZnJvbSAnLi9oZWxwZXJzL2lzQWN0aXZlLmpzJ1xuaW1wb3J0IHsgaXNOb2RlRW1wdHkgfSBmcm9tICcuL2hlbHBlcnMvaXNOb2RlRW1wdHkuanMnXG5pbXBvcnQgeyByZXNvbHZlRm9jdXNQb3NpdGlvbiB9IGZyb20gJy4vaGVscGVycy9yZXNvbHZlRm9jdXNQb3NpdGlvbi5qcydcbmltcG9ydCB7IHN0eWxlIH0gZnJvbSAnLi9zdHlsZS5qcydcbmltcG9ydCB7XG4gIENhbkNvbW1hbmRzLFxuICBDaGFpbmVkQ29tbWFuZHMsXG4gIEVkaXRvckV2ZW50cyxcbiAgRWRpdG9yT3B0aW9ucyxcbiAgSlNPTkNvbnRlbnQsXG4gIFNpbmdsZUNvbW1hbmRzLFxuICBUZXh0U2VyaWFsaXplcixcbn0gZnJvbSAnLi90eXBlcy5qcydcbmltcG9ydCB7IGNyZWF0ZVN0eWxlVGFnIH0gZnJvbSAnLi91dGlsaXRpZXMvY3JlYXRlU3R5bGVUYWcuanMnXG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsaXRpZXMvaXNGdW5jdGlvbi5qcydcblxuZXhwb3J0IHsgZXh0ZW5zaW9ucyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgSFRNTEVsZW1lbnQge1xuICBlZGl0b3I/OiBFZGl0b3Jcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRvciBleHRlbmRzIEV2ZW50RW1pdHRlcjxFZGl0b3JFdmVudHM+IHtcbiAgcHJpdmF0ZSBjb21tYW5kTWFuYWdlciE6IENvbW1hbmRNYW5hZ2VyXG5cbiAgcHVibGljIGV4dGVuc2lvbk1hbmFnZXIhOiBFeHRlbnNpb25NYW5hZ2VyXG5cbiAgcHJpdmF0ZSBjc3MhOiBIVE1MU3R5bGVFbGVtZW50XG5cbiAgcHVibGljIHNjaGVtYSE6IFNjaGVtYVxuXG4gIHB1YmxpYyB2aWV3ITogRWRpdG9yVmlld1xuXG4gIHB1YmxpYyBpc0ZvY3VzZWQgPSBmYWxzZVxuXG4gIHB1YmxpYyBleHRlbnNpb25TdG9yYWdlOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge31cblxuICBwdWJsaWMgb3B0aW9uczogRWRpdG9yT3B0aW9ucyA9IHtcbiAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICBjb250ZW50OiAnJyxcbiAgICBpbmplY3RDU1M6IHRydWUsXG4gICAgaW5qZWN0Tm9uY2U6IHVuZGVmaW5lZCxcbiAgICBleHRlbnNpb25zOiBbXSxcbiAgICBhdXRvZm9jdXM6IGZhbHNlLFxuICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgIGVkaXRvclByb3BzOiB7fSxcbiAgICBwYXJzZU9wdGlvbnM6IHt9LFxuICAgIGVuYWJsZUlucHV0UnVsZXM6IHRydWUsXG4gICAgZW5hYmxlUGFzdGVSdWxlczogdHJ1ZSxcbiAgICBlbmFibGVDb3JlRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICBvbkJlZm9yZUNyZWF0ZTogKCkgPT4gbnVsbCxcbiAgICBvbkNyZWF0ZTogKCkgPT4gbnVsbCxcbiAgICBvblVwZGF0ZTogKCkgPT4gbnVsbCxcbiAgICBvblNlbGVjdGlvblVwZGF0ZTogKCkgPT4gbnVsbCxcbiAgICBvblRyYW5zYWN0aW9uOiAoKSA9PiBudWxsLFxuICAgIG9uRm9jdXM6ICgpID0+IG51bGwsXG4gICAgb25CbHVyOiAoKSA9PiBudWxsLFxuICAgIG9uRGVzdHJveTogKCkgPT4gbnVsbCxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8RWRpdG9yT3B0aW9ucz4gPSB7fSkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucylcbiAgICB0aGlzLmNyZWF0ZUV4dGVuc2lvbk1hbmFnZXIoKVxuICAgIHRoaXMuY3JlYXRlQ29tbWFuZE1hbmFnZXIoKVxuICAgIHRoaXMuY3JlYXRlU2NoZW1hKClcbiAgICB0aGlzLm9uKCdiZWZvcmVDcmVhdGUnLCB0aGlzLm9wdGlvbnMub25CZWZvcmVDcmVhdGUpXG4gICAgdGhpcy5lbWl0KCdiZWZvcmVDcmVhdGUnLCB7IGVkaXRvcjogdGhpcyB9KVxuICAgIHRoaXMuY3JlYXRlVmlldygpXG4gICAgdGhpcy5pbmplY3RDU1MoKVxuICAgIHRoaXMub24oJ2NyZWF0ZScsIHRoaXMub3B0aW9ucy5vbkNyZWF0ZSlcbiAgICB0aGlzLm9uKCd1cGRhdGUnLCB0aGlzLm9wdGlvbnMub25VcGRhdGUpXG4gICAgdGhpcy5vbignc2VsZWN0aW9uVXBkYXRlJywgdGhpcy5vcHRpb25zLm9uU2VsZWN0aW9uVXBkYXRlKVxuICAgIHRoaXMub24oJ3RyYW5zYWN0aW9uJywgdGhpcy5vcHRpb25zLm9uVHJhbnNhY3Rpb24pXG4gICAgdGhpcy5vbignZm9jdXMnLCB0aGlzLm9wdGlvbnMub25Gb2N1cylcbiAgICB0aGlzLm9uKCdibHVyJywgdGhpcy5vcHRpb25zLm9uQmx1cilcbiAgICB0aGlzLm9uKCdkZXN0cm95JywgdGhpcy5vcHRpb25zLm9uRGVzdHJveSlcblxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbW1hbmRzLmZvY3VzKHRoaXMub3B0aW9ucy5hdXRvZm9jdXMpXG4gICAgICB0aGlzLmVtaXQoJ2NyZWF0ZScsIHsgZWRpdG9yOiB0aGlzIH0pXG4gICAgfSwgMClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlZGl0b3Igc3RvcmFnZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgc3RvcmFnZSgpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5leHRlbnNpb25TdG9yYWdlXG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IG9mIGFsbCByZWdpc3RlcmVkIGNvbW1hbmRzLlxuICAgKi9cbiAgcHVibGljIGdldCBjb21tYW5kcygpOiBTaW5nbGVDb21tYW5kcyB7XG4gICAgcmV0dXJuIHRoaXMuY29tbWFuZE1hbmFnZXIuY29tbWFuZHNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBjb21tYW5kIGNoYWluIHRvIGNhbGwgbXVsdGlwbGUgY29tbWFuZHMgYXQgb25jZS5cbiAgICovXG4gIHB1YmxpYyBjaGFpbigpOiBDaGFpbmVkQ29tbWFuZHMge1xuICAgIHJldHVybiB0aGlzLmNvbW1hbmRNYW5hZ2VyLmNoYWluKClcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNvbW1hbmQgb3IgYSBjb21tYW5kIGNoYWluIGNhbiBiZSBleGVjdXRlZC4gV2l0aG91dCBleGVjdXRpbmcgaXQuXG4gICAqL1xuICBwdWJsaWMgY2FuKCk6IENhbkNvbW1hbmRzIHtcbiAgICByZXR1cm4gdGhpcy5jb21tYW5kTWFuYWdlci5jYW4oKVxuICB9XG5cbiAgLyoqXG4gICAqIEluamVjdCBDU1Mgc3R5bGVzLlxuICAgKi9cbiAgcHJpdmF0ZSBpbmplY3RDU1MoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pbmplY3RDU1MgJiYgZG9jdW1lbnQpIHtcbiAgICAgIHRoaXMuY3NzID0gY3JlYXRlU3R5bGVUYWcoc3R5bGUsIHRoaXMub3B0aW9ucy5pbmplY3ROb25jZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGVkaXRvciBvcHRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyBBIGxpc3Qgb2Ygb3B0aW9uc1xuICAgKi9cbiAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogUGFydGlhbDxFZGl0b3JPcHRpb25zPiA9IHt9KTogdm9pZCB7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudmlldyB8fCAhdGhpcy5zdGF0ZSB8fCB0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmVkaXRvclByb3BzKSB7XG4gICAgICB0aGlzLnZpZXcuc2V0UHJvcHModGhpcy5vcHRpb25zLmVkaXRvclByb3BzKVxuICAgIH1cblxuICAgIHRoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlKVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBlZGl0YWJsZSBzdGF0ZSBvZiB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcHVibGljIHNldEVkaXRhYmxlKGVkaXRhYmxlOiBib29sZWFuLCBlbWl0VXBkYXRlID0gdHJ1ZSk6IHZvaWQge1xuICAgIHRoaXMuc2V0T3B0aW9ucyh7IGVkaXRhYmxlIH0pXG5cbiAgICBpZiAoZW1pdFVwZGF0ZSkge1xuICAgICAgdGhpcy5lbWl0KCd1cGRhdGUnLCB7IGVkaXRvcjogdGhpcywgdHJhbnNhY3Rpb246IHRoaXMuc3RhdGUudHIgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBlZGl0b3IgaXMgZWRpdGFibGUuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlzRWRpdGFibGUoKTogYm9vbGVhbiB7XG4gICAgLy8gc2luY2UgcGx1Z2lucyBhcmUgYXBwbGllZCBhZnRlciBjcmVhdGluZyB0aGUgdmlld1xuICAgIC8vIGBlZGl0YWJsZWAgaXMgYWx3YXlzIGB0cnVlYCBmb3Igb25lIHRpY2suXG4gICAgLy8gdGhhdOKAmXMgd2h5IHdlIGFsc28gaGF2ZSB0byBjaGVjayBmb3IgYG9wdGlvbnMuZWRpdGFibGVgXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5lZGl0YWJsZSAmJiB0aGlzLnZpZXcgJiYgdGhpcy52aWV3LmVkaXRhYmxlXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWRpdG9yIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGdldCBzdGF0ZSgpOiBFZGl0b3JTdGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5zdGF0ZVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgUHJvc2VNaXJyb3IgcGx1Z2luLlxuICAgKlxuICAgKiBAcGFyYW0gcGx1Z2luIEEgUHJvc2VNaXJyb3IgcGx1Z2luXG4gICAqIEBwYXJhbSBoYW5kbGVQbHVnaW5zIENvbnRyb2wgaG93IHRvIG1lcmdlIHRoZSBwbHVnaW4gaW50byB0aGUgZXhpc3RpbmcgcGx1Z2lucy5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlclBsdWdpbihcbiAgICBwbHVnaW46IFBsdWdpbixcbiAgICBoYW5kbGVQbHVnaW5zPzogKG5ld1BsdWdpbjogUGx1Z2luLCBwbHVnaW5zOiBQbHVnaW5bXSkgPT4gUGx1Z2luW10sXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHBsdWdpbnMgPSBpc0Z1bmN0aW9uKGhhbmRsZVBsdWdpbnMpXG4gICAgICA/IGhhbmRsZVBsdWdpbnMocGx1Z2luLCBbLi4udGhpcy5zdGF0ZS5wbHVnaW5zXSlcbiAgICAgIDogWy4uLnRoaXMuc3RhdGUucGx1Z2lucywgcGx1Z2luXVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlLnJlY29uZmlndXJlKHsgcGx1Z2lucyB9KVxuXG4gICAgdGhpcy52aWV3LnVwZGF0ZVN0YXRlKHN0YXRlKVxuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYSBQcm9zZU1pcnJvciBwbHVnaW4uXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lT3JQbHVnaW5LZXkgVGhlIHBsdWdpbnMgbmFtZVxuICAgKi9cbiAgcHVibGljIHVucmVnaXN0ZXJQbHVnaW4obmFtZU9yUGx1Z2luS2V5OiBzdHJpbmcgfCBQbHVnaW5LZXkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2YgbmFtZU9yUGx1Z2luS2V5ID09PSAnc3RyaW5nJyA/IGAke25hbWVPclBsdWdpbktleX0kYCA6IG5hbWVPclBsdWdpbktleS5rZXlcblxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZS5yZWNvbmZpZ3VyZSh7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBwbHVnaW5zOiB0aGlzLnN0YXRlLnBsdWdpbnMuZmlsdGVyKHBsdWdpbiA9PiAhcGx1Z2luLmtleS5zdGFydHNXaXRoKG5hbWUpKSxcbiAgICB9KVxuXG4gICAgdGhpcy52aWV3LnVwZGF0ZVN0YXRlKHN0YXRlKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXh0ZW5zaW9uIG1hbmFnZXIuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZUV4dGVuc2lvbk1hbmFnZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY29yZUV4dGVuc2lvbnMgPSB0aGlzLm9wdGlvbnMuZW5hYmxlQ29yZUV4dGVuc2lvbnMgPyBPYmplY3QudmFsdWVzKGV4dGVuc2lvbnMpIDogW11cbiAgICBjb25zdCBhbGxFeHRlbnNpb25zID0gWy4uLmNvcmVFeHRlbnNpb25zLCAuLi50aGlzLm9wdGlvbnMuZXh0ZW5zaW9uc10uZmlsdGVyKGV4dGVuc2lvbiA9PiB7XG4gICAgICByZXR1cm4gWydleHRlbnNpb24nLCAnbm9kZScsICdtYXJrJ10uaW5jbHVkZXMoZXh0ZW5zaW9uPy50eXBlKVxuICAgIH0pXG5cbiAgICB0aGlzLmV4dGVuc2lvbk1hbmFnZXIgPSBuZXcgRXh0ZW5zaW9uTWFuYWdlcihhbGxFeHRlbnNpb25zLCB0aGlzKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gY29tbWFuZCBtYW5hZ2VyLlxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVDb21tYW5kTWFuYWdlcigpOiB2b2lkIHtcbiAgICB0aGlzLmNvbW1hbmRNYW5hZ2VyID0gbmV3IENvbW1hbmRNYW5hZ2VyKHtcbiAgICAgIGVkaXRvcjogdGhpcyxcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBQcm9zZU1pcnJvciBzY2hlbWEuXG4gICAqL1xuICBwcml2YXRlIGNyZWF0ZVNjaGVtYSgpOiB2b2lkIHtcbiAgICB0aGlzLnNjaGVtYSA9IHRoaXMuZXh0ZW5zaW9uTWFuYWdlci5zY2hlbWFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgUHJvc2VNaXJyb3Igdmlldy5cbiAgICovXG4gIHByaXZhdGUgY3JlYXRlVmlldygpOiB2b2lkIHtcbiAgICBjb25zdCBkb2MgPSBjcmVhdGVEb2N1bWVudCh0aGlzLm9wdGlvbnMuY29udGVudCwgdGhpcy5zY2hlbWEsIHRoaXMub3B0aW9ucy5wYXJzZU9wdGlvbnMpXG4gICAgY29uc3Qgc2VsZWN0aW9uID0gcmVzb2x2ZUZvY3VzUG9zaXRpb24oZG9jLCB0aGlzLm9wdGlvbnMuYXV0b2ZvY3VzKVxuXG4gICAgdGhpcy52aWV3ID0gbmV3IEVkaXRvclZpZXcodGhpcy5vcHRpb25zLmVsZW1lbnQsIHtcbiAgICAgIC4uLnRoaXMub3B0aW9ucy5lZGl0b3JQcm9wcyxcbiAgICAgIGRpc3BhdGNoVHJhbnNhY3Rpb246IHRoaXMuZGlzcGF0Y2hUcmFuc2FjdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgc3RhdGU6IEVkaXRvclN0YXRlLmNyZWF0ZSh7XG4gICAgICAgIGRvYyxcbiAgICAgICAgc2VsZWN0aW9uOiBzZWxlY3Rpb24gfHwgdW5kZWZpbmVkLFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIC8vIGBlZGl0b3Iudmlld2AgaXMgbm90IHlldCBhdmFpbGFibGUgYXQgdGhpcyB0aW1lLlxuICAgIC8vIFRoZXJlZm9yZSB3ZSB3aWxsIGFkZCBhbGwgcGx1Z2lucyBhbmQgbm9kZSB2aWV3cyBkaXJlY3RseSBhZnRlcndhcmRzLlxuICAgIGNvbnN0IG5ld1N0YXRlID0gdGhpcy5zdGF0ZS5yZWNvbmZpZ3VyZSh7XG4gICAgICBwbHVnaW5zOiB0aGlzLmV4dGVuc2lvbk1hbmFnZXIucGx1Z2lucyxcbiAgICB9KVxuXG4gICAgdGhpcy52aWV3LnVwZGF0ZVN0YXRlKG5ld1N0YXRlKVxuXG4gICAgdGhpcy5jcmVhdGVOb2RlVmlld3MoKVxuICAgIHRoaXMucHJlcGVuZENsYXNzKClcblxuICAgIC8vIExldOKAmXMgc3RvcmUgdGhlIGVkaXRvciBpbnN0YW5jZSBpbiB0aGUgRE9NIGVsZW1lbnQuXG4gICAgLy8gU28gd2XigJlsbCBoYXZlIGFjY2VzcyB0byBpdCBmb3IgdGVzdHMuXG4gICAgY29uc3QgZG9tID0gdGhpcy52aWV3LmRvbSBhcyBIVE1MRWxlbWVudFxuXG4gICAgZG9tLmVkaXRvciA9IHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFsbCBub2RlIHZpZXdzLlxuICAgKi9cbiAgcHVibGljIGNyZWF0ZU5vZGVWaWV3cygpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXcuc2V0UHJvcHMoe1xuICAgICAgbm9kZVZpZXdzOiB0aGlzLmV4dGVuc2lvbk1hbmFnZXIubm9kZVZpZXdzLFxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogUHJlcGVuZCBjbGFzcyBuYW1lIHRvIGVsZW1lbnQuXG4gICAqL1xuICBwdWJsaWMgcHJlcGVuZENsYXNzKCk6IHZvaWQge1xuICAgIHRoaXMudmlldy5kb20uY2xhc3NOYW1lID0gYHRpcHRhcCAke3RoaXMudmlldy5kb20uY2xhc3NOYW1lfWBcbiAgfVxuXG4gIHB1YmxpYyBpc0NhcHR1cmluZ1RyYW5zYWN0aW9uID0gZmFsc2VcblxuICBwcml2YXRlIGNhcHR1cmVkVHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uIHwgbnVsbCA9IG51bGxcblxuICBwdWJsaWMgY2FwdHVyZVRyYW5zYWN0aW9uKGZuOiBGdW5jdGlvbikge1xuICAgIHRoaXMuaXNDYXB0dXJpbmdUcmFuc2FjdGlvbiA9IHRydWVcbiAgICBmbigpXG4gICAgdGhpcy5pc0NhcHR1cmluZ1RyYW5zYWN0aW9uID0gZmFsc2VcblxuICAgIGNvbnN0IHRyID0gdGhpcy5jYXB0dXJlZFRyYW5zYWN0aW9uXG5cbiAgICB0aGlzLmNhcHR1cmVkVHJhbnNhY3Rpb24gPSBudWxsXG5cbiAgICByZXR1cm4gdHJcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgY2FsbGJhY2sgb3ZlciB3aGljaCB0byBzZW5kIHRyYW5zYWN0aW9ucyAoc3RhdGUgdXBkYXRlcykgcHJvZHVjZWQgYnkgdGhlIHZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSB0cmFuc2FjdGlvbiBBbiBlZGl0b3Igc3RhdGUgdHJhbnNhY3Rpb25cbiAgICovXG4gIHByaXZhdGUgZGlzcGF0Y2hUcmFuc2FjdGlvbih0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pOiB2b2lkIHtcbiAgICAvLyBpZiB0aGUgZWRpdG9yIC8gdGhlIHZpZXcgb2YgdGhlIGVkaXRvciB3YXMgZGVzdHJveWVkXG4gICAgLy8gdGhlIHRyYW5zYWN0aW9uIHNob3VsZCBub3QgYmUgZGlzcGF0Y2hlZCBhcyB0aGVyZSBpcyBubyB2aWV3IGFueW1vcmUuXG4gICAgaWYgKHRoaXMudmlldy5pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNDYXB0dXJpbmdUcmFuc2FjdGlvbikge1xuICAgICAgaWYgKCF0aGlzLmNhcHR1cmVkVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5jYXB0dXJlZFRyYW5zYWN0aW9uID0gdHJhbnNhY3Rpb25cblxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgdHJhbnNhY3Rpb24uc3RlcHMuZm9yRWFjaChzdGVwID0+IHRoaXMuY2FwdHVyZWRUcmFuc2FjdGlvbj8uc3RlcChzdGVwKSlcblxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlLmFwcGx5KHRyYW5zYWN0aW9uKVxuICAgIGNvbnN0IHNlbGVjdGlvbkhhc0NoYW5nZWQgPSAhdGhpcy5zdGF0ZS5zZWxlY3Rpb24uZXEoc3RhdGUuc2VsZWN0aW9uKVxuXG4gICAgdGhpcy52aWV3LnVwZGF0ZVN0YXRlKHN0YXRlKVxuICAgIHRoaXMuZW1pdCgndHJhbnNhY3Rpb24nLCB7XG4gICAgICBlZGl0b3I6IHRoaXMsXG4gICAgICB0cmFuc2FjdGlvbixcbiAgICB9KVxuXG4gICAgaWYgKHNlbGVjdGlvbkhhc0NoYW5nZWQpIHtcbiAgICAgIHRoaXMuZW1pdCgnc2VsZWN0aW9uVXBkYXRlJywge1xuICAgICAgICBlZGl0b3I6IHRoaXMsXG4gICAgICAgIHRyYW5zYWN0aW9uLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBmb2N1cyA9IHRyYW5zYWN0aW9uLmdldE1ldGEoJ2ZvY3VzJylcbiAgICBjb25zdCBibHVyID0gdHJhbnNhY3Rpb24uZ2V0TWV0YSgnYmx1cicpXG5cbiAgICBpZiAoZm9jdXMpIHtcbiAgICAgIHRoaXMuZW1pdCgnZm9jdXMnLCB7XG4gICAgICAgIGVkaXRvcjogdGhpcyxcbiAgICAgICAgZXZlbnQ6IGZvY3VzLmV2ZW50LFxuICAgICAgICB0cmFuc2FjdGlvbixcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGJsdXIpIHtcbiAgICAgIHRoaXMuZW1pdCgnYmx1cicsIHtcbiAgICAgICAgZWRpdG9yOiB0aGlzLFxuICAgICAgICBldmVudDogYmx1ci5ldmVudCxcbiAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICghdHJhbnNhY3Rpb24uZG9jQ2hhbmdlZCB8fCB0cmFuc2FjdGlvbi5nZXRNZXRhKCdwcmV2ZW50VXBkYXRlJykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuZW1pdCgndXBkYXRlJywge1xuICAgICAgZWRpdG9yOiB0aGlzLFxuICAgICAgdHJhbnNhY3Rpb24sXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYXR0cmlidXRlcyBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG5vZGUgb3IgbWFyay5cbiAgICovXG4gIHB1YmxpYyBnZXRBdHRyaWJ1dGVzKG5hbWVPclR5cGU6IHN0cmluZyB8IE5vZGVUeXBlIHwgTWFya1R5cGUpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICByZXR1cm4gZ2V0QXR0cmlidXRlcyh0aGlzLnN0YXRlLCBuYW1lT3JUeXBlKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaWYgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBub2RlIG9yIG1hcmsgaXMgYWN0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBub2RlIG9yIG1hcmtcbiAgICogQHBhcmFtIGF0dHJpYnV0ZXMgQXR0cmlidXRlcyBvZiB0aGUgbm9kZSBvciBtYXJrXG4gICAqL1xuICBwdWJsaWMgaXNBY3RpdmUobmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVzPzoge30pOiBib29sZWFuXG4gIHB1YmxpYyBpc0FjdGl2ZShhdHRyaWJ1dGVzOiB7fSk6IGJvb2xlYW5cbiAgcHVibGljIGlzQWN0aXZlKG5hbWVPckF0dHJpYnV0ZXM6IHN0cmluZywgYXR0cmlidXRlc09yVW5kZWZpbmVkPzoge30pOiBib29sZWFuIHtcbiAgICBjb25zdCBuYW1lID0gdHlwZW9mIG5hbWVPckF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnID8gbmFtZU9yQXR0cmlidXRlcyA6IG51bGxcblxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0eXBlb2YgbmFtZU9yQXR0cmlidXRlcyA9PT0gJ3N0cmluZycgPyBhdHRyaWJ1dGVzT3JVbmRlZmluZWQgOiBuYW1lT3JBdHRyaWJ1dGVzXG5cbiAgICByZXR1cm4gaXNBY3RpdmUodGhpcy5zdGF0ZSwgbmFtZSwgYXR0cmlidXRlcylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRvY3VtZW50IGFzIEpTT04uXG4gICAqL1xuICBwdWJsaWMgZ2V0SlNPTigpOiBKU09OQ29udGVudCB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuZG9jLnRvSlNPTigpXG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkb2N1bWVudCBhcyBIVE1MLlxuICAgKi9cbiAgcHVibGljIGdldEhUTUwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZ2V0SFRNTEZyb21GcmFnbWVudCh0aGlzLnN0YXRlLmRvYy5jb250ZW50LCB0aGlzLnNjaGVtYSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRvY3VtZW50IGFzIHRleHQuXG4gICAqL1xuICBwdWJsaWMgZ2V0VGV4dChvcHRpb25zPzoge1xuICAgIGJsb2NrU2VwYXJhdG9yPzogc3RyaW5nXG4gICAgdGV4dFNlcmlhbGl6ZXJzPzogUmVjb3JkPHN0cmluZywgVGV4dFNlcmlhbGl6ZXI+XG4gIH0pOiBzdHJpbmcge1xuICAgIGNvbnN0IHsgYmxvY2tTZXBhcmF0b3IgPSAnXFxuXFxuJywgdGV4dFNlcmlhbGl6ZXJzID0ge30gfSA9IG9wdGlvbnMgfHwge31cblxuICAgIHJldHVybiBnZXRUZXh0KHRoaXMuc3RhdGUuZG9jLCB7XG4gICAgICBibG9ja1NlcGFyYXRvcixcbiAgICAgIHRleHRTZXJpYWxpemVyczoge1xuICAgICAgICAuLi5nZXRUZXh0U2VyaWFsaXplcnNGcm9tU2NoZW1hKHRoaXMuc2NoZW1hKSxcbiAgICAgICAgLi4udGV4dFNlcmlhbGl6ZXJzLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZXJlIGlzIG5vIGNvbnRlbnQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGlzRW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzTm9kZUVtcHR5KHRoaXMuc3RhdGUuZG9jKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgZm9yIHRoZSBjdXJyZW50IGRvY3VtZW50LlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcHVibGljIGdldENoYXJhY3RlckNvdW50KCk6IG51bWJlciB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1t0aXB0YXAgd2Fybl06IFwiZWRpdG9yLmdldENoYXJhY3RlckNvdW50KClcIiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFwiZWRpdG9yLnN0b3JhZ2UuY2hhcmFjdGVyQ291bnQuY2hhcmFjdGVycygpXCIgaW5zdGVhZC4nLFxuICAgIClcblxuICAgIHJldHVybiB0aGlzLnN0YXRlLmRvYy5jb250ZW50LnNpemUgLSAyXG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSB0aGUgZWRpdG9yLlxuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy5lbWl0KCdkZXN0cm95JylcblxuICAgIGlmICh0aGlzLnZpZXcpIHtcbiAgICAgIHRoaXMudmlldy5kZXN0cm95KClcbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpXG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGVkaXRvciBpcyBhbHJlYWR5IGRlc3Ryb3llZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgaXNEZXN0cm95ZWQoKTogYm9vbGVhbiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJldHVybiAhdGhpcy52aWV3Py5kb2NWaWV3XG4gIH1cbn1cbiIsImltcG9ydCB7IE1hcmtUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgZ2V0TWFya3NCZXR3ZWVuIH0gZnJvbSAnLi4vaGVscGVycy9nZXRNYXJrc0JldHdlZW4uanMnXG5pbXBvcnQgeyBJbnB1dFJ1bGUsIElucHV0UnVsZUZpbmRlciB9IGZyb20gJy4uL0lucHV0UnVsZS5qcydcbmltcG9ydCB7IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheSB9IGZyb20gJy4uL3R5cGVzLmpzJ1xuaW1wb3J0IHsgY2FsbE9yUmV0dXJuIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2NhbGxPclJldHVybi5qcydcblxuLyoqXG4gKiBCdWlsZCBhbiBpbnB1dCBydWxlIHRoYXQgYWRkcyBhIG1hcmsgd2hlbiB0aGVcbiAqIG1hdGNoZWQgdGV4dCBpcyB0eXBlZCBpbnRvIGl0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFya0lucHV0UnVsZShjb25maWc6IHtcbiAgZmluZDogSW5wdXRSdWxlRmluZGVyXG4gIHR5cGU6IE1hcmtUeXBlXG4gIGdldEF0dHJpYnV0ZXM/OlxuICAgIHwgUmVjb3JkPHN0cmluZywgYW55PlxuICAgIHwgKChtYXRjaDogRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5KSA9PiBSZWNvcmQ8c3RyaW5nLCBhbnk+KVxuICAgIHwgZmFsc2VcbiAgICB8IG51bGxcbn0pIHtcbiAgcmV0dXJuIG5ldyBJbnB1dFJ1bGUoe1xuICAgIGZpbmQ6IGNvbmZpZy5maW5kLFxuICAgIGhhbmRsZXI6ICh7IHN0YXRlLCByYW5nZSwgbWF0Y2ggfSkgPT4ge1xuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IGNhbGxPclJldHVybihjb25maWcuZ2V0QXR0cmlidXRlcywgdW5kZWZpbmVkLCBtYXRjaClcblxuICAgICAgaWYgKGF0dHJpYnV0ZXMgPT09IGZhbHNlIHx8IGF0dHJpYnV0ZXMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyB0ciB9ID0gc3RhdGVcbiAgICAgIGNvbnN0IGNhcHR1cmVHcm91cCA9IG1hdGNoW21hdGNoLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCBmdWxsTWF0Y2ggPSBtYXRjaFswXVxuXG4gICAgICBpZiAoY2FwdHVyZUdyb3VwKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0U3BhY2VzID0gZnVsbE1hdGNoLnNlYXJjaCgvXFxTLylcbiAgICAgICAgY29uc3QgdGV4dFN0YXJ0ID0gcmFuZ2UuZnJvbSArIGZ1bGxNYXRjaC5pbmRleE9mKGNhcHR1cmVHcm91cClcbiAgICAgICAgY29uc3QgdGV4dEVuZCA9IHRleHRTdGFydCArIGNhcHR1cmVHcm91cC5sZW5ndGhcblxuICAgICAgICBjb25zdCBleGNsdWRlZE1hcmtzID0gZ2V0TWFya3NCZXR3ZWVuKHJhbmdlLmZyb20sIHJhbmdlLnRvLCBzdGF0ZS5kb2MpXG4gICAgICAgICAgLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkID0gaXRlbS5tYXJrLnR5cGUuZXhjbHVkZWQgYXMgTWFya1R5cGVbXVxuXG4gICAgICAgICAgICByZXR1cm4gZXhjbHVkZWQuZmluZCh0eXBlID0+IHR5cGUgPT09IGNvbmZpZy50eXBlICYmIHR5cGUgIT09IGl0ZW0ubWFyay50eXBlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udG8gPiB0ZXh0U3RhcnQpXG5cbiAgICAgICAgaWYgKGV4Y2x1ZGVkTWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0RW5kIDwgcmFuZ2UudG8pIHtcbiAgICAgICAgICB0ci5kZWxldGUodGV4dEVuZCwgcmFuZ2UudG8pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dFN0YXJ0ID4gcmFuZ2UuZnJvbSkge1xuICAgICAgICAgIHRyLmRlbGV0ZShyYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMsIHRleHRTdGFydClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcmtFbmQgPSByYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMgKyBjYXB0dXJlR3JvdXAubGVuZ3RoXG5cbiAgICAgICAgdHIuYWRkTWFyayhyYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMsIG1hcmtFbmQsIGNvbmZpZy50eXBlLmNyZWF0ZShhdHRyaWJ1dGVzIHx8IHt9KSlcblxuICAgICAgICB0ci5yZW1vdmVTdG9yZWRNYXJrKGNvbmZpZy50eXBlKVxuICAgICAgfVxuICAgIH0sXG4gIH0pXG59XG4iLCJpbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5cbmltcG9ydCB7IElucHV0UnVsZSwgSW5wdXRSdWxlRmluZGVyIH0gZnJvbSAnLi4vSW5wdXRSdWxlLmpzJ1xuaW1wb3J0IHsgRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5IH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBjYWxsT3JSZXR1cm4gfSBmcm9tICcuLi91dGlsaXRpZXMvY2FsbE9yUmV0dXJuLmpzJ1xuXG4vKipcbiAqIEJ1aWxkIGFuIGlucHV0IHJ1bGUgdGhhdCBhZGRzIGEgbm9kZSB3aGVuIHRoZVxuICogbWF0Y2hlZCB0ZXh0IGlzIHR5cGVkIGludG8gaXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub2RlSW5wdXRSdWxlKGNvbmZpZzoge1xuICAvKipcbiAgICogVGhlIHJlZ2V4IHRvIG1hdGNoLlxuICAgKi9cbiAgZmluZDogSW5wdXRSdWxlRmluZGVyXG5cbiAgLyoqXG4gICAqIFRoZSBub2RlIHR5cGUgdG8gYWRkLlxuICAgKi9cbiAgdHlwZTogTm9kZVR5cGVcblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGF0dHJpYnV0ZXMgZm9yIHRoZSBub2RlXG4gICAqIGNhbiBhbHNvIGJlIGFuIG9iamVjdCBvZiBhdHRyaWJ1dGVzXG4gICAqL1xuICBnZXRBdHRyaWJ1dGVzPzpcbiAgICB8IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICB8ICgobWF0Y2g6IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheSkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgICB8IGZhbHNlXG4gICAgfCBudWxsXG59KSB7XG4gIHJldHVybiBuZXcgSW5wdXRSdWxlKHtcbiAgICBmaW5kOiBjb25maWcuZmluZCxcbiAgICBoYW5kbGVyOiAoeyBzdGF0ZSwgcmFuZ2UsIG1hdGNoIH0pID0+IHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBjYWxsT3JSZXR1cm4oY29uZmlnLmdldEF0dHJpYnV0ZXMsIHVuZGVmaW5lZCwgbWF0Y2gpIHx8IHt9XG4gICAgICBjb25zdCB7IHRyIH0gPSBzdGF0ZVxuICAgICAgY29uc3Qgc3RhcnQgPSByYW5nZS5mcm9tXG4gICAgICBsZXQgZW5kID0gcmFuZ2UudG9cblxuICAgICAgY29uc3QgbmV3Tm9kZSA9IGNvbmZpZy50eXBlLmNyZWF0ZShhdHRyaWJ1dGVzKVxuXG4gICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gbWF0Y2hbMF0ubGFzdEluZGV4T2YobWF0Y2hbMV0pXG4gICAgICAgIGxldCBtYXRjaFN0YXJ0ID0gc3RhcnQgKyBvZmZzZXRcblxuICAgICAgICBpZiAobWF0Y2hTdGFydCA+IGVuZCkge1xuICAgICAgICAgIG1hdGNoU3RhcnQgPSBlbmRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbmQgPSBtYXRjaFN0YXJ0ICsgbWF0Y2hbMV0ubGVuZ3RoXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpbnNlcnQgbGFzdCB0eXBlZCBjaGFyYWN0ZXJcbiAgICAgICAgY29uc3QgbGFzdENoYXIgPSBtYXRjaFswXVttYXRjaFswXS5sZW5ndGggLSAxXVxuXG4gICAgICAgIHRyLmluc2VydFRleHQobGFzdENoYXIsIHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoIC0gMSlcblxuICAgICAgICAvLyBpbnNlcnQgbm9kZSBmcm9tIGlucHV0IHJ1bGVcbiAgICAgICAgdHIucmVwbGFjZVdpdGgobWF0Y2hTdGFydCwgZW5kLCBuZXdOb2RlKVxuICAgICAgfSBlbHNlIGlmIChtYXRjaFswXSkge1xuICAgICAgICB0ci5pbnNlcnQoc3RhcnQgLSAxLCBjb25maWcudHlwZS5jcmVhdGUoYXR0cmlidXRlcykpLmRlbGV0ZShcbiAgICAgICAgICB0ci5tYXBwaW5nLm1hcChzdGFydCksXG4gICAgICAgICAgdHIubWFwcGluZy5tYXAoZW5kKSxcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICB0ci5zY3JvbGxJbnRvVmlldygpXG4gICAgfSxcbiAgfSlcbn1cbiIsImltcG9ydCB7IE5vZGVUeXBlIH0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcblxuaW1wb3J0IHsgSW5wdXRSdWxlLCBJbnB1dFJ1bGVGaW5kZXIgfSBmcm9tICcuLi9JbnB1dFJ1bGUuanMnXG5pbXBvcnQgeyBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXkgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IGNhbGxPclJldHVybiB9IGZyb20gJy4uL3V0aWxpdGllcy9jYWxsT3JSZXR1cm4uanMnXG5cbi8qKlxuICogQnVpbGQgYW4gaW5wdXQgcnVsZSB0aGF0IGNoYW5nZXMgdGhlIHR5cGUgb2YgYSB0ZXh0YmxvY2sgd2hlbiB0aGVcbiAqIG1hdGNoZWQgdGV4dCBpcyB0eXBlZCBpbnRvIGl0LiBXaGVuIHVzaW5nIGEgcmVndWxhciBleHByZXNpb24geW914oCZbGxcbiAqIHByb2JhYmx5IHdhbnQgdGhlIHJlZ2V4cCB0byBzdGFydCB3aXRoIGBeYCwgc28gdGhhdCB0aGUgcGF0dGVybiBjYW5cbiAqIG9ubHkgb2NjdXIgYXQgdGhlIHN0YXJ0IG9mIGEgdGV4dGJsb2NrLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGV4dGJsb2NrVHlwZUlucHV0UnVsZShjb25maWc6IHtcbiAgZmluZDogSW5wdXRSdWxlRmluZGVyXG4gIHR5cGU6IE5vZGVUeXBlXG4gIGdldEF0dHJpYnV0ZXM/OlxuICAgIHwgUmVjb3JkPHN0cmluZywgYW55PlxuICAgIHwgKChtYXRjaDogRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5KSA9PiBSZWNvcmQ8c3RyaW5nLCBhbnk+KVxuICAgIHwgZmFsc2VcbiAgICB8IG51bGxcbn0pIHtcbiAgcmV0dXJuIG5ldyBJbnB1dFJ1bGUoe1xuICAgIGZpbmQ6IGNvbmZpZy5maW5kLFxuICAgIGhhbmRsZXI6ICh7IHN0YXRlLCByYW5nZSwgbWF0Y2ggfSkgPT4ge1xuICAgICAgY29uc3QgJHN0YXJ0ID0gc3RhdGUuZG9jLnJlc29sdmUocmFuZ2UuZnJvbSlcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBjYWxsT3JSZXR1cm4oY29uZmlnLmdldEF0dHJpYnV0ZXMsIHVuZGVmaW5lZCwgbWF0Y2gpIHx8IHt9XG5cbiAgICAgIGlmICghJHN0YXJ0Lm5vZGUoLTEpLmNhblJlcGxhY2VXaXRoKCRzdGFydC5pbmRleCgtMSksICRzdGFydC5pbmRleEFmdGVyKC0xKSwgY29uZmlnLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG5cbiAgICAgIHN0YXRlLnRyXG4gICAgICAgIC5kZWxldGUocmFuZ2UuZnJvbSwgcmFuZ2UudG8pXG4gICAgICAgIC5zZXRCbG9ja1R5cGUocmFuZ2UuZnJvbSwgcmFuZ2UuZnJvbSwgY29uZmlnLnR5cGUsIGF0dHJpYnV0ZXMpXG4gICAgfSxcbiAgfSlcbn1cbiIsImltcG9ydCB7IE5vZGUgYXMgUHJvc2VNaXJyb3JOb2RlLCBOb2RlVHlwZSB9IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQgeyBjYW5Kb2luLCBmaW5kV3JhcHBpbmcgfSBmcm9tICdAdGlwdGFwL3BtL3RyYW5zZm9ybSdcblxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi4vRWRpdG9yLmpzJ1xuaW1wb3J0IHsgSW5wdXRSdWxlLCBJbnB1dFJ1bGVGaW5kZXIgfSBmcm9tICcuLi9JbnB1dFJ1bGUuanMnXG5pbXBvcnQgeyBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXkgfSBmcm9tICcuLi90eXBlcy5qcydcbmltcG9ydCB7IGNhbGxPclJldHVybiB9IGZyb20gJy4uL3V0aWxpdGllcy9jYWxsT3JSZXR1cm4uanMnXG5cbi8qKlxuICogQnVpbGQgYW4gaW5wdXQgcnVsZSBmb3IgYXV0b21hdGljYWxseSB3cmFwcGluZyBhIHRleHRibG9jayB3aGVuIGFcbiAqIGdpdmVuIHN0cmluZyBpcyB0eXBlZC4gV2hlbiB1c2luZyBhIHJlZ3VsYXIgZXhwcmVzaW9uIHlvdeKAmWxsXG4gKiBwcm9iYWJseSB3YW50IHRoZSByZWdleHAgdG8gc3RhcnQgd2l0aCBgXmAsIHNvIHRoYXQgdGhlIHBhdHRlcm4gY2FuXG4gKiBvbmx5IG9jY3VyIGF0IHRoZSBzdGFydCBvZiBhIHRleHRibG9jay5cbiAqXG4gKiBgdHlwZWAgaXMgdGhlIHR5cGUgb2Ygbm9kZSB0byB3cmFwIGluLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGlmIHRoZXJl4oCZcyBhIG5vZGUgd2l0aCB0aGUgc2FtZSB0eXBlIGFib3ZlIHRoZSBuZXdseVxuICogd3JhcHBlZCBub2RlLCB0aGUgcnVsZSB3aWxsIHRyeSB0byBqb2luIHRob3NlXG4gKiB0d28gbm9kZXMuIFlvdSBjYW4gcGFzcyBhIGpvaW4gcHJlZGljYXRlLCB3aGljaCB0YWtlcyBhIHJlZ3VsYXJcbiAqIGV4cHJlc3Npb24gbWF0Y2ggYW5kIHRoZSBub2RlIGJlZm9yZSB0aGUgd3JhcHBlZCBub2RlLCBhbmQgY2FuXG4gKiByZXR1cm4gYSBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgYSBqb2luIHNob3VsZCBoYXBwZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwcGluZ0lucHV0UnVsZShjb25maWc6IHtcbiAgZmluZDogSW5wdXRSdWxlRmluZGVyLFxuICB0eXBlOiBOb2RlVHlwZSxcbiAga2VlcE1hcmtzPzogYm9vbGVhbixcbiAga2VlcEF0dHJpYnV0ZXM/OiBib29sZWFuLFxuICBlZGl0b3I/OiBFZGl0b3JcbiAgZ2V0QXR0cmlidXRlcz86XG4gIHwgUmVjb3JkPHN0cmluZywgYW55PlxuICB8ICgobWF0Y2g6IEV4dGVuZGVkUmVnRXhwTWF0Y2hBcnJheSkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgfCBmYWxzZVxuICB8IG51bGxcbiAgLFxuICBqb2luUHJlZGljYXRlPzogKG1hdGNoOiBFeHRlbmRlZFJlZ0V4cE1hdGNoQXJyYXksIG5vZGU6IFByb3NlTWlycm9yTm9kZSkgPT4gYm9vbGVhbixcbn0pIHtcbiAgcmV0dXJuIG5ldyBJbnB1dFJ1bGUoe1xuICAgIGZpbmQ6IGNvbmZpZy5maW5kLFxuICAgIGhhbmRsZXI6ICh7XG4gICAgICBzdGF0ZSwgcmFuZ2UsIG1hdGNoLCBjaGFpbixcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBhdHRyaWJ1dGVzID0gY2FsbE9yUmV0dXJuKGNvbmZpZy5nZXRBdHRyaWJ1dGVzLCB1bmRlZmluZWQsIG1hdGNoKSB8fCB7fVxuICAgICAgY29uc3QgdHIgPSBzdGF0ZS50ci5kZWxldGUocmFuZ2UuZnJvbSwgcmFuZ2UudG8pXG4gICAgICBjb25zdCAkc3RhcnQgPSB0ci5kb2MucmVzb2x2ZShyYW5nZS5mcm9tKVxuICAgICAgY29uc3QgYmxvY2tSYW5nZSA9ICRzdGFydC5ibG9ja1JhbmdlKClcbiAgICAgIGNvbnN0IHdyYXBwaW5nID0gYmxvY2tSYW5nZSAmJiBmaW5kV3JhcHBpbmcoYmxvY2tSYW5nZSwgY29uZmlnLnR5cGUsIGF0dHJpYnV0ZXMpXG5cbiAgICAgIGlmICghd3JhcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgdHIud3JhcChibG9ja1JhbmdlLCB3cmFwcGluZylcblxuICAgICAgaWYgKGNvbmZpZy5rZWVwTWFya3MgJiYgY29uZmlnLmVkaXRvcikge1xuICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiwgc3RvcmVkTWFya3MgfSA9IHN0YXRlXG4gICAgICAgIGNvbnN0IHsgc3BsaXR0YWJsZU1hcmtzIH0gPSBjb25maWcuZWRpdG9yLmV4dGVuc2lvbk1hbmFnZXJcbiAgICAgICAgY29uc3QgbWFya3MgPSBzdG9yZWRNYXJrcyB8fCAoc2VsZWN0aW9uLiR0by5wYXJlbnRPZmZzZXQgJiYgc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCkpXG5cbiAgICAgICAgaWYgKG1hcmtzKSB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRNYXJrcyA9IG1hcmtzLmZpbHRlcihtYXJrID0+IHNwbGl0dGFibGVNYXJrcy5pbmNsdWRlcyhtYXJrLnR5cGUubmFtZSkpXG5cbiAgICAgICAgICB0ci5lbnN1cmVNYXJrcyhmaWx0ZXJlZE1hcmtzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY29uZmlnLmtlZXBBdHRyaWJ1dGVzKSB7XG4gICAgICAgIC8qKiBJZiB0aGUgbm9kZVR5cGUgaXMgYGJ1bGxldExpc3RgIG9yIGBvcmRlcmVkTGlzdGAgc2V0IHRoZSBgbm9kZVR5cGVgIGFzIGBsaXN0SXRlbWAgKi9cbiAgICAgICAgY29uc3Qgbm9kZVR5cGUgPSBjb25maWcudHlwZS5uYW1lID09PSAnYnVsbGV0TGlzdCcgfHwgY29uZmlnLnR5cGUubmFtZSA9PT0gJ29yZGVyZWRMaXN0JyA/ICdsaXN0SXRlbScgOiAndGFza0xpc3QnXG5cbiAgICAgICAgY2hhaW4oKS51cGRhdGVBdHRyaWJ1dGVzKG5vZGVUeXBlLCBhdHRyaWJ1dGVzKS5ydW4oKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBiZWZvcmUgPSB0ci5kb2MucmVzb2x2ZShyYW5nZS5mcm9tIC0gMSkubm9kZUJlZm9yZVxuXG4gICAgICBpZiAoXG4gICAgICAgIGJlZm9yZVxuICAgICAgICAmJiBiZWZvcmUudHlwZSA9PT0gY29uZmlnLnR5cGVcbiAgICAgICAgJiYgY2FuSm9pbih0ci5kb2MsIHJhbmdlLmZyb20gLSAxKVxuICAgICAgICAmJiAoIWNvbmZpZy5qb2luUHJlZGljYXRlIHx8IGNvbmZpZy5qb2luUHJlZGljYXRlKG1hdGNoLCBiZWZvcmUpKVxuICAgICAgKSB7XG4gICAgICAgIHRyLmpvaW4ocmFuZ2UuZnJvbSAtIDEpXG4gICAgICB9XG4gICAgfSxcbiAgfSlcbn1cbiIsImltcG9ydCB7XG4gIERPTU91dHB1dFNwZWMsIE1hcmsgYXMgUHJvc2VNaXJyb3JNYXJrLCBNYXJrU3BlYywgTWFya1R5cGUsXG59IGZyb20gJ0B0aXB0YXAvcG0vbW9kZWwnXG5pbXBvcnQgeyBQbHVnaW4sIFRyYW5zYWN0aW9uIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi9FZGl0b3IuanMnXG5pbXBvcnQgeyBnZXRFeHRlbnNpb25GaWVsZCB9IGZyb20gJy4vaGVscGVycy9nZXRFeHRlbnNpb25GaWVsZC5qcydcbmltcG9ydCB7IE1hcmtDb25maWcgfSBmcm9tICcuL2luZGV4LmpzJ1xuaW1wb3J0IHsgSW5wdXRSdWxlIH0gZnJvbSAnLi9JbnB1dFJ1bGUuanMnXG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi9Ob2RlLmpzJ1xuaW1wb3J0IHsgUGFzdGVSdWxlIH0gZnJvbSAnLi9QYXN0ZVJ1bGUuanMnXG5pbXBvcnQge1xuICBBbnlDb25maWcsXG4gIEF0dHJpYnV0ZXMsXG4gIEV4dGVuc2lvbnMsXG4gIEdsb2JhbEF0dHJpYnV0ZXMsXG4gIEtleWJvYXJkU2hvcnRjdXRDb21tYW5kLFxuICBQYXJlbnRDb25maWcsXG4gIFJhd0NvbW1hbmRzLFxufSBmcm9tICcuL3R5cGVzLmpzJ1xuaW1wb3J0IHsgY2FsbE9yUmV0dXJuIH0gZnJvbSAnLi91dGlsaXRpZXMvY2FsbE9yUmV0dXJuLmpzJ1xuaW1wb3J0IHsgbWVyZ2VEZWVwIH0gZnJvbSAnLi91dGlsaXRpZXMvbWVyZ2VEZWVwLmpzJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgTWFya0NvbmZpZzxPcHRpb25zID0gYW55LCBTdG9yYWdlID0gYW55PiB7XG4gICAgW2tleTogc3RyaW5nXTogYW55XG5cbiAgICAvKipcbiAgICAgKiBOYW1lXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBQcmlvcml0eVxuICAgICAqL1xuICAgIHByaW9yaXR5PzogbnVtYmVyXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IG9wdGlvbnNcbiAgICAgKi9cbiAgICBkZWZhdWx0T3B0aW9ucz86IE9wdGlvbnNcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgT3B0aW9uc1xuICAgICAqL1xuICAgIGFkZE9wdGlvbnM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBwYXJlbnQ6IEV4Y2x1ZGU8UGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRPcHRpb25zJ10sIHVuZGVmaW5lZD5cbiAgICB9KSA9PiBPcHRpb25zXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IFN0b3JhZ2VcbiAgICAgKi9cbiAgICBhZGRTdG9yYWdlPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgcGFyZW50OiBFeGNsdWRlPFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkU3RvcmFnZSddLCB1bmRlZmluZWQ+XG4gICAgfSkgPT4gU3RvcmFnZVxuXG4gICAgLyoqXG4gICAgICogR2xvYmFsIGF0dHJpYnV0ZXNcbiAgICAgKi9cbiAgICBhZGRHbG9iYWxBdHRyaWJ1dGVzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZEdsb2JhbEF0dHJpYnV0ZXMnXVxuICAgIH0pID0+IEdsb2JhbEF0dHJpYnV0ZXMgfCB7fVxuXG4gICAgLyoqXG4gICAgICogUmF3XG4gICAgICovXG4gICAgYWRkQ29tbWFuZHM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgdHlwZTogTWFya1R5cGVcbiAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRDb21tYW5kcyddXG4gICAgfSkgPT4gUGFydGlhbDxSYXdDb21tYW5kcz5cblxuICAgIC8qKlxuICAgICAqIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgICAqL1xuICAgIGFkZEtleWJvYXJkU2hvcnRjdXRzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE1hcmtUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkS2V5Ym9hcmRTaG9ydGN1dHMnXVxuICAgIH0pID0+IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IEtleWJvYXJkU2hvcnRjdXRDb21tYW5kXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5wdXQgcnVsZXNcbiAgICAgKi9cbiAgICBhZGRJbnB1dFJ1bGVzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE1hcmtUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkSW5wdXRSdWxlcyddXG4gICAgfSkgPT4gSW5wdXRSdWxlW11cblxuICAgIC8qKlxuICAgICAqIFBhc3RlIHJ1bGVzXG4gICAgICovXG4gICAgYWRkUGFzdGVSdWxlcz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICB0eXBlOiBNYXJrVHlwZVxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZFBhc3RlUnVsZXMnXVxuICAgIH0pID0+IFBhc3RlUnVsZVtdXG5cbiAgICAvKipcbiAgICAgKiBQcm9zZU1pcnJvciBwbHVnaW5zXG4gICAgICovXG4gICAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE1hcmtUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkUHJvc2VNaXJyb3JQbHVnaW5zJ11cbiAgICB9KSA9PiBQbHVnaW5bXVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uc1xuICAgICAqL1xuICAgIGFkZEV4dGVuc2lvbnM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkRXh0ZW5zaW9ucyddXG4gICAgfSkgPT4gRXh0ZW5zaW9uc1xuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIE5vZGUgU2NoZW1hXG4gICAgICovXG4gICAgZXh0ZW5kTm9kZVNjaGVtYT86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXh0ZW5kTm9kZVNjaGVtYSddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHRlbnNpb246IE5vZGUsXG4gICAgICAgICkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIE1hcmsgU2NoZW1hXG4gICAgICovXG4gICAgZXh0ZW5kTWFya1NjaGVtYT86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXh0ZW5kTWFya1NjaGVtYSddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHRlbnNpb246IE1hcmssXG4gICAgICAgICkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBpcyBub3QgcmVhZHkgeWV0LlxuICAgICAqL1xuICAgIG9uQmVmb3JlQ3JlYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHR5cGU6IE1hcmtUeXBlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uQmVmb3JlQ3JlYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBpcyByZWFkeS5cbiAgICAgKi9cbiAgICBvbkNyZWF0ZT86XG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICB0eXBlOiBNYXJrVHlwZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvbkNyZWF0ZSddXG4gICAgICAgIH0pID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IGhhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIG9uVXBkYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHR5cGU6IE1hcmtUeXBlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uVXBkYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIHNlbGVjdGlvbiBoYXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBvblNlbGVjdGlvblVwZGF0ZT86XG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICB0eXBlOiBNYXJrVHlwZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvblNlbGVjdGlvblVwZGF0ZSddXG4gICAgICAgIH0pID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3Igc3RhdGUgaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgb25UcmFuc2FjdGlvbj86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgICAgdHlwZTogTWFya1R5cGVcbiAgICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvblRyYW5zYWN0aW9uJ11cbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb25cbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3IgaXMgZm9jdXNlZC5cbiAgICAgKi9cbiAgICBvbkZvY3VzPzpcbiAgICAgIHwgKChcbiAgICAgICAgICB0aGlzOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgICB0eXBlOiBNYXJrVHlwZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uRm9jdXMnXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBGb2N1c0V2ZW50XG4gICAgICAgICAgfSxcbiAgICAgICAgKSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzbuKAmXQgZm9jdXNlZCBhbnltb3JlLlxuICAgICAqL1xuICAgIG9uQmx1cj86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgICAgdHlwZTogTWFya1R5cGVcbiAgICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvbkJsdXInXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBGb2N1c0V2ZW50XG4gICAgICAgICAgfSxcbiAgICAgICAgKSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzIGRlc3Ryb3llZC5cbiAgICAgKi9cbiAgICBvbkRlc3Ryb3k/OlxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgdHlwZTogTWFya1R5cGVcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25EZXN0cm95J11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogS2VlcCBtYXJrIGFmdGVyIHNwbGl0IG5vZGVcbiAgICAgKi9cbiAgICBrZWVwT25TcGxpdD86IGJvb2xlYW4gfCAoKCkgPT4gYm9vbGVhbilcblxuICAgIC8qKlxuICAgICAqIEluY2x1c2l2ZVxuICAgICAqL1xuICAgIGluY2x1c2l2ZT86XG4gICAgICB8IE1hcmtTcGVjWydpbmNsdXNpdmUnXVxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydpbmNsdXNpdmUnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBNYXJrU3BlY1snaW5jbHVzaXZlJ10pXG5cbiAgICAvKipcbiAgICAgKiBFeGNsdWRlc1xuICAgICAqL1xuICAgIGV4Y2x1ZGVzPzpcbiAgICAgIHwgTWFya1NwZWNbJ2V4Y2x1ZGVzJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXhjbHVkZXMnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBNYXJrU3BlY1snZXhjbHVkZXMnXSlcblxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgTWFyayBhcyBleGl0YWJsZVxuICAgICAqL1xuICAgIGV4aXRhYmxlPzogYm9vbGVhbiB8ICgoKSA9PiBib29sZWFuKVxuXG4gICAgLyoqXG4gICAgICogR3JvdXBcbiAgICAgKi9cbiAgICBncm91cD86XG4gICAgICB8IE1hcmtTcGVjWydncm91cCddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2dyb3VwJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gTWFya1NwZWNbJ2dyb3VwJ10pXG5cbiAgICAvKipcbiAgICAgKiBTcGFubmluZ1xuICAgICAqL1xuICAgIHNwYW5uaW5nPzpcbiAgICAgIHwgTWFya1NwZWNbJ3NwYW5uaW5nJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnc3Bhbm5pbmcnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBNYXJrU3BlY1snc3Bhbm5pbmcnXSlcblxuICAgIC8qKlxuICAgICAqIENvZGVcbiAgICAgKi9cbiAgICBjb2RlPzpcbiAgICAgIHwgYm9vbGVhblxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE1hcmtDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+Wydjb2RlJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gYm9vbGVhbilcblxuICAgIC8qKlxuICAgICAqIFBhcnNlIEhUTUxcbiAgICAgKi9cbiAgICBwYXJzZUhUTUw/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsncGFyc2VIVE1MJ11cbiAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgIH0pID0+IE1hcmtTcGVjWydwYXJzZURPTSddXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgSFRNTFxuICAgICAqL1xuICAgIHJlbmRlckhUTUw/OlxuICAgICAgfCAoKFxuICAgICAgICAgIHRoaXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8TWFya0NvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ3JlbmRlckhUTUwnXVxuICAgICAgICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgbWFyazogUHJvc2VNaXJyb3JNYXJrXG4gICAgICAgICAgICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PlxuICAgICAgICAgIH0sXG4gICAgICAgICkgPT4gRE9NT3V0cHV0U3BlYylcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogQXR0cmlidXRlc1xuICAgICAqL1xuICAgIGFkZEF0dHJpYnV0ZXM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkQXR0cmlidXRlcyddXG4gICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICB9KSA9PiBBdHRyaWJ1dGVzIHwge31cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWFyazxPcHRpb25zID0gYW55LCBTdG9yYWdlID0gYW55PiB7XG4gIHR5cGUgPSAnbWFyaydcblxuICBuYW1lID0gJ21hcmsnXG5cbiAgcGFyZW50OiBNYXJrIHwgbnVsbCA9IG51bGxcblxuICBjaGlsZDogTWFyayB8IG51bGwgPSBudWxsXG5cbiAgb3B0aW9uczogT3B0aW9uc1xuXG4gIHN0b3JhZ2U6IFN0b3JhZ2VcblxuICBjb25maWc6IE1hcmtDb25maWcgPSB7XG4gICAgbmFtZTogdGhpcy5uYW1lLFxuICAgIGRlZmF1bHRPcHRpb25zOiB7fSxcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUGFydGlhbDxNYXJrQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PiA9IHt9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAuLi50aGlzLmNvbmZpZyxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbmZpZy5uYW1lXG5cbiAgICBpZiAoY29uZmlnLmRlZmF1bHRPcHRpb25zKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBbdGlwdGFwIHdhcm5dOiBCUkVBS0lORyBDSEFOR0U6IFwiZGVmYXVsdE9wdGlvbnNcIiBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIFwiYWRkT3B0aW9uc1wiIGluc3RlYWQuIEZvdW5kIGluIGV4dGVuc2lvbjogXCIke3RoaXMubmFtZX1cIi5gLFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSBgYWRkT3B0aW9uc2AgZmFsbGJhY2tcbiAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLmNvbmZpZy5kZWZhdWx0T3B0aW9uc1xuXG4gICAgaWYgKHRoaXMuY29uZmlnLmFkZE9wdGlvbnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IGNhbGxPclJldHVybihcbiAgICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRPcHRpb25zJ10+KHRoaXMsICdhZGRPcHRpb25zJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgfSksXG4gICAgICApXG4gICAgfVxuXG4gICAgdGhpcy5zdG9yYWdlID0gY2FsbE9yUmV0dXJuKFxuICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRTdG9yYWdlJ10+KHRoaXMsICdhZGRTdG9yYWdlJywge1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIH0pLFxuICAgICkgfHwge31cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGU8TyA9IGFueSwgUyA9IGFueT4oY29uZmlnOiBQYXJ0aWFsPE1hcmtDb25maWc8TywgUz4+ID0ge30pIHtcbiAgICByZXR1cm4gbmV3IE1hcms8TywgUz4oY29uZmlnKVxuICB9XG5cbiAgY29uZmlndXJlKG9wdGlvbnM6IFBhcnRpYWw8T3B0aW9ucz4gPSB7fSkge1xuICAgIC8vIHJldHVybiBhIG5ldyBpbnN0YW5jZSBzbyB3ZSBjYW4gdXNlIHRoZSBzYW1lIGV4dGVuc2lvblxuICAgIC8vIHdpdGggZGlmZmVyZW50IGNhbGxzIG9mIGBjb25maWd1cmVgXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gdGhpcy5leHRlbmQoKVxuXG4gICAgZXh0ZW5zaW9uLm9wdGlvbnMgPSBtZXJnZURlZXAodGhpcy5vcHRpb25zIGFzIFJlY29yZDxzdHJpbmcsIGFueT4sIG9wdGlvbnMpIGFzIE9wdGlvbnNcblxuICAgIGV4dGVuc2lvbi5zdG9yYWdlID0gY2FsbE9yUmV0dXJuKFxuICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRTdG9yYWdlJ10+KGV4dGVuc2lvbiwgJ2FkZFN0b3JhZ2UnLCB7XG4gICAgICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgICBvcHRpb25zOiBleHRlbnNpb24ub3B0aW9ucyxcbiAgICAgIH0pLFxuICAgIClcblxuICAgIHJldHVybiBleHRlbnNpb25cbiAgfVxuXG4gIGV4dGVuZDxFeHRlbmRlZE9wdGlvbnMgPSBPcHRpb25zLCBFeHRlbmRlZFN0b3JhZ2UgPSBTdG9yYWdlPihcbiAgICBleHRlbmRlZENvbmZpZzogUGFydGlhbDxNYXJrQ29uZmlnPEV4dGVuZGVkT3B0aW9ucywgRXh0ZW5kZWRTdG9yYWdlPj4gPSB7fSxcbiAgKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gbmV3IE1hcms8RXh0ZW5kZWRPcHRpb25zLCBFeHRlbmRlZFN0b3JhZ2U+KGV4dGVuZGVkQ29uZmlnKVxuXG4gICAgZXh0ZW5zaW9uLnBhcmVudCA9IHRoaXNcblxuICAgIHRoaXMuY2hpbGQgPSBleHRlbnNpb25cblxuICAgIGV4dGVuc2lvbi5uYW1lID0gZXh0ZW5kZWRDb25maWcubmFtZSA/IGV4dGVuZGVkQ29uZmlnLm5hbWUgOiBleHRlbnNpb24ucGFyZW50Lm5hbWVcblxuICAgIGlmIChleHRlbmRlZENvbmZpZy5kZWZhdWx0T3B0aW9ucykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW3RpcHRhcCB3YXJuXTogQlJFQUtJTkcgQ0hBTkdFOiBcImRlZmF1bHRPcHRpb25zXCIgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBcImFkZE9wdGlvbnNcIiBpbnN0ZWFkLiBGb3VuZCBpbiBleHRlbnNpb246IFwiJHtleHRlbnNpb24ubmFtZX1cIi5gLFxuICAgICAgKVxuICAgIH1cblxuICAgIGV4dGVuc2lvbi5vcHRpb25zID0gY2FsbE9yUmV0dXJuKFxuICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRPcHRpb25zJ10+KGV4dGVuc2lvbiwgJ2FkZE9wdGlvbnMnLCB7XG4gICAgICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgfSksXG4gICAgKVxuXG4gICAgZXh0ZW5zaW9uLnN0b3JhZ2UgPSBjYWxsT3JSZXR1cm4oXG4gICAgICBnZXRFeHRlbnNpb25GaWVsZDxBbnlDb25maWdbJ2FkZFN0b3JhZ2UnXT4oZXh0ZW5zaW9uLCAnYWRkU3RvcmFnZScsIHtcbiAgICAgICAgbmFtZTogZXh0ZW5zaW9uLm5hbWUsXG4gICAgICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgICAgfSksXG4gICAgKVxuXG4gICAgcmV0dXJuIGV4dGVuc2lvblxuICB9XG5cbiAgc3RhdGljIGhhbmRsZUV4aXQoeyBlZGl0b3IsIG1hcmsgfTogeyBlZGl0b3I6IEVkaXRvcjsgbWFyazogTWFyayB9KSB7XG4gICAgY29uc3QgeyB0ciB9ID0gZWRpdG9yLnN0YXRlXG4gICAgY29uc3QgY3VycmVudFBvcyA9IGVkaXRvci5zdGF0ZS5zZWxlY3Rpb24uJGZyb21cbiAgICBjb25zdCBpc0F0RW5kID0gY3VycmVudFBvcy5wb3MgPT09IGN1cnJlbnRQb3MuZW5kKClcblxuICAgIGlmIChpc0F0RW5kKSB7XG4gICAgICBjb25zdCBjdXJyZW50TWFya3MgPSBjdXJyZW50UG9zLm1hcmtzKClcbiAgICAgIGNvbnN0IGlzSW5NYXJrID0gISFjdXJyZW50TWFya3MuZmluZChtID0+IG0/LnR5cGUubmFtZSA9PT0gbWFyay5uYW1lKVxuXG4gICAgICBpZiAoIWlzSW5NYXJrKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZW1vdmVNYXJrID0gY3VycmVudE1hcmtzLmZpbmQobSA9PiBtPy50eXBlLm5hbWUgPT09IG1hcmsubmFtZSlcblxuICAgICAgaWYgKHJlbW92ZU1hcmspIHtcbiAgICAgICAgdHIucmVtb3ZlU3RvcmVkTWFyayhyZW1vdmVNYXJrKVxuICAgICAgfVxuICAgICAgdHIuaW5zZXJ0VGV4dCgnICcsIGN1cnJlbnRQb3MucG9zKVxuXG4gICAgICBlZGl0b3Iudmlldy5kaXNwYXRjaCh0cilcblxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgRE9NT3V0cHV0U3BlYywgTm9kZSBhcyBQcm9zZU1pcnJvck5vZGUsIE5vZGVTcGVjLCBOb2RlVHlwZSxcbn0gZnJvbSAnQHRpcHRhcC9wbS9tb2RlbCdcbmltcG9ydCB7IFBsdWdpbiwgVHJhbnNhY3Rpb24gfSBmcm9tICdAdGlwdGFwL3BtL3N0YXRlJ1xuXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL0VkaXRvci5qcydcbmltcG9ydCB7IGdldEV4dGVuc2lvbkZpZWxkIH0gZnJvbSAnLi9oZWxwZXJzL2dldEV4dGVuc2lvbkZpZWxkLmpzJ1xuaW1wb3J0IHsgTm9kZUNvbmZpZyB9IGZyb20gJy4vaW5kZXguanMnXG5pbXBvcnQgeyBJbnB1dFJ1bGUgfSBmcm9tICcuL0lucHV0UnVsZS5qcydcbmltcG9ydCB7IFBhc3RlUnVsZSB9IGZyb20gJy4vUGFzdGVSdWxlLmpzJ1xuaW1wb3J0IHtcbiAgQW55Q29uZmlnLFxuICBBdHRyaWJ1dGVzLFxuICBFeHRlbnNpb25zLFxuICBHbG9iYWxBdHRyaWJ1dGVzLFxuICBLZXlib2FyZFNob3J0Y3V0Q29tbWFuZCxcbiAgTm9kZVZpZXdSZW5kZXJlcixcbiAgUGFyZW50Q29uZmlnLFxuICBSYXdDb21tYW5kcyxcbn0gZnJvbSAnLi90eXBlcy5qcydcbmltcG9ydCB7IGNhbGxPclJldHVybiB9IGZyb20gJy4vdXRpbGl0aWVzL2NhbGxPclJldHVybi5qcydcbmltcG9ydCB7IG1lcmdlRGVlcCB9IGZyb20gJy4vdXRpbGl0aWVzL21lcmdlRGVlcC5qcydcblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgTm9kZUNvbmZpZzxPcHRpb25zID0gYW55LCBTdG9yYWdlID0gYW55PiB7XG4gICAgW2tleTogc3RyaW5nXTogYW55XG5cbiAgICAvKipcbiAgICAgKiBOYW1lXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBQcmlvcml0eVxuICAgICAqL1xuICAgIHByaW9yaXR5PzogbnVtYmVyXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IG9wdGlvbnNcbiAgICAgKi9cbiAgICBkZWZhdWx0T3B0aW9ucz86IE9wdGlvbnNcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgT3B0aW9uc1xuICAgICAqL1xuICAgIGFkZE9wdGlvbnM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBwYXJlbnQ6IEV4Y2x1ZGU8UGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRPcHRpb25zJ10sIHVuZGVmaW5lZD5cbiAgICB9KSA9PiBPcHRpb25zXG5cbiAgICAvKipcbiAgICAgKiBEZWZhdWx0IFN0b3JhZ2VcbiAgICAgKi9cbiAgICBhZGRTdG9yYWdlPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgcGFyZW50OiBFeGNsdWRlPFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkU3RvcmFnZSddLCB1bmRlZmluZWQ+XG4gICAgfSkgPT4gU3RvcmFnZVxuXG4gICAgLyoqXG4gICAgICogR2xvYmFsIGF0dHJpYnV0ZXNcbiAgICAgKi9cbiAgICBhZGRHbG9iYWxBdHRyaWJ1dGVzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZEdsb2JhbEF0dHJpYnV0ZXMnXVxuICAgIH0pID0+IEdsb2JhbEF0dHJpYnV0ZXMgfCB7fVxuXG4gICAgLyoqXG4gICAgICogUmF3XG4gICAgICovXG4gICAgYWRkQ29tbWFuZHM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgdHlwZTogTm9kZVR5cGVcbiAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGRDb21tYW5kcyddXG4gICAgfSkgPT4gUGFydGlhbDxSYXdDb21tYW5kcz5cblxuICAgIC8qKlxuICAgICAqIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgICAqL1xuICAgIGFkZEtleWJvYXJkU2hvcnRjdXRzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkS2V5Ym9hcmRTaG9ydGN1dHMnXVxuICAgIH0pID0+IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IEtleWJvYXJkU2hvcnRjdXRDb21tYW5kXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5wdXQgcnVsZXNcbiAgICAgKi9cbiAgICBhZGRJbnB1dFJ1bGVzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkSW5wdXRSdWxlcyddXG4gICAgfSkgPT4gSW5wdXRSdWxlW11cblxuICAgIC8qKlxuICAgICAqIFBhc3RlIHJ1bGVzXG4gICAgICovXG4gICAgYWRkUGFzdGVSdWxlcz86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICB0eXBlOiBOb2RlVHlwZVxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZFBhc3RlUnVsZXMnXVxuICAgIH0pID0+IFBhc3RlUnVsZVtdXG5cbiAgICAvKipcbiAgICAgKiBQcm9zZU1pcnJvciBwbHVnaW5zXG4gICAgICovXG4gICAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkUHJvc2VNaXJyb3JQbHVnaW5zJ11cbiAgICB9KSA9PiBQbHVnaW5bXVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5zaW9uc1xuICAgICAqL1xuICAgIGFkZEV4dGVuc2lvbnM/OiAodGhpczoge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYWRkRXh0ZW5zaW9ucyddXG4gICAgfSkgPT4gRXh0ZW5zaW9uc1xuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIE5vZGUgU2NoZW1hXG4gICAgICovXG4gICAgZXh0ZW5kTm9kZVNjaGVtYT86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXh0ZW5kTm9kZVNjaGVtYSddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHRlbnNpb246IE5vZGUsXG4gICAgICAgICkgPT4gUmVjb3JkPHN0cmluZywgYW55PilcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIE1hcmsgU2NoZW1hXG4gICAgICovXG4gICAgZXh0ZW5kTWFya1NjaGVtYT86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZXh0ZW5kTWFya1NjaGVtYSddXG4gICAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4dGVuc2lvbjogTm9kZSxcbiAgICAgICAgKSA9PiBSZWNvcmQ8c3RyaW5nLCBhbnk+KVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzIG5vdCByZWFkeSB5ZXQuXG4gICAgICovXG4gICAgb25CZWZvcmVDcmVhdGU/OlxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgdHlwZTogTm9kZVR5cGVcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25CZWZvcmVDcmVhdGUnXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdG9yIGlzIHJlYWR5LlxuICAgICAqL1xuICAgIG9uQ3JlYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uQ3JlYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgaGFzIGNoYW5nZWQuXG4gICAgICovXG4gICAgb25VcGRhdGU/OlxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgdHlwZTogTm9kZVR5cGVcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25VcGRhdGUnXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2VsZWN0aW9uIGhhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIG9uU2VsZWN0aW9uVXBkYXRlPzpcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBlZGl0b3I6IEVkaXRvclxuICAgICAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uU2VsZWN0aW9uVXBkYXRlJ11cbiAgICAgICAgfSkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBzdGF0ZSBoYXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICBvblRyYW5zYWN0aW9uPzpcbiAgICAgIHwgKChcbiAgICAgICAgICB0aGlzOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uVHJhbnNhY3Rpb24nXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvblxuICAgICAgICAgIH0sXG4gICAgICAgICkgPT4gdm9pZClcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVkaXRvciBpcyBmb2N1c2VkLlxuICAgICAqL1xuICAgIG9uRm9jdXM/OlxuICAgICAgfCAoKFxuICAgICAgICAgIHRoaXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICAgIHR5cGU6IE5vZGVUeXBlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnb25Gb2N1cyddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgZXZlbnQ6IEZvY3VzRXZlbnRcbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3IgaXNu4oCZdCBmb2N1c2VkIGFueW1vcmUuXG4gICAgICovXG4gICAgb25CbHVyPzpcbiAgICAgIHwgKChcbiAgICAgICAgICB0aGlzOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICAgIGVkaXRvcjogRWRpdG9yXG4gICAgICAgICAgICB0eXBlOiBOb2RlVHlwZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ29uQmx1ciddXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgZXZlbnQ6IEZvY3VzRXZlbnRcbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHZvaWQpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRoZSBlZGl0b3IgaXMgZGVzdHJveWVkLlxuICAgICAqL1xuICAgIG9uRGVzdHJveT86XG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICB0eXBlOiBOb2RlVHlwZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydvbkRlc3Ryb3knXVxuICAgICAgICB9KSA9PiB2b2lkKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBOb2RlIFZpZXdcbiAgICAgKi9cbiAgICBhZGROb2RlVmlldz86XG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgZWRpdG9yOiBFZGl0b3JcbiAgICAgICAgICB0eXBlOiBOb2RlVHlwZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydhZGROb2RlVmlldyddXG4gICAgICAgIH0pID0+IE5vZGVWaWV3UmVuZGVyZXIpXG4gICAgICB8IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRvcE5vZGVcbiAgICAgKi9cbiAgICB0b3BOb2RlPzogYm9vbGVhblxuXG4gICAgLyoqXG4gICAgICogQ29udGVudFxuICAgICAqL1xuICAgIGNvbnRlbnQ/OlxuICAgICAgfCBOb2RlU3BlY1snY29udGVudCddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2NvbnRlbnQnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBOb2RlU3BlY1snY29udGVudCddKVxuXG4gICAgLyoqXG4gICAgICogTWFya3NcbiAgICAgKi9cbiAgICBtYXJrcz86XG4gICAgICB8IE5vZGVTcGVjWydtYXJrcyddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ21hcmtzJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gTm9kZVNwZWNbJ21hcmtzJ10pXG5cbiAgICAvKipcbiAgICAgKiBHcm91cFxuICAgICAqL1xuICAgIGdyb3VwPzpcbiAgICAgIHwgTm9kZVNwZWNbJ2dyb3VwJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZ3JvdXAnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBOb2RlU3BlY1snZ3JvdXAnXSlcblxuICAgIC8qKlxuICAgICAqIElubGluZVxuICAgICAqL1xuICAgIGlubGluZT86XG4gICAgICB8IE5vZGVTcGVjWydpbmxpbmUnXVxuICAgICAgfCAoKHRoaXM6IHtcbiAgICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydpbmxpbmUnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBOb2RlU3BlY1snaW5saW5lJ10pXG5cbiAgICAvKipcbiAgICAgKiBBdG9tXG4gICAgICovXG4gICAgYXRvbT86XG4gICAgICB8IE5vZGVTcGVjWydhdG9tJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnYXRvbSddXG4gICAgICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgICAgIH0pID0+IE5vZGVTcGVjWydhdG9tJ10pXG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RhYmxlXG4gICAgICovXG4gICAgc2VsZWN0YWJsZT86XG4gICAgICB8IE5vZGVTcGVjWydzZWxlY3RhYmxlJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+Plsnc2VsZWN0YWJsZSddXG4gICAgICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgICAgIH0pID0+IE5vZGVTcGVjWydzZWxlY3RhYmxlJ10pXG5cbiAgICAvKipcbiAgICAgKiBEcmFnZ2FibGVcbiAgICAgKi9cbiAgICBkcmFnZ2FibGU/OlxuICAgICAgfCBOb2RlU3BlY1snZHJhZ2dhYmxlJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnZHJhZ2dhYmxlJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gTm9kZVNwZWNbJ2RyYWdnYWJsZSddKVxuXG4gICAgLyoqXG4gICAgICogQ29kZVxuICAgICAqL1xuICAgIGNvZGU/OlxuICAgICAgfCBOb2RlU3BlY1snY29kZSddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2NvZGUnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBOb2RlU3BlY1snY29kZSddKVxuXG4gICAgLyoqXG4gICAgICogV2hpdGVzcGFjZVxuICAgICAqL1xuICAgIHdoaXRlc3BhY2U/OlxuICAgICAgfCBOb2RlU3BlY1snd2hpdGVzcGFjZSddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ3doaXRlc3BhY2UnXVxuICAgICAgICAgIGVkaXRvcj86IEVkaXRvclxuICAgICAgICB9KSA9PiBOb2RlU3BlY1snd2hpdGVzcGFjZSddKVxuXG4gICAgLyoqXG4gICAgICogRGVmaW5pbmdcbiAgICAgKi9cbiAgICBkZWZpbmluZz86XG4gICAgICB8IE5vZGVTcGVjWydkZWZpbmluZyddXG4gICAgICB8ICgodGhpczoge1xuICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2RlZmluaW5nJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gTm9kZVNwZWNbJ2RlZmluaW5nJ10pXG5cbiAgICAvKipcbiAgICAgKiBJc29sYXRpbmdcbiAgICAgKi9cbiAgICBpc29sYXRpbmc/OlxuICAgICAgfCBOb2RlU3BlY1snaXNvbGF0aW5nJ11cbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsnaXNvbGF0aW5nJ11cbiAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgfSkgPT4gTm9kZVNwZWNbJ2lzb2xhdGluZyddKVxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgSFRNTFxuICAgICAqL1xuICAgIHBhcnNlSFRNTD86ICh0aGlzOiB7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIG9wdGlvbnM6IE9wdGlvbnNcbiAgICAgIHN0b3JhZ2U6IFN0b3JhZ2VcbiAgICAgIHBhcmVudDogUGFyZW50Q29uZmlnPE5vZGVDb25maWc8T3B0aW9ucywgU3RvcmFnZT4+WydwYXJzZUhUTUwnXVxuICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgfSkgPT4gTm9kZVNwZWNbJ3BhcnNlRE9NJ11cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBIVE1MXG4gICAgICovXG4gICAgcmVuZGVySFRNTD86XG4gICAgICB8ICgoXG4gICAgICAgICAgdGhpczoge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nXG4gICAgICAgICAgICBvcHRpb25zOiBPcHRpb25zXG4gICAgICAgICAgICBzdG9yYWdlOiBTdG9yYWdlXG4gICAgICAgICAgICBwYXJlbnQ6IFBhcmVudENvbmZpZzxOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+PlsncmVuZGVySFRNTCddXG4gICAgICAgICAgICBlZGl0b3I/OiBFZGl0b3JcbiAgICAgICAgICB9LFxuICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBub2RlOiBQcm9zZU1pcnJvck5vZGVcbiAgICAgICAgICAgIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgICAgICAgfSxcbiAgICAgICAgKSA9PiBET01PdXRwdXRTcGVjKVxuICAgICAgfCBudWxsXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgVGV4dFxuICAgICAqL1xuICAgIHJlbmRlclRleHQ/OlxuICAgICAgfCAoKFxuICAgICAgICAgIHRoaXM6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ3JlbmRlclRleHQnXVxuICAgICAgICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgbm9kZTogUHJvc2VNaXJyb3JOb2RlXG4gICAgICAgICAgICBwb3M6IG51bWJlclxuICAgICAgICAgICAgcGFyZW50OiBQcm9zZU1pcnJvck5vZGVcbiAgICAgICAgICAgIGluZGV4OiBudW1iZXJcbiAgICAgICAgICB9LFxuICAgICAgICApID0+IHN0cmluZylcbiAgICAgIHwgbnVsbFxuXG4gICAgLyoqXG4gICAgICogQWRkIEF0dHJpYnV0ZXNcbiAgICAgKi9cbiAgICBhZGRBdHRyaWJ1dGVzPzogKHRoaXM6IHtcbiAgICAgIG5hbWU6IHN0cmluZ1xuICAgICAgb3B0aW9uczogT3B0aW9uc1xuICAgICAgc3RvcmFnZTogU3RvcmFnZVxuICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj5bJ2FkZEF0dHJpYnV0ZXMnXVxuICAgICAgZWRpdG9yPzogRWRpdG9yXG4gICAgfSkgPT4gQXR0cmlidXRlcyB8IHt9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vZGU8T3B0aW9ucyA9IGFueSwgU3RvcmFnZSA9IGFueT4ge1xuICB0eXBlID0gJ25vZGUnXG5cbiAgbmFtZSA9ICdub2RlJ1xuXG4gIHBhcmVudDogTm9kZSB8IG51bGwgPSBudWxsXG5cbiAgY2hpbGQ6IE5vZGUgfCBudWxsID0gbnVsbFxuXG4gIG9wdGlvbnM6IE9wdGlvbnNcblxuICBzdG9yYWdlOiBTdG9yYWdlXG5cbiAgY29uZmlnOiBOb2RlQ29uZmlnID0ge1xuICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICBkZWZhdWx0T3B0aW9uczoge30sXG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFBhcnRpYWw8Tm9kZUNvbmZpZzxPcHRpb25zLCBTdG9yYWdlPj4gPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgLi4udGhpcy5jb25maWcsXG4gICAgICAuLi5jb25maWcsXG4gICAgfVxuXG4gICAgdGhpcy5uYW1lID0gdGhpcy5jb25maWcubmFtZVxuXG4gICAgaWYgKGNvbmZpZy5kZWZhdWx0T3B0aW9ucykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW3RpcHRhcCB3YXJuXTogQlJFQUtJTkcgQ0hBTkdFOiBcImRlZmF1bHRPcHRpb25zXCIgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBcImFkZE9wdGlvbnNcIiBpbnN0ZWFkLiBGb3VuZCBpbiBleHRlbnNpb246IFwiJHt0aGlzLm5hbWV9XCIuYCxcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgYGFkZE9wdGlvbnNgIGZhbGxiYWNrXG4gICAgdGhpcy5vcHRpb25zID0gdGhpcy5jb25maWcuZGVmYXVsdE9wdGlvbnNcblxuICAgIGlmICh0aGlzLmNvbmZpZy5hZGRPcHRpb25zKSB7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBjYWxsT3JSZXR1cm4oXG4gICAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkT3B0aW9ucyddPih0aGlzLCAnYWRkT3B0aW9ucycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIH0pLFxuICAgICAgKVxuICAgIH1cblxuICAgIHRoaXMuc3RvcmFnZSA9IGNhbGxPclJldHVybihcbiAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkU3RvcmFnZSddPih0aGlzLCAnYWRkU3RvcmFnZScsIHtcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KSxcbiAgICApIHx8IHt9XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlPE8gPSBhbnksIFMgPSBhbnk+KGNvbmZpZzogUGFydGlhbDxOb2RlQ29uZmlnPE8sIFM+PiA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBOb2RlPE8sIFM+KGNvbmZpZylcbiAgfVxuXG4gIGNvbmZpZ3VyZShvcHRpb25zOiBQYXJ0aWFsPE9wdGlvbnM+ID0ge30pIHtcbiAgICAvLyByZXR1cm4gYSBuZXcgaW5zdGFuY2Ugc28gd2UgY2FuIHVzZSB0aGUgc2FtZSBleHRlbnNpb25cbiAgICAvLyB3aXRoIGRpZmZlcmVudCBjYWxscyBvZiBgY29uZmlndXJlYFxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuZXh0ZW5kKClcblxuICAgIGV4dGVuc2lvbi5vcHRpb25zID0gbWVyZ2VEZWVwKHRoaXMub3B0aW9ucyBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBvcHRpb25zKSBhcyBPcHRpb25zXG5cbiAgICBleHRlbnNpb24uc3RvcmFnZSA9IGNhbGxPclJldHVybihcbiAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkU3RvcmFnZSddPihleHRlbnNpb24sICdhZGRTdG9yYWdlJywge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgICAgb3B0aW9uczogZXh0ZW5zaW9uLm9wdGlvbnMsXG4gICAgICB9KSxcbiAgICApXG5cbiAgICByZXR1cm4gZXh0ZW5zaW9uXG4gIH1cblxuICBleHRlbmQ8RXh0ZW5kZWRPcHRpb25zID0gT3B0aW9ucywgRXh0ZW5kZWRTdG9yYWdlID0gU3RvcmFnZT4oXG4gICAgZXh0ZW5kZWRDb25maWc6IFBhcnRpYWw8Tm9kZUNvbmZpZzxFeHRlbmRlZE9wdGlvbnMsIEV4dGVuZGVkU3RvcmFnZT4+ID0ge30sXG4gICkge1xuICAgIGNvbnN0IGV4dGVuc2lvbiA9IG5ldyBOb2RlPEV4dGVuZGVkT3B0aW9ucywgRXh0ZW5kZWRTdG9yYWdlPihleHRlbmRlZENvbmZpZylcblxuICAgIGV4dGVuc2lvbi5wYXJlbnQgPSB0aGlzXG5cbiAgICB0aGlzLmNoaWxkID0gZXh0ZW5zaW9uXG5cbiAgICBleHRlbnNpb24ubmFtZSA9IGV4dGVuZGVkQ29uZmlnLm5hbWUgPyBleHRlbmRlZENvbmZpZy5uYW1lIDogZXh0ZW5zaW9uLnBhcmVudC5uYW1lXG5cbiAgICBpZiAoZXh0ZW5kZWRDb25maWcuZGVmYXVsdE9wdGlvbnMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFt0aXB0YXAgd2Fybl06IEJSRUFLSU5HIENIQU5HRTogXCJkZWZhdWx0T3B0aW9uc1wiIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgXCJhZGRPcHRpb25zXCIgaW5zdGVhZC4gRm91bmQgaW4gZXh0ZW5zaW9uOiBcIiR7ZXh0ZW5zaW9uLm5hbWV9XCIuYCxcbiAgICAgIClcbiAgICB9XG5cbiAgICBleHRlbnNpb24ub3B0aW9ucyA9IGNhbGxPclJldHVybihcbiAgICAgIGdldEV4dGVuc2lvbkZpZWxkPEFueUNvbmZpZ1snYWRkT3B0aW9ucyddPihleHRlbnNpb24sICdhZGRPcHRpb25zJywge1xuICAgICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgIH0pLFxuICAgIClcblxuICAgIGV4dGVuc2lvbi5zdG9yYWdlID0gY2FsbE9yUmV0dXJuKFxuICAgICAgZ2V0RXh0ZW5zaW9uRmllbGQ8QW55Q29uZmlnWydhZGRTdG9yYWdlJ10+KGV4dGVuc2lvbiwgJ2FkZFN0b3JhZ2UnLCB7XG4gICAgICAgIG5hbWU6IGV4dGVuc2lvbi5uYW1lLFxuICAgICAgICBvcHRpb25zOiBleHRlbnNpb24ub3B0aW9ucyxcbiAgICAgIH0pLFxuICAgIClcblxuICAgIHJldHVybiBleHRlbnNpb25cbiAgfVxufVxuIiwiaW1wb3J0IHsgTWFya1R5cGUgfSBmcm9tICdAdGlwdGFwL3BtL21vZGVsJ1xuXG5pbXBvcnQgeyBnZXRNYXJrc0JldHdlZW4gfSBmcm9tICcuLi9oZWxwZXJzL2dldE1hcmtzQmV0d2Vlbi5qcydcbmltcG9ydCB7IFBhc3RlUnVsZSwgUGFzdGVSdWxlRmluZGVyIH0gZnJvbSAnLi4vUGFzdGVSdWxlLmpzJ1xuaW1wb3J0IHsgRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5IH0gZnJvbSAnLi4vdHlwZXMuanMnXG5pbXBvcnQgeyBjYWxsT3JSZXR1cm4gfSBmcm9tICcuLi91dGlsaXRpZXMvY2FsbE9yUmV0dXJuLmpzJ1xuXG4vKipcbiAqIEJ1aWxkIGFuIHBhc3RlIHJ1bGUgdGhhdCBhZGRzIGEgbWFyayB3aGVuIHRoZVxuICogbWF0Y2hlZCB0ZXh0IGlzIHBhc3RlZCBpbnRvIGl0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFya1Bhc3RlUnVsZShjb25maWc6IHtcbiAgZmluZDogUGFzdGVSdWxlRmluZGVyXG4gIHR5cGU6IE1hcmtUeXBlXG4gIGdldEF0dHJpYnV0ZXM/OlxuICAgIHwgUmVjb3JkPHN0cmluZywgYW55PlxuICAgIHwgKChtYXRjaDogRXh0ZW5kZWRSZWdFeHBNYXRjaEFycmF5LCBldmVudDogQ2xpcGJvYXJkRXZlbnQpID0+IFJlY29yZDxzdHJpbmcsIGFueT4pXG4gICAgfCBmYWxzZVxuICAgIHwgbnVsbFxufSkge1xuICByZXR1cm4gbmV3IFBhc3RlUnVsZSh7XG4gICAgZmluZDogY29uZmlnLmZpbmQsXG4gICAgaGFuZGxlcjogKHtcbiAgICAgIHN0YXRlLCByYW5nZSwgbWF0Y2gsIHBhc3RlRXZlbnQsXG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgYXR0cmlidXRlcyA9IGNhbGxPclJldHVybihjb25maWcuZ2V0QXR0cmlidXRlcywgdW5kZWZpbmVkLCBtYXRjaCwgcGFzdGVFdmVudClcblxuICAgICAgaWYgKGF0dHJpYnV0ZXMgPT09IGZhbHNlIHx8IGF0dHJpYnV0ZXMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyB0ciB9ID0gc3RhdGVcbiAgICAgIGNvbnN0IGNhcHR1cmVHcm91cCA9IG1hdGNoW21hdGNoLmxlbmd0aCAtIDFdXG4gICAgICBjb25zdCBmdWxsTWF0Y2ggPSBtYXRjaFswXVxuICAgICAgbGV0IG1hcmtFbmQgPSByYW5nZS50b1xuXG4gICAgICBpZiAoY2FwdHVyZUdyb3VwKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0U3BhY2VzID0gZnVsbE1hdGNoLnNlYXJjaCgvXFxTLylcbiAgICAgICAgY29uc3QgdGV4dFN0YXJ0ID0gcmFuZ2UuZnJvbSArIGZ1bGxNYXRjaC5pbmRleE9mKGNhcHR1cmVHcm91cClcbiAgICAgICAgY29uc3QgdGV4dEVuZCA9IHRleHRTdGFydCArIGNhcHR1cmVHcm91cC5sZW5ndGhcblxuICAgICAgICBjb25zdCBleGNsdWRlZE1hcmtzID0gZ2V0TWFya3NCZXR3ZWVuKHJhbmdlLmZyb20sIHJhbmdlLnRvLCBzdGF0ZS5kb2MpXG4gICAgICAgICAgLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkID0gaXRlbS5tYXJrLnR5cGUuZXhjbHVkZWQgYXMgTWFya1R5cGVbXVxuXG4gICAgICAgICAgICByZXR1cm4gZXhjbHVkZWQuZmluZCh0eXBlID0+IHR5cGUgPT09IGNvbmZpZy50eXBlICYmIHR5cGUgIT09IGl0ZW0ubWFyay50eXBlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udG8gPiB0ZXh0U3RhcnQpXG5cbiAgICAgICAgaWYgKGV4Y2x1ZGVkTWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXh0RW5kIDwgcmFuZ2UudG8pIHtcbiAgICAgICAgICB0ci5kZWxldGUodGV4dEVuZCwgcmFuZ2UudG8pXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dFN0YXJ0ID4gcmFuZ2UuZnJvbSkge1xuICAgICAgICAgIHRyLmRlbGV0ZShyYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMsIHRleHRTdGFydClcbiAgICAgICAgfVxuXG4gICAgICAgIG1hcmtFbmQgPSByYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMgKyBjYXB0dXJlR3JvdXAubGVuZ3RoXG5cbiAgICAgICAgdHIuYWRkTWFyayhyYW5nZS5mcm9tICsgc3RhcnRTcGFjZXMsIG1hcmtFbmQsIGNvbmZpZy50eXBlLmNyZWF0ZShhdHRyaWJ1dGVzIHx8IHt9KSlcblxuICAgICAgICB0ci5yZW1vdmVTdG9yZWRNYXJrKGNvbmZpZy50eXBlKVxuICAgICAgfVxuICAgIH0sXG4gIH0pXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgSFRNTFByb3BzIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUmVhY3RET00sIHsgZmx1c2hTeW5jIH0gZnJvbSAncmVhY3QtZG9tJ1xuXG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICcuL0VkaXRvci5qcydcbmltcG9ydCB7IFJlYWN0UmVuZGVyZXIgfSBmcm9tICcuL1JlYWN0UmVuZGVyZXIuanMnXG5cbmNvbnN0IFBvcnRhbHM6IFJlYWN0LkZDPHsgcmVuZGVyZXJzOiBSZWNvcmQ8c3RyaW5nLCBSZWFjdFJlbmRlcmVyPiB9PiA9ICh7IHJlbmRlcmVycyB9KSA9PiB7XG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtPYmplY3QuZW50cmllcyhyZW5kZXJlcnMpLm1hcCgoW2tleSwgcmVuZGVyZXJdKSA9PiB7XG4gICAgICAgIHJldHVybiBSZWFjdERPTS5jcmVhdGVQb3J0YWwocmVuZGVyZXIucmVhY3RFbGVtZW50LCByZW5kZXJlci5lbGVtZW50LCBrZXkpXG4gICAgICB9KX1cbiAgICA8Lz5cbiAgKVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRvckNvbnRlbnRQcm9wcyBleHRlbmRzIEhUTUxQcm9wczxIVE1MRGl2RWxlbWVudD4ge1xuICBlZGl0b3I6IEVkaXRvciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yQ29udGVudFN0YXRlIHtcbiAgcmVuZGVyZXJzOiBSZWNvcmQ8c3RyaW5nLCBSZWFjdFJlbmRlcmVyPjtcbn1cblxuZXhwb3J0IGNsYXNzIFB1cmVFZGl0b3JDb250ZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEVkaXRvckNvbnRlbnRQcm9wcywgRWRpdG9yQ29udGVudFN0YXRlPiB7XG4gIGVkaXRvckNvbnRlbnRSZWY6IFJlYWN0LlJlZk9iamVjdDxhbnk+XG5cbiAgaW5pdGlhbGl6ZWQ6IGJvb2xlYW5cblxuICBjb25zdHJ1Y3Rvcihwcm9wczogRWRpdG9yQ29udGVudFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5lZGl0b3JDb250ZW50UmVmID0gUmVhY3QuY3JlYXRlUmVmKClcbiAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2VcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICByZW5kZXJlcnM6IHt9LFxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuaW5pdCgpXG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgdGhpcy5pbml0KClcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IgfSA9IHRoaXMucHJvcHNcblxuICAgIGlmIChlZGl0b3IgJiYgZWRpdG9yLm9wdGlvbnMuZWxlbWVudCkge1xuICAgICAgaWYgKGVkaXRvci5jb250ZW50Q29tcG9uZW50KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lZGl0b3JDb250ZW50UmVmLmN1cnJlbnRcblxuICAgICAgZWxlbWVudC5hcHBlbmQoLi4uZWRpdG9yLm9wdGlvbnMuZWxlbWVudC5jaGlsZE5vZGVzKVxuXG4gICAgICBlZGl0b3Iuc2V0T3B0aW9ucyh7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICB9KVxuXG4gICAgICBlZGl0b3IuY29udGVudENvbXBvbmVudCA9IHRoaXNcblxuICAgICAgZWRpdG9yLmNyZWF0ZU5vZGVWaWV3cygpXG5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgbWF5YmVGbHVzaFN5bmMoZm46ICgpID0+IHZvaWQpIHtcbiAgICAvLyBBdm9pZCBjYWxsaW5nIGZsdXNoU3luYyB1bnRpbCB0aGUgZWRpdG9yIGlzIGluaXRpYWxpemVkLlxuICAgIC8vIEluaXRpYWxpemF0aW9uIGhhcHBlbnMgZHVyaW5nIHRoZSBjb21wb25lbnREaWRNb3VudCBvciBjb21wb25lbnREaWRVcGRhdGVcbiAgICAvLyBsaWZlY3ljbGUgbWV0aG9kcywgYW5kIFJlYWN0IGRvZXNuJ3QgYWxsb3cgY2FsbGluZyBmbHVzaFN5bmMgZnJvbSBpbnNpZGVcbiAgICAvLyBhIGxpZmVjeWNsZSBtZXRob2QuXG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIGZsdXNoU3luYyhmbilcbiAgICB9IGVsc2Uge1xuICAgICAgZm4oKVxuICAgIH1cbiAgfVxuXG4gIHNldFJlbmRlcmVyKGlkOiBzdHJpbmcsIHJlbmRlcmVyOiBSZWFjdFJlbmRlcmVyKSB7XG4gICAgdGhpcy5tYXliZUZsdXNoU3luYygoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKCh7IHJlbmRlcmVycyB9KSA9PiAoe1xuICAgICAgICByZW5kZXJlcnM6IHtcbiAgICAgICAgICAuLi5yZW5kZXJlcnMsXG4gICAgICAgICAgW2lkXTogcmVuZGVyZXIsXG4gICAgICAgIH0sXG4gICAgICB9KSlcbiAgICB9KVxuICB9XG5cbiAgcmVtb3ZlUmVuZGVyZXIoaWQ6IHN0cmluZykge1xuICAgIHRoaXMubWF5YmVGbHVzaFN5bmMoKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSgoeyByZW5kZXJlcnMgfSkgPT4ge1xuICAgICAgICBjb25zdCBuZXh0UmVuZGVyZXJzID0geyAuLi5yZW5kZXJlcnMgfVxuXG4gICAgICAgIGRlbGV0ZSBuZXh0UmVuZGVyZXJzW2lkXVxuXG4gICAgICAgIHJldHVybiB7IHJlbmRlcmVyczogbmV4dFJlbmRlcmVycyB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBjb25zdCB7IGVkaXRvciB9ID0gdGhpcy5wcm9wc1xuXG4gICAgaWYgKCFlZGl0b3IpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZVxuXG4gICAgaWYgKCFlZGl0b3IuaXNEZXN0cm95ZWQpIHtcbiAgICAgIGVkaXRvci52aWV3LnNldFByb3BzKHtcbiAgICAgICAgbm9kZVZpZXdzOiB7fSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgZWRpdG9yLmNvbnRlbnRDb21wb25lbnQgPSBudWxsXG5cbiAgICBpZiAoIWVkaXRvci5vcHRpb25zLmVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBuZXdFbGVtZW50LmFwcGVuZCguLi5lZGl0b3Iub3B0aW9ucy5lbGVtZW50LmNoaWxkTm9kZXMpXG5cbiAgICBlZGl0b3Iuc2V0T3B0aW9ucyh7XG4gICAgICBlbGVtZW50OiBuZXdFbGVtZW50LFxuICAgIH0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBlZGl0b3IsIC4uLnJlc3QgfSA9IHRoaXMucHJvcHNcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8ZGl2IHJlZj17dGhpcy5lZGl0b3JDb250ZW50UmVmfSB7Li4ucmVzdH0gLz5cbiAgICAgICAgey8qIEB0cy1pZ25vcmUgKi99XG4gICAgICAgIDxQb3J0YWxzIHJlbmRlcmVycz17dGhpcy5zdGF0ZS5yZW5kZXJlcnN9IC8+XG4gICAgICA8Lz5cbiAgICApXG4gIH1cbn1cblxuLy8gRWRpdG9yQ29udGVudCBzaG91bGQgYmUgcmUtY3JlYXRlZCB3aGVuZXZlciB0aGUgRWRpdG9yIGluc3RhbmNlIGNoYW5nZXNcbmNvbnN0IEVkaXRvckNvbnRlbnRXaXRoS2V5ID0gKHByb3BzOiBFZGl0b3JDb250ZW50UHJvcHMpID0+IHtcbiAgY29uc3Qga2V5ID0gUmVhY3QudXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDB4RkZGRkZGRkYpLnRvU3RyaW5nKClcbiAgfSwgW3Byb3BzLmVkaXRvcl0pXG5cbiAgLy8gQ2FuJ3QgdXNlIEpTWCBoZXJlIGJlY2F1c2UgaXQgY29uZmxpY3RzIHdpdGggdGhlIHR5cGUgZGVmaW5pdGlvbiBvZiBWdWUncyBKU1gsIHNvIHVzZSBjcmVhdGVFbGVtZW50XG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFB1cmVFZGl0b3JDb250ZW50LCB7IGtleSwgLi4ucHJvcHMgfSlcbn1cblxuZXhwb3J0IGNvbnN0IEVkaXRvckNvbnRlbnQgPSBSZWFjdC5tZW1vKEVkaXRvckNvbnRlbnRXaXRoS2V5KVxuIiwiaW1wb3J0IHsgRWRpdG9yIGFzIENvcmVFZGl0b3IgfSBmcm9tICdAdGlwdGFwL2NvcmUnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IEVkaXRvckNvbnRlbnRQcm9wcywgRWRpdG9yQ29udGVudFN0YXRlIH0gZnJvbSAnLi9FZGl0b3JDb250ZW50LmpzJ1xuaW1wb3J0IHsgUmVhY3RSZW5kZXJlciB9IGZyb20gJy4vUmVhY3RSZW5kZXJlci5qcydcblxudHlwZSBDb250ZW50Q29tcG9uZW50ID0gUmVhY3QuQ29tcG9uZW50PEVkaXRvckNvbnRlbnRQcm9wcywgRWRpdG9yQ29udGVudFN0YXRlPiAmIHtcbiAgc2V0UmVuZGVyZXIoaWQ6IHN0cmluZywgcmVuZGVyZXI6IFJlYWN0UmVuZGVyZXIpOiB2b2lkO1xuICByZW1vdmVSZW5kZXJlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRvciBleHRlbmRzIENvcmVFZGl0b3Ige1xuICBwdWJsaWMgY29udGVudENvbXBvbmVudDogQ29udGVudENvbXBvbmVudCB8IG51bGwgPSBudWxsXG59XG4iLCJpbXBvcnQgeyBFZGl0b3JPcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuaW1wb3J0IHtcbiAgRGVwZW5kZW5jeUxpc3QsXG4gIHVzZUVmZmVjdCxcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZSxcbn0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IEVkaXRvciB9IGZyb20gJy4vRWRpdG9yLmpzJ1xuXG5mdW5jdGlvbiB1c2VGb3JjZVVwZGF0ZSgpIHtcbiAgY29uc3QgWywgc2V0VmFsdWVdID0gdXNlU3RhdGUoMClcblxuICByZXR1cm4gKCkgPT4gc2V0VmFsdWUodmFsdWUgPT4gdmFsdWUgKyAxKVxufVxuXG5leHBvcnQgY29uc3QgdXNlRWRpdG9yID0gKG9wdGlvbnM6IFBhcnRpYWw8RWRpdG9yT3B0aW9ucz4gPSB7fSwgZGVwczogRGVwZW5kZW5jeUxpc3QgPSBbXSkgPT4ge1xuICBjb25zdCBbZWRpdG9yLCBzZXRFZGl0b3JdID0gdXNlU3RhdGU8RWRpdG9yIHwgbnVsbD4obnVsbClcblxuICBjb25zdCBmb3JjZVVwZGF0ZSA9IHVzZUZvcmNlVXBkYXRlKClcblxuICBjb25zdCB7XG4gICAgb25CZWZvcmVDcmVhdGUsXG4gICAgb25CbHVyLFxuICAgIG9uQ3JlYXRlLFxuICAgIG9uRGVzdHJveSxcbiAgICBvbkZvY3VzLFxuICAgIG9uU2VsZWN0aW9uVXBkYXRlLFxuICAgIG9uVHJhbnNhY3Rpb24sXG4gICAgb25VcGRhdGUsXG4gIH0gPSBvcHRpb25zXG5cbiAgY29uc3Qgb25CZWZvcmVDcmVhdGVSZWYgPSB1c2VSZWYob25CZWZvcmVDcmVhdGUpXG4gIGNvbnN0IG9uQmx1clJlZiA9IHVzZVJlZihvbkJsdXIpXG4gIGNvbnN0IG9uQ3JlYXRlUmVmID0gdXNlUmVmKG9uQ3JlYXRlKVxuICBjb25zdCBvbkRlc3Ryb3lSZWYgPSB1c2VSZWYob25EZXN0cm95KVxuICBjb25zdCBvbkZvY3VzUmVmID0gdXNlUmVmKG9uRm9jdXMpXG4gIGNvbnN0IG9uU2VsZWN0aW9uVXBkYXRlUmVmID0gdXNlUmVmKG9uU2VsZWN0aW9uVXBkYXRlKVxuICBjb25zdCBvblRyYW5zYWN0aW9uUmVmID0gdXNlUmVmKG9uVHJhbnNhY3Rpb24pXG4gIGNvbnN0IG9uVXBkYXRlUmVmID0gdXNlUmVmKG9uVXBkYXRlKVxuXG4gIC8vIFRoaXMgZWZmZWN0IHdpbGwgaGFuZGxlIHVwZGF0aW5nIHRoZSBlZGl0b3IgaW5zdGFuY2VcbiAgLy8gd2hlbiB0aGUgZXZlbnQgaGFuZGxlcnMgY2hhbmdlLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZWRpdG9yKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAob25CZWZvcmVDcmVhdGUpIHtcbiAgICAgIGVkaXRvci5vZmYoJ2JlZm9yZUNyZWF0ZScsIG9uQmVmb3JlQ3JlYXRlUmVmLmN1cnJlbnQpXG4gICAgICBlZGl0b3Iub24oJ2JlZm9yZUNyZWF0ZScsIG9uQmVmb3JlQ3JlYXRlKVxuICAgICAgb25CZWZvcmVDcmVhdGVSZWYuY3VycmVudCA9IG9uQmVmb3JlQ3JlYXRlXG4gICAgfVxuXG4gICAgaWYgKG9uQmx1cikge1xuICAgICAgZWRpdG9yLm9mZignYmx1cicsIG9uQmx1clJlZi5jdXJyZW50KVxuICAgICAgZWRpdG9yLm9uKCdibHVyJywgb25CbHVyKVxuICAgICAgb25CbHVyUmVmLmN1cnJlbnQgPSBvbkJsdXJcbiAgICB9XG5cbiAgICBpZiAob25DcmVhdGUpIHtcbiAgICAgIGVkaXRvci5vZmYoJ2NyZWF0ZScsIG9uQ3JlYXRlUmVmLmN1cnJlbnQpXG4gICAgICBlZGl0b3Iub24oJ2NyZWF0ZScsIG9uQ3JlYXRlKVxuICAgICAgb25DcmVhdGVSZWYuY3VycmVudCA9IG9uQ3JlYXRlXG4gICAgfVxuXG4gICAgaWYgKG9uRGVzdHJveSkge1xuICAgICAgZWRpdG9yLm9mZignZGVzdHJveScsIG9uRGVzdHJveVJlZi5jdXJyZW50KVxuICAgICAgZWRpdG9yLm9uKCdkZXN0cm95Jywgb25EZXN0cm95KVxuICAgICAgb25EZXN0cm95UmVmLmN1cnJlbnQgPSBvbkRlc3Ryb3lcbiAgICB9XG5cbiAgICBpZiAob25Gb2N1cykge1xuICAgICAgZWRpdG9yLm9mZignZm9jdXMnLCBvbkZvY3VzUmVmLmN1cnJlbnQpXG4gICAgICBlZGl0b3Iub24oJ2ZvY3VzJywgb25Gb2N1cylcbiAgICAgIG9uRm9jdXNSZWYuY3VycmVudCA9IG9uRm9jdXNcbiAgICB9XG5cbiAgICBpZiAob25TZWxlY3Rpb25VcGRhdGUpIHtcbiAgICAgIGVkaXRvci5vZmYoJ3NlbGVjdGlvblVwZGF0ZScsIG9uU2VsZWN0aW9uVXBkYXRlUmVmLmN1cnJlbnQpXG4gICAgICBlZGl0b3Iub24oJ3NlbGVjdGlvblVwZGF0ZScsIG9uU2VsZWN0aW9uVXBkYXRlKVxuICAgICAgb25TZWxlY3Rpb25VcGRhdGVSZWYuY3VycmVudCA9IG9uU2VsZWN0aW9uVXBkYXRlXG4gICAgfVxuXG4gICAgaWYgKG9uVHJhbnNhY3Rpb24pIHtcbiAgICAgIGVkaXRvci5vZmYoJ3RyYW5zYWN0aW9uJywgb25UcmFuc2FjdGlvblJlZi5jdXJyZW50KVxuICAgICAgZWRpdG9yLm9uKCd0cmFuc2FjdGlvbicsIG9uVHJhbnNhY3Rpb24pXG4gICAgICBvblRyYW5zYWN0aW9uUmVmLmN1cnJlbnQgPSBvblRyYW5zYWN0aW9uXG4gICAgfVxuXG4gICAgaWYgKG9uVXBkYXRlKSB7XG4gICAgICBlZGl0b3Iub2ZmKCd1cGRhdGUnLCBvblVwZGF0ZVJlZi5jdXJyZW50KVxuICAgICAgZWRpdG9yLm9uKCd1cGRhdGUnLCBvblVwZGF0ZSlcbiAgICAgIG9uVXBkYXRlUmVmLmN1cnJlbnQgPSBvblVwZGF0ZVxuICAgIH1cbiAgfSwgW29uQmVmb3JlQ3JlYXRlLCBvbkJsdXIsIG9uQ3JlYXRlLCBvbkRlc3Ryb3ksIG9uRm9jdXMsIG9uU2VsZWN0aW9uVXBkYXRlLCBvblRyYW5zYWN0aW9uLCBvblVwZGF0ZSwgZWRpdG9yXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlXG5cbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBFZGl0b3Iob3B0aW9ucylcblxuICAgIHNldEVkaXRvcihpbnN0YW5jZSlcblxuICAgIGluc3RhbmNlLm9uKCd0cmFuc2FjdGlvbicsICgpID0+IHtcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgaWYgKGlzTW91bnRlZCkge1xuICAgICAgICAgICAgZm9yY2VVcGRhdGUoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZVxuICAgIH1cbiAgfSwgZGVwcylcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBlZGl0b3I/LmRlc3Ryb3koKVxuICAgIH1cbiAgfSwgW2VkaXRvcl0pXG5cbiAgcmV0dXJuIGVkaXRvclxufVxuIiwiaW1wb3J0IHsgRWRpdG9yT3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvY29yZSdcbmltcG9ydCBSZWFjdCwgeyBjcmVhdGVDb250ZXh0LCBSZWFjdE5vZGUsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSAnLi9FZGl0b3IuanMnXG5pbXBvcnQgeyBFZGl0b3JDb250ZW50IH0gZnJvbSAnLi9FZGl0b3JDb250ZW50LmpzJ1xuaW1wb3J0IHsgdXNlRWRpdG9yIH0gZnJvbSAnLi91c2VFZGl0b3IuanMnXG5cbmV4cG9ydCB0eXBlIEVkaXRvckNvbnRleHRWYWx1ZSA9IHtcbiAgZWRpdG9yOiBFZGl0b3IgfCBudWxsO1xufVxuXG5leHBvcnQgY29uc3QgRWRpdG9yQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQ8RWRpdG9yQ29udGV4dFZhbHVlPih7XG4gIGVkaXRvcjogbnVsbCxcbn0pXG5cbmV4cG9ydCBjb25zdCBFZGl0b3JDb25zdW1lciA9IEVkaXRvckNvbnRleHQuQ29uc3VtZXJcblxuZXhwb3J0IGNvbnN0IHVzZUN1cnJlbnRFZGl0b3IgPSAoKSA9PiB1c2VDb250ZXh0KEVkaXRvckNvbnRleHQpXG5cbmV4cG9ydCB0eXBlIEVkaXRvclByb3ZpZGVyUHJvcHMgPSB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG4gIHNsb3RCZWZvcmU/OiBSZWFjdE5vZGU7XG4gIHNsb3RBZnRlcj86IFJlYWN0Tm9kZTtcbn0gJiBQYXJ0aWFsPEVkaXRvck9wdGlvbnM+XG5cbmV4cG9ydCBjb25zdCBFZGl0b3JQcm92aWRlciA9ICh7XG4gIGNoaWxkcmVuLCBzbG90QWZ0ZXIsIHNsb3RCZWZvcmUsIC4uLmVkaXRvck9wdGlvbnNcbn06IEVkaXRvclByb3ZpZGVyUHJvcHMpID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKGVkaXRvck9wdGlvbnMpXG5cbiAgaWYgKCFlZGl0b3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8RWRpdG9yQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyBlZGl0b3IgfX0+XG4gICAgICB7c2xvdEJlZm9yZX1cbiAgICAgIDxFZGl0b3JDb25zdW1lcj5cbiAgICAgICAgeyh7IGVkaXRvcjogY3VycmVudEVkaXRvciB9KSA9PiAoXG4gICAgICAgICAgPEVkaXRvckNvbnRlbnQgZWRpdG9yPXtjdXJyZW50RWRpdG9yfSAvPlxuICAgICAgICApfVxuICAgICAgPC9FZGl0b3JDb25zdW1lcj5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICAgIHtzbG90QWZ0ZXJ9XG4gICAgPC9FZGl0b3JDb250ZXh0LlByb3ZpZGVyPlxuICApXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3ROb2RlVmlld0NvbnRleHRQcm9wcyB7XG4gIG9uRHJhZ1N0YXJ0OiAoZXZlbnQ6IERyYWdFdmVudCkgPT4gdm9pZCxcbiAgbm9kZVZpZXdDb250ZW50UmVmOiAoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsKSA9PiB2b2lkLFxufVxuXG5leHBvcnQgY29uc3QgUmVhY3ROb2RlVmlld0NvbnRleHQgPSBjcmVhdGVDb250ZXh0PFBhcnRpYWw8UmVhY3ROb2RlVmlld0NvbnRleHRQcm9wcz4+KHtcbiAgb25EcmFnU3RhcnQ6IHVuZGVmaW5lZCxcbn0pXG5cbmV4cG9ydCBjb25zdCB1c2VSZWFjdE5vZGVWaWV3ID0gKCkgPT4gdXNlQ29udGV4dChSZWFjdE5vZGVWaWV3Q29udGV4dClcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgdXNlUmVhY3ROb2RlVmlldyB9IGZyb20gJy4vdXNlUmVhY3ROb2RlVmlldy5qcydcblxuZXhwb3J0IGludGVyZmFjZSBOb2RlVmlld1dyYXBwZXJQcm9wcyB7XG4gIFtrZXk6IHN0cmluZ106IGFueSxcbiAgYXM/OiBSZWFjdC5FbGVtZW50VHlwZSxcbn1cblxuZXhwb3J0IGNvbnN0IE5vZGVWaWV3V3JhcHBlcjogUmVhY3QuRkM8Tm9kZVZpZXdXcmFwcGVyUHJvcHM+ID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCB7IG9uRHJhZ1N0YXJ0IH0gPSB1c2VSZWFjdE5vZGVWaWV3KClcbiAgY29uc3QgVGFnID0gcHJvcHMuYXMgfHwgJ2RpdidcblxuICByZXR1cm4gKFxuICAgIDxUYWdcbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIHJlZj17cmVmfVxuICAgICAgZGF0YS1ub2RlLXZpZXctd3JhcHBlcj1cIlwiXG4gICAgICBvbkRyYWdTdGFydD17b25EcmFnU3RhcnR9XG4gICAgICBzdHlsZT17e1xuICAgICAgICB3aGl0ZVNwYWNlOiAnbm9ybWFsJyxcbiAgICAgICAgLi4ucHJvcHMuc3R5bGUsXG4gICAgICB9fVxuICAgIC8+XG4gIClcbn0pXG4iLCJpbXBvcnQgeyBtZXJnZUF0dHJpYnV0ZXMsIE5vZGUsIHdyYXBwaW5nSW5wdXRSdWxlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEJsb2NrcXVvdGVPcHRpb25zIHtcbiAgSFRNTEF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBibG9ja1F1b3RlOiB7XG4gICAgICAvKipcbiAgICAgICAqIFNldCBhIGJsb2NrcXVvdGUgbm9kZVxuICAgICAgICovXG4gICAgICBzZXRCbG9ja3F1b3RlOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgYSBibG9ja3F1b3RlIG5vZGVcbiAgICAgICAqL1xuICAgICAgdG9nZ2xlQmxvY2txdW90ZTogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zZXQgYSBibG9ja3F1b3RlIG5vZGVcbiAgICAgICAqL1xuICAgICAgdW5zZXRCbG9ja3F1b3RlOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5wdXRSZWdleCA9IC9eXFxzKj5cXHMkL1xuXG5leHBvcnQgY29uc3QgQmxvY2txdW90ZSA9IE5vZGUuY3JlYXRlPEJsb2NrcXVvdGVPcHRpb25zPih7XG5cbiAgbmFtZTogJ2Jsb2NrcXVvdGUnLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgY29udGVudDogJ2Jsb2NrKycsXG5cbiAgZ3JvdXA6ICdibG9jaycsXG5cbiAgZGVmaW5pbmc6IHRydWUsXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IHRhZzogJ2Jsb2NrcXVvdGUnIH0sXG4gICAgXVxuICB9LFxuXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlcyB9KSB7XG4gICAgcmV0dXJuIFsnYmxvY2txdW90ZScsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSwgMF1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0QmxvY2txdW90ZTogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMud3JhcEluKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgICB0b2dnbGVCbG9ja3F1b3RlOiAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21tYW5kcy50b2dnbGVXcmFwKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgICB1bnNldEJsb2NrcXVvdGU6ICgpID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLmxpZnQodGhpcy5uYW1lKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNb2QtU2hpZnQtYic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnRvZ2dsZUJsb2NrcXVvdGUoKSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgd3JhcHBpbmdJbnB1dFJ1bGUoe1xuICAgICAgICBmaW5kOiBpbnB1dFJlZ2V4LFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHtcbiAgTWFyayxcbiAgbWFya0lucHV0UnVsZSxcbiAgbWFya1Bhc3RlUnVsZSxcbiAgbWVyZ2VBdHRyaWJ1dGVzLFxufSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQm9sZE9wdGlvbnMge1xuICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55Pixcbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGJvbGQ6IHtcbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgYm9sZCBtYXJrXG4gICAgICAgKi9cbiAgICAgIHNldEJvbGQ6ICgpID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBhIGJvbGQgbWFya1xuICAgICAgICovXG4gICAgICB0b2dnbGVCb2xkOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgICAgLyoqXG4gICAgICAgKiBVbnNldCBhIGJvbGQgbWFya1xuICAgICAgICovXG4gICAgICB1bnNldEJvbGQ6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzdGFySW5wdXRSZWdleCA9IC8oPzpefFxccykoKD86XFwqXFwqKSgoPzpbXipdKykpKD86XFwqXFwqKSkkL1xuZXhwb3J0IGNvbnN0IHN0YXJQYXN0ZVJlZ2V4ID0gLyg/Ol58XFxzKSgoPzpcXCpcXCopKCg/OlteKl0rKSkoPzpcXCpcXCopKS9nXG5leHBvcnQgY29uc3QgdW5kZXJzY29yZUlucHV0UmVnZXggPSAvKD86XnxcXHMpKCg/Ol9fKSgoPzpbXl9fXSspKSg/Ol9fKSkkL1xuZXhwb3J0IGNvbnN0IHVuZGVyc2NvcmVQYXN0ZVJlZ2V4ID0gLyg/Ol58XFxzKSgoPzpfXykoKD86W15fX10rKSkoPzpfXykpL2dcblxuZXhwb3J0IGNvbnN0IEJvbGQgPSBNYXJrLmNyZWF0ZTxCb2xkT3B0aW9ucz4oe1xuICBuYW1lOiAnYm9sZCcsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgIH1cbiAgfSxcblxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnc3Ryb25nJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2InLFxuICAgICAgICBnZXRBdHRyczogbm9kZSA9PiAobm9kZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZm9udFdlaWdodCAhPT0gJ25vcm1hbCcgJiYgbnVsbCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHN0eWxlOiAnZm9udC13ZWlnaHQnLFxuICAgICAgICBnZXRBdHRyczogdmFsdWUgPT4gL14oYm9sZChlcik/fFs1LTldXFxkezIsfSkkLy50ZXN0KHZhbHVlIGFzIHN0cmluZykgJiYgbnVsbCxcbiAgICAgIH0sXG4gICAgXVxuICB9LFxuXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlcyB9KSB7XG4gICAgcmV0dXJuIFsnc3Ryb25nJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpLCAwXVxuICB9LFxuXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRCb2xkOiAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21tYW5kcy5zZXRNYXJrKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgICB0b2dnbGVCb2xkOiAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21tYW5kcy50b2dnbGVNYXJrKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgICB1bnNldEJvbGQ6ICgpID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLnVuc2V0TWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ01vZC1iJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlQm9sZCgpLFxuICAgICAgJ01vZC1CJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlQm9sZCgpLFxuICAgIH1cbiAgfSxcblxuICBhZGRJbnB1dFJ1bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBtYXJrSW5wdXRSdWxlKHtcbiAgICAgICAgZmluZDogc3RhcklucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIH0pLFxuICAgICAgbWFya0lucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IHVuZGVyc2NvcmVJbnB1dFJlZ2V4LFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG5cbiAgYWRkUGFzdGVSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbWFya1Bhc3RlUnVsZSh7XG4gICAgICAgIGZpbmQ6IHN0YXJQYXN0ZVJlZ2V4LFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICAgIG1hcmtQYXN0ZVJ1bGUoe1xuICAgICAgICBmaW5kOiB1bmRlcnNjb3JlUGFzdGVSZWdleCxcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgfSksXG4gICAgXVxuICB9LFxufSlcbiIsImltcG9ydCB7IG1lcmdlQXR0cmlidXRlcywgTm9kZSB9IGZyb20gJ0B0aXB0YXAvY29yZSdcblxuZXhwb3J0IGludGVyZmFjZSBMaXN0SXRlbU9wdGlvbnMge1xuICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PixcbiAgYnVsbGV0TGlzdFR5cGVOYW1lOiBzdHJpbmdcbiAgb3JkZXJlZExpc3RUeXBlTmFtZTogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCBMaXN0SXRlbSA9IE5vZGUuY3JlYXRlPExpc3RJdGVtT3B0aW9ucz4oe1xuICBuYW1lOiAnbGlzdEl0ZW0nLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICAgIGJ1bGxldExpc3RUeXBlTmFtZTogJ2J1bGxldExpc3QnLFxuICAgICAgb3JkZXJlZExpc3RUeXBlTmFtZTogJ29yZGVyZWRMaXN0JyxcbiAgICB9XG4gIH0sXG5cbiAgY29udGVudDogJ3BhcmFncmFwaCBibG9jayonLFxuXG4gIGRlZmluaW5nOiB0cnVlLFxuXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0YWc6ICdsaScsXG4gICAgICB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ2xpJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpLCAwXVxuICB9LFxuXG4gIGFkZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBFbnRlcjogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMuc3BsaXRMaXN0SXRlbSh0aGlzLm5hbWUpLFxuICAgICAgVGFiOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5zaW5rTGlzdEl0ZW0odGhpcy5uYW1lKSxcbiAgICAgICdTaGlmdC1UYWInOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5saWZ0TGlzdEl0ZW0odGhpcy5uYW1lKSxcbiAgICB9XG4gIH0sXG59KVxuIiwiaW1wb3J0IHtcbiAgZ2V0TWFya0F0dHJpYnV0ZXMsXG4gIE1hcmssXG4gIG1lcmdlQXR0cmlidXRlcyxcbn0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRTdHlsZU9wdGlvbnMge1xuICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55Pixcbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIHRleHRTdHlsZToge1xuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgc3BhbnMgd2l0aG91dCBpbmxpbmUgc3R5bGUgYXR0cmlidXRlcy5cbiAgICAgICAqL1xuICAgICAgcmVtb3ZlRW1wdHlUZXh0U3R5bGU6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBUZXh0U3R5bGUgPSBNYXJrLmNyZWF0ZTxUZXh0U3R5bGVPcHRpb25zPih7XG4gIG5hbWU6ICd0ZXh0U3R5bGUnLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogJ3NwYW4nLFxuICAgICAgICBnZXRBdHRyczogZWxlbWVudCA9PiB7XG4gICAgICAgICAgY29uc3QgaGFzU3R5bGVzID0gKGVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLmhhc0F0dHJpYnV0ZSgnc3R5bGUnKVxuXG4gICAgICAgICAgaWYgKCFoYXNTdHlsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7fVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdXG4gIH0sXG5cbiAgcmVuZGVySFRNTCh7IEhUTUxBdHRyaWJ1dGVzIH0pIHtcbiAgICByZXR1cm4gWydzcGFuJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpLCAwXVxuICB9LFxuXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZW1vdmVFbXB0eVRleHRTdHlsZTogKCkgPT4gKHsgc3RhdGUsIGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IGdldE1hcmtBdHRyaWJ1dGVzKHN0YXRlLCB0aGlzLnR5cGUpXG4gICAgICAgIGNvbnN0IGhhc1N0eWxlcyA9IE9iamVjdC5lbnRyaWVzKGF0dHJpYnV0ZXMpLnNvbWUoKFssIHZhbHVlXSkgPT4gISF2YWx1ZSlcblxuICAgICAgICBpZiAoaGFzU3R5bGVzKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb21tYW5kcy51bnNldE1hcmsodGhpcy5uYW1lKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbn0pXG4iLCJpbXBvcnQgeyBtZXJnZUF0dHJpYnV0ZXMsIE5vZGUsIHdyYXBwaW5nSW5wdXRSdWxlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5pbXBvcnQgTGlzdEl0ZW0gZnJvbSAnLi4vLi4vZXh0ZW5zaW9uLWxpc3QtaXRlbS9zcmMvaW5kZXguanMnXG5pbXBvcnQgVGV4dFN0eWxlIGZyb20gJy4uLy4uL2V4dGVuc2lvbi10ZXh0LXN0eWxlL3NyYy9pbmRleC5qcydcblxuZXhwb3J0IGludGVyZmFjZSBCdWxsZXRMaXN0T3B0aW9ucyB7XG4gIGl0ZW1UeXBlTmFtZTogc3RyaW5nLFxuICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55PixcbiAga2VlcE1hcmtzOiBib29sZWFuLFxuICBrZWVwQXR0cmlidXRlczogYm9vbGVhbixcbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGJ1bGxldExpc3Q6IHtcbiAgICAgIC8qKlxuICAgICAgICogVG9nZ2xlIGEgYnVsbGV0IGxpc3RcbiAgICAgICAqL1xuICAgICAgdG9nZ2xlQnVsbGV0TGlzdDogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGlucHV0UmVnZXggPSAvXlxccyooWy0rKl0pXFxzJC9cblxuZXhwb3J0IGNvbnN0IEJ1bGxldExpc3QgPSBOb2RlLmNyZWF0ZTxCdWxsZXRMaXN0T3B0aW9ucz4oe1xuICBuYW1lOiAnYnVsbGV0TGlzdCcsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXRlbVR5cGVOYW1lOiAnbGlzdEl0ZW0nLFxuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgICAga2VlcE1hcmtzOiBmYWxzZSxcbiAgICAgIGtlZXBBdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICB9XG4gIH0sXG5cbiAgZ3JvdXA6ICdibG9jayBsaXN0JyxcblxuICBjb250ZW50KCkge1xuICAgIHJldHVybiBgJHt0aGlzLm9wdGlvbnMuaXRlbVR5cGVOYW1lfStgXG4gIH0sXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IHRhZzogJ3VsJyB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ3VsJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpLCAwXVxuICB9LFxuXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2dnbGVCdWxsZXRMaXN0OiAoKSA9PiAoeyBjb21tYW5kcywgY2hhaW4gfSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmtlZXBBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgcmV0dXJuIGNoYWluKCkudG9nZ2xlTGlzdCh0aGlzLm5hbWUsIHRoaXMub3B0aW9ucy5pdGVtVHlwZU5hbWUsIHRoaXMub3B0aW9ucy5rZWVwTWFya3MpLnVwZGF0ZUF0dHJpYnV0ZXMoTGlzdEl0ZW0ubmFtZSwgdGhpcy5lZGl0b3IuZ2V0QXR0cmlidXRlcyhUZXh0U3R5bGUubmFtZSkpLnJ1bigpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLnRvZ2dsZUxpc3QodGhpcy5uYW1lLCB0aGlzLm9wdGlvbnMuaXRlbVR5cGVOYW1lLCB0aGlzLm9wdGlvbnMua2VlcE1hcmtzKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNb2QtU2hpZnQtOCc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnRvZ2dsZUJ1bGxldExpc3QoKSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICBsZXQgaW5wdXRSdWxlID0gd3JhcHBpbmdJbnB1dFJ1bGUoe1xuICAgICAgZmluZDogaW5wdXRSZWdleCxcbiAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICB9KVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZWVwTWFya3MgfHwgdGhpcy5vcHRpb25zLmtlZXBBdHRyaWJ1dGVzKSB7XG4gICAgICBpbnB1dFJ1bGUgPSB3cmFwcGluZ0lucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IGlucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAga2VlcE1hcmtzOiB0aGlzLm9wdGlvbnMua2VlcE1hcmtzLFxuICAgICAgICBrZWVwQXR0cmlidXRlczogdGhpcy5vcHRpb25zLmtlZXBBdHRyaWJ1dGVzLFxuICAgICAgICBnZXRBdHRyaWJ1dGVzOiAoKSA9PiB7IHJldHVybiB0aGlzLmVkaXRvci5nZXRBdHRyaWJ1dGVzKFRleHRTdHlsZS5uYW1lKSB9LFxuICAgICAgICBlZGl0b3I6IHRoaXMuZWRpdG9yLFxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIGlucHV0UnVsZSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHtcbiAgTWFyayxcbiAgbWFya0lucHV0UnVsZSxcbiAgbWFya1Bhc3RlUnVsZSxcbiAgbWVyZ2VBdHRyaWJ1dGVzLFxufSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29kZU9wdGlvbnMge1xuICBIVE1MQXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgYW55Pixcbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGNvZGU6IHtcbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgY29kZSBtYXJrXG4gICAgICAgKi9cbiAgICAgIHNldENvZGU6ICgpID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBpbmxpbmUgY29kZVxuICAgICAgICovXG4gICAgICB0b2dnbGVDb2RlOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgICAgLyoqXG4gICAgICAgKiBVbnNldCBhIGNvZGUgbWFya1xuICAgICAgICovXG4gICAgICB1bnNldENvZGU6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBpbnB1dFJlZ2V4ID0gLyg/Ol58XFxzKSgoPzpgKSgoPzpbXmBdKykpKD86YCkpJC9cbmV4cG9ydCBjb25zdCBwYXN0ZVJlZ2V4ID0gLyg/Ol58XFxzKSgoPzpgKSgoPzpbXmBdKykpKD86YCkpL2dcblxuZXhwb3J0IGNvbnN0IENvZGUgPSBNYXJrLmNyZWF0ZTxDb2RlT3B0aW9ucz4oe1xuICBuYW1lOiAnY29kZScsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgIH1cbiAgfSxcblxuICBleGNsdWRlczogJ18nLFxuXG4gIGNvZGU6IHRydWUsXG5cbiAgZXhpdGFibGU6IHRydWUsXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IHRhZzogJ2NvZGUnIH0sXG4gICAgXVxuICB9LFxuXG4gIHJlbmRlckhUTUwoeyBIVE1MQXR0cmlidXRlcyB9KSB7XG4gICAgcmV0dXJuIFsnY29kZScsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSwgMF1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0Q29kZTogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuc2V0TWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgICAgdG9nZ2xlQ29kZTogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMudG9nZ2xlTWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgICAgdW5zZXRDb2RlOiAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21tYW5kcy51bnNldE1hcmsodGhpcy5uYW1lKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNb2QtZSc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnRvZ2dsZUNvZGUoKSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbWFya0lucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IGlucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIH0pLFxuICAgIF1cbiAgfSxcblxuICBhZGRQYXN0ZVJ1bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBtYXJrUGFzdGVSdWxlKHtcbiAgICAgICAgZmluZDogcGFzdGVSZWdleCxcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgfSksXG4gICAgXVxuICB9LFxufSlcbiIsImltcG9ydCB7IG1lcmdlQXR0cmlidXRlcywgTm9kZSwgdGV4dGJsb2NrVHlwZUlucHV0UnVsZSB9IGZyb20gJ0B0aXB0YXAvY29yZSdcbmltcG9ydCB7IFBsdWdpbiwgUGx1Z2luS2V5LCBUZXh0U2VsZWN0aW9uIH0gZnJvbSAnQHRpcHRhcC9wbS9zdGF0ZSdcblxuZXhwb3J0IGludGVyZmFjZSBDb2RlQmxvY2tPcHRpb25zIHtcbiAgLyoqXG4gICAqIEFkZHMgYSBwcmVmaXggdG8gbGFuZ3VhZ2UgY2xhc3NlcyB0aGF0IGFyZSBhcHBsaWVkIHRvIGNvZGUgdGFncy5cbiAgICogRGVmYXVsdHMgdG8gYCdsYW5ndWFnZS0nYC5cbiAgICovXG4gIGxhbmd1YWdlQ2xhc3NQcmVmaXg6IHN0cmluZ1xuICAvKipcbiAgICogRGVmaW5lIHdoZXRoZXIgdGhlIG5vZGUgc2hvdWxkIGJlIGV4aXRlZCBvbiB0cmlwbGUgZW50ZXIuXG4gICAqIERlZmF1bHRzIHRvIGB0cnVlYC5cbiAgICovXG4gIGV4aXRPblRyaXBsZUVudGVyOiBib29sZWFuXG4gIC8qKlxuICAgKiBEZWZpbmUgd2hldGhlciB0aGUgbm9kZSBzaG91bGQgYmUgZXhpdGVkIG9uIGFycm93IGRvd24gaWYgdGhlcmUgaXMgbm8gbm9kZSBhZnRlciBpdC5cbiAgICogRGVmYXVsdHMgdG8gYHRydWVgLlxuICAgKi9cbiAgZXhpdE9uQXJyb3dEb3duOiBib29sZWFuXG4gIC8qKlxuICAgKiBDdXN0b20gSFRNTCBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSByZW5kZXJlZCBIVE1MIHRhZy5cbiAgICovXG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBjb2RlQmxvY2s6IHtcbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgY29kZSBibG9ja1xuICAgICAgICovXG4gICAgICBzZXRDb2RlQmxvY2s6IChhdHRyaWJ1dGVzPzogeyBsYW5ndWFnZTogc3RyaW5nIH0pID0+IFJldHVyblR5cGVcbiAgICAgIC8qKlxuICAgICAgICogVG9nZ2xlIGEgY29kZSBibG9ja1xuICAgICAgICovXG4gICAgICB0b2dnbGVDb2RlQmxvY2s6IChhdHRyaWJ1dGVzPzogeyBsYW5ndWFnZTogc3RyaW5nIH0pID0+IFJldHVyblR5cGVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGJhY2t0aWNrSW5wdXRSZWdleCA9IC9eYGBgKFthLXpdKyk/W1xcc1xcbl0kL1xuZXhwb3J0IGNvbnN0IHRpbGRlSW5wdXRSZWdleCA9IC9efn5+KFthLXpdKyk/W1xcc1xcbl0kL1xuXG5leHBvcnQgY29uc3QgQ29kZUJsb2NrID0gTm9kZS5jcmVhdGU8Q29kZUJsb2NrT3B0aW9ucz4oe1xuICBuYW1lOiAnY29kZUJsb2NrJyxcblxuICBhZGRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsYW5ndWFnZUNsYXNzUHJlZml4OiAnbGFuZ3VhZ2UtJyxcbiAgICAgIGV4aXRPblRyaXBsZUVudGVyOiB0cnVlLFxuICAgICAgZXhpdE9uQXJyb3dEb3duOiB0cnVlLFxuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgIH1cbiAgfSxcblxuICBjb250ZW50OiAndGV4dConLFxuXG4gIG1hcmtzOiAnJyxcblxuICBncm91cDogJ2Jsb2NrJyxcblxuICBjb2RlOiB0cnVlLFxuXG4gIGRlZmluaW5nOiB0cnVlLFxuXG4gIGFkZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhbmd1YWdlOiB7XG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIHBhcnNlSFRNTDogZWxlbWVudCA9PiB7XG4gICAgICAgICAgY29uc3QgeyBsYW5ndWFnZUNsYXNzUHJlZml4IH0gPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICBjb25zdCBjbGFzc05hbWVzID0gWy4uLihlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkPy5jbGFzc0xpc3QgfHwgW10pXVxuICAgICAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IGNsYXNzTmFtZXNcbiAgICAgICAgICAgIC5maWx0ZXIoY2xhc3NOYW1lID0+IGNsYXNzTmFtZS5zdGFydHNXaXRoKGxhbmd1YWdlQ2xhc3NQcmVmaXgpKVxuICAgICAgICAgICAgLm1hcChjbGFzc05hbWUgPT4gY2xhc3NOYW1lLnJlcGxhY2UobGFuZ3VhZ2VDbGFzc1ByZWZpeCwgJycpKVxuICAgICAgICAgIGNvbnN0IGxhbmd1YWdlID0gbGFuZ3VhZ2VzWzBdXG5cbiAgICAgICAgICBpZiAoIWxhbmd1YWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBsYW5ndWFnZVxuICAgICAgICB9LFxuICAgICAgICByZW5kZXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiAncHJlJyxcbiAgICAgICAgcHJlc2VydmVXaGl0ZXNwYWNlOiAnZnVsbCcsXG4gICAgICB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgbm9kZSwgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbXG4gICAgICAncHJlJyxcbiAgICAgIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSxcbiAgICAgIFtcbiAgICAgICAgJ2NvZGUnLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3M6IG5vZGUuYXR0cnMubGFuZ3VhZ2VcbiAgICAgICAgICAgID8gdGhpcy5vcHRpb25zLmxhbmd1YWdlQ2xhc3NQcmVmaXggKyBub2RlLmF0dHJzLmxhbmd1YWdlXG4gICAgICAgICAgICA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICAgIDAsXG4gICAgICBdLFxuICAgIF1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0Q29kZUJsb2NrOlxuICAgICAgICBhdHRyaWJ1dGVzID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgICByZXR1cm4gY29tbWFuZHMuc2V0Tm9kZSh0aGlzLm5hbWUsIGF0dHJpYnV0ZXMpXG4gICAgICAgIH0sXG4gICAgICB0b2dnbGVDb2RlQmxvY2s6XG4gICAgICAgIGF0dHJpYnV0ZXMgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBjb21tYW5kcy50b2dnbGVOb2RlKHRoaXMubmFtZSwgJ3BhcmFncmFwaCcsIGF0dHJpYnV0ZXMpXG4gICAgICAgIH0sXG4gICAgfVxuICB9LFxuXG4gIGFkZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnTW9kLUFsdC1jJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlQ29kZUJsb2NrKCksXG5cbiAgICAgIC8vIHJlbW92ZSBjb2RlIGJsb2NrIHdoZW4gYXQgc3RhcnQgb2YgZG9jdW1lbnQgb3IgY29kZSBibG9jayBpcyBlbXB0eVxuICAgICAgQmFja3NwYWNlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZW1wdHksICRhbmNob3IgfSA9IHRoaXMuZWRpdG9yLnN0YXRlLnNlbGVjdGlvblxuICAgICAgICBjb25zdCBpc0F0U3RhcnQgPSAkYW5jaG9yLnBvcyA9PT0gMVxuXG4gICAgICAgIGlmICghZW1wdHkgfHwgJGFuY2hvci5wYXJlbnQudHlwZS5uYW1lICE9PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0F0U3RhcnQgfHwgISRhbmNob3IucGFyZW50LnRleHRDb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRvci5jb21tYW5kcy5jbGVhck5vZGVzKClcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSxcblxuICAgICAgLy8gZXhpdCBub2RlIG9uIHRyaXBsZSBlbnRlclxuICAgICAgRW50ZXI6ICh7IGVkaXRvciB9KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmV4aXRPblRyaXBsZUVudGVyKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHN0YXRlIH0gPSBlZGl0b3JcbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb24gfSA9IHN0YXRlXG4gICAgICAgIGNvbnN0IHsgJGZyb20sIGVtcHR5IH0gPSBzZWxlY3Rpb25cblxuICAgICAgICBpZiAoIWVtcHR5IHx8ICRmcm9tLnBhcmVudC50eXBlICE9PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzQXRFbmQgPSAkZnJvbS5wYXJlbnRPZmZzZXQgPT09ICRmcm9tLnBhcmVudC5ub2RlU2l6ZSAtIDJcbiAgICAgICAgY29uc3QgZW5kc1dpdGhEb3VibGVOZXdsaW5lID0gJGZyb20ucGFyZW50LnRleHRDb250ZW50LmVuZHNXaXRoKCdcXG5cXG4nKVxuXG4gICAgICAgIGlmICghaXNBdEVuZCB8fCAhZW5kc1dpdGhEb3VibGVOZXdsaW5lKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWRpdG9yXG4gICAgICAgICAgLmNoYWluKClcbiAgICAgICAgICAuY29tbWFuZCgoeyB0ciB9KSA9PiB7XG4gICAgICAgICAgICB0ci5kZWxldGUoJGZyb20ucG9zIC0gMiwgJGZyb20ucG9zKVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmV4aXRDb2RlKClcbiAgICAgICAgICAucnVuKClcbiAgICAgIH0sXG5cbiAgICAgIC8vIGV4aXQgbm9kZSBvbiBhcnJvdyBkb3duXG4gICAgICBBcnJvd0Rvd246ICh7IGVkaXRvciB9KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmV4aXRPbkFycm93RG93bikge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gZWRpdG9yXG4gICAgICAgIGNvbnN0IHsgc2VsZWN0aW9uLCBkb2MgfSA9IHN0YXRlXG4gICAgICAgIGNvbnN0IHsgJGZyb20sIGVtcHR5IH0gPSBzZWxlY3Rpb25cblxuICAgICAgICBpZiAoIWVtcHR5IHx8ICRmcm9tLnBhcmVudC50eXBlICE9PSB0aGlzLnR5cGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlzQXRFbmQgPSAkZnJvbS5wYXJlbnRPZmZzZXQgPT09ICRmcm9tLnBhcmVudC5ub2RlU2l6ZSAtIDJcblxuICAgICAgICBpZiAoIWlzQXRFbmQpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFmdGVyID0gJGZyb20uYWZ0ZXIoKVxuXG4gICAgICAgIGlmIChhZnRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub2RlQWZ0ZXIgPSBkb2Mubm9kZUF0KGFmdGVyKVxuXG4gICAgICAgIGlmIChub2RlQWZ0ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlZGl0b3IuY29tbWFuZHMuZXhpdENvZGUoKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgdGV4dGJsb2NrVHlwZUlucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IGJhY2t0aWNrSW5wdXRSZWdleCxcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICBnZXRBdHRyaWJ1dGVzOiBtYXRjaCA9PiAoe1xuICAgICAgICAgIGxhbmd1YWdlOiBtYXRjaFsxXSxcbiAgICAgICAgfSksXG4gICAgICB9KSxcbiAgICAgIHRleHRibG9ja1R5cGVJbnB1dFJ1bGUoe1xuICAgICAgICBmaW5kOiB0aWxkZUlucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgZ2V0QXR0cmlidXRlczogbWF0Y2ggPT4gKHtcbiAgICAgICAgICBsYW5ndWFnZTogbWF0Y2hbMV0sXG4gICAgICAgIH0pLFxuICAgICAgfSksXG4gICAgXVxuICB9LFxuXG4gIGFkZFByb3NlTWlycm9yUGx1Z2lucygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgLy8gdGhpcyBwbHVnaW4gY3JlYXRlcyBhIGNvZGUgYmxvY2sgZm9yIHBhc3RlZCBjb250ZW50IGZyb20gVlMgQ29kZVxuICAgICAgLy8gd2UgY2FuIGFsc28gZGV0ZWN0IHRoZSBjb3BpZWQgY29kZSBsYW5ndWFnZVxuICAgICAgbmV3IFBsdWdpbih7XG4gICAgICAgIGtleTogbmV3IFBsdWdpbktleSgnY29kZUJsb2NrVlNDb2RlSGFuZGxlcicpLFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIGhhbmRsZVBhc3RlOiAodmlldywgZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghZXZlbnQuY2xpcGJvYXJkRGF0YSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZG9u4oCZdCBjcmVhdGUgYSBuZXcgY29kZSBibG9jayB3aXRoaW4gY29kZSBibG9ja3NcbiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRvci5pc0FjdGl2ZSh0aGlzLnR5cGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBldmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgICAgICAgICAgY29uc3QgdnNjb2RlID0gZXZlbnQuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCd2c2NvZGUtZWRpdG9yLWRhdGEnKVxuICAgICAgICAgICAgY29uc3QgdnNjb2RlRGF0YSA9IHZzY29kZSA/IEpTT04ucGFyc2UodnNjb2RlKSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgY29uc3QgbGFuZ3VhZ2UgPSB2c2NvZGVEYXRhPy5tb2RlXG5cbiAgICAgICAgICAgIGlmICghdGV4dCB8fCAhbGFuZ3VhZ2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgdHIgfSA9IHZpZXcuc3RhdGVcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGVtcHR5IGNvZGUgYmxvY2tcbiAgICAgICAgICAgIHRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHRoaXMudHlwZS5jcmVhdGUoeyBsYW5ndWFnZSB9KSlcblxuICAgICAgICAgICAgLy8gcHV0IGN1cnNvciBpbnNpZGUgdGhlIG5ld2x5IGNyZWF0ZWQgY29kZSBibG9ja1xuICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKFRleHRTZWxlY3Rpb24ubmVhcih0ci5kb2MucmVzb2x2ZShNYXRoLm1heCgwLCB0ci5zZWxlY3Rpb24uZnJvbSAtIDIpKSkpXG5cbiAgICAgICAgICAgIC8vIGFkZCB0ZXh0IHRvIGNvZGUgYmxvY2tcbiAgICAgICAgICAgIC8vIHN0cmlwIGNhcnJpYWdlIHJldHVybiBjaGFycyBmcm9tIHRleHQgcGFzdGVkIGFzIGNvZGVcbiAgICAgICAgICAgIC8vIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL1Byb3NlTWlycm9yL3Byb3NlbWlycm9yLXZpZXcvY29tbWl0L2E1MGE2YmNjZWI0Y2U1MmFjOGZjYzYxNjI0ODhkODg3NTYxM2FhY2RcbiAgICAgICAgICAgIHRyLmluc2VydFRleHQodGV4dC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKSlcblxuICAgICAgICAgICAgLy8gc3RvcmUgbWV0YSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgLy8gdGhpcyBpcyB1c2VmdWwgZm9yIG90aGVyIHBsdWdpbnMgdGhhdCBkZXBlbmRzIG9uIHRoZSBwYXN0ZSBldmVudFxuICAgICAgICAgICAgLy8gbGlrZSB0aGUgcGFzdGUgcnVsZSBwbHVnaW5cbiAgICAgICAgICAgIHRyLnNldE1ldGEoJ3Bhc3RlJywgdHJ1ZSlcblxuICAgICAgICAgICAgdmlldy5kaXNwYXRjaCh0cilcblxuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXVxuICB9LFxufSlcbiIsImltcG9ydCB7IE5vZGUgfSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCBjb25zdCBEb2N1bWVudCA9IE5vZGUuY3JlYXRlKHtcbiAgbmFtZTogJ2RvYycsXG4gIHRvcE5vZGU6IHRydWUsXG4gIGNvbnRlbnQ6ICdibG9jaysnLFxufSlcbiIsImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ3Byb3NlbWlycm9yLXN0YXRlJztcbmltcG9ydCB7IGRyb3BQb2ludCB9IGZyb20gJ3Byb3NlbWlycm9yLXRyYW5zZm9ybSc7XG5cbi8qKlxuQ3JlYXRlIGEgcGx1Z2luIHRoYXQsIHdoZW4gYWRkZWQgdG8gYSBQcm9zZU1pcnJvciBpbnN0YW5jZSxcbmNhdXNlcyBhIGRlY29yYXRpb24gdG8gc2hvdyB1cCBhdCB0aGUgZHJvcCBwb3NpdGlvbiB3aGVuIHNvbWV0aGluZ1xuaXMgZHJhZ2dlZCBvdmVyIHRoZSBlZGl0b3IuXG5cbk5vZGVzIG1heSBhZGQgYSBgZGlzYWJsZURyb3BDdXJzb3JgIHByb3BlcnR5IHRvIHRoZWlyIHNwZWMgdG9cbmNvbnRyb2wgdGhlIHNob3dpbmcgb2YgYSBkcm9wIGN1cnNvciBpbnNpZGUgdGhlbS4gVGhpcyBtYXkgYmUgYVxuYm9vbGVhbiBvciBhIGZ1bmN0aW9uLCB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgdmlldyBhbmQgYVxucG9zaXRpb24sIGFuZCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbi5cbiovXG5mdW5jdGlvbiBkcm9wQ3Vyc29yKG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUGx1Z2luKHtcbiAgICAgICAgdmlldyhlZGl0b3JWaWV3KSB7IHJldHVybiBuZXcgRHJvcEN1cnNvclZpZXcoZWRpdG9yVmlldywgb3B0aW9ucyk7IH1cbiAgICB9KTtcbn1cbmNsYXNzIERyb3BDdXJzb3JWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3JWaWV3LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5lZGl0b3JWaWV3ID0gZWRpdG9yVmlldztcbiAgICAgICAgdGhpcy5jdXJzb3JQb3MgPSBudWxsO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSAtMTtcbiAgICAgICAgdGhpcy53aWR0aCA9IChfYSA9IG9wdGlvbnMud2lkdGgpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDE7XG4gICAgICAgIHRoaXMuY29sb3IgPSBvcHRpb25zLmNvbG9yID09PSBmYWxzZSA/IHVuZGVmaW5lZCA6IChvcHRpb25zLmNvbG9yIHx8IFwiYmxhY2tcIik7XG4gICAgICAgIHRoaXMuY2xhc3MgPSBvcHRpb25zLmNsYXNzO1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gW1wiZHJhZ292ZXJcIiwgXCJkcmFnZW5kXCIsIFwiZHJvcFwiLCBcImRyYWdsZWF2ZVwiXS5tYXAobmFtZSA9PiB7XG4gICAgICAgICAgICBsZXQgaGFuZGxlciA9IChlKSA9PiB7IHRoaXNbbmFtZV0oZSk7IH07XG4gICAgICAgICAgICBlZGl0b3JWaWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGhhbmRsZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHsgbmFtZSwgaGFuZGxlciB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5mb3JFYWNoKCh7IG5hbWUsIGhhbmRsZXIgfSkgPT4gdGhpcy5lZGl0b3JWaWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGhhbmRsZXIpKTtcbiAgICB9XG4gICAgdXBkYXRlKGVkaXRvclZpZXcsIHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5jdXJzb3JQb3MgIT0gbnVsbCAmJiBwcmV2U3RhdGUuZG9jICE9IGVkaXRvclZpZXcuc3RhdGUuZG9jKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJzb3JQb3MgPiBlZGl0b3JWaWV3LnN0YXRlLmRvYy5jb250ZW50LnNpemUpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDdXJzb3IobnVsbCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Q3Vyc29yKHBvcykge1xuICAgICAgICBpZiAocG9zID09IHRoaXMuY3Vyc29yUG9zKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0aGlzLmN1cnNvclBvcyA9IHBvcztcbiAgICAgICAgaWYgKHBvcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZU92ZXJsYXkoKSB7XG4gICAgICAgIGxldCAkcG9zID0gdGhpcy5lZGl0b3JWaWV3LnN0YXRlLmRvYy5yZXNvbHZlKHRoaXMuY3Vyc29yUG9zKTtcbiAgICAgICAgbGV0IGlzQmxvY2sgPSAhJHBvcy5wYXJlbnQuaW5saW5lQ29udGVudCwgcmVjdDtcbiAgICAgICAgaWYgKGlzQmxvY2spIHtcbiAgICAgICAgICAgIGxldCBiZWZvcmUgPSAkcG9zLm5vZGVCZWZvcmUsIGFmdGVyID0gJHBvcy5ub2RlQWZ0ZXI7XG4gICAgICAgICAgICBpZiAoYmVmb3JlIHx8IGFmdGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmVkaXRvclZpZXcubm9kZURPTSh0aGlzLmN1cnNvclBvcyAtIChiZWZvcmUgPyBiZWZvcmUubm9kZVNpemUgOiAwKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVSZWN0ID0gbm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvcCA9IGJlZm9yZSA/IG5vZGVSZWN0LmJvdHRvbSA6IG5vZGVSZWN0LnRvcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlZm9yZSAmJiBhZnRlcilcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9ICh0b3AgKyB0aGlzLmVkaXRvclZpZXcubm9kZURPTSh0aGlzLmN1cnNvclBvcykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHJlY3QgPSB7IGxlZnQ6IG5vZGVSZWN0LmxlZnQsIHJpZ2h0OiBub2RlUmVjdC5yaWdodCwgdG9wOiB0b3AgLSB0aGlzLndpZHRoIC8gMiwgYm90dG9tOiB0b3AgKyB0aGlzLndpZHRoIC8gMiB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlY3QpIHtcbiAgICAgICAgICAgIGxldCBjb29yZHMgPSB0aGlzLmVkaXRvclZpZXcuY29vcmRzQXRQb3ModGhpcy5jdXJzb3JQb3MpO1xuICAgICAgICAgICAgcmVjdCA9IHsgbGVmdDogY29vcmRzLmxlZnQgLSB0aGlzLndpZHRoIC8gMiwgcmlnaHQ6IGNvb3Jkcy5sZWZ0ICsgdGhpcy53aWR0aCAvIDIsIHRvcDogY29vcmRzLnRvcCwgYm90dG9tOiBjb29yZHMuYm90dG9tIH07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZWRpdG9yVmlldy5kb20ub2Zmc2V0UGFyZW50O1xuICAgICAgICBpZiAoIXRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gcGFyZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xhc3MpXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IHRoaXMuY2xhc3M7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiA1MDsgcG9pbnRlci1ldmVudHM6IG5vbmU7XCI7XG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwicHJvc2VtaXJyb3ItZHJvcGN1cnNvci1ibG9ja1wiLCBpc0Jsb2NrKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJwcm9zZW1pcnJvci1kcm9wY3Vyc29yLWlubGluZVwiLCAhaXNCbG9jayk7XG4gICAgICAgIGxldCBwYXJlbnRMZWZ0LCBwYXJlbnRUb3A7XG4gICAgICAgIGlmICghcGFyZW50IHx8IHBhcmVudCA9PSBkb2N1bWVudC5ib2R5ICYmIGdldENvbXB1dGVkU3R5bGUocGFyZW50KS5wb3NpdGlvbiA9PSBcInN0YXRpY1wiKSB7XG4gICAgICAgICAgICBwYXJlbnRMZWZ0ID0gLXBhZ2VYT2Zmc2V0O1xuICAgICAgICAgICAgcGFyZW50VG9wID0gLXBhZ2VZT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBwYXJlbnRMZWZ0ID0gcmVjdC5sZWZ0IC0gcGFyZW50LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBwYXJlbnRUb3AgPSByZWN0LnRvcCAtIHBhcmVudC5zY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSAocmVjdC5sZWZ0IC0gcGFyZW50TGVmdCkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSAocmVjdC50b3AgLSBwYXJlbnRUb3ApICsgXCJweFwiO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgKyBcInB4XCI7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkgKyBcInB4XCI7XG4gICAgfVxuICAgIHNjaGVkdWxlUmVtb3ZhbCh0aW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0Q3Vyc29yKG51bGwpLCB0aW1lb3V0KTtcbiAgICB9XG4gICAgZHJhZ292ZXIoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVkaXRvclZpZXcuZWRpdGFibGUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmVkaXRvclZpZXcucG9zQXRDb29yZHMoeyBsZWZ0OiBldmVudC5jbGllbnRYLCB0b3A6IGV2ZW50LmNsaWVudFkgfSk7XG4gICAgICAgIGxldCBub2RlID0gcG9zICYmIHBvcy5pbnNpZGUgPj0gMCAmJiB0aGlzLmVkaXRvclZpZXcuc3RhdGUuZG9jLm5vZGVBdChwb3MuaW5zaWRlKTtcbiAgICAgICAgbGV0IGRpc2FibGVEcm9wQ3Vyc29yID0gbm9kZSAmJiBub2RlLnR5cGUuc3BlYy5kaXNhYmxlRHJvcEN1cnNvcjtcbiAgICAgICAgbGV0IGRpc2FibGVkID0gdHlwZW9mIGRpc2FibGVEcm9wQ3Vyc29yID09IFwiZnVuY3Rpb25cIiA/IGRpc2FibGVEcm9wQ3Vyc29yKHRoaXMuZWRpdG9yVmlldywgcG9zLCBldmVudCkgOiBkaXNhYmxlRHJvcEN1cnNvcjtcbiAgICAgICAgaWYgKHBvcyAmJiAhZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBwb3MucG9zO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWRpdG9yVmlldy5kcmFnZ2luZyAmJiB0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcuc2xpY2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnQgPSBkcm9wUG9pbnQodGhpcy5lZGl0b3JWaWV3LnN0YXRlLmRvYywgdGFyZ2V0LCB0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcuc2xpY2UpO1xuICAgICAgICAgICAgICAgIGlmIChwb2ludCAhPSBudWxsKVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBwb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKHRhcmdldCk7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlUmVtb3ZhbCg1MDAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkcmFnZW5kKCkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlUmVtb3ZhbCgyMCk7XG4gICAgfVxuICAgIGRyb3AoKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVSZW1vdmFsKDIwKTtcbiAgICB9XG4gICAgZHJhZ2xlYXZlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGhpcy5lZGl0b3JWaWV3LmRvbSB8fCAhdGhpcy5lZGl0b3JWaWV3LmRvbS5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KSlcbiAgICAgICAgICAgIHRoaXMuc2V0Q3Vyc29yKG51bGwpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgZHJvcEN1cnNvciB9O1xuIiwiaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuaW1wb3J0IHsgZHJvcEN1cnNvciB9IGZyb20gJ0B0aXB0YXAvcG0vZHJvcGN1cnNvcidcblxuZXhwb3J0IGludGVyZmFjZSBEcm9wY3Vyc29yT3B0aW9ucyB7XG4gIGNvbG9yOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIHdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIGNsYXNzOiBzdHJpbmcgfCB1bmRlZmluZWQsXG59XG5cbmV4cG9ydCBjb25zdCBEcm9wY3Vyc29yID0gRXh0ZW5zaW9uLmNyZWF0ZTxEcm9wY3Vyc29yT3B0aW9ucz4oe1xuICBuYW1lOiAnZHJvcEN1cnNvcicsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29sb3I6ICdjdXJyZW50Q29sb3InLFxuICAgICAgd2lkdGg6IDEsXG4gICAgICBjbGFzczogdW5kZWZpbmVkLFxuICAgIH1cbiAgfSxcblxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGRyb3BDdXJzb3IodGhpcy5vcHRpb25zKSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHsga2V5ZG93bkhhbmRsZXIgfSBmcm9tICdwcm9zZW1pcnJvci1rZXltYXAnO1xuaW1wb3J0IHsgU2VsZWN0aW9uLCBOb2RlU2VsZWN0aW9uLCBUZXh0U2VsZWN0aW9uLCBQbHVnaW4gfSBmcm9tICdwcm9zZW1pcnJvci1zdGF0ZSc7XG5pbXBvcnQgeyBTbGljZSwgRnJhZ21lbnQgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5pbXBvcnQgeyBEZWNvcmF0aW9uU2V0LCBEZWNvcmF0aW9uIH0gZnJvbSAncHJvc2VtaXJyb3Itdmlldyc7XG5cbi8qKlxuR2FwIGN1cnNvciBzZWxlY3Rpb25zIGFyZSByZXByZXNlbnRlZCB1c2luZyB0aGlzIGNsYXNzLiBJdHNcbmAkYW5jaG9yYCBhbmQgYCRoZWFkYCBwcm9wZXJ0aWVzIGJvdGggcG9pbnQgYXQgdGhlIGN1cnNvciBwb3NpdGlvbi5cbiovXG5jbGFzcyBHYXBDdXJzb3IgZXh0ZW5kcyBTZWxlY3Rpb24ge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIGdhcCBjdXJzb3IuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcigkcG9zKSB7XG4gICAgICAgIHN1cGVyKCRwb3MsICRwb3MpO1xuICAgIH1cbiAgICBtYXAoZG9jLCBtYXBwaW5nKSB7XG4gICAgICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUobWFwcGluZy5tYXAodGhpcy5oZWFkKSk7XG4gICAgICAgIHJldHVybiBHYXBDdXJzb3IudmFsaWQoJHBvcykgPyBuZXcgR2FwQ3Vyc29yKCRwb3MpIDogU2VsZWN0aW9uLm5lYXIoJHBvcyk7XG4gICAgfVxuICAgIGNvbnRlbnQoKSB7IHJldHVybiBTbGljZS5lbXB0eTsgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIEdhcEN1cnNvciAmJiBvdGhlci5oZWFkID09IHRoaXMuaGVhZDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcImdhcGN1cnNvclwiLCBwb3M6IHRoaXMuaGVhZCB9O1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihkb2MsIGpzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uLnBvcyAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBHYXBDdXJzb3IuZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgR2FwQ3Vyc29yKGRvYy5yZXNvbHZlKGpzb24ucG9zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0Qm9va21hcmsoKSB7IHJldHVybiBuZXcgR2FwQm9va21hcmsodGhpcy5hbmNob3IpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgdmFsaWQoJHBvcykge1xuICAgICAgICBsZXQgcGFyZW50ID0gJHBvcy5wYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQuaXNUZXh0YmxvY2sgfHwgIWNsb3NlZEJlZm9yZSgkcG9zKSB8fCAhY2xvc2VkQWZ0ZXIoJHBvcykpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBvdmVycmlkZSA9IHBhcmVudC50eXBlLnNwZWMuYWxsb3dHYXBDdXJzb3I7XG4gICAgICAgIGlmIChvdmVycmlkZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlO1xuICAgICAgICBsZXQgZGVmbHQgPSBwYXJlbnQuY29udGVudE1hdGNoQXQoJHBvcy5pbmRleCgpKS5kZWZhdWx0VHlwZTtcbiAgICAgICAgcmV0dXJuIGRlZmx0ICYmIGRlZmx0LmlzVGV4dGJsb2NrO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmaW5kR2FwQ3Vyc29yRnJvbSgkcG9zLCBkaXIsIG11c3RNb3ZlID0gZmFsc2UpIHtcbiAgICAgICAgc2VhcmNoOiBmb3IgKDs7KSB7XG4gICAgICAgICAgICBpZiAoIW11c3RNb3ZlICYmIEdhcEN1cnNvci52YWxpZCgkcG9zKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gJHBvcztcbiAgICAgICAgICAgIGxldCBwb3MgPSAkcG9zLnBvcywgbmV4dCA9IG51bGw7XG4gICAgICAgICAgICAvLyBTY2FuIHVwIGZyb20gdGhpcyBwb3NpdGlvblxuICAgICAgICAgICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGg7OyBkLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50ID0gJHBvcy5ub2RlKGQpO1xuICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwID8gJHBvcy5pbmRleEFmdGVyKGQpIDwgcGFyZW50LmNoaWxkQ291bnQgOiAkcG9zLmluZGV4KGQpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gcGFyZW50LmNoaWxkKGRpciA+IDAgPyAkcG9zLmluZGV4QWZ0ZXIoZCkgOiAkcG9zLmluZGV4KGQpIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcyArPSBkaXI7XG4gICAgICAgICAgICAgICAgbGV0ICRjdXIgPSAkcG9zLmRvYy5yZXNvbHZlKHBvcyk7XG4gICAgICAgICAgICAgICAgaWYgKEdhcEN1cnNvci52YWxpZCgkY3VyKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjdXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBbmQgdGhlbiBkb3duIGludG8gdGhlIG5leHQgbm9kZVxuICAgICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgICAgIGxldCBpbnNpZGUgPSBkaXIgPiAwID8gbmV4dC5maXJzdENoaWxkIDogbmV4dC5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnNpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQuaXNBdG9tICYmICFuZXh0LmlzVGV4dCAmJiAhTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobmV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRwb3MgPSAkcG9zLmRvYy5yZXNvbHZlKHBvcyArIG5leHQubm9kZVNpemUgKiBkaXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXVzdE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV4dCA9IGluc2lkZTtcbiAgICAgICAgICAgICAgICBwb3MgKz0gZGlyO1xuICAgICAgICAgICAgICAgIGxldCAkY3VyID0gJHBvcy5kb2MucmVzb2x2ZShwb3MpO1xuICAgICAgICAgICAgICAgIGlmIChHYXBDdXJzb3IudmFsaWQoJGN1cikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkY3VyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5HYXBDdXJzb3IucHJvdG90eXBlLnZpc2libGUgPSBmYWxzZTtcbkdhcEN1cnNvci5maW5kRnJvbSA9IEdhcEN1cnNvci5maW5kR2FwQ3Vyc29yRnJvbTtcblNlbGVjdGlvbi5qc29uSUQoXCJnYXBjdXJzb3JcIiwgR2FwQ3Vyc29yKTtcbmNsYXNzIEdhcEJvb2ttYXJrIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3MpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2FwQm9va21hcmsobWFwcGluZy5tYXAodGhpcy5wb3MpKTtcbiAgICB9XG4gICAgcmVzb2x2ZShkb2MpIHtcbiAgICAgICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZSh0aGlzLnBvcyk7XG4gICAgICAgIHJldHVybiBHYXBDdXJzb3IudmFsaWQoJHBvcykgPyBuZXcgR2FwQ3Vyc29yKCRwb3MpIDogU2VsZWN0aW9uLm5lYXIoJHBvcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xvc2VkQmVmb3JlKCRwb3MpIHtcbiAgICBmb3IgKGxldCBkID0gJHBvcy5kZXB0aDsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgbGV0IGluZGV4ID0gJHBvcy5pbmRleChkKSwgcGFyZW50ID0gJHBvcy5ub2RlKGQpO1xuICAgICAgICAvLyBBdCB0aGUgc3RhcnQgb2YgdGhpcyBwYXJlbnQsIGxvb2sgYXQgbmV4dCBvbmVcbiAgICAgICAgaWYgKGluZGV4ID09IDApIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNlZSBpZiB0aGUgbm9kZSBiZWZvcmUgKG9yIGl0cyBmaXJzdCBhbmNlc3RvcikgaXMgY2xvc2VkXG4gICAgICAgIGZvciAobGV0IGJlZm9yZSA9IHBhcmVudC5jaGlsZChpbmRleCAtIDEpOzsgYmVmb3JlID0gYmVmb3JlLmxhc3RDaGlsZCkge1xuICAgICAgICAgICAgaWYgKChiZWZvcmUuY2hpbGRDb3VudCA9PSAwICYmICFiZWZvcmUuaW5saW5lQ29udGVudCkgfHwgYmVmb3JlLmlzQXRvbSB8fCBiZWZvcmUudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChiZWZvcmUuaW5saW5lQ29udGVudClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGl0IHN0YXJ0IG9mIGRvY3VtZW50XG4gICAgcmV0dXJuIHRydWU7XG59XG5mdW5jdGlvbiBjbG9zZWRBZnRlcigkcG9zKSB7XG4gICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGg7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgIGxldCBpbmRleCA9ICRwb3MuaW5kZXhBZnRlcihkKSwgcGFyZW50ID0gJHBvcy5ub2RlKGQpO1xuICAgICAgICBpZiAoaW5kZXggPT0gcGFyZW50LmNoaWxkQ291bnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGFmdGVyID0gcGFyZW50LmNoaWxkKGluZGV4KTs7IGFmdGVyID0gYWZ0ZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgaWYgKChhZnRlci5jaGlsZENvdW50ID09IDAgJiYgIWFmdGVyLmlubGluZUNvbnRlbnQpIHx8IGFmdGVyLmlzQXRvbSB8fCBhZnRlci50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgaWYgKGFmdGVyLmlubGluZUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbkNyZWF0ZSBhIGdhcCBjdXJzb3IgcGx1Z2luLiBXaGVuIGVuYWJsZWQsIHRoaXMgd2lsbCBjYXB0dXJlIGNsaWNrc1xubmVhciBhbmQgYXJyb3cta2V5LW1vdGlvbiBwYXN0IHBsYWNlcyB0aGF0IGRvbid0IGhhdmUgYSBub3JtYWxseVxuc2VsZWN0YWJsZSBwb3NpdGlvbiBuZWFyYnksIGFuZCBjcmVhdGUgYSBnYXAgY3Vyc29yIHNlbGVjdGlvbiBmb3JcbnRoZW0uIFRoZSBjdXJzb3IgaXMgZHJhd24gYXMgYW4gZWxlbWVudCB3aXRoIGNsYXNzXG5gUHJvc2VNaXJyb3ItZ2FwY3Vyc29yYC4gWW91IGNhbiBlaXRoZXIgaW5jbHVkZVxuYHN0eWxlL2dhcGN1cnNvci5jc3NgIGZyb20gdGhlIHBhY2thZ2UncyBkaXJlY3Rvcnkgb3IgYWRkIHlvdXIgb3duXG5zdHlsZXMgdG8gbWFrZSBpdCB2aXNpYmxlLlxuKi9cbmZ1bmN0aW9uIGdhcEN1cnNvcigpIHtcbiAgICByZXR1cm4gbmV3IFBsdWdpbih7XG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBkZWNvcmF0aW9uczogZHJhd0dhcEN1cnNvcixcbiAgICAgICAgICAgIGNyZWF0ZVNlbGVjdGlvbkJldHdlZW4oX3ZpZXcsICRhbmNob3IsICRoZWFkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRhbmNob3IucG9zID09ICRoZWFkLnBvcyAmJiBHYXBDdXJzb3IudmFsaWQoJGhlYWQpID8gbmV3IEdhcEN1cnNvcigkaGVhZCkgOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhbmRsZUNsaWNrLFxuICAgICAgICAgICAgaGFuZGxlS2V5RG93bixcbiAgICAgICAgICAgIGhhbmRsZURPTUV2ZW50czogeyBiZWZvcmVpbnB1dDogYmVmb3JlaW5wdXQgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5jb25zdCBoYW5kbGVLZXlEb3duID0ga2V5ZG93bkhhbmRsZXIoe1xuICAgIFwiQXJyb3dMZWZ0XCI6IGFycm93KFwiaG9yaXpcIiwgLTEpLFxuICAgIFwiQXJyb3dSaWdodFwiOiBhcnJvdyhcImhvcml6XCIsIDEpLFxuICAgIFwiQXJyb3dVcFwiOiBhcnJvdyhcInZlcnRcIiwgLTEpLFxuICAgIFwiQXJyb3dEb3duXCI6IGFycm93KFwidmVydFwiLCAxKVxufSk7XG5mdW5jdGlvbiBhcnJvdyhheGlzLCBkaXIpIHtcbiAgICBjb25zdCBkaXJTdHIgPSBheGlzID09IFwidmVydFwiID8gKGRpciA+IDAgPyBcImRvd25cIiA6IFwidXBcIikgOiAoZGlyID4gMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlLCBkaXNwYXRjaCwgdmlldykge1xuICAgICAgICBsZXQgc2VsID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgJHN0YXJ0ID0gZGlyID4gMCA/IHNlbC4kdG8gOiBzZWwuJGZyb20sIG11c3RNb3ZlID0gc2VsLmVtcHR5O1xuICAgICAgICBpZiAoc2VsIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbikge1xuICAgICAgICAgICAgaWYgKCF2aWV3LmVuZE9mVGV4dGJsb2NrKGRpclN0cikgfHwgJHN0YXJ0LmRlcHRoID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbXVzdE1vdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICRzdGFydCA9IHN0YXRlLmRvYy5yZXNvbHZlKGRpciA+IDAgPyAkc3RhcnQuYWZ0ZXIoKSA6ICRzdGFydC5iZWZvcmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0ICRmb3VuZCA9IEdhcEN1cnNvci5maW5kR2FwQ3Vyc29yRnJvbSgkc3RhcnQsIGRpciwgbXVzdE1vdmUpO1xuICAgICAgICBpZiAoISRmb3VuZClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuc2V0U2VsZWN0aW9uKG5ldyBHYXBDdXJzb3IoJGZvdW5kKSkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlQ2xpY2sodmlldywgcG9zLCBldmVudCkge1xuICAgIGlmICghdmlldyB8fCAhdmlldy5lZGl0YWJsZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCAkcG9zID0gdmlldy5zdGF0ZS5kb2MucmVzb2x2ZShwb3MpO1xuICAgIGlmICghR2FwQ3Vyc29yLnZhbGlkKCRwb3MpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgbGV0IGNsaWNrUG9zID0gdmlldy5wb3NBdENvb3Jkcyh7IGxlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WSB9KTtcbiAgICBpZiAoY2xpY2tQb3MgJiYgY2xpY2tQb3MuaW5zaWRlID4gLTEgJiYgTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUodmlldy5zdGF0ZS5kb2Mubm9kZUF0KGNsaWNrUG9zLmluc2lkZSkpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdmlldy5kaXNwYXRjaCh2aWV3LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgR2FwQ3Vyc29yKCRwb3MpKSk7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyBUaGlzIGlzIGEgaGFjayB0aGF0LCB3aGVuIGEgY29tcG9zaXRpb24gc3RhcnRzIHdoaWxlIGEgZ2FwIGN1cnNvclxuLy8gaXMgYWN0aXZlLCBxdWlja2x5IGNyZWF0ZXMgYW4gaW5saW5lIGNvbnRleHQgZm9yIHRoZSBjb21wb3NpdGlvbiB0b1xuLy8gaGFwcGVuIGluLCB0byBhdm9pZCBpdCBiZWluZyBhYm9ydGVkIGJ5IHRoZSBET00gc2VsZWN0aW9uIGJlaW5nXG4vLyBtb3ZlZCBpbnRvIGEgdmFsaWQgcG9zaXRpb24uXG5mdW5jdGlvbiBiZWZvcmVpbnB1dCh2aWV3LCBldmVudCkge1xuICAgIGlmIChldmVudC5pbnB1dFR5cGUgIT0gXCJpbnNlcnRDb21wb3NpdGlvblRleHRcIiB8fCAhKHZpZXcuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgR2FwQ3Vyc29yKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCB7ICRmcm9tIH0gPSB2aWV3LnN0YXRlLnNlbGVjdGlvbjtcbiAgICBsZXQgaW5zZXJ0ID0gJGZyb20ucGFyZW50LmNvbnRlbnRNYXRjaEF0KCRmcm9tLmluZGV4KCkpLmZpbmRXcmFwcGluZyh2aWV3LnN0YXRlLnNjaGVtYS5ub2Rlcy50ZXh0KTtcbiAgICBpZiAoIWluc2VydClcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBmcmFnID0gRnJhZ21lbnQuZW1wdHk7XG4gICAgZm9yIChsZXQgaSA9IGluc2VydC5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcbiAgICAgICAgZnJhZyA9IEZyYWdtZW50LmZyb20oaW5zZXJ0W2ldLmNyZWF0ZUFuZEZpbGwobnVsbCwgZnJhZykpO1xuICAgIGxldCB0ciA9IHZpZXcuc3RhdGUudHIucmVwbGFjZSgkZnJvbS5wb3MsICRmcm9tLnBvcywgbmV3IFNsaWNlKGZyYWcsIDAsIDApKTtcbiAgICB0ci5zZXRTZWxlY3Rpb24oVGV4dFNlbGVjdGlvbi5uZWFyKHRyLmRvYy5yZXNvbHZlKCRmcm9tLnBvcyArIDEpKSk7XG4gICAgdmlldy5kaXNwYXRjaCh0cik7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZHJhd0dhcEN1cnNvcihzdGF0ZSkge1xuICAgIGlmICghKHN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIEdhcEN1cnNvcikpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBub2RlLmNsYXNzTmFtZSA9IFwiUHJvc2VNaXJyb3ItZ2FwY3Vyc29yXCI7XG4gICAgcmV0dXJuIERlY29yYXRpb25TZXQuY3JlYXRlKHN0YXRlLmRvYywgW0RlY29yYXRpb24ud2lkZ2V0KHN0YXRlLnNlbGVjdGlvbi5oZWFkLCBub2RlLCB7IGtleTogXCJnYXBjdXJzb3JcIiB9KV0pO1xufVxuXG5leHBvcnQgeyBHYXBDdXJzb3IsIGdhcEN1cnNvciB9O1xuIiwiaW1wb3J0IHtcbiAgY2FsbE9yUmV0dXJuLFxuICBFeHRlbnNpb24sXG4gIGdldEV4dGVuc2lvbkZpZWxkLFxuICBQYXJlbnRDb25maWcsXG59IGZyb20gJ0B0aXB0YXAvY29yZSdcbmltcG9ydCB7IGdhcEN1cnNvciB9IGZyb20gJ0B0aXB0YXAvcG0vZ2FwY3Vyc29yJ1xuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBOb2RlQ29uZmlnPE9wdGlvbnMsIFN0b3JhZ2U+IHtcbiAgICAvKipcbiAgICAgKiBBbGxvdyBnYXAgY3Vyc29yXG4gICAgICovXG4gICAgYWxsb3dHYXBDdXJzb3I/OlxuICAgICAgfCBib29sZWFuXG4gICAgICB8IG51bGxcbiAgICAgIHwgKCh0aGlzOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogT3B0aW9ucyxcbiAgICAgICAgc3RvcmFnZTogU3RvcmFnZSxcbiAgICAgICAgcGFyZW50OiBQYXJlbnRDb25maWc8Tm9kZUNvbmZpZzxPcHRpb25zPj5bJ2FsbG93R2FwQ3Vyc29yJ10sXG4gICAgICB9KSA9PiBib29sZWFuIHwgbnVsbCksXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEdhcGN1cnNvciA9IEV4dGVuc2lvbi5jcmVhdGUoe1xuICBuYW1lOiAnZ2FwQ3Vyc29yJyxcblxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGdhcEN1cnNvcigpLFxuICAgIF1cbiAgfSxcblxuICBleHRlbmROb2RlU2NoZW1hKGV4dGVuc2lvbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICBuYW1lOiBleHRlbnNpb24ubmFtZSxcbiAgICAgIG9wdGlvbnM6IGV4dGVuc2lvbi5vcHRpb25zLFxuICAgICAgc3RvcmFnZTogZXh0ZW5zaW9uLnN0b3JhZ2UsXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93R2FwQ3Vyc29yOiBjYWxsT3JSZXR1cm4oZ2V0RXh0ZW5zaW9uRmllbGQoZXh0ZW5zaW9uLCAnYWxsb3dHYXBDdXJzb3InLCBjb250ZXh0KSkgPz8gbnVsbCxcbiAgICB9XG4gIH0sXG59KVxuIiwiaW1wb3J0IHsgbWVyZ2VBdHRyaWJ1dGVzLCBOb2RlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhcmRCcmVha09wdGlvbnMge1xuICBrZWVwTWFya3M6IGJvb2xlYW4sXG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxufVxuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgaGFyZEJyZWFrOiB7XG4gICAgICAvKipcbiAgICAgICAqIEFkZCBhIGhhcmQgYnJlYWtcbiAgICAgICAqL1xuICAgICAgc2V0SGFyZEJyZWFrOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgSGFyZEJyZWFrID0gTm9kZS5jcmVhdGU8SGFyZEJyZWFrT3B0aW9ucz4oe1xuICBuYW1lOiAnaGFyZEJyZWFrJyxcblxuICBhZGRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBrZWVwTWFya3M6IHRydWUsXG4gICAgICBIVE1MQXR0cmlidXRlczoge30sXG4gICAgfVxuICB9LFxuXG4gIGlubGluZTogdHJ1ZSxcblxuICBncm91cDogJ2lubGluZScsXG5cbiAgc2VsZWN0YWJsZTogZmFsc2UsXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7IHRhZzogJ2JyJyB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ2JyJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpXVxuICB9LFxuXG4gIHJlbmRlclRleHQoKSB7XG4gICAgcmV0dXJuICdcXG4nXG4gIH0sXG5cbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldEhhcmRCcmVhazogKCkgPT4gKHtcbiAgICAgICAgY29tbWFuZHMsXG4gICAgICAgIGNoYWluLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZWRpdG9yLFxuICAgICAgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuZmlyc3QoW1xuICAgICAgICAgICgpID0+IGNvbW1hbmRzLmV4aXRDb2RlKCksXG4gICAgICAgICAgKCkgPT4gY29tbWFuZHMuY29tbWFuZCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHNlbGVjdGlvbiwgc3RvcmVkTWFya3MgfSA9IHN0YXRlXG5cbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb24uJGZyb20ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsga2VlcE1hcmtzIH0gPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIGNvbnN0IHsgc3BsaXR0YWJsZU1hcmtzIH0gPSBlZGl0b3IuZXh0ZW5zaW9uTWFuYWdlclxuICAgICAgICAgICAgY29uc3QgbWFya3MgPSBzdG9yZWRNYXJrc1xuICAgICAgICAgICAgICB8fCAoc2VsZWN0aW9uLiR0by5wYXJlbnRPZmZzZXQgJiYgc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCkpXG5cbiAgICAgICAgICAgIHJldHVybiBjaGFpbigpXG4gICAgICAgICAgICAgIC5pbnNlcnRDb250ZW50KHsgdHlwZTogdGhpcy5uYW1lIH0pXG4gICAgICAgICAgICAgIC5jb21tYW5kKCh7IHRyLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3BhdGNoICYmIG1hcmtzICYmIGtlZXBNYXJrcykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRNYXJrcyA9IG1hcmtzXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIobWFyayA9PiBzcGxpdHRhYmxlTWFya3MuaW5jbHVkZXMobWFyay50eXBlLm5hbWUpKVxuXG4gICAgICAgICAgICAgICAgICB0ci5lbnN1cmVNYXJrcyhmaWx0ZXJlZE1hcmtzKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5ydW4oKVxuICAgICAgICAgIH0pLFxuICAgICAgICBdKVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNb2QtRW50ZXInOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5zZXRIYXJkQnJlYWsoKSxcbiAgICAgICdTaGlmdC1FbnRlcic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnNldEhhcmRCcmVhaygpLFxuICAgIH1cbiAgfSxcbn0pXG4iLCJpbXBvcnQgeyBtZXJnZUF0dHJpYnV0ZXMsIE5vZGUsIHRleHRibG9ja1R5cGVJbnB1dFJ1bGUgfSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCB0eXBlIExldmVsID0gMSB8IDIgfCAzIHwgNCB8IDUgfCA2XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhZGluZ09wdGlvbnMge1xuICBsZXZlbHM6IExldmVsW10sXG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxufVxuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgaGVhZGluZzoge1xuICAgICAgLyoqXG4gICAgICAgKiBTZXQgYSBoZWFkaW5nIG5vZGVcbiAgICAgICAqL1xuICAgICAgc2V0SGVhZGluZzogKGF0dHJpYnV0ZXM6IHsgbGV2ZWw6IExldmVsIH0pID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBhIGhlYWRpbmcgbm9kZVxuICAgICAgICovXG4gICAgICB0b2dnbGVIZWFkaW5nOiAoYXR0cmlidXRlczogeyBsZXZlbDogTGV2ZWwgfSkgPT4gUmV0dXJuVHlwZSxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEhlYWRpbmcgPSBOb2RlLmNyZWF0ZTxIZWFkaW5nT3B0aW9ucz4oe1xuICBuYW1lOiAnaGVhZGluZycsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGV2ZWxzOiBbMSwgMiwgMywgNCwgNSwgNl0sXG4gICAgICBIVE1MQXR0cmlidXRlczoge30sXG4gICAgfVxuICB9LFxuXG4gIGNvbnRlbnQ6ICdpbmxpbmUqJyxcblxuICBncm91cDogJ2Jsb2NrJyxcblxuICBkZWZpbmluZzogdHJ1ZSxcblxuICBhZGRBdHRyaWJ1dGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDoge1xuICAgICAgICBkZWZhdWx0OiAxLFxuICAgICAgICByZW5kZXJlZDogZmFsc2UsXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sZXZlbHNcbiAgICAgIC5tYXAoKGxldmVsOiBMZXZlbCkgPT4gKHtcbiAgICAgICAgdGFnOiBgaCR7bGV2ZWx9YCxcbiAgICAgICAgYXR0cnM6IHsgbGV2ZWwgfSxcbiAgICAgIH0pKVxuICB9LFxuXG4gIHJlbmRlckhUTUwoeyBub2RlLCBIVE1MQXR0cmlidXRlcyB9KSB7XG4gICAgY29uc3QgaGFzTGV2ZWwgPSB0aGlzLm9wdGlvbnMubGV2ZWxzLmluY2x1ZGVzKG5vZGUuYXR0cnMubGV2ZWwpXG4gICAgY29uc3QgbGV2ZWwgPSBoYXNMZXZlbFxuICAgICAgPyBub2RlLmF0dHJzLmxldmVsXG4gICAgICA6IHRoaXMub3B0aW9ucy5sZXZlbHNbMF1cblxuICAgIHJldHVybiBbYGgke2xldmVsfWAsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSwgMF1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0SGVhZGluZzogYXR0cmlidXRlcyA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmxldmVscy5pbmNsdWRlcyhhdHRyaWJ1dGVzLmxldmVsKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLnNldE5vZGUodGhpcy5uYW1lLCBhdHRyaWJ1dGVzKVxuICAgICAgfSxcbiAgICAgIHRvZ2dsZUhlYWRpbmc6IGF0dHJpYnV0ZXMgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5sZXZlbHMuaW5jbHVkZXMoYXR0cmlidXRlcy5sZXZlbCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb21tYW5kcy50b2dnbGVOb2RlKHRoaXMubmFtZSwgJ3BhcmFncmFwaCcsIGF0dHJpYnV0ZXMpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxldmVscy5yZWR1Y2UoKGl0ZW1zLCBsZXZlbCkgPT4gKHtcbiAgICAgIC4uLml0ZW1zLFxuICAgICAgLi4ue1xuICAgICAgICBbYE1vZC1BbHQtJHtsZXZlbH1gXTogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlSGVhZGluZyh7IGxldmVsIH0pLFxuICAgICAgfSxcbiAgICB9KSwge30pXG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxldmVscy5tYXAobGV2ZWwgPT4ge1xuICAgICAgcmV0dXJuIHRleHRibG9ja1R5cGVJbnB1dFJ1bGUoe1xuICAgICAgICBmaW5kOiBuZXcgUmVnRXhwKGBeKCN7MSwke2xldmVsfX0pXFxcXHMkYCksXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgZ2V0QXR0cmlidXRlczoge1xuICAgICAgICAgIGxldmVsLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9KVxuICB9LFxufSlcbiIsInZhciBHT09EX0xFQUZfU0laRSA9IDIwMDtcblxuLy8gOjogY2xhc3M8VD4gQSByb3BlIHNlcXVlbmNlIGlzIGEgcGVyc2lzdGVudCBzZXF1ZW5jZSBkYXRhIHN0cnVjdHVyZVxuLy8gdGhhdCBzdXBwb3J0cyBhcHBlbmRpbmcsIHByZXBlbmRpbmcsIGFuZCBzbGljaW5nIHdpdGhvdXQgZG9pbmcgYVxuLy8gZnVsbCBjb3B5LiBJdCBpcyByZXByZXNlbnRlZCBhcyBhIG1vc3RseS1iYWxhbmNlZCB0cmVlLlxudmFyIFJvcGVTZXF1ZW5jZSA9IGZ1bmN0aW9uIFJvcGVTZXF1ZW5jZSAoKSB7fTtcblxuUm9wZVNlcXVlbmNlLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQgKG90aGVyKSB7XG4gIGlmICghb3RoZXIubGVuZ3RoKSB7IHJldHVybiB0aGlzIH1cbiAgb3RoZXIgPSBSb3BlU2VxdWVuY2UuZnJvbShvdGhlcik7XG5cbiAgcmV0dXJuICghdGhpcy5sZW5ndGggJiYgb3RoZXIpIHx8XG4gICAgKG90aGVyLmxlbmd0aCA8IEdPT0RfTEVBRl9TSVpFICYmIHRoaXMubGVhZkFwcGVuZChvdGhlcikpIHx8XG4gICAgKHRoaXMubGVuZ3RoIDwgR09PRF9MRUFGX1NJWkUgJiYgb3RoZXIubGVhZlByZXBlbmQodGhpcykpIHx8XG4gICAgdGhpcy5hcHBlbmRJbm5lcihvdGhlcilcbn07XG5cbi8vIDo6ICh1bmlvbjxbVF0sIFJvcGVTZXF1ZW5jZTxUPj4pIOKGkiBSb3BlU2VxdWVuY2U8VD5cbi8vIFByZXBlbmQgYW4gYXJyYXkgb3Igb3RoZXIgcm9wZSB0byB0aGlzIG9uZSwgcmV0dXJuaW5nIGEgbmV3IHJvcGUuXG5Sb3BlU2VxdWVuY2UucHJvdG90eXBlLnByZXBlbmQgPSBmdW5jdGlvbiBwcmVwZW5kIChvdGhlcikge1xuICBpZiAoIW90aGVyLmxlbmd0aCkgeyByZXR1cm4gdGhpcyB9XG4gIHJldHVybiBSb3BlU2VxdWVuY2UuZnJvbShvdGhlcikuYXBwZW5kKHRoaXMpXG59O1xuXG5Sb3BlU2VxdWVuY2UucHJvdG90eXBlLmFwcGVuZElubmVyID0gZnVuY3Rpb24gYXBwZW5kSW5uZXIgKG90aGVyKSB7XG4gIHJldHVybiBuZXcgQXBwZW5kKHRoaXMsIG90aGVyKVxufTtcblxuLy8gOjogKD9udW1iZXIsID9udW1iZXIpIOKGkiBSb3BlU2VxdWVuY2U8VD5cbi8vIENyZWF0ZSBhIHJvcGUgcmVwZXNlbnRpbmcgYSBzdWItc2VxdWVuY2Ugb2YgdGhpcyByb3BlLlxuUm9wZVNlcXVlbmNlLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChmcm9tLCB0bykge1xuICAgIGlmICggZnJvbSA9PT0gdm9pZCAwICkgZnJvbSA9IDA7XG4gICAgaWYgKCB0byA9PT0gdm9pZCAwICkgdG8gPSB0aGlzLmxlbmd0aDtcblxuICBpZiAoZnJvbSA+PSB0bykgeyByZXR1cm4gUm9wZVNlcXVlbmNlLmVtcHR5IH1cbiAgcmV0dXJuIHRoaXMuc2xpY2VJbm5lcihNYXRoLm1heCgwLCBmcm9tKSwgTWF0aC5taW4odGhpcy5sZW5ndGgsIHRvKSlcbn07XG5cbi8vIDo6IChudW1iZXIpIOKGkiBUXG4vLyBSZXRyaWV2ZSB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gZnJvbSB0aGlzIHJvcGUuXG5Sb3BlU2VxdWVuY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAoaSkge1xuICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLmxlbmd0aCkgeyByZXR1cm4gdW5kZWZpbmVkIH1cbiAgcmV0dXJuIHRoaXMuZ2V0SW5uZXIoaSlcbn07XG5cbi8vIDo6ICgoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikg4oaSID9ib29sLCA/bnVtYmVyLCA/bnVtYmVyKVxuLy8gQ2FsbCB0aGUgZ2l2ZW4gZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBiZXR3ZWVuIHRoZSBnaXZlblxuLy8gaW5kaWNlcy4gVGhpcyB0ZW5kcyB0byBiZSBtb3JlIGVmZmljaWVudCB0aGFuIGxvb3Bpbmcgb3ZlciB0aGVcbi8vIGluZGljZXMgYW5kIGNhbGxpbmcgYGdldGAsIGJlY2F1c2UgaXQgZG9lc24ndCBoYXZlIHRvIGRlc2NlbmQgdGhlXG4vLyB0cmVlIGZvciBldmVyeSBlbGVtZW50LlxuUm9wZVNlcXVlbmNlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaCAoZiwgZnJvbSwgdG8pIHtcbiAgICBpZiAoIGZyb20gPT09IHZvaWQgMCApIGZyb20gPSAwO1xuICAgIGlmICggdG8gPT09IHZvaWQgMCApIHRvID0gdGhpcy5sZW5ndGg7XG5cbiAgaWYgKGZyb20gPD0gdG8pXG4gICAgeyB0aGlzLmZvckVhY2hJbm5lcihmLCBmcm9tLCB0bywgMCk7IH1cbiAgZWxzZVxuICAgIHsgdGhpcy5mb3JFYWNoSW52ZXJ0ZWRJbm5lcihmLCBmcm9tLCB0bywgMCk7IH1cbn07XG5cbi8vIDo6ICgoZWxlbWVudDogVCwgaW5kZXg6IG51bWJlcikg4oaSIFUsID9udW1iZXIsID9udW1iZXIpIOKGkiBbVV1cbi8vIE1hcCB0aGUgZ2l2ZW4gZnVuY3Rpb25zIG92ZXIgdGhlIGVsZW1lbnRzIG9mIHRoZSByb3BlLCBwcm9kdWNpbmdcbi8vIGEgZmxhdCBhcnJheS5cblJvcGVTZXF1ZW5jZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwIChmLCBmcm9tLCB0bykge1xuICAgIGlmICggZnJvbSA9PT0gdm9pZCAwICkgZnJvbSA9IDA7XG4gICAgaWYgKCB0byA9PT0gdm9pZCAwICkgdG8gPSB0aGlzLmxlbmd0aDtcblxuICB2YXIgcmVzdWx0ID0gW107XG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZWx0LCBpKSB7IHJldHVybiByZXN1bHQucHVzaChmKGVsdCwgaSkpOyB9LCBmcm9tLCB0byk7XG4gIHJldHVybiByZXN1bHRcbn07XG5cbi8vIDo6ICg/dW5pb248W1RdLCBSb3BlU2VxdWVuY2U8VD4+KSDihpIgUm9wZVNlcXVlbmNlPFQ+XG4vLyBDcmVhdGUgYSByb3BlIHJlcHJlc2VudGluZyB0aGUgZ2l2ZW4gYXJyYXksIG9yIHJldHVybiB0aGUgcm9wZVxuLy8gaXRzZWxmIGlmIGEgcm9wZSB3YXMgZ2l2ZW4uXG5Sb3BlU2VxdWVuY2UuZnJvbSA9IGZ1bmN0aW9uIGZyb20gKHZhbHVlcykge1xuICBpZiAodmFsdWVzIGluc3RhbmNlb2YgUm9wZVNlcXVlbmNlKSB7IHJldHVybiB2YWx1ZXMgfVxuICByZXR1cm4gdmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPyBuZXcgTGVhZih2YWx1ZXMpIDogUm9wZVNlcXVlbmNlLmVtcHR5XG59O1xuXG52YXIgTGVhZiA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFJvcGVTZXF1ZW5jZSkge1xuICBmdW5jdGlvbiBMZWFmKHZhbHVlcykge1xuICAgIFJvcGVTZXF1ZW5jZS5jYWxsKHRoaXMpO1xuICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICB9XG5cbiAgaWYgKCBSb3BlU2VxdWVuY2UgKSBMZWFmLl9fcHJvdG9fXyA9IFJvcGVTZXF1ZW5jZTtcbiAgTGVhZi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKCBSb3BlU2VxdWVuY2UgJiYgUm9wZVNlcXVlbmNlLnByb3RvdHlwZSApO1xuICBMZWFmLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExlYWY7XG5cbiAgdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsgbGVuZ3RoOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9LGRlcHRoOiB7IGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH07XG5cbiAgTGVhZi5wcm90b3R5cGUuZmxhdHRlbiA9IGZ1bmN0aW9uIGZsYXR0ZW4gKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlc1xuICB9O1xuXG4gIExlYWYucHJvdG90eXBlLnNsaWNlSW5uZXIgPSBmdW5jdGlvbiBzbGljZUlubmVyIChmcm9tLCB0bykge1xuICAgIGlmIChmcm9tID09IDAgJiYgdG8gPT0gdGhpcy5sZW5ndGgpIHsgcmV0dXJuIHRoaXMgfVxuICAgIHJldHVybiBuZXcgTGVhZih0aGlzLnZhbHVlcy5zbGljZShmcm9tLCB0bykpXG4gIH07XG5cbiAgTGVhZi5wcm90b3R5cGUuZ2V0SW5uZXIgPSBmdW5jdGlvbiBnZXRJbm5lciAoaSkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXVxuICB9O1xuXG4gIExlYWYucHJvdG90eXBlLmZvckVhY2hJbm5lciA9IGZ1bmN0aW9uIGZvckVhY2hJbm5lciAoZiwgZnJvbSwgdG8sIHN0YXJ0KSB7XG4gICAgZm9yICh2YXIgaSA9IGZyb207IGkgPCB0bzsgaSsrKVxuICAgICAgeyBpZiAoZih0aGlzLnZhbHVlc1tpXSwgc3RhcnQgKyBpKSA9PT0gZmFsc2UpIHsgcmV0dXJuIGZhbHNlIH0gfVxuICB9O1xuXG4gIExlYWYucHJvdG90eXBlLmZvckVhY2hJbnZlcnRlZElubmVyID0gZnVuY3Rpb24gZm9yRWFjaEludmVydGVkSW5uZXIgKGYsIGZyb20sIHRvLCBzdGFydCkge1xuICAgIGZvciAodmFyIGkgPSBmcm9tIC0gMTsgaSA+PSB0bzsgaS0tKVxuICAgICAgeyBpZiAoZih0aGlzLnZhbHVlc1tpXSwgc3RhcnQgKyBpKSA9PT0gZmFsc2UpIHsgcmV0dXJuIGZhbHNlIH0gfVxuICB9O1xuXG4gIExlYWYucHJvdG90eXBlLmxlYWZBcHBlbmQgPSBmdW5jdGlvbiBsZWFmQXBwZW5kIChvdGhlcikge1xuICAgIGlmICh0aGlzLmxlbmd0aCArIG90aGVyLmxlbmd0aCA8PSBHT09EX0xFQUZfU0laRSlcbiAgICAgIHsgcmV0dXJuIG5ldyBMZWFmKHRoaXMudmFsdWVzLmNvbmNhdChvdGhlci5mbGF0dGVuKCkpKSB9XG4gIH07XG5cbiAgTGVhZi5wcm90b3R5cGUubGVhZlByZXBlbmQgPSBmdW5jdGlvbiBsZWFmUHJlcGVuZCAob3RoZXIpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggKyBvdGhlci5sZW5ndGggPD0gR09PRF9MRUFGX1NJWkUpXG4gICAgICB7IHJldHVybiBuZXcgTGVhZihvdGhlci5mbGF0dGVuKCkuY29uY2F0KHRoaXMudmFsdWVzKSkgfVxuICB9O1xuXG4gIHByb3RvdHlwZUFjY2Vzc29ycy5sZW5ndGguZ2V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy52YWx1ZXMubGVuZ3RoIH07XG5cbiAgcHJvdG90eXBlQWNjZXNzb3JzLmRlcHRoLmdldCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyggTGVhZi5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyApO1xuXG4gIHJldHVybiBMZWFmO1xufShSb3BlU2VxdWVuY2UpKTtcblxuLy8gOjogUm9wZVNlcXVlbmNlXG4vLyBUaGUgZW1wdHkgcm9wZSBzZXF1ZW5jZS5cblJvcGVTZXF1ZW5jZS5lbXB0eSA9IG5ldyBMZWFmKFtdKTtcblxudmFyIEFwcGVuZCA9IC8qQF9fUFVSRV9fKi8oZnVuY3Rpb24gKFJvcGVTZXF1ZW5jZSkge1xuICBmdW5jdGlvbiBBcHBlbmQobGVmdCwgcmlnaHQpIHtcbiAgICBSb3BlU2VxdWVuY2UuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICB0aGlzLmxlbmd0aCA9IGxlZnQubGVuZ3RoICsgcmlnaHQubGVuZ3RoO1xuICAgIHRoaXMuZGVwdGggPSBNYXRoLm1heChsZWZ0LmRlcHRoLCByaWdodC5kZXB0aCkgKyAxO1xuICB9XG5cbiAgaWYgKCBSb3BlU2VxdWVuY2UgKSBBcHBlbmQuX19wcm90b19fID0gUm9wZVNlcXVlbmNlO1xuICBBcHBlbmQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSggUm9wZVNlcXVlbmNlICYmIFJvcGVTZXF1ZW5jZS5wcm90b3R5cGUgKTtcbiAgQXBwZW5kLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFwcGVuZDtcblxuICBBcHBlbmQucHJvdG90eXBlLmZsYXR0ZW4gPSBmdW5jdGlvbiBmbGF0dGVuICgpIHtcbiAgICByZXR1cm4gdGhpcy5sZWZ0LmZsYXR0ZW4oKS5jb25jYXQodGhpcy5yaWdodC5mbGF0dGVuKCkpXG4gIH07XG5cbiAgQXBwZW5kLnByb3RvdHlwZS5nZXRJbm5lciA9IGZ1bmN0aW9uIGdldElubmVyIChpKSB7XG4gICAgcmV0dXJuIGkgPCB0aGlzLmxlZnQubGVuZ3RoID8gdGhpcy5sZWZ0LmdldChpKSA6IHRoaXMucmlnaHQuZ2V0KGkgLSB0aGlzLmxlZnQubGVuZ3RoKVxuICB9O1xuXG4gIEFwcGVuZC5wcm90b3R5cGUuZm9yRWFjaElubmVyID0gZnVuY3Rpb24gZm9yRWFjaElubmVyIChmLCBmcm9tLCB0bywgc3RhcnQpIHtcbiAgICB2YXIgbGVmdExlbiA9IHRoaXMubGVmdC5sZW5ndGg7XG4gICAgaWYgKGZyb20gPCBsZWZ0TGVuICYmXG4gICAgICAgIHRoaXMubGVmdC5mb3JFYWNoSW5uZXIoZiwgZnJvbSwgTWF0aC5taW4odG8sIGxlZnRMZW4pLCBzdGFydCkgPT09IGZhbHNlKVxuICAgICAgeyByZXR1cm4gZmFsc2UgfVxuICAgIGlmICh0byA+IGxlZnRMZW4gJiZcbiAgICAgICAgdGhpcy5yaWdodC5mb3JFYWNoSW5uZXIoZiwgTWF0aC5tYXgoZnJvbSAtIGxlZnRMZW4sIDApLCBNYXRoLm1pbih0aGlzLmxlbmd0aCwgdG8pIC0gbGVmdExlbiwgc3RhcnQgKyBsZWZ0TGVuKSA9PT0gZmFsc2UpXG4gICAgICB7IHJldHVybiBmYWxzZSB9XG4gIH07XG5cbiAgQXBwZW5kLnByb3RvdHlwZS5mb3JFYWNoSW52ZXJ0ZWRJbm5lciA9IGZ1bmN0aW9uIGZvckVhY2hJbnZlcnRlZElubmVyIChmLCBmcm9tLCB0bywgc3RhcnQpIHtcbiAgICB2YXIgbGVmdExlbiA9IHRoaXMubGVmdC5sZW5ndGg7XG4gICAgaWYgKGZyb20gPiBsZWZ0TGVuICYmXG4gICAgICAgIHRoaXMucmlnaHQuZm9yRWFjaEludmVydGVkSW5uZXIoZiwgZnJvbSAtIGxlZnRMZW4sIE1hdGgubWF4KHRvLCBsZWZ0TGVuKSAtIGxlZnRMZW4sIHN0YXJ0ICsgbGVmdExlbikgPT09IGZhbHNlKVxuICAgICAgeyByZXR1cm4gZmFsc2UgfVxuICAgIGlmICh0byA8IGxlZnRMZW4gJiZcbiAgICAgICAgdGhpcy5sZWZ0LmZvckVhY2hJbnZlcnRlZElubmVyKGYsIE1hdGgubWluKGZyb20sIGxlZnRMZW4pLCB0bywgc3RhcnQpID09PSBmYWxzZSlcbiAgICAgIHsgcmV0dXJuIGZhbHNlIH1cbiAgfTtcblxuICBBcHBlbmQucHJvdG90eXBlLnNsaWNlSW5uZXIgPSBmdW5jdGlvbiBzbGljZUlubmVyIChmcm9tLCB0bykge1xuICAgIGlmIChmcm9tID09IDAgJiYgdG8gPT0gdGhpcy5sZW5ndGgpIHsgcmV0dXJuIHRoaXMgfVxuICAgIHZhciBsZWZ0TGVuID0gdGhpcy5sZWZ0Lmxlbmd0aDtcbiAgICBpZiAodG8gPD0gbGVmdExlbikgeyByZXR1cm4gdGhpcy5sZWZ0LnNsaWNlKGZyb20sIHRvKSB9XG4gICAgaWYgKGZyb20gPj0gbGVmdExlbikgeyByZXR1cm4gdGhpcy5yaWdodC5zbGljZShmcm9tIC0gbGVmdExlbiwgdG8gLSBsZWZ0TGVuKSB9XG4gICAgcmV0dXJuIHRoaXMubGVmdC5zbGljZShmcm9tLCBsZWZ0TGVuKS5hcHBlbmQodGhpcy5yaWdodC5zbGljZSgwLCB0byAtIGxlZnRMZW4pKVxuICB9O1xuXG4gIEFwcGVuZC5wcm90b3R5cGUubGVhZkFwcGVuZCA9IGZ1bmN0aW9uIGxlYWZBcHBlbmQgKG90aGVyKSB7XG4gICAgdmFyIGlubmVyID0gdGhpcy5yaWdodC5sZWFmQXBwZW5kKG90aGVyKTtcbiAgICBpZiAoaW5uZXIpIHsgcmV0dXJuIG5ldyBBcHBlbmQodGhpcy5sZWZ0LCBpbm5lcikgfVxuICB9O1xuXG4gIEFwcGVuZC5wcm90b3R5cGUubGVhZlByZXBlbmQgPSBmdW5jdGlvbiBsZWFmUHJlcGVuZCAob3RoZXIpIHtcbiAgICB2YXIgaW5uZXIgPSB0aGlzLmxlZnQubGVhZlByZXBlbmQob3RoZXIpO1xuICAgIGlmIChpbm5lcikgeyByZXR1cm4gbmV3IEFwcGVuZChpbm5lciwgdGhpcy5yaWdodCkgfVxuICB9O1xuXG4gIEFwcGVuZC5wcm90b3R5cGUuYXBwZW5kSW5uZXIgPSBmdW5jdGlvbiBhcHBlbmRJbm5lciAob3RoZXIpIHtcbiAgICBpZiAodGhpcy5sZWZ0LmRlcHRoID49IE1hdGgubWF4KHRoaXMucmlnaHQuZGVwdGgsIG90aGVyLmRlcHRoKSArIDEpXG4gICAgICB7IHJldHVybiBuZXcgQXBwZW5kKHRoaXMubGVmdCwgbmV3IEFwcGVuZCh0aGlzLnJpZ2h0LCBvdGhlcikpIH1cbiAgICByZXR1cm4gbmV3IEFwcGVuZCh0aGlzLCBvdGhlcilcbiAgfTtcblxuICByZXR1cm4gQXBwZW5kO1xufShSb3BlU2VxdWVuY2UpKTtcblxuZXhwb3J0IGRlZmF1bHQgUm9wZVNlcXVlbmNlO1xuIiwiaW1wb3J0IFJvcGVTZXF1ZW5jZSBmcm9tICdyb3BlLXNlcXVlbmNlJztcbmltcG9ydCB7IE1hcHBpbmcgfSBmcm9tICdwcm9zZW1pcnJvci10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgUGx1Z2luS2V5LCBQbHVnaW4gfSBmcm9tICdwcm9zZW1pcnJvci1zdGF0ZSc7XG5cbi8vIFByb3NlTWlycm9yJ3MgaGlzdG9yeSBpc24ndCBzaW1wbHkgYSB3YXkgdG8gcm9sbCBiYWNrIHRvIGEgcHJldmlvdXNcbi8vIHN0YXRlLCBiZWNhdXNlIFByb3NlTWlycm9yIHN1cHBvcnRzIGFwcGx5aW5nIGNoYW5nZXMgd2l0aG91dCBhZGRpbmdcbi8vIHRoZW0gdG8gdGhlIGhpc3RvcnkgKGZvciBleGFtcGxlIGR1cmluZyBjb2xsYWJvcmF0aW9uKS5cbi8vXG4vLyBUbyB0aGlzIGVuZCwgZWFjaCAnQnJhbmNoJyAob25lIGZvciB0aGUgdW5kbyBoaXN0b3J5IGFuZCBvbmUgZm9yXG4vLyB0aGUgcmVkbyBoaXN0b3J5KSBrZWVwcyBhbiBhcnJheSBvZiAnSXRlbXMnLCB3aGljaCBjYW4gb3B0aW9uYWxseVxuLy8gaG9sZCBhIHN0ZXAgKGFuIGFjdHVhbCB1bmRvYWJsZSBjaGFuZ2UpLCBhbmQgYWx3YXlzIGhvbGQgYSBwb3NpdGlvblxuLy8gbWFwICh3aGljaCBpcyBuZWVkZWQgdG8gbW92ZSBjaGFuZ2VzIGJlbG93IHRoZW0gdG8gYXBwbHkgdG8gdGhlXG4vLyBjdXJyZW50IGRvY3VtZW50KS5cbi8vXG4vLyBBbiBpdGVtIHRoYXQgaGFzIGJvdGggYSBzdGVwIGFuZCBhIHNlbGVjdGlvbiBib29rbWFyayBpcyB0aGUgc3RhcnRcbi8vIG9mIGFuICdldmVudCcg4oCUIGEgZ3JvdXAgb2YgY2hhbmdlcyB0aGF0IHdpbGwgYmUgdW5kb25lIG9yIHJlZG9uZSBhdFxuLy8gb25jZS4gKEl0IHN0b3JlcyBvbmx5IHRoZSBib29rbWFyaywgc2luY2UgdGhhdCB3YXkgd2UgZG9uJ3QgaGF2ZSB0b1xuLy8gcHJvdmlkZSBhIGRvY3VtZW50IHVudGlsIHRoZSBzZWxlY3Rpb24gaXMgYWN0dWFsbHkgYXBwbGllZCwgd2hpY2hcbi8vIGlzIHVzZWZ1bCB3aGVuIGNvbXByZXNzaW5nLilcbi8vIFVzZWQgdG8gc2NoZWR1bGUgaGlzdG9yeSBjb21wcmVzc2lvblxuY29uc3QgbWF4X2VtcHR5X2l0ZW1zID0gNTAwO1xuY2xhc3MgQnJhbmNoIHtcbiAgICBjb25zdHJ1Y3RvcihpdGVtcywgZXZlbnRDb3VudCkge1xuICAgICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgICAgIHRoaXMuZXZlbnRDb3VudCA9IGV2ZW50Q291bnQ7XG4gICAgfVxuICAgIC8vIFBvcCB0aGUgbGF0ZXN0IGV2ZW50IG9mZiB0aGUgYnJhbmNoJ3MgaGlzdG9yeSBhbmQgYXBwbHkgaXRcbiAgICAvLyB0byBhIGRvY3VtZW50IHRyYW5zZm9ybS5cbiAgICBwb3BFdmVudChzdGF0ZSwgcHJlc2VydmVJdGVtcykge1xuICAgICAgICBpZiAodGhpcy5ldmVudENvdW50ID09IDApXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGVuZCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICBmb3IgKDs7IGVuZC0tKSB7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHRoaXMuaXRlbXMuZ2V0KGVuZCAtIDEpO1xuICAgICAgICAgICAgaWYgKG5leHQuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgLS1lbmQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlbWFwLCBtYXBGcm9tO1xuICAgICAgICBpZiAocHJlc2VydmVJdGVtcykge1xuICAgICAgICAgICAgcmVtYXAgPSB0aGlzLnJlbWFwcGluZyhlbmQsIHRoaXMuaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIG1hcEZyb20gPSByZW1hcC5tYXBzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gc3RhdGUudHI7XG4gICAgICAgIGxldCBzZWxlY3Rpb24sIHJlbWFpbmluZztcbiAgICAgICAgbGV0IGFkZEFmdGVyID0gW10sIGFkZEJlZm9yZSA9IFtdO1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghaXRlbS5zdGVwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1hcCkge1xuICAgICAgICAgICAgICAgICAgICByZW1hcCA9IHRoaXMucmVtYXBwaW5nKGVuZCwgaSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBtYXBGcm9tID0gcmVtYXAubWFwcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1hcEZyb20tLTtcbiAgICAgICAgICAgICAgICBhZGRCZWZvcmUucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtYXApIHtcbiAgICAgICAgICAgICAgICBhZGRCZWZvcmUucHVzaChuZXcgSXRlbShpdGVtLm1hcCkpO1xuICAgICAgICAgICAgICAgIGxldCBzdGVwID0gaXRlbS5zdGVwLm1hcChyZW1hcC5zbGljZShtYXBGcm9tKSksIG1hcDtcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCAmJiB0cmFuc2Zvcm0ubWF5YmVTdGVwKHN0ZXApLmRvYykge1xuICAgICAgICAgICAgICAgICAgICBtYXAgPSB0cmFuc2Zvcm0ubWFwcGluZy5tYXBzW3RyYW5zZm9ybS5tYXBwaW5nLm1hcHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGFkZEFmdGVyLnB1c2gobmV3IEl0ZW0obWFwLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgYWRkQWZ0ZXIubGVuZ3RoICsgYWRkQmVmb3JlLmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXBGcm9tLS07XG4gICAgICAgICAgICAgICAgaWYgKG1hcClcbiAgICAgICAgICAgICAgICAgICAgcmVtYXAuYXBwZW5kTWFwKG1hcCwgbWFwRnJvbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ubWF5YmVTdGVwKGl0ZW0uc3RlcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb24gPSByZW1hcCA/IGl0ZW0uc2VsZWN0aW9uLm1hcChyZW1hcC5zbGljZShtYXBGcm9tKSkgOiBpdGVtLnNlbGVjdGlvbjtcbiAgICAgICAgICAgICAgICByZW1haW5pbmcgPSBuZXcgQnJhbmNoKHRoaXMuaXRlbXMuc2xpY2UoMCwgZW5kKS5hcHBlbmQoYWRkQmVmb3JlLnJldmVyc2UoKS5jb25jYXQoYWRkQWZ0ZXIpKSwgdGhpcy5ldmVudENvdW50IC0gMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLml0ZW1zLmxlbmd0aCwgMCk7XG4gICAgICAgIHJldHVybiB7IHJlbWFpbmluZzogcmVtYWluaW5nLCB0cmFuc2Zvcm0sIHNlbGVjdGlvbjogc2VsZWN0aW9uIH07XG4gICAgfVxuICAgIC8vIENyZWF0ZSBhIG5ldyBicmFuY2ggd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIGFkZGVkLlxuICAgIGFkZFRyYW5zZm9ybSh0cmFuc2Zvcm0sIHNlbGVjdGlvbiwgaGlzdE9wdGlvbnMsIHByZXNlcnZlSXRlbXMpIHtcbiAgICAgICAgbGV0IG5ld0l0ZW1zID0gW10sIGV2ZW50Q291bnQgPSB0aGlzLmV2ZW50Q291bnQ7XG4gICAgICAgIGxldCBvbGRJdGVtcyA9IHRoaXMuaXRlbXMsIGxhc3RJdGVtID0gIXByZXNlcnZlSXRlbXMgJiYgb2xkSXRlbXMubGVuZ3RoID8gb2xkSXRlbXMuZ2V0KG9sZEl0ZW1zLmxlbmd0aCAtIDEpIDogbnVsbDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2Zvcm0uc3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBzdGVwID0gdHJhbnNmb3JtLnN0ZXBzW2ldLmludmVydCh0cmFuc2Zvcm0uZG9jc1tpXSk7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBJdGVtKHRyYW5zZm9ybS5tYXBwaW5nLm1hcHNbaV0sIHN0ZXAsIHNlbGVjdGlvbiksIG1lcmdlZDtcbiAgICAgICAgICAgIGlmIChtZXJnZWQgPSBsYXN0SXRlbSAmJiBsYXN0SXRlbS5tZXJnZShpdGVtKSkge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBtZXJnZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnBvcCgpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgb2xkSXRlbXMgPSBvbGRJdGVtcy5zbGljZSgwLCBvbGRJdGVtcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRDb3VudCsrO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcHJlc2VydmVJdGVtcylcbiAgICAgICAgICAgICAgICBsYXN0SXRlbSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG92ZXJmbG93ID0gZXZlbnRDb3VudCAtIGhpc3RPcHRpb25zLmRlcHRoO1xuICAgICAgICBpZiAob3ZlcmZsb3cgPiBERVBUSF9PVkVSRkxPVykge1xuICAgICAgICAgICAgb2xkSXRlbXMgPSBjdXRPZmZFdmVudHMob2xkSXRlbXMsIG92ZXJmbG93KTtcbiAgICAgICAgICAgIGV2ZW50Q291bnQgLT0gb3ZlcmZsb3c7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCcmFuY2gob2xkSXRlbXMuYXBwZW5kKG5ld0l0ZW1zKSwgZXZlbnRDb3VudCk7XG4gICAgfVxuICAgIHJlbWFwcGluZyhmcm9tLCB0bykge1xuICAgICAgICBsZXQgbWFwcyA9IG5ldyBNYXBwaW5nO1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIGxldCBtaXJyb3JQb3MgPSBpdGVtLm1pcnJvck9mZnNldCAhPSBudWxsICYmIGkgLSBpdGVtLm1pcnJvck9mZnNldCA+PSBmcm9tXG4gICAgICAgICAgICAgICAgPyBtYXBzLm1hcHMubGVuZ3RoIC0gaXRlbS5taXJyb3JPZmZzZXQgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBtYXBzLmFwcGVuZE1hcChpdGVtLm1hcCwgbWlycm9yUG9zKTtcbiAgICAgICAgfSwgZnJvbSwgdG8pO1xuICAgICAgICByZXR1cm4gbWFwcztcbiAgICB9XG4gICAgYWRkTWFwcyhhcnJheSkge1xuICAgICAgICBpZiAodGhpcy5ldmVudENvdW50ID09IDApXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBCcmFuY2godGhpcy5pdGVtcy5hcHBlbmQoYXJyYXkubWFwKG1hcCA9PiBuZXcgSXRlbShtYXApKSksIHRoaXMuZXZlbnRDb3VudCk7XG4gICAgfVxuICAgIC8vIFdoZW4gdGhlIGNvbGxhYiBtb2R1bGUgcmVjZWl2ZXMgcmVtb3RlIGNoYW5nZXMsIHRoZSBoaXN0b3J5IGhhc1xuICAgIC8vIHRvIGtub3cgYWJvdXQgdGhvc2UsIHNvIHRoYXQgaXQgY2FuIGFkanVzdCB0aGUgc3RlcHMgdGhhdCB3ZXJlXG4gICAgLy8gcmViYXNlZCBvbiB0b3Agb2YgdGhlIHJlbW90ZSBjaGFuZ2VzLCBhbmQgaW5jbHVkZSB0aGUgcG9zaXRpb25cbiAgICAvLyBtYXBzIGZvciB0aGUgcmVtb3RlIGNoYW5nZXMgaW4gaXRzIGFycmF5IG9mIGl0ZW1zLlxuICAgIHJlYmFzZWQocmViYXNlZFRyYW5zZm9ybSwgcmViYXNlZENvdW50KSB7XG4gICAgICAgIGlmICghdGhpcy5ldmVudENvdW50KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCByZWJhc2VkSXRlbXMgPSBbXSwgc3RhcnQgPSBNYXRoLm1heCgwLCB0aGlzLml0ZW1zLmxlbmd0aCAtIHJlYmFzZWRDb3VudCk7XG4gICAgICAgIGxldCBtYXBwaW5nID0gcmViYXNlZFRyYW5zZm9ybS5tYXBwaW5nO1xuICAgICAgICBsZXQgbmV3VW50aWwgPSByZWJhc2VkVHJhbnNmb3JtLnN0ZXBzLmxlbmd0aDtcbiAgICAgICAgbGV0IGV2ZW50Q291bnQgPSB0aGlzLmV2ZW50Q291bnQ7XG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHsgaWYgKGl0ZW0uc2VsZWN0aW9uKVxuICAgICAgICAgICAgZXZlbnRDb3VudC0tOyB9LCBzdGFydCk7XG4gICAgICAgIGxldCBpUmViYXNlZCA9IHJlYmFzZWRDb3VudDtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgbGV0IHBvcyA9IG1hcHBpbmcuZ2V0TWlycm9yKC0taVJlYmFzZWQpO1xuICAgICAgICAgICAgaWYgKHBvcyA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIG5ld1VudGlsID0gTWF0aC5taW4obmV3VW50aWwsIHBvcyk7XG4gICAgICAgICAgICBsZXQgbWFwID0gbWFwcGluZy5tYXBzW3Bvc107XG4gICAgICAgICAgICBpZiAoaXRlbS5zdGVwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0ZXAgPSByZWJhc2VkVHJhbnNmb3JtLnN0ZXBzW3Bvc10uaW52ZXJ0KHJlYmFzZWRUcmFuc2Zvcm0uZG9jc1twb3NdKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gaXRlbS5zZWxlY3Rpb24gJiYgaXRlbS5zZWxlY3Rpb24ubWFwKG1hcHBpbmcuc2xpY2UoaVJlYmFzZWQgKyAxLCBwb3MpKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICBldmVudENvdW50Kys7XG4gICAgICAgICAgICAgICAgcmViYXNlZEl0ZW1zLnB1c2gobmV3IEl0ZW0obWFwLCBzdGVwLCBzZWxlY3Rpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlYmFzZWRJdGVtcy5wdXNoKG5ldyBJdGVtKG1hcCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBzdGFydCk7XG4gICAgICAgIGxldCBuZXdNYXBzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSByZWJhc2VkQ291bnQ7IGkgPCBuZXdVbnRpbDsgaSsrKVxuICAgICAgICAgICAgbmV3TWFwcy5wdXNoKG5ldyBJdGVtKG1hcHBpbmcubWFwc1tpXSkpO1xuICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLml0ZW1zLnNsaWNlKDAsIHN0YXJ0KS5hcHBlbmQobmV3TWFwcykuYXBwZW5kKHJlYmFzZWRJdGVtcyk7XG4gICAgICAgIGxldCBicmFuY2ggPSBuZXcgQnJhbmNoKGl0ZW1zLCBldmVudENvdW50KTtcbiAgICAgICAgaWYgKGJyYW5jaC5lbXB0eUl0ZW1Db3VudCgpID4gbWF4X2VtcHR5X2l0ZW1zKVxuICAgICAgICAgICAgYnJhbmNoID0gYnJhbmNoLmNvbXByZXNzKHRoaXMuaXRlbXMubGVuZ3RoIC0gcmViYXNlZEl0ZW1zLmxlbmd0aCk7XG4gICAgICAgIHJldHVybiBicmFuY2g7XG4gICAgfVxuICAgIGVtcHR5SXRlbUNvdW50KCkge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGlmICghaXRlbS5zdGVwKVxuICAgICAgICAgICAgY291bnQrKzsgfSk7XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG4gICAgLy8gQ29tcHJlc3NpbmcgYSBicmFuY2ggbWVhbnMgcmV3cml0aW5nIGl0IHRvIHB1c2ggdGhlIGFpciAobWFwLW9ubHlcbiAgICAvLyBpdGVtcykgb3V0LiBEdXJpbmcgY29sbGFib3JhdGlvbiwgdGhlc2UgbmF0dXJhbGx5IGFjY3VtdWxhdGVcbiAgICAvLyBiZWNhdXNlIGVhY2ggcmVtb3RlIGNoYW5nZSBhZGRzIG9uZS4gVGhlIGB1cHRvYCBhcmd1bWVudCBpcyB1c2VkXG4gICAgLy8gdG8gZW5zdXJlIHRoYXQgb25seSB0aGUgaXRlbXMgYmVsb3cgYSBnaXZlbiBsZXZlbCBhcmUgY29tcHJlc3NlZCxcbiAgICAvLyBiZWNhdXNlIGByZWJhc2VkYCByZWxpZXMgb24gYSBjbGVhbiwgdW50b3VjaGVkIHNldCBvZiBpdGVtcyBpblxuICAgIC8vIG9yZGVyIHRvIGFzc29jaWF0ZSBvbGQgaXRlbXMgd2l0aCByZWJhc2VkIHN0ZXBzLlxuICAgIGNvbXByZXNzKHVwdG8gPSB0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICBsZXQgcmVtYXAgPSB0aGlzLnJlbWFwcGluZygwLCB1cHRvKSwgbWFwRnJvbSA9IHJlbWFwLm1hcHMubGVuZ3RoO1xuICAgICAgICBsZXQgaXRlbXMgPSBbXSwgZXZlbnRzID0gMDtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaSA+PSB1cHRvKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50cysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS5zdGVwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0ZXAgPSBpdGVtLnN0ZXAubWFwKHJlbWFwLnNsaWNlKG1hcEZyb20pKSwgbWFwID0gc3RlcCAmJiBzdGVwLmdldE1hcCgpO1xuICAgICAgICAgICAgICAgIG1hcEZyb20tLTtcbiAgICAgICAgICAgICAgICBpZiAobWFwKVxuICAgICAgICAgICAgICAgICAgICByZW1hcC5hcHBlbmRNYXAobWFwLCBtYXBGcm9tKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gaXRlbS5zZWxlY3Rpb24gJiYgaXRlbS5zZWxlY3Rpb24ubWFwKHJlbWFwLnNsaWNlKG1hcEZyb20pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cysrO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SXRlbSA9IG5ldyBJdGVtKG1hcC5pbnZlcnQoKSwgc3RlcCwgc2VsZWN0aW9uKSwgbWVyZ2VkLCBsYXN0ID0gaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lcmdlZCA9IGl0ZW1zLmxlbmd0aCAmJiBpdGVtc1tsYXN0XS5tZXJnZShuZXdJdGVtKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zW2xhc3RdID0gbWVyZ2VkO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKG5ld0l0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGl0ZW0ubWFwKSB7XG4gICAgICAgICAgICAgICAgbWFwRnJvbS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLml0ZW1zLmxlbmd0aCwgMCk7XG4gICAgICAgIHJldHVybiBuZXcgQnJhbmNoKFJvcGVTZXF1ZW5jZS5mcm9tKGl0ZW1zLnJldmVyc2UoKSksIGV2ZW50cyk7XG4gICAgfVxufVxuQnJhbmNoLmVtcHR5ID0gbmV3IEJyYW5jaChSb3BlU2VxdWVuY2UuZW1wdHksIDApO1xuZnVuY3Rpb24gY3V0T2ZmRXZlbnRzKGl0ZW1zLCBuKSB7XG4gICAgbGV0IGN1dFBvaW50O1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uc2VsZWN0aW9uICYmIChuLS0gPT0gMCkpIHtcbiAgICAgICAgICAgIGN1dFBvaW50ID0gaTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpdGVtcy5zbGljZShjdXRQb2ludCk7XG59XG5jbGFzcyBJdGVtIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBUaGUgKGZvcndhcmQpIHN0ZXAgbWFwIGZvciB0aGlzIGl0ZW0uXG4gICAgbWFwLCBcbiAgICAvLyBUaGUgaW52ZXJ0ZWQgc3RlcFxuICAgIHN0ZXAsIFxuICAgIC8vIElmIHRoaXMgaXMgbm9uLW51bGwsIHRoaXMgaXRlbSBpcyB0aGUgc3RhcnQgb2YgYSBncm91cCwgYW5kXG4gICAgLy8gdGhpcyBzZWxlY3Rpb24gaXMgdGhlIHN0YXJ0aW5nIHNlbGVjdGlvbiBmb3IgdGhlIGdyb3VwICh0aGUgb25lXG4gICAgLy8gdGhhdCB3YXMgYWN0aXZlIGJlZm9yZSB0aGUgZmlyc3Qgc3RlcCB3YXMgYXBwbGllZClcbiAgICBzZWxlY3Rpb24sIFxuICAgIC8vIElmIHRoaXMgaXRlbSBpcyB0aGUgaW52ZXJzZSBvZiBhIHByZXZpb3VzIG1hcHBpbmcgb24gdGhlIHN0YWNrLFxuICAgIC8vIHRoaXMgcG9pbnRzIGF0IHRoZSBpbnZlcnNlJ3Mgb2Zmc2V0XG4gICAgbWlycm9yT2Zmc2V0KSB7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICB0aGlzLnN0ZXAgPSBzdGVwO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbiA9IHNlbGVjdGlvbjtcbiAgICAgICAgdGhpcy5taXJyb3JPZmZzZXQgPSBtaXJyb3JPZmZzZXQ7XG4gICAgfVxuICAgIG1lcmdlKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzLnN0ZXAgJiYgb3RoZXIuc3RlcCAmJiAhb3RoZXIuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBsZXQgc3RlcCA9IG90aGVyLnN0ZXAubWVyZ2UodGhpcy5zdGVwKTtcbiAgICAgICAgICAgIGlmIChzdGVwKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSXRlbShzdGVwLmdldE1hcCgpLmludmVydCgpLCBzdGVwLCB0aGlzLnNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBUaGUgdmFsdWUgb2YgdGhlIHN0YXRlIGZpZWxkIHRoYXQgdHJhY2tzIHVuZG8vcmVkbyBoaXN0b3J5IGZvciB0aGF0XG4vLyBzdGF0ZS4gV2lsbCBiZSBzdG9yZWQgaW4gdGhlIHBsdWdpbiBzdGF0ZSB3aGVuIHRoZSBoaXN0b3J5IHBsdWdpblxuLy8gaXMgYWN0aXZlLlxuY2xhc3MgSGlzdG9yeVN0YXRlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb25lLCB1bmRvbmUsIHByZXZSYW5nZXMsIHByZXZUaW1lLCBwcmV2Q29tcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5kb25lID0gZG9uZTtcbiAgICAgICAgdGhpcy51bmRvbmUgPSB1bmRvbmU7XG4gICAgICAgIHRoaXMucHJldlJhbmdlcyA9IHByZXZSYW5nZXM7XG4gICAgICAgIHRoaXMucHJldlRpbWUgPSBwcmV2VGltZTtcbiAgICAgICAgdGhpcy5wcmV2Q29tcG9zaXRpb24gPSBwcmV2Q29tcG9zaXRpb247XG4gICAgfVxufVxuY29uc3QgREVQVEhfT1ZFUkZMT1cgPSAyMDtcbi8vIFJlY29yZCBhIHRyYW5zZm9ybWF0aW9uIGluIHVuZG8gaGlzdG9yeS5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNhY3Rpb24oaGlzdG9yeSwgc3RhdGUsIHRyLCBvcHRpb25zKSB7XG4gICAgbGV0IGhpc3RvcnlUciA9IHRyLmdldE1ldGEoaGlzdG9yeUtleSksIHJlYmFzZWQ7XG4gICAgaWYgKGhpc3RvcnlUcilcbiAgICAgICAgcmV0dXJuIGhpc3RvcnlUci5oaXN0b3J5U3RhdGU7XG4gICAgaWYgKHRyLmdldE1ldGEoY2xvc2VIaXN0b3J5S2V5KSlcbiAgICAgICAgaGlzdG9yeSA9IG5ldyBIaXN0b3J5U3RhdGUoaGlzdG9yeS5kb25lLCBoaXN0b3J5LnVuZG9uZSwgbnVsbCwgMCwgLTEpO1xuICAgIGxldCBhcHBlbmRlZCA9IHRyLmdldE1ldGEoXCJhcHBlbmRlZFRyYW5zYWN0aW9uXCIpO1xuICAgIGlmICh0ci5zdGVwcy5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm4gaGlzdG9yeTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYXBwZW5kZWQgJiYgYXBwZW5kZWQuZ2V0TWV0YShoaXN0b3J5S2V5KSkge1xuICAgICAgICBpZiAoYXBwZW5kZWQuZ2V0TWV0YShoaXN0b3J5S2V5KS5yZWRvKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoaGlzdG9yeS5kb25lLmFkZFRyYW5zZm9ybSh0ciwgdW5kZWZpbmVkLCBvcHRpb25zLCBtdXN0UHJlc2VydmVJdGVtcyhzdGF0ZSkpLCBoaXN0b3J5LnVuZG9uZSwgcmFuZ2VzRm9yKHRyLm1hcHBpbmcubWFwc1t0ci5zdGVwcy5sZW5ndGggLSAxXSksIGhpc3RvcnkucHJldlRpbWUsIGhpc3RvcnkucHJldkNvbXBvc2l0aW9uKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoaGlzdG9yeS5kb25lLCBoaXN0b3J5LnVuZG9uZS5hZGRUcmFuc2Zvcm0odHIsIHVuZGVmaW5lZCwgb3B0aW9ucywgbXVzdFByZXNlcnZlSXRlbXMoc3RhdGUpKSwgbnVsbCwgaGlzdG9yeS5wcmV2VGltZSwgaGlzdG9yeS5wcmV2Q29tcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0ci5nZXRNZXRhKFwiYWRkVG9IaXN0b3J5XCIpICE9PSBmYWxzZSAmJiAhKGFwcGVuZGVkICYmIGFwcGVuZGVkLmdldE1ldGEoXCJhZGRUb0hpc3RvcnlcIikgPT09IGZhbHNlKSkge1xuICAgICAgICAvLyBHcm91cCB0cmFuc2Zvcm1zIHRoYXQgb2NjdXIgaW4gcXVpY2sgc3VjY2Vzc2lvbiBpbnRvIG9uZSBldmVudC5cbiAgICAgICAgbGV0IGNvbXBvc2l0aW9uID0gdHIuZ2V0TWV0YShcImNvbXBvc2l0aW9uXCIpO1xuICAgICAgICBsZXQgbmV3R3JvdXAgPSBoaXN0b3J5LnByZXZUaW1lID09IDAgfHxcbiAgICAgICAgICAgICghYXBwZW5kZWQgJiYgaGlzdG9yeS5wcmV2Q29tcG9zaXRpb24gIT0gY29tcG9zaXRpb24gJiZcbiAgICAgICAgICAgICAgICAoaGlzdG9yeS5wcmV2VGltZSA8ICh0ci50aW1lIHx8IDApIC0gb3B0aW9ucy5uZXdHcm91cERlbGF5IHx8ICFpc0FkamFjZW50VG8odHIsIGhpc3RvcnkucHJldlJhbmdlcykpKTtcbiAgICAgICAgbGV0IHByZXZSYW5nZXMgPSBhcHBlbmRlZCA/IG1hcFJhbmdlcyhoaXN0b3J5LnByZXZSYW5nZXMsIHRyLm1hcHBpbmcpIDogcmFuZ2VzRm9yKHRyLm1hcHBpbmcubWFwc1t0ci5zdGVwcy5sZW5ndGggLSAxXSk7XG4gICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVN0YXRlKGhpc3RvcnkuZG9uZS5hZGRUcmFuc2Zvcm0odHIsIG5ld0dyb3VwID8gc3RhdGUuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCkgOiB1bmRlZmluZWQsIG9wdGlvbnMsIG11c3RQcmVzZXJ2ZUl0ZW1zKHN0YXRlKSksIEJyYW5jaC5lbXB0eSwgcHJldlJhbmdlcywgdHIudGltZSwgY29tcG9zaXRpb24gPT0gbnVsbCA/IGhpc3RvcnkucHJldkNvbXBvc2l0aW9uIDogY29tcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWJhc2VkID0gdHIuZ2V0TWV0YShcInJlYmFzZWRcIikpIHtcbiAgICAgICAgLy8gVXNlZCBieSB0aGUgY29sbGFiIG1vZHVsZSB0byB0ZWxsIHRoZSBoaXN0b3J5IHRoYXQgc29tZSBvZiBpdHNcbiAgICAgICAgLy8gY29udGVudCBoYXMgYmVlbiByZWJhc2VkLlxuICAgICAgICByZXR1cm4gbmV3IEhpc3RvcnlTdGF0ZShoaXN0b3J5LmRvbmUucmViYXNlZCh0ciwgcmViYXNlZCksIGhpc3RvcnkudW5kb25lLnJlYmFzZWQodHIsIHJlYmFzZWQpLCBtYXBSYW5nZXMoaGlzdG9yeS5wcmV2UmFuZ2VzLCB0ci5tYXBwaW5nKSwgaGlzdG9yeS5wcmV2VGltZSwgaGlzdG9yeS5wcmV2Q29tcG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaXN0b3J5U3RhdGUoaGlzdG9yeS5kb25lLmFkZE1hcHModHIubWFwcGluZy5tYXBzKSwgaGlzdG9yeS51bmRvbmUuYWRkTWFwcyh0ci5tYXBwaW5nLm1hcHMpLCBtYXBSYW5nZXMoaGlzdG9yeS5wcmV2UmFuZ2VzLCB0ci5tYXBwaW5nKSwgaGlzdG9yeS5wcmV2VGltZSwgaGlzdG9yeS5wcmV2Q29tcG9zaXRpb24pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQWRqYWNlbnRUbyh0cmFuc2Zvcm0sIHByZXZSYW5nZXMpIHtcbiAgICBpZiAoIXByZXZSYW5nZXMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoIXRyYW5zZm9ybS5kb2NDaGFuZ2VkKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBsZXQgYWRqYWNlbnQgPSBmYWxzZTtcbiAgICB0cmFuc2Zvcm0ubWFwcGluZy5tYXBzWzBdLmZvckVhY2goKHN0YXJ0LCBlbmQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2UmFuZ2VzLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICAgICAgaWYgKHN0YXJ0IDw9IHByZXZSYW5nZXNbaSArIDFdICYmIGVuZCA+PSBwcmV2UmFuZ2VzW2ldKVxuICAgICAgICAgICAgICAgIGFkamFjZW50ID0gdHJ1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWRqYWNlbnQ7XG59XG5mdW5jdGlvbiByYW5nZXNGb3IobWFwKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIG1hcC5mb3JFYWNoKChfZnJvbSwgX3RvLCBmcm9tLCB0bykgPT4gcmVzdWx0LnB1c2goZnJvbSwgdG8pKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWFwUmFuZ2VzKHJhbmdlcywgbWFwcGluZykge1xuICAgIGlmICghcmFuZ2VzKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcChyYW5nZXNbaV0sIDEpLCB0byA9IG1hcHBpbmcubWFwKHJhbmdlc1tpICsgMV0sIC0xKTtcbiAgICAgICAgaWYgKGZyb20gPD0gdG8pXG4gICAgICAgICAgICByZXN1bHQucHVzaChmcm9tLCB0byk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyBBcHBseSB0aGUgbGF0ZXN0IGV2ZW50IGZyb20gb25lIGJyYW5jaCB0byB0aGUgZG9jdW1lbnQgYW5kIHNoaWZ0IHRoZSBldmVudFxuLy8gb250byB0aGUgb3RoZXIgYnJhbmNoLlxuZnVuY3Rpb24gaGlzdFRyYW5zYWN0aW9uKGhpc3RvcnksIHN0YXRlLCBkaXNwYXRjaCwgcmVkbykge1xuICAgIGxldCBwcmVzZXJ2ZUl0ZW1zID0gbXVzdFByZXNlcnZlSXRlbXMoc3RhdGUpO1xuICAgIGxldCBoaXN0T3B0aW9ucyA9IGhpc3RvcnlLZXkuZ2V0KHN0YXRlKS5zcGVjLmNvbmZpZztcbiAgICBsZXQgcG9wID0gKHJlZG8gPyBoaXN0b3J5LnVuZG9uZSA6IGhpc3RvcnkuZG9uZSkucG9wRXZlbnQoc3RhdGUsIHByZXNlcnZlSXRlbXMpO1xuICAgIGlmICghcG9wKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHNlbGVjdGlvbiA9IHBvcC5zZWxlY3Rpb24ucmVzb2x2ZShwb3AudHJhbnNmb3JtLmRvYyk7XG4gICAgbGV0IGFkZGVkID0gKHJlZG8gPyBoaXN0b3J5LmRvbmUgOiBoaXN0b3J5LnVuZG9uZSkuYWRkVHJhbnNmb3JtKHBvcC50cmFuc2Zvcm0sIHN0YXRlLnNlbGVjdGlvbi5nZXRCb29rbWFyaygpLCBoaXN0T3B0aW9ucywgcHJlc2VydmVJdGVtcyk7XG4gICAgbGV0IG5ld0hpc3QgPSBuZXcgSGlzdG9yeVN0YXRlKHJlZG8gPyBhZGRlZCA6IHBvcC5yZW1haW5pbmcsIHJlZG8gPyBwb3AucmVtYWluaW5nIDogYWRkZWQsIG51bGwsIDAsIC0xKTtcbiAgICBkaXNwYXRjaChwb3AudHJhbnNmb3JtLnNldFNlbGVjdGlvbihzZWxlY3Rpb24pLnNldE1ldGEoaGlzdG9yeUtleSwgeyByZWRvLCBoaXN0b3J5U3RhdGU6IG5ld0hpc3QgfSkuc2Nyb2xsSW50b1ZpZXcoKSk7XG59XG5sZXQgY2FjaGVkUHJlc2VydmVJdGVtcyA9IGZhbHNlLCBjYWNoZWRQcmVzZXJ2ZUl0ZW1zUGx1Z2lucyA9IG51bGw7XG4vLyBDaGVjayB3aGV0aGVyIGFueSBwbHVnaW4gaW4gdGhlIGdpdmVuIHN0YXRlIGhhcyBhXG4vLyBgaGlzdG9yeVByZXNlcnZlSXRlbXNgIHByb3BlcnR5IGluIGl0cyBzcGVjLCBpbiB3aGljaCBjYXNlIHdlIG11c3Rcbi8vIHByZXNlcnZlIHN0ZXBzIGV4YWN0bHkgYXMgdGhleSBjYW1lIGluLCBzbyB0aGF0IHRoZXkgY2FuIGJlXG4vLyByZWJhc2VkLlxuZnVuY3Rpb24gbXVzdFByZXNlcnZlSXRlbXMoc3RhdGUpIHtcbiAgICBsZXQgcGx1Z2lucyA9IHN0YXRlLnBsdWdpbnM7XG4gICAgaWYgKGNhY2hlZFByZXNlcnZlSXRlbXNQbHVnaW5zICE9IHBsdWdpbnMpIHtcbiAgICAgICAgY2FjaGVkUHJlc2VydmVJdGVtcyA9IGZhbHNlO1xuICAgICAgICBjYWNoZWRQcmVzZXJ2ZUl0ZW1zUGx1Z2lucyA9IHBsdWdpbnM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGx1Z2lucy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChwbHVnaW5zW2ldLnNwZWMuaGlzdG9yeVByZXNlcnZlSXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjYWNoZWRQcmVzZXJ2ZUl0ZW1zID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZFByZXNlcnZlSXRlbXM7XG59XG4vKipcblNldCBhIGZsYWcgb24gdGhlIGdpdmVuIHRyYW5zYWN0aW9uIHRoYXQgd2lsbCBwcmV2ZW50IGZ1cnRoZXIgc3RlcHNcbmZyb20gYmVpbmcgYXBwZW5kZWQgdG8gYW4gZXhpc3RpbmcgaGlzdG9yeSBldmVudCAoc28gdGhhdCB0aGV5XG5yZXF1aXJlIGEgc2VwYXJhdGUgdW5kbyBjb21tYW5kIHRvIHVuZG8pLlxuKi9cbmZ1bmN0aW9uIGNsb3NlSGlzdG9yeSh0cikge1xuICAgIHJldHVybiB0ci5zZXRNZXRhKGNsb3NlSGlzdG9yeUtleSwgdHJ1ZSk7XG59XG5jb25zdCBoaXN0b3J5S2V5ID0gbmV3IFBsdWdpbktleShcImhpc3RvcnlcIik7XG5jb25zdCBjbG9zZUhpc3RvcnlLZXkgPSBuZXcgUGx1Z2luS2V5KFwiY2xvc2VIaXN0b3J5XCIpO1xuLyoqXG5SZXR1cm5zIGEgcGx1Z2luIHRoYXQgZW5hYmxlcyB0aGUgdW5kbyBoaXN0b3J5IGZvciBhbiBlZGl0b3IuIFRoZVxucGx1Z2luIHdpbGwgdHJhY2sgdW5kbyBhbmQgcmVkbyBzdGFja3MsIHdoaWNoIGNhbiBiZSB1c2VkIHdpdGggdGhlXG5bYHVuZG9gXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jaGlzdG9yeS51bmRvKSBhbmQgW2ByZWRvYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2hpc3RvcnkucmVkbykgY29tbWFuZHMuXG5cbllvdSBjYW4gc2V0IGFuIGBcImFkZFRvSGlzdG9yeVwiYCBbbWV0YWRhdGFcbnByb3BlcnR5XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24uc2V0TWV0YSkgb2YgYGZhbHNlYCBvbiBhIHRyYW5zYWN0aW9uXG50byBwcmV2ZW50IGl0IGZyb20gYmVpbmcgcm9sbGVkIGJhY2sgYnkgdW5kby5cbiovXG5mdW5jdGlvbiBoaXN0b3J5KGNvbmZpZyA9IHt9KSB7XG4gICAgY29uZmlnID0geyBkZXB0aDogY29uZmlnLmRlcHRoIHx8IDEwMCxcbiAgICAgICAgbmV3R3JvdXBEZWxheTogY29uZmlnLm5ld0dyb3VwRGVsYXkgfHwgNTAwIH07XG4gICAgcmV0dXJuIG5ldyBQbHVnaW4oe1xuICAgICAgICBrZXk6IGhpc3RvcnlLZXksXG4gICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSGlzdG9yeVN0YXRlKEJyYW5jaC5lbXB0eSwgQnJhbmNoLmVtcHR5LCBudWxsLCAwLCAtMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXBwbHkodHIsIGhpc3QsIHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcGx5VHJhbnNhY3Rpb24oaGlzdCwgc3RhdGUsIHRyLCBjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb25maWcsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICBoYW5kbGVET01FdmVudHM6IHtcbiAgICAgICAgICAgICAgICBiZWZvcmVpbnB1dCh2aWV3LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFR5cGUgPSBlLmlucHV0VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbW1hbmQgPSBpbnB1dFR5cGUgPT0gXCJoaXN0b3J5VW5kb1wiID8gdW5kbyA6IGlucHV0VHlwZSA9PSBcImhpc3RvcnlSZWRvXCIgPyByZWRvIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21tYW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21tYW5kKHZpZXcuc3RhdGUsIHZpZXcuZGlzcGF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG5BIGNvbW1hbmQgZnVuY3Rpb24gdGhhdCB1bmRvZXMgdGhlIGxhc3QgY2hhbmdlLCBpZiBhbnkuXG4qL1xuY29uc3QgdW5kbyA9IChzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcbiAgICBsZXQgaGlzdCA9IGhpc3RvcnlLZXkuZ2V0U3RhdGUoc3RhdGUpO1xuICAgIGlmICghaGlzdCB8fCBoaXN0LmRvbmUuZXZlbnRDb3VudCA9PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBoaXN0VHJhbnNhY3Rpb24oaGlzdCwgc3RhdGUsIGRpc3BhdGNoLCBmYWxzZSk7XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG5BIGNvbW1hbmQgZnVuY3Rpb24gdGhhdCByZWRvZXMgdGhlIGxhc3QgdW5kb25lIGNoYW5nZSwgaWYgYW55LlxuKi9cbmNvbnN0IHJlZG8gPSAoc3RhdGUsIGRpc3BhdGNoKSA9PiB7XG4gICAgbGV0IGhpc3QgPSBoaXN0b3J5S2V5LmdldFN0YXRlKHN0YXRlKTtcbiAgICBpZiAoIWhpc3QgfHwgaGlzdC51bmRvbmUuZXZlbnRDb3VudCA9PSAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGRpc3BhdGNoKVxuICAgICAgICBoaXN0VHJhbnNhY3Rpb24oaGlzdCwgc3RhdGUsIGRpc3BhdGNoLCB0cnVlKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcblRoZSBhbW91bnQgb2YgdW5kb2FibGUgZXZlbnRzIGF2YWlsYWJsZSBpbiBhIGdpdmVuIHN0YXRlLlxuKi9cbmZ1bmN0aW9uIHVuZG9EZXB0aChzdGF0ZSkge1xuICAgIGxldCBoaXN0ID0gaGlzdG9yeUtleS5nZXRTdGF0ZShzdGF0ZSk7XG4gICAgcmV0dXJuIGhpc3QgPyBoaXN0LmRvbmUuZXZlbnRDb3VudCA6IDA7XG59XG4vKipcblRoZSBhbW91bnQgb2YgcmVkb2FibGUgZXZlbnRzIGF2YWlsYWJsZSBpbiBhIGdpdmVuIGVkaXRvciBzdGF0ZS5cbiovXG5mdW5jdGlvbiByZWRvRGVwdGgoc3RhdGUpIHtcbiAgICBsZXQgaGlzdCA9IGhpc3RvcnlLZXkuZ2V0U3RhdGUoc3RhdGUpO1xuICAgIHJldHVybiBoaXN0ID8gaGlzdC51bmRvbmUuZXZlbnRDb3VudCA6IDA7XG59XG5cbmV4cG9ydCB7IGNsb3NlSGlzdG9yeSwgaGlzdG9yeSwgcmVkbywgcmVkb0RlcHRoLCB1bmRvLCB1bmRvRGVwdGggfTtcbiIsImltcG9ydCB7IEV4dGVuc2lvbiB9IGZyb20gJ0B0aXB0YXAvY29yZSdcbmltcG9ydCB7IGhpc3RvcnksIHJlZG8sIHVuZG8gfSBmcm9tICdAdGlwdGFwL3BtL2hpc3RvcnknXG5cbmV4cG9ydCBpbnRlcmZhY2UgSGlzdG9yeU9wdGlvbnMge1xuICBkZXB0aDogbnVtYmVyLFxuICBuZXdHcm91cERlbGF5OiBudW1iZXIsXG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBoaXN0b3J5OiB7XG4gICAgICAvKipcbiAgICAgICAqIFVuZG8gcmVjZW50IGNoYW5nZXNcbiAgICAgICAqL1xuICAgICAgdW5kbzogKCkgPT4gUmV0dXJuVHlwZSxcbiAgICAgIC8qKlxuICAgICAgICogUmVhcHBseSByZXZlcnRlZCBjaGFuZ2VzXG4gICAgICAgKi9cbiAgICAgIHJlZG86ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBIaXN0b3J5ID0gRXh0ZW5zaW9uLmNyZWF0ZTxIaXN0b3J5T3B0aW9ucz4oe1xuICBuYW1lOiAnaGlzdG9yeScsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGVwdGg6IDEwMCxcbiAgICAgIG5ld0dyb3VwRGVsYXk6IDUwMCxcbiAgICB9XG4gIH0sXG5cbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVuZG86ICgpID0+ICh7IHN0YXRlLCBkaXNwYXRjaCB9KSA9PiB7XG4gICAgICAgIHJldHVybiB1bmRvKHN0YXRlLCBkaXNwYXRjaClcbiAgICAgIH0sXG4gICAgICByZWRvOiAoKSA9PiAoeyBzdGF0ZSwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgICAgICByZXR1cm4gcmVkbyhzdGF0ZSwgZGlzcGF0Y2gpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGhpc3RvcnkodGhpcy5vcHRpb25zKSxcbiAgICBdXG4gIH0sXG5cbiAgYWRkS2V5Ym9hcmRTaG9ydGN1dHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNb2Qteic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnVuZG8oKSxcbiAgICAgICdNb2QtWic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnVuZG8oKSxcbiAgICAgICdNb2QteSc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlZG8oKSxcbiAgICAgICdNb2QtWSc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlZG8oKSxcbiAgICAgICdTaGlmdC1Nb2Qteic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlZG8oKSxcbiAgICAgICdTaGlmdC1Nb2QtWic6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlZG8oKSxcblxuICAgICAgLy8gUnVzc2lhbiBrZXlib2FyZCBsYXlvdXRzXG4gICAgICAnTW9kLdGPJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudW5kbygpLFxuICAgICAgJ1NoaWZ0LU1vZC3Rjyc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnJlZG8oKSxcbiAgICB9XG4gIH0sXG59KVxuIiwiaW1wb3J0IHsgbWVyZ2VBdHRyaWJ1dGVzLCBOb2RlLCBub2RlSW5wdXRSdWxlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuaW1wb3J0IHsgTm9kZVNlbGVjdGlvbiwgVGV4dFNlbGVjdGlvbiB9IGZyb20gJ0B0aXB0YXAvcG0vc3RhdGUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9yaXpvbnRhbFJ1bGVPcHRpb25zIHtcbiAgSFRNTEF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuZGVjbGFyZSBtb2R1bGUgJ0B0aXB0YXAvY29yZScge1xuICBpbnRlcmZhY2UgQ29tbWFuZHM8UmV0dXJuVHlwZT4ge1xuICAgIGhvcml6b250YWxSdWxlOiB7XG4gICAgICAvKipcbiAgICAgICAqIEFkZCBhIGhvcml6b250YWwgcnVsZVxuICAgICAgICovXG4gICAgICBzZXRIb3Jpem9udGFsUnVsZTogKCkgPT4gUmV0dXJuVHlwZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgSG9yaXpvbnRhbFJ1bGUgPSBOb2RlLmNyZWF0ZTxIb3Jpem9udGFsUnVsZU9wdGlvbnM+KHtcbiAgbmFtZTogJ2hvcml6b250YWxSdWxlJyxcblxuICBhZGRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBIVE1MQXR0cmlidXRlczoge30sXG4gICAgfVxuICB9LFxuXG4gIGdyb3VwOiAnYmxvY2snLFxuXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW3sgdGFnOiAnaHInIH1dXG4gIH0sXG5cbiAgcmVuZGVySFRNTCh7IEhUTUxBdHRyaWJ1dGVzIH0pIHtcbiAgICByZXR1cm4gWydocicsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKV1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0SG9yaXpvbnRhbFJ1bGU6XG4gICAgICAgICgpID0+ICh7IGNoYWluLCBzdGF0ZSB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyAkdG86ICRvcmlnaW5UbyB9ID0gc3RhdGUuc2VsZWN0aW9uXG5cbiAgICAgICAgICBjb25zdCBjdXJyZW50Q2hhaW4gPSBjaGFpbigpXG5cbiAgICAgICAgICBpZiAoJG9yaWdpblRvLnBhcmVudE9mZnNldCA9PT0gMCkge1xuICAgICAgICAgICAgY3VycmVudENoYWluLmluc2VydENvbnRlbnRBdChNYXRoLm1heCgkb3JpZ2luVG8ucG9zIC0gMiwgMCksIHsgdHlwZTogdGhpcy5uYW1lIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRDaGFpbi5pbnNlcnRDb250ZW50KHsgdHlwZTogdGhpcy5uYW1lIH0pXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIGN1cnJlbnRDaGFpblxuICAgICAgICAgICAgICAvLyBzZXQgY3Vyc29yIGFmdGVyIGhvcml6b250YWwgcnVsZVxuICAgICAgICAgICAgICAuY29tbWFuZCgoeyB0ciwgZGlzcGF0Y2ggfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgeyAkdG8gfSA9IHRyLnNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgY29uc3QgcG9zQWZ0ZXIgPSAkdG8uZW5kKClcblxuICAgICAgICAgICAgICAgICAgaWYgKCR0by5ub2RlQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0by5ub2RlQWZ0ZXIuaXNUZXh0YmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICB0ci5zZXRTZWxlY3Rpb24oVGV4dFNlbGVjdGlvbi5jcmVhdGUodHIuZG9jLCAkdG8ucG9zICsgMSkpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHRvLm5vZGVBZnRlci5pc0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKE5vZGVTZWxlY3Rpb24uY3JlYXRlKHRyLmRvYywgJHRvLnBvcykpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKFRleHRTZWxlY3Rpb24uY3JlYXRlKHRyLmRvYywgJHRvLnBvcykpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBub2RlIGFmdGVyIGhvcml6b250YWwgcnVsZSBpZiBpdOKAmXMgdGhlIGVuZCBvZiB0aGUgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9ICR0by5wYXJlbnQudHlwZS5jb250ZW50TWF0Y2guZGVmYXVsdFR5cGU/LmNyZWF0ZSgpXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0ci5pbnNlcnQocG9zQWZ0ZXIsIG5vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKFRleHRTZWxlY3Rpb24uY3JlYXRlKHRyLmRvYywgcG9zQWZ0ZXIgKyAxKSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICB0ci5zY3JvbGxJbnRvVmlldygpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnJ1bigpXG4gICAgICAgICAgKVxuICAgICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRJbnB1dFJ1bGVzKCkge1xuICAgIHJldHVybiBbXG4gICAgICBub2RlSW5wdXRSdWxlKHtcbiAgICAgICAgZmluZDogL14oPzotLS184oCULXxfX19cXHN8XFwqXFwqXFwqXFxzKSQvLFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIiwiaW1wb3J0IHtcbiAgTWFyayxcbiAgbWFya0lucHV0UnVsZSxcbiAgbWFya1Bhc3RlUnVsZSxcbiAgbWVyZ2VBdHRyaWJ1dGVzLFxufSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgSXRhbGljT3B0aW9ucyB7XG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxufVxuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgaXRhbGljOiB7XG4gICAgICAvKipcbiAgICAgICAqIFNldCBhbiBpdGFsaWMgbWFya1xuICAgICAgICovXG4gICAgICBzZXRJdGFsaWM6ICgpID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBhbiBpdGFsaWMgbWFya1xuICAgICAgICovXG4gICAgICB0b2dnbGVJdGFsaWM6ICgpID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFVuc2V0IGFuIGl0YWxpYyBtYXJrXG4gICAgICAgKi9cbiAgICAgIHVuc2V0SXRhbGljOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc3RhcklucHV0UmVnZXggPSAvKD86XnxcXHMpKCg/OlxcKikoKD86W14qXSspKSg/OlxcKikpJC9cbmV4cG9ydCBjb25zdCBzdGFyUGFzdGVSZWdleCA9IC8oPzpefFxccykoKD86XFwqKSgoPzpbXipdKykpKD86XFwqKSkvZ1xuZXhwb3J0IGNvbnN0IHVuZGVyc2NvcmVJbnB1dFJlZ2V4ID0gLyg/Ol58XFxzKSgoPzpfKSgoPzpbXl9dKykpKD86XykpJC9cbmV4cG9ydCBjb25zdCB1bmRlcnNjb3JlUGFzdGVSZWdleCA9IC8oPzpefFxccykoKD86XykoKD86W15fXSspKSg/Ol8pKS9nXG5cbmV4cG9ydCBjb25zdCBJdGFsaWMgPSBNYXJrLmNyZWF0ZTxJdGFsaWNPcHRpb25zPih7XG4gIG5hbWU6ICdpdGFsaWMnLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2VtJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2knLFxuICAgICAgICBnZXRBdHRyczogbm9kZSA9PiAobm9kZSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZm9udFN0eWxlICE9PSAnbm9ybWFsJyAmJiBudWxsLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgc3R5bGU6ICdmb250LXN0eWxlPWl0YWxpYycsXG4gICAgICB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ2VtJywgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpLCAwXVxuICB9LFxuXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzZXRJdGFsaWM6ICgpID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLnNldE1hcmsodGhpcy5uYW1lKVxuICAgICAgfSxcbiAgICAgIHRvZ2dsZUl0YWxpYzogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMudG9nZ2xlTWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgICAgdW5zZXRJdGFsaWM6ICgpID0+ICh7IGNvbW1hbmRzIH0pID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzLnVuc2V0TWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ01vZC1pJzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlSXRhbGljKCksXG4gICAgICAnTW9kLUknOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy50b2dnbGVJdGFsaWMoKSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbWFya0lucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IHN0YXJJbnB1dFJlZ2V4LFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICAgIG1hcmtJbnB1dFJ1bGUoe1xuICAgICAgICBmaW5kOiB1bmRlcnNjb3JlSW5wdXRSZWdleCxcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgfSksXG4gICAgXVxuICB9LFxuXG4gIGFkZFBhc3RlUnVsZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG1hcmtQYXN0ZVJ1bGUoe1xuICAgICAgICBmaW5kOiBzdGFyUGFzdGVSZWdleCxcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgfSksXG4gICAgICBtYXJrUGFzdGVSdWxlKHtcbiAgICAgICAgZmluZDogdW5kZXJzY29yZVBhc3RlUmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIH0pLFxuICAgIF1cbiAgfSxcbn0pXG4iLCJpbXBvcnQgeyBtZXJnZUF0dHJpYnV0ZXMsIE5vZGUsIHdyYXBwaW5nSW5wdXRSdWxlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5pbXBvcnQgTGlzdEl0ZW0gZnJvbSAnLi4vLi4vZXh0ZW5zaW9uLWxpc3QtaXRlbS9zcmMvaW5kZXguanMnXG5pbXBvcnQgVGV4dFN0eWxlIGZyb20gJy4uLy4uL2V4dGVuc2lvbi10ZXh0LXN0eWxlL3NyYy9pbmRleC5qcydcblxuZXhwb3J0IGludGVyZmFjZSBPcmRlcmVkTGlzdE9wdGlvbnMge1xuICBpdGVtVHlwZU5hbWU6IHN0cmluZyxcbiAgSFRNTEF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIGtlZXBNYXJrczogYm9vbGVhbixcbiAga2VlcEF0dHJpYnV0ZXM6IGJvb2xlYW4sXG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBvcmRlcmVkTGlzdDoge1xuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgYW4gb3JkZXJlZCBsaXN0XG4gICAgICAgKi9cbiAgICAgIHRvZ2dsZU9yZGVyZWRMaXN0OiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5wdXRSZWdleCA9IC9eKFxcZCspXFwuXFxzJC9cblxuZXhwb3J0IGNvbnN0IE9yZGVyZWRMaXN0ID0gTm9kZS5jcmVhdGU8T3JkZXJlZExpc3RPcHRpb25zPih7XG4gIG5hbWU6ICdvcmRlcmVkTGlzdCcsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXRlbVR5cGVOYW1lOiAnbGlzdEl0ZW0nLFxuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgICAga2VlcE1hcmtzOiBmYWxzZSxcbiAgICAgIGtlZXBBdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICB9XG4gIH0sXG5cbiAgZ3JvdXA6ICdibG9jayBsaXN0JyxcblxuICBjb250ZW50KCkge1xuICAgIHJldHVybiBgJHt0aGlzLm9wdGlvbnMuaXRlbVR5cGVOYW1lfStgXG4gIH0sXG5cbiAgYWRkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHtcbiAgICAgICAgZGVmYXVsdDogMSxcbiAgICAgICAgcGFyc2VIVE1MOiBlbGVtZW50ID0+IHtcbiAgICAgICAgICByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3N0YXJ0JylcbiAgICAgICAgICAgID8gcGFyc2VJbnQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JykgfHwgJycsIDEwKVxuICAgICAgICAgICAgOiAxXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBwYXJzZUhUTUwoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnb2wnLFxuICAgICAgfSxcbiAgICBdXG4gIH0sXG5cbiAgcmVuZGVySFRNTCh7IEhUTUxBdHRyaWJ1dGVzIH0pIHtcbiAgICBjb25zdCB7IHN0YXJ0LCAuLi5hdHRyaWJ1dGVzV2l0aG91dFN0YXJ0IH0gPSBIVE1MQXR0cmlidXRlc1xuXG4gICAgcmV0dXJuIHN0YXJ0ID09PSAxXG4gICAgICA/IFsnb2wnLCBtZXJnZUF0dHJpYnV0ZXModGhpcy5vcHRpb25zLkhUTUxBdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzV2l0aG91dFN0YXJ0KSwgMF1cbiAgICAgIDogWydvbCcsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSwgMF1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9nZ2xlT3JkZXJlZExpc3Q6ICgpID0+ICh7IGNvbW1hbmRzLCBjaGFpbiB9KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMua2VlcEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICByZXR1cm4gY2hhaW4oKS50b2dnbGVMaXN0KHRoaXMubmFtZSwgdGhpcy5vcHRpb25zLml0ZW1UeXBlTmFtZSwgdGhpcy5vcHRpb25zLmtlZXBNYXJrcykudXBkYXRlQXR0cmlidXRlcyhMaXN0SXRlbS5uYW1lLCB0aGlzLmVkaXRvci5nZXRBdHRyaWJ1dGVzKFRleHRTdHlsZS5uYW1lKSkucnVuKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tbWFuZHMudG9nZ2xlTGlzdCh0aGlzLm5hbWUsIHRoaXMub3B0aW9ucy5pdGVtVHlwZU5hbWUsIHRoaXMub3B0aW9ucy5rZWVwTWFya3MpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ01vZC1TaGlmdC03JzogKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlT3JkZXJlZExpc3QoKSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICBsZXQgaW5wdXRSdWxlID0gd3JhcHBpbmdJbnB1dFJ1bGUoe1xuICAgICAgZmluZDogaW5wdXRSZWdleCxcbiAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIGdldEF0dHJpYnV0ZXM6IG1hdGNoID0+ICh7IHN0YXJ0OiArbWF0Y2hbMV0gfSksXG4gICAgICBqb2luUHJlZGljYXRlOiAobWF0Y2gsIG5vZGUpID0+IG5vZGUuY2hpbGRDb3VudCArIG5vZGUuYXR0cnMuc3RhcnQgPT09ICttYXRjaFsxXSxcbiAgICB9KVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5rZWVwTWFya3MgfHwgdGhpcy5vcHRpb25zLmtlZXBBdHRyaWJ1dGVzKSB7XG4gICAgICBpbnB1dFJ1bGUgPSB3cmFwcGluZ0lucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IGlucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAga2VlcE1hcmtzOiB0aGlzLm9wdGlvbnMua2VlcE1hcmtzLFxuICAgICAgICBrZWVwQXR0cmlidXRlczogdGhpcy5vcHRpb25zLmtlZXBBdHRyaWJ1dGVzLFxuICAgICAgICBnZXRBdHRyaWJ1dGVzOiBtYXRjaCA9PiAoeyBzdGFydDogK21hdGNoWzFdLCAuLi50aGlzLmVkaXRvci5nZXRBdHRyaWJ1dGVzKFRleHRTdHlsZS5uYW1lKSB9KSxcbiAgICAgICAgam9pblByZWRpY2F0ZTogKG1hdGNoLCBub2RlKSA9PiBub2RlLmNoaWxkQ291bnQgKyBub2RlLmF0dHJzLnN0YXJ0ID09PSArbWF0Y2hbMV0sXG4gICAgICAgIGVkaXRvcjogdGhpcy5lZGl0b3IsXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgaW5wdXRSdWxlLFxuICAgIF1cbiAgfSxcbn0pXG4iLCJpbXBvcnQgeyBtZXJnZUF0dHJpYnV0ZXMsIE5vZGUgfSBmcm9tICdAdGlwdGFwL2NvcmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyYWdyYXBoT3B0aW9ucyB7XG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxufVxuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgcGFyYWdyYXBoOiB7XG4gICAgICAvKipcbiAgICAgICAqIFRvZ2dsZSBhIHBhcmFncmFwaFxuICAgICAgICovXG4gICAgICBzZXRQYXJhZ3JhcGg6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBQYXJhZ3JhcGggPSBOb2RlLmNyZWF0ZTxQYXJhZ3JhcGhPcHRpb25zPih7XG4gIG5hbWU6ICdwYXJhZ3JhcGgnLFxuXG4gIHByaW9yaXR5OiAxMDAwLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgZ3JvdXA6ICdibG9jaycsXG5cbiAgY29udGVudDogJ2lubGluZSonLFxuXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW1xuICAgICAgeyB0YWc6ICdwJyB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ3AnLCBtZXJnZUF0dHJpYnV0ZXModGhpcy5vcHRpb25zLkhUTUxBdHRyaWJ1dGVzLCBIVE1MQXR0cmlidXRlcyksIDBdXG4gIH0sXG5cbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldFBhcmFncmFwaDogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuc2V0Tm9kZSh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgIH1cbiAgfSxcblxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ01vZC1BbHQtMCc6ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnNldFBhcmFncmFwaCgpLFxuICAgIH1cbiAgfSxcbn0pXG4iLCJpbXBvcnQge1xuICBpc01hY09TLFxuICBNYXJrLFxuICBtYXJrSW5wdXRSdWxlLFxuICBtYXJrUGFzdGVSdWxlLFxuICBtZXJnZUF0dHJpYnV0ZXMsXG59IGZyb20gJ0B0aXB0YXAvY29yZSdcblxuZXhwb3J0IGludGVyZmFjZSBTdHJpa2VPcHRpb25zIHtcbiAgSFRNTEF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG59XG5cbmRlY2xhcmUgbW9kdWxlICdAdGlwdGFwL2NvcmUnIHtcbiAgaW50ZXJmYWNlIENvbW1hbmRzPFJldHVyblR5cGU+IHtcbiAgICBzdHJpa2U6IHtcbiAgICAgIC8qKlxuICAgICAgICogU2V0IGEgc3RyaWtlIG1hcmtcbiAgICAgICAqL1xuICAgICAgc2V0U3RyaWtlOiAoKSA9PiBSZXR1cm5UeXBlLFxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgYSBzdHJpa2UgbWFya1xuICAgICAgICovXG4gICAgICB0b2dnbGVTdHJpa2U6ICgpID0+IFJldHVyblR5cGUsXG4gICAgICAvKipcbiAgICAgICAqIFVuc2V0IGEgc3RyaWtlIG1hcmtcbiAgICAgICAqL1xuICAgICAgdW5zZXRTdHJpa2U6ICgpID0+IFJldHVyblR5cGUsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBpbnB1dFJlZ2V4ID0gLyg/Ol58XFxzKSgoPzp+fikoKD86W15+XSspKSg/On5+KSkkL1xuZXhwb3J0IGNvbnN0IHBhc3RlUmVnZXggPSAvKD86XnxcXHMpKCg/On5+KSgoPzpbXn5dKykpKD86fn4pKS9nXG5cbmV4cG9ydCBjb25zdCBTdHJpa2UgPSBNYXJrLmNyZWF0ZTxTdHJpa2VPcHRpb25zPih7XG4gIG5hbWU6ICdzdHJpa2UnLFxuXG4gIGFkZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgcGFyc2VIVE1MKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogJ3MnLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnZGVsJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ3N0cmlrZScsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBzdHlsZTogJ3RleHQtZGVjb3JhdGlvbicsXG4gICAgICAgIGNvbnN1bWluZzogZmFsc2UsXG4gICAgICAgIGdldEF0dHJzOiBzdHlsZSA9PiAoKHN0eWxlIGFzIHN0cmluZykuaW5jbHVkZXMoJ2xpbmUtdGhyb3VnaCcpID8ge30gOiBmYWxzZSksXG4gICAgICB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ3MnLCBtZXJnZUF0dHJpYnV0ZXModGhpcy5vcHRpb25zLkhUTUxBdHRyaWJ1dGVzLCBIVE1MQXR0cmlidXRlcyksIDBdXG4gIH0sXG5cbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNldFN0cmlrZTogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuc2V0TWFyayh0aGlzLm5hbWUpXG4gICAgICB9LFxuICAgICAgdG9nZ2xlU3RyaWtlOiAoKSA9PiAoeyBjb21tYW5kcyB9KSA9PiB7XG4gICAgICAgIHJldHVybiBjb21tYW5kcy50b2dnbGVNYXJrKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgICB1bnNldFN0cmlrZTogKCkgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMudW5zZXRNYXJrKHRoaXMubmFtZSlcbiAgICAgIH0sXG4gICAgfVxuICB9LFxuXG4gIGFkZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIGNvbnN0IHNob3J0Y3V0czogUmVjb3JkPHN0cmluZywgKCkgPT4gYm9vbGVhbj4gPSB7fVxuXG4gICAgaWYgKGlzTWFjT1MoKSkge1xuICAgICAgc2hvcnRjdXRzWydNb2QtU2hpZnQtcyddID0gKCkgPT4gdGhpcy5lZGl0b3IuY29tbWFuZHMudG9nZ2xlU3RyaWtlKClcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvcnRjdXRzWydDdHJsLVNoaWZ0LXMnXSA9ICgpID0+IHRoaXMuZWRpdG9yLmNvbW1hbmRzLnRvZ2dsZVN0cmlrZSgpXG4gICAgfVxuXG4gICAgcmV0dXJuIHNob3J0Y3V0c1xuICB9LFxuXG4gIGFkZElucHV0UnVsZXMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIG1hcmtJbnB1dFJ1bGUoe1xuICAgICAgICBmaW5kOiBpbnB1dFJlZ2V4LFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG5cbiAgYWRkUGFzdGVSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbWFya1Bhc3RlUnVsZSh7XG4gICAgICAgIGZpbmQ6IHBhc3RlUmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgIH0pLFxuICAgIF1cbiAgfSxcbn0pXG4iLCJpbXBvcnQgeyBOb2RlIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5leHBvcnQgY29uc3QgVGV4dCA9IE5vZGUuY3JlYXRlKHtcbiAgbmFtZTogJ3RleHQnLFxuICBncm91cDogJ2lubGluZScsXG59KVxuIiwiaW1wb3J0IHsgRXh0ZW5zaW9uIH0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuaW1wb3J0IHsgQmxvY2txdW90ZSwgQmxvY2txdW90ZU9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1ibG9ja3F1b3RlJ1xuaW1wb3J0IHsgQm9sZCwgQm9sZE9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1ib2xkJ1xuaW1wb3J0IHsgQnVsbGV0TGlzdCwgQnVsbGV0TGlzdE9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1idWxsZXQtbGlzdCdcbmltcG9ydCB7IENvZGUsIENvZGVPcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24tY29kZSdcbmltcG9ydCB7IENvZGVCbG9jaywgQ29kZUJsb2NrT3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvZXh0ZW5zaW9uLWNvZGUtYmxvY2snXG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gJ0B0aXB0YXAvZXh0ZW5zaW9uLWRvY3VtZW50J1xuaW1wb3J0IHsgRHJvcGN1cnNvciwgRHJvcGN1cnNvck9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1kcm9wY3Vyc29yJ1xuaW1wb3J0IHsgR2FwY3Vyc29yIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24tZ2FwY3Vyc29yJ1xuaW1wb3J0IHsgSGFyZEJyZWFrLCBIYXJkQnJlYWtPcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24taGFyZC1icmVhaydcbmltcG9ydCB7IEhlYWRpbmcsIEhlYWRpbmdPcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24taGVhZGluZydcbmltcG9ydCB7IEhpc3RvcnksIEhpc3RvcnlPcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24taGlzdG9yeSdcbmltcG9ydCB7IEhvcml6b250YWxSdWxlLCBIb3Jpem9udGFsUnVsZU9wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1ob3Jpem9udGFsLXJ1bGUnXG5pbXBvcnQgeyBJdGFsaWMsIEl0YWxpY09wdGlvbnMgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi1pdGFsaWMnXG5pbXBvcnQgeyBMaXN0SXRlbSwgTGlzdEl0ZW1PcHRpb25zIH0gZnJvbSAnQHRpcHRhcC9leHRlbnNpb24tbGlzdC1pdGVtJ1xuaW1wb3J0IHsgT3JkZXJlZExpc3QsIE9yZGVyZWRMaXN0T3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvZXh0ZW5zaW9uLW9yZGVyZWQtbGlzdCdcbmltcG9ydCB7IFBhcmFncmFwaCwgUGFyYWdyYXBoT3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvZXh0ZW5zaW9uLXBhcmFncmFwaCdcbmltcG9ydCB7IFN0cmlrZSwgU3RyaWtlT3B0aW9ucyB9IGZyb20gJ0B0aXB0YXAvZXh0ZW5zaW9uLXN0cmlrZSdcbmltcG9ydCB7IFRleHQgfSBmcm9tICdAdGlwdGFwL2V4dGVuc2lvbi10ZXh0J1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0ZXJLaXRPcHRpb25zIHtcbiAgYmxvY2txdW90ZTogUGFydGlhbDxCbG9ja3F1b3RlT3B0aW9ucz4gfCBmYWxzZSxcbiAgYm9sZDogUGFydGlhbDxCb2xkT3B0aW9ucz4gfCBmYWxzZSxcbiAgYnVsbGV0TGlzdDogUGFydGlhbDxCdWxsZXRMaXN0T3B0aW9ucz4gfCBmYWxzZSxcbiAgY29kZTogUGFydGlhbDxDb2RlT3B0aW9ucz4gfCBmYWxzZSxcbiAgY29kZUJsb2NrOiBQYXJ0aWFsPENvZGVCbG9ja09wdGlvbnM+IHwgZmFsc2UsXG4gIGRvY3VtZW50OiBmYWxzZSxcbiAgZHJvcGN1cnNvcjogUGFydGlhbDxEcm9wY3Vyc29yT3B0aW9ucz4gfCBmYWxzZSxcbiAgZ2FwY3Vyc29yOiBmYWxzZSxcbiAgaGFyZEJyZWFrOiBQYXJ0aWFsPEhhcmRCcmVha09wdGlvbnM+IHwgZmFsc2UsXG4gIGhlYWRpbmc6IFBhcnRpYWw8SGVhZGluZ09wdGlvbnM+IHwgZmFsc2UsXG4gIGhpc3Rvcnk6IFBhcnRpYWw8SGlzdG9yeU9wdGlvbnM+IHwgZmFsc2UsXG4gIGhvcml6b250YWxSdWxlOiBQYXJ0aWFsPEhvcml6b250YWxSdWxlT3B0aW9ucz4gfCBmYWxzZSxcbiAgaXRhbGljOiBQYXJ0aWFsPEl0YWxpY09wdGlvbnM+IHwgZmFsc2UsXG4gIGxpc3RJdGVtOiBQYXJ0aWFsPExpc3RJdGVtT3B0aW9ucz4gfCBmYWxzZSxcbiAgb3JkZXJlZExpc3Q6IFBhcnRpYWw8T3JkZXJlZExpc3RPcHRpb25zPiB8IGZhbHNlLFxuICBwYXJhZ3JhcGg6IFBhcnRpYWw8UGFyYWdyYXBoT3B0aW9ucz4gfCBmYWxzZSxcbiAgc3RyaWtlOiBQYXJ0aWFsPFN0cmlrZU9wdGlvbnM+IHwgZmFsc2UsXG4gIHRleHQ6IGZhbHNlLFxufVxuXG5leHBvcnQgY29uc3QgU3RhcnRlcktpdCA9IEV4dGVuc2lvbi5jcmVhdGU8U3RhcnRlcktpdE9wdGlvbnM+KHtcbiAgbmFtZTogJ3N0YXJ0ZXJLaXQnLFxuXG4gIGFkZEV4dGVuc2lvbnMoKSB7XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IFtdXG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmJsb2NrcXVvdGUgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goQmxvY2txdW90ZS5jb25maWd1cmUodGhpcy5vcHRpb25zPy5ibG9ja3F1b3RlKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmJvbGQgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goQm9sZC5jb25maWd1cmUodGhpcy5vcHRpb25zPy5ib2xkKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmJ1bGxldExpc3QgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goQnVsbGV0TGlzdC5jb25maWd1cmUodGhpcy5vcHRpb25zPy5idWxsZXRMaXN0KSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmNvZGUgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goQ29kZS5jb25maWd1cmUodGhpcy5vcHRpb25zPy5jb2RlKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmNvZGVCbG9jayAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChDb2RlQmxvY2suY29uZmlndXJlKHRoaXMub3B0aW9ucz8uY29kZUJsb2NrKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmRvY3VtZW50ICE9PSBmYWxzZSkge1xuICAgICAgZXh0ZW5zaW9ucy5wdXNoKERvY3VtZW50LmNvbmZpZ3VyZSh0aGlzLm9wdGlvbnM/LmRvY3VtZW50KSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmRyb3BjdXJzb3IgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goRHJvcGN1cnNvci5jb25maWd1cmUodGhpcy5vcHRpb25zPy5kcm9wY3Vyc29yKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmdhcGN1cnNvciAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChHYXBjdXJzb3IuY29uZmlndXJlKHRoaXMub3B0aW9ucz8uZ2FwY3Vyc29yKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmhhcmRCcmVhayAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChIYXJkQnJlYWsuY29uZmlndXJlKHRoaXMub3B0aW9ucz8uaGFyZEJyZWFrKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmhlYWRpbmcgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goSGVhZGluZy5jb25maWd1cmUodGhpcy5vcHRpb25zPy5oZWFkaW5nKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmhpc3RvcnkgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goSGlzdG9yeS5jb25maWd1cmUodGhpcy5vcHRpb25zPy5oaXN0b3J5KSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmhvcml6b250YWxSdWxlICE9PSBmYWxzZSkge1xuICAgICAgZXh0ZW5zaW9ucy5wdXNoKEhvcml6b250YWxSdWxlLmNvbmZpZ3VyZSh0aGlzLm9wdGlvbnM/Lmhvcml6b250YWxSdWxlKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLml0YWxpYyAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChJdGFsaWMuY29uZmlndXJlKHRoaXMub3B0aW9ucz8uaXRhbGljKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmxpc3RJdGVtICE9PSBmYWxzZSkge1xuICAgICAgZXh0ZW5zaW9ucy5wdXNoKExpc3RJdGVtLmNvbmZpZ3VyZSh0aGlzLm9wdGlvbnM/Lmxpc3RJdGVtKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm9yZGVyZWRMaXN0ICE9PSBmYWxzZSkge1xuICAgICAgZXh0ZW5zaW9ucy5wdXNoKE9yZGVyZWRMaXN0LmNvbmZpZ3VyZSh0aGlzLm9wdGlvbnM/Lm9yZGVyZWRMaXN0KSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhcmFncmFwaCAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChQYXJhZ3JhcGguY29uZmlndXJlKHRoaXMub3B0aW9ucz8ucGFyYWdyYXBoKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnN0cmlrZSAhPT0gZmFsc2UpIHtcbiAgICAgIGV4dGVuc2lvbnMucHVzaChTdHJpa2UuY29uZmlndXJlKHRoaXMub3B0aW9ucz8uc3RyaWtlKSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnRleHQgIT09IGZhbHNlKSB7XG4gICAgICBleHRlbnNpb25zLnB1c2goVGV4dC5jb25maWd1cmUodGhpcy5vcHRpb25zPy50ZXh0KSlcbiAgICB9XG5cbiAgICByZXR1cm4gZXh0ZW5zaW9uc1xuICB9LFxufSlcbiIsIlwidXNlIGNsaWVudFwiO1xuaW1wb3J0IHsgRWRpdG9yQ29udGVudCwgdXNlRWRpdG9yIH0gZnJvbSBcIkB0aXB0YXAvcmVhY3RcIjtcbmltcG9ydCBTdGFydGVyS2l0IGZyb20gXCJAdGlwdGFwL3N0YXJ0ZXIta2l0XCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgSW1hZ2UgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWltYWdlXCI7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGNvbnRlbnQ6IGFueTtcbn07XG5cbmNvbnN0IGV4dGVuc2lvbnMgPSBbU3RhcnRlcktpdCwgSW1hZ2VdO1xuZXhwb3J0IGNvbnN0IENvbnRlbnRSZW5kZXJlciA9ICh7IGNvbnRlbnQgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgZWRpdG9yID0gdXNlRWRpdG9yKHtcbiAgICBleHRlbnNpb25zLFxuICAgIGNvbnRlbnQsXG4gICAgZWRpdGFibGU6IGZhbHNlLFxuICB9KTtcbiAgcmV0dXJuIDxFZGl0b3JDb250ZW50IGVkaXRvcj17ZWRpdG9yfT48L0VkaXRvckNvbnRlbnQ+O1xufTtcbiIsImltcG9ydCB7XG4gIG1lcmdlQXR0cmlidXRlcyxcbiAgTm9kZSxcbiAgbm9kZUlucHV0UnVsZSxcbn0gZnJvbSAnQHRpcHRhcC9jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlT3B0aW9ucyB7XG4gIGlubGluZTogYm9vbGVhbixcbiAgYWxsb3dCYXNlNjQ6IGJvb2xlYW4sXG4gIEhUTUxBdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxufVxuXG5kZWNsYXJlIG1vZHVsZSAnQHRpcHRhcC9jb3JlJyB7XG4gIGludGVyZmFjZSBDb21tYW5kczxSZXR1cm5UeXBlPiB7XG4gICAgaW1hZ2U6IHtcbiAgICAgIC8qKlxuICAgICAgICogQWRkIGFuIGltYWdlXG4gICAgICAgKi9cbiAgICAgIHNldEltYWdlOiAob3B0aW9uczogeyBzcmM6IHN0cmluZywgYWx0Pzogc3RyaW5nLCB0aXRsZT86IHN0cmluZyB9KSA9PiBSZXR1cm5UeXBlLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaW5wdXRSZWdleCA9IC8oPzpefFxccykoIVxcWyguK3w6PyldXFwoKFxcUyspKD86KD86XFxzKylbXCInXShcXFMrKVtcIiddKT9cXCkpJC9cblxuZXhwb3J0IGNvbnN0IEltYWdlID0gTm9kZS5jcmVhdGU8SW1hZ2VPcHRpb25zPih7XG4gIG5hbWU6ICdpbWFnZScsXG5cbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIGFsbG93QmFzZTY0OiBmYWxzZSxcbiAgICAgIEhUTUxBdHRyaWJ1dGVzOiB7fSxcbiAgICB9XG4gIH0sXG5cbiAgaW5saW5lKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW5saW5lXG4gIH0sXG5cbiAgZ3JvdXAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pbmxpbmUgPyAnaW5saW5lJyA6ICdibG9jaydcbiAgfSxcblxuICBkcmFnZ2FibGU6IHRydWUsXG5cbiAgYWRkQXR0cmlidXRlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3JjOiB7XG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB9LFxuICAgICAgYWx0OiB7XG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICB9LFxuICAgICAgdGl0bGU6IHtcbiAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgIH0sXG4gICAgfVxuICB9LFxuXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0YWc6IHRoaXMub3B0aW9ucy5hbGxvd0Jhc2U2NFxuICAgICAgICAgID8gJ2ltZ1tzcmNdJ1xuICAgICAgICAgIDogJ2ltZ1tzcmNdOm5vdChbc3JjXj1cImRhdGE6XCJdKScsXG4gICAgICB9LFxuICAgIF1cbiAgfSxcblxuICByZW5kZXJIVE1MKHsgSFRNTEF0dHJpYnV0ZXMgfSkge1xuICAgIHJldHVybiBbJ2ltZycsIG1lcmdlQXR0cmlidXRlcyh0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKV1cbiAgfSxcblxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2V0SW1hZ2U6IG9wdGlvbnMgPT4gKHsgY29tbWFuZHMgfSkgPT4ge1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuaW5zZXJ0Q29udGVudCh7XG4gICAgICAgICAgdHlwZTogdGhpcy5uYW1lLFxuICAgICAgICAgIGF0dHJzOiBvcHRpb25zLFxuICAgICAgICB9KVxuICAgICAgfSxcbiAgICB9XG4gIH0sXG5cbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW1xuICAgICAgbm9kZUlucHV0UnVsZSh7XG4gICAgICAgIGZpbmQ6IGlucHV0UmVnZXgsXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgZ2V0QXR0cmlidXRlczogbWF0Y2ggPT4ge1xuICAgICAgICAgIGNvbnN0IFssLCBhbHQsIHNyYywgdGl0bGVdID0gbWF0Y2hcblxuICAgICAgICAgIHJldHVybiB7IHNyYywgYWx0LCB0aXRsZSB9XG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICBdXG4gIH0sXG59KVxuIl19